"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
;
(() => {
    const defs = {};
    const resolved = {};
    // save original define and require
    window.___amd___OriginalDefine = window.define;
    window.___amd___OriginalRequire = window.require;
    if (!window.define && !window.require) {
        const define = (id, deps, factory) => {
            if (defs[id]) {
                throw new Error('Duplicate definition for ' + id);
            }
            defs[id] = [deps, factory];
        };
        define.amd = {
            bundle: true, // this implementation works only with bundled amd modules
            dynamic: false, // does not support dynamic or async loading
        };
        const require = (id) => {
            if (id === 'require')
                return require;
            if (id === 'exports')
                return {};
            if (resolved[id])
                return resolved[id];
            if (!defs[id]) {
                console.log(defs, id);
                throw new Error('No definition for ' + id);
            }
            const moduleExports = {};
            const deps = defs[id][0];
            const factory = defs[id][1];
            const args = deps.map(dep => {
                if (dep === 'exports') {
                    return moduleExports;
                }
                return require(dep);
            });
            factory.apply(null, args);
            return resolved[id] = moduleExports;
        };
        window.define = define;
        window.require = require;
    }
    window.___amd___requireResolver = () => {
        for (const id in defs) {
            if (defs.hasOwnProperty(id)) {
                const deps = defs[id][0];
                if (deps) {
                    deps.map(dep => {
                        if (dep !== 'require' &&
                            dep !== 'exports') {
                            if (!resolved.hasOwnProperty(dep)) {
                                require(dep);
                            }
                            if (!defs.hasOwnProperty(dep) &&
                                !resolved.hasOwnProperty(dep)) {
                                throw new Error(`Failed define '${id}' dep not found '${dep}'`);
                            }
                        }
                    });
                }
                require(id);
                delete defs[id];
            }
        }
        // return original define and require
        window.define = window.___amd___OriginalDefine;
        window.require = window.___amd___OriginalRequire;
        // clear
        delete window.___amd___requireResolver;
        delete window.___amd___OriginalDefine;
        delete window.___amd___OriginalRequire;
    };
})();
define("src/Shared/Types", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/TerrainSystem/IZone", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Shared/Compressor", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class Compressor {
        static _concatChunks(chunks, totalLength) {
            let position = 0;
            // Concatenate all Uint8Array chunks into a single ArrayBuffer
            const resultBuffer = new Uint8Array(totalLength);
            for (const chunk of chunks) {
                resultBuffer.set(chunk, position);
                position += chunk.length;
            }
            return resultBuffer.buffer;
        }
        static _getResult(reader) {
            return __awaiter(this, void 0, void 0, function* () {
                let totalLength = 0;
                const chunks = [];
                while (true) {
                    const { done, value } = yield reader.read();
                    if (done)
                        break;
                    chunks.push(value);
                    totalLength += value.length;
                }
                return this._concatChunks(chunks, totalLength);
            });
        }
        static compressBuffer(buffer_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, format = 'gzip') {
                const compressedStream = new CompressionStream(format);
                const writer = compressedStream.writable.getWriter();
                writer.write(new Uint8Array(buffer));
                writer.close();
                const reader = compressedStream.readable.getReader();
                return this._getResult(reader);
            });
        }
        static decompressBuffer(buffer_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, format = 'gzip') {
                const decompressedStream = new DecompressionStream(format);
                const reader = decompressedStream.readable.getReader();
                const writer = decompressedStream.writable.getWriter();
                // Write the compressed buffer to the writer
                writer.write(new Uint8Array(buffer));
                writer.close();
                return this._getResult(reader);
            });
        }
    }
    exports.default = Compressor;
});
define("src/TerrainSystem/AbsHeightMapFileIO", ["require", "exports", "src/Shared/Compressor"], function (require, exports, Compressor_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsHeightMapFileIO = exports.heightMapFileCompressedFormat = exports.factorSize = exports.heightMapVersion = void 0;
    Compressor_mjs_1 = __importDefault(Compressor_mjs_1);
    exports.heightMapVersion = 99;
    exports.factorSize = 3;
    exports.heightMapFileCompressedFormat = 'gzip';
    class AbsHeightMapFileIO {
        __readHeightFactor(view, headerSize, width, x, z) {
            const index = z * width + x;
            const r = view.getUint8(headerSize + index * exports.factorSize + 0);
            const g = view.getUint8(headerSize + index * exports.factorSize + 1);
            const b = view.getUint8(headerSize + index * exports.factorSize + 2);
            const scaled = (r << 16) | (g << 8) | b;
            const factor = scaled / 0xffffff;
            return factor;
        }
        __writeHeightFactor(view, headerSize, heightMap, x, z) {
            const index = z * heightMap.width + x;
            const factor = heightMap.getFactor(x, z);
            const scaled = Math.floor(factor * 0xffffff);
            const r = (scaled >> 16) & 0xff;
            const g = (scaled >> 8) & 0xff;
            const b = (scaled & 0xff);
            view.setUint8(headerSize + index * exports.factorSize + 0, r);
            view.setUint8(headerSize + index * exports.factorSize + 1, g);
            view.setUint8(headerSize + index * exports.factorSize + 2, b);
        }
        __importFromFile(heightMap, buffer, options) {
            return __awaiter(this, void 0, void 0, function* () {
                // TODO:
                // header version 99
                // headerByteSize, version, width, depth, maxHeight
                const nBuffer = yield Compressor_mjs_1.default.decompressBuffer(buffer, exports.heightMapFileCompressedFormat);
                const view = new DataView(nBuffer);
                const version = view.getUint32(1, true);
                if (version !== exports.heightMapVersion) {
                    console.warn('Height map version: %f no support.', version);
                    return null;
                }
                const headerSize = view.getUint8(0);
                const width = view.getUint32(5, true);
                const depth = view.getUint32(9, true);
                const maxHeight = view.getFloat32(13, true);
                const finalMaxHeight = (options === null || options === void 0 ? void 0 : options.adaptiveMaxHeight) ? heightMap.maxHeight : maxHeight;
                if (heightMap.width !== width ||
                    heightMap.depth !== depth &&
                        options &&
                        options.adaptiveWidthAndDepth) {
                    // TODO: its work for x^n + 1, z^n + 1
                    const factorX = (width - 1) / (heightMap.width - 1);
                    const factorZ = (depth - 1) / (heightMap.depth - 1);
                    for (let z = 0; z < depth; z += factorZ) {
                        for (let x = 0; x < width; x += factorX) {
                            // TODO: smooth for heightMap more import data
                            const factor = this.__readHeightFactor(view, headerSize, width, x | 0, z | 0);
                            const height = factor * finalMaxHeight;
                            heightMap.set(x / factorX, z / factorZ, height);
                        }
                    }
                }
                else {
                    for (let z = 0; (z < depth) && (z < heightMap.depth); z++) {
                        for (let x = 0; (x < width) && (x < heightMap.width); x++) {
                            const factor = this.__readHeightFactor(view, headerSize, width, x, z);
                            const height = factor * finalMaxHeight;
                            heightMap.set(x, z, height);
                        }
                    }
                }
                return {
                    width,
                    depth,
                    maxHeight
                };
            });
        }
        __exportToBuffer(heightMap) {
            return __awaiter(this, void 0, void 0, function* () {
                // TODO:
                // header version 99
                // headerByteSize, version, width, depth, maxHeight
                const headerSize = 1 + 4 + 4 + 4 + 4;
                const buffer = new ArrayBuffer(headerSize + exports.factorSize * heightMap.width * heightMap.depth);
                const view = new DataView(buffer);
                view.setUint8(0, headerSize);
                view.setUint32(1, exports.heightMapVersion, true);
                view.setUint32(5, heightMap.width, true);
                view.setUint32(9, heightMap.depth, true);
                view.setFloat32(13, heightMap.maxHeight, true);
                for (let z = 0; z < heightMap.depth; z++) {
                    for (let x = 0; x < heightMap.width; x++) {
                        this.__writeHeightFactor(view, headerSize, heightMap, x, z);
                    }
                }
                return Compressor_mjs_1.default.compressBuffer(buffer, exports.heightMapFileCompressedFormat);
            });
        }
    }
    exports.AbsHeightMapFileIO = AbsHeightMapFileIO;
    exports.default = AbsHeightMapFileIO;
});
define("src/TerrainSystem/AbsHeightMap", ["require", "exports", "src/TerrainSystem/AbsHeightMapFileIO"], function (require, exports, AbsHeightMapFileIO_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsHeightMap = void 0;
    AbsHeightMapFileIO_mjs_1 = __importDefault(AbsHeightMapFileIO_mjs_1);
    class AbsHeightMap extends AbsHeightMapFileIO_mjs_1.default {
        constructor() {
            super(...arguments);
            this.minX = 0;
            this.minZ = 0;
        }
        get maxX() { return this.width; }
        get maxZ() { return this.depth; }
        getHeightInterpolated(x, z) {
            const intX = x | 0;
            const intZ = z | 0;
            const x0z0 = this.get(intX, intZ);
            if ((intX + 1 >= this.width) ||
                (intZ + 1 >= this.depth)) {
                return x0z0;
            }
            const x1z0 = this.get(intX + 1, intZ);
            const x0z1 = this.get(intX, intZ + 1);
            const x1z1 = this.get(intX + 1, intZ + 1);
            const factorX = x - intX;
            const interpolatedBottom = (x1z0 - x0z0) * factorX + x0z0;
            const interpolatedTop = (x1z1 - x0z1) * factorX + x0z1;
            const factorZ = z - intZ;
            const finalHeight = (interpolatedTop - interpolatedBottom) * factorZ + interpolatedBottom;
            return finalHeight;
        }
        substract(x, z, value) {
            return this.append(x, z, -value);
        }
        divide(x, z, value, heightIfZero = 0) {
            return this.multiply(x, z, 1 / value, heightIfZero);
        }
        fromFile(buffer, options) {
            return __awaiter(this, void 0, void 0, function* () {
                return yield this.__importFromFile(this, buffer, options);
            });
        }
        toFile() {
            return __awaiter(this, void 0, void 0, function* () {
                const buffer = yield this.__exportToBuffer(this);
                return new Blob([buffer], { type: "application/octet-stream" });
            });
        }
        toBuffer(buffer) {
            const width = this.width;
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    const h = this.get(x, z);
                    const v = h / this.maxHeight * 255;
                    const pos = (x + z * width) * 4;
                    buffer[pos] = v;
                    buffer[pos + 1] = v;
                    buffer[pos + 2] = v;
                    buffer[pos + 3] = 255;
                }
            }
        }
        toCanvas() {
            const canvas = document.createElement('canvas');
            const width = this.width;
            const height = this.depth;
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');
            if (!ctx) {
                throw new Error('Failed create canvas 2d context');
            }
            const imageData = ctx.getImageData(0, 0, width, height);
            const buffer = imageData.data;
            this.toBuffer(buffer);
            ctx.putImageData(imageData, 0, 0);
            return canvas;
        }
        /**
         * Save height map to image of base64
         */
        toImage(type, quality) {
            const canvas = this.toCanvas();
            return canvas.toDataURL(type, quality);
        }
        /**
         * Load height map from image
         * @param img
         */
        fromImage(img) {
            const bufferWidth = img.width;
            const bufferHeight = img.height;
            if (bufferWidth % 2 !== 0 || bufferHeight % 2 !== 0) {
                throw new Error("Map sizes not divisible by 2 are not supported");
            }
            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            canvas.width = bufferWidth;
            canvas.height = bufferHeight;
            context.drawImage(img, 0, 0);
            const imageData = context.getImageData(0, 0, bufferWidth, bufferHeight);
            const imageBuffer = imageData.data;
            const maxSegmentX = this.width - 1;
            const maxSegmentZ = this.depth - 1;
            const factorX = bufferWidth / maxSegmentX;
            const factorZ = bufferHeight / maxSegmentZ;
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    let normalizeX = x === maxSegmentX ? x - 1 : x;
                    let normalizeZ = z === maxSegmentZ ? z - 1 : z;
                    const heightMapX = (normalizeX * factorX) | 0;
                    const heightMapZ = (normalizeZ * factorZ) | 0;
                    const pos = (heightMapX + heightMapZ * bufferWidth) * 4;
                    const r = imageBuffer[pos];
                    const g = imageBuffer[pos + 1];
                    const b = imageBuffer[pos + 2];
                    const a = imageBuffer[pos + 3];
                    const coeff = (r + g + b) / 3 / a;
                    const height = coeff * this.maxHeight;
                    this.set(x, z, height);
                }
            }
        }
        smoothZone(zone, np, radius) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            if (np < 0 || np > 1)
                return;
            if (radius === 0)
                radius = 1;
            const minX = Math.max(zone.minX, 0);
            const minZ = Math.max(zone.minZ, 0);
            const maxX = Math.min(zone.maxX, this.width);
            const maxZ = Math.min(zone.maxZ, this.depth);
            const cp = 1 - np;
            for (let x = minX; x < maxX; x++) {
                for (let z = minZ; z < maxZ; z++) {
                    const prevHeight = this.get(x, z);
                    let updtHeight;
                    let neighNumber = 0;
                    let neighAverage = 0;
                    for (let rx = -radius; rx <= radius; rx++) {
                        for (let rz = -radius; rz <= radius; rz++) {
                            const innerX = (x + rx);
                            const innerZ = (z + rz);
                            if (innerX < 0 || innerX >= this.width)
                                continue;
                            if (innerZ < 0 || innerZ >= this.depth)
                                continue;
                            const height = (innerX === x && innerZ === z)
                                ? prevHeight
                                : this.get(innerX, innerZ);
                            neighNumber++;
                            neighAverage += height;
                        }
                    }
                    neighAverage /= neighNumber;
                    updtHeight = neighAverage * np + prevHeight * cp;
                    this.set(x, z, updtHeight);
                }
            }
        }
        smooth(np, radius) {
            this.smoothZone(this, np, radius);
        }
        normalize(maxHeight) {
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    const currentHeight = this.get(x, z);
                    const normalizeHeight = (currentHeight / this.maxHeight) * maxHeight;
                    this.set(x, z, normalizeHeight);
                }
            }
        }
        combineHeights(type, heightMap, value, zone, heightIfZero = 0, minHeight = null, maxHeight = null) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const lenX = zone.maxX - zone.minX;
            const lenZ = zone.maxZ - zone.minZ;
            if (lenX < 1 || lenZ < 1 || value === 0) {
                return;
            }
            const fixedMinX = Math.max(zone.minX, 0);
            const fixedMinZ = Math.max(zone.minZ, 0);
            const fixedMaxX = Math.min(zone.maxX, this.width);
            const fixedMaxZ = Math.min(zone.maxZ, this.depth);
            const coeffFactorX = (heightMap.width - 1) / lenX;
            const coeffFactorZ = (heightMap.depth - 1) / lenZ;
            for (let z = fixedMinZ; z < fixedMaxZ; z++) {
                for (let x = fixedMinX; x < fixedMaxX; x++) {
                    const x2 = (coeffFactorX * (x - zone.minX)) | 0;
                    const z2 = (coeffFactorZ * (z - zone.minZ)) | 0;
                    const height = heightMap.get(x2, z2);
                    const smoothAppendValue = height * value;
                    const oldHeight = this.get(x, z) || heightIfZero;
                    let candidate = type === '+' ? oldHeight + smoothAppendValue :
                        type === '-' ? oldHeight - smoothAppendValue :
                            type === '*' ? oldHeight * smoothAppendValue :
                                type === '/' ? oldHeight / smoothAppendValue :
                                    oldHeight;
                    if (minHeight !== null && candidate < minHeight) {
                        candidate = minHeight;
                    }
                    if (maxHeight !== null && candidate > maxHeight) {
                        candidate = maxHeight;
                    }
                    this.set(x, z, candidate);
                }
            }
        }
    }
    exports.AbsHeightMap = AbsHeightMap;
    exports.default = AbsHeightMap;
});
define("src/TerrainSystem/HeightMap", ["require", "exports", "src/TerrainSystem/AbsHeightMap"], function (require, exports, AbsHeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.HeightMap = exports.defaultHeightVertexSize = exports.HeightMapArrType = void 0;
    AbsHeightMap_mjs_1 = __importDefault(AbsHeightMap_mjs_1);
    exports.HeightMapArrType = Float32Array;
    exports.defaultHeightVertexSize = 1;
    class HeightMap extends AbsHeightMap_mjs_1.default {
        get size() { return this._width * this._depth; }
        get width() { return this._width; }
        get depth() { return this._depth; }
        get data() { return this._data; }
        get format() { return 'rgba'; }
        get itemSize() { return this._itemSize; }
        get itemHeightIndexOffset() { return this._itemHeightIndexOffset; }
        get maxHeight() { return this._maxHeight; }
        constructor(width, depth, maxHeight, buffer, itemSize = exports.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            super();
            this._width = 0;
            this._depth = 0;
            this._maxHeight = 0;
            this._init(width, depth, maxHeight, buffer, itemSize, itemHeightIndexOffset);
        }
        _init(width, depth, maxHeight, buffer, itemSize = exports.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            this._width = width;
            this._depth = depth;
            this._maxHeight = maxHeight;
            if (buffer) {
                if (itemSize < itemHeightIndexOffset) {
                    throw new Error("ItemSize can't less or eq ItemHeightIndexOffset");
                }
                if (buffer.length < (width * depth) * itemSize) {
                    throw new Error("Buffer has invalid length");
                }
                this._data = buffer;
                this._itemSize = itemSize;
                this._itemHeightIndexOffset = itemHeightIndexOffset;
            }
            else {
                // TODO: type checker
                this._data = new exports.HeightMapArrType(width * depth * exports.defaultHeightVertexSize);
                this._itemSize = exports.defaultHeightVertexSize;
                this._itemHeightIndexOffset = 0;
            }
        }
        _encodeHeightFactor(store, index, value) {
            store[index] = value;
        }
        _decodeHeightFactor(store, index) {
            return store[index];
        }
        _decodeHeight(store, index, max) {
            return this._decodeHeightFactor(store, index) * max;
        }
        _encodeAndSetHeightFactor(store, index, realHeight, max) {
            const normalize = Math.max(Math.min(realHeight, max), 0);
            const factor = normalize / max;
            this._encodeHeightFactor(store, index, factor);
            return this._decodeHeightFactor(store, index);
        }
        getIndex(x, z) {
            return (z * this._width + x) * this._itemSize + this._itemHeightIndexOffset;
        }
        getFactor(x, z) {
            const index = this.getIndex(x, z);
            return this._decodeHeightFactor(this._data, index);
        }
        get(x, z) {
            const index = this.getIndex(x, z);
            return this._decodeHeight(this._data, index, this._maxHeight);
        }
        set(x, z, value) {
            const index = this.getIndex(x, z);
            return this._encodeAndSetHeightFactor(this._data, index, value, this._maxHeight);
        }
        setMaxHeight(maxHeight) {
            this._maxHeight = maxHeight;
        }
        append(x, z, value) {
            const index = this.getIndex(x, z);
            const oldValue = this._decodeHeight(this._data, index, this._maxHeight);
            const canValue = oldValue + value;
            return this._encodeAndSetHeightFactor(this._data, index, canValue, this._maxHeight);
        }
        multiply(x, z, value, heightIfZero = 0) {
            const index = this.getIndex(x, z);
            const oldValue = this._decodeHeight(this._data, index, this._maxHeight) || heightIfZero;
            const canValue = oldValue * value;
            return this._encodeAndSetHeightFactor(this._data, index, canValue, this._maxHeight);
        }
    }
    exports.HeightMap = HeightMap;
    exports.default = HeightMap;
});
define("src/TerrainSystem/AbsPatchedHeightMap", ["require", "exports", "src/TerrainSystem/HeightMap"], function (require, exports, HeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsPatchedHeightMap = exports.minMaxStackSize = void 0;
    exports.getOrThrowDataChunkSize = getOrThrowDataChunkSize;
    HeightMap_mjs_1 = __importStar(HeightMap_mjs_1);
    exports.minMaxStackSize = 2;
    function getOrThrowDataChunkSize(patchSize, dataChunkSize) {
        if ((dataChunkSize - 1) % (patchSize - 1) !== 0) {
            const recommendedWidth = ((dataChunkSize - 1 + patchSize - 1) / (dataChunkSize - 1)) * (patchSize - 1) + 1;
            console.error("DataChunkSize minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", dataChunkSize, patchSize);
            console.error("Try using DataChunkSize = %d\n", recommendedWidth);
            throw new Error();
        }
        return dataChunkSize;
    }
    class AbsPatchedHeightMap extends HeightMap_mjs_1.default {
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        get dataChunkSize() { return this._dataChunkSize; }
        get dataNumChunksX() { return this._dataNumChunksX; }
        get dataNumChunksZ() { return this._dataNumChunksZ; }
        get dataChunkSizeFactor() { return this._dataChunkSizeFactor; }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, buffer, itemSize = HeightMap_mjs_1.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            super(width, depth, maxHeight, buffer /** TS huck */, itemSize, itemHeightIndexOffset);
            this._minHeightCoord = [0, 0];
            this._maxHeightCoord = [0, 0];
            this._setPatchSize(patchSize);
            this._setDataChunkSize(dataChunkSize);
            this._clearMinMaxHeightCoords();
        }
        _setPatchSize(patchSize) {
            this._patchSize = patchSize;
            this._numPatchesX = ((this.width - 1) / (this._patchSize - 1)) | 0;
            this._numPatchesZ = ((this.depth - 1) / (this._patchSize - 1)) | 0;
            this._patchesSegmentSize = this._numPatchesX * this._numPatchesZ * exports.minMaxStackSize;
            this._minMaxHeightCoords = new Array(this._patchesSegmentSize * 2);
        }
        _setDataChunkSize(value) {
            this._dataChunkSize = getOrThrowDataChunkSize(this._patchSize, value);
            this._dataNumChunksX = ((this.width - 1) / (this._dataChunkSize - 1)) | 0;
            this._dataNumChunksZ = ((this.depth - 1) / (this._dataChunkSize - 1)) | 0;
            this._dataChunkSizeFactor = this._patchSize === this._dataChunkSize
                ? 1.0
                : this._patchSize / (this._dataChunkSize + this._patchSize - (this._dataChunkSize % this._patchSize));
        }
        getIndex(x, z) {
            const localX = x % this._dataChunkSize;
            const localZ = z % this._dataChunkSize;
            const chunkX = x / this._dataChunkSize | 0;
            const chunkZ = z / this._dataChunkSize | 0;
            const chunkOffset = (chunkZ * this._dataNumChunksX + chunkX) * (Math.pow(this._dataChunkSize, 2));
            const localIndex = (localZ * this._dataChunkSize + localX);
            return chunkOffset + localIndex;
        }
        getChunkIndex(chunkX, chunkZ) {
            return chunkZ * this._dataNumChunksX + chunkX;
        }
        getChunkBuffer(type, chunkX, chunkZ) {
            const size = Math.pow(this.dataChunkSize, 2);
            const chunkLevel = chunkZ * this.dataNumChunksX + chunkX;
            const chunkOffset = chunkLevel * size * this.data.BYTES_PER_ELEMENT;
            const count = size * (this.data.BYTES_PER_ELEMENT / type.BYTES_PER_ELEMENT);
            return new type(this.data.buffer, this.data.byteOffset + chunkOffset, count);
        }
        getChunksBuffers(type) {
            const result = new Array(this._dataNumChunksX * this._dataNumChunksZ);
            for (let chunkZ = 0; chunkZ < this._dataNumChunksZ; chunkZ++) {
                for (let chunkX = 0; chunkX < this._dataNumChunksX; chunkX++) {
                    const index = chunkZ * this._dataNumChunksX + chunkX;
                    result[index] = this.getChunkBuffer(type, chunkX, chunkZ);
                }
            }
            return result;
        }
        getEntriesPatchMin(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMin(patchX, patchZ);
        }
        getEntriesPatchMax(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMax(patchX, patchZ);
        }
        getEntriesPatchMinFactor(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMinFactor(patchX, patchZ);
        }
        getEntriesPatchMaxFactor(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMaxFactor(patchX, patchZ);
        }
        getMin() {
            return this.get(this._minHeightCoord[0], this._minHeightCoord[1]);
        }
        getMax() {
            return this.get(this._maxHeightCoord[0], this._maxHeightCoord[1]);
        }
        getMinFactor() {
            return this.getFactor(this._minHeightCoord[0], this._minHeightCoord[1]);
        }
        getMaxFactor() {
            return this.getFactor(this._maxHeightCoord[0], this._maxHeightCoord[1]);
        }
        getPatchMin(patchBaseX, patchBaseZ) {
            const index = (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize;
            return this.get(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        getPatchMax(patchBaseX, patchBaseZ) {
            const index = (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize + this._patchesSegmentSize;
            return this.get(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        getPatchMinFactor(patchBaseX, patchBaseZ) {
            const index = (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize;
            return this.getFactor(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        getPatchMaxFactor(patchBaseX, patchBaseZ) {
            const index = (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize + this._patchesSegmentSize;
            return this.getFactor(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        _clearMinMaxHeightCoords() {
            this._minHeightCoord[0] = 0;
            this._minHeightCoord[1] = 0;
            this._maxHeightCoord[0] = 0;
            this._maxHeightCoord[1] = 0;
            this._minMaxHeightCoords.fill(0);
        }
        recalculateAABB() {
            this._minHeightCoord[0] = 0;
            this._minHeightCoord[1] = 0;
            this._maxHeightCoord[0] = 0;
            this._maxHeightCoord[1] = 0;
            let minFactor = 1;
            let maxFactor = 0;
            for (let patchZ = 0; patchZ < this._numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this._numPatchesX; patchX++) {
                    const minIndex = (patchZ * this._numPatchesX + patchX) * exports.minMaxStackSize;
                    const maxIndex = minIndex + this._patchesSegmentSize;
                    const patchMinFactor = this.getFactor(this._minMaxHeightCoords[minIndex], this._minMaxHeightCoords[minIndex + 1]);
                    const patchMaxfactor = this.getFactor(this._minMaxHeightCoords[maxIndex], this._minMaxHeightCoords[maxIndex + 1]);
                    if (minFactor > patchMinFactor) {
                        minFactor = patchMinFactor;
                        this._minHeightCoord[0] = this._minMaxHeightCoords[minIndex];
                        this._minHeightCoord[1] = this._minMaxHeightCoords[minIndex + 1];
                    }
                    if (maxFactor < patchMaxfactor) {
                        maxFactor = patchMaxfactor;
                        this._maxHeightCoord[0] = this._minMaxHeightCoords[maxIndex];
                        this._maxHeightCoord[1] = this._minMaxHeightCoords[maxIndex + 1];
                    }
                }
            }
        }
        recalculateMinMax(zone) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const fixedMinX = Math.max(zone.minX, 0);
            const fixedMinZ = Math.max(zone.minZ, 0);
            const fixedMaxX = Math.min(zone.maxX, this.width);
            const fixedMaxZ = Math.min(zone.maxZ, this.depth);
            for (let z = fixedMinZ; z < fixedMaxZ; z += this._patchSize) {
                for (let x = fixedMinX; x < fixedMaxX; x += this._patchSize) {
                    const patchX = x / this._patchSize | 0;
                    const patchZ = z / this._patchSize | 0;
                    const patchI = patchZ * this._numPatchesX + patchX;
                    const minIndex = patchI * exports.minMaxStackSize;
                    const maxIndex = minIndex + this._patchesSegmentSize;
                    const firstPatchX = patchX * this._patchSize;
                    const firstPatchZ = patchZ * this._patchSize;
                    const lastPatchX = firstPatchX + this._patchSize;
                    const lastPatchZ = firstPatchZ + this._patchSize;
                    let min = Number.MAX_SAFE_INTEGER;
                    let max = Number.MIN_SAFE_INTEGER;
                    let minX = firstPatchX;
                    let minZ = firstPatchZ;
                    let maxX = firstPatchX;
                    let maxZ = firstPatchZ;
                    for (let innerZ = firstPatchZ + 1; innerZ < lastPatchZ; innerZ++) {
                        for (let innerX = firstPatchX + 1; innerX < lastPatchX; innerX++) {
                            const factor = this.getFactor(innerX, innerZ);
                            if (min > factor) {
                                min = factor;
                                minX = innerX;
                                minZ = innerZ;
                            }
                            if (max < factor) {
                                max = factor;
                                maxX = innerX;
                                maxZ = innerZ;
                            }
                        }
                    }
                    this._minMaxHeightCoords[minIndex] = minX;
                    this._minMaxHeightCoords[minIndex + 1] = minZ;
                    this._minMaxHeightCoords[maxIndex] = maxX;
                    this._minMaxHeightCoords[maxIndex + 1] = maxZ;
                }
            }
        }
    }
    exports.AbsPatchedHeightMap = AbsPatchedHeightMap;
    exports.default = AbsPatchedHeightMap;
});
define("src/TerrainSystem/CompressedPatchedHeightMap", ["require", "exports", "src/TerrainSystem/AbsPatchedHeightMap", "src/TerrainSystem/HeightMap"], function (require, exports, AbsPatchedHeightMap_mjs_1, HeightMap_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CompressedPatchedHeightMap = void 0;
    AbsPatchedHeightMap_mjs_1 = __importStar(AbsPatchedHeightMap_mjs_1);
    class CompressedPatchedHeightMap extends AbsPatchedHeightMap_mjs_1.default {
        get compressAlgoritm() { return this._compressAlgoritm; }
        static createBuffer(width, depth, chunkSize, algoritm) {
            const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
            const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
            const chunkArrSize = Math.pow(chunkSize, 2);
            const chunkCount = numChunksX * numChunksZ;
            const patchXBatchingCount = algoritm === "x4" ? 4 : 2;
            if (numChunksX < patchXBatchingCount) {
                console.error("The chunkSize (%d) should be at least (%d) times smaller than the width (%d)\n", chunkSize, patchXBatchingCount, width);
                throw new Error();
            }
            return (algoritm === "x2"
                ? new Uint16Array(chunkArrSize * chunkCount)
                : new Uint8Array(chunkArrSize * chunkCount));
        }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, algoritm, buffer, itemSize = HeightMap_mjs_2.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            const validDataChunkSize = (0, AbsPatchedHeightMap_mjs_1.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
            const tmpBuffer = buffer !== null && buffer !== void 0 ? buffer : CompressedPatchedHeightMap.createBuffer(width, depth, validDataChunkSize, algoritm);
            super(width, depth, patchSize, dataChunkSize, maxHeight, tmpBuffer, itemSize, itemHeightIndexOffset);
            this._compressAlgoritm = algoritm;
            this._patchXBatchSize = algoritm === "x4" ? 4 : 2;
            this._maxSafeFactor = algoritm === "x4" ? 0xff : 0xffff;
        }
        getChunkIndex(chunkX, chunkZ) {
            return (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
        }
        getChunkBuffer(type, chunkX, chunkZ) {
            const size = Math.pow(this.dataChunkSize, 2);
            const chunkLevel = (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
            const chunkOffset = chunkLevel * size * this.data.BYTES_PER_ELEMENT * this._patchXBatchSize;
            const count = size * this._patchXBatchSize * (this.data.BYTES_PER_ELEMENT / type.BYTES_PER_ELEMENT);
            return new type(this.data.buffer, this.data.byteOffset + chunkOffset, count);
        }
        getChunksBuffers(type) {
            const result = new Array((this.dataNumChunksX / this._patchXBatchSize) * this.dataNumChunksZ);
            for (let chunkZ = 0; chunkZ < this.dataNumChunksZ; chunkZ++) {
                for (let chunkX = 0; chunkX < this.dataNumChunksX; chunkX += this._patchXBatchSize) {
                    const index = (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
                    result[index] = this.getChunkBuffer(type, chunkX, chunkZ);
                }
            }
            return result;
        }
        _encodeHeightFactor(store, index, value) {
            store[index] = Math.min(value * this._maxSafeFactor, this._maxSafeFactor);
        }
        _decodeHeightFactor(store, index) {
            return store[index] / this._maxSafeFactor;
        }
        getIndex(x, z) {
            const localX = x % this.dataChunkSize;
            const localZ = z % this.dataChunkSize;
            const chunkX = x / this.dataChunkSize | 0;
            const chunkZ = z / this.dataChunkSize | 0;
            const chunkLevel = (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
            const chunkOffset = chunkLevel * (Math.pow(this.dataChunkSize, 2));
            const localIndex = localZ * this.dataChunkSize + localX;
            const numCompress = chunkX % this._patchXBatchSize; // compress by x axis
            return (chunkOffset + localIndex) * this._patchXBatchSize + numCompress;
        }
    }
    exports.CompressedPatchedHeightMap = CompressedPatchedHeightMap;
    exports.default = CompressedPatchedHeightMap;
});
define("src/AmmoIntegration/AmmoIntegration", ["require", "exports", "src/TerrainSystem/AbsPatchedHeightMap"], function (require, exports, AbsPatchedHeightMap_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getBuffer = getBuffer;
    function getBuffer(width, depth, patchSize, dataChunkSize, compressAlgoritm) {
        if (typeof Ammo === 'undefined') {
            console.error("Ammo not exists");
            throw new Error();
        }
        const chunkSize = (0, AbsPatchedHeightMap_mjs_2.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
        const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
        const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
        const chunkArrSize = Math.pow(chunkSize, 2);
        const chunkCount = numChunksX * numChunksZ;
        if (compressAlgoritm !== "none") {
            const patchXBatchingCount = compressAlgoritm === "x4" ? 4 : 2;
            if (numChunksX < patchXBatchingCount) {
                console.error("The chunkSize (%d) should be at least (%d) times smaller than the width (%d)\n", chunkSize, patchXBatchingCount, width);
                throw new Error();
            }
        }
        const bsz = compressAlgoritm === "x2" ? 2 :
            compressAlgoritm === "x4" ? 1 :
                4; // float32
        const len = chunkArrSize * chunkCount;
        const ptr = Ammo._malloc(bsz * len);
        switch (compressAlgoritm) {
            case "x4": return new Uint8Array(Ammo.HEAPU8.buffer, ptr, len);
            case "x2": return new Uint16Array(Ammo.HEAPU16.buffer, ptr, len);
            default: return new Float32Array(Ammo.HEAPF32.buffer, ptr, len);
        }
    }
});
define("src/EngineExtensions/Renderer", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    (() => {
        if (!window.EXPERIMENTAL_TERRAIN_CUSTOM_RENDER) {
            return;
        }
        // @ts-ignore
        const originalDrawInstance = pc.ForwardRenderer.prototype.drawInstance;
        // @ts-ignore
        pc.ForwardRenderer.prototype.drawInstance = function (device, meshInstance, mesh, style, normal) {
            if (mesh.primitiveChunks && device.isWebGL2) {
                this.modelMatrixId.setValue(meshInstance.node.worldTransform.data);
                if (normal) {
                    this.normalMatrixId.setValue(meshInstance.node.normalMatrix.data);
                }
                let kb = false;
                for (const primitive of mesh.primitiveChunks[style]) {
                    if (primitive.enabled) {
                        if (primitive.attributes) {
                            for (const scopeId in primitive.attributes) {
                                device.scope.resolve(scopeId).setValue(primitive.attributes[scopeId]);
                            }
                        }
                        device.draw(primitive, 0, kb);
                        kb = true;
                    }
                }
            }
            else {
                originalDrawInstance.call(this, device, meshInstance, mesh, style, normal);
            }
        };
    })();
});
define("src/GrassFieldHelpers/GrassFieldTexture", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GrassFieldTexture = void 0;
    class GrassFieldTexture {
        get texture() { return this._texture; }
        constructor(graphicsDevice, width, depth, buffer) {
            this._width = width;
            this._depth = depth;
            const w = (width - 1) / 4 + 1;
            const d = (depth - 1) / 4 + 1;
            this._buffer = buffer !== null && buffer !== void 0 ? buffer : new Uint8Array(w * d * 4); // => 1 byte = 8 bits => 8 / 2 = 4 bit for 8 levels
            this._texture = new pc.Texture(graphicsDevice, {
                width: w,
                height: d,
                format: pc.PIXELFORMAT_RGBA8U,
                mipmaps: false,
                minFilter: pc.FILTER_NEAREST,
                magFilter: pc.FILTER_NEAREST,
                addressU: pc.ADDRESS_CLAMP_TO_EDGE,
                addressV: pc.ADDRESS_CLAMP_TO_EDGE,
                flipY: graphicsDevice.isWebGPU,
                levels: [this._buffer]
            });
        }
        destroy() {
            var _a;
            (_a = this._texture) === null || _a === void 0 ? void 0 : _a.destroy();
        }
        setChannel(x, z, channel) {
            const index = (x + z * this._width) / 4 | 0;
            const value = this._buffer[index];
        }
        setPixel() {
            if (this._texture) {
                const device = this._texture.device;
                const dataChunkSize = 1;
                const buffer = new Uint8Array(4);
                if (device.isWebGL2) {
                    const gl = device.gl;
                    const textureFormat = this._texture.impl._glFormat;
                    const texturePixelT = this._texture.impl._glPixelType;
                    const textureTarget = this._texture.impl._glTarget;
                    const textureObject = this._texture.impl._glTexture;
                    gl.bindTexture(textureTarget, textureObject);
                    gl.texSubImage3D(gl.TEXTURE_2D_ARRAY, 0, 0, 0, 0, dataChunkSize, dataChunkSize, 1, textureFormat, texturePixelT, buffer);
                }
                else if (device.isWebGPU) {
                    const webgpu = device.wgpu;
                    const texture = (this._texture.impl.gpuTexture);
                    webgpu.queue.writeTexture({
                        texture: texture,
                        origin: [0, 0, 0],
                        mipLevel: 0
                    }, buffer, {
                        offset: 0,
                        bytesPerRow: 4 * dataChunkSize, // always 4 for rgba format
                        rowsPerImage: dataChunkSize
                    }, {
                        width: dataChunkSize,
                        height: dataChunkSize
                    });
                }
            }
        }
    }
    exports.GrassFieldTexture = GrassFieldTexture;
    GrassFieldTexture.MAX_CHANEL = 8;
});
define("src/Shared/Utils", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.checkSupportR32FTexture = exports.littleEndian = exports.setPrecision = void 0;
    exports.getText = getText;
    exports.clamp = clamp;
    exports.randomFloat = randomFloat;
    exports.randomFloatRange = randomFloatRange;
    exports.calcNextPowerOfTwo = calcNextPowerOfTwo;
    exports.nrand = nrand;
    function getText(val, minWidth, prefix) {
        const str = val.toString();
        const strLen = str.length;
        const appendCount = minWidth - strLen;
        let result = str;
        for (let i = 0; i < appendCount; i++) {
            result = prefix + result;
        }
        return result;
    }
    function clamp(value, min, max) {
        return Math.max(min, Math.min(max, value));
    }
    function randomFloat() {
        return Math.random();
    }
    function randomFloatRange(start, end) {
        if (end == start) {
            throw new Error("Invalid random range");
        }
        const delta = end - start;
        const randomValue = randomFloat() * delta + start;
        return randomValue;
    }
    function calcNextPowerOfTwo(x) {
        let ret = 1;
        if (x == 1) {
            return 2;
        }
        while (ret < x) {
            ret = ret * 2;
        }
        return ret;
    }
    /** A random number from -1.0 to 1.0 */
    function nrand() {
        return Math.random() * 2.0 - 1.0;
    }
    const setPrecision = (graphicsDevice, shaderCode) => {
        return "precision " + graphicsDevice.precision + " float;\n" + shaderCode;
    };
    exports.setPrecision = setPrecision;
    exports.littleEndian = (() => {
        const uint8Array = new Uint8Array([0xAA, 0xBB]);
        const uint16array = new Uint16Array(uint8Array.buffer);
        return uint16array[0] === 0xBBAA;
    })();
    const checkSupportR32FTexture = (graphicsDevice) => {
        try {
            // TODO: need more test...
            // TODO: on iphone not work r32f textures
            if (navigator.platform.match(/iPhone|iPod|iPad/) !== null ||
                navigator.platform.startsWith("Mac") && navigator.maxTouchPoints > 4) {
                return false;
            }
            if (graphicsDevice.isWebGL2) {
                const gl = graphicsDevice.gl;
                let result = gl.getExtension("EXT_color_buffer_float");
                if (result) {
                    result = gl.getExtension("OES_texture_float");
                }
                if (!!result) {
                    return false;
                }
            }
            return true;
        }
        catch (ex) {
            return false;
        }
    };
    exports.checkSupportR32FTexture = checkSupportR32FTexture;
});
define("src/TerrainHelpers/TerrainPatchesShaderChunks", ["require", "exports", "src/Shared/Utils"], function (require, exports, Utils_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.chunks = exports.heightMapFactorsChunks = exports.diffusePS = exports.maxLayersCount = exports.gammaNormalizeChunkPS = exports.gammaNormalizeHeaderPS = exports.startVS = exports.normalCoreVS = exports.normalVS = exports.normalByHeightMapVS = exports.startUv0VS = exports.uv0VS = exports.transformVS = exports.transformDeclVS = exports.transformInstancingVS = exports.instancingVS = exports.terrainHeightChunkVS = exports.terrainHeightFactorChunkVS = exports.terrainChunkBufferCoordVS = exports.terrainHeightFactorRGBA8UX4VS = exports.terrainHeightFactorRG16UX2VS = exports.terrainHeightFactorRGBA8UVS = exports.terrainHeightFactorR32FVS = exports.terrainCoordsChunkVS = exports.currentTerrainXZChunkVS = exports.currentTerrainXZForCombineInstancingChunkVS = exports.currentTerrainXZForInstancingChunkVS = exports.baseClearSubVS = exports.baseClearVS = exports.heightMapSamplerBugFix = exports.baseForCombineInstancingVS = exports.baseForInstancingVS = exports.OLD_baseForInstancingVS = exports.baseOriginalVS = exports.definesVS = exports.littleEndianValue = exports.terrainSplatMapParamName = exports.terrainMaxHeightParamName = exports.terrainHeightMapParamName = exports.patchLodCoreParamName = exports.patchCoordOffsetParamName = exports.patchInstCoordOffsetParamName = exports.vertexNormalAttrName = exports.vertexHeightAttrName = exports.vertexCoordAttrName = void 0;
    exports.getTerrainHeightFactorVS = getTerrainHeightFactorVS;
    exports.getTextureType = getTextureType;
    exports.getSamplerType = getSamplerType;
    exports.getTerrainShaderChunks = getTerrainShaderChunks;
    exports.vertexCoordAttrName = "vertex_position";
    exports.vertexHeightAttrName = "vertex_height";
    exports.vertexNormalAttrName = "vertex_normal";
    exports.patchInstCoordOffsetParamName = "vertex_postion_offset";
    exports.patchCoordOffsetParamName = "uTerrainPatchCoordOffset";
    exports.patchLodCoreParamName = "uTerrainPatchLodCore";
    exports.terrainHeightMapParamName = "uTerrainHeightMap";
    exports.terrainMaxHeightParamName = "uTerrainMaxHeight";
    exports.terrainSplatMapParamName = "uTerrainSplatMap";
    exports.littleEndianValue = Utils_mjs_1.littleEndian ? 'true' : 'false';
    exports.definesVS = `
    #define HM_NUM_CHUNKS_X     (%%HM_NUM_CHUNKS_X%%)
    #define HM_NUM_CHUNKS_X_U   (uint(HM_NUM_CHUNKS_X))
    #define HM_CHUNK_SIZE       (%%HM_CHUNK_SIZE%%)
    #define HM_CHUNK_SIZE_U     (uint(HM_CHUNK_SIZE))
    #define HM_CHUNK_SIZE_M1_U  (HM_CHUNK_SIZE_U - 1u)
    #define HM_CHUNK_SIZE_F     (float(HM_CHUNK_SIZE))
    #define TR_SIZE             (ivec2(%%TR_SIZE_X%%, %%TR_SIZE_Z%%))
    #define TR_SIZE_F           (vec2(%%TR_SIZE_X_F%%, %%TR_SIZE_Z_F%%))
    #define TR_SIZE_U           (uvec2(TR_SIZE))
    #define TR_SIZE_H_F         (TR_SIZE_F / 2.0)
    #define TR_SIZE_H_N_F       (-TR_SIZE_H_F)
    #define TR_PATCH_SIZE_X     (%%TR_PATCH_SIZE_X%%)
    #define TR_PATCH_SIZE_M1    (TR_PATCH_SIZE_X - 1.0)
    #define TR_PATCH_SIZE_M1_H  (TR_PATCH_SIZE_M1 / 2.0)
    #define TR_PATCH_SIZE_M1_F  (vec2(TR_PATCH_SIZE_M1_H, TR_PATCH_SIZE_M1_H))
`;
    exports.baseOriginalVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
`;
    exports.OLD_baseForInstancingVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
    attribute uvec2 ${exports.patchInstCoordOffsetParamName};
`;
    exports.baseForInstancingVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
    attribute uvec2 ${exports.patchInstCoordOffsetParamName};
`;
    exports.baseForCombineInstancingVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
    attribute uvec4 ${exports.patchInstCoordOffsetParamName};
`;
    exports.heightMapSamplerBugFix = `
    uniform highp %%HEIGHT_MAP_SAMPLER%% ${exports.terrainHeightMapParamName};
    
    #if defined (WEBGPU)
        #define fix_${exports.terrainHeightMapParamName} highp %%HEIGHT_MAP_SAMPLER%%(${exports.terrainHeightMapParamName}_texture, ${exports.terrainHeightMapParamName}_sampler)
    #else
        #define fix_${exports.terrainHeightMapParamName} ${exports.terrainHeightMapParamName}
    #endif
`;
    exports.baseClearVS = `
    uniform mat4 matrix_viewProjection;
    uniform mat4 matrix_model;
    uniform mat3 matrix_normal;

    uniform mediump vec2 ${exports.patchCoordOffsetParamName};
    uniform mediump float ${exports.patchLodCoreParamName};

    uniform mediump float ${exports.terrainMaxHeightParamName};

    vec2 dCurrentTerrainXZ;
    float dCurrentTerrainHeight;
`;
    exports.baseClearSubVS = `
    vec3 dPositionW;
    mat4 dModelMatrix;
    mat3 dNormalMatrix;

    vec3 dCurrentTerrainNormal;
`;
    exports.currentTerrainXZForInstancingChunkVS = `
    vec2 getCurrentTerrainXZ() {
        return vec2(${exports.vertexCoordAttrName} + ${exports.patchInstCoordOffsetParamName});
    }
`;
    exports.currentTerrainXZForCombineInstancingChunkVS = `
    vec4 rotatePatchXZCoff[4] = vec4[4](
        vec4( 1.0,  0.0,  0.0,  1.0),
        vec4( 0.0,  1.0, -1.0,  0.0),
        vec4(-1.0,  0.0,  0.0, -1.0),
        vec4( 0.0, -1.0,  1.0,  0.0)
    );

    vec2 rotatePatchXZ(vec2 coord, uint angle) {
        vec2 offset = coord - TR_PATCH_SIZE_M1_H;
        vec4 transf = rotatePatchXZCoff[angle];
        return TR_PATCH_SIZE_M1_H + offset.xx * transf.xz + offset.yy * transf.yw;
    }

    vec2 getCurrentTerrainXZ() {
        vec2 orgXZ = vec2(${exports.vertexCoordAttrName});
        uint angle = ${exports.patchInstCoordOffsetParamName}.z;
        vec2 rotXZ = rotatePatchXZ(orgXZ, angle);
        return rotXZ + vec2(${exports.patchInstCoordOffsetParamName}.xy) * TR_PATCH_SIZE_M1;
    }
`;
    exports.currentTerrainXZChunkVS = `
    vec2 getCurrentTerrainXZ() {
        return vec2(${exports.vertexCoordAttrName}) + ${exports.patchCoordOffsetParamName};
    }
`;
    exports.terrainCoordsChunkVS = `
    vec2 getCurrentTerrainUvCoord() {
        vec2 xz = dCurrentTerrainXZ;
        vec2 uv = (xz + 0.5) / TR_SIZE_F;
        return uv;
    }
    
    uvec2 clampTerrainXZ(vec2 xz) {
        return uvec2(clamp(xz, vec2(0.0), TR_SIZE_F));
    }
    
    vec2 getTerrainXZ(ivec2 offset) {
        return dCurrentTerrainXZ + vec2(offset);
    }
`;
    exports.terrainHeightFactorR32FVS = `
    float getTerrainHeightFactorFromTexture(uvec3 coord) {
        return texelFetch(fix_${exports.terrainHeightMapParamName}, ivec3(coord), 0).r;
    }
`;
    // https://stackoverflow.com/questions/63827836/is-it-possible-to-do-a-rgba-to-float-and-back-round-trip-and-read-the-pixels-in
    // note: the 0.1s here an there are voodoo related to precision
    /*
        float rgba8uToFloat0(uvec4 v) {
            vec4 bits  = vec4(${littleEndian ? 'v' : 'v.abgr'});
            float sign = mix(-1.0, 1.0, step(bits[3], 128.0));
            float expo = floor(mod(bits[3] + 0.1, 128.0)) * 2.0 + floor((bits[2] + 0.1) / 128.0) - 127.0;
            float sig  = bits[0] + bits[1] * 256.0 + floor(mod(bits[2] + 0.1, 128.0)) * 256.0 * 256.0;
            return sign * (1.0 + sig / 8388607.0) * pow(2.0, expo);
        }
    */
    exports.terrainHeightFactorRGBA8UVS = `    
    float rgba8uToFloat(uvec4 v) {
        uvec4 bits = ${Utils_mjs_1.littleEndian ? 'v' : 'v.abgr'};
        float sign = 2.0 * step(float(bits[3]), 128.0) - 1.0;
        float expo = float((bits[3] & 127u) * 2u + bits[2] / 128u) - 127.0;
        float sig  = float(bits[0] + bits[1] * 256u + (bits[2] & 127u) * 65536u);
        return sign * (1.0 + sig / 8388607.0) * pow(2.0, expo);
    }

    float getTerrainHeightFactorFromTexture(uvec3 coord) {
        uvec4 rgba = texelFetch(fix_${exports.terrainHeightMapParamName}, ivec3(coord), 0);
        return rgba8uToFloat(rgba);
    }
`;
    // Compress height by x coord [patch0, patch1] ...
    // see: CompressedPatchedHeightMap file
    exports.terrainHeightFactorRG16UX2VS = `
    float getTerrainHeightFactorFromTexture(uvec3 coord) {

        uint level    = coord.b;
        uint newLevel = level / 2u;
        uint shift    = level & 1u;

        uvec4 rgba = texelFetch(fix_${exports.terrainHeightMapParamName}, ivec3(coord.xy, newLevel), 0);

        return float(rgba[shift]) / 65535.0;
    }
`;
    // Compress height by x coord [patch0, patch1, patch2, patch3] ...
    // see: CompressedPatchedHeightMap file
    exports.terrainHeightFactorRGBA8UX4VS = `
    float getTerrainHeightFactorFromTexture(uvec3 coord) {

        uint level    = coord.b;
        uint newLevel = level / 4u;
        uint shift    = level & 3u;

        uvec4 rgba = texelFetch(fix_${exports.terrainHeightMapParamName}, ivec3(coord.xy, newLevel), 0);

        return float(rgba[shift]) / 255.0;
    }
`;
    exports.terrainChunkBufferCoordVS = `
    uvec3 getTerrainChunkBufferCoord(uvec2 xz) {

        uvec2 ck = xz / HM_CHUNK_SIZE_U;

        uint localX = xz[0] % HM_CHUNK_SIZE_U;
        uint localZ = xz[1] % HM_CHUNK_SIZE_U;
        uint level  = ck[1] * HM_NUM_CHUNKS_X_U + ck[0];

        return uvec3(localX, localZ, level);
    }

    uvec3 getTerrainChunkBufferRelativeCoord(ivec2 offset) {
        vec2  oc = getTerrainXZ(offset);
        uvec2 xz = clampTerrainXZ(oc);
        return getTerrainChunkBufferCoord(xz);
    }
`;
    exports.terrainHeightFactorChunkVS = `
    float getTerrainHeightFactor(ivec2 offset) {
        uvec3 coord = getTerrainChunkBufferRelativeCoord(offset);
        return getTerrainHeightFactorFromTexture(coord);
    }
`;
    exports.terrainHeightChunkVS = `
    float getTerrainHeight(ivec2 offset) {
        return getTerrainHeightFactor(offset) * ${exports.terrainMaxHeightParamName};
    }
    
    float getCurrentTerrainHeight() {
        return getTerrainHeight(ivec2(0, 0));
    }
`;
    exports.instancingVS = ``;
    exports.transformInstancingVS = ``;
    exports.transformDeclVS = ``;
    exports.transformVS = `
    //varying float vPatchLod;
    varying vec2 vUvCoord;
    varying vec2 vGridPosition;

    mat4 getModelMatrix() {
        return matrix_model;
    }

    vec3 getWorldPosition() {
        return dPositionW;
    }
    
    vec4 getPosition() {
    
        dModelMatrix = getModelMatrix();
        dCurrentTerrainXZ = getCurrentTerrainXZ();
        dCurrentTerrainHeight = getCurrentTerrainHeight();

        vec2 centeredXZ = TR_SIZE_H_N_F + dCurrentTerrainXZ;
        vec4 localPos   = vec4(centeredXZ.r, dCurrentTerrainHeight, centeredXZ.g, 1.0);
        
        vec4 posW      = dModelMatrix * localPos;
        vec4 screenPos = matrix_viewProjection * posW;

        dPositionW = posW.xyz;

        //vPatchLod     = ${exports.patchLodCoreParamName};
        vGridPosition = dCurrentTerrainXZ;
        vUvCoord      = getCurrentTerrainUvCoord();

        return screenPos;
    }
`;
    exports.uv0VS = `
`;
    // FIX: bug with getUv0 for V1 Engine
    exports.startUv0VS = ` 
    vec2 getUv0() {
        return vec2(0.0);
    }
`;
    exports.normalByHeightMapVS = `
    vec3 getCurrentTerrainNormal() {

        float step  = pow(2.0, ${exports.patchLodCoreParamName} + 1.0) / 2.0;
        float left  = getTerrainHeightFactor(ivec2( step,  0));
        float right = getTerrainHeightFactor(ivec2(-step,  0));
        float up    = getTerrainHeightFactor(ivec2( 0,     step));
        float down  = getTerrainHeightFactor(ivec2( 0,    -step));

        vec3 normal = vec3(left, step * 0.02, down) - vec3(right, 0, up);

        return normalize(normal);
    }
`;
    exports.normalVS = `
    vec3 getNormal() {
        dNormalMatrix = matrix_normal;
        return normalize(dNormalMatrix * dCurrentTerrainNormal);
    }
`;
    exports.normalCoreVS = `
    // FIX: vertex_normal undeclaration
    vec3 vertex_normal;
    vec3 dCurrentTerrainNormal;

    vec3 getLocalNormal(vec3 vertexNormal) {

        dCurrentTerrainNormal = getCurrentTerrainNormal();
        vertex_normal = dCurrentTerrainNormal;

        return dCurrentTerrainNormal;
    }

    mat3 getNormalMatrix(mat4 modelMatrix) {
        return matrix_normal;
    }
`;
    exports.startVS = `
    void main(void) {

        gl_Position = getPosition();

    #if defined(SHADOW_PASS)
    #else
        dCurrentTerrainNormal = getCurrentTerrainNormal();
    #endif
`;
    exports.gammaNormalizeHeaderPS = `
    #define GAMMA_NORMALIZE
`;
    exports.gammaNormalizeChunkPS = `
    vec3 autoGammaCorrectInput(vec3 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    vec4 autoGammaCorrectInput(vec4 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }
`;
    exports.maxLayersCount = 5; // Default + R + G + B + A
    exports.diffusePS = `
    uniform mediump sampler2D ${exports.terrainSplatMapParamName};
    uniform mediump sampler2DArray uTerrainLayersDiffuse;
    //uniform mediump sampler2DArray uTerrainLayersNormalMap;
    uniform float uTerrainLayersCount;
    uniform float uTerrainLayersFlags[${exports.maxLayersCount}];
    uniform vec2 uTerrainLayersScale[${exports.maxLayersCount}];
    uniform vec2 uTerrainLayersOffset[${exports.maxLayersCount}];

    //varying float vPatchLod;
    varying vec2 vUvCoord;
    varying vec2 vGridPosition;

    void getAlbedo() {

        vec4 splat     = autoGammaCorrectInput(texture(${exports.terrainSplatMapParamName}, vUvCoord));
        vec2 uvTexZero = uTerrainLayersOffset[0] + vUvCoord * uTerrainLayersScale[0]; // / (vPatchLod + 1.0);
        vec4 texZero   = texture(uTerrainLayersDiffuse, vec3(uvTexZero, 0));
        vec3 albedo    = texZero.rgb;

        for (int i = 1; i < ${exports.maxLayersCount}; ++i) {

            if (uTerrainLayersFlags[i] > 0.0 && splat[i - 1] > 0.0) {

                vec2 uv  = uTerrainLayersOffset[i] + vUvCoord * uTerrainLayersScale[i];
                vec4 tex = texture(uTerrainLayersDiffuse, vec3(uv, i));

                albedo = mix(albedo, tex.rgb, splat[i - 1]);
            }
        }

        dAlbedo = autoGammaCorrectInput(albedo);
    }
`;
    exports.heightMapFactorsChunks = {
        terrainHeightFactorR32FVS: exports.terrainHeightFactorR32FVS,
        terrainHeightFactorRGBA8UVS: exports.terrainHeightFactorRGBA8UVS,
        terrainHeightFactorRG16UX2VS: exports.terrainHeightFactorRG16UX2VS,
        terrainHeightFactorRGBA8UX4VS: exports.terrainHeightFactorRGBA8UX4VS,
    };
    exports.chunks = Object.assign(Object.assign({}, exports.heightMapFactorsChunks), { heightMapSamplerBugFix: exports.heightMapSamplerBugFix,
        currentTerrainXZForCombineInstancingChunkVS: exports.currentTerrainXZForCombineInstancingChunkVS,
        currentTerrainXZForInstancingChunkVS: exports.currentTerrainXZForInstancingChunkVS,
        currentTerrainXZChunkVS: exports.currentTerrainXZChunkVS,
        terrainHeightFactorChunkVS: exports.terrainHeightFactorChunkVS,
        terrainHeightChunkVS: exports.terrainHeightChunkVS,
        terrainCoordsChunkVS: exports.terrainCoordsChunkVS,
        terrainChunkBufferCoordVS: exports.terrainChunkBufferCoordVS,
        normalByHeightMapVS: exports.normalByHeightMapVS,
        // Vertex
        definesVS: exports.definesVS,
        baseForCombineInstancingVS: exports.baseForCombineInstancingVS,
        baseForInstancingVS: exports.baseForInstancingVS,
        baseOriginalVS: exports.baseOriginalVS,
        baseClearVS: exports.baseClearVS,
        baseClearSubVS: exports.baseClearSubVS,
        transformDeclVS: exports.transformDeclVS,
        transformVS: exports.transformVS,
        instancingVS: exports.instancingVS,
        transformInstancingVS: exports.transformInstancingVS,
        normalVS: exports.normalVS,
        normalCoreVS: exports.normalCoreVS,
        uv0VS: exports.uv0VS,
        startVS: exports.startVS,
        startUv0VS: exports.startUv0VS,
        // Fragment
        gammaNormalizeHeaderPS: exports.gammaNormalizeHeaderPS,
        gammaNormalizeChunkPS: exports.gammaNormalizeChunkPS,
        diffusePS: exports.diffusePS });
    function getTerrainHeightFactorVS(format, chunksStore) {
        switch (format) {
            case 'r32f': return chunksStore.terrainHeightFactorR32FVS;
            case 'rgba': return chunksStore.terrainHeightFactorRGBA8UVS;
            case 'rgbaX2': return chunksStore.terrainHeightFactorRG16UX2VS;
            case 'rgbaX4': return chunksStore.terrainHeightFactorRGBA8UX4VS;
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getTextureType(format) {
        switch (format) {
            case 'r32f': return pc.PIXELFORMAT_R32F;
            case 'rgba': return pc.PIXELFORMAT_RGBA8U;
            case 'rgbaX2': return pc.PIXELFORMAT_RG16U;
            case 'rgbaX4': return pc.PIXELFORMAT_RGBA8U;
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getSamplerType(format) {
        switch (format) {
            case 'r32f': return 'sampler2DArray';
            case 'rgba': return 'usampler2DArray';
            case 'rgbaX2': return 'usampler2DArray';
            case 'rgbaX4': return 'usampler2DArray';
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getTerrainShaderChunks({ width, depth, patchSize, heightMapChunkSize, instancing, heightMapFormat, chunksStore = exports.chunks, engineVersion = 'v1', }) {
        const definesVS = chunksStore.definesVS
            .replace('%%HM_NUM_CHUNKS_X%%', String((width - 1) / (heightMapChunkSize - 1) | 0))
            .replace('%%HM_CHUNK_SIZE%%', String(heightMapChunkSize | 0))
            .replace('%%TR_SIZE_X%%', String(width))
            .replace('%%TR_SIZE_Z%%', String(depth))
            .replace('%%TR_SIZE_X_F%%', width.toFixed(1))
            .replace('%%TR_SIZE_Z_F%%', depth.toFixed(1))
            .replace('%%TR_PATCH_SIZE_X%%', patchSize.toFixed(1));
        const terrainHeightFactorVS = getTerrainHeightFactorVS(heightMapFormat, chunksStore);
        const baseClearVS = chunksStore.baseClearVS + chunksStore.heightMapSamplerBugFix.replaceAll('%%HEIGHT_MAP_SAMPLER%%', getSamplerType(heightMapFormat));
        const baseCoordVS = instancing === 'combine' ? chunksStore.baseForCombineInstancingVS :
            instancing === 'simple' ? chunksStore.baseForInstancingVS :
                chunksStore.baseOriginalVS;
        const currentTerrainXZVS = instancing === 'combine' ? chunksStore.currentTerrainXZForCombineInstancingChunkVS :
            instancing === 'simple' ? chunksStore.currentTerrainXZForInstancingChunkVS :
                chunksStore.currentTerrainXZChunkVS;
        if (engineVersion === 'v2') {
            const normalCoreVS = chunksStore.normalByHeightMapVS + chunksStore.normalCoreVS;
            const transformVS = definesVS
                + baseCoordVS
                + baseClearVS
                + currentTerrainXZVS
                + terrainHeightFactorVS
                + chunksStore.terrainCoordsChunkVS
                + chunksStore.terrainChunkBufferCoordVS
                + chunksStore.terrainHeightFactorChunkVS
                + chunksStore.terrainHeightChunkVS
                + chunksStore.transformVS;
            const diffusePS = chunksStore.gammaNormalizeChunkPS
                + chunksStore.diffusePS;
            return {
                // Vertex
                normalCoreVS,
                transformVS,
                transformCoreVS: "",
                transformInstancingVS: "",
                // Fragment
                diffusePS,
            };
        }
        const startVS = chunksStore.normalByHeightMapVS + chunksStore.startUv0VS + chunksStore.startVS;
        const baseVS = baseCoordVS + baseClearVS + chunksStore.baseClearSubVS;
        const transformVS = definesVS
            + currentTerrainXZVS
            + terrainHeightFactorVS
            + chunksStore.terrainCoordsChunkVS
            + chunksStore.terrainChunkBufferCoordVS
            + chunksStore.terrainHeightFactorChunkVS
            + chunksStore.terrainHeightChunkVS
            + chunksStore.transformVS;
        const diffusePS = chunksStore.gammaNormalizeHeaderPS
            + chunksStore.gammaNormalizeChunkPS
            + chunksStore.diffusePS;
        return {
            // Vertex
            baseVS,
            transformVS,
            normalVS: chunksStore.normalVS,
            uv0VS: chunksStore.uv0VS,
            startVS,
            transformDeclVS: chunksStore.transformDeclVS,
            instancingVS: chunksStore.instancingVS,
            // Fragment
            diffusePS,
        };
    }
});
define("src/GrassFieldHelpers/GrassShaderChunk", ["require", "exports", "src/TerrainHelpers/TerrainPatchesShaderChunks"], function (require, exports, TerrainPatchesShaderChunks_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.chunks = exports.diffusePS = exports.startVS = exports.calculateLocalVS = exports.bladeDecoderVS = exports.terrainHeightMapVS = exports.baseClearSubVS = exports.baseVS = exports.startUv0VS = exports.uv0VS = exports.normalVS = exports.transformVS = exports.normalCoreVS = exports.definesBladeVS = exports.definesVS = exports.transformDeclVS = exports.transformInstancingVS = exports.instancingVS = exports.windIntensityParamName = exports.drawPosParamName = exports.lod2OffsetXZParamName = exports.lod1OffsetXZParamName = exports.terrainScaleParamName = exports.timeParamName = exports.shapeAttrName = exports.offsetAttrName = exports.vindexAttrName = void 0;
    exports.getGrassShaderChunks = getGrassShaderChunks;
    exports.vindexAttrName = "vertex_position";
    exports.offsetAttrName = "vertex_offset";
    exports.shapeAttrName = "vertex_shape";
    exports.timeParamName = "uTime";
    exports.terrainScaleParamName = "uTerrainScale";
    exports.lod1OffsetXZParamName = "uLod1OffsetXZ";
    exports.lod2OffsetXZParamName = "uLod2OffsetXZ";
    exports.drawPosParamName = "uDrawPosition";
    exports.windIntensityParamName = "uWindIntensity";
    exports.instancingVS = ``;
    exports.transformInstancingVS = ``;
    exports.transformDeclVS = ``;
    exports.definesVS = `
    #define HM_NUM_CHUNKS_X    (%%HM_NUM_CHUNKS_X%%)
    #define HM_NUM_CHUNKS_X_U  (uint(HM_NUM_CHUNKS_X))
    #define HM_CHUNK_SIZE      (%%HM_CHUNK_SIZE%%)
    #define HM_CHUNK_SIZE_F    (float(HM_CHUNK_SIZE))
    #define HM_CHUNK_SIZE_U    (uint(HM_CHUNK_SIZE))
    #define TR_SIZE            (ivec2(%%TR_SIZE_X%%, %%TR_SIZE_Z%%))
    #define TR_SIZE_F          (vec2(%%TR_SIZE_X_F%%, %%TR_SIZE_Z_F%%))
    #define TR_SIZE_BOUND_F    (TR_SIZE_F - 2.0)      
    #define TR_SIZE_H_F        (TR_SIZE_F / 2.0)
    #define TR_SIZE_H_N_F      (-TR_SIZE_H_F)

    #define PATCH_SIZE         (%%PATCH_SIZE%%)
    #define HALF_PATCH_SIZE    (PATCH_SIZE / 2.0)

    #define BLADE_HEIGHT_TALL  (%%BLADE_HEIGHT_TALL%%) // height of a tall blade

    #define TRANSITION_LOW     (%%TRANSITION_LOW%%)   // elevation of beach-grass transition (start)
    #define TRANSITION_HIGH    (%%TRANSITION_HIGH%%)  // (end)
    #define TRANSITION_NOISE   (0.06)                 // transition noise scale
    #define CIRCLE_RADIUS      (PATCH_SIZE * 2.9)
    #define MAX_ZINIT_DISTANCE (300.0)
`;
    exports.definesBladeVS = `
    #define LOD0_BLADE_SEGS        (%%LOD0_BLADE_SEGS%%) // # of blade segments lod 0
    #define LOD1_BLADE_SEGS        (%%LOD1_BLADE_SEGS%%) // # of blade segments lod 1
    #define LOD2_BLADE_SEGS        (%%LOD2_BLADE_SEGS%%) // # of blade segments lod 2

    #define LOD0_BLADE_DIVS        (LOD0_BLADE_SEGS + 1.0)  // # of divisions
    #define LOD0_BLADE_VERTS       (LOD0_BLADE_DIVS * 2.0)  // # of vertices (per side, so 1/2 total)
    #define LOD0_BLADE_VERTS_COUNT (LOD0_BLADE_VERTS * 2.0) // # of vertices

    #define LOD1_BLADE_DIVS        (LOD1_BLADE_SEGS + 1.0)  // # of divisions
    #define LOD1_BLADE_VERTS       (LOD1_BLADE_DIVS * 2.0)  // # of vertices (per side, so 1/2 total)
    #define LOD1_BLADE_VERTS_COUNT (LOD1_BLADE_VERTS * 2.0) // # of vertices

    #define LOD2_BLADE_DIVS        (LOD2_BLADE_SEGS + 1.0)  // # of divisions
    #define LOD2_BLADE_VERTS       (LOD2_BLADE_DIVS * 2.0)  // # of vertices (per side, so 1/2 total)
    #define LOD2_BLADE_VERTS_COUNT (LOD2_BLADE_VERTS * 2.0) // # of vertices
    
    #define LOD2_BLADE_VERTS_ALL_COUNT (LOD2_BLADE_VERTS_COUNT * 16.0) // # of vertices all fragments
`;
    exports.normalCoreVS = `
    // FIX: vertex_normal undeclaration
    vec3 vertex_normal;

    vec3 getLocalNormal(vec3 vertexNormal) {

        // Set default shader normal
        vertex_normal = dVertexNormal;

        return dVertexNormal;
    }

    mat3 getNormalMatrix(mat4 modelMatrix) {
        return matrix_normal;
    }
`;
    exports.transformVS = `
    vec3 getWorldPosition() {
        return dPositionW;
    }

    mat4 getModelMatrix() {
        return matrix_model;
    }

    vec4 getPosition() {

        decodeBlade();
        calculateBladeVertex();

        dModelMatrix = getModelMatrix();

        vec4 posW      = dModelMatrix * vec4(dVertexPosition, 1.0);
        vec4 screenPos = matrix_viewProjection * posW;

        dPositionW = posW.xyz;

        return screenPos;
    }
`;
    exports.normalVS = `
    vec3 getNormal() {
        dNormalMatrix = matrix_normal;
        return normalize(dNormalMatrix * dVertexNormal);
    }
`;
    exports.uv0VS = `
    vec2 getUv0() {
        return vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);
    }
`;
    // bug with getUv0
    exports.startUv0VS = `    
    vec2 getUv0() {
        return vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);
    }
`;
    exports.baseVS = `
    uniform mat4 matrix_viewProjection;
    uniform mat4 matrix_model;
    uniform mat3 matrix_normal;

    uniform mediump usampler2D uDataMap;

    uniform vec3  ${exports.terrainScaleParamName};
    uniform float ${TerrainPatchesShaderChunks_mjs_1.terrainMaxHeightParamName};
    
    uniform vec3  ${exports.drawPosParamName};       // centre of where we want to draw
    uniform float ${exports.timeParamName};          // used to animate blades
    uniform float ${exports.windIntensityParamName};

    uniform vec2 ${exports.lod1OffsetXZParamName}[8];  // center offset from draw pos lod 1
    uniform vec2 ${exports.lod2OffsetXZParamName}[16]; // center offset from draw pos lod 2

    attribute float ${exports.vindexAttrName};
    attribute vec4 ${exports.offsetAttrName};
    attribute vec4 ${exports.shapeAttrName};

    float dVertexIndex;           // vertex index for this side of the blade
    float dDivVertexIndex;        // div index (0 .. BLADE_DIVS)
    float dPercentOfBladeHeight;  // percent of height of blade this vertex is at
    float dSideOfBlade;           // front/back side of blade
    float dEdgeOfBlade;           // left/right edge (x=0 or x=1)
    vec2 dBladeTerrainXZPos;      // blade xz position on terrain
    vec3 dVertexPosition;         // Vertex position - start with 2D shape, no bend applied
    vec3 dVertexNormal;           // Vertex normal
    vec2 dTerrainPatchOffsetXZ;   // Terrain patch offset from center
`;
    exports.baseClearSubVS = `
    vec3 dPositionW;
    mat4 dModelMatrix;
    mat3 dNormalMatrix;
`;
    exports.terrainHeightMapVS = `
    uvec2 clampTerrainXZ(vec2 xz) {
        return uvec2(clamp(xz, vec2(0.0), TR_SIZE_F));
    }

    uvec3 getTerrainChunkBufferCoord(vec2 origXZ) {

        uvec2 xz = clampTerrainXZ(origXZ);
        uvec2 ck = xz / HM_CHUNK_SIZE_U;

        uint localX = xz[0] % HM_CHUNK_SIZE_U;
        uint localZ = xz[1] % HM_CHUNK_SIZE_U;
        uint level  = ck[1] * HM_NUM_CHUNKS_X_U + ck[0];

        return uvec3(localX, localZ, level);
    }
    
    float getTerrainHeightFactor(vec2 xz) {
        uvec3 coord = getTerrainChunkBufferCoord(xz);
        return getTerrainHeightFactorFromTexture(coord);
    }

    float getTerrainHeight(vec2 xz) {
        return getTerrainHeightFactor(xz) * ${TerrainPatchesShaderChunks_mjs_1.terrainMaxHeightParamName};
    }
    
    float getTerrainHeightInterpolated(vec2 xz) {

        // here we can calculate normal

        vec2 floorXZ = floor(xz);

        float x0z0 = getTerrainHeight(floorXZ);

        if ((floorXZ[0] + 1.0 >= TR_SIZE_F[0]) ||
            (floorXZ[1] + 1.0 >= TR_SIZE_F[1])) {
            return x0z0;
        }

        float x1z0 = getTerrainHeight(floorXZ + vec2(1.0, 0.0));
        float x0z1 = getTerrainHeight(floorXZ + vec2(0.0, 1.0));
        float x1z1 = getTerrainHeight(floorXZ + vec2(1.0, 1.0));

        float factorX = xz[0] - floorXZ[0];
        float factorZ = xz[1] - floorXZ[1];

        float interpolatedBottom = (x1z0 - x0z0) * factorX + x0z0;
        float interpolatedTop    = (x1z1 - x0z1) * factorX + x0z1;
        float finalHeight        = (interpolatedTop - interpolatedBottom) * factorZ + interpolatedBottom;

        return finalHeight;
    }
`;
    exports.bladeDecoderVS = `
    void decodeBlade() {

        float nnVi = ${exports.vindexAttrName} - LOD2_BLADE_VERTS_ALL_COUNT;

        if (nnVi < 0.0) {

            float lod2nVi  = mod(${exports.vindexAttrName}, LOD2_BLADE_VERTS_COUNT);
            int patchIndex = int(${exports.vindexAttrName} / LOD2_BLADE_VERTS_COUNT);

            dVertexIndex          = mod(lod2nVi, LOD2_BLADE_VERTS);
            dDivVertexIndex       = floor(dVertexIndex / 2.0);
            dPercentOfBladeHeight = dDivVertexIndex / LOD2_BLADE_SEGS;
            dSideOfBlade          = floor(lod2nVi / LOD2_BLADE_VERTS);

            dTerrainPatchOffsetXZ = ${exports.lod2OffsetXZParamName}[patchIndex];
        }
        else if (nnVi < LOD0_BLADE_VERTS_COUNT) {

            dVertexIndex          = mod(nnVi, LOD0_BLADE_VERTS);
            dDivVertexIndex       = floor(dVertexIndex / 2.0);
            dPercentOfBladeHeight = dDivVertexIndex / LOD0_BLADE_SEGS;
            dSideOfBlade          = floor(nnVi / LOD0_BLADE_VERTS);

            dTerrainPatchOffsetXZ = vec2(0.0);
        }
        else {

            float lod1nnVi = nnVi - LOD0_BLADE_VERTS_COUNT;
            float lod1nVi  = mod(lod1nnVi, LOD1_BLADE_VERTS_COUNT);
            int patchIndex = int(lod1nnVi / LOD1_BLADE_VERTS_COUNT);

            dVertexIndex          = mod(lod1nVi, LOD1_BLADE_VERTS);
            dDivVertexIndex       = floor(dVertexIndex / 2.0);
            dPercentOfBladeHeight = dDivVertexIndex / LOD1_BLADE_SEGS;
            dSideOfBlade          = floor(lod1nVi / LOD1_BLADE_VERTS);

            dTerrainPatchOffsetXZ = ${exports.lod1OffsetXZParamName}[patchIndex];
        }
        
        dEdgeOfBlade = mod(dVertexIndex, 2.0);
    }
`;
    exports.calculateLocalVS = `
    // Rotate by an angle
    vec2 rotate(float x, float y, float r) {
        float c = cos(r);
        float s = sin(r);
        return vec2(x * c - y * s, x * s + y * c);
    }

    // Rotate by a vector
    vec2 rotate(float x, float y, vec2 r) {
        return vec2(x * r.x - y * r.y, x * r.y + y * r.x);
    }

    float getGrassFactor(vec2 oxz) {
    
        vec2 xz = floor(oxz);

        if (xz[0] < 0.0 ||
            xz[1] < 0.0 ||
            xz[0] > TR_SIZE_BOUND_F[0] ||
            xz[1] > TR_SIZE_BOUND_F[1]) {
            return 0.0;
        }

        return 1.0;
    }
    
    varying vec2 vUvTerrainCoord;
    varying vec2 vUvCoord;
    varying vec3 vColor;

    void calculateBladeVertex() {
        
        vec4 offset = ${exports.offsetAttrName};
        vec4 shape  = ${exports.shapeAttrName};

        // Based on centre of view cone position, what grid tile should
        // this piece of grass be drawn at?
        vec2 quadCenterPos = ${exports.drawPosParamName}.xz;
        vec2 bladeOffset   = offset.xy;
        vec2 patchCenter   = floor((quadCenterPos - bladeOffset) / PATCH_SIZE) * PATCH_SIZE + HALF_PATCH_SIZE + dTerrainPatchOffsetXZ;

        float drawPosAltitude = ${exports.drawPosParamName}.y;

        // Find the blade mesh x,y position
        vec2 bladePos = patchCenter + bladeOffset;

        // Local quad center position in terrain
        // because the positions are shifted by half the size of the terrain
        // vec2 localQuadCenterPos = quadCenterPos + TR_SIZE_H_F;

        float distanceFromBladeToQuadCenter = distance(bladePos, quadCenterPos);
        float degenerateByDistanceFromBladeToQuadCenter = smoothstep(0.92, 1.0, CIRCLE_RADIUS / distanceFromBladeToQuadCenter);

        // Vertex position - start with 2D shape, no bend applied
        dVertexPosition = vec3(
            shape.x * (dEdgeOfBlade - 0.5) * (1.0 - pow(dPercentOfBladeHeight, 3.0)), // taper blade edges as approach tip
            0.0, // flat y, unbent
            shape.y * dPercentOfBladeHeight // height of vtx, unbent
        );

        // Apply blade's natural curve amount
        float curve = shape.w;

        // Then add animated curve amount by time using this blade's
        // unique properties to randomize its oscillation
        curve += shape.w + 0.125 * (sin(${exports.timeParamName} * 4.0 + offset.w * 0.2 * shape.y + offset.x + offset.y));

        // TODO
        float wind = 0.5;

        wind = (clamp(wind, 0.25, 1.0) - 0.25) * (1.0 / 0.75);
        wind = wind * wind * ${exports.windIntensityParamName};
        wind *= dPercentOfBladeHeight; // scale wind by height of blade
        wind = -wind;

        // Start computing a normal for this vertex
        dVertexNormal = vec3(0.0, dSideOfBlade * -2.0 + 1.0, 0.0);

        // put lean and curve together
        float rot = shape.z + curve * dPercentOfBladeHeight;
        vec2 rotv = vec2(cos(rot), sin(rot));

        dVertexPosition.yz = rotate(dVertexPosition.y, dVertexPosition.z, rotv);
        dVertexNormal.yz   = rotate(dVertexNormal.y, dVertexNormal.z, rotv);

        // rotation of this blade as a vector
        rotv = vec2(cos(offset.w), sin(offset.w));

        dVertexPosition.xy = rotate(dVertexPosition.x, dVertexPosition.y, rotv);
        dVertexNormal.xy   = rotate(dVertexNormal.x, dVertexNormal.y, rotv);

        rotv = vec2(cos(wind), sin(wind));

        // Wind blows in axis-aligned direction to make things simpler
        dVertexPosition.yz = rotate(dVertexPosition.y, dVertexPosition.z, rotv);
        dVertexNormal.yz   = rotate(dVertexNormal.y, dVertexNormal.z, rotv);

        // Local blade position in terrain
        // because the positions are shifted by half the size of the terrain
        dBladeTerrainXZPos = bladePos / ${exports.terrainScaleParamName}.xz + TR_SIZE_H_F;
        
        // Sample the heightfield data texture to get altitude for this blade position
        float bladeAltitude = getTerrainHeightInterpolated(dBladeTerrainXZPos) * ${exports.terrainScaleParamName}.y;
        float grassFactor   = getGrassFactor(dBladeTerrainXZPos);

        float distanceQuadCenterToDraw = distance(bladeAltitude, drawPosAltitude);
        float degenerateByDistanceFromBladeToDraw = smoothstep(0.81, 1.0, MAX_ZINIT_DISTANCE / distanceQuadCenterToDraw);

        // Determine if we want the grass to appear or not
        // Use the noise channel to perturb the blade altitude grass starts growing at.
        // float noisyAltitude = grassFactor * TRANSITION_NOISE - (TRANSITION_NOISE / 2.0);
        // float degenerateByNoise = (clamp(noisyAltitude, TRANSITION_LOW, TRANSITION_HIGH) - TRANSITION_LOW) * (1.0 / (TRANSITION_HIGH - TRANSITION_LOW));

        // Transition geometry toward degenerate as we approach terrain altitude
        dVertexPosition *= grassFactor * degenerateByDistanceFromBladeToDraw * degenerateByDistanceFromBladeToQuadCenter; // degenerateByNoise

        // Translate to world coordinates
        dVertexPosition.x += bladePos.x;
        dVertexPosition.y += bladePos.y;
        dVertexPosition.z += bladeAltitude;
        
        // Translate to xz plane
        dVertexPosition = dVertexPosition.xzy;
        dVertexNormal   = dVertexNormal.xzy;

        // grass texture coordinate for this vertex
        vUvCoord = vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);

        // terrain texture coordinate for this vertex
        vUvTerrainCoord = dBladeTerrainXZPos / TR_SIZE_F;

        // Vertex color must be brighter because it is multiplied with blade texture
        // Each blade is randomly colourized a bit by its position
        vColor = vec3(cos(${exports.offsetAttrName}.x), sin(${exports.offsetAttrName}.y), sin(${exports.offsetAttrName}.x));
    }
`;
    // https://community.khronos.org/t/discarding-polygons-in-vertex-shader/103839/9
    exports.startVS = `
    ${exports.startUv0VS}

    void main(void) {

        gl_Position = getPosition();
`;
    exports.diffusePS = `
    uniform sampler2D uDiffuseTex;
    uniform vec3 uDiffuseColor;
    uniform vec3 uDiffuseColorRandom;

    varying vec2 vUvTerrainCoord;
    varying vec2 vUvCoord;
    varying vec3 vColor;

    vec3 autoGammaCorrectInput(vec3 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    vec4 autoGammaCorrectInput(vec4 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    void getAlbedo() {

        vec3 tex = autoGammaCorrectInput(texture2D(uDiffuseTex, vUvCoord).rgb);

        dAlbedo = tex * uDiffuseColor + vColor * uDiffuseColorRandom;
    }
`;
    exports.chunks = Object.assign(Object.assign({}, TerrainPatchesShaderChunks_mjs_1.heightMapFactorsChunks), { heightMapSamplerBugFix: TerrainPatchesShaderChunks_mjs_1.heightMapSamplerBugFix,
        definesVS: exports.definesVS,
        definesBladeVS: exports.definesBladeVS,
        bladeDecoderVS: exports.bladeDecoderVS,
        calculateLocalVS: exports.calculateLocalVS,
        terrainHeightMapVS: exports.terrainHeightMapVS,
        // Vertex
        baseVS: exports.baseVS,
        baseClearSubVS: exports.baseClearSubVS,
        transformVS: exports.transformVS,
        transformDeclVS: exports.transformDeclVS,
        instancingVS: exports.instancingVS,
        transformInstancingVS: exports.transformInstancingVS,
        normalCoreVS: exports.normalCoreVS,
        normalVS: exports.normalVS,
        uv0VS: exports.uv0VS,
        startVS: exports.startVS,
        // Fragment
        diffusePS: exports.diffusePS });
    function getGrassShaderChunks({ width, depth, heightMapChunkSize, heightMapFormat, bladeMaxHeight, lod0BladeSegs, lod1BladeSegs, lod2BladeSegs, radius, transitionLow, transitionHigh, chunksStore = exports.chunks, engineVersion = 'v1', }) {
        const definesVS = chunksStore.definesVS
            .replace('%%HM_NUM_CHUNKS_X%%', String((width - 1) / (heightMapChunkSize - 1) | 0))
            .replace('%%HM_CHUNK_SIZE%%', String(heightMapChunkSize | 0))
            .replace('%%TR_SIZE_X%%', String(width))
            .replace('%%TR_SIZE_Z%%', String(depth))
            .replace('%%TR_SIZE_X_F%%', width.toFixed(1))
            .replace('%%TR_SIZE_Z_F%%', depth.toFixed(1))
            .replace('%%BLADE_HEIGHT_TALL%%', bladeMaxHeight.toFixed(1))
            .replace('%%PATCH_SIZE%%', radius.toFixed(1))
            .replace('%%TRANSITION_LOW%%', transitionLow.toString())
            .replace('%%TRANSITION_HIGH%%', transitionHigh.toString());
        const definesBladeVS = chunksStore.definesBladeVS
            .replace('%%LOD0_BLADE_SEGS%%', lod0BladeSegs.toFixed(1))
            .replace('%%LOD1_BLADE_SEGS%%', lod1BladeSegs.toFixed(1))
            .replace('%%LOD2_BLADE_SEGS%%', lod2BladeSegs.toFixed(1));
        const baseClearVS = chunksStore.baseVS + chunksStore.heightMapSamplerBugFix.replaceAll('%%HEIGHT_MAP_SAMPLER%%', (0, TerrainPatchesShaderChunks_mjs_1.getSamplerType)(heightMapFormat));
        const terrainHeightFactorVS = (0, TerrainPatchesShaderChunks_mjs_1.getTerrainHeightFactorVS)(heightMapFormat, chunksStore);
        const transformVS = terrainHeightFactorVS
            + chunksStore.terrainHeightMapVS
            + chunksStore.bladeDecoderVS
            + chunksStore.calculateLocalVS
            + chunksStore.transformVS;
        if (engineVersion === 'v2') {
            const transform2VS = definesVS + definesBladeVS + baseClearVS + transformVS;
            return {
                // Vertex
                transformVS: transform2VS,
                transformCoreVS: "",
                transformInstancingVS: "",
                normalCoreVS: chunksStore.normalCoreVS,
                // Fragment
                diffusePS: chunksStore.diffusePS,
            };
        }
        const baseVS = definesVS +
            definesBladeVS +
            baseClearVS +
            chunksStore.baseClearSubVS;
        const diffusePS = '#define GAMMA_NORMALIZE\r\n'
            + chunksStore.diffusePS;
        return {
            // Vertex
            baseVS,
            startVS: chunksStore.startVS,
            transformVS: transformVS,
            transformDeclVS: chunksStore.transformDeclVS,
            instancingVS: chunksStore.instancingVS,
            normalVS: chunksStore.normalVS,
            uv0VS: chunksStore.uv0VS,
            // Fragment
            diffusePS: diffusePS,
        };
    }
});
/*
 * A speed-improved perlin and simplex noise algorithms for 2D.
 *
 * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
 * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
 * Better rank ordering method by Stefan Gustavson in 2012.
 * Converted to Javascript by Joseph Gentle.
 *
 * Version 2012-03-09
 *
 * This code was placed in the public domain by its original author,
 * Stefan Gustavson. You may use it as you see fit, but
 * attribution is appreciated.
 *
 * --------------------
 * TypeScriptified 2016
 */
define("src/GrassFieldHelpers/simplex", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.default = simplex;
    class Grad {
        constructor(x, y, z) {
            this.x = x;
            this.y = y;
            this.z = z;
        }
        dot2(x, y) {
            return this.x * x + this.y * y;
        }
        dot3(x, y, z) {
            return this.x * x + this.y * y + this.z * z;
        }
    }
    const F2 = 0.5 * (Math.sqrt(3) - 1);
    const G2 = (3 - Math.sqrt(3)) / 6;
    const perm = new Array(512);
    const gradP = new Array(512);
    const grad3 = [
        new Grad(1, 1, 0), new Grad(-1, 1, 0), new Grad(1, -1, 0), new Grad(-1, -1, 0),
        new Grad(1, 0, 1), new Grad(-1, 0, 1), new Grad(1, 0, -1), new Grad(-1, 0, -1),
        new Grad(0, 1, 1), new Grad(0, -1, 1), new Grad(0, 1, -1), new Grad(0, -1, -1)
    ];
    const p = [
        151, 160, 137, 91, 90, 15,
        131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,
        190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,
        88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,
        77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,
        102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,
        135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,
        5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,
        223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,
        129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,
        251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,
        49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,
        138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180
    ];
    // This isn't a very good seeding function, but it works ok. It supports 2^16
    // different seed values. Write something better if you need more seeds.
    function seed(seed) {
        if (seed > 0 && seed < 1) {
            // Scale the seed out
            seed *= 65536;
        }
        seed = Math.floor(seed);
        if (seed < 256) {
            seed |= seed << 8;
        }
        for (let i = 0; i < 256; i++) {
            let v;
            if (i & 1) {
                v = p[i] ^ (seed & 255);
            }
            else {
                v = p[i] ^ ((seed >> 8) & 255);
            }
            perm[i] = perm[i + 256] = v;
            gradP[i] = gradP[i + 256] = grad3[v % 12];
        }
    }
    seed(0);
    // 2D simplex noise
    function simplex(xin, yin) {
        let n0, n1, n2; // Noise contributions from the three corners
        // Skew the input space to determine which simplex cell we're in
        const s = (xin + yin) * F2; // Hairy factor for 2D
        let i = Math.floor(xin + s);
        let j = Math.floor(yin + s);
        const t = (i + j) * G2;
        const x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.
        const y0 = yin - j + t;
        // For the 2D case, the simplex shape is an equilateral triangle.
        // Determine which simplex we are in.
        let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords
        if (x0 > y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)
            i1 = 1;
            j1 = 0;
        }
        else { // upper triangle, YX order: (0,0)->(0,1)->(1,1)
            i1 = 0;
            j1 = 1;
        }
        // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and
        // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where
        // c = (3-sqrt(3))/6
        const x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords
        const y1 = y0 - j1 + G2;
        const x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords
        const y2 = y0 - 1 + 2 * G2;
        // Work out the hashed gradient indices of the three simplex corners
        i &= 255;
        j &= 255;
        const gi0 = gradP[i + perm[j]];
        const gi1 = gradP[i + i1 + perm[j + j1]];
        const gi2 = gradP[i + 1 + perm[j + 1]];
        // Calculate the contribution from the three corners
        let t0 = 0.5 - x0 * x0 - y0 * y0;
        if (t0 < 0) {
            n0 = 0;
        }
        else {
            t0 *= t0;
            n0 = t0 * t0 * gi0.dot2(x0, y0); // (x,y) of grad3 used for 2D gradient
        }
        let t1 = 0.5 - x1 * x1 - y1 * y1;
        if (t1 < 0) {
            n1 = 0;
        }
        else {
            t1 *= t1;
            n1 = t1 * t1 * gi1.dot2(x1, y1);
        }
        let t2 = 0.5 - x2 * x2 - y2 * y2;
        if (t2 < 0) {
            n2 = 0;
        }
        else {
            t2 *= t2;
            n2 = t2 * t2 * gi2.dot2(x2, y2);
        }
        // Add contributions from each corner to get the final noise value.
        // The result is scaled to return values in the interval [-1,1].
        return 70 * (n0 + n1 + n2);
    }
});
define("src/Scripts/FlyCamera", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.flyCameraScriptName = exports.FlyCamera = void 0;
    class FlyCamera extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this.mobileControl = false;
        }
        initialize() {
            // Camera euler angle rotation around x and y axes
            const eulers = this.entity.getLocalEulerAngles();
            this.ex = (eulers.z - eulers.x);
            this.ey = (eulers.z - eulers.y);
            this.translateLoc = pc.Vec3.ZERO.clone();
            this.moved = false;
            this.rightDown = false;
            this.middleDown = false;
            // Disabling the context menu stops the browser displaying a menu when
            // you right-click the page
            if (this.app.mouse) {
                this.app.mouse.disableContextMenu();
                this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);
                this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);
                this.app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);
            }
        }
        append(x, y) {
            this.ex += x;
            this.ey += y;
            this.ex = pc.math.clamp(this.ex, -90, 90);
        }
        translate(x, y, z) {
            this.translateLoc.x += x;
            this.translateLoc.y += y;
            this.translateLoc.z += z;
        }
        update(dt) {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
            const app = this.app;
            let speed = this.speed;
            if ((_a = app.keyboard) === null || _a === void 0 ? void 0 : _a.isPressed(pc.KEY_SPACE)) {
                speed = this.slowSpeed;
            }
            if ((_b = app.keyboard) === null || _b === void 0 ? void 0 : _b.isPressed(pc.KEY_SHIFT)) {
                speed = this.fastSpeed;
            }
            // Joypad control
            const joystickMover = touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.sticks['joystick0'];
            const joystickRoter = touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.sticks['joystick1'];
            if (this.mobileControls && (touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.buttons.wasPressed('button2'))) {
                this.mobileControl = !this.mobileControl;
                this.mobileControls.enabled = this.mobileControl;
            }
            if (joystickRoter) {
                this.append(joystickRoter.y, -joystickRoter.x);
            }
            if (joystickMover) {
                this.translate(speed * joystickMover.x * dt, 0, -speed * joystickMover.y * dt);
            }
            // Update the camera's position
            if (((_c = app.keyboard) === null || _c === void 0 ? void 0 : _c.isPressed(pc.KEY_UP)) || ((_d = app.keyboard) === null || _d === void 0 ? void 0 : _d.isPressed(pc.KEY_W))) {
                this.translate(0, 0, -speed * dt);
            }
            else if (((_e = app.keyboard) === null || _e === void 0 ? void 0 : _e.isPressed(pc.KEY_DOWN)) || ((_f = app.keyboard) === null || _f === void 0 ? void 0 : _f.isPressed(pc.KEY_S))) {
                this.translate(0, 0, speed * dt);
            }
            if (((_g = app.keyboard) === null || _g === void 0 ? void 0 : _g.isPressed(pc.KEY_LEFT)) || ((_h = app.keyboard) === null || _h === void 0 ? void 0 : _h.isPressed(pc.KEY_A))) {
                this.translate(-speed * dt, 0, 0);
            }
            else if (((_j = app.keyboard) === null || _j === void 0 ? void 0 : _j.isPressed(pc.KEY_RIGHT)) || ((_k = app.keyboard) === null || _k === void 0 ? void 0 : _k.isPressed(pc.KEY_D))) {
                this.translate(speed * dt, 0, 0);
            }
            // Update the camera's TRS
            this.entity.setLocalEulerAngles(this.ex, this.ey, 0);
            this.entity.translateLocal(this.translateLoc);
            this.translateLoc.set(0, 0, 0);
            // Update frustum by actual matrix
            this.app.renderer.updateCameraFrustum((_l = this.entity.camera) === null || _l === void 0 ? void 0 : _l.camera);
        }
        onMouseMove(event) {
            if (!this.mode && !pc.Mouse.isPointerLocked()) {
                return;
            }
            if (!this.rightDown &&
                !this.middleDown)
                return;
            // Update the current Euler angles, clamp the pitch.
            if (!this.moved) {
                // first move event can be very large
                this.moved = true;
                return;
            }
            if (this.rightDown) {
                this.append(-event.dy / this.sensitivity, -event.dx / this.sensitivity);
            }
            if (this.middleDown) {
                let speed = this.speed;
                if (this.app.keyboard.isPressed(pc.KEY_SHIFT)) {
                    speed = this.fastSpeed;
                }
                this.translate(-(event.dx / 5) * speed, (event.dy / 5) * speed, 0);
            }
        }
        onMouseDown(event) {
            // When the mouse button is clicked try and capture the pointer
            if (!this.mode && !pc.Mouse.isPointerLocked()) {
                this.app.mouse.enablePointerLock();
            }
            if (event.button === pc.MOUSEBUTTON_RIGHT) {
                this.rightDown = true;
            }
            if (event.button === pc.MOUSEBUTTON_MIDDLE) {
                this.middleDown = true;
            }
        }
        onMouseUp(event) {
            if (event.button === pc.MOUSEBUTTON_RIGHT) {
                this.rightDown = false;
            }
            if (event.button === pc.MOUSEBUTTON_MIDDLE) {
                this.middleDown = false;
            }
        }
    }
    exports.FlyCamera = FlyCamera;
    exports.default = FlyCamera;
    exports.flyCameraScriptName = 'flyCamera';
    pc.registerScript(FlyCamera, exports.flyCameraScriptName);
    FlyCamera.attributes.add('mobileControls', {
        type: 'entity',
    });
    FlyCamera.attributes.add('speed', {
        type: 'number',
        default: 10
    });
    FlyCamera.attributes.add('slowSpeed', {
        type: 'number',
        default: 1
    });
    FlyCamera.attributes.add('fastSpeed', {
        type: 'number',
        default: 20
    });
    FlyCamera.attributes.add('sensitivity', {
        type: 'number',
        min: 1,
        default: 5
    });
    FlyCamera.attributes.add('mode', {
        type: 'number',
        default: 0,
        enum: [{
                "Lock": 0
            }, {
                "Drag": 1
            }]
    });
});
define("src/Scripts/FpsCounter", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.fpsCounterScriptName = void 0;
    class FpsCounter extends pc.ScriptType {
        initialize() {
            const constr = window.FPSMeter;
            if (constr) {
                this.fps = new constr({
                    heat: true,
                    graph: true
                });
            }
        }
        update(dt) {
            var _a;
            (_a = this.fps) === null || _a === void 0 ? void 0 : _a.tick();
        }
    }
    exports.default = FpsCounter;
    exports.fpsCounterScriptName = 'FpsCounter';
    pc.registerScript(FpsCounter, exports.fpsCounterScriptName);
});
define("src/Shared/Debug", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.drawDirectionVector = drawDirectionVector;
    exports.drawPoint = drawPoint;
    exports.drawBox = drawBox;
    const tmpVec = new pc.Vec3();
    function drawDirectionVector(position, dir, color = pc.Color.RED) {
        // Draw the vector
        const start = position;
        const end = tmpVec.add2(position, dir);
        pc.app.drawLine(start, end, color, false);
    }
    function drawPoint({ center, radius = 0.1, numSegments = 4, color = pc.Color.RED, layer, depthTest = false }) {
        const block = 6 * 3;
        const points = new Array(numSegments * block);
        const step = 2 * Math.PI / numSegments;
        let angle = 0;
        for (let i = 0; i < numSegments; i++) {
            const sin0 = Math.sin(angle);
            const cos0 = Math.cos(angle);
            angle += step;
            const sin1 = Math.sin(angle);
            const cos1 = Math.cos(angle);
            const j = i * block;
            points[j + 0] = center.x + radius * sin0;
            points[j + 1] = center.y;
            points[j + 2] = center.z + radius * cos0;
            points[j + 3] = center.x + radius * sin1;
            points[j + 4] = center.y;
            points[j + 5] = center.z + radius * cos1;
            points[j + 6] = center.x;
            points[j + 7] = center.y + radius * sin0;
            points[j + 8] = center.z + radius * cos0;
            points[j + 9] = center.x;
            points[j + 10] = center.y + radius * sin1;
            points[j + 11] = center.z + radius * cos1;
            points[j + 12] = center.x + radius * cos0;
            points[j + 13] = center.y + radius * sin0;
            points[j + 14] = center.z;
            points[j + 15] = center.x + radius * cos1;
            points[j + 16] = center.y + radius * sin1;
            points[j + 17] = center.z;
        }
        pc.app.drawLineArrays(points, color, depthTest, layer);
    }
    function drawBox({ min, max, color = pc.Color.RED, layer, depthTest = false }) {
        var _a;
        (_a = pc.app) === null || _a === void 0 ? void 0 : _a.drawWireAlignedBox(min, max, color, depthTest, layer);
    }
});
define("src/Shared/Random", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class Random {
        constructor(seed) {
            this.seed = seed;
            this._tmp = seed;
        }
        reset() {
            this._tmp = this.seed;
        }
        next() {
            this._tmp = (this._tmp * 48271) % 2147483647;
            this._tick = this._tmp / 2147483647;
            return this._tick;
        }
        nextFloat(min, max) {
            return this.next() * (max - min) + min;
        }
        nextInt(min, max) {
            return this.nextFloat(min, max) | 0;
        }
        random() {
            return this.next();
        }
        nrand() {
            return this.nextFloat(-1, 1);
        }
    }
    exports.default = Random;
});
define("src/Shared/Store2D", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ObjStore2D = exports.AbsStore2D = void 0;
    class AbsStore2D {
        constructor() {
            this._cols = 0;
            this._rows = 0;
        }
        init(cols, rows) {
            this._cols = cols;
            this._rows = rows;
            const size = cols * rows;
            this._p = this._initArrayType(size);
        }
        initByVal(cols, rows, val) {
            this.init(cols, rows);
            const size = cols * rows;
            const valIsFunc = typeof val === 'function';
            for (let i = 0; i < size; i++) {
                this._p[i] = valIsFunc ? val() : val;
            }
        }
        initByStore(cols, rows, val) {
            this._cols = cols;
            this._rows = rows;
            this._p = val;
        }
        addr() {
            return this._p;
        }
        size() {
            return this._rows * this._cols;
        }
        get(col, row) {
            return this._p[row * this._cols + col];
        }
        set(col, row, value) {
            this._p[row * this._cols + col] = value;
        }
        getByIndex(index) {
            return this._p[index];
        }
        setByIndex(index, value) {
            this._p[index] = value;
        }
    }
    exports.AbsStore2D = AbsStore2D;
    class ObjStore2D extends AbsStore2D {
        _initArrayType(size) {
            return new Array(size);
        }
    }
    exports.ObjStore2D = ObjStore2D;
});
define("src/Shared/Vector3Math", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.set = set;
    exports.distance = distance;
    exports.distanceV3XYZ = distanceV3XYZ;
    exports.distanceX1Y1Z1X2Y2Z2 = distanceX1Y1Z1X2Y2Z2;
    exports.normalize = normalize;
    exports.normalizeRef = normalizeRef;
    exports.add = add;
    exports.addRef = addRef;
    exports.subtract = subtract;
    exports.cross = cross;
    /**
     * Sets the specified 3-dimensional vector to the supplied numerical values.
     */
    function set(to, x, y, z) {
        to.x = x;
        to.y = y;
        to.z = z;
        return to;
    }
    /**
     * Returns the Euclidean distance between the two given points.
     */
    function distance(value1, value2) {
        const dx = value1.x - value2.x;
        const dy = value1.y - value2.y;
        const dz = value1.z - value2.z;
        const ls = dx * dx + dy * dy + dz * dz;
        return Math.sqrt(ls);
    }
    /**
     * Returns the Euclidean distance between the two given points.
     */
    function distanceV3XYZ(value1, x, y, z) {
        const dx = value1.x - x;
        const dy = value1.y - y;
        const dz = value1.z - z;
        const ls = dx * dx + dy * dy + dz * dz;
        return Math.sqrt(ls);
    }
    /**
     * Returns the Euclidean distance between the two given points.
     */
    function distanceX1Y1Z1X2Y2Z2(x1, y1, z1, x2, y2, z2) {
        const dx = x1 - x2;
        const dy = y1 - y2;
        const dz = z1 - z2;
        const ls = dx * dx + dy * dy + dz * dz;
        return Math.sqrt(ls);
    }
    /**
     * Returns a vector with the same direction as the given vector, but with a length of 1.
     */
    function normalize(value, out) {
        const ls = value.x * value.x + value.y * value.y + value.z * value.z;
        const length = Math.sqrt(ls);
        return set(out, value.x / length, value.y / length, value.z / length);
    }
    /**
     * Update the vector with the same direction as the given vector, but with a length of 1.
     */
    function normalizeRef(refValue) {
        const ls = refValue.x * refValue.x + refValue.y * refValue.y + refValue.z * refValue.z;
        const length = Math.sqrt(ls);
        refValue.x /= length;
        refValue.y /= length;
        refValue.z /= length;
        return refValue;
    }
    /**
     * Adds two vectors.
     */
    function add(left, right, out) {
        return set(out, left.x + right.x, left.y + right.y, left.z + right.z);
    }
    /**
     * Adds two vectors.
     */
    function addRef(refLeft, right) {
        return add(refLeft, right, refLeft);
    }
    /**
     * Subtracts the second vector from the first.
     */
    function subtract(left, right, out) {
        return set(out, left.x - right.x, left.y - right.y, left.z - right.z);
    }
    /**
     * Computes the cross product of two vectors.
     */
    function cross(vector1, vector2, out) {
        return set(out, vector1.y * vector2.z - vector1.z * vector2.y, vector1.z * vector2.x - vector1.x * vector2.z, vector1.x * vector2.y - vector1.y * vector2.x);
    }
    exports.default = {
        set,
        normalize,
        normalizeRef,
        add,
        subtract,
        addRef,
        distance,
        distanceV3XYZ,
        distanceX1Y1Z1X2Y2Z2,
        cross
    };
});
define("src/Shared/Vector2Math", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.distanceX1Z1X2Z2 = distanceX1Z1X2Z2;
    /**
     * Returns the Euclidean distance between the two given points.
     */
    function distanceX1Z1X2Z2(x1, z1, x2, z2) {
        const dx = x1 - x2;
        const dz = z1 - z2;
        const ls = dx * dx + dz * dz;
        return Math.sqrt(ls);
    }
    exports.default = {
        distanceX1Z1X2Z2,
    };
});
define("src/TerrainSystem/LodManager", ["require", "exports", "src/Shared/Store2D", "src/Shared/Utils", "src/Shared/Vector3Math", "src/Shared/Vector2Math"], function (require, exports, Store2D_mjs_1, Utils_mjs_2, Vector3Math_mjs_1, Vector2Math_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.LodManager = exports.defaultPatchLod = void 0;
    exports.getLodId = getLodId;
    Vector3Math_mjs_1 = __importDefault(Vector3Math_mjs_1);
    Vector2Math_mjs_1 = __importDefault(Vector2Math_mjs_1);
    function getLodId(c, l, r, t, b) {
        const lodCore = c + 1;
        const lodBinaryValue = (l << 3) | (r << 2) | (t << 1) | b;
        return lodCore * 0x1111 - lodBinaryValue;
    }
    exports.defaultPatchLod = {
        distance: 0,
        core: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
    };
    const getZeroPatchLod = () => ({
        distance: 0,
        core: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
    });
    class LodManager {
        get zFar() { return this._zFar; }
        get maxLOD() { return this._maxLOD; }
        constructor(zFar, patchSize, numPatchesX, numPatchesZ) {
            this.setParams(zFar, patchSize, numPatchesX, numPatchesZ);
        }
        setZFar(zFar) {
            this._zFar = zFar;
            this._calcLodRegions();
        }
        setParams(zFar, patchSize, numPatchesX, numPatchesZ) {
            this._patchSize = patchSize;
            this._numPatchesX = numPatchesX;
            this._numPatchesZ = numPatchesZ;
            this._calcMaxLOD();
            this._map = new Store2D_mjs_1.ObjStore2D();
            this._map.initByVal(numPatchesX, numPatchesZ, getZeroPatchLod);
            this._regions = new Array(this._maxLOD + 1);
            this.setZFar(zFar);
        }
        _calcMaxLOD() {
            const numSegments = this._patchSize - 1;
            const numSegmentsLog2 = Math.log2(numSegments);
            const numSegmentsLog2Ceil = Math.ceil(numSegmentsLog2);
            const numSegmentsLog2Floor = Math.floor(numSegmentsLog2);
            if (numSegmentsLog2Ceil !== numSegmentsLog2Floor) {
                throw new Error("The number of vertices in the patch minus one must be a power of two\n");
            }
            this._maxLOD = numSegmentsLog2Floor - 1;
        }
        _calcLodRegions() {
            // TODO: We can use the ring system to determine the LOD.
            // TODO: Based on the heights we can calculate the optimal lods
            let sum = 0;
            for (let i = 0; i <= this._maxLOD; i++) {
                sum += i + 1;
            }
            let x = this._zFar / sum;
            let temp = 0;
            for (let i = 0; i <= this._maxLOD; i++) {
                const curRange = (x * (i + 1)) | 0;
                this._regions[i] = temp + curRange;
                temp += curRange;
            }
        }
        printLodMap() {
            let str = '';
            const maxLodMaxZ = this._numPatchesZ - 1;
            const maxLodMaxX = this._numPatchesX;
            let maxCore = 0;
            for (let lodMapZ = maxLodMaxZ; lodMapZ >= 0; lodMapZ--) {
                for (let lodMapX = 0; lodMapX < maxLodMaxX; lodMapX++) {
                    const value = this._map.get(lodMapX, lodMapZ).core;
                    if (maxCore < value) {
                        maxCore = value;
                    }
                }
            }
            const lodMaxNumberCount = maxLodMaxZ.toString().length;
            const coreMaxNumberCount = maxCore.toString().length;
            for (let lodMapZ = maxLodMaxZ; lodMapZ >= 0; lodMapZ--) {
                str += (0, Utils_mjs_2.getText)(lodMapZ, lodMaxNumberCount, ' ') + ': ';
                for (let lodMapX = 0; lodMapX < maxLodMaxX; lodMapX++) {
                    const value = this._map.get(lodMapX, lodMapZ).core;
                    str += (0, Utils_mjs_2.getText)(value, coreMaxNumberCount, ' ') + ' ';
                }
                str += '\n';
            }
            console.log(str);
        }
        distanceToLod(distance) {
            let lod = this._maxLOD;
            for (let i = 0; i < this._maxLOD; i++) {
                if (distance < this._regions[i]) {
                    lod = i;
                    break;
                }
            }
            return lod;
        }
        getPatchLod(patchX, patchZ) {
            return this._map.get(patchX, patchZ);
        }
        getPatchLodByIndex(index) {
            return this._map.getByIndex(index);
        }
        update(cameraPos, heightMap, useYPos = true, center = true) {
            const a = this.updateLodMapPass1(cameraPos, heightMap, useYPos, center);
            const b = this.updateLodMapPass2();
            return a || b;
        }
        updateLodMapPass1(cameraPos, heightMap, useYPos, center) {
            let hasChange = false;
            let distanceToCamera;
            const centerStep = this._patchSize / 2 | 0;
            const halfWidth = heightMap.width / 2;
            const halfDepth = heightMap.depth / 2;
            let cameraPosTerrainAltitude = 0;
            if (useYPos) {
                const normalizeCameraX = Math.min(Math.max(center ? cameraPos.x + halfWidth : cameraPos.x, 0), heightMap.width - 1);
                const normalizeCameraZ = Math.min(Math.max(center ? cameraPos.z + halfDepth : cameraPos.z, 0), heightMap.depth - 1);
                cameraPosTerrainAltitude = heightMap.get(normalizeCameraX | 0, normalizeCameraZ | 0);
            }
            for (let lodMapZ = 0; lodMapZ < this._numPatchesZ; lodMapZ++) {
                for (let lodMapX = 0; lodMapX < this._numPatchesX; lodMapX++) {
                    const x = lodMapX * (this._patchSize - 1) + centerStep;
                    const z = lodMapZ * (this._patchSize - 1) + centerStep;
                    const patchCenterX = center ? -halfWidth + x : x;
                    const patchCenterZ = center ? -halfDepth + z : z;
                    if (useYPos) {
                        distanceToCamera = Vector3Math_mjs_1.default.distanceV3XYZ(cameraPos, patchCenterX, cameraPosTerrainAltitude, patchCenterZ);
                    }
                    else {
                        distanceToCamera = Vector2Math_mjs_1.default.distanceX1Z1X2Z2(cameraPos.x, cameraPos.z, patchCenterX, patchCenterZ);
                    }
                    const coreLod = this.distanceToLod(distanceToCamera);
                    const pPatchLOD = this._map.get(lodMapX, lodMapZ);
                    pPatchLOD.distance = distanceToCamera;
                    if (pPatchLOD.core !== coreLod) {
                        pPatchLOD.core = coreLod;
                        hasChange = true;
                    }
                }
            }
            return hasChange;
        }
        updateLodMapPass2() {
            let hasChange = false;
            for (let lodMapZ = 0; lodMapZ < this._numPatchesZ; lodMapZ++) {
                for (let lodMapX = 0; lodMapX < this._numPatchesX; lodMapX++) {
                    const item = this._map.get(lodMapX, lodMapZ);
                    const coreLod = item.core;
                    let indexLeft = lodMapX;
                    let indexRight = lodMapX;
                    let indexTop = lodMapZ;
                    let indexBottom = lodMapZ;
                    if (lodMapX > 0) {
                        indexLeft--;
                        const prev = item.left;
                        const next = this._map.get(indexLeft, lodMapZ).core > coreLod ? 1 : 0;
                        if (prev !== next) {
                            item.left = next;
                            hasChange = true;
                        }
                    }
                    if (lodMapX < this._numPatchesX - 1) {
                        indexRight++;
                        const prev = item.right;
                        const next = this._map.get(indexRight, lodMapZ).core > coreLod ? 1 : 0;
                        if (prev !== next) {
                            item.right = next;
                            hasChange = true;
                        }
                    }
                    if (lodMapZ > 0) {
                        indexBottom--;
                        const prev = item.bottom;
                        const next = this._map.get(lodMapX, indexBottom).core > coreLod ? 1 : 0;
                        if (prev !== next) {
                            item.bottom = next;
                            hasChange = true;
                        }
                    }
                    if (lodMapZ < this._numPatchesZ - 1) {
                        indexTop++;
                        const prev = item.top;
                        const next = this._map.get(lodMapX, indexTop).core > coreLod ? 1 : 0;
                        if (prev !== next) {
                            item.top = next;
                            hasChange = true;
                        }
                    }
                }
            }
            return hasChange;
        }
    }
    exports.LodManager = LodManager;
    exports.default = LodManager;
});
define("src/TerrainSystem/CoordsBuffer", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CoordsBuffer = exports.coordsVertexSize = void 0;
    exports.coordsVertexSize = 2;
    class CoordsBuffer {
        get patchVertexBufferLength() { return this._length; }
        get patchVertexBufferData() { return this._data; }
        get patchVertexBufferTyped() { return this._dataTyped; }
        get width() { return this._width; }
        get depth() { return this._depth; }
        get patchSize() { return this._patchSize; }
        constructor(heightMap, patchSize) {
            this.heightMap = heightMap;
            // We can use uint8 for patches smaller than 255, but we only use 2 bytes,
            // for optimal performance need 4 bytes for the buffer.
            this._patchSize = patchSize;
            this._width = heightMap.width;
            this._depth = heightMap.depth;
            this._length = this._patchSize * this._patchSize;
            const coordsArrLength = this._length * exports.coordsVertexSize;
            const coordsByteLength = coordsArrLength * Uint16Array.BYTES_PER_ELEMENT;
            this._data = new ArrayBuffer(coordsByteLength);
            this._dataTyped = new Uint16Array(this._data, 0, coordsArrLength);
        }
        init() {
            let index = 0;
            for (let z = 0; z < this._patchSize; z++) {
                for (let x = 0; x < this._patchSize; x++) {
                    this._dataTyped[index++] = x;
                    this._dataTyped[index++] = z;
                }
            }
        }
        getPosition(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.y = this.heightMap.get(x, z);
            buf.z = z;
            return true;
        }
        getPositionWithHeightByFactor(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.y = this.heightMap.getFactor(x, z);
            buf.z = z;
            return true;
        }
        getCoords(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.z = z;
            return true;
        }
    }
    exports.CoordsBuffer = CoordsBuffer;
    exports.default = CoordsBuffer;
});
define("src/TerrainSystem/LodInfo", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.LodInfo = exports.BOTTOM = exports.TOP = exports.RIGHT = exports.LEFT = void 0;
    exports.initInfo = initInfo;
    exports.LEFT = 2;
    exports.RIGHT = 2;
    exports.TOP = 2;
    exports.BOTTOM = 2;
    function initInfo() {
        const arr = [];
        for (let l = 0; l < exports.LEFT; l++) {
            arr[l] = new Array(exports.RIGHT);
            for (let r = 0; r < exports.RIGHT; r++) {
                arr[l][r] = new Array(exports.TOP);
                for (let t = 0; t < exports.TOP; t++) {
                    arr[l][r][t] = new Array(exports.BOTTOM);
                    for (let b = 0; b < exports.BOTTOM; b++) {
                        arr[l][r][t][b] = {
                            start: 0,
                            count: 0
                        };
                    }
                }
            }
        }
        return arr;
    }
    class LodInfo {
        constructor() {
            this.info = initInfo();
        }
        clear() {
            for (let l = 0; l < exports.LEFT; l++) {
                for (let r = 0; r < exports.RIGHT; r++) {
                    for (let t = 0; t < exports.TOP; t++) {
                        for (let b = 0; b < exports.BOTTOM; b++) {
                            const single = this.info[l][r][t][b];
                            single.start = 0;
                            single.count = 0;
                        }
                    }
                }
            }
        }
    }
    exports.LodInfo = LodInfo;
    exports.default = LodInfo;
});
define("src/TerrainSystem/GridBuilder", ["require", "exports", "src/TerrainSystem/LodInfo", "src/TerrainSystem/LodManager"], function (require, exports, LodInfo_mjs_1, LodManager_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GridBuilder = void 0;
    LodManager_mjs_1 = __importDefault(LodManager_mjs_1);
    class GridBuilder {
        get zFar() { return this._lodManager.zFar; }
        get width() { return this._grid.width; }
        get depth() { return this._grid.depth; }
        get patchSize() { return this._grid.patchSize; }
        get numPatchesX() { return this._grid.numPatchesX; }
        get numPatchesZ() { return this._grid.numPatchesZ; }
        get maxLOD() { return this.lodManager.maxLOD; }
        get patchIndices() { return this._indices; }
        get lodManager() { return this._lodManager; }
        get lodInfo() { return this._lodInfo; }
        constructor(grid, zFar) {
            this._grid = grid;
            const width = grid.width;
            const depth = grid.depth;
            const patchSize = grid.patchSize;
            const numPatchesX = grid.numPatchesX;
            const numPatchesZ = grid.numPatchesZ;
            if (width >= 0xffff) {
                console.error("Max width = %d\n", 0xffff - 1);
                throw new Error();
            }
            if (depth >= 0xffff) {
                console.error("Max depth = %d\n", 0xffff - 1);
                throw new Error();
            }
            if ((width - 1) % (patchSize - 1) !== 0) {
                const recommendedWidth = ((width - 1 + patchSize - 1) / (patchSize - 1)) * (patchSize - 1) + 1;
                console.error("Width minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", width, patchSize);
                console.error("Try using Width = %d\n", recommendedWidth);
                throw new Error();
            }
            if ((depth - 1) % (patchSize - 1) !== 0) {
                const recommendedDepth = ((depth - 1 + patchSize - 1) / (patchSize - 1)) * (patchSize - 1) + 1;
                console.error("Depth minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", depth, patchSize);
                console.error("Try using Width = %d\n", recommendedDepth);
                throw new Error();
            }
            if (patchSize < 3) {
                console.error("The minimum patch size is 3 (%d)\n", patchSize);
                throw new Error();
            }
            if (patchSize % 2 === 0) {
                console.error("Patch size must be an odd number (%d)\n", patchSize);
                throw new Error();
            }
            this._buildLodsAndIndices(zFar, patchSize, numPatchesX, numPatchesZ);
        }
        setZFar(zFar) {
            this._lodManager.setZFar(zFar);
        }
        _buildLodsAndIndices(zFar, patchSize, numPatchesX, numPatchesZ) {
            this._lodManager = new LodManager_mjs_1.default(zFar, patchSize, numPatchesX, numPatchesZ);
            this._lodInfo = new Array(this._lodManager.maxLOD + 1);
            for (let i = 0; i < this._lodInfo.length; i++) {
                this._lodInfo[i] = new LodInfo_mjs_1.LodInfo();
            }
            let numIndices = this._calcNumIndices();
            this._indices = new Uint32Array(numIndices);
            numIndices = this._initIndices(this._indices);
            //console.log("Final number of indices %d\n", numIndices);
        }
        _calcNumIndices() {
            let numQuads = (this.patchSize - 1) * (this.patchSize - 1);
            let numIndices = 0;
            const maxPermutationsPerLevel = 16; // true/false for each of the four sides
            const indicesPerQuad = 6; // two triangles
            for (let lod = 0; lod <= this.maxLOD; lod++) {
                //console.log("LOD %d: num quads %d\n", lod, numQuads);
                numIndices += numQuads * indicesPerQuad * maxPermutationsPerLevel;
                numQuads /= 4;
            }
            //console.log("Initial number of indices %d\n", numIndices);
            return numIndices;
        }
        _initIndices(indices) {
            let index = 0;
            for (let lod = 0; lod <= this.maxLOD; lod++) {
                //console.log("*** Init indices lod %d ***\n", lod);
                index = this._initIndicesLOD(index, indices, lod);
            }
            return index;
        }
        _initIndicesLOD(index, indices, lod) {
            let totalIndicesForLOD = 0;
            for (let l = 0; l < LodInfo_mjs_1.LEFT; l++) {
                for (let r = 0; r < LodInfo_mjs_1.RIGHT; r++) {
                    for (let t = 0; t < LodInfo_mjs_1.TOP; t++) {
                        for (let b = 0; b < LodInfo_mjs_1.BOTTOM; b++) {
                            const info = this._lodInfo[lod].info[l][r][t][b];
                            info.start = index;
                            index = this._initIndicesLODSingle(index, indices, lod, lod + l, lod + r, lod + t, lod + b);
                            info.count = index - info.start;
                            totalIndicesForLOD += info.count;
                        }
                    }
                }
            }
            //console.log("Total indices for LOD: %d\n", totalIndicesForLOD);
            return index;
        }
        _initIndicesLODSingle(index, indices, lodCore, lodLeft, lodRight, lodTop, lodBottom) {
            const width = this.patchSize;
            const fanStep = Math.pow(2, lodCore + 1); // lod = 0 --> 2, lod = 1 --> 4, lod = 2 --> 8, etc
            const endPos = this.patchSize - 1 - fanStep; // patch size 5, fan step 2 --> EndPos = 2; patch size 9, fan step 2 --> EndPos = 6
            for (let z = 0; z <= endPos; z += fanStep) {
                for (let x = 0; x <= endPos; x += fanStep) {
                    const lLeft = x == 0 ? lodLeft : lodCore;
                    const lRight = x == endPos ? lodRight : lodCore;
                    const lBottom = z == 0 ? lodBottom : lodCore;
                    const lTop = z == endPos ? lodTop : lodCore;
                    index = this._createTriangleFan(index, indices, lodCore, lLeft, lRight, lTop, lBottom, x, z, width);
                }
            }
            return index;
        }
        _createTriangleFan(index, indices, lodCore, lodLeft, lodRight, lodTop, lodBottom, x, z, width) {
            const stepLeft = Math.pow(2, lodLeft); // because LOD starts at zero...
            const stepRight = Math.pow(2, lodRight);
            const stepTop = Math.pow(2, lodTop);
            const stepBottom = Math.pow(2, lodBottom);
            const stepCenter = Math.pow(2, lodCore);
            const indexCenter = (z + stepCenter) * width + x + stepCenter;
            // first up
            let indexTemp1 = z * width + x;
            let indexTemp2 = (z + stepLeft) * width + x;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second up
            if (lodLeft == lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 += stepLeft * width;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first right
            indexTemp1 = indexTemp2;
            indexTemp2 += stepTop;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second right
            if (lodTop === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 += stepTop;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first down
            indexTemp1 = indexTemp2;
            indexTemp2 -= stepRight * width;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second down
            if (lodRight === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 -= stepRight * width;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first left
            indexTemp1 = indexTemp2;
            indexTemp2 -= stepBottom;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second left
            if (lodBottom === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 -= stepBottom;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            return index;
        }
        _addTriangle(index, indices, v1, v2, v3) {
            indices[index++] = v1;
            indices[index++] = v2;
            indices[index++] = v3;
            return index;
        }
        destroy() {
            // TODO
        }
    }
    exports.GridBuilder = GridBuilder;
    exports.default = GridBuilder;
});
define("src/TerrainSystem/GeomipGridBuilder", ["require", "exports", "src/TerrainSystem/CoordsBuffer", "src/TerrainSystem/GridBuilder"], function (require, exports, CoordsBuffer_mjs_1, GridBuilder_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GeomipGridBuilder = void 0;
    GridBuilder_mjs_1 = __importDefault(GridBuilder_mjs_1);
    class GeomipGridBuilder extends GridBuilder_mjs_1.default {
        get patchVertices() { return this._vertices; }
        get heightMap() { return this._heightMap; }
        constructor(heightMap, zFar) {
            super(heightMap, zFar);
            this._heightMap = heightMap;
            this._vertices = new CoordsBuffer_mjs_1.CoordsBuffer(this._heightMap, this._heightMap.patchSize);
            this._vertices.init();
        }
    }
    exports.GeomipGridBuilder = GeomipGridBuilder;
    exports.default = GeomipGridBuilder;
});
define("src/TerrainSystem/GeomipGridRenderPreparer", ["require", "exports", "src/TerrainSystem/GeomipGridBuilder", "src/TerrainSystem/LodManager"], function (require, exports, GeomipGridBuilder_mjs_1, LodManager_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GeomipGridRenderPreparer = void 0;
    GeomipGridBuilder_mjs_1 = __importDefault(GeomipGridBuilder_mjs_1);
    class GeomipGridRenderPreparer extends GeomipGridBuilder_mjs_1.default {
        initPatches(initializer) {
            for (let patchZ = 0; patchZ < this.numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this.numPatchesX; patchX++) {
                    const minX = patchX * (this.patchSize - 1);
                    const minZ = patchZ * (this.patchSize - 1);
                    const info = this.lodInfo[0].info[0][0][0][0];
                    const baseIndex = info.start;
                    const baseVertex = minZ * this.width + minX;
                    initializer.initPatch(baseIndex, baseVertex, info.count, patchX, patchZ, minX, minZ, this.patchSize, LodManager_mjs_2.defaultPatchLod);
                }
            }
        }
        printLodMap() {
            this.lodManager.printLodMap();
        }
        updateLods(localCameraPos, useYPos = true, center = true) {
            this.lodManager.update(localCameraPos, this.heightMap, useYPos, center);
        }
        eachPatches(renderPreparer, frustum) {
            const patchSizeNorm = this.patchSize - 1;
            for (let patchZ = 0; patchZ < this.numPatchesZ; patchZ++) {
                const minZ = patchZ * patchSizeNorm;
                for (let patchX = 0; patchX < this.numPatchesX; patchX++) {
                    const minX = patchX * patchSizeNorm;
                    const visible = !!frustum && this.isPatchInsideViewFrustumBySphere(patchX, patchZ, frustum);
                    const plod = this.lodManager.getPatchLod(patchX, patchZ);
                    const info = this.lodInfo[plod.core].info[plod.left][plod.right][plod.top][plod.bottom];
                    const baseIndex = info.start;
                    const baseVertex = minZ * this.width + minX;
                    renderPreparer.preparePatch(visible, baseIndex, baseVertex, info.count, patchX, patchZ, minX, minZ, this.patchSize, plod);
                }
            }
        }
        isPatchInsideViewFrustumBySphere(patchBaseX, patchBaseZ, frustum) {
            const patchMinHeight = this.heightMap.getPatchMin(patchBaseX, patchBaseZ);
            const patchMaxHeight = this.heightMap.getPatchMax(patchBaseX, patchBaseZ);
            const patchRadiusBySize = this.patchSize / 2;
            const patchRediusByHeight = (patchMaxHeight - patchMinHeight) / 2;
            const patchCenterX = (patchBaseX * this.patchSize) + patchRadiusBySize;
            const patchCenterY = (patchMaxHeight + patchMinHeight) / 2;
            const patchCenterZ = (patchBaseZ * this.patchSize) + patchRadiusBySize;
            const radius = (patchRadiusBySize > patchRediusByHeight ? patchRadiusBySize : patchRediusByHeight) * Math.SQRT2;
            // center the patches relative to the entity center
            const patchCenteredX = (-this.width / 2) + patchCenterX;
            const patchCenteredZ = (-this.depth / 2) + patchCenterZ;
            return frustum.containsSphere(patchCenteredX, patchCenterY, patchCenteredZ, radius);
        }
    }
    exports.GeomipGridRenderPreparer = GeomipGridRenderPreparer;
    exports.default = GeomipGridRenderPreparer;
});
define("src/TerrainSystem/GeomipGrid", ["require", "exports", "src/TerrainSystem/GeomipGridRenderPreparer"], function (require, exports, GeomipGridRenderPreparer_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GeomipGrid = void 0;
    GeomipGridRenderPreparer_mjs_1 = __importDefault(GeomipGridRenderPreparer_mjs_1);
    class GeomipGrid extends GeomipGridRenderPreparer_mjs_1.default {
        setHeight(x, z, value) {
            this._heightMap.set(x, z, value);
        }
        appendToHeight(x, z, value) {
            this._heightMap.append(x, z, value);
        }
        multiplyToHeight(x, z, value, defaultHeight = 0) {
            this._heightMap.multiply(x, z, value, defaultHeight);
        }
        smoothHeightsZone(zone, np, radius) {
            this._heightMap.smoothZone(zone, np, radius);
        }
        loadHeightMapFromFile(buffer_1, options_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, options, np = -1, radius = 0) {
                const header = yield this._heightMap.fromFile(buffer, options);
                this._heightMap.smooth(np, radius);
                this._heightMap.recalculateMinMax(this._heightMap);
                this._heightMap.recalculateAABB();
                return header;
            });
        }
        loadHeightMapFromImg(img, np = -1, radius = 0) {
            this._heightMap.fromImage(img);
            this._heightMap.smooth(np, radius);
            this._heightMap.recalculateMinMax(this._heightMap);
            this._heightMap.recalculateAABB();
        }
        normalizeHeightMap(maxHeight) {
            maxHeight !== null && maxHeight !== void 0 ? maxHeight : (maxHeight = this._heightMap.maxHeight);
            this._heightMap.normalize(maxHeight);
        }
        setMaxHeight(maxHeight) {
            this._heightMap.setMaxHeight(maxHeight);
        }
        appendHeightMap(heightMap, value, zone, minHeight = null, maxHeight = null) {
            this._heightMap.combineHeights('+', heightMap, value, zone, 0, minHeight, maxHeight);
        }
        recalculateMinMax(zone, aabb = true) {
            this._heightMap.recalculateMinMax(zone);
            if (aabb) {
                this._heightMap.recalculateAABB();
            }
        }
    }
    exports.GeomipGrid = GeomipGrid;
    exports.default = GeomipGrid;
});
define("src/TerrainSystem/Terrain", ["require", "exports", "src/TerrainSystem/GeomipGrid"], function (require, exports, GeomipGrid_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.BaseTerrain = void 0;
    GeomipGrid_mjs_1 = __importDefault(GeomipGrid_mjs_1);
    class BaseTerrain extends GeomipGrid_mjs_1.default {
        get maxHeight() { return this.heightMap.maxHeight; }
    }
    exports.BaseTerrain = BaseTerrain;
    exports.default = BaseTerrain;
});
define("src/TerrainSystem/IPatch", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/TerrainSystem/IPatchesInstancing", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/TerrainHelpers/ITerrainPatchesInstancing", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/TerrainHelpers/TerrainPatchesBasic", ["require", "exports", "src/TerrainSystem/LodManager"], function (require, exports, LodManager_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TerrainPatchBufferBasic = void 0;
    class TerrainPatchBufferBasic {
        constructor(index, x, z, minX, minZ, size) {
            this.index = index;
            this.x = x;
            this.z = z;
            this.minX = minX;
            this.minZ = minZ;
            this.size = size;
            this.visible = false;
            this.hash = 0;
            this.lod = LodManager_mjs_3.defaultPatchLod;
            this.indicesBaseIndex = 0;
            this.indicesBaseVertex = 0;
            this.indicesCount = 0;
            this.dependencesUpdated = false;
            this.heightsUpdated = false;
            this.heightsUpdatedThisFrame = false;
            this.lastChangeTime = 0;
            this.lastChangeAttachTime = 0;
            this.lastChangeHeightsTime = 0;
        }
    }
    exports.TerrainPatchBufferBasic = TerrainPatchBufferBasic;
    class TerrainPatchesBasic {
        get instancing() { return this._instancing; }
        get bufferArray() { return this._bufferArray; }
        get meshInstanceArray() { return this._meshInstanceArray; }
        get aabb() { return this._aabb; }
        get customMeshInstance() { return this._customMeshInstance; }
        constructor(terrain, instancer) {
            this.customForwardRenderer = false;
            this.terrain = terrain;
            this.customForwardRenderer = false;
            this._useMashesBag = false;
            this._bufferArray = new Array(this.terrain.numPatchesX * this.terrain.numPatchesZ);
            this._meshInstanceArray = new Array(this.terrain.numPatchesX * this.terrain.numPatchesZ);
            this._customMeshInstance = undefined;
            this._patchAvalableCount = 0;
            this._changesIds = [];
            this._aabb = new pc.BoundingBox();
            this._init = false;
            this._instancing = instancer;
            this.updateAabb();
        }
        setMaterial(material) {
            this._material = material;
        }
        setInstancing(value, updateMeshes = true) {
            if (this._instancing === value) {
                return;
            }
            this._destroyMeshes();
            this._instancing = value;
            if (updateMeshes) {
                this.updateMeshes();
            }
        }
        updateAabb() {
            const halfWidth = this.terrain.width / 2;
            const halfDepth = this.terrain.depth / 2;
            this._aabb.setMinMax(new pc.Vec3(-halfWidth, 0, -halfDepth), new pc.Vec3(+halfWidth, this.terrain.maxHeight, +halfDepth));
            if (this._customMeshInstance) {
                this._customMeshInstance.setCustomAabb(this._aabb);
                this._customMeshInstance.mesh.aabb = this._aabb;
            }
            for (const meshInstance of this._meshInstanceArray) {
                if (meshInstance) {
                    meshInstance.setCustomAabb(this._aabb);
                    meshInstance.mesh.aabb = this._aabb;
                }
            }
            if (this.instancing) {
                this.instancing.forEach(item => {
                    if (item.object) {
                        item.object.setCustomAabb(this._aabb);
                        item.object.mesh.aabb = this._aabb;
                    }
                });
            }
        }
        startUpdate() {
        }
        _forceUpdateRenderComponent(entity) {
            let append = false; // destroy prev meshInstances by default
            let meshInstances;
            if (this.customForwardRenderer &&
                this._customMeshInstance) {
                this._useMashesBag = true;
                meshInstances = [this._customMeshInstance];
            }
            else {
                const count = this.instancing
                    ? this.instancing.meshInstanceCount
                    : this._patchAvalableCount;
                meshInstances = new Array(count);
                if (this.instancing) {
                    this.instancing.appendMeshInstances(meshInstances);
                }
                else {
                    // if instancing was used, then we delete all previous instances
                    // or use custom renderer
                    append = !this._useMashesBag;
                    let i = 0;
                    for (let patchIndex = 0; patchIndex < this._meshInstanceArray.length; patchIndex++) {
                        const patchMeshInstance = this._meshInstanceArray[patchIndex];
                        if (patchMeshInstance) {
                            meshInstances[i++] = patchMeshInstance;
                        }
                    }
                    this._changesIds.length = 0;
                }
                this._useMashesBag = !!this.instancing;
            }
            if (entity.render) {
                // TODO: https://github.com/playcanvas/engine/issues/6680
                if (append) {
                    // @ts-ignore
                    entity.render._meshInstances = [];
                }
                entity.render.meshInstances = meshInstances;
            }
            else {
                entity.addComponent('render', {
                    meshInstances: meshInstances,
                    cull: false,
                });
            }
            // Update shadows
            for (const meshInstance of meshInstances) {
                meshInstance.cull = false;
                meshInstance.castShadow = false;
                meshInstance.receiveShadow = false;
            }
        }
        _updateRenderComponent(entity) {
            if (this.customForwardRenderer ||
                this.instancing ||
                this._changesIds.length === 0 ||
                !entity.enabled) {
                return;
            }
            this._forceUpdateRenderComponent(entity);
        }
        updateLods() {
            this.updateIndexBuffer();
            this.updateMeshes();
        }
        _forEach(zone, quad, numQuadX, numQuadZ, callback) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const minX = Math.max(zone.minX, 0);
            const minZ = Math.max(zone.minZ, 0);
            const maxX = Math.min(zone.maxX, this.terrain.width);
            const maxZ = Math.min(zone.maxZ, this.terrain.depth);
            const minPatchX = minX / quad | 0;
            const minPatchZ = minZ / quad | 0;
            const maxPatchX = maxX / quad | 0;
            const maxPatchZ = maxZ / quad | 0;
            const normalizeMinX = Math.max(minPatchX, 0);
            const normalizeMinZ = Math.max(minPatchZ, 0);
            const normalizeMaxX = Math.min(maxPatchX + 1, numQuadX);
            const normalizeMaxZ = Math.min(maxPatchZ + 1, numQuadZ);
            for (let z = normalizeMinZ; z < normalizeMaxZ; z++) {
                for (let x = normalizeMinX; x < normalizeMaxX; x++) {
                    const patchIndex = z * numQuadX + x;
                    if (callback(patchIndex, x, z) === false) {
                        return;
                    }
                }
            }
        }
        forEach(zone, callback) {
            this._forEach(zone, this.terrain.patchSize, this.terrain.numPatchesX, this.terrain.numPatchesZ, callback);
        }
        updateDependencies(zone) {
            const now = performance.now();
            this.forEach(zone, (patchIndex) => {
                const patchBuffer = this._bufferArray[patchIndex];
                patchBuffer.lastChangeTime = now;
                patchBuffer.lastChangeAttachTime = now;
            });
            this._lastChangeTime = now;
            this._lastChangeAttachTime = now;
        }
        updateHeights(zone) {
            const now = performance.now();
            this.forEach(zone, (patchIndex) => {
                const patchBuffer = this._bufferArray[patchIndex];
                patchBuffer.lastChangeTime = now;
                patchBuffer.lastChangeHeightsTime = now;
                patchBuffer.heightsUpdated = true;
            });
            this._lastChangeTime = now;
            this._lastChangeHeightsTime = now;
        }
        _addPatchBuffer(patchIndex, buffer) {
            if (this._bufferArray[patchIndex]) {
                throw new Error('Buffer has already been added');
            }
            this._bufferArray[patchIndex] = buffer;
        }
        _addPatchMeshInstance(patchIndex, meshInstance) {
            if (this._meshInstanceArray[patchIndex]) {
                throw new Error('Mesh instance has already been added');
            }
            this._meshInstanceArray[patchIndex] = meshInstance;
            this._changesIds.push(patchIndex);
            this._patchAvalableCount++;
        }
        endUpdate(hasUpdateHeights) {
            this._updateRenderComponent(this._entity);
        }
        getOrCreatePatchMesh(patchIndex) {
            let patch = this._meshInstanceArray[patchIndex];
            if (!patch) {
                patch = this._createPatchMesh(patchIndex, this._app, this._entity, this._material);
                this._addPatchMeshInstance(patchIndex, patch);
            }
            return patch;
        }
        destroyPatchMesh(patchIndex) {
            this._destroyPatchMesh(patchIndex);
            const patchMeshInstance = this._meshInstanceArray[patchIndex];
            if (patchMeshInstance) {
                this._patchAvalableCount--;
                this._changesIds.push(patchIndex);
                delete this._meshInstanceArray[patchIndex];
            }
        }
        destroyPatchesMesh() {
            for (let z = 0; z < this.terrain.numPatchesZ; z++) {
                for (let x = 0; x < this.terrain.numPatchesX; x++) {
                    const index = z * this.terrain.numPatchesX + x;
                    this.destroyPatchMesh(index);
                }
            }
        }
        updatePatchesMeshMaterial() {
            for (let z = 0; z < this.terrain.numPatchesZ; z++) {
                for (let x = 0; x < this.terrain.numPatchesX; x++) {
                    const index = z * this.terrain.numPatchesX + x;
                    const meshInstance = this._meshInstanceArray[index];
                    if (meshInstance) {
                        meshInstance.material = this._material;
                    }
                }
            }
        }
        _destroyMeshes() {
            var _a;
            if (this._customMeshInstance) {
                this._destroyCustomBagMesh(this._customMeshInstance);
                this._customMeshInstance = undefined;
            }
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.destroy((mesh) => {
                this._destroyInstancingMesh(mesh);
            });
            if (this.customForwardRenderer || this.instancing) {
                this.destroyPatchesMesh();
            }
        }
        updateMeshes() {
            if (!this._init) {
                return;
            }
            this._destroyMeshes();
            if (this.customForwardRenderer) {
                this._customMeshInstance = this._createCustomBagMesh(this._app, this._entity, this._material, this.terrain);
            }
            else if (this.instancing) {
                this.instancing.buildFromTerrain(this.terrain, (lodInfo, primitiveInfo, data) => {
                    return this._createInstancingMesh(this._app, this._entity, this._material, lodInfo, primitiveInfo, this.instancing, data);
                });
            }
            else {
                this.updatePatchesMeshMaterial();
            }
            this._forceUpdateRenderComponent(this._entity);
        }
        init(app, entity, material) {
            if (this._init) {
                throw new Error('The terrain patches was initialized earlier');
            }
            this._init = true;
            this._app = app;
            this._entity = entity;
            // for other language use internal class
            const initializer = {
                initPatch: (baseIndex, baseVertex, count, patchX, patchZ, minX, minZ, size, lodInfo) => {
                    const patchIndex = patchZ * this.terrain.numPatchesX + patchX;
                    const buffer = this._createPatchBuffer(patchIndex, baseIndex, baseVertex, count, patchX, patchZ, minX, minZ, size, lodInfo);
                    this._addPatchBuffer(patchIndex, buffer);
                }
            };
            this.setMaterial(material);
            this.terrain.initPatches(initializer);
            this.updateMeshes();
        }
    }
    exports.default = TerrainPatchesBasic;
});
define("src/TerrainSystem/PatchesCombineInstancing", ["require", "exports", "src/TerrainSystem/LodInfo", "src/TerrainSystem/LodManager"], function (require, exports, LodInfo_mjs_2, LodManager_mjs_4) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchCombineInstancing = exports.TComInstCoordsOffsetArrType = exports.combineGroupLen = exports.comInstDataSize = void 0;
    exports.comInstDataSize = 4;
    exports.combineGroupLen = 6;
    exports.TComInstCoordsOffsetArrType = Uint8Array;
    class PatchCombineInstancing {
        get patchCount() { return this._patchCount; }
        constructor() {
            this.data = [];
            this._patchCount = 0;
        }
        forEach(fn) {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < exports.combineGroupLen; i++) {
                    const segment = this.data[c].groups[i];
                    fn(segment);
                }
            }
        }
        destroySegmentObjects(index, destructor) {
            for (let i = 0; i < exports.combineGroupLen; i++) {
                const segment = this.data[index].groups[i];
                if (segment.object) {
                    destructor(segment.object);
                    segment.object = null;
                }
            }
        }
        destroy(destructor) {
            for (let i = 0; i < this.data.length; i++) {
                this.destroySegmentObjects(i, destructor);
            }
            this.data.length = 0;
        }
        buildFromTerrain(terrain, objectBuilder) {
            this._patchCount = terrain.numPatchesX * terrain.numPatchesZ;
            this.data = new Array(terrain.lodInfo.length);
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                this.data[lodCore] = this._buildInfo(lodCore, terrain.lodInfo[lodCore], this._patchCount, objectBuilder);
            }
        }
        _buildInfo(lodCore, lodInfo, patchCount, objectBuilder) {
            const groups = new Array(exports.combineGroupLen);
            const items = new Array(LodInfo_mjs_2.LEFT);
            for (let l = 0; l < LodInfo_mjs_2.LEFT; l++) {
                items[l] = new Array(LodInfo_mjs_2.RIGHT);
                for (let r = 0; r < LodInfo_mjs_2.RIGHT; r++) {
                    items[l][r] = new Array(LodInfo_mjs_2.TOP);
                    for (let t = 0; t < LodInfo_mjs_2.TOP; t++) {
                        items[l][r][t] = new Array(LodInfo_mjs_2.BOTTOM);
                        for (let b = 0; b < LodInfo_mjs_2.BOTTOM; b++) {
                            const id = (0, LodManager_mjs_4.getLodId)(lodCore, l, r, t, b);
                            let mainId;
                            let groupId;
                            let angle;
                            if (l === 0 && r === 0 && t === 0 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 0, 0, 0, 0);
                                groupId = 0;
                                angle = 0;
                            }
                            else if (l === 1 && r === 0 && t === 0 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 0, 0);
                                groupId = 1;
                                angle = 0;
                            }
                            else if (l === 0 && r === 0 && t === 1 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 0, 0);
                                groupId = 1;
                                angle = 90;
                            }
                            else if (l === 0 && r === 1 && t === 0 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 0, 0);
                                groupId = 1;
                                angle = 180;
                            }
                            else if (l === 0 && r === 0 && t === 0 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 0, 0);
                                groupId = 1;
                                angle = 270;
                            }
                            else if (l === 1 && r === 0 && t === 1 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 0);
                                groupId = 2;
                                angle = 0;
                            }
                            else if (l === 0 && r === 1 && t === 1 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 0);
                                groupId = 2;
                                angle = 90;
                            }
                            else if (l === 0 && r === 1 && t === 0 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 0);
                                groupId = 2;
                                angle = 180;
                            }
                            else if (l === 1 && r === 0 && t === 0 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 0);
                                groupId = 2;
                                angle = 270;
                            }
                            else if (l === 1 && r === 1 && t === 0 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 1, 0, 0);
                                groupId = 3;
                                angle = 0;
                            }
                            else if (l === 0 && r === 0 && t === 1 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 1, 0, 0);
                                groupId = 3;
                                angle = 90;
                            }
                            else if (l === 1 && r === 0 && t === 1 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 1);
                                groupId = 4;
                                angle = 0;
                            }
                            else if (l === 1 && r === 1 && t === 1 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 1);
                                groupId = 4;
                                angle = 90;
                            }
                            else if (l === 0 && r === 1 && t === 1 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 1);
                                groupId = 4;
                                angle = 180;
                            }
                            else if (l === 1 && r === 1 && t === 0 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 1);
                                groupId = 4;
                                angle = 270;
                            }
                            else if (l === 1 && r === 1 && t === 1 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 1, 1, 1);
                                groupId = 5;
                                angle = 0;
                            }
                            else {
                                throw new Error(`Can\'t combine ${l},${r},${t},${b}`);
                            }
                            items[l][r][t][b] = {
                                mainId,
                                groupId,
                                angle: angle / 90, // save for uint8
                            };
                            if (id === mainId) {
                                const info = lodInfo.info[l][r][t][b];
                                const lod = {
                                    core: lodCore,
                                    left: l,
                                    right: r,
                                    top: t,
                                    bottom: b
                                };
                                const data = new exports.TComInstCoordsOffsetArrType(patchCount * exports.comInstDataSize);
                                const object = objectBuilder ? objectBuilder(lod, info, data, patchCount) : null;
                                groups[groupId] = {
                                    vertexBaseIndex: info.start,
                                    vertexCount: info.count,
                                    count: 0,
                                    data: data,
                                    object: object,
                                    hasChanges: false,
                                };
                            }
                        }
                    }
                }
            }
            return {
                groups,
                items
            };
        }
        get(lod) {
            const data = this.data[lod.core];
            const groupId = data.items[lod.left][lod.right][lod.top][lod.bottom].groupId;
            return data.groups[groupId];
        }
        increment(lod, patch) {
            const data = this.data[lod.core];
            const item = data.items[lod.left][lod.right][lod.top][lod.bottom];
            const single = data.groups[item.groupId];
            const prevIndex = single.count;
            const index = prevIndex * exports.comInstDataSize;
            if (single.data[index + 0] !== patch.x ||
                single.data[index + 1] !== patch.z ||
                single.data[index + 2] !== item.angle) {
                single.data[index + 0] = patch.x;
                single.data[index + 1] = patch.z;
                single.data[index + 2] = item.angle;
                single.hasChanges = true;
            }
            single.count++;
            return single;
        }
        zeroAll() {
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                for (let i = 0; i < exports.combineGroupLen; i++) {
                    const single = this.data[lodCore].groups[i];
                    single.count = 0;
                }
            }
        }
    }
    exports.PatchCombineInstancing = PatchCombineInstancing;
});
define("src/TerrainHelpers/TerrainPatchesCombineInstancing", ["require", "exports", "src/TerrainSystem/PatchesCombineInstancing"], function (require, exports, PatchesCombineInstancing_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TerrainPathcesCombineInstancing = void 0;
    class TerrainPathcesCombineInstancing extends PatchesCombineInstancing_mjs_1.PatchCombineInstancing {
        constructor() {
            super(...arguments);
            this.bufferType = PatchesCombineInstancing_mjs_1.TComInstCoordsOffsetArrType;
            this.itemBufferSize = 4;
        }
        get meshInstanceCount() { return this.data.length * PatchesCombineInstancing_mjs_1.combineGroupLen; }
        appendMeshInstances(arr, offset = 0) {
            let meshIndex = 0;
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchesCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    if (chunk.object) {
                        arr[meshIndex++ + offset] = chunk.object;
                    }
                }
            }
            return meshIndex;
        }
        begin(castShadow = false, receiveShadow = false) {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchesCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    const chunkObject = chunk.object;
                    chunk.count = 0;
                    chunk.hasChanges = false;
                    if (chunkObject) {
                        chunkObject.visible = false;
                        chunkObject.visibleThisFrame = false;
                        chunkObject.castShadow = castShadow;
                        chunkObject.receiveShadow = receiveShadow;
                    }
                }
            }
        }
        end() {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchesCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    const chunkObject = chunk.object;
                    if (chunkObject && chunk.count > 0) {
                        chunkObject.instancingCount = chunk.count;
                        if (chunk.hasChanges && chunkObject.instancingData) {
                            // TODO: performance improvement
                            //chunkObject.instancingData.vertexBuffer?.unlock();
                            const length = chunk.count * PatchesCombineInstancing_mjs_1.comInstDataSize;
                            const vertexBuffer = chunkObject.instancingData.vertexBuffer;
                            this._updateBuffer(vertexBuffer, chunk.data, length);
                        }
                    }
                }
            }
        }
        _updateBuffer(vertexBuffer, data, length) {
            if (vertexBuffer) {
                const device = vertexBuffer.device;
                if (device.isWebGL2) {
                    const gl = device.gl;
                    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer.impl.bufferId);
                    gl.bufferSubData(gl.ARRAY_BUFFER, 0, data, 0, length);
                }
                else if (device.isWebGPU) {
                    const wgpu = device.wgpu;
                    const buffer = vertexBuffer.impl.buffer;
                    wgpu.queue.writeBuffer(buffer, 0, data, 0, length);
                }
                else {
                    console.error('Unsupported device');
                }
            }
        }
    }
    exports.TerrainPathcesCombineInstancing = TerrainPathcesCombineInstancing;
});
define("src/TerrainSystem/PatchesInstancing", ["require", "exports", "src/TerrainSystem/LodInfo"], function (require, exports, LodInfo_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchInstancing = exports.TInstCoordsOffsetArrType = exports.instDataSize = void 0;
    exports.instDataSize = 2;
    exports.TInstCoordsOffsetArrType = Uint16Array;
    class PatchInstancing {
        get patchCount() { return this._patchCount; }
        constructor() {
            this.data = [];
            this._patchCount = 0;
        }
        forEach(fn) {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                                const segment = this.data[c][l][r][t][b];
                                fn(segment);
                            }
                        }
                    }
                }
            }
        }
        destroySegmentObjects(index, destructor) {
            for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                    for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                        for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                            const segment = this.data[index][l][r][t][b];
                            if (segment.object) {
                                destructor(segment.object);
                                segment.object = null;
                            }
                        }
                    }
                }
            }
        }
        destroy(destructor) {
            for (let i = 0; i < this.data.length; i++) {
                this.destroySegmentObjects(i, destructor);
            }
            this.data.length = 0;
        }
        buildFromTerrain(terrain, objectBuilder) {
            this._patchCount = terrain.numPatchesX * terrain.numPatchesZ;
            this.data = new Array(terrain.lodInfo.length);
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                this.data[lodCore] = this._buildInfo(lodCore, terrain.lodInfo[lodCore], this._patchCount, objectBuilder);
            }
        }
        _buildInfo(lodCore, lodInfo, patchCount, objectBuilder) {
            const arr = new Array(LodInfo_mjs_3.LEFT);
            for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                arr[l] = new Array(LodInfo_mjs_3.RIGHT);
                for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                    arr[l][r] = new Array(LodInfo_mjs_3.TOP);
                    for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                        arr[l][r][t] = new Array(LodInfo_mjs_3.BOTTOM);
                        for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                            const info = lodInfo.info[l][r][t][b];
                            const lod = {
                                core: lodCore,
                                left: l,
                                right: r,
                                top: t,
                                bottom: b
                            };
                            const data = new exports.TInstCoordsOffsetArrType(patchCount * exports.instDataSize);
                            const object = objectBuilder ? objectBuilder(lod, info, data, patchCount) : null;
                            arr[l][r][t][b] = {
                                vertexBaseIndex: info.start,
                                vertexCount: info.count,
                                count: 0,
                                data: data,
                                object: object,
                                hasChanges: false,
                            };
                        }
                    }
                }
            }
            return arr;
        }
        get(lod) {
            return this.data[lod.core][lod.left][lod.right][lod.top][lod.bottom];
        }
        increment(lod, patch) {
            const single = this.get(lod);
            const prevIndex = single.count;
            const index = prevIndex * exports.instDataSize;
            if (single.data[index + 0] !== patch.minX ||
                single.data[index + 1] !== patch.minZ) {
                single.data[index + 0] = patch.minX;
                single.data[index + 1] = patch.minZ;
                single.hasChanges = true;
            }
            single.count++;
            return single;
        }
        zeroAll() {
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                                const single = this.data[lodCore][l][r][t][b];
                                single.count = 0;
                            }
                        }
                    }
                }
            }
        }
    }
    exports.PatchInstancing = PatchInstancing;
});
define("src/TerrainHelpers/TerrainPatchesInstancing", ["require", "exports", "src/TerrainSystem/LodInfo", "src/TerrainSystem/PatchesInstancing"], function (require, exports, LodInfo_mjs_4, PatchesInstancing_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TerrainPathcesInstancing = void 0;
    class TerrainPathcesInstancing extends PatchesInstancing_mjs_1.PatchInstancing {
        constructor() {
            super(...arguments);
            this.bufferType = PatchesInstancing_mjs_1.TInstCoordsOffsetArrType;
            this.itemBufferSize = 2;
        }
        get meshInstanceCount() { return this.data.length * LodInfo_mjs_4.LEFT * LodInfo_mjs_4.RIGHT * LodInfo_mjs_4.TOP * LodInfo_mjs_4.BOTTOM; }
        appendMeshInstances(arr, offset = 0) {
            let i = 0;
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                if (chunk.object) {
                                    arr[i++ + offset] = chunk.object;
                                }
                            }
                        }
                    }
                }
            }
            return i;
        }
        begin(castShadow = false, receiveShadow = false) {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                const chunkObject = chunk.object;
                                chunk.count = 0;
                                chunk.hasChanges = false;
                                if (chunkObject) {
                                    chunkObject.visible = false;
                                    chunkObject.visibleThisFrame = false;
                                    chunkObject.castShadow = castShadow;
                                    chunkObject.receiveShadow = receiveShadow;
                                }
                            }
                        }
                    }
                }
            }
        }
        end() {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                const chunkObject = chunk.object;
                                if (chunkObject && chunk.count > 0) {
                                    chunkObject.instancingCount = chunk.count;
                                    if (chunk.hasChanges && chunkObject.instancingData) {
                                        // TODO: performance improvement
                                        //chunkObject.instancingData.vertexBuffer?.unlock();
                                        const length = chunk.count * PatchesInstancing_mjs_1.instDataSize;
                                        const vertexBuffer = chunkObject.instancingData.vertexBuffer;
                                        this._updateBuffer(vertexBuffer, chunk.data, length);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        _updateBuffer(vertexBuffer, data, length) {
            if (vertexBuffer) {
                const device = vertexBuffer.device;
                if (device.isWebGL2) {
                    const gl = device.gl;
                    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer.impl.bufferId);
                    gl.bufferSubData(gl.ARRAY_BUFFER, 0, data, 0, length);
                }
                else if (device.isWebGPU) {
                    const wgpu = device.wgpu;
                    const buffer = vertexBuffer.impl.buffer;
                    wgpu.queue.writeBuffer(buffer, 0, data, 0, length);
                }
                else {
                    console.error('Unsupported device');
                }
            }
        }
    }
    exports.TerrainPathcesInstancing = TerrainPathcesInstancing;
});
define("src/TerrainHelpers/TerrainPatches", ["require", "exports", "src/TerrainSystem/CoordsBuffer", "src/TerrainHelpers/TerrainPatchesBasic", "src/TerrainHelpers/TerrainPatchesShaderChunks", "src/TerrainSystem/CompressedPatchedHeightMap", "src/Shared/Utils", "src/TerrainHelpers/TerrainPatchesCombineInstancing", "src/TerrainHelpers/TerrainPatchesInstancing"], function (require, exports, CoordsBuffer_mjs_2, TerrainPatchesBasic_mjs_1, TerrainPatchesShaderChunks_mjs_2, CompressedPatchedHeightMap_mjs_1, Utils_mjs_3, TerrainPatchesCombineInstancing_mjs_1, TerrainPatchesInstancing_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getHeightMapFormat = getHeightMapFormat;
    exports.getHeightMapChunkBufferType = getHeightMapChunkBufferType;
    TerrainPatchesBasic_mjs_1 = __importStar(TerrainPatchesBasic_mjs_1);
    CompressedPatchedHeightMap_mjs_1 = __importDefault(CompressedPatchedHeightMap_mjs_1);
    function getHeightMapFormat(graphicsDevice, heightMap) {
        let hmFormat = (0, Utils_mjs_3.checkSupportR32FTexture)(graphicsDevice) ? 'r32f' : 'rgba';
        if (heightMap instanceof CompressedPatchedHeightMap_mjs_1.default) {
            hmFormat = heightMap.compressAlgoritm === 'x4' ? 'rgbaX4' : 'rgbaX2';
        }
        return hmFormat;
    }
    function getHeightMapChunkBufferType(graphicsDevice, format) {
        if (format === pc.PIXELFORMAT_R32F) {
            return Float32Array;
        }
        if (format === pc.PIXELFORMAT_RG16U) {
            return Uint16Array;
        }
        if (format === pc.PIXELFORMAT_RGBA8U) {
            return Uint8Array;
        }
        throw new Error('Unsupported format');
    }
    class TerrainPatches extends TerrainPatchesBasic_mjs_1.default {
        get heightMapTexture() { return this._heightMap; }
        _updatePatchHeightsOnGPU(dataChunkX, dataChunkZ) {
            // TODO: a batch update may be required.
            // TODO: transform in heightmap class
            const dataChunkSize = this.terrain.heightMap.dataChunkSize;
            const level = this.terrain.heightMap.getChunkIndex(dataChunkX, dataChunkZ);
            const buffer = this.terrain.heightMap.getChunkBuffer(this._heightMapLevelsType, dataChunkX, dataChunkZ);
            if (this._app.graphicsDevice.isWebGL2) {
                const gl = this._app.graphicsDevice.gl;
                const textureFormat = this._heightMap.impl._glFormat;
                const texturePixelT = this._heightMap.impl._glPixelType;
                const textureTarget = this._heightMap.impl._glTarget;
                const textureObject = this._heightMap.impl._glTexture;
                gl.bindTexture(textureTarget, textureObject);
                gl.texSubImage3D(gl.TEXTURE_2D_ARRAY, 0, 0, 0, level, dataChunkSize, dataChunkSize, 1, textureFormat, texturePixelT, buffer);
            }
            else if (this._app.graphicsDevice.isWebGPU) {
                const webgpu = this._app.graphicsDevice.wgpu;
                const texture = (this._heightMap.impl.gpuTexture);
                webgpu.queue.writeTexture({
                    texture: texture,
                    origin: [0, 0, level],
                    mipLevel: 0
                }, buffer, {
                    offset: 0,
                    bytesPerRow: dataChunkSize * 4, // always 4 for rgba format
                    rowsPerImage: dataChunkSize
                }, {
                    width: dataChunkSize,
                    height: dataChunkSize
                });
            }
        }
        _updateHeightMap(zone) {
            this._forEach(zone, this.terrain.heightMap.dataChunkSize, this.terrain.heightMap.dataNumChunksX, this.terrain.heightMap.dataNumChunksZ, (patchIndex, x, z) => {
                this._updatePatchHeightsOnGPU(x, z);
            });
        }
        _createPatchBuffer(patchIndex, baseIndex, baseVertex, count, patchX, patchZ, minX, minZ, size, lod) {
            const patchBuf = new TerrainPatchesBasic_mjs_1.TerrainPatchBufferBasic(patchIndex, patchX, patchZ, minX, minZ, size);
            patchBuf.lod = lod;
            patchBuf.indicesBaseIndex = baseIndex;
            patchBuf.indicesBaseVertex = baseVertex;
            patchBuf.indicesCount = count;
            patchBuf.dependencesUpdated = false;
            patchBuf.heightsUpdated = false;
            return patchBuf;
        }
        _buildVertexFormat(graphicsDevice, vertexBuffer) {
            const coordsFormat = (vertexBuffer.patchVertexBufferTyped instanceof Uint8Array) ? pc.TYPE_UINT8 : pc.TYPE_UINT16;
            const vertexDesc = [{
                    semantic: pc.SEMANTIC_POSITION,
                    components: CoordsBuffer_mjs_2.coordsVertexSize,
                    type: coordsFormat,
                    normalize: false,
                    asInt: true
                }];
            return new pc.VertexFormat(graphicsDevice, vertexDesc, vertexBuffer.patchVertexBufferLength);
        }
        _buildInstancingVertexFormat(graphicsDevice, instancer) {
            const type = instancer.bufferType === Uint16Array ? pc.TYPE_UINT16 :
                instancer.bufferType === Uint8Array ? pc.TYPE_UINT8 :
                    pc.TYPE_FLOAT32;
            return new pc.VertexFormat(graphicsDevice, [{
                    semantic: pc.SEMANTIC_ATTR10,
                    components: instancer.itemBufferSize,
                    type: type,
                    normalize: false,
                    asInt: true
                }]);
        }
        _buildInstancingVertexBuffer(graphicsDevice, instancer, data) {
            return new pc.VertexBuffer(graphicsDevice, this._buildInstancingVertexFormat(graphicsDevice, instancer), data.length / instancer.itemBufferSize, {
                usage: pc.BUFFER_GPUDYNAMIC,
                data: data,
                storage: false,
            });
        }
        _setCustomPrimitiveChunks(terrain, mesh) {
            const patches = new Array(terrain.numPatchesX * terrain.numPatchesZ);
            for (let patchZ = 0; patchZ < terrain.numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < terrain.numPatchesX; patchX++) {
                    const patchIndex = patchZ * terrain.numPatchesX + patchX;
                    const patchBuf = this.bufferArray[patchIndex];
                    patches[patchIndex] = {
                        type: pc.PRIMITIVE_TRIANGLES,
                        enabled: false,
                        base: 0,
                        count: 0,
                        indexed: true,
                        attributes: {
                            [TerrainPatchesShaderChunks_mjs_2.patchCoordOffsetParamName]: [patchBuf.minX, patchBuf.minZ],
                            [TerrainPatchesShaderChunks_mjs_2.patchLodCoreParamName]: patchBuf.lod.core,
                        }
                    };
                }
            }
            mesh.primitiveChunks = [patches];
        }
        _createCustomBagMesh(app, entity, material, terrain) {
            const patchMesh = new pc.Mesh(app.graphicsDevice);
            const primitive = patchMesh.primitive[0];
            patchMesh.aabb = this.aabb;
            patchMesh.indexBuffer[0] = this._sharedIndexBuffer;
            patchMesh.vertexBuffer = this._sharedVertexBuffer;
            this._setCustomPrimitiveChunks(terrain, patchMesh);
            primitive.type = pc.PRIMITIVE_TRIANGLES;
            primitive.base = 0;
            primitive.count = 0;
            primitive.indexed = true;
            const patchMeshInstance = new pc.MeshInstance(patchMesh, material, entity);
            patchMeshInstance.cull = false;
            patchMeshInstance.visible = false;
            patchMeshInstance.visibleThisFrame = false;
            patchMeshInstance.castShadow = false;
            patchMeshInstance.receiveShadow = false;
            patchMeshInstance.setParameter(TerrainPatchesShaderChunks_mjs_2.patchLodCoreParamName, 0, 0xffffffff);
            patchMeshInstance.setParameter(TerrainPatchesShaderChunks_mjs_2.patchCoordOffsetParamName, [0, 0], 0xffffffff);
            patchMeshInstance.setInstancing(null);
            patchMeshInstance.setCustomAabb(this.aabb);
            return patchMeshInstance;
        }
        _createInstancingMesh(app, entity, material, lodInfo, primitiveInfo, instancer, data) {
            const patchMesh = new pc.Mesh(app.graphicsDevice);
            const primitive = patchMesh.primitive[0];
            const instancingBuf = this._buildInstancingVertexBuffer(app.graphicsDevice, instancer, data);
            patchMesh.aabb = this.aabb;
            patchMesh.indexBuffer[0] = this._sharedIndexBuffer;
            patchMesh.vertexBuffer = this._sharedVertexBuffer;
            primitive.type = pc.PRIMITIVE_TRIANGLES;
            primitive.base = primitiveInfo.start;
            primitive.count = primitiveInfo.count;
            primitive.indexed = true;
            const patchMeshInstance = new pc.MeshInstance(patchMesh, material, entity);
            patchMeshInstance.cull = false;
            patchMeshInstance.visible = false;
            patchMeshInstance.visibleThisFrame = false;
            patchMeshInstance.castShadow = false;
            patchMeshInstance.receiveShadow = false;
            patchMeshInstance.setParameter(TerrainPatchesShaderChunks_mjs_2.patchLodCoreParamName, lodInfo.core, 0xffffffff);
            patchMeshInstance.setInstancing(instancingBuf, false);
            patchMeshInstance.setCustomAabb(this.aabb);
            return patchMeshInstance;
        }
        _createPatchMesh(patchIndex, app, entity, material) {
            const patchBuf = this.bufferArray[patchIndex];
            const patchMesh = new pc.Mesh(app.graphicsDevice);
            const primitive = patchMesh.primitive[0];
            patchMesh.aabb = this.aabb;
            patchMesh.indexBuffer[0] = this._sharedIndexBuffer;
            patchMesh.vertexBuffer = this._sharedVertexBuffer;
            primitive.type = pc.PRIMITIVE_TRIANGLES;
            primitive.base = 0;
            primitive.count = 0;
            primitive.indexed = true;
            const patchMeshInstance = new pc.MeshInstance(patchMesh, material, entity);
            patchMeshInstance.cull = false;
            patchMeshInstance.visible = false;
            patchMeshInstance.visibleThisFrame = false;
            patchMeshInstance.castShadow = false;
            patchMeshInstance.receiveShadow = false;
            patchMeshInstance.setParameter(TerrainPatchesShaderChunks_mjs_2.patchCoordOffsetParamName, [patchBuf.minX, patchBuf.minZ], 0xffffffff);
            patchMeshInstance.setInstancing(null);
            patchMeshInstance.setCustomAabb(this.aabb);
            return patchMeshInstance;
        }
        _destroyMesh(meshInstance) {
            var _a;
            // TODO: dont destroy shared index and vertex buffers
            if (meshInstance.mesh) {
                meshInstance.mesh.indexBuffer = [null];
                meshInstance.mesh.vertexBuffer = null;
            }
            meshInstance.destroy();
            if (meshInstance.mesh) {
                meshInstance.mesh.destroy();
            }
            if (meshInstance.instancingData) {
                // @ts-ignore
                if (meshInstance.instancingData.destroy) { // @ts-ignore
                    meshInstance.instancingData.destroy();
                }
                (_a = meshInstance.instancingData.vertexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            }
        }
        _destroyInstancingMesh(mesh) {
            this._destroyMesh(mesh);
        }
        _destroyPatchMesh(patchIndex) {
            const patchMeshInstance = this.meshInstanceArray[patchIndex];
            if (patchMeshInstance) {
                this._destroyMesh(patchMeshInstance);
            }
        }
        _destroyCustomBagMesh(mesh) {
            this._destroyMesh(mesh);
        }
        _updateIndexBuffer(graphicsDevice) {
            var _a;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            this._sharedIndexBuffer = new pc.IndexBuffer(graphicsDevice, pc.INDEXFORMAT_UINT32, this.terrain.patchIndices.length, pc.BUFFER_STATIC, this.terrain.patchIndices, { storage: false });
        }
        _updateVertexBuffer(graphicsDevice) {
            var _a;
            const format = this._buildVertexFormat(graphicsDevice, this.terrain.patchVertices);
            (_a = this._sharedVertexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            this._sharedVertexBuffer = new pc.VertexBuffer(graphicsDevice, format, format.vertexCount, {
                usage: pc.BUFFER_STATIC,
                storage: false,
                data: this.terrain.patchVertices.patchVertexBufferData,
            });
        }
        _initHeightMapTexture(app) {
            var _a;
            (_a = this._heightMap) === null || _a === void 0 ? void 0 : _a.destroy();
            const heightFormat = getHeightMapFormat(app.graphicsDevice, this.terrain.heightMap);
            const format = (0, TerrainPatchesShaderChunks_mjs_2.getTextureType)(heightFormat);
            const bufFormat = getHeightMapChunkBufferType(app.graphicsDevice, format);
            const dataChunkSize = this.terrain.heightMap.dataChunkSize;
            const chunks = this.terrain.heightMap.getChunksBuffers(bufFormat);
            this._heightMapLevelsType = bufFormat;
            this._heightMap = new pc.Texture(app.graphicsDevice, {
                width: dataChunkSize,
                height: dataChunkSize,
                format: format,
                mipmaps: false,
                minFilter: pc.FILTER_NEAREST,
                magFilter: pc.FILTER_NEAREST,
                addressU: pc.ADDRESS_CLAMP_TO_EDGE,
                addressV: pc.ADDRESS_CLAMP_TO_EDGE,
                addressW: pc.ADDRESS_CLAMP_TO_EDGE,
                flipY: app.graphicsDevice.isWebGPU,
                arrayLength: chunks.length,
                levels: [chunks]
            });
        }
        updateIndexBuffer() {
            this._updateIndexBuffer(this._app.graphicsDevice);
            if (this.customForwardRenderer || this.instancing) {
                this.updateMeshes();
            }
            else {
                for (const item of this.meshInstanceArray) {
                    if (item) {
                        item.mesh.indexBuffer[0] = this._sharedIndexBuffer;
                    }
                }
            }
        }
        static createMaterial() {
            const material = new pc.StandardMaterial();
            material.name = 'TerrainMaterial';
            material.setAttribute(TerrainPatchesShaderChunks_mjs_2.patchInstCoordOffsetParamName, pc.SEMANTIC_ATTR10);
            material.setAttribute(TerrainPatchesShaderChunks_mjs_2.vertexCoordAttrName, pc.SEMANTIC_POSITION);
            return material;
        }
        _bindDependenciesToMaterial(material) {
            material.setAttribute(TerrainPatchesShaderChunks_mjs_2.patchInstCoordOffsetParamName, pc.SEMANTIC_ATTR10);
            material.setAttribute(TerrainPatchesShaderChunks_mjs_2.vertexCoordAttrName, pc.SEMANTIC_POSITION);
            material.setParameter(TerrainPatchesShaderChunks_mjs_2.patchLodCoreParamName, 0);
            material.setParameter(TerrainPatchesShaderChunks_mjs_2.patchCoordOffsetParamName, [0, 0]);
            material.setParameter(TerrainPatchesShaderChunks_mjs_2.terrainHeightMapParamName, this._heightMap);
            const format = getHeightMapFormat(this._app.graphicsDevice, this.terrain.heightMap);
            const instancing = this.instancing instanceof TerrainPatchesCombineInstancing_mjs_1.TerrainPathcesCombineInstancing ? 'combine' :
                this.instancing instanceof TerrainPatchesInstancing_mjs_1.TerrainPathcesInstancing ? 'simple' :
                    false;
            const chunksStore = (0, TerrainPatchesShaderChunks_mjs_2.getTerrainShaderChunks)({
                width: this.terrain.width,
                depth: this.terrain.depth,
                patchSize: this.terrain.patchSize,
                heightMapChunkSize: this.terrain.heightMap.dataChunkSize,
                instancing: instancing,
                heightMapFormat: format,
                engineVersion: `v${pc.version[0]}`,
            });
            const chunkNames = Object.keys(chunksStore);
            for (let chunkName of chunkNames) {
                // @ts-ignore
                material.chunks[chunkName] = chunksStore[chunkName];
            }
            // @ts-ignore
            material.chunks.APIVersion = pc.CHUNKAPI_1_70;
            material.update();
        }
        setInstancing(value, updateMeshes = true) {
            if (value === this.instancing) {
                return;
            }
            super.setInstancing(value, false);
            if (this._material) {
                this._bindDependenciesToMaterial(this._material);
                if (updateMeshes) {
                    this.updateMeshes();
                }
            }
        }
        setMaterial(material) {
            this._bindDependenciesToMaterial(material);
            super.setMaterial(material);
        }
        updateHeights(zone) {
            super.updateHeights(zone);
            this._updateHeightMap(zone);
        }
        init(app, entity, material) {
            this._initHeightMapTexture(app);
            this._updateIndexBuffer(app.graphicsDevice);
            this._updateVertexBuffer(app.graphicsDevice);
            super.init(app, entity, material);
        }
    }
    exports.default = TerrainPatches;
});
define("src/TerrainSystem/MidpointDispTerrain", ["require", "exports", "src/Shared/Utils", "src/TerrainSystem/Terrain"], function (require, exports, Utils_mjs_4, Terrain_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.MidpointDispTerrain = void 0;
    Terrain_mjs_1 = __importDefault(Terrain_mjs_1);
    class MidpointDispTerrain extends Terrain_mjs_1.default {
        createMidpointDisplacement(roughness) {
            if (roughness < 0.0) {
                throw Error("roughness must be positive");
            }
            this._createMidpointDisplacementF32(roughness);
            this.normalizeHeightMap();
        }
        _createMidpointDisplacementF32(roughness) {
            let rectSize = (0, Utils_mjs_4.calcNextPowerOfTwo)(this.width);
            let curHeight = rectSize / 2.0;
            const heightReduce = Math.pow(2.0, -roughness);
            while (rectSize > 0) {
                this._diamondStep(rectSize, curHeight);
                this._squareStep(rectSize, curHeight);
                rectSize = (rectSize / 2) | 0;
                curHeight *= heightReduce;
            }
        }
        _diamondStep(rectSize, curHeight) {
            const HalfRectSize = Math.floor(rectSize / 2);
            for (let y = 0; y < this.depth; y += rectSize) {
                for (let x = 0; x < this.width; x += rectSize) {
                    let nextX = (x + rectSize) % this.width;
                    let nextY = (y + rectSize) % this.depth;
                    if (nextX < x) {
                        nextX = this.width - 1;
                    }
                    if (nextY < y) {
                        nextY = this.depth - 1;
                    }
                    const topLeft = this.heightMap.get(x, y);
                    const topRight = this.heightMap.get(nextX, y);
                    const bottomLeft = this.heightMap.get(x, nextY);
                    const bottomRight = this.heightMap.get(nextX, nextY);
                    const midX = (x + HalfRectSize) % this.width;
                    const midY = (y + HalfRectSize) % this.depth;
                    const randValue = (0, Utils_mjs_4.randomFloatRange)(curHeight, -curHeight);
                    const midPoint = (topLeft + topRight + bottomLeft + bottomRight) / 4.0;
                    this.setHeight(midX, midY, midPoint + randValue);
                }
            }
        }
        _squareStep(rectSize, curHeight) {
            const halfRectSize = (rectSize / 2) | 0;
            for (let y = 0; y < this.depth; y += rectSize) {
                for (let x = 0; x < this.width; x += rectSize) {
                    let nextX = (x + rectSize) % this.width;
                    let nextY = (y + rectSize) % this.depth;
                    if (nextX < x) {
                        nextX = this.width - 1;
                    }
                    if (nextY < y) {
                        nextY = this.depth - 1;
                    }
                    const midX = (x + halfRectSize) % this.width;
                    const midY = (y + halfRectSize) % this.depth;
                    const prevMidX = (x - halfRectSize + this.width) % this.width;
                    const prevMidY = (y - halfRectSize + this.depth) % this.depth;
                    const curTopLeft = this.heightMap.get(x, y);
                    const curTopRight = this.heightMap.get(nextX, y);
                    const curCenter = this.heightMap.get(midX, midY);
                    const prevYCenter = this.heightMap.get(midX, prevMidY);
                    const curBotLeft = this.heightMap.get(x, nextY);
                    const prevXCenter = this.heightMap.get(prevMidX, midY);
                    const curLeftMid = (curTopLeft + curCenter + curBotLeft + prevXCenter) / 4.0 + (0, Utils_mjs_4.randomFloatRange)(-curHeight, curHeight);
                    const curTopMid = (curTopLeft + curCenter + curTopRight + prevYCenter) / 4.0 + (0, Utils_mjs_4.randomFloatRange)(-curHeight, curHeight);
                    this.setHeight(midX, y, curTopMid);
                    this.setHeight(x, midY, curLeftMid);
                }
            }
        }
    }
    exports.MidpointDispTerrain = MidpointDispTerrain;
});
define("src/TerrainSystem/TerrainRaycastResult", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TerrainRaycastResult = void 0;
    class TerrainRaycastResult {
        constructor() {
            this.vertexIndex = 0;
            this.distance = Number.MAX_VALUE;
            this.localNormal = new pc.Vec3(0, 1, 0);
            this.normal = new pc.Vec3(0, 1, 0);
            this.localPoint = new pc.Vec3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            this.point = new pc.Vec3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
        }
        clear() {
            this.vertexIndex = 0;
            this.distance = Number.MAX_VALUE;
            this.localNormal.set(0, 1, 0);
            this.normal.set(0, 1, 0);
            this.localPoint.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            this.point.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
        }
    }
    exports.TerrainRaycastResult = TerrainRaycastResult;
    exports.default = TerrainRaycastResult;
});
define("src/TerrainHelpers/TerrainRenderPreparer", ["require", "exports", "src/TerrainHelpers/TerrainPatchesShaderChunks"], function (require, exports, TerrainPatchesShaderChunks_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class TerrainRenderPreparer {
        get wireframe() { return this._wireframe; }
        set wireframe(v) {
            this._wireframe = v;
            this._updateMeshes();
        }
        get castShadow() { return this._castShadow; }
        set castShadow(v) {
            this._castShadow = v;
            this._updateMeshes();
        }
        get receiveShadow() { return this._receiveShadow; }
        set receiveShadow(v) {
            this._receiveShadow = v;
            this._updateMeshes();
        }
        constructor(patchesStore, options) {
            var _a, _b, _c;
            this.patchesStore = patchesStore;
            this._wireframe = (_a = options.wireframe) !== null && _a !== void 0 ? _a : false;
            this._castShadow = (_b = options.castShadow) !== null && _b !== void 0 ? _b : false;
            this._receiveShadow = (_c = options.receiveShadow) !== null && _c !== void 0 ? _c : false;
            this._hasUpdatedHeights = false;
        }
        _updateMeshes() {
            var _a;
            const customMeshInstance = this.patchesStore.customMeshInstance;
            if (customMeshInstance) {
                this._updateMesh(customMeshInstance);
            }
            for (const meshInstance of this.patchesStore.meshInstanceArray) {
                this._updateMesh(meshInstance);
            }
            (_a = this.patchesStore.instancing) === null || _a === void 0 ? void 0 : _a.forEach(item => {
                this._updateMesh(item.object);
            });
        }
        _updateMesh(meshInstance) {
            if (meshInstance) {
                meshInstance.mesh.primitive[0].type = this._wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                meshInstance.castShadow = this._castShadow;
                meshInstance.receiveShadow = this._receiveShadow;
            }
        }
        preparePatch(visible, baseIndex, baseVertex, count, patchX, patchZ, minX, minZ, size, lodInfo) {
            const terrain = this.patchesStore.terrain;
            const patchIndex = patchZ * terrain.numPatchesX + patchX;
            const buffer = this.patchesStore.bufferArray[patchIndex];
            const currHash = baseIndex / count;
            buffer.hash = currHash;
            buffer.visible = visible;
            buffer.indicesBaseIndex = baseIndex;
            buffer.indicesBaseVertex = baseVertex;
            buffer.indicesCount = count;
            buffer.lod = lodInfo;
            if (buffer.heightsUpdated) {
                buffer.heightsUpdated = false;
                buffer.heightsUpdatedThisFrame = visible;
                this._hasUpdatedHeights = true;
            }
            if (this.patchesStore.customForwardRenderer) {
                const primitive = this.patchesStore.customMeshInstance.mesh.primitiveChunks[0][patchIndex];
                primitive.enabled = visible;
                primitive.base = baseIndex;
                primitive.count = count;
                primitive.type = this._wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                primitive.attributes[TerrainPatchesShaderChunks_mjs_3.patchLodCoreParamName] = lodInfo.core;
            }
            else if (this.patchesStore.instancing) {
                if (visible) {
                    const inst = this.patchesStore.instancing.increment(lodInfo, buffer);
                    if (inst.count === 1 && inst.object) {
                        const meshInstance = inst.object;
                        const primitive = meshInstance.mesh.primitive[0];
                        meshInstance.visible = true;
                        meshInstance.visibleThisFrame = true;
                        meshInstance.castShadow = this._castShadow;
                        meshInstance.receiveShadow = this._receiveShadow;
                        primitive.type = this._wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                    }
                }
            }
            else {
                const meshInstance = this.patchesStore.getOrCreatePatchMesh(patchIndex);
                const mesh = meshInstance.mesh;
                const primitive = mesh.primitive[0];
                if (meshInstance) {
                    meshInstance.visible = visible;
                    meshInstance.visibleThisFrame = visible;
                    meshInstance.castShadow = this._castShadow;
                    meshInstance.receiveShadow = this._receiveShadow;
                }
                primitive.base = baseIndex;
                primitive.count = count;
                primitive.type = this._wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                meshInstance.setParameter(TerrainPatchesShaderChunks_mjs_3.patchLodCoreParamName, lodInfo.core);
            }
        }
        update(frustum) {
            // TODO: In theory we can control the quality of the model for shadows
            // TODO: Add support for Occlusion culling
            var _a, _b;
            this._hasUpdatedHeights = false;
            if (this.patchesStore.customForwardRenderer) {
                const customMeshInstance = this.patchesStore.customMeshInstance;
                if (customMeshInstance) {
                    customMeshInstance.visible = true;
                    customMeshInstance.castShadow = this._castShadow;
                    customMeshInstance.receiveShadow = this._receiveShadow;
                    const mesh = customMeshInstance.mesh;
                    const primitive = mesh.primitive[0];
                    primitive.type = this._wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                }
            }
            (_a = this.patchesStore.instancing) === null || _a === void 0 ? void 0 : _a.begin(false, false);
            this.patchesStore.startUpdate();
            this.patchesStore.terrain.eachPatches(this, frustum);
            this.patchesStore.endUpdate(this._hasUpdatedHeights);
            (_b = this.patchesStore.instancing) === null || _b === void 0 ? void 0 : _b.end();
        }
    }
    exports.default = TerrainRenderPreparer;
});
define("src/TerrainHelpers/Brush", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/TerrainHelpers/ColorPainterShaders", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.fragmentInvertShader = exports.fragmentShader = exports.factorMethod = exports.vertexShader = void 0;
    exports.vertexShader = `
    attribute vec3 aPosition;
    attribute vec2 aUv0;

    uniform mat4 matrix_model;
    uniform mat4 matrix_viewProjection;

    varying vec2 vUv0;

    void main(void)
    {
        vUv0 = aUv0;
        gl_Position = matrix_viewProjection * matrix_model * vec4(aPosition, 1.0);
    }
`;
    exports.factorMethod = `
    varying vec2 vUv0;

    uniform sampler2D uHeightMap;
    uniform float uBrushOpacity;
    uniform vec4 uBrushMask;

    float getFactor() {
        vec4 heightMap = texture2D(uHeightMap, vUv0);
        float height   = (heightMap.r + heightMap.g + heightMap.b) / 3.0 / heightMap.a;
        float factor   = height * uBrushOpacity;
        return factor;
    }
`;
    exports.fragmentShader = `
    ${exports.factorMethod}

    void main(void)
    {
        float factor = getFactor();
        vec4 color = vec4(uBrushMask * factor);

        gl_FragColor = color;
    }
`;
    exports.fragmentInvertShader = `
    ${exports.factorMethod}

    void main(void)
    {
        float levels = 4.0;
        float factor = getFactor();
        vec4 color   = vec4(factor);

        if (uBrushMask.r > 0.0) { color.r = 0.0; levels -= 1.0; }
        if (uBrushMask.g > 0.0) { color.g = 0.0; levels -= 1.0; }
        if (uBrushMask.b > 0.0) { color.b = 0.0; levels -= 1.0; }
        if (uBrushMask.a > 0.0) { color.a = 0.0; levels -= 1.0; }

        gl_FragColor = color / levels;
    }
`;
});
define("src/TerrainHelpers/ColorPainter", ["require", "exports", "src/TerrainHelpers/ColorPainterShaders", "src/Shared/Utils"], function (require, exports, ColorPainterShaders_mjs_1, Utils_mjs_5) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.painterLayerName = exports.painterCameraFar = void 0;
    exports.painterCameraFar = 10;
    exports.painterLayerName = 'TerrainEditor';
    class ColorPainter {
        get painting() { return this._painting; }
        get cameraFar() { return exports.painterCameraFar; }
        get background() { return this._buffer; }
        constructor(app, buffer) {
            this._painting = false;
            this._painterMask = new Float32Array(4);
            this._buffer = buffer;
            this._app = app;
            this._initCamera();
            this._initShaders();
            this._initMaterials();
            this._initEntities();
        }
        _initCamera() {
            const painterLayer = this._app.scene.layers.getLayerByName(exports.painterLayerName);
            this._painterRenderTarget = new pc.RenderTarget({
                colorBuffer: this._buffer,
                flipY: this._app.graphicsDevice.isWebGPU,
                depth: false,
            });
            this._painterCameraEntity = new pc.Entity('TerrainPainterCamera');
            this._painterCameraEntity.setLocalPosition(0, 0, exports.painterCameraFar);
            this._painterCameraEntity.lookAt(0, 0, 0);
            this._painterCameraEntity.addComponent('camera', {
                projection: pc.PROJECTION_ORTHOGRAPHIC,
                clearColorBuffer: false,
                clearDepthBuffer: false,
                priority: -1,
                layers: [painterLayer.id],
                nearClip: 0.1,
                farClip: exports.painterCameraFar * 2,
                renderTarget: this._painterRenderTarget,
            });
            this._app.root.addChild(this._painterCameraEntity);
            this._painterCameraEntity.enabled = false;
            this._painterCameraEntity.camera.frustumCulling = false;
            this._painterCameraEntity.camera.orthoHeight = exports.painterCameraFar;
        }
        _initEntities() {
            const painterLayer = this._app.scene.layers.getLayerByName(exports.painterLayerName);
            painterLayer.transparentSortMode = pc.SORTMODE_MANUAL;
            this._painterEntity = new pc.Entity('TerrainBrushPainter');
            this._painterEntity.addComponent('render', {
                type: 'plane',
                layers: [painterLayer.id],
                material: this._painterMaterial,
                castShadows: false,
                castShadowsLightmap: false,
                receiveShadows: false
            });
            this._painterInvertEntity = new pc.Entity('TerrainBrushPainterInvert');
            this._painterInvertEntity.addComponent('render', {
                type: 'plane',
                layers: [painterLayer.id],
                material: this._painterInvertMaterial,
                castShadows: false,
                castShadowsLightmap: false,
                receiveShadows: false,
            });
            this._painterEntity.render.meshInstances[0].drawOrder = 1;
            this._painterInvertEntity.render.meshInstances[0].drawOrder = 0;
            this._app.root.addChild(this._painterInvertEntity);
            this._app.root.addChild(this._painterEntity);
            this._painterInvertEntity.setLocalEulerAngles(90, 0, 0);
            this._painterEntity.setLocalEulerAngles(90, 0, 0);
            this._painterInvertEntity.enabled = false;
            this._painterEntity.enabled = false;
        }
        _initShaders() {
            const vertex = ColorPainterShaders_mjs_1.vertexShader;
            const fragment = (0, Utils_mjs_5.setPrecision)(this._app.graphicsDevice, ColorPainterShaders_mjs_1.fragmentShader);
            const fragmentInvert = (0, Utils_mjs_5.setPrecision)(this._app.graphicsDevice, ColorPainterShaders_mjs_1.fragmentInvertShader);
            if (pc.ShaderMaterial) {
                this._painterMaterial = new pc.ShaderMaterial({
                    uniqueName: 'PainterFragmentShader',
                    // @ts-ignore
                    vertexCode: vertex,
                    fragmentCode: fragment,
                    attributes: {
                        aPosition: pc.SEMANTIC_POSITION,
                        aUv0: pc.SEMANTIC_TEXCOORD0
                    }
                });
                this._painterInvertMaterial = new pc.ShaderMaterial({
                    uniqueName: 'PainterInvertFragmentShader',
                    // @ts-ignore
                    vertexCode: vertex,
                    fragmentCode: fragmentInvert,
                    attributes: {
                        aPosition: pc.SEMANTIC_POSITION,
                        aUv0: pc.SEMANTIC_TEXCOORD0
                    }
                });
                return;
            }
            this._painterShader = pc.createShaderFromCode(this._app.graphicsDevice, vertex, fragment, 'PainterFragmentShader', {
                aPosition: pc.SEMANTIC_POSITION,
                aUv0: pc.SEMANTIC_TEXCOORD0
            });
            this._painterInvertShader = pc.createShaderFromCode(this._app.graphicsDevice, vertex, fragmentInvert, 'PainterInvertFragmentShader', {
                aPosition: pc.SEMANTIC_POSITION,
                aUv0: pc.SEMANTIC_TEXCOORD0
            });
        }
        _initMaterials() {
            if (!pc.ShaderMaterial) {
                this._painterMaterial = new pc.Material();
                this._painterInvertMaterial = new pc.Material();
                /* @ts-ignore */
                this._painterMaterial.shader = this._painterShader;
                /* @ts-ignore */
                this._painterInvertMaterial.shader = this._painterInvertShader;
            }
            this._painterMaterial.name = 'BrushPainterMaterial';
            this._painterMaterial.blendType = pc.BLEND_ADDITIVE;
            this._painterMaterial.update();
            this._painterInvertMaterial.name = 'BrushPainterInvertMaterial';
            this._painterInvertMaterial.blendType = pc.BLEND_SUBTRACTIVE;
            this._painterInvertMaterial.update();
        }
        _updateRuntimeSettings(dt) {
            const originalOpacity = this._brushSettings.opacity;
            const opacity = originalOpacity;
            this._painterMaterial.setParameter('uBrushOpacity', opacity);
            this._painterInvertMaterial.setParameter('uBrushOpacity', opacity);
        }
        _updatePositionAndScale(x, y, scaleWidth, scaleHeight) {
            const far = this.cameraFar * 2;
            const ration = this.background.width / this.background.height;
            x = x * far * ration - this.cameraFar * ration;
            y = y * far - this.cameraFar;
            scaleWidth = scaleWidth * this.background.width / far / 2.5;
            scaleHeight = scaleHeight * this.background.height / far / 2.5;
            this._setScale(scaleWidth, scaleHeight);
            this._setPosition(x, y);
        }
        startPaint(dt, x, y, scaleWidth, scaleHeight) {
            this._updateRuntimeSettings(dt);
            this._updatePositionAndScale(x, y, scaleWidth, scaleHeight);
            this._painting = true;
            this._painterInvertEntity.enabled = true;
            this._painterEntity.enabled = true;
            this._painterCameraEntity.enabled = true;
        }
        stopPaint() {
            this._painting = false;
            this._painterInvertEntity.enabled = false;
            this._painterEntity.enabled = false;
            this._painterCameraEntity.enabled = false;
        }
        _setScale(x, y) {
            this._painterEntity.setLocalScale(x, 1, y);
            this._painterInvertEntity.setLocalScale(x, 1, y);
        }
        _setPosition(x, y) {
            this._painterEntity.setLocalPosition(x, y, 0);
            this._painterInvertEntity.setLocalPosition(x, y, 0);
        }
        updateSettings(brushSettings, activeLayer) {
            this._painterMask.fill(0);
            if (activeLayer > 0) {
                this._painterMask[activeLayer - 1] = 1;
            }
            const brushTexture = brushSettings.textures[brushSettings.active].resource;
            this._painterMaterial.setParameter('uBrushMask', this._painterMask);
            this._painterMaterial.setParameter('uHeightMap', brushTexture);
            this._painterInvertMaterial.setParameter('uBrushMask', this._painterMask);
            this._painterInvertMaterial.setParameter('uHeightMap', brushTexture);
            this._brushSettings = brushSettings;
        }
    }
    exports.default = ColorPainter;
});
define("src/Shared/EnumConverter", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.isNumeric = isNumeric;
    exports.mapTitleEnum = mapTitleEnum;
    exports.mapEnum = mapEnum;
    function isNumeric(value) {
        return /^-?\d+$/.test(value);
    }
    function mapTitleEnum(someEnum) {
        const result = [];
        for (let value in someEnum) {
            if (!someEnum.hasOwnProperty(value) ||
                isNumeric(value)) {
                continue;
            }
            const enumEntry = {};
            enumEntry[value] = someEnum[value];
            result.push(enumEntry);
        }
        return result;
    }
    function mapEnum(someEnum) {
        const result = [];
        for (let value in someEnum) {
            if (!someEnum.hasOwnProperty(value)) {
                continue;
            }
            const enumEntry = {};
            enumEntry[value] = someEnum[value];
            result.push(enumEntry);
        }
        return result;
    }
});
define("src/TerrainHelpers/Enums", ["require", "exports", "src/Shared/EnumConverter"], function (require, exports, EnumConverter_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.terrainHeightsCompressAlgoritm = exports.terrainHeightsCompressAlgoritmDefault = exports.terrainPatchSizeEnum = exports.terrainPatchSizeEnumDefault = exports.terrainSizeEnum = exports.terrainSizeEnumDefault = void 0;
    exports.terrainSizeEnumDefault = 513;
    exports.terrainSizeEnum = (0, EnumConverter_mjs_1.mapEnum)({
        '128': 129,
        '256': 257,
        '512': 513,
        '1024': 1025,
        '2048': 2049,
        '4096': 4097,
        '8192': 8193,
        '16384': 16385,
    });
    exports.terrainPatchSizeEnumDefault = 33;
    exports.terrainPatchSizeEnum = (0, EnumConverter_mjs_1.mapEnum)({
        '16': 17,
        '32': 33,
        '64': 65,
        '128': 129,
        '256': 257,
        '512': 513,
        '1024': 1025,
        '2048': 2049,
    });
    exports.terrainHeightsCompressAlgoritmDefault = 'none';
    exports.terrainHeightsCompressAlgoritm = (0, EnumConverter_mjs_1.mapEnum)({
        'None': 'none',
        'X2': 'x2',
        'X4': 'x4'
    });
});
define("src/TerrainSystem/Triangle", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Triangle = void 0;
    const tmpTriVecA = new pc.Vec3();
    const tmpTriVecB = new pc.Vec3();
    class Triangle extends pc.Tri {
        getNormal(rsh) {
            tmpTriVecA.sub2(this.v1, this.v0);
            tmpTriVecB.sub2(this.v2, this.v0);
            rsh.cross(tmpTriVecA, tmpTriVecB).normalize();
        }
    }
    exports.Triangle = Triangle;
    exports.default = Triangle;
});
define("src/TerrainSystem/HeightfieldShape", ["require", "exports", "src/TerrainSystem/TerrainRaycastResult", "src/TerrainSystem/Triangle"], function (require, exports, TerrainRaycastResult_mjs_1, Triangle_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.intersectsRayBox = intersectsRayBox;
    TerrainRaycastResult_mjs_1 = __importDefault(TerrainRaycastResult_mjs_1);
    Triangle_mjs_1 = __importDefault(Triangle_mjs_1);
    const infinite = 9999999;
    const modelTransform = new pc.Mat4();
    const tmpRay = new pc.Ray();
    const tmpRaycastVec = new pc.Vec3();
    const tmpPos1 = new pc.Vec3();
    const tmpPos2 = new pc.Vec3();
    const tmpPos3 = new pc.Vec3();
    const triangle = new Triangle_mjs_1.default();
    const debugTmpVec = new pc.Vec3();
    const debugTransform = new pc.Mat4();
    const debugPositions = new Array(16);
    let debugTransformIsIdentity = true;
    function debugDrawTriangleLines(tri, color = pc.Color.YELLOW) {
        var _a;
        /*
        [
            tri.v0.x, tri.v0.y, tri.v0.z, tri.v1.x, tri.v1.y, tri.v1.z,
            tri.v1.x, tri.v1.y, tri.v1.z, tri.v2.x, tri.v2.y, tri.v2.z,
            tri.v2.x, tri.v2.y, tri.v2.z, tri.v0.x, tri.v0.y, tri.v0.z,
        ], color, false);
        ]
        */
        debugTransform.transformPoint(tri.v0, debugTmpVec);
        debugPositions[0] = debugPositions[15] = debugTmpVec.x;
        debugPositions[1] = debugPositions[16] = debugTmpVec.y;
        debugPositions[2] = debugPositions[17] = debugTmpVec.z;
        debugTransform.transformPoint(tri.v1, debugTmpVec);
        debugPositions[3] = debugPositions[6] = debugTmpVec.x;
        debugPositions[4] = debugPositions[7] = debugTmpVec.y;
        debugPositions[5] = debugPositions[8] = debugTmpVec.z;
        debugTransform.transformPoint(tri.v2, debugTmpVec);
        debugPositions[9] = debugPositions[12] = debugTmpVec.x;
        debugPositions[10] = debugPositions[13] = debugTmpVec.y;
        debugPositions[11] = debugPositions[14] = debugTmpVec.z;
        (_a = pc.app) === null || _a === void 0 ? void 0 : _a.drawLineArrays(debugPositions, color, false);
    }
    function intersectsRayBox(aabb, ray) {
        const rayOrigin = ray.origin;
        const rayDirection = ray.direction;
        const minX = aabb.minX;
        const maxX = aabb.maxX;
        const minY = aabb.minY;
        const maxY = aabb.maxY;
        const minZ = aabb.minZ;
        const maxZ = aabb.maxZ;
        let tmin = (minX - rayOrigin.x) / rayDirection.x;
        let tmax = (maxX - rayOrigin.x) / rayDirection.x;
        if (tmin > tmax) {
            let temp = tmin;
            tmin = tmax;
            tmax = temp;
        }
        let tymin = (minY - rayOrigin.y) / rayDirection.y;
        let tymax = (maxY - rayOrigin.y) / rayDirection.y;
        if (tymin > tymax) {
            let temp = tymin;
            tymin = tymax;
            tymax = temp;
        }
        if ((tmin > tymax) || (tymin > tmax)) {
            return false;
        }
        if (tymin > tmin) {
            tmin = tymin;
        }
        if (tymax < tmax) {
            tmax = tymax;
        }
        let tzmin = (minZ - rayOrigin.z) / rayDirection.z;
        let tzmax = (maxZ - rayOrigin.z) / rayDirection.z;
        if (tzmin > tzmax) {
            let temp = tzmin;
            tzmin = tzmax;
            tzmax = temp;
        }
        if ((tmin > tzmax) || (tzmin > tmax)) {
            return false;
        }
        return true;
    }
    class HeightfieldShape {
        constructor(heightMap) {
            this._heightMap = heightMap;
            this._beginPos = new pc.Vec3();
            this._endPos = new pc.Vec3();
            this.updateBoundingBox();
        }
        updateBoundingBox() {
            const halfWidth = this._heightMap.width / 2;
            const halfDepth = this._heightMap.depth / 2;
            this._boundingBox = {
                minX: -halfWidth,
                minY: 0,
                minZ: -halfDepth,
                maxX: halfWidth,
                maxY: this._heightMap.maxHeight,
                maxZ: halfDepth,
            };
        }
        _triangleIntersectsRay(tri, ray, bestResult) {
            if (tri.intersectsRay(ray, tmpRaycastVec)) {
                const distance = tmpRaycastVec.distance(ray.origin);
                if (bestResult.distance > distance) {
                    bestResult.distance = distance;
                    tri.getNormal(bestResult.localNormal);
                    bestResult.normal.copy(bestResult.localNormal);
                    bestResult.localPoint.copy(tmpRaycastVec);
                    bestResult.point.copy(tmpRaycastVec);
                    debugDrawTriangleLines(tri, pc.Color.RED);
                    const distanceP0 = bestResult.point.distance(tri.v0);
                    const distanceP1 = bestResult.point.distance(tri.v1);
                    const distanceP2 = bestResult.point.distance(tri.v2);
                    if (distanceP0 > distanceP1) {
                        if (distanceP1 > distanceP2) {
                            bestResult.vertexIndex = tri.index2;
                        }
                        else {
                            bestResult.vertexIndex = tri.index1;
                        }
                    }
                    else {
                        if (distanceP0 > distanceP2) {
                            bestResult.vertexIndex = tri.index2;
                        }
                        else {
                            bestResult.vertexIndex = tri.index0;
                        }
                    }
                    return true;
                }
            }
            //debugDrawTriangleLines(tri);
            return false;
        }
        _assignPosition(index, buf) {
            const x = index % this._heightMap.width | 0;
            const z = index / this._heightMap.width | 0;
            buf.x = (-this._heightMap.width / 2) + x;
            buf.y = this._heightMap.get(x, z);
            buf.z = (-this._heightMap.depth / 2) + z;
        }
        _quadAction(rs, ray, result) {
            const x = rs.prevX;
            const z = rs.prevZ;
            if (x < 0 || z < 0 || x >= this._heightMap.width - 1 || z >= this._heightMap.depth - 1) {
                return false;
            }
            const xFan2 = x % 2 === 0;
            const zFan2 = z % 2 === 0;
            let index0, index1, index2;
            {
                if (xFan2 !== zFan2) {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 0) * this._heightMap.width + (x + 1);
                }
                else {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 1);
                    index2 = (z + 0) * this._heightMap.width + (x + 1);
                }
                this._assignPosition(index0, tmpPos1);
                this._assignPosition(index1, tmpPos2);
                this._assignPosition(index2, tmpPos3);
                triangle.index0 = index0;
                triangle.index1 = index1;
                triangle.index2 = index2;
                triangle.set(tmpPos1, tmpPos2, tmpPos3);
            }
            if (this._triangleIntersectsRay(triangle, ray, result)) {
                return true;
            }
            {
                if (xFan2 !== zFan2) {
                    index0 = (z + 0) * this._heightMap.width + (x + 1);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 1) * this._heightMap.width + (x + 1);
                }
                else {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 1) * this._heightMap.width + (x + 1);
                }
                this._assignPosition(index0, tmpPos1);
                this._assignPosition(index1, tmpPos2);
                this._assignPosition(index2, tmpPos3);
                triangle.index0 = index0;
                triangle.index1 = index1;
                triangle.index2 = index2;
                triangle.set(tmpPos1, tmpPos2, tmpPos3);
            }
            if (this._triangleIntersectsRay(triangle, ray, result)) {
                return true;
            }
            return false;
        }
        _intersectsRay(localRay, result = new TerrainRaycastResult_mjs_1.default()) {
            if (!intersectsRayBox(this._boundingBox, localRay)) {
                return false;
            }
            this._beginPos.copy(localRay.origin);
            this._beginPos.x += this._boundingBox.maxX;
            this._beginPos.z += this._boundingBox.maxZ;
            this._endPos.copy(localRay.direction).add(this._beginPos);
            let rayDirectionFlatX = this._endPos.x - this._beginPos.x;
            let rayDirectionFlatZ = this._endPos.z - this._beginPos.z;
            const maxDistanceFlat = Math.sqrt(Math.pow(rayDirectionFlatX, 2) + Math.pow(rayDirectionFlatZ, 2));
            if (maxDistanceFlat < 0.0001) {
                // Consider the ray vertical
                rayDirectionFlatX = 0;
                rayDirectionFlatZ = 0;
            }
            else {
                rayDirectionFlatX /= maxDistanceFlat;
                rayDirectionFlatZ /= maxDistanceFlat;
            }
            const xiStep = rayDirectionFlatX > 0 ? 1 : rayDirectionFlatX < 0 ? -1 : 0;
            const ziStep = rayDirectionFlatZ > 0 ? 1 : rayDirectionFlatZ < 0 ? -1 : 0;
            const paramDeltaX = xiStep !== 0 ? 1 / Math.abs(rayDirectionFlatX) : infinite;
            const paramDeltaZ = ziStep !== 0 ? 1 / Math.abs(rayDirectionFlatZ) : infinite;
            let paramCrossX;
            let paramCrossZ;
            if (xiStep !== 0) {
                paramCrossX = xiStep === 1
                    ? (Math.ceil(this._beginPos.x) - this._beginPos.x) * paramDeltaX
                    : (this._beginPos.x - Math.floor(this._beginPos.x)) * paramDeltaX;
            }
            else {
                paramCrossX = infinite; // Will never cross on X
            }
            if (ziStep !== 0) {
                paramCrossZ = ziStep === 1
                    ? (Math.ceil(this._beginPos.z) - this._beginPos.z) * paramDeltaZ
                    : (this._beginPos.z - Math.floor(this._beginPos.z)) * paramDeltaZ;
            }
            else {
                paramCrossZ = infinite; // Will never cross on Z
            }
            const rs = {
                x: this._beginPos.x | 0,
                z: this._beginPos.z | 0,
                param: 0,
                prevX: 0,
                prevZ: 0,
                prevParam: 0,
                maxDistanceFlat: maxDistanceFlat,
            };
            // Workaround cases where the ray starts at an integer position
            if (paramCrossX === 0.0) {
                paramCrossX += paramDeltaX;
                // If going backwards, we should ignore the position we would get by the above flooring,
                // because the ray is not heading in that direction
                if (xiStep === -1) {
                    rs.x -= 1;
                }
            }
            if (paramCrossZ === 0.0) {
                paramCrossZ += paramDeltaZ;
                if (ziStep === -1)
                    rs.z -= 1;
            }
            let hasHit = false;
            while (!hasHit) {
                rs.prevX = rs.x;
                rs.prevZ = rs.z;
                rs.prevParam = rs.param;
                if (paramCrossX < paramCrossZ) {
                    // X lane
                    rs.x += xiStep;
                    // Assign before advancing the param,
                    // to be in sync with the initialization step
                    rs.param = paramCrossX;
                    paramCrossX += paramDeltaX;
                }
                else {
                    // Z lane
                    rs.z += ziStep;
                    rs.param = paramCrossZ;
                    paramCrossZ += paramDeltaZ;
                }
                if (this._quadAction(rs, localRay, result)) {
                    hasHit = true;
                }
                if (rs.param > rs.maxDistanceFlat) {
                    rs.param = rs.maxDistanceFlat;
                    break;
                }
            }
            return hasHit;
        }
        intersectsRay(worldTranform, ray, result = new TerrainRaycastResult_mjs_1.default()) {
            if (worldTranform) {
                modelTransform.copy(worldTranform).invert();
                modelTransform.transformPoint(ray.origin, tmpRay.origin);
                modelTransform.transformVector(ray.direction, tmpRay.direction);
                debugTransform.copy(worldTranform);
                debugTransformIsIdentity = false;
            }
            else if (!debugTransformIsIdentity) {
                debugTransform.setIdentity();
                debugTransformIsIdentity = true;
            }
            const hit = this._intersectsRay(worldTranform ? tmpRay : ray, result);
            if (hit && worldTranform) {
                // update world point and normal, but save local
                worldTranform.transformPoint(result.point, result.point);
                worldTranform.transformVector(result.normal, result.normal);
            }
            return !!hit;
        }
    }
    exports.default = HeightfieldShape;
});
define("src/TerrainSystem/PatchedHeightMap", ["require", "exports", "src/TerrainSystem/AbsPatchedHeightMap"], function (require, exports, AbsPatchedHeightMap_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchedHeightMap = void 0;
    AbsPatchedHeightMap_mjs_3 = __importStar(AbsPatchedHeightMap_mjs_3);
    class PatchedHeightMap extends AbsPatchedHeightMap_mjs_3.default {
        static createBuffer(width, depth, chunkSize) {
            const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
            const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
            const chunkArrSize = Math.pow(chunkSize, 2);
            const chunkCount = numChunksX * numChunksZ;
            return new Float32Array(chunkArrSize * chunkCount);
        }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, buffer) {
            const validDataChunkSize = (0, AbsPatchedHeightMap_mjs_3.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
            const tmpBuffer = buffer !== null && buffer !== void 0 ? buffer : PatchedHeightMap.createBuffer(width, depth, validDataChunkSize);
            super(width, depth, patchSize, dataChunkSize, maxHeight, tmpBuffer, 1, 0);
        }
    }
    exports.PatchedHeightMap = PatchedHeightMap;
    exports.default = PatchedHeightMap;
});
define("src/Shared/Frustum", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Frustum = void 0;
    const tmpVec = new pc.Vec3();
    const tmpRad = new pc.Vec3();
    const tmpSphere = new pc.BoundingSphere();
    class Frustum {
        get margin() { return this._margin; }
        set margin(value) { this._margin = value; }
        get frustum() { return this._frustum; }
        set frustum(value) { this._frustum = value; }
        get transform() { return this._mat; }
        set transform(value) {
            this._mat.copy(value);
            this._mat.getScale(this._scale);
        }
        constructor() {
            this._margin = 1;
            this._mat = new pc.Mat4();
            this._scale = new pc.Vec3();
        }
        containsSphere(localX, localY, localZ, radius) {
            tmpVec.set(localX, localY, localZ);
            tmpRad.copy(this._scale).mulScalar(radius);
            this._mat.transformPoint(tmpVec, tmpVec);
            // @ts-ignore [PLAYCANVAS:DOC]: center private in v2
            tmpSphere.center = tmpVec;
            tmpSphere.radius = tmpRad.distance(pc.Vec3.ZERO) * this._margin;
            return this._frustum.containsSphere(tmpSphere) > 0;
        }
    }
    exports.Frustum = Frustum;
});
define("src/Scripts/Terrain", ["require", "exports", "src/Shared/Debug", "src/TerrainSystem/MidpointDispTerrain", "src/TerrainSystem/TerrainRaycastResult", "src/TerrainSystem/HeightMap", "src/TerrainHelpers/TerrainRenderPreparer", "src/TerrainHelpers/ColorPainter", "src/TerrainHelpers/TerrainPatches", "src/TerrainHelpers/Enums", "src/TerrainHelpers/TerrainPatchesShaderChunks", "src/TerrainSystem/HeightfieldShape", "src/TerrainSystem/PatchedHeightMap", "src/TerrainSystem/CompressedPatchedHeightMap", "src/Shared/Frustum", "src/Shared/EnumConverter", "src/AmmoIntegration/AmmoIntegration", "src/TerrainHelpers/TerrainPatchesInstancing", "src/TerrainHelpers/TerrainPatchesCombineInstancing"], function (require, exports, Debug_mjs_1, MidpointDispTerrain_mjs_1, TerrainRaycastResult_mjs_2, HeightMap_mjs_3, TerrainRenderPreparer_mjs_1, ColorPainter_mjs_1, TerrainPatches_mjs_1, Enums_mjs_1, TerrainPatchesShaderChunks_mjs_4, HeightfieldShape_mjs_1, PatchedHeightMap_mjs_1, CompressedPatchedHeightMap_mjs_2, Frustum_mjs_1, EnumConverter_mjs_2, AmmoIntegration_mjs_1, TerrainPatchesInstancing_mjs_2, TerrainPatchesCombineInstancing_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.bigTerrainEditorScriptName = exports.terrainScriptName = exports.Terrain = exports.RenderMode = void 0;
    TerrainRaycastResult_mjs_2 = __importDefault(TerrainRaycastResult_mjs_2);
    HeightMap_mjs_3 = __importDefault(HeightMap_mjs_3);
    TerrainRenderPreparer_mjs_1 = __importDefault(TerrainRenderPreparer_mjs_1);
    ColorPainter_mjs_1 = __importDefault(ColorPainter_mjs_1);
    TerrainPatches_mjs_1 = __importDefault(TerrainPatches_mjs_1);
    HeightfieldShape_mjs_1 = __importDefault(HeightfieldShape_mjs_1);
    PatchedHeightMap_mjs_1 = __importDefault(PatchedHeightMap_mjs_1);
    CompressedPatchedHeightMap_mjs_2 = __importDefault(CompressedPatchedHeightMap_mjs_2);
    const brushMinSize = 2;
    const brushMaxSize = 250;
    const tmpMat = new pc.Mat4();
    const terrainLocalVertexPos = new pc.Vec3();
    const heightMapExt = '.hm';
    var RenderMode;
    (function (RenderMode) {
        RenderMode[RenderMode["Standard"] = 1] = "Standard";
        RenderMode[RenderMode["InstancingAccelerator"] = 2] = "InstancingAccelerator";
        RenderMode[RenderMode["CombineInstancingAccelerator"] = 3] = "CombineInstancingAccelerator";
        RenderMode[RenderMode["CustomForwardRenderer"] = 4] = "CustomForwardRenderer";
    })(RenderMode || (exports.RenderMode = RenderMode = {}));
    class Terrain extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this._lock = 0;
            this._localCameraPosition = new pc.Vec3();
            this._roughness = 1.0;
            this._rayStart = new pc.Vec3();
            this._rayEnd = new pc.Vec3();
            this._rayDirection = new pc.Vec3();
            this._ray = new pc.Ray();
            this._lastLodGridUpdate = 0;
            this._brushSizeStep = 1;
            this._brushOpacityStep = 0.01;
            this._intersectsRayResult = false;
            this._keyAddLock = true;
            this._keySubLock = true;
        }
        get shape() { return this._heightFieldShape; }
        get object() { return this._terrain; }
        get patches() { return this._patchesStore; }
        get renderPreparer() { return this._renderPreparer; }
        get lock() { return this._lock; }
        addLock() {
            this._lock++;
        }
        freeLock() {
            this._lock--;
        }
        postInitialize() {
            this._initializeMouse();
            this._initializeKeyboard();
            this._initBrush();
            this._initTerrain();
            this._createTerrainMaterial();
            this._updateTerrainMaterialParameters();
            this._updateLayers();
            this._updateHeightMapFromAttr();
            this._updateBrush();
            this._updatePainterMaterial();
            this._updateMesh();
            this.on('attr:renderMode', () => {
                this._renderPreparer.patchesStore.customForwardRenderer = this.renderMode === RenderMode.CustomForwardRenderer;
                this._renderPreparer.patchesStore.setMaterial(this._material);
                this._renderPreparer.patchesStore.setInstancing(this.renderMode === RenderMode.InstancingAccelerator ? new TerrainPatchesInstancing_mjs_2.TerrainPathcesInstancing() :
                    this.renderMode === RenderMode.CombineInstancingAccelerator ? new TerrainPatchesCombineInstancing_mjs_2.TerrainPathcesCombineInstancing() :
                        undefined);
            });
            this.on('attr:wireframe', () => { this._renderPreparer.wireframe = this.wireframe; });
            this.on('attr:castShadow', () => { this._renderPreparer.castShadow = this.castShadow; });
            this.on('attr:receiveShadow', () => { this._renderPreparer.receiveShadow = this.receiveShadow; });
            this.on('attr:activeLayer', () => {
                this._updatePainterMaterial();
            });
            this.on('attr:layers', () => {
                this._updateLayers();
            });
            this.on('attr:brush', () => {
                this._updateBrush();
                this._updatePainterMaterial();
            });
            this.on('attr:height', () => {
                this._terrain.setMaxHeight(this.height);
                this._updateTerrainMaterialParameters();
            });
            this.on('attr:zFar', () => {
                this._terrain.setZFar(this.zFar);
            });
        }
        _initBrush() {
            const splatMap = this.painterSettings.splatMap.resource;
            this._brushHeightMap = new HeightMap_mjs_3.default(256, 256, 100);
            this._colorPainter = new ColorPainter_mjs_1.default(this.app, splatMap);
        }
        _updatePainterMaterial() {
            this._colorPainter.updateSettings(this.brush, this.activeLayer);
        }
        _updateBrush() {
            this._brushSize = this.brush.size | 0;
            this._brushOpacity = this.brush.opacity;
            const activeBrush = this.brush.active | 0;
            if (activeBrush === this._activeBrush) {
                return;
            }
            if (!this.brush.textures[activeBrush]) {
                console.error('Brush image unset.');
                return;
            }
            const brushTexture = this.brush.textures[activeBrush].resource;
            const brushImg = brushTexture.getSource();
            if (!brushImg) {
                console.error('Brush image unset.');
                return;
            }
            this._activeBrush = activeBrush;
            this._brushHeightMap.fromImage(brushImg);
            this._brushHeightMap.smooth(1, 1);
            console.log(this._brushHeightMap);
        }
        _initHeightMapBuffer(chunkSize) {
            // TODO: Move to terrain collider
            // TODO: Ammo js integration
            const buffer = (window.Ammo) ? (0, AmmoIntegration_mjs_1.getBuffer)(this.width, this.depth, this.patchSize, chunkSize, this.compressAlgoritm) : undefined;
            if ((window.Ammo)) {
                const ht = this.compressAlgoritm === 'none' ? 0 :
                    this.compressAlgoritm === 'x2' ? 1 :
                        2;
                const hm = new Ammo.btAlexTerrainPatchedHeightMap(this.width, this.depth, this.patchSize, chunkSize, 0, this.height, ht, buffer.byteOffset);
                const shape = new Ammo.btAlexHeightfieldTerrainShape(hm, false);
                const groundTransform = new Ammo.btTransform();
                groundTransform.setIdentity();
                groundTransform.setOrigin(new Ammo.btVector3(0, this.height / 2, 0));
                const groundMass = 0;
                const groundLocalInertia = new Ammo.btVector3(0, 0, 0);
                const groundMotionState = new Ammo.btDefaultMotionState(groundTransform);
                const groundBody = new Ammo.btRigidBody(new Ammo.btRigidBodyConstructionInfo(groundMass, groundMotionState, shape, groundLocalInertia));
                this.app.systems.rigidbody.dynamicsWorld.addRigidBody(groundBody);
            }
            return buffer;
        }
        _initTerrain() {
            const tmpChunkSize = this.patchSize * 2 - 1; // 257, 513, ...
            const chunkSize = Math.min(this.width, this.depth, tmpChunkSize);
            const buffer = this._initHeightMapBuffer(chunkSize);
            const heightMap = this.compressAlgoritm !== 'none'
                ? new CompressedPatchedHeightMap_mjs_2.default(this.width, this.depth, this.patchSize, chunkSize, this.height, this.compressAlgoritm, buffer)
                : new PatchedHeightMap_mjs_1.default(this.width, this.depth, this.patchSize, chunkSize, this.height, buffer);
            this._terrain = new MidpointDispTerrain_mjs_1.MidpointDispTerrain(heightMap, this.zFar);
            this._heightFieldShape = new HeightfieldShape_mjs_1.default(heightMap);
            this._raycastResult = new TerrainRaycastResult_mjs_2.default();
            this._frustum = new Frustum_mjs_1.Frustum();
            this._patchesStore = new TerrainPatches_mjs_1.default(this._terrain);
            this._renderPreparer = new TerrainRenderPreparer_mjs_1.default(this._patchesStore, {
                wireframe: this.wireframe,
                castShadow: this.castShadow,
                receiveShadow: this.receiveShadow,
            });
            console.log(this._terrain, this._heightFieldShape, this._renderPreparer);
        }
        _createTerrainMaterial() {
            this._material = TerrainPatches_mjs_1.default.createMaterial();
        }
        _updateTerrainMaterialParameters() {
            this._material.setParameter(TerrainPatchesShaderChunks_mjs_4.terrainSplatMapParamName, this._colorPainter.background);
            this._material.setParameter(TerrainPatchesShaderChunks_mjs_4.terrainMaxHeightParamName, this._terrain.maxHeight);
        }
        _updateLayers() {
            var _a;
            // TODO
            const maxCount = 5;
            const width = 1024;
            const height = 1024;
            let length = 0;
            let flags = [];
            let scales = [];
            let offsets = [];
            let diffuses = [];
            let normals = [];
            for (let i = 0; i < maxCount; i++) {
                let flag = 0;
                if (i < this.layers.length) {
                    const layer = this.layers[i];
                    const diffuse = layer.diffuse;
                    const normalMap = layer.normalMap;
                    if (diffuse) {
                        const texture = diffuse.resource;
                        flag++;
                        length++;
                        diffuses.push(texture.getSource());
                        scales.push(layer.size.x, layer.size.y);
                        offsets.push(layer.offset.x, layer.offset.y);
                        if (normalMap) {
                            flag++;
                            normals.push(normalMap.resource.getSource());
                        }
                    }
                }
                flags.push(flag);
            }
            (_a = this._layersDiffuse) === null || _a === void 0 ? void 0 : _a.destroy();
            //this._layersDiffuse = this.layers[0].diffuse.resource as pcx.Texture;
            this._layersDiffuse = new pc.Texture(this.app.graphicsDevice, {
                name: 'terrainLayersDiffuse',
                format: pc.PIXELFORMAT_RGBA8,
                width: width,
                height: height,
                arrayLength: length,
                flipY: this.app.graphicsDevice.isWebGPU,
                //magFilter: pc.FILTER_LINEAR,
                //minFilter: pc.FILTER_LINEAR_MIPMAP_LINEAR,
                mipmaps: true,
                addressU: pc.ADDRESS_REPEAT,
                addressV: pc.ADDRESS_REPEAT,
                addressW: pc.ADDRESS_CLAMP_TO_EDGE,
                levels: [diffuses]
            });
            this._layersDiffuse.upload();
            console.log(this._layersDiffuse);
            this._material.setParameter(`uTerrainLayersCount`, length);
            this._material.setParameter(`uTerrainLayersDiffuse`, this._layersDiffuse);
            this._material.setParameter(`uTerrainLayersFlags[0]`, flags);
            this._material.setParameter(`uTerrainLayersScale[0]`, scales);
            this._material.setParameter(`uTerrainLayersOffset[0]`, offsets);
        }
        _updateMesh() {
            this._renderPreparer.patchesStore.customForwardRenderer = this.renderMode === RenderMode.CustomForwardRenderer;
            this._renderPreparer.patchesStore.setInstancing(this.renderMode === RenderMode.InstancingAccelerator ? new TerrainPatchesInstancing_mjs_2.TerrainPathcesInstancing() :
                this.renderMode === RenderMode.CombineInstancingAccelerator ? new TerrainPatchesCombineInstancing_mjs_2.TerrainPathcesCombineInstancing() :
                    undefined);
            this._renderPreparer.patchesStore.init(this.app, this.entity, this._material);
        }
        _initializeMouse() {
            var _a, _b;
            (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.on(pc.EVENT_MOUSEMOVE, this._onMouseMove, this);
            (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.on(pc.EVENT_MOUSEWHEEL, this._onMouseWheel, this);
            this.on('destroy', () => {
                var _a, _b;
                (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.off(pc.EVENT_MOUSEMOVE, this._onMouseMove, this);
                (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.off(pc.EVENT_MOUSEWHEEL, this._onMouseWheel, this);
            });
        }
        _onMouseMove(event) {
            this._lastMouseMoveEvent = event;
        }
        _onMouseWheel(event) {
            const candidate = this._brushSize + event.wheelDelta * this._brushSizeStep;
            this._brushSize = Math.min(Math.max(candidate, brushMinSize), brushMaxSize);
        }
        _initializeKeyboard() {
            var _a, _b;
            (_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.on(pc.EVENT_KEYDOWN, this._onKeyboardDown, this);
            (_b = this.app.keyboard) === null || _b === void 0 ? void 0 : _b.on(pc.EVENT_KEYUP, this._onKeyboardUp, this);
            this.on('destroy', () => {
                var _a, _b;
                (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.off(pc.EVENT_KEYDOWN, this._onKeyboardDown, this);
                (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.off(pc.EVENT_KEYUP, this._onKeyboardUp, this);
            });
        }
        _onKeyboardDown(event) {
            if (this._keyAddLock === false && event.key === pc.KEY_ADD) {
                this._keyAddLock = true;
                this._brushOpacity = Math.max(this._brushOpacity + this._brushOpacityStep, 0);
            }
            if (this._keySubLock === false && event.key === pc.KEY_SUBTRACT) {
                this._keySubLock = true;
                this._brushOpacity = Math.min(this._brushOpacity - this._brushOpacityStep, 1);
            }
        }
        _onKeyboardUp(event) {
            if (event.key === pc.KEY_ADD) {
                this._keyAddLock = false;
            }
            else if (event.key === pc.KEY_SUBTRACT) {
                this._keySubLock = false;
            }
        }
        _updateHeightMapFromAttr() {
            return __awaiter(this, void 0, void 0, function* () {
                if (this.heightMap.file) {
                    if (!this.heightMap.file.resource) {
                        console.warn('Height map file unset.');
                        return;
                    }
                    const data = this.heightMap.file.resource;
                    yield this._terrain.loadHeightMapFromFile(data, {
                        adaptiveMaxHeight: true,
                        adaptiveWidthAndDepth: true,
                    });
                }
                else {
                    const texture = this.heightMap.texture;
                    if (!texture) {
                        console.warn('Height map image unset.');
                        return;
                    }
                    const resource = texture.resource;
                    const img = resource.getSource();
                    if (!img) {
                        console.warn('Height map image unset.');
                        return;
                    }
                    this._terrain.loadHeightMapFromImg(img, this.heightMap.smoothFactor, this.heightMap.smoothRadius);
                    // TODO: clear heightmap
                    resource.destroy();
                }
                this._renderPreparer.patchesStore.updateAabb();
                this._renderPreparer.patchesStore.updateHeights({
                    minX: 0,
                    minZ: 0,
                    maxX: this.width,
                    maxZ: this.depth
                });
            });
        }
        _saveHeightMapToImg() {
            const base64 = this._terrain.heightMap.toImage();
            const image = new Image();
            image.src = base64;
            const w = window.open(undefined, '_blank');
            w.document.write(image.outerHTML);
        }
        _saveHeightMapToFile() {
            return __awaiter(this, void 0, void 0, function* () {
                const blob = yield this._terrain.heightMap.toFile();
                const blobUrl = URL.createObjectURL(blob);
                const a = document.createElement("a");
                const timestamp = new Date();
                document.body.appendChild(a);
                a.href = blobUrl;
                a.download = `hm_${+timestamp}${heightMapExt}`;
                a.click();
                URL.revokeObjectURL(blobUrl);
            });
        }
        update(dt) {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            if (this._colorPainter.painting) {
                this._colorPainter.stopPaint();
            }
            if (this.autoRender &&
                this.cameraEntity &&
                this.cameraEntity.camera) {
                const camera = this.cameraEntity.camera;
                const mat = this.entity.getWorldTransform();
                const scale = mat.getScale();
                if (this._lastMouseMoveEvent) {
                    let hasChanges = false;
                    camera.screenToWorld(this._lastMouseMoveEvent.x, this._lastMouseMoveEvent.y, camera.nearClip, this._rayStart);
                    camera.screenToWorld(this._lastMouseMoveEvent.x, this._lastMouseMoveEvent.y, camera.farClip, this._rayEnd);
                    this._rayDirection.sub2(this._rayEnd, this._rayStart);
                    const changeRay = !this._ray.origin.equals(this._rayStart) || !this._ray.direction.equals(this._rayDirection);
                    if (changeRay) {
                        this._ray.set(this._rayStart, this._rayDirection);
                        this._raycastResult.clear();
                        this._intersectsRayResult = this._heightFieldShape.intersectsRay(mat, this._ray, this._raycastResult);
                    }
                    if (this._intersectsRayResult) {
                        const brushSizeX = this._brushSize / scale.x | 0;
                        const brushSizeZ = this._brushSize / scale.z | 0;
                        this._terrain.patchVertices.getPosition(this._raycastResult.vertexIndex, terrainLocalVertexPos);
                        if ((_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.wasPressed(pc.KEY_I)) {
                            console.log(this._raycastResult, this._localCameraPosition, terrainLocalVertexPos);
                        }
                        (0, Debug_mjs_1.drawPoint)({ center: this._raycastResult.point, radius: this._brushSize, numSegments: 10, depthTest: true, color: pc.Color.GRAY });
                        (0, Debug_mjs_1.drawDirectionVector)(this._raycastResult.point, this._raycastResult.normal, pc.Color.MAGENTA);
                        if (this._lock < 1 &&
                            ((_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.isPressed(pc.MOUSEBUTTON_LEFT))) {
                            if (this.painting) {
                                const width = this._terrain.width - 1;
                                const depth = this._terrain.depth - 1;
                                const x = terrainLocalVertexPos.x / width;
                                const y = terrainLocalVertexPos.z / depth;
                                const scaleW = brushSizeX / width;
                                const scaleH = brushSizeZ / depth;
                                this._colorPainter.startPaint(dt, x, y, scaleW, scaleH);
                            }
                            else {
                                const average = (brushSizeX + brushSizeZ) / 2;
                                const centerX = terrainLocalVertexPos.x | 0;
                                const centerZ = terrainLocalVertexPos.z | 0;
                                const zone = {
                                    minX: centerX - brushSizeX,
                                    maxX: centerX + brushSizeX + 1,
                                    minZ: centerZ - brushSizeZ,
                                    maxZ: centerZ + brushSizeZ + 1,
                                };
                                if ((_c = this.app.keyboard) === null || _c === void 0 ? void 0 : _c.isPressed(pc.KEY_ALT)) {
                                    this._terrain.smoothHeightsZone(zone, average * this._brushOpacity * dt / 10, 1);
                                }
                                else {
                                    const negative = !!((_d = this.app.keyboard) === null || _d === void 0 ? void 0 : _d.isPressed(pc.KEY_CONTROL));
                                    const appendValue = (negative ? -average : average) * this._brushOpacity * dt / 10;
                                    this._terrain.appendHeightMap(this._brushHeightMap, appendValue, zone);
                                }
                                if ((_e = this.app.keyboard) === null || _e === void 0 ? void 0 : _e.wasPressed(pc.KEY_I)) {
                                    console.log(zone);
                                }
                                this._terrain.recalculateMinMax(zone);
                                this._renderPreparer.patchesStore.updateHeights(zone);
                                hasChanges = true;
                            }
                        }
                    }
                }
                tmpMat.invert(mat);
                tmpMat.transformPoint(camera.entity.getPosition(), this._localCameraPosition);
                this._frustum.frustum = camera.frustum;
                this._frustum.transform = mat;
                this._terrain.updateLods(this._localCameraPosition, this.lodByYPos, true);
                this._renderPreparer.update(this._frustum);
            }
            if ((_f = this.app.keyboard) === null || _f === void 0 ? void 0 : _f.wasPressed(pc.KEY_L)) {
                this._terrain.printLodMap();
            }
            if ((_g = this.app.keyboard) === null || _g === void 0 ? void 0 : _g.wasPressed(pc.KEY_P)) {
                this._saveHeightMapToImg();
            }
            if ((_h = this.app.keyboard) === null || _h === void 0 ? void 0 : _h.wasPressed(pc.KEY_O)) {
                this._saveHeightMapToFile();
            }
            // Debug
            //this.app.drawTexture( 0.5, -0.6, 0.5, 0.3, this.painterSettings.splatMap.resource, undefined as any);
        }
    }
    exports.Terrain = Terrain;
    exports.default = Terrain;
    exports.terrainScriptName = "Terrain";
    exports.bigTerrainEditorScriptName = "bigTerrainEditor";
    pc.registerScript(Terrain, exports.terrainScriptName);
    pc.registerScript(Terrain, exports.bigTerrainEditorScriptName);
    Terrain.attributes.add("renderMode", { type: "number", enum: (0, EnumConverter_mjs_2.mapTitleEnum)(RenderMode), default: RenderMode.Standard, });
    Terrain.attributes.add("castShadow", { type: "boolean", default: true, });
    Terrain.attributes.add("receiveShadow", { type: "boolean", default: true, });
    Terrain.attributes.add("lodByYPos", { type: "boolean", default: true, });
    Terrain.attributes.add("zFar", { type: "number", default: 5000, min: 1, step: 1, precision: 0, });
    Terrain.attributes.add("width", { type: "number", enum: Enums_mjs_1.terrainSizeEnum, default: Enums_mjs_1.terrainSizeEnumDefault, });
    Terrain.attributes.add("depth", { type: "number", enum: Enums_mjs_1.terrainSizeEnum, default: Enums_mjs_1.terrainSizeEnumDefault, });
    Terrain.attributes.add("patchSize", { type: "number", enum: Enums_mjs_1.terrainPatchSizeEnum, default: Enums_mjs_1.terrainPatchSizeEnumDefault, });
    Terrain.attributes.add("height", { type: "number", default: 10, min: 1, });
    Terrain.attributes.add("compressAlgoritm", { type: "string", enum: Enums_mjs_1.terrainHeightsCompressAlgoritm, default: Enums_mjs_1.terrainHeightsCompressAlgoritmDefault, });
    Terrain.attributes.add("layer", { type: "string", default: 'TerrainEditor', });
    Terrain.attributes.add("cameraEntity", { type: "entity" });
    Terrain.attributes.add("autoRender", { type: "boolean", default: true, });
    Terrain.attributes.add("painting", { type: "boolean", default: false, });
    Terrain.attributes.add("wireframe", { type: "boolean", default: false, });
    Terrain.attributes.add("heightMap", {
        type: 'json',
        schema: [
            {
                name: 'file',
                type: 'asset',
                assetType: 'binary',
            },
            {
                name: 'texture',
                type: "asset",
                assetType: 'texture',
            },
            {
                name: 'smoothFactor',
                description: `
                To what extent neighbors influence the new height:
                Value of 0 will ignore neighbors (no smoothing).
                Value of 1 will ignore the node old height.
            `,
                type: "number",
                default: 1,
                min: 0,
                max: 1,
            },
            {
                name: 'smoothRadius',
                description: `The radius of factor smooth.`,
                type: "number",
                default: 1,
                step: 1,
                min: 1,
            }
        ]
    });
    Terrain.attributes.add("brush", {
        type: "json",
        schema: [
            {
                name: "active",
                description: "The brush texture index.",
                type: "number",
                default: 0,
                min: 0,
                step: 1,
                precision: 0,
            },
            {
                name: "size",
                description: "The brush size",
                type: "number",
                default: 10,
                min: brushMinSize,
                max: brushMaxSize,
                step: 1,
                precision: 0,
            },
            {
                name: "opacity",
                description: "The brush opacity",
                type: "number",
                default: 0.5,
                min: 0,
                max: 1,
            },
            {
                name: "textures",
                description: "The brush textures",
                type: "asset",
                assetType: 'texture',
                array: true,
            }
        ]
    });
    Terrain.attributes.add("activeLayer", { type: 'number', default: 0, min: 0, max: 32, step: 1, precision: 0, });
    Terrain.attributes.add("layers", {
        type: "json",
        array: true,
        schema: [
            {
                name: "name",
                title: "Name",
                type: "string",
            },
            {
                name: "diffuse",
                title: "Diffuse",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "normalMap",
                title: "Normal Map",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "size",
                title: "Size",
                type: "vec2",
                default: [1, 1]
            },
            {
                name: "offset",
                title: "Offset",
                type: "vec2",
                default: [0, 0]
            },
        ]
    });
    Terrain.attributes.add("painterSettings", {
        type: "json",
        schema: [
            {
                name: "splatMap",
                type: "asset",
                assetType: "texture",
                title: "Splat Map",
            },
        ]
    });
});
define("src/Scripts/GrassField", ["require", "exports", "src/GrassFieldHelpers/GrassFieldTexture", "src/GrassFieldHelpers/GrassShaderChunk", "src/Shared/Debug", "src/Shared/Random", "src/TerrainHelpers/TerrainPatches", "src/TerrainHelpers/TerrainPatchesShaderChunks", "src/Scripts/Terrain"], function (require, exports, GrassFieldTexture_mjs_1, GrassShaderChunk_mjs_1, Debug_mjs_2, Random_mjs_1, TerrainPatches_mjs_2, TerrainPatchesShaderChunks_mjs_5, Terrain_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.grassFieldScriptName = exports.GrassField = exports.quadMatrixIndexes = exports.quad2Matrix = exports.quad1Matrix = void 0;
    Random_mjs_1 = __importDefault(Random_mjs_1);
    Terrain_mjs_2 = __importDefault(Terrain_mjs_2);
    exports.quad1Matrix = [
        2, 2, 1, 2, 0, 2,
        0, 1, 0, 0, 1, 0,
        2, 0, 2, 1, 1, 1
    ];
    exports.quad2Matrix = [
        4, 4, 3, 4, 2, 4, 1, 4,
        0, 4, 0, 3, 0, 2, 0, 1,
        0, 0, 1, 0, 2, 0, 3, 0,
        4, 0, 4, 1, 4, 2, 4, 3
    ];
    exports.quadMatrixIndexes = [
        [4, 3, 2], // 0
        [5, 8, 1], // 1
        [6, 7, 0], // 2
    ];
    const lod1QuadCount = 8;
    const lod2QuadCount = 16;
    const tmpMat = new pc.Mat4();
    class GrassField extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this.transitionLow = 0.31;
            this.transitionHigh = 0.36;
            this._bufferStore = {};
            this._time = 0;
            this._lastDrawPos = new pc.Vec3();
            this._lod1MinMaxStore = [];
            this._lod2MinMaxStore = [];
            this._offsetLod1Arr = [
                0, 0, 0, 0,
                0, 0, 0, 0,
                0, 0, 0, 0,
                0, 0, 0, 0,
            ];
            this._offsetLod2Arr = [
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
            ];
        }
        get checkRadius() { return this.radius / 2; }
        get patchRadius() { return this.radius / 2; }
        destroy() {
            var _a, _b, _c, _d, _e;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._sharedVertexBuffer) === null || _b === void 0 ? void 0 : _b.destroy();
            (_c = this._sharedInstancingBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
            if (this._meshInst) {
                (_e = (_d = this._meshInst.instancingData) === null || _d === void 0 ? void 0 : _d.vertexBuffer) === null || _e === void 0 ? void 0 : _e.destroy();
                this._meshInst.destroy();
                if (this._meshInst.mesh) {
                    this._meshInst.mesh.destroy();
                }
                if (this._material) {
                    this._material.destroy();
                }
            }
            if (this.entity.render) {
                this.entity.render.meshInstances = [];
            }
        }
        _initBladesAndEditMode() {
            this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius);
            if (this.painting) {
                this._terrain.addLock();
            }
        }
        postInitialize() {
            var _a;
            const terrainEntity = this.entity.root.findByName('Terrain');
            const terrainScript = (_a = terrainEntity.script) === null || _a === void 0 ? void 0 : _a.get(Terrain_mjs_2.default);
            this._terrain = terrainScript;
            this._cameraEntity = terrainScript.cameraEntity;
            this._dataTexture = new GrassFieldTexture_mjs_1.GrassFieldTexture(this.app.graphicsDevice, this._terrain.width, this._terrain.depth);
            this._initBladesAndEditMode();
            this.on('enable', () => this._initBladesAndEditMode());
            this.on('disable', () => {
                this.destroy();
                this._terrain.freeLock();
            });
            this.on('attr:painting', () => {
                if (this.painting) {
                    this._terrain.addLock();
                }
                else {
                    this._terrain.freeLock();
                }
            });
            this.on('attr:wireframe', () => {
                var _a, _b;
                const primitive = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.mesh) === null || _b === void 0 ? void 0 : _b.primitive;
                if (primitive && primitive[0]) {
                    primitive[0].type = this.wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                }
            });
            this.on('attr:castShadow', () => {
                this._meshInst.castShadow = this.castShadow;
            });
            this.on('attr:receiveShadow', () => {
                this._meshInst.receiveShadow = this.receiveShadow;
            });
            this.on('attr:seed', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:numBlades', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:bladeWidth', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:bladeMinHeight', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:bladeMaxHeight', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:radius', () => this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:lod0BladeSegs', () => this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:lod1BladeSegs', () => this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius));
        }
        update(dt) {
            const cameraPos = this._cameraEntity.getPosition();
            const existsTexs = !!this.textures && this.textures.length > 0;
            const color = existsTexs ? this.textures[0].color : pc.Color.WHITE;
            const rand = existsTexs ? this.textures[0].colorRandom : pc.Vec3.ZERO;
            const tex = existsTexs ? this.textures[0].diffuse.resource : null;
            if (!this.freezeDrawPos) {
                const mat = this.entity.getWorldTransform();
                tmpMat.invert(mat);
                tmpMat.transformPoint(cameraPos, this._lastDrawPos);
            }
            this._time += dt;
            this._material.setParameter(GrassShaderChunk_mjs_1.timeParamName, this._time);
            this._material.setParameter(GrassShaderChunk_mjs_1.windIntensityParamName, this.windIntensity);
            this._material.setParameter(GrassShaderChunk_mjs_1.drawPosParamName, [this._lastDrawPos.x, this._lastDrawPos.y, this._lastDrawPos.z]);
            this._material.setParameter('uDiffuseColor', [color.r, color.g, color.b]);
            this._material.setParameter('uDiffuseColorRandom', [rand.x, rand.y, rand.z]);
            this._material.setParameter('uDiffuseTex', tex);
            this._frustum(cameraPos, this._cameraEntity.camera.camera, this.freezeDrawPos);
        }
        updateAabb() {
            const patchesAabb = this._terrain.renderPreparer.patchesStore.aabb;
            if (this._meshInst) {
                this._meshInst.mesh.aabb = patchesAabb;
                this._meshInst.aabb = patchesAabb;
                this._meshInst.setCustomAabb(patchesAabb);
            }
        }
        _frustumHelper(count, quadMatrix, quadOffset, minMaxStore, offsetArr, inverse, cameraPos, camera, freeze) {
            const scale = this.entity.getScale();
            const terrainScale = this._terrain.entity.getScale();
            const checkRadius = this.checkRadius * Math.max(scale.x, scale.z);
            const maxHeight = this._terrain.object.maxHeight * terrainScale.y;
            const frustumPlanes = camera.frustum.planes;
            const checkIsVisible = (min, max) => {
                for (let p = 0; p < 6; p++) {
                    const frustumPlane = frustumPlanes[p];
                    const d = Math.max(min.x * frustumPlane[0], max.x * frustumPlane[0])
                        + Math.max(min.y * frustumPlane[1], max.y * frustumPlane[1])
                        + Math.max(min.z * frustumPlane[2], max.z * frustumPlane[2])
                        + frustumPlane[3];
                    if (d <= 0) {
                        return false;
                    }
                }
                return true;
            };
            let visibleCount = 0;
            for (let i = 0; i < count; i++) {
                if (!minMaxStore[i])
                    minMaxStore[i] = [new pc.Vec3(), new pc.Vec3(), false];
                if (!freeze) {
                    const quadMatrixX = quadMatrix[i * 2 + 0];
                    const quadMatrixZ = quadMatrix[i * 2 + 1];
                    const localCenterX = this.radius * (quadMatrixX - quadOffset);
                    const localCenterZ = this.radius * (quadMatrixZ - quadOffset);
                    const worldCenterX = cameraPos.x + localCenterX * scale.x;
                    const worldCenterZ = cameraPos.z + localCenterZ * scale.z;
                    minMaxStore[i][0].set(worldCenterX - checkRadius, 0, worldCenterZ - checkRadius);
                    minMaxStore[i][1].set(worldCenterX + checkRadius, maxHeight, worldCenterZ + checkRadius);
                    const visible = checkIsVisible(minMaxStore[i][0], minMaxStore[i][1]);
                    if (visible) {
                        offsetArr[visibleCount * 2 + 0] = localCenterX;
                        offsetArr[visibleCount * 2 + 1] = localCenterZ;
                    }
                    minMaxStore[i][2] = visible;
                }
                const min = minMaxStore[i][0];
                const max = minMaxStore[i][1];
                const vis = minMaxStore[i][2];
                if (freeze) {
                    (0, Debug_mjs_2.drawBox)({ min, max, color: vis ? pc.Color.GREEN : pc.Color.RED });
                }
                visibleCount += Number(vis);
            }
            if (!freeze && inverse && visibleCount > 0) {
                const hiddenCount = count - visibleCount;
                for (let i = visibleCount; i > -1; i--) {
                    const indexIn = (hiddenCount + i) * 2;
                    const indexOr = i * 2;
                    offsetArr[indexIn + 0] = offsetArr[indexOr + 0];
                    offsetArr[indexIn + 1] = offsetArr[indexOr + 1];
                }
            }
            return visibleCount;
        }
        _frustum(cameraPos, camera, freeze) {
            var _a;
            const visibleLod1Count = this._frustumHelper(lod1QuadCount, exports.quad1Matrix, 1, this._lod1MinMaxStore, this._offsetLod1Arr, false, cameraPos, camera, freeze);
            const visibleLod2Count = this._frustumHelper(lod2QuadCount, exports.quad2Matrix, 2, this._lod2MinMaxStore, this._offsetLod2Arr, true, cameraPos, camera, freeze);
            const meshInst = this._meshInst;
            const mesh = meshInst.mesh;
            const primitive = mesh.primitive[0];
            const base = this.lod2BladeSegs * 12 * (lod2QuadCount - visibleLod2Count);
            const count = this.lod0BladeSegs * 12
                + this.lod1BladeSegs * 12 * visibleLod1Count
                + this.lod2BladeSegs * 12 * visibleLod2Count;
            meshInst.setParameter(`${GrassShaderChunk_mjs_1.lod1OffsetXZParamName}[0]`, this._offsetLod1Arr);
            meshInst.setParameter(`${GrassShaderChunk_mjs_1.lod2OffsetXZParamName}[0]`, this._offsetLod2Arr);
            // always true for lod 0
            meshInst.visible = this.autoRender || freeze;
            meshInst.visibleThisFrame = this.autoRender || freeze;
            primitive.base = base;
            primitive.count = count;
            if ((_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.wasReleased(pc.KEY_V)) {
                console.log(visibleLod1Count);
                console.log(visibleLod2Count);
                console.log(this._offsetLod1Arr);
                console.log(this._offsetLod2Arr);
            }
        }
        _updateGrassMesh(graphicsDevice, radius) {
            this._updateMeshBuffers(graphicsDevice);
            this._updateMeshMaterial(graphicsDevice);
            this._updateMeshInstance(graphicsDevice);
            this._updateMeshInstancing(graphicsDevice, radius);
            this.updateAabb();
            const meshInstances = [this._meshInst];
            if (this.entity.render) {
                this.entity.render.meshInstances = meshInstances;
            }
            else {
                this.entity.addComponent('render', {
                    meshInstances: meshInstances,
                    castShadows: this.castShadow,
                    receiveShadows: this.receiveShadow,
                    cull: false,
                });
            }
            this._meshInst.castShadow = this.castShadow;
            this._meshInst.receiveShadow = this.receiveShadow;
        }
        _updateMeshInstancing(graphicsDevice, radius) {
            var _a, _b, _c;
            if (this._meshInst) {
                this._updateInstancingBuffer(graphicsDevice, radius);
                (_c = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.instancingData) === null || _b === void 0 ? void 0 : _b.vertexBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
                this._meshInst.setInstancing(this._sharedInstancingBuffer);
            }
        }
        _updateMeshInstance(graphicsDevice) {
            var _a, _b, _c, _d;
            (_c = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.instancingData) === null || _b === void 0 ? void 0 : _b.vertexBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
            (_d = this._meshInst) === null || _d === void 0 ? void 0 : _d.destroy();
            const mesh = new pc.Mesh(graphicsDevice);
            const primitive = mesh.primitive[0];
            mesh.indexBuffer[0] = this._sharedIndexBuffer;
            mesh.vertexBuffer = this._sharedVertexBuffer;
            primitive.type = this.wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
            primitive.base = 0;
            primitive.count = this._bufferStore.index.length;
            primitive.indexed = true;
            this._meshInst = new pc.MeshInstance(mesh, this._material, this.entity);
        }
        /**
        * Sets up indices for single blade mesh.
        * @param id array of indices
        * @param vc1 vertex start offset for front side of blade
        * @param vc2 vertex start offset for back side of blade
        * @param i index offset
        */
        _initBladeIndices(id, vc1, vc2, i, bladeSegs) {
            let seg;
            // blade front side
            for (seg = 0; seg < bladeSegs; ++seg) {
                id[i++] = vc1 + 0; // tri 1
                id[i++] = vc1 + 1;
                id[i++] = vc1 + 2;
                id[i++] = vc1 + 2; // tri 2
                id[i++] = vc1 + 1;
                id[i++] = vc1 + 3;
                vc1 += 2;
            }
            // blade back side
            for (seg = 0; seg < bladeSegs; ++seg) {
                id[i++] = vc2 + 2; // tri 1
                id[i++] = vc2 + 1;
                id[i++] = vc2 + 0;
                id[i++] = vc2 + 3; // tri 2
                id[i++] = vc2 + 1;
                id[i++] = vc2 + 2;
                vc2 += 2;
            }
            return i;
        }
        /** Set up indices for 1 blade */
        _initBladeIndexVerts(vindex) {
            for (let i = 0; i < vindex.length; ++i) {
                vindex[i] = i;
            }
        }
        _initBladeOffsetShapeVerts(offsetShape, radius, numBlades) {
            const normalizeValue = offsetShape instanceof Uint16Array ? pc.FloatPacking.float2Half : (x) => x;
            const random = new Random_mjs_1.default(this.seed);
            const heightFactor = this.bladeMaxHeight - this.bladeMinHeight;
            //let noise = 0;
            for (let i = 0; i < numBlades; ++i) {
                //noise = Math.abs(simplex(offsetShape[i * 8 + 0] * 0.03, offsetShape[i * 8 + 2] * 0.03));
                //noise = noise * noise * noise;
                //noise *= 5.0;
                const x = random.nrand() * radius;
                const y = random.nrand() * radius;
                const z = 0;
                const rotation = Math.PI * 2.0 * random.random();
                const width = this.bladeWidth + random.random() * this.bladeWidth * 0.5;
                const height = this.bladeMinHeight + Math.pow(random.random(), 4.0) * heightFactor;
                const lean = 0.01 + random.random() * 0.3;
                const curve = 0.05 + random.random() * 0.3;
                offsetShape[i * 8 + 0] = normalizeValue(x); // x
                offsetShape[i * 8 + 1] = normalizeValue(y); // y
                offsetShape[i * 8 + 2] = normalizeValue(z); // z
                offsetShape[i * 8 + 3] = normalizeValue(rotation); // rot
                offsetShape[i * 8 + 4] = normalizeValue(width); // width
                offsetShape[i * 8 + 5] = normalizeValue(height); //+ noise; //+ height
                offsetShape[i * 8 + 6] = normalizeValue(lean); // lean
                offsetShape[i * 8 + 7] = normalizeValue(curve); // curve
            }
        }
        _updateInstancingBuffer(graphicsDevice, radius) {
            var _a;
            (_a = this._sharedInstancingBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            const lod0PatchCount = 1;
            const lod1PatchCount = 8;
            const lod2PatchCount = 16;
            const patchNumBlades = (this.numBlades / (lod0PatchCount + lod1PatchCount + lod2PatchCount)) | 0;
            const offsetAndShapeLength = patchNumBlades * 8;
            if (this._bufferStore.offsetAndShape === undefined ||
                this._bufferStore.offsetAndShape.length !== offsetAndShapeLength) {
                this._bufferStore.offsetAndShape = new Float32Array(offsetAndShapeLength);
            }
            this._initBladeOffsetShapeVerts(this._bufferStore.offsetAndShape, radius, patchNumBlades);
            const type = this._bufferStore.offsetAndShape instanceof Uint16Array ? pc.TYPE_FLOAT16 : pc.TYPE_FLOAT32;
            const instancingFormat = new pc.VertexFormat(graphicsDevice, [
                {
                    semantic: pc.SEMANTIC_ATTR10,
                    components: 4,
                    type: type,
                    normalize: false,
                    asInt: false
                },
                {
                    semantic: pc.SEMANTIC_ATTR11,
                    components: 4,
                    type: type,
                    normalize: false,
                    asInt: false,
                },
            ]);
            this._sharedInstancingBuffer = new pc.VertexBuffer(graphicsDevice, instancingFormat, patchNumBlades, {
                usage: pc.BUFFER_STATIC,
                data: this._bufferStore.offsetAndShape,
                storage: false,
            });
        }
        _getVertexFormat(graphicsDevice) {
            return new pc.VertexFormat(graphicsDevice, [{
                    semantic: pc.SEMANTIC_POSITION,
                    components: 1,
                    type: pc.TYPE_FLOAT32,
                    normalize: false,
                    asInt: false
                }]);
        }
        _updateMeshBuffers(graphicsDevice) {
            var _a, _b;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._sharedVertexBuffer) === null || _b === void 0 ? void 0 : _b.destroy();
            const lod0VC = (this.lod0BladeSegs + 1) * 2;
            const lod1VC = (this.lod1BladeSegs + 1) * 2;
            const lod2VC = (this.lod2BladeSegs + 1) * 2;
            const indexLength = this.lod0BladeSegs * 12 + this.lod1BladeSegs * 12 * lod1QuadCount + this.lod2BladeSegs * 12 * lod2QuadCount;
            const indexVertsLength = lod0VC * 2 + lod1VC * 2 * lod1QuadCount + lod2VC * 2 * lod2QuadCount;
            if (this._bufferStore.index === undefined ||
                this._bufferStore.index.length !== indexLength) {
                this._bufferStore.index = new Uint16Array(indexLength);
                let index = 0;
                for (let i = 0; i < lod2QuadCount; i++) {
                    const lod2VC1 = i * lod2VC * 2;
                    const lod2VC2 = lod2VC1 + lod2VC;
                    index = this._initBladeIndices(this._bufferStore.index, lod2VC1, lod2VC2, index, this.lod2BladeSegs);
                }
                const lod0VC1 = lod2QuadCount * lod2VC * 2;
                const lod0VC2 = lod0VC1 + lod0VC;
                index = this._initBladeIndices(this._bufferStore.index, lod0VC1, lod0VC2, index, this.lod0BladeSegs);
                for (let i = 0; i < lod1QuadCount; i++) {
                    const lod1VC1 = lod0VC2 + lod0VC + i * lod1VC * 2;
                    const lod1VC2 = lod1VC1 + lod1VC;
                    index = this._initBladeIndices(this._bufferStore.index, lod1VC1, lod1VC2, index, this.lod1BladeSegs);
                }
            }
            if (this._bufferStore.indexVerts === undefined ||
                this._bufferStore.indexVerts.length !== indexVertsLength) {
                this._bufferStore.indexVerts = new Float32Array(indexVertsLength);
                this._initBladeIndexVerts(this._bufferStore.indexVerts);
            }
            this._sharedIndexBuffer = new pc.IndexBuffer(graphicsDevice, pc.INDEXFORMAT_UINT16, this._bufferStore.index.length, pc.BUFFER_STATIC, this._bufferStore.index, { storage: false });
            this._sharedVertexBuffer = new pc.VertexBuffer(graphicsDevice, this._getVertexFormat(graphicsDevice), this._bufferStore.indexVerts.length, {
                usage: pc.BUFFER_STATIC,
                data: this._bufferStore.indexVerts,
                storage: false,
            });
        }
        _updateMeshMaterial(graphicsDevice) {
            var _a;
            (_a = this._material) === null || _a === void 0 ? void 0 : _a.destroy();
            this._material = new pc.StandardMaterial();
            this._material.name = "GrassFieldMaterial";
            /*
            this._material.depthTest = false;
            this._material.depthWrite = true;
            this._material.blendType = pc.BLEND_NONE;
            this._material.alphaTest = 0;
            this._material.alphaWrite = false;
            this._material.alphaFade = false;
            this._material.alphaToCoverage = false;
            */
            const terrain = this._terrain.object;
            const patches = this._terrain.renderPreparer.patchesStore;
            const heightMap = patches.heightMapTexture;
            const terrainScale = this._terrain.entity.getScale();
            this._material.setAttribute(GrassShaderChunk_mjs_1.vindexAttrName, pc.SEMANTIC_POSITION);
            this._material.setAttribute(GrassShaderChunk_mjs_1.offsetAttrName, pc.SEMANTIC_ATTR10);
            this._material.setAttribute(GrassShaderChunk_mjs_1.shapeAttrName, pc.SEMANTIC_ATTR11);
            this._material.setParameter('uDataMap', this._dataTexture.texture);
            this._material.setParameter(TerrainPatchesShaderChunks_mjs_5.terrainHeightMapParamName, heightMap);
            this._material.setParameter(GrassShaderChunk_mjs_1.terrainScaleParamName, [terrainScale.x, terrainScale.y, terrainScale.z]);
            this._material.setParameter(TerrainPatchesShaderChunks_mjs_5.terrainMaxHeightParamName, terrain.maxHeight);
            this._material.setParameter(`${GrassShaderChunk_mjs_1.lod1OffsetXZParamName}[0]`, this._offsetLod1Arr);
            this._material.setParameter(`${GrassShaderChunk_mjs_1.lod2OffsetXZParamName}[0]`, this._offsetLod2Arr);
            this._material.setParameter(GrassShaderChunk_mjs_1.drawPosParamName, [0, 0, 0]);
            this._material.setParameter(GrassShaderChunk_mjs_1.timeParamName, this._time);
            this._material.setParameter(GrassShaderChunk_mjs_1.windIntensityParamName, 0);
            const hmFormat = (0, TerrainPatches_mjs_2.getHeightMapFormat)(graphicsDevice, terrain.heightMap);
            const chunks = (0, GrassShaderChunk_mjs_1.getGrassShaderChunks)({
                width: terrain.width,
                depth: terrain.depth,
                heightMapChunkSize: terrain.heightMap.dataChunkSize,
                heightMapFormat: hmFormat,
                bladeMaxHeight: this.bladeMaxHeight * 1.5,
                lod0BladeSegs: this.lod0BladeSegs,
                lod1BladeSegs: this.lod1BladeSegs,
                lod2BladeSegs: this.lod2BladeSegs,
                radius: this.radius,
                transitionLow: this.transitionLow,
                transitionHigh: this.transitionHigh,
                engineVersion: `v${pc.version[0]}`,
            });
            const chunkNames = Object.keys(chunks);
            for (let chunkName of chunkNames) {
                // @ts-ignore
                this._material.chunks[chunkName] = chunks[chunkName];
            }
            // @ts-ignore
            this._material.chunks.APIVersion = pc.CHUNKAPI_1_70;
            this._material.update();
        }
    }
    exports.GrassField = GrassField;
    exports.default = GrassField;
    exports.grassFieldScriptName = "grassField";
    pc.registerScript(GrassField, exports.grassFieldScriptName);
    GrassField.attributes.add("painting", { type: "boolean", default: false });
    GrassField.attributes.add("castShadow", { type: "boolean", default: true, });
    GrassField.attributes.add("receiveShadow", { type: "boolean", default: true, });
    GrassField.attributes.add("wireframe", { type: "boolean", default: false });
    GrassField.attributes.add("freezeDrawPos", { type: "boolean", default: false });
    GrassField.attributes.add("autoRender", { type: "boolean", default: true });
    GrassField.attributes.add("seed", { type: "number", default: 53464546455, min: 1, step: 1, precision: 0 });
    GrassField.attributes.add("windIntensity", { type: "number", default: 0, min: -30, max: 30 });
    GrassField.attributes.add("numBlades", { type: "number", default: 4000, min: 0, max: 8000000, step: 1, precision: 0 });
    GrassField.attributes.add("radius", { type: "number", default: 80, min: 1, max: 10000 });
    GrassField.attributes.add("lod0BladeSegs", { type: "number", default: 3, min: 1, max: 10, step: 1, precision: 0 });
    GrassField.attributes.add("lod1BladeSegs", { type: "number", default: 2, min: 1, max: 10, step: 1, precision: 0 });
    GrassField.attributes.add("lod2BladeSegs", { type: "number", default: 1, min: 1, max: 10, step: 1, precision: 0 });
    GrassField.attributes.add("bladeWidth", { type: "number", default: 0.04, min: 0.01, max: 5 });
    GrassField.attributes.add("bladeMinHeight", { type: "number", default: 0.25, min: 0.01, max: 10 });
    GrassField.attributes.add("bladeMaxHeight", { type: "number", default: 1, min: 0.01, max: 10 });
    GrassField.attributes.add("textures", {
        type: "json",
        array: true,
        schema: [
            {
                name: "name",
                title: "Name",
                type: "string",
            },
            {
                name: "diffuse",
                title: "Diffuse",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "color",
                title: "Color",
                type: "rgb"
            },
            {
                name: "colorRandom",
                title: "Color Random",
                type: "vec3",
                default: [0.01, 0.01, 0.01]
            }
        ]
    });
});
define("src/Scripts/TerrainCollider", ["require", "exports", "src/Scripts/Terrain"], function (require, exports, Terrain_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.terrainColliderScriptName = exports.TerrainCollider = void 0;
    class TerrainCollider extends pc.ScriptType {
        initialize() {
            var _a;
            const terrain = (_a = this.entity.script) === null || _a === void 0 ? void 0 : _a.get(Terrain_mjs_3.terrainScriptName);
            // TODO
        }
    }
    exports.TerrainCollider = TerrainCollider;
    exports.default = TerrainCollider;
    exports.terrainColliderScriptName = "terrainCollider";
    pc.registerScript(TerrainCollider, exports.terrainColliderScriptName);
});
define("src/TreeFieldHelpers/InstancedMesh", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.InstancedMesh = void 0;
    class InstancedMesh {
        constructor() {
            /**
             * Attribute storing indices of the instances to be rendered.
             */
            this.instanceIndex = null;
            this._count = 0;
            this._capacity = 0;
        }
        _initIndexAttribute() {
            if (!this._graphicsDevice) {
                this._count = 0;
                return;
            }
            const capacity = this._capacity;
            const array = new Uint32Array(capacity);
            for (let i = 0; i < capacity; i++) {
                array[i] = i;
            }
            this.instanceIndex = new pc.VertexFormat(this._graphicsDevice, [{
                    semantic: pc.SEMANTIC_ATTR10,
                    components: 1,
                    type: pc.TYPE_UINT32,
                    normalize: false,
                    asInt: true
                }]);
        }
    }
    exports.InstancedMesh = InstancedMesh;
});
define("src/TreeFieldHelpers/TreeField", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TreeField = exports.A = void 0;
    class A {
    }
    exports.A = A;
    class TreeField {
        constructor() {
        }
        addTree(x, z, angle, height) {
        }
        removeTree(index) {
        }
    }
    exports.TreeField = TreeField;
});
;
(() => {
    if (window.___amd___requireResolver) {
        window.___amd___requireResolver();
    }
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVycmFpbi1zeXN0ZW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zYXNyYy9yZXF1cmVkU3RhcnQuanMiLCIuLi8uLi9zcmMvU2hhcmVkL1R5cGVzLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL0lab25lLm10cyIsIi4uLy4uL3NyYy9TaGFyZWQvQ29tcHJlc3Nvci5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9BYnNIZWlnaHRNYXBGaWxlSU8ubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vQWJzSGVpZ2h0TWFwLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL0hlaWdodE1hcC5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9BYnNQYXRjaGVkSGVpZ2h0TWFwLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL0NvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwLm10cyIsIi4uLy4uL3NyYy9BbW1vSW50ZWdyYXRpb24vQW1tb0ludGVncmF0aW9uLm10cyIsIi4uLy4uL3NyYy9FbmdpbmVFeHRlbnNpb25zL1JlbmRlcmVyLm10cyIsIi4uLy4uL3NyYy9HcmFzc0ZpZWxkSGVscGVycy9HcmFzc0ZpZWxkVGV4dHVyZS5tdHMiLCIuLi8uLi9zcmMvU2hhcmVkL1V0aWxzLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlc1NoYWRlckNodW5rcy5tdHMiLCIuLi8uLi9zcmMvR3Jhc3NGaWVsZEhlbHBlcnMvR3Jhc3NTaGFkZXJDaHVuay5tdHMiLCIuLi8uLi9zcmMvR3Jhc3NGaWVsZEhlbHBlcnMvc2ltcGxleC5tdHMiLCIuLi8uLi9zcmMvU2NyaXB0cy9GbHlDYW1lcmEubXRzIiwiLi4vLi4vc3JjL1NjcmlwdHMvRnBzQ291bnRlci5tdHMiLCIuLi8uLi9zcmMvU2hhcmVkL0RlYnVnLm10cyIsIi4uLy4uL3NyYy9TaGFyZWQvUmFuZG9tLm10cyIsIi4uLy4uL3NyYy9TaGFyZWQvU3RvcmUyRC5tdHMiLCIuLi8uLi9zcmMvU2hhcmVkL1ZlY3RvcjNNYXRoLm10cyIsIi4uLy4uL3NyYy9TaGFyZWQvVmVjdG9yMk1hdGgubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vTG9kTWFuYWdlci5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9Db29yZHNCdWZmZXIubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vTG9kSW5mby5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9HcmlkQnVpbGRlci5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9HZW9taXBHcmlkQnVpbGRlci5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9HZW9taXBHcmlkUmVuZGVyUHJlcGFyZXIubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vR2VvbWlwR3JpZC5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9UZXJyYWluLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL0lQYXRjaC5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9JUGF0Y2hlc0luc3RhbmNpbmcubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL0lUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5QYXRjaGVzQmFzaWMubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vUGF0Y2hlc0NvbWJpbmVJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlc0NvbWJpbmVJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL1BhdGNoZXNJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5QYXRjaGVzLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL01pZHBvaW50RGlzcFRlcnJhaW4ubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vVGVycmFpblJheWNhc3RSZXN1bHQubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5SZW5kZXJQcmVwYXJlci5tdHMiLCIuLi8uLi9zcmMvVGVycmFpbkhlbHBlcnMvQnJ1c2gubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL0NvbG9yUGFpbnRlclNoYWRlcnMubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL0NvbG9yUGFpbnRlci5tdHMiLCIuLi8uLi9zcmMvU2hhcmVkL0VudW1Db252ZXJ0ZXIubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL0VudW1zLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL1RyaWFuZ2xlLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL0hlaWdodGZpZWxkU2hhcGUubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vUGF0Y2hlZEhlaWdodE1hcC5tdHMiLCIuLi8uLi9zcmMvU2hhcmVkL0ZydXN0dW0ubXRzIiwiLi4vLi4vc3JjL1NjcmlwdHMvVGVycmFpbi5tdHMiLCIuLi8uLi9zcmMvU2NyaXB0cy9HcmFzc0ZpZWxkLm10cyIsIi4uLy4uL3NyYy9TY3JpcHRzL1RlcnJhaW5Db2xsaWRlci5tdHMiLCIuLi8uLi9zcmMvVHJlZUZpZWxkSGVscGVycy9JbnN0YW5jZWRNZXNoLm10cyIsIi4uLy4uL3NyYy9UcmVlRmllbGRIZWxwZXJzL1RyZWVGaWVsZC5tdHMiLCIuLi8uLi9zenNyYy9yZXF1cmVkRmluaXNoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxDQUFDO0FBQUEsQ0FBQyxHQUFHLEVBQUU7SUFFTixNQUFNLElBQUksR0FBTyxFQUFFLENBQUM7SUFDcEIsTUFBTSxRQUFRLEdBQUcsRUFB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SUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7UUFDdEUsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztRQUN0RSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3RFLENBQUE7SUFFRCxNQUFNLENBQUMsR0FBRztRQUNULEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRTtRQUNwQixHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLENBQUMsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRTtRQUMzRSxHQUFHLEVBQUUsQ0FBQyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFO1FBQzNFLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRztRQUMzRSxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUc7UUFDM0UsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUUsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHO1FBQzNFLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHO1FBQzNFLENBQUMsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUU7UUFDM0UsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUMsR0FBRyxFQUFDLENBQUM7UUFDM0UsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUc7UUFDM0UsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUc7UUFDM0UsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUMsR0FBRyxFQUFDLEdBQUc7UUFDM0UsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUc7S0FDdkUsQ0FBQTtJQUVELDZFQUE2RTtJQUM3RSx3RUFBd0U7SUFDeEUsU0FBUyxJQUFJLENBQUUsSUFBWTtRQUMxQixJQUFJLElBQUksR0FBRyxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzFCLHFCQUFxQjtZQUNyQixJQUFJLElBQUksS0FBSyxDQUFBO1FBQ2QsQ0FBQztRQUVELElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3ZCLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO1lBQ2hCLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxDQUFBO1FBQ2xCLENBQUM7UUFFRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcs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LENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDdEMsb0RBQW9EO1FBQ3BELElBQUksRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUE7UUFDaEMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDWixFQUFFLEdBQUcsQ0FBQyxDQUFBO1FBQ1AsQ0FBQzthQUFNLENBQUM7WUFDUCxFQUFFLElBQUksRUFBRSxDQUFBO1lBQ1IsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUEsQ0FBRSxzQ0FBc0M7UUFDeEUsQ0FBQztRQUNELElBQUksRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUE7UUFDaEMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDWixFQUFFLEdBQUcsQ0FBQyxDQUFBO1FBQ1AsQ0FBQzthQUFNLENBQUM7WUFDUCxFQUFFLElBQUksRUFBRSxDQUFBO1lBQ1IsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUE7UUFDaEMsQ0FBQztRQUNELElBQUksRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUE7UUFDaEMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDWixFQUFFLEdBQUcsQ0FBQyxDQUFBO1FBQ1AsQ0FBQzthQUFNLENBQUM7WUFDUCxFQUFFLElBQUksRUFBRSxDQUFBO1lBQ1IsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUE7UUFDaEMsQ0FBQztRQUNELG1F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QUM7UUFFdkMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBRWQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBRW5DLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDN0IsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUU3QixLQUFLLElBQUksSUFBSSxDQUFDO1lBRWQsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM3QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7WUFFcEIsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDekMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQztZQUV6QyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDekIsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDekMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFFekMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBSSxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzFCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBRTFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUUxQixNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQztZQUMxQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQztZQUMxQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDOUIsQ0FBQztRQUVELEVBQUUsQ0FBQyxHQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVB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SyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxHQUFHLENBQUM7NEJBQ2xCLENBQUM7aUNBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxHQUFHLENBQUM7NEJBQ2xCLENBQUM7aUNBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxDQUFDLENBQUM7NEJBQ2hCLENBQUM7aUNBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxFQUFFLENBQUM7NEJBQ2pCLENBQUM7aUNBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxHQUFHLENBQUM7NEJBQ2xCLENBQUM7aUNBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxHQUFHLENBQUM7NEJBQ2xCLENBQUM7aUNBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxDQUFDLENBQUM7NEJBQ2hCLENBQUM7aUNBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxFQUFFLENBQUM7NEJBQ2pCLENBQUM7aUNBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxDQUFDLENBQUM7NEJBQ2hCLENBQUM7aUNBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxFQUFFLENBQUM7NEJBQ2pCLENBQUM7aUNBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0NBQ2hELE1BQU0sR0FBSSxJQUFBLHlCQUFRLEVBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dDQUNaLEtBQUssR0FBSyxHQUFHLENBQUM7NEJBQ2xCLENBQUM7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SUFDNUUsVUFBVSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUNoRixVQUFVLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQzVFLFVBQVUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDM0csVUFBVSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM5RixVQUFVLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDdkgsVUFBVSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDekYsVUFBVSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFB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RSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiOygoKSA9PiB7XHJcblxyXG5cdGNvbnN0IGRlZnMgICAgID0ge307XHJcblx0Y29uc3QgcmVzb2x2ZWQgPSB7fTtcclxuXHJcblx0Ly8gc2F2ZSBvcmlnaW5hbCBkZWZpbmUgYW5kIHJlcXVpcmVcclxuXHR3aW5kb3cuX19fYW1kX19fT3JpZ2luYWxEZWZpbmUgID0gd2luZG93LmRlZmluZTtcclxuXHR3aW5kb3cuX19fYW1kX19fT3JpZ2luYWxSZXF1aXJlID0gd2luZG93LnJlcXVpcmU7XHJcblxyXG5cdGlmICghd2luZG93LmRlZmluZSAmJiAhd2luZG93LnJlcXVpcmUpIHtcclxuXHJcblx0XHRjb25zdCBkZWZpbmUgPSAoaWQsIGRlcHMsIGZhY3RvcnkpID0+IHtcclxuXHJcblx0XHRcdGlmIChkZWZzW2lkXSkge1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignRHVwbGljYXRlIGRlZmluaXRpb24gZm9yICcgKyBpZCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGRlZnNbaWRdID0gW2RlcHMsIGZhY3RvcnldO1xyXG5cdFx0fVxyXG5cclxuXHRcdGRlZmluZS5hbWQgPSB7XHJcblx0XHRcdGJ1bmRsZTogdHJ1ZSwgICAvLyB0aGlzIGltcGxlbWVudGF0aW9uIHdvcmtzIG9ubHkgd2l0aCBidW5kbGVkIGFtZCBtb2R1bGVzXHJcblx0XHRcdGR5bmFtaWM6IGZhbHNlLCAvLyBkb2VzIG5vdCBzdXBwb3J0IGR5bmFtaWMgb3IgYXN5bmMgbG9hZGluZ1xyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCByZXF1aXJlID0gKGlkKSA9PiB7XHJcblxyXG5cdFx0XHRpZiAoaWQgPT09ICdyZXF1aXJlJykgcmV0dXJuIHJlcXVpcmU7XHJcblx0XHRcdGlmIChpZCA9PT0gJ2V4cG9ydHMnKSByZXR1cm4ge307XHJcblx0XHRcdGlmIChyZXNvbHZlZFtpZF0pICAgICByZXR1cm4gcmVzb2x2ZWRbaWRdO1xyXG5cclxuXHRcdFx0aWYgKCFkZWZzW2lkXSkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGRlZnMsIGlkKTtcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIGRlZmluaXRpb24gZm9yICcgKyBpZCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IG1vZHVsZUV4cG9ydHMgPSB7fTtcclxuXHRcdFx0Y29uc3QgZGVwcyAgICA9IGRlZnNbaWRdWzBdO1xyXG5cdFx0XHRjb25zdCBmYWN0b3J5ID0gZGVmc1tpZF1bMV07XHJcblx0XHRcdGNvbnN0IGFyZ3MgPSBkZXBzLm1hcChkZXAgPT4ge1xyXG5cclxuXHRcdFx0XHRpZiAoZGVwID09PSAnZXhwb3J0cycpIHtcclxuXHRcdFx0XHRcdHJldHVybiBtb2R1bGVFeHBvcnRzO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHJlcXVpcmUoZGVwKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRmYWN0b3J5LmFwcGx5KG51bGwsIGFyZ3MpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHJlc29sdmVkW2lkXSA9IG1vZHVsZUV4cG9ydHM7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHdpbmRvdy5kZWZpbmUgID0gZGVmaW5lO1xyXG5cdFx0d2luZG93LnJlcXVpcmUgPSByZXF1aXJlO1xyXG5cdH1cclxuXHJcblx0d2luZG93Ll9fX2FtZF9fX3JlcXVpcmVSZXNvbHZlciA9ICgpID0+IHtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGlkIGluIGRlZnMpIHtcclxuXHJcblx0XHRcdGlmIChkZWZzLmhhc093blByb3BlcnR5KGlkKSkge1xyXG5cclxuXHRcdFx0XHRjb25zdCBkZXBzID0gZGVmc1tpZF1bMF07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGRlcHMpIHtcclxuXHRcdFx0XHRcdGRlcHMubWFwKGRlcCA9PiB7XHJcblx0XHJcblx0XHRcdFx0XHRcdGlmIChkZXAgIT09ICdyZXF1aXJlJyAmJlxyXG5cdFx0XHRcdFx0XHRcdGRlcCAhPT0gJ2V4cG9ydHMnKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmICghcmVzb2x2ZWQuaGFzT3duUHJvcGVydHkoZGVwKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWlyZShkZXApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKCFkZWZzLmhhc093blByb3BlcnR5KGRlcCkgJiZcclxuXHRcdFx0XHRcdFx0XHRcdCFyZXNvbHZlZC5oYXNPd25Qcm9wZXJ0eShkZXApKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIGRlZmluZSAnJHtpZH0nIGRlcCBub3QgZm91bmQgJyR7ZGVwfSdgKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmVxdWlyZShpZCk7XHJcblxyXG5cdFx0XHRcdGRlbGV0ZSBkZWZzW2lkXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyByZXR1cm4gb3JpZ2luYWwgZGVmaW5lIGFuZCByZXF1aXJlXHJcblx0XHR3aW5kb3cuZGVmaW5lICA9IHdpbmRvdy5fX19hbWRfX19PcmlnaW5hbERlZmluZTtcclxuXHRcdHdpbmRvdy5yZXF1aXJlID0gd2luZG93Ll9fX2FtZF9fX09yaWdpbmFsUmVxdWlyZTtcclxuXHJcblx0XHQvLyBjbGVhclxyXG5cdFx0ZGVsZXRlIHdpbmRvdy5fX19hbWRfX19yZXF1aXJlUmVzb2x2ZXI7XHJcblx0XHRkZWxldGUgd2luZG93Ll9fX2FtZF9fX09yaWdpbmFsRGVmaW5lO1xyXG5cdFx0ZGVsZXRlIHdpbmRvdy5fX19hbWRfX19PcmlnaW5hbFJlcXVpcmU7XHJcblx0fTtcclxufSkoKTsiLCJleHBvcnQgdHlwZSBpbnQgPSBudW1iZXI7XHJcbmV4cG9ydCB0eXBlIHVuc2lnbmVkaW50ID0gbnVtYmVyO1xyXG5leHBvcnQgdHlwZSBmbG9hdCA9IG51bWJlcjtcclxuZXhwb3J0IHR5cGUgUmVmT2JqZWN0PFQgZXh0ZW5kcyBvYmplY3Q+ID0gVDtcclxuZXhwb3J0IHR5cGUgSVZlY3RvcjIgPSB7IHg6IGZsb2F0LCB5OiBmbG9hdCB9O1xyXG5leHBvcnQgdHlwZSBJVmVjdG9yMyA9IHsgeDogZmxvYXQsIHk6IGZsb2F0LCB6OiBmbG9hdCB9O1xyXG5leHBvcnQgdHlwZSBJVmVjdG9yNCA9IHsgeDogZmxvYXQsIHk6IGZsb2F0LCB6OiBmbG9hdCwgdzogZmxvYXQgfTtcclxuZXhwb3J0IHR5cGUgSU1hdHJpeDQgPSB7IGRhdGE6IEZsb2F0MzJBcnJheSB9OyIsImltcG9ydCB0eXBlIHsgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVpvbmUge1xyXG4gICAgbWluWDogaW50O1xyXG4gICAgbWF4WDogaW50O1xyXG4gICAgbWluWjogaW50O1xyXG4gICAgbWF4WjogaW50O1xyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcHJlc3NvciB7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2NvbmNhdENodW5rcyhjaHVua3M6IFVpbnQ4QXJyYXlbXSwgdG90YWxMZW5ndGg6IG51bWJlcikge1xyXG5cclxuICAgICAgICBsZXQgcG9zaXRpb24gPSAwO1xyXG5cclxuICAgICAgICAvLyBDb25jYXRlbmF0ZSBhbGwgVWludDhBcnJheSBjaHVua3MgaW50byBhIHNpbmdsZSBBcnJheUJ1ZmZlclxyXG4gICAgICAgIGNvbnN0IHJlc3VsdEJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KHRvdGFsTGVuZ3RoKTsgICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgY2h1bmtzKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdEJ1ZmZlci5zZXQoY2h1bmssIHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgcG9zaXRpb24gKz0gY2h1bmsubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdEJ1ZmZlci5idWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgX2dldFJlc3VsdChyZWFkZXI6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcjxhbnk+KSB7XHJcblxyXG4gICAgICAgIGxldCB0b3RhbExlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGNodW5rczogVWludDhBcnJheVtdID0gW107XHJcblxyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XHJcbiAgICAgICAgICAgIGlmIChkb25lKSBicmVhaztcclxuICAgICAgICAgICAgY2h1bmtzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICB0b3RhbExlbmd0aCArPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uY2F0Q2h1bmtzKGNodW5rcywgdG90YWxMZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgY29tcHJlc3NCdWZmZXIoYnVmZmVyOiBBcnJheUJ1ZmZlciwgZm9ybWF0OiBDb21wcmVzc2lvbkZvcm1hdCA9ICdnemlwJykge1xyXG5cclxuICAgICAgICBjb25zdCBjb21wcmVzc2VkU3RyZWFtID0gbmV3IENvbXByZXNzaW9uU3RyZWFtKGZvcm1hdCk7XHJcbiAgICAgICAgY29uc3Qgd3JpdGVyID0gY29tcHJlc3NlZFN0cmVhbS53cml0YWJsZS5nZXRXcml0ZXIoKTtcclxuICAgICAgICBcclxuICAgICAgICB3cml0ZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XHJcbiAgICAgICAgd3JpdGVyLmNsb3NlKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGNvbXByZXNzZWRTdHJlYW0ucmVhZGFibGUuZ2V0UmVhZGVyKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXN1bHQocmVhZGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGRlY29tcHJlc3NCdWZmZXIoYnVmZmVyOiBBcnJheUJ1ZmZlciwgZm9ybWF0OiBDb21wcmVzc2lvbkZvcm1hdCA9ICdnemlwJykge1xyXG5cclxuICAgICAgICBjb25zdCBkZWNvbXByZXNzZWRTdHJlYW0gPSBuZXcgRGVjb21wcmVzc2lvblN0cmVhbShmb3JtYXQpO1xyXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGRlY29tcHJlc3NlZFN0cmVhbS5yZWFkYWJsZS5nZXRSZWFkZXIoKTtcclxuICAgICAgICBjb25zdCB3cml0ZXIgPSBkZWNvbXByZXNzZWRTdHJlYW0ud3JpdGFibGUuZ2V0V3JpdGVyKCk7XHJcbiAgICBcclxuICAgICAgICAvLyBXcml0ZSB0aGUgY29tcHJlc3NlZCBidWZmZXIgdG8gdGhlIHdyaXRlclxyXG4gICAgICAgIHdyaXRlci53cml0ZShuZXcgVWludDhBcnJheShidWZmZXIpKTtcclxuICAgICAgICB3cml0ZXIuY2xvc2UoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3VsdChyZWFkZXIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IENvbXByZXNzb3IgZnJvbSBcIi4uL1NoYXJlZC9Db21wcmVzc29yLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IGZsb2F0LCBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSBBYnNIZWlnaHRNYXAgZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBJUmVhZG9ubHlBYnNIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNIZWlnaHRNYXAubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgaGVpZ2h0TWFwVmVyc2lvbiA9IDk5O1xyXG5leHBvcnQgY29uc3QgZmFjdG9yU2l6ZSA9IDM7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElIZWlnaHRNYXBGaWxlSW1wb3J0T3B0aW9ucyB7XHJcbiAgICBhZGFwdGl2ZVdpZHRoQW5kRGVwdGg/OiBib29sZWFuLFxyXG4gICAgYWRhcHRpdmVNYXhIZWlnaHQ/OiBib29sZWFuLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElJbXBvcnRGaWxlSGVhZGVyIHtcclxuICAgIHdpZHRoOiBpbnQsXHJcbiAgICBkZXB0aDogaW50LFxyXG4gICAgbWF4SGVpZ2h0OiBmbG9hdFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaGVpZ2h0TWFwRmlsZUNvbXByZXNzZWRGb3JtYXQ6IENvbXByZXNzaW9uRm9ybWF0ID0gJ2d6aXAnO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic0hlaWdodE1hcEZpbGVJTyB7XHJcblxyXG4gICAgcHJpdmF0ZSBfX3JlYWRIZWlnaHRGYWN0b3IodmlldzogRGF0YVZpZXcsIGhlYWRlclNpemU6IGludCwgd2lkdGg6IGludCwgeDogaW50LCB6OiBpbnQpIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB6ICogd2lkdGggKyB4O1xyXG4gICAgICAgIGNvbnN0IHIgPSB2aWV3LmdldFVpbnQ4KGhlYWRlclNpemUgKyBpbmRleCAqIGZhY3RvclNpemUgKyAwKTtcclxuICAgICAgICBjb25zdCBnID0gdmlldy5nZXRVaW50OChoZWFkZXJTaXplICsgaW5kZXggKiBmYWN0b3JTaXplICsgMSk7XHJcbiAgICAgICAgY29uc3QgYiA9IHZpZXcuZ2V0VWludDgoaGVhZGVyU2l6ZSArIGluZGV4ICogZmFjdG9yU2l6ZSArIDIpO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3Qgc2NhbGVkID0gKHIgPDwgMTYpIHwgKGcgPDwgOCkgfCBiO1xyXG4gICAgICAgIGNvbnN0IGZhY3RvciA9IHNjYWxlZCAvIDB4ZmZmZmZmO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmYWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfX3dyaXRlSGVpZ2h0RmFjdG9yKHZpZXc6IERhdGFWaWV3LCBoZWFkZXJTaXplOiBpbnQsIGhlaWdodE1hcDogSVJlYWRvbmx5QWJzSGVpZ2h0TWFwLCB4OiBpbnQsIHo6IGludCkge1xyXG5cclxuICAgICAgICBjb25zdCBpbmRleCAgPSB6ICogaGVpZ2h0TWFwLndpZHRoICsgeDtcclxuICAgICAgICBjb25zdCBmYWN0b3IgPSBoZWlnaHRNYXAuZ2V0RmFjdG9yKHgsIHopO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlZCA9IE1hdGguZmxvb3IoZmFjdG9yICogMHhmZmZmZmYpO1xyXG4gICAgICAgIGNvbnN0IHIgPSAoc2NhbGVkID4+IDE2KSAmIDB4ZmY7XHJcbiAgICAgICAgY29uc3QgZyA9IChzY2FsZWQgPj4gOCkgJiAweGZmO1xyXG4gICAgICAgIGNvbnN0IGIgPSAoc2NhbGVkICYgMHhmZik7XHJcblxyXG4gICAgICAgIHZpZXcuc2V0VWludDgoaGVhZGVyU2l6ZSArIGluZGV4ICogZmFjdG9yU2l6ZSArIDAsIHIpO1xyXG4gICAgICAgIHZpZXcuc2V0VWludDgoaGVhZGVyU2l6ZSArIGluZGV4ICogZmFjdG9yU2l6ZSArIDEsIGcpO1xyXG4gICAgICAgIHZpZXcuc2V0VWludDgoaGVhZGVyU2l6ZSArIGluZGV4ICogZmFjdG9yU2l6ZSArIDIsIGIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBfX2ltcG9ydEZyb21GaWxlKGhlaWdodE1hcDogQWJzSGVpZ2h0TWFwLCBidWZmZXI6IEFycmF5QnVmZmVyLCBvcHRpb25zPzogSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zKTogUHJvbWlzZTxJSW1wb3J0RmlsZUhlYWRlciB8IG51bGw+IHtcclxuXHJcbiAgICAgICAgLy8gVE9ETzpcclxuICAgICAgICAvLyBoZWFkZXIgdmVyc2lvbiA5OVxyXG4gICAgICAgIC8vIGhlYWRlckJ5dGVTaXplLCB2ZXJzaW9uLCB3aWR0aCwgZGVwdGgsIG1heEhlaWdodFxyXG5cclxuICAgICAgICBjb25zdCBuQnVmZmVyID0gYXdhaXQgQ29tcHJlc3Nvci5kZWNvbXByZXNzQnVmZmVyKGJ1ZmZlciwgaGVpZ2h0TWFwRmlsZUNvbXByZXNzZWRGb3JtYXQpO1xyXG4gICAgICAgIGNvbnN0IHZpZXcgICAgPSBuZXcgRGF0YVZpZXcobkJ1ZmZlcik7XHJcbiAgICAgICAgY29uc3QgdmVyc2lvbiA9IHZpZXcuZ2V0VWludDMyKDEsIHRydWUpO1xyXG5cclxuICAgICAgICBpZiAodmVyc2lvbiAhPT0gaGVpZ2h0TWFwVmVyc2lvbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0hlaWdodCBtYXAgdmVyc2lvbjogJWYgbm8gc3VwcG9ydC4nLCB2ZXJzaW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgY29uc3QgaGVhZGVyU2l6ZSA9IHZpZXcuZ2V0VWludDgoMCk7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggICAgICA9IHZpZXcuZ2V0VWludDMyKDUsIHRydWUpO1xyXG4gICAgICAgIGNvbnN0IGRlcHRoICAgICAgPSB2aWV3LmdldFVpbnQzMig5LCB0cnVlKTtcclxuICAgICAgICBjb25zdCBtYXhIZWlnaHQgID0gdmlldy5nZXRGbG9hdDMyKDEzLCB0cnVlKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGZpbmFsTWF4SGVpZ2h0ID0gb3B0aW9ucz8uYWRhcHRpdmVNYXhIZWlnaHQgPyBoZWlnaHRNYXAubWF4SGVpZ2h0IDogbWF4SGVpZ2h0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChoZWlnaHRNYXAud2lkdGggIT09IHdpZHRoIHx8XHJcbiAgICAgICAgICAgIGhlaWdodE1hcC5kZXB0aCAhPT0gZGVwdGggJiZcclxuICAgICAgICAgICAgb3B0aW9ucyAmJlxyXG4gICAgICAgICAgICBvcHRpb25zLmFkYXB0aXZlV2lkdGhBbmREZXB0aCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVE9ETzogaXRzIHdvcmsgZm9yIHhebiArIDEsIHpebiArIDFcclxuICAgICAgICAgICAgY29uc3QgZmFjdG9yWCA9ICh3aWR0aCAtIDEpIC8gKGhlaWdodE1hcC53aWR0aCAtIDEpO1xyXG4gICAgICAgICAgICBjb25zdCBmYWN0b3JaID0gKGRlcHRoIC0gMSkgLyAoaGVpZ2h0TWFwLmRlcHRoIC0gMSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IGRlcHRoOyB6ICs9IGZhY3RvclopIHtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4ICs9IGZhY3RvclgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogc21vb3RoIGZvciBoZWlnaHRNYXAgbW9yZSBpbXBvcnQgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IHRoaXMuX19yZWFkSGVpZ2h0RmFjdG9yKHZpZXcsIGhlYWRlclNpemUsIHdpZHRoLCB4IHwgMCwgeiB8IDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGZhY3RvciAqIGZpbmFsTWF4SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRNYXAuc2V0KHggLyBmYWN0b3JYLCB6IC8gZmFjdG9yWiwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgeiA9IDA7ICh6IDwgZGVwdGgpICYmICh6IDwgaGVpZ2h0TWFwLmRlcHRoKTsgeisrKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgKHggPCB3aWR0aCkgJiYgKHggPCBoZWlnaHRNYXAud2lkdGgpOyB4KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gdGhpcy5fX3JlYWRIZWlnaHRGYWN0b3IodmlldywgaGVhZGVyU2l6ZSwgd2lkdGgsIHgsIHopO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGZhY3RvciAqIGZpbmFsTWF4SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodE1hcC5zZXQoeCwgeiwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgIGRlcHRoLFxyXG4gICAgICAgICAgICBtYXhIZWlnaHRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9fZXhwb3J0VG9CdWZmZXIoaGVpZ2h0TWFwOiBBYnNIZWlnaHRNYXApIHtcclxuICAgIFxyXG4gICAgICAgIC8vIFRPRE86XHJcbiAgICAgICAgLy8gaGVhZGVyIHZlcnNpb24gOTlcclxuICAgICAgICAvLyBoZWFkZXJCeXRlU2l6ZSwgdmVyc2lvbiwgd2lkdGgsIGRlcHRoLCBtYXhIZWlnaHRcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGhlYWRlclNpemUgPSAxICsgNCArIDQgKyA0ICsgNDtcclxuICAgICAgICBjb25zdCBidWZmZXIgICAgID0gbmV3IEFycmF5QnVmZmVyKGhlYWRlclNpemUgKyBmYWN0b3JTaXplICogaGVpZ2h0TWFwLndpZHRoICogaGVpZ2h0TWFwLmRlcHRoKTtcclxuICAgICAgICBjb25zdCB2aWV3ICAgICAgID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XHJcbiAgICBcclxuICAgICAgICB2aWV3LnNldFVpbnQ4ICAoMCwgaGVhZGVyU2l6ZSk7XHJcbiAgICAgICAgdmlldy5zZXRVaW50MzIgKDEsIGhlaWdodE1hcFZlcnNpb24sIHRydWUpO1xyXG4gICAgICAgIHZpZXcuc2V0VWludDMyICg1LCBoZWlnaHRNYXAud2lkdGgsIHRydWUpO1xyXG4gICAgICAgIHZpZXcuc2V0VWludDMyICg5LCBoZWlnaHRNYXAuZGVwdGgsIHRydWUpO1xyXG4gICAgICAgIHZpZXcuc2V0RmxvYXQzMigxMywgaGVpZ2h0TWFwLm1heEhlaWdodCwgdHJ1ZSk7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IGhlaWdodE1hcC5kZXB0aDsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGhlaWdodE1hcC53aWR0aDsgeCsrKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fX3dyaXRlSGVpZ2h0RmFjdG9yKHZpZXcsIGhlYWRlclNpemUsIGhlaWdodE1hcCwgeCwgeik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBDb21wcmVzc29yLmNvbXByZXNzQnVmZmVyKGJ1ZmZlciwgaGVpZ2h0TWFwRmlsZUNvbXByZXNzZWRGb3JtYXQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBYnNIZWlnaHRNYXBGaWxlSU87IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IEFic0hlaWdodE1hcEZpbGVJTywgeyBJSGVpZ2h0TWFwRmlsZUltcG9ydE9wdGlvbnMgfSBmcm9tIFwiLi9BYnNIZWlnaHRNYXBGaWxlSU8ubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVpvbmUgfSBmcm9tIFwiLi9JWm9uZS5tanNcIjtcclxuXHJcbi8qKlxyXG4gKiBAdmFyaWFudCByZ2IgLSBmb3JtYXQgYnkgdWludDhbM10gdGV4dHVyZVxyXG4gKiBAdmFyaWFudCByMjNmIC0gZm9ybWF0IGJ5IGZsb2F0MzIgdGV4dHVyZVxyXG4gKiBAdmFyaWFudCByZ2JhIC0gZm9yYW10IGJ5IHVpbnQ4WzRdIHRleHR1cmVcclxuICogQHZhcmlhbnQgcmdiYVgyIC0gZm9ybWF0IGNvbXByZXNzZWQgYnkgMiBwYXRjaGVzIGJ5IHggY29vcmRpbmF0ZVxyXG4gKiBAdmFyaWFudCByZ2JhWDQgLSBmb3JtYXQgY29tcHJlc3NlZCBieSA0IHBhdGNoZXMgYnkgeCBjb29yZGluYXRlXHJcbiAqIEBzZWUgQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXBcclxuICovXHJcbmV4cG9ydCB0eXBlIFRIZWlnaHRNYXBGb3JtYXQgPSAncjMyZicgfCAncmdiYScgfCAncmdiYVgyJyB8ICdyZ2JhWDQnIHwgJ3JnYic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZWFkb25seUFic0hlaWdodE1hcCB7XHJcblxyXG4gICAgcmVhZG9ubHkgd2lkdGg6IGludDtcclxuICAgIHJlYWRvbmx5IGRlcHRoOiBpbnQ7XHJcblxyXG4gICAgcmVhZG9ubHkgbWF4SGVpZ2h0OiBmbG9hdDtcclxuXHJcbiAgICBnZXQoeDogaW50LCB6OiBpbnQpOiBmbG9hdDtcclxuICAgIGdldEZhY3Rvcih4OiBpbnQsIHo6IGludCk6IGZsb2F0O1xyXG4gICAgZ2V0SGVpZ2h0SW50ZXJwb2xhdGVkKHg6IGZsb2F0LCB6OiBmbG9hdCk6IGZsb2F0O1xyXG4gICAgdG9GaWxlKCk6IFByb21pc2U8QmxvYj47XHJcbiAgICB0b0NhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHRvQnVmZmVyKGJ1ZmZlcjogVWludDhBcnJheSB8IFVpbnQ4Q2xhbXBlZEFycmF5KTogdm9pZDtcclxuICAgIHRvSW1hZ2UodHlwZT86IHN0cmluZyB8IHVuZGVmaW5lZCwgcXVhbGl0eT86IGFueSk6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic0hlaWdodE1hcCBleHRlbmRzIEFic0hlaWdodE1hcEZpbGVJTyBpbXBsZW1lbnRzIElSZWFkb25seUFic0hlaWdodE1hcCwgSVpvbmUge1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCB3aWR0aDogaW50O1xyXG4gICAgcHVibGljIGFic3RyYWN0IGRlcHRoOiBpbnQ7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgbWF4SGVpZ2h0OiBmbG9hdDtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0KHg6IGludCwgejogaW50KTogZmxvYXQ7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3Qgc2V0KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpOiBmbG9hdDtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGYWN0b3IoeDogaW50LCB6OiBpbnQpOiBmbG9hdDtcclxuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWluWCA9IDA7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWluWiA9IDA7XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXQgbWF4WCgpIHsgcmV0dXJuIHRoaXMud2lkdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgbWF4WigpIHsgcmV0dXJuIHRoaXMuZGVwdGg7IH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SGVpZ2h0SW50ZXJwb2xhdGVkKHg6IGZsb2F0LCB6OiBmbG9hdCkge1xyXG5cclxuICAgICAgICBjb25zdCBpbnRYID0geCB8IDA7XHJcbiAgICAgICAgY29uc3QgaW50WiA9IHogfCAwO1xyXG4gICAgICAgIGNvbnN0IHgwejAgPSB0aGlzLmdldChpbnRYLCBpbnRaKTtcclxuXHJcbiAgICAgICAgaWYgKChpbnRYICsgMSA+PSB0aGlzLndpZHRoKSB8fFxyXG4gICAgICAgICAgICAoaW50WiArIDEgPj0gdGhpcy5kZXB0aCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHgwejA7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgY29uc3QgeDF6MCA9IHRoaXMuZ2V0KGludFggKyAxLCBpbnRaKTtcclxuICAgICAgICBjb25zdCB4MHoxID0gdGhpcy5nZXQoaW50WCwgICAgIGludFogKyAxKTtcclxuICAgICAgICBjb25zdCB4MXoxID0gdGhpcy5nZXQoaW50WCArIDEsIGludFogKyAxKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGZhY3RvclggPSB4IC0gaW50WDtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGludGVycG9sYXRlZEJvdHRvbSA9ICh4MXowIC0geDB6MCkgKiBmYWN0b3JYICsgeDB6MDtcclxuICAgICAgICBjb25zdCBpbnRlcnBvbGF0ZWRUb3AgICAgPSAoeDF6MSAtIHgwejEpICogZmFjdG9yWCArIHgwejE7XHJcbiAgICBcclxuICAgICAgICBjb25zdCBmYWN0b3JaID0geiAtIGludFo7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbmFsSGVpZ2h0ID0gKGludGVycG9sYXRlZFRvcCAtIGludGVycG9sYXRlZEJvdHRvbSkgKiBmYWN0b3JaICsgaW50ZXJwb2xhdGVkQm90dG9tO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGZpbmFsSGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBhcHBlbmQoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCk6IGZsb2F0O1xyXG5cclxuICAgIHB1YmxpYyBzdWJzdHJhY3QoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGVuZCh4LCB6LCAtdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBtdWx0aXBseSh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0LCBoZWlnaHRJZlplcm8/OiBmbG9hdCk6IGZsb2F0O1xyXG5cclxuICAgIHB1YmxpYyBkaXZpZGUoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCwgaGVpZ2h0SWZaZXJvOiBmbG9hdCA9IDApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseSh4LCB6LCAxIC8gdmFsdWUsIGhlaWdodElmWmVybyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGZyb21GaWxlKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIG9wdGlvbnM/OiBJSGVpZ2h0TWFwRmlsZUltcG9ydE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fX2ltcG9ydEZyb21GaWxlKHRoaXMsIGJ1ZmZlciwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHRvRmlsZSgpIHtcclxuICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCB0aGlzLl9fZXhwb3J0VG9CdWZmZXIodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtidWZmZXJdLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvQnVmZmVyKGJ1ZmZlcjogVWludDhBcnJheSB8IFVpbnQ4Q2xhbXBlZEFycmF5KTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IHdpZHRoICA9IHRoaXMud2lkdGg7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSAwOyB6IDwgdGhpcy5kZXB0aDsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGggICA9IHRoaXMuZ2V0KHgsIHopO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdiAgID0gaCAvIHRoaXMubWF4SGVpZ2h0ICogMjU1O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9zID0gKHggKyB6ICogd2lkdGgpICogNDtcclxuXHJcbiAgICAgICAgICAgICAgICBidWZmZXJbcG9zXSAgICAgPSB2O1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyW3BvcyArIDFdID0gdjtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlcltwb3MgKyAyXSA9IHY7XHJcbiAgICAgICAgICAgICAgICBidWZmZXJbcG9zICsgM10gPSAyNTU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvQ2FudmFzKCk6IEhUTUxDYW52YXNFbGVtZW50IHtcclxuXHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggID0gdGhpcy53aWR0aDtcclxuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmRlcHRoO1xyXG5cclxuICAgICAgICBjYW52YXMud2lkdGggID0gd2lkdGg7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICAgIGlmICghY3R4KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIGNyZWF0ZSBjYW52YXMgMmQgY29udGV4dCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICBjb25zdCBidWZmZXIgICAgPSBpbWFnZURhdGEuZGF0YTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnRvQnVmZmVyKGJ1ZmZlcik7XHJcbiAgICAgICAgY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xyXG5cclxuICAgICAgICByZXR1cm4gY2FudmFzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2F2ZSBoZWlnaHQgbWFwIHRvIGltYWdlIG9mIGJhc2U2NFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9JbWFnZSh0eXBlPzogc3RyaW5nIHwgdW5kZWZpbmVkLCBxdWFsaXR5PzogYW55KTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLnRvQ2FudmFzKCk7XHJcbiAgICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwodHlwZSwgcXVhbGl0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGhlaWdodCBtYXAgZnJvbSBpbWFnZVxyXG4gICAgICogQHBhcmFtIGltZyBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGZyb21JbWFnZShpbWc6IEltYWdlQml0bWFwKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1ZmZlcldpZHRoICA9IGltZy53aWR0aDtcclxuICAgICAgICBjb25zdCBidWZmZXJIZWlnaHQgPSBpbWcuaGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAoYnVmZmVyV2lkdGggJSAyICE9PSAwIHx8IGJ1ZmZlckhlaWdodCAlIDIgIT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFwIHNpemVzIG5vdCBkaXZpc2libGUgYnkgMiBhcmUgbm90IHN1cHBvcnRlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbnZhcyAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpITtcclxuXHJcbiAgICAgICAgY2FudmFzLndpZHRoICA9IGJ1ZmZlcldpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBidWZmZXJIZWlnaHQ7XHJcbiAgICBcclxuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWcsIDAsIDApO1xyXG5cclxuICAgICAgICBjb25zdCBpbWFnZURhdGEgICA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGJ1ZmZlcldpZHRoLCBidWZmZXJIZWlnaHQpO1xyXG4gICAgICAgIGNvbnN0IGltYWdlQnVmZmVyID0gaW1hZ2VEYXRhLmRhdGE7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heFNlZ21lbnRYID0gdGhpcy53aWR0aCAtIDE7XHJcbiAgICAgICAgY29uc3QgbWF4U2VnbWVudFogPSB0aGlzLmRlcHRoIC0gMTtcclxuICAgICAgICBjb25zdCBmYWN0b3JYICAgICA9IGJ1ZmZlcldpZHRoICAvIG1heFNlZ21lbnRYO1xyXG4gICAgICAgIGNvbnN0IGZhY3RvclogICAgID0gYnVmZmVySGVpZ2h0IC8gbWF4U2VnbWVudFo7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSAwOyB6IDwgdGhpcy5kZXB0aDsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKykge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgbm9ybWFsaXplWCA9IHggPT09IG1heFNlZ21lbnRYID8geCAtIDEgOiB4O1xyXG4gICAgICAgICAgICAgICAgbGV0IG5vcm1hbGl6ZVogPSB6ID09PSBtYXhTZWdtZW50WiA/IHogLSAxIDogejtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHRNYXBYID0gKG5vcm1hbGl6ZVggKiBmYWN0b3JYKSB8IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHRNYXBaID0gKG5vcm1hbGl6ZVogKiBmYWN0b3JaKSB8IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9zID0gKGhlaWdodE1hcFggKyBoZWlnaHRNYXBaICogYnVmZmVyV2lkdGgpICogNDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBpbWFnZUJ1ZmZlcltwb3NdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZyA9IGltYWdlQnVmZmVyW3BvcyArIDFdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYiA9IGltYWdlQnVmZmVyW3BvcyArIDJdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IGltYWdlQnVmZmVyW3BvcyArIDNdO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvZWZmICA9IChyICsgZyArIGIpIC8gMyAvIGE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBjb2VmZiAqIHRoaXMubWF4SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KHgsIHosIGhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBzbW9vdGhab25lKHpvbmU6IElab25lLCBucDogZmxvYXQsIHJhZGl1czogaW50KSB7XHJcblxyXG4gICAgICAgIGlmICh6b25lLm1heFggPCAwKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHpvbmUubWF4WiA8IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKG5wIDwgMCB8fCBucCA+IDEpIHJldHVybjtcclxuICAgICAgICBpZiAocmFkaXVzID09PSAwKSByYWRpdXMgPSAxO1xyXG5cclxuICAgICAgICBjb25zdCBtaW5YID0gTWF0aC5tYXgoem9uZS5taW5YLCAwKTtcclxuICAgICAgICBjb25zdCBtaW5aID0gTWF0aC5tYXgoem9uZS5taW5aLCAwKTtcclxuICAgICAgICBjb25zdCBtYXhYID0gTWF0aC5taW4oem9uZS5tYXhYLCB0aGlzLndpZHRoKTtcclxuICAgICAgICBjb25zdCBtYXhaID0gTWF0aC5taW4oem9uZS5tYXhaLCB0aGlzLmRlcHRoKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3AgPSAxIC0gbnA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHggPSBtaW5YOyB4IDwgbWF4WDsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB6ID0gbWluWjsgeiA8IG1heFo7IHorKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZIZWlnaHQgPSB0aGlzLmdldCh4LCB6KTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdXBkdEhlaWdodDtcclxuICAgICAgICAgICAgICAgIGxldCBuZWlnaE51bWJlciAgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5laWdoQXZlcmFnZSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcnggPSAtcmFkaXVzOyByeCA8PSByYWRpdXM7IHJ4KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcnogPSAtcmFkaXVzOyByeiA8PSByYWRpdXM7IHJ6KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyWCA9ICh4ICsgcngpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lclogPSAoeiArIHJ6KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbm5lclggPCAwIHx8IGlubmVyWCA+PSB0aGlzLndpZHRoKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyWiA8IDAgfHwgaW5uZXJaID49IHRoaXMuZGVwdGgpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gKGlubmVyWCA9PT0geCAmJiBpbm5lclogPT09IHopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHByZXZIZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5nZXQoaW5uZXJYLCBpbm5lclopO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hOdW1iZXIrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hBdmVyYWdlICs9IGhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbmVpZ2hBdmVyYWdlIC89IG5laWdoTnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgdXBkdEhlaWdodCA9IG5laWdoQXZlcmFnZSAqIG5wICsgcHJldkhlaWdodCAqIGNwO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KHgsIHosIHVwZHRIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzbW9vdGgobnA6IGZsb2F0LCByYWRpdXM6IGludCkge1xyXG4gICAgICAgIHRoaXMuc21vb3RoWm9uZSh0aGlzLCBucCwgcmFkaXVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbm9ybWFsaXplKG1heEhlaWdodDogZmxvYXQpIHtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHRoaXMuZGVwdGg7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SGVpZ2h0ICAgPSB0aGlzLmdldCh4LCB6KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZUhlaWdodCA9IChjdXJyZW50SGVpZ2h0IC8gdGhpcy5tYXhIZWlnaHQpICogbWF4SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KHgsIHosIG5vcm1hbGl6ZUhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbWJpbmVIZWlnaHRzKFxyXG4gICAgICAgIHR5cGU6ICcrJyB8ICctJyB8ICcqJyB8ICcvJyxcclxuICAgICAgICBoZWlnaHRNYXA6IEFic0hlaWdodE1hcCxcclxuICAgICAgICB2YWx1ZTogZmxvYXQsXHJcbiAgICAgICAgem9uZTogSVpvbmUsXHJcbiAgICAgICAgaGVpZ2h0SWZaZXJvOiBmbG9hdCA9IDAsXHJcbiAgICAgICAgbWluSGVpZ2h0OiBmbG9hdCB8IG51bGwgPSBudWxsLFxyXG4gICAgICAgIG1heEhlaWdodDogZmxvYXQgfCBudWxsID0gbnVsbFxyXG4gICAgKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHpvbmUubWF4WCA8IDApIHJldHVybjtcclxuICAgICAgICBpZiAoem9uZS5tYXhaIDwgMCkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGxlblggPSB6b25lLm1heFggLSB6b25lLm1pblg7XHJcbiAgICAgICAgY29uc3QgbGVuWiA9IHpvbmUubWF4WiAtIHpvbmUubWluWjtcclxuXHJcbiAgICAgICAgaWYgKGxlblggPCAxIHx8IGxlblogPCAxIHx8IHZhbHVlID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZpeGVkTWluWCA9IE1hdGgubWF4KHpvbmUubWluWCwgMCk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRNaW5aID0gTWF0aC5tYXgoem9uZS5taW5aLCAwKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1heFggPSBNYXRoLm1pbih6b25lLm1heFgsIHRoaXMud2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTWF4WiA9IE1hdGgubWluKHpvbmUubWF4WiwgdGhpcy5kZXB0aCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvZWZmRmFjdG9yWCA9IChoZWlnaHRNYXAud2lkdGggLSAxKSAvIGxlblg7XHJcbiAgICAgICAgY29uc3QgY29lZmZGYWN0b3JaID0gKGhlaWdodE1hcC5kZXB0aCAtIDEpIC8gbGVuWjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IGZpeGVkTWluWjsgeiA8IGZpeGVkTWF4WjsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gZml4ZWRNaW5YOyB4IDwgZml4ZWRNYXhYOyB4KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB4MiA9IChjb2VmZkZhY3RvclggKiAoeCAtIHpvbmUubWluWCkpIHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHoyID0gKGNvZWZmRmFjdG9yWiAqICh6IC0gem9uZS5taW5aKSkgfCAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gaGVpZ2h0TWFwLmdldCh4MiwgejIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc21vb3RoQXBwZW5kVmFsdWUgPSBoZWlnaHQgKiB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRIZWlnaHQgPSB0aGlzLmdldCh4LCB6KSB8fCBoZWlnaHRJZlplcm87XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZSA9IHR5cGUgPT09ICcrJyA/IG9sZEhlaWdodCArIHNtb290aEFwcGVuZFZhbHVlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID09PSAnLScgPyBvbGRIZWlnaHQgLSBzbW9vdGhBcHBlbmRWYWx1ZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9PT0gJyonID8gb2xkSGVpZ2h0ICogc21vb3RoQXBwZW5kVmFsdWUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPT09ICcvJyA/IG9sZEhlaWdodCAvIHNtb290aEFwcGVuZFZhbHVlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChtaW5IZWlnaHQgIT09IG51bGwgJiYgY2FuZGlkYXRlIDwgbWluSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlID0gbWluSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobWF4SGVpZ2h0ICE9PSBudWxsICYmIGNhbmRpZGF0ZSA+IG1heEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZSA9IG1heEhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh4LCB6LCBjYW5kaWRhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBYnNIZWlnaHRNYXA7IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IEFic0hlaWdodE1hcCwgeyBJUmVhZG9ubHlBYnNIZWlnaHRNYXAsIFRIZWlnaHRNYXBGb3JtYXQgfSBmcm9tIFwiLi9BYnNIZWlnaHRNYXAubWpzXCI7XHJcblxyXG5leHBvcnQgdHlwZSAgSGVpZ2h0TWFwQXJyVHlwZSA9IEZsb2F0MzJBcnJheTtcclxuZXhwb3J0IGNvbnN0IEhlaWdodE1hcEFyclR5cGUgPSBGbG9hdDMyQXJyYXk7XHJcblxyXG5leHBvcnQgY29uc3QgZGVmYXVsdEhlaWdodFZlcnRleFNpemU6IGludCA9IDE7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZWFkb25seUhlaWdodE1hcDxURGF0YSA9IEhlaWdodE1hcEFyclR5cGU+IGV4dGVuZHMgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIHtcclxuICAgIHJlYWRvbmx5IGl0ZW1TaXplOiBpbnQ7XHJcbiAgICByZWFkb25seSBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludDtcclxuICAgIHJlYWRvbmx5IGRhdGE6IFREYXRhO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSGVpZ2h0TWFwPFREYXRhIGV4dGVuZHMgRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50OEFycmF5ID0gSGVpZ2h0TWFwQXJyVHlwZT4gZXh0ZW5kcyBBYnNIZWlnaHRNYXAgaW1wbGVtZW50cyBJUmVhZG9ubHlIZWlnaHRNYXA8VERhdGE+IHtcclxuXHJcbiAgICBwcml2YXRlIF93aWR0aDogaW50ID0gMDtcclxuICAgIHByaXZhdGUgX2RlcHRoOiBpbnQgPSAwO1xyXG4gICAgcHJpdmF0ZSBfbWF4SGVpZ2h0OiBmbG9hdCA9IDA7XHJcbiAgICBwcml2YXRlIF9kYXRhOiBURGF0YTtcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfaXRlbVNpemU6IGludDtcclxuICAgIHByaXZhdGUgX2l0ZW1IZWlnaHRJbmRleE9mZnNldDogaW50O1xyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0IHNpemUoKSAgeyByZXR1cm4gdGhpcy5fd2lkdGggKiB0aGlzLl9kZXB0aDsgfVxyXG4gICAgcHVibGljIGdldCB3aWR0aCgpIHsgcmV0dXJuIHRoaXMuX3dpZHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRlcHRoKCkgeyByZXR1cm4gdGhpcy5fZGVwdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgZGF0YSgpICB7IHJldHVybiB0aGlzLl9kYXRhOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGZvcm1hdCgpOiBUSGVpZ2h0TWFwRm9ybWF0IHsgcmV0dXJuICdyZ2JhJzsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXRlbVNpemUoKSAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5faXRlbVNpemU7IH1cclxuICAgIHB1YmxpYyBnZXQgaXRlbUhlaWdodEluZGV4T2Zmc2V0KCkgeyByZXR1cm4gdGhpcy5faXRlbUhlaWdodEluZGV4T2Zmc2V0OyB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXQgbWF4SGVpZ2h0KCkgIHsgcmV0dXJuIHRoaXMuX21heEhlaWdodDsgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0KTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI6IFREYXRhLCBpdGVtU2l6ZT86IGludCwgaXRlbUhlaWdodEluZGV4T2Zmc2V0PzogaW50KTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI/OiBURGF0YSB8IHVuZGVmaW5lZCwgaXRlbVNpemU6IGludCA9IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludCA9IDApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX2luaXQod2lkdGgsIGRlcHRoLCBtYXhIZWlnaHQsIGJ1ZmZlciEsIGl0ZW1TaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfaW5pdCh3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0KTogdm9pZDtcclxuICAgIHByb3RlY3RlZCBfaW5pdCh3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI6IFREYXRhLCBpdGVtU2l6ZT86IGludCwgaXRlbUhlaWdodEluZGV4T2Zmc2V0PzogaW50KTogdm9pZDtcclxuICAgIHByb3RlY3RlZCBfaW5pdCh3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI/OiBURGF0YSB8IHVuZGVmaW5lZCwgaXRlbVNpemU6IGludCA9IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludCA9IDApOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLl9kZXB0aCA9IGRlcHRoO1xyXG4gICAgICAgIHRoaXMuX21heEhlaWdodCA9IG1heEhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKGJ1ZmZlcikge1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW1TaXplIDwgaXRlbUhlaWdodEluZGV4T2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJdGVtU2l6ZSBjYW4ndCBsZXNzIG9yIGVxIEl0ZW1IZWlnaHRJbmRleE9mZnNldFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPCAod2lkdGggKiBkZXB0aCkgKiBpdGVtU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnVmZmVyIGhhcyBpbnZhbGlkIGxlbmd0aFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IGJ1ZmZlcjtcclxuICAgICAgICAgICAgdGhpcy5faXRlbVNpemUgPSBpdGVtU2l6ZTtcclxuICAgICAgICAgICAgdGhpcy5faXRlbUhlaWdodEluZGV4T2Zmc2V0ID0gaXRlbUhlaWdodEluZGV4T2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogdHlwZSBjaGVja2VyXHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSBuZXcgSGVpZ2h0TWFwQXJyVHlwZSh3aWR0aCAqIGRlcHRoICogZGVmYXVsdEhlaWdodFZlcnRleFNpemUpIGFzIHVua25vd24gYXMgVERhdGE7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1TaXplID0gZGVmYXVsdEhlaWdodFZlcnRleFNpemU7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1IZWlnaHRJbmRleE9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfZW5jb2RlSGVpZ2h0RmFjdG9yKHN0b3JlOiBURGF0YSwgaW5kZXg6IGludCwgdmFsdWU6IGZsb2F0KSB7XHJcbiAgICAgICAgc3RvcmVbaW5kZXhdID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByb3RlY3RlZCBfZGVjb2RlSGVpZ2h0RmFjdG9yKHN0b3JlOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+LCBpbmRleDogaW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlW2luZGV4XTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIF9kZWNvZGVIZWlnaHQoc3RvcmU6IFJlY29yZDxudW1iZXIsIG51bWJlcj4sIGluZGV4OiBpbnQsIG1heDogZmxvYXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVjb2RlSGVpZ2h0RmFjdG9yKHN0b3JlLCBpbmRleCkgKiBtYXg7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9lbmNvZGVBbmRTZXRIZWlnaHRGYWN0b3Ioc3RvcmU6IFREYXRhLCBpbmRleDogaW50LCByZWFsSGVpZ2h0OiBmbG9hdCwgbWF4OiBmbG9hdCkge1xyXG5cclxuICAgICAgICBjb25zdCBub3JtYWxpemUgPSBNYXRoLm1heChNYXRoLm1pbihyZWFsSGVpZ2h0LCBtYXgpLCAwKTtcclxuICAgICAgICBjb25zdCBmYWN0b3IgICAgPSBub3JtYWxpemUgLyBtYXg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgdGhpcy5fZW5jb2RlSGVpZ2h0RmFjdG9yKHN0b3JlLCBpbmRleCwgZmFjdG9yKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVjb2RlSGVpZ2h0RmFjdG9yKHN0b3JlLCBpbmRleCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXRJbmRleCh4OiBpbnQsIHo6IGludCkge1xyXG4gICAgICAgIHJldHVybiAoeiAqIHRoaXMuX3dpZHRoICsgeCkgKiB0aGlzLl9pdGVtU2l6ZSArIHRoaXMuX2l0ZW1IZWlnaHRJbmRleE9mZnNldDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RmFjdG9yKHg6IGludCwgejogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldEluZGV4KHgsIHopO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWNvZGVIZWlnaHRGYWN0b3IodGhpcy5fZGF0YSwgaW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXQoeDogaW50LCB6OiBpbnQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0SW5kZXgoeCwgeik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlY29kZUhlaWdodCh0aGlzLl9kYXRhLCBpbmRleCwgdGhpcy5fbWF4SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgc2V0KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0SW5kZXgoeCwgeik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuY29kZUFuZFNldEhlaWdodEZhY3Rvcih0aGlzLl9kYXRhLCBpbmRleCwgdmFsdWUsIHRoaXMuX21heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldE1heEhlaWdodChtYXhIZWlnaHQ6IGZsb2F0KSB7XHJcbiAgICAgICAgdGhpcy5fbWF4SGVpZ2h0ID0gbWF4SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSBhcHBlbmQoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCkge1xyXG5cclxuICAgICAgICBjb25zdCBpbmRleCAgICAgPSB0aGlzLmdldEluZGV4KHgsIHopO1xyXG4gICAgICAgIGNvbnN0IG9sZFZhbHVlICA9IHRoaXMuX2RlY29kZUhlaWdodCh0aGlzLl9kYXRhLCBpbmRleCwgdGhpcy5fbWF4SGVpZ2h0KTtcclxuICAgICAgICBjb25zdCBjYW5WYWx1ZSAgPSBvbGRWYWx1ZSArIHZhbHVlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZW5jb2RlQW5kU2V0SGVpZ2h0RmFjdG9yKHRoaXMuX2RhdGEsIGluZGV4LCBjYW5WYWx1ZSwgdGhpcy5fbWF4SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgbXVsdGlwbHkoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCwgaGVpZ2h0SWZaZXJvOiBmbG9hdCA9IDApIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXggICAgID0gdGhpcy5nZXRJbmRleCh4LCB6KTtcclxuICAgICAgICBjb25zdCBvbGRWYWx1ZSAgPSB0aGlzLl9kZWNvZGVIZWlnaHQodGhpcy5fZGF0YSwgaW5kZXgsIHRoaXMuX21heEhlaWdodCkgfHwgaGVpZ2h0SWZaZXJvO1xyXG4gICAgICAgIGNvbnN0IGNhblZhbHVlICA9IG9sZFZhbHVlICogdmFsdWU7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVBbmRTZXRIZWlnaHRGYWN0b3IodGhpcy5fZGF0YSwgaW5kZXgsIGNhblZhbHVlLCB0aGlzLl9tYXhIZWlnaHQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIZWlnaHRNYXA7IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJWm9uZSB9IGZyb20gXCIuL0lab25lLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElSZWFkb25seUFic0hlaWdodE1hcCB9IGZyb20gXCIuL0Fic0hlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IEhlaWdodE1hcCwgeyBIZWlnaHRNYXBBcnJUeXBlLCBkZWZhdWx0SGVpZ2h0VmVydGV4U2l6ZSwgSVJlYWRvbmx5SGVpZ2h0TWFwIH0gZnJvbSBcIi4vSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwIGV4dGVuZHMgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIHtcclxuXHJcbiAgICByZWFkb25seSBkYXRhQ2h1bmtTaXplOiBpbnQ7XHJcbiAgICByZWFkb25seSBkYXRhTnVtQ2h1bmtzWDogaW50O1xyXG4gICAgcmVhZG9ubHkgZGF0YU51bUNodW5rc1o6IGludDtcclxuICAgIHJlYWRvbmx5IGRhdGFDaHVua1NpemVGYWN0b3I6IGZsb2F0O1xyXG4gICAgcmVhZG9ubHkgcGF0Y2hTaXplOiBpbnQ7XHJcbiAgICByZWFkb25seSBudW1QYXRjaGVzWDogaW50O1xyXG4gICAgcmVhZG9ubHkgbnVtUGF0Y2hlc1o6IGludDtcclxuXHJcbiAgICBnZXRNaW4oKTogZmxvYXQ7XHJcbiAgICBnZXRNYXgoKTogZmxvYXQ7XHJcbiAgICBnZXRNaW5GYWN0b3IoKTogZmxvYXQ7XHJcbiAgICBnZXRNYXhGYWN0b3IoKTogZmxvYXQ7XHJcbiAgICBnZXRFbnRyaWVzUGF0Y2hNaW4oeDogZmxvYXQsIHo6IGZsb2F0KTogZmxvYXQ7XHJcbiAgICBnZXRFbnRyaWVzUGF0Y2hNYXgoeDogZmxvYXQsIHo6IGZsb2F0KTogZmxvYXQ7XHJcbiAgICBnZXRFbnRyaWVzUGF0Y2hNaW5GYWN0b3IoeDogZmxvYXQsIHo6IGZsb2F0KTogZmxvYXQ7XHJcbiAgICBnZXRFbnRyaWVzUGF0Y2hNYXhGYWN0b3IoeDogZmxvYXQsIHo6IGZsb2F0KTogZmxvYXQ7XHJcbiAgICBnZXRQYXRjaE1pbihwYXRjaEJhc2VYOiBpbnQsIHBhdGNoQmFzZVo6IGludCk6IGZsb2F0O1xyXG4gICAgZ2V0UGF0Y2hNYXgocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpOiBmbG9hdDtcclxuICAgIGdldFBhdGNoTWluRmFjdG9yKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KTogZmxvYXQ7XHJcbiAgICBnZXRQYXRjaE1heEZhY3RvcihwYXRjaEJhc2VYOiBpbnQsIHBhdGNoQmFzZVo6IGludCk6IGZsb2F0O1xyXG5cclxuICAgIGdldENodW5rSW5kZXgoY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogaW50O1xyXG4gICAgZ2V0Q2h1bmtCdWZmZXIodHlwZTogRmxvYXQzMkFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IEZsb2F0MzJBcnJheTtcclxuICAgIGdldENodW5rQnVmZmVyKHR5cGU6IFVpbnQxNkFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IFVpbnQxNkFycmF5O1xyXG4gICAgZ2V0Q2h1bmtCdWZmZXIodHlwZTogVWludDhBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBVaW50OEFycmF5O1xyXG4gICAgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcik6IEZsb2F0MzJBcnJheVtdO1xyXG4gICAgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yKTogVWludDE2QXJyYXlbXTtcclxuICAgIGdldENodW5rc0J1ZmZlcnModHlwZTogVWludDhBcnJheUNvbnN0cnVjdG9yKTogVWludDhBcnJheVtdO1xyXG5cclxuICAgIGdldENodW5rQnVmZmVyPFQgZXh0ZW5kcyBGbG9hdDMyQXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQxNkFycmF5Q29uc3RydWN0b3IgfCBVaW50OEFycmF5Q29uc3RydWN0b3I+KHR5cGU6IFQsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IGFueTtcclxuICAgIGdldENodW5rc0J1ZmZlcnM8VCBleHRlbmRzIEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yIHwgVWludDE2QXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQ4QXJyYXlDb25zdHJ1Y3Rvcj4odHlwZTogVCk6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwVHlwcGVkPFREYXRhIGV4dGVuZHMgRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50OEFycmF5ID0gSGVpZ2h0TWFwQXJyVHlwZT4gZXh0ZW5kcyBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwLCBJUmVhZG9ubHlIZWlnaHRNYXA8VERhdGE+IHtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtaW5NYXhTdGFja1NpemUgPSAyO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplKHBhdGNoU2l6ZTogaW50LCBkYXRhQ2h1bmtTaXplOiBpbnQpIHtcclxuXHJcbiAgICBpZiAoKGRhdGFDaHVua1NpemUgLSAxKSAlIChwYXRjaFNpemUgLSAxKSAhPT0gMCkge1xyXG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGVkV2lkdGggPSAoKGRhdGFDaHVua1NpemUgLSAxICsgcGF0Y2hTaXplIC0gMSkgLyAoZGF0YUNodW5rU2l6ZSAtIDEpKSAqIChwYXRjaFNpemUgLSAxKSArIDE7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFDaHVua1NpemUgbWludXMgMSAoJWQpIG11c3QgYmUgZGl2aXNpYmxlIGJ5IHBhdGNoU2l6ZSBtaW51cyAxICglZClcXG5cIiwgZGF0YUNodW5rU2l6ZSwgcGF0Y2hTaXplKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiVHJ5IHVzaW5nIERhdGFDaHVua1NpemUgPSAlZFxcblwiLCByZWNvbW1lbmRlZFdpZHRoKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YUNodW5rU2l6ZTtcclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic1BhdGNoZWRIZWlnaHRNYXA8VERhdGEgZXh0ZW5kcyBGbG9hdDMyQXJyYXkgfCBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXkgPSBIZWlnaHRNYXBBcnJUeXBlPiBleHRlbmRzIEhlaWdodE1hcDxURGF0YT4gaW1wbGVtZW50cyBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwVHlwcGVkPFREYXRhPiB7XHJcblxyXG4gICAgcHJvdGVjdGVkIF9wYXRjaFNpemU6IGludDtcclxuICAgIHByb3RlY3RlZCBfbnVtUGF0Y2hlc1g6IGludDtcclxuICAgIHByb3RlY3RlZCBfbnVtUGF0Y2hlc1o6IGludDtcclxuICAgIHByb3RlY3RlZCBfcGF0Y2hlc1NlZ21lbnRTaXplOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX21pbk1heEhlaWdodENvb3JkczogaW50W107XHJcbiAgICBwcm90ZWN0ZWQgX21pbkhlaWdodENvb3JkOiBpbnRbXTtcclxuICAgIHByb3RlY3RlZCBfbWF4SGVpZ2h0Q29vcmQ6IGludFtdO1xyXG4gICAgcHJvdGVjdGVkIF9kYXRhQ2h1bmtTaXplOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX2RhdGFOdW1DaHVua3NYOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX2RhdGFOdW1DaHVua3NaOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX2RhdGFDaHVua1NpemVGYWN0b3I6IGZsb2F0O1xyXG5cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hTaXplKCkgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX3BhdGNoU2l6ZTsgfVxyXG4gICAgcHVibGljIGdldCBudW1QYXRjaGVzWCgpICAgICAgICAgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1g7IH1cclxuICAgIHB1YmxpYyBnZXQgbnVtUGF0Y2hlc1ooKSAgICAgICAgIHsgcmV0dXJuIHRoaXMuX251bVBhdGNoZXNaOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRhdGFDaHVua1NpemUoKSAgICAgICB7IHJldHVybiB0aGlzLl9kYXRhQ2h1bmtTaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRhdGFOdW1DaHVua3NYKCkgICAgICB7IHJldHVybiB0aGlzLl9kYXRhTnVtQ2h1bmtzWDsgfVxyXG4gICAgcHVibGljIGdldCBkYXRhTnVtQ2h1bmtzWigpICAgICAgeyByZXR1cm4gdGhpcy5fZGF0YU51bUNodW5rc1o7IH1cclxuICAgIHB1YmxpYyBnZXQgZGF0YUNodW5rU2l6ZUZhY3RvcigpIHsgcmV0dXJuIHRoaXMuX2RhdGFDaHVua1NpemVGYWN0b3I7IH1cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyOiBURGF0YSwgaXRlbVNpemU/OiBpbnQsIGl0ZW1IZWlnaHRJbmRleE9mZnNldD86IGludCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyPzogVERhdGEgfCB1bmRlZmluZWQsIGl0ZW1TaXplOiBpbnQgPSBkZWZhdWx0SGVpZ2h0VmVydGV4U2l6ZSwgaXRlbUhlaWdodEluZGV4T2Zmc2V0OiBpbnQgPSAwKSB7XHJcbiAgICAgICAgc3VwZXIod2lkdGgsIGRlcHRoLCBtYXhIZWlnaHQsIGJ1ZmZlciEgLyoqIFRTIGh1Y2sgKi8sIGl0ZW1TaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQpO1xyXG4gICAgICAgIHRoaXMuX21pbkhlaWdodENvb3JkID0gWzAsIDBdO1xyXG4gICAgICAgIHRoaXMuX21heEhlaWdodENvb3JkID0gWzAsIDBdO1xyXG4gICAgICAgIHRoaXMuX3NldFBhdGNoU2l6ZShwYXRjaFNpemUpO1xyXG4gICAgICAgIHRoaXMuX3NldERhdGFDaHVua1NpemUoZGF0YUNodW5rU2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fY2xlYXJNaW5NYXhIZWlnaHRDb29yZHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3NldFBhdGNoU2l6ZShwYXRjaFNpemU6IGludCkge1xyXG4gICAgICAgIHRoaXMuX3BhdGNoU2l6ZSAgID0gcGF0Y2hTaXplO1xyXG4gICAgICAgIHRoaXMuX251bVBhdGNoZXNYID0gKCh0aGlzLndpZHRoIC0gMSkgLyAodGhpcy5fcGF0Y2hTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWiA9ICgodGhpcy5kZXB0aCAtIDEpIC8gKHRoaXMuX3BhdGNoU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgdGhpcy5fcGF0Y2hlc1NlZ21lbnRTaXplID0gdGhpcy5fbnVtUGF0Y2hlc1ggKiB0aGlzLl9udW1QYXRjaGVzWiAqIG1pbk1heFN0YWNrU2l6ZTtcclxuICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHMgPSBuZXcgQXJyYXk8aW50Pih0aGlzLl9wYXRjaGVzU2VnbWVudFNpemUgKiAyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3NldERhdGFDaHVua1NpemUodmFsdWU6IGludCkge1xyXG4gICAgICAgIHRoaXMuX2RhdGFDaHVua1NpemUgID0gZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUodGhpcy5fcGF0Y2hTaXplLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fZGF0YU51bUNodW5rc1ggPSAoKHRoaXMud2lkdGggLSAxKSAvICh0aGlzLl9kYXRhQ2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICB0aGlzLl9kYXRhTnVtQ2h1bmtzWiA9ICgodGhpcy5kZXB0aCAtIDEpIC8gKHRoaXMuX2RhdGFDaHVua1NpemUgLSAxKSkgfCAwO1xyXG4gICAgICAgIHRoaXMuX2RhdGFDaHVua1NpemVGYWN0b3IgPSB0aGlzLl9wYXRjaFNpemUgPT09IHRoaXMuX2RhdGFDaHVua1NpemVcclxuICAgICAgICAgICAgPyAxLjBcclxuICAgICAgICAgICAgOiB0aGlzLl9wYXRjaFNpemUgLyAodGhpcy5fZGF0YUNodW5rU2l6ZSArIHRoaXMuX3BhdGNoU2l6ZSAtICh0aGlzLl9kYXRhQ2h1bmtTaXplICUgdGhpcy5fcGF0Y2hTaXplKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRJbmRleCh4OiBpbnQsIHo6IGludCk6IGludCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvY2FsWCA9IHggJSB0aGlzLl9kYXRhQ2h1bmtTaXplO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsWiA9IHogJSB0aGlzLl9kYXRhQ2h1bmtTaXplO1xyXG4gICAgICAgIGNvbnN0IGNodW5rWCA9IHggLyB0aGlzLl9kYXRhQ2h1bmtTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBjaHVua1ogPSB6IC8gdGhpcy5fZGF0YUNodW5rU2l6ZSB8IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGNodW5rT2Zmc2V0ID0gKGNodW5rWiAqIHRoaXMuX2RhdGFOdW1DaHVua3NYICsgY2h1bmtYKSAqICh0aGlzLl9kYXRhQ2h1bmtTaXplICoqIDIpO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsSW5kZXggID0gKGxvY2FsWiAqIHRoaXMuX2RhdGFDaHVua1NpemUgKyBsb2NhbFgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2h1bmtPZmZzZXQgKyBsb2NhbEluZGV4O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtJbmRleChjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBpbnQge1xyXG4gICAgICAgIHJldHVybiBjaHVua1ogKiB0aGlzLl9kYXRhTnVtQ2h1bmtzWCArIGNodW5rWDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtCdWZmZXIodHlwZTogRmxvYXQzMkFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IEZsb2F0MzJBcnJheTtcclxuICAgIHB1YmxpYyBnZXRDaHVua0J1ZmZlcih0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBVaW50MTZBcnJheTtcclxuICAgIHB1YmxpYyBnZXRDaHVua0J1ZmZlcih0eXBlOiBVaW50OEFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IFVpbnQ4QXJyYXk7XHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtCdWZmZXIodHlwZTogYW55LCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpIHtcclxuICAgICAgICBjb25zdCBzaXplICAgICAgICA9IHRoaXMuZGF0YUNodW5rU2l6ZSAqKiAyO1xyXG4gICAgICAgIGNvbnN0IGNodW5rTGV2ZWwgID0gY2h1bmtaICogdGhpcy5kYXRhTnVtQ2h1bmtzWCArIGNodW5rWDtcclxuICAgICAgICBjb25zdCBjaHVua09mZnNldCA9IGNodW5rTGV2ZWwgKiBzaXplICogdGhpcy5kYXRhLkJZVEVTX1BFUl9FTEVNRU5UO1xyXG4gICAgICAgIGNvbnN0IGNvdW50ICAgICAgID0gc2l6ZSAqICh0aGlzLmRhdGEuQllURVNfUEVSX0VMRU1FTlQgLyB0eXBlLkJZVEVTX1BFUl9FTEVNRU5UKTtcclxuICAgICAgICByZXR1cm4gbmV3IHR5cGUodGhpcy5kYXRhLmJ1ZmZlciwgdGhpcy5kYXRhLmJ5dGVPZmZzZXQgKyBjaHVua09mZnNldCwgY291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yKTogRmxvYXQzMkFycmF5W107XHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yKTogVWludDE2QXJyYXlbXTtcclxuICAgIHB1YmxpYyBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IFVpbnQ4QXJyYXlDb25zdHJ1Y3Rvcik6IFVpbnQ4QXJyYXlbXTtcclxuICAgIHB1YmxpYyBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IGFueSkge1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5fZGF0YU51bUNodW5rc1ggKiB0aGlzLl9kYXRhTnVtQ2h1bmtzWik7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGNodW5rWiA9IDA7IGNodW5rWiA8IHRoaXMuX2RhdGFOdW1DaHVua3NaOyBjaHVua1orKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgY2h1bmtYID0gMDsgY2h1bmtYIDwgdGhpcy5fZGF0YU51bUNodW5rc1g7IGNodW5rWCsrKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2h1bmtaICogdGhpcy5fZGF0YU51bUNodW5rc1ggKyBjaHVua1g7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaW5kZXhdID0gdGhpcy5nZXRDaHVua0J1ZmZlcih0eXBlLCBjaHVua1gsIGNodW5rWik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RW50cmllc1BhdGNoTWluKHg6IGludCwgejogaW50KSB7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hYID0geCAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgY29uc3QgcGF0Y2haID0geiAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGF0Y2hNaW4ocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRFbnRyaWVzUGF0Y2hNYXgoeDogaW50LCB6OiBpbnQpIHtcclxuICAgICAgICBjb25zdCBwYXRjaFggPSB4IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBwYXRjaFogPSB6IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRQYXRjaE1heChwYXRjaFgsIHBhdGNoWik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEVudHJpZXNQYXRjaE1pbkZhY3Rvcih4OiBpbnQsIHo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWCA9IHggLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWiA9IHogLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFBhdGNoTWluRmFjdG9yKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RW50cmllc1BhdGNoTWF4RmFjdG9yKHg6IGludCwgejogaW50KSB7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hYID0geCAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgY29uc3QgcGF0Y2haID0geiAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGF0Y2hNYXhGYWN0b3IocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNaW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMuX21pbkhlaWdodENvb3JkWzBdLCB0aGlzLl9taW5IZWlnaHRDb29yZFsxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE1heCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5fbWF4SGVpZ2h0Q29vcmRbMF0sIHRoaXMuX21heEhlaWdodENvb3JkWzFdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TWluRmFjdG9yKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5IZWlnaHRDb29yZFswXSwgdGhpcy5fbWluSGVpZ2h0Q29vcmRbMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNYXhGYWN0b3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmFjdG9yKHRoaXMuX21heEhlaWdodENvb3JkWzBdLCB0aGlzLl9tYXhIZWlnaHRDb29yZFsxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBhdGNoTWluKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSAocGF0Y2hCYXNlWiAqIHRoaXMuX251bVBhdGNoZXNYICsgcGF0Y2hCYXNlWCkgKiBtaW5NYXhTdGFja1NpemU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1tpbmRleF0sIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1tpbmRleCArIDFdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGF0Y2hNYXgocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IChwYXRjaEJhc2VaICogdGhpcy5fbnVtUGF0Y2hlc1ggKyBwYXRjaEJhc2VYKSAqIG1pbk1heFN0YWNrU2l6ZSArIHRoaXMuX3BhdGNoZXNTZWdtZW50U2l6ZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW2luZGV4XSwgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW2luZGV4ICsgMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQYXRjaE1pbkZhY3RvcihwYXRjaEJhc2VYOiBpbnQsIHBhdGNoQmFzZVo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gKHBhdGNoQmFzZVogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoQmFzZVgpICogbWluTWF4U3RhY2tTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXhdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXggKyAxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBhdGNoTWF4RmFjdG9yKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSAocGF0Y2hCYXNlWiAqIHRoaXMuX251bVBhdGNoZXNYICsgcGF0Y2hCYXNlWCkgKiBtaW5NYXhTdGFja1NpemUgKyB0aGlzLl9wYXRjaGVzU2VnbWVudFNpemU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmFjdG9yKHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1tpbmRleF0sIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1tpbmRleCArIDFdKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2NsZWFyTWluTWF4SGVpZ2h0Q29vcmRzKCkge1xyXG5cclxuICAgICAgICB0aGlzLl9taW5IZWlnaHRDb29yZFswXSA9IDA7XHJcbiAgICAgICAgdGhpcy5fbWluSGVpZ2h0Q29vcmRbMV0gPSAwO1xyXG4gICAgICAgIHRoaXMuX21heEhlaWdodENvb3JkWzBdID0gMDtcclxuICAgICAgICB0aGlzLl9tYXhIZWlnaHRDb29yZFsxXSA9IDA7XHJcbiAgICAgICAgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzLmZpbGwoMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY2FsY3VsYXRlQUFCQigpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fbWluSGVpZ2h0Q29vcmRbMF0gPSAwO1xyXG4gICAgICAgIHRoaXMuX21pbkhlaWdodENvb3JkWzFdID0gMDtcclxuICAgICAgICB0aGlzLl9tYXhIZWlnaHRDb29yZFswXSA9IDA7XHJcbiAgICAgICAgdGhpcy5fbWF4SGVpZ2h0Q29vcmRbMV0gPSAwO1xyXG5cclxuICAgICAgICBsZXQgbWluRmFjdG9yID0gMTtcclxuICAgICAgICBsZXQgbWF4RmFjdG9yID0gMDtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBwYXRjaFogPSAwOyBwYXRjaFogPCB0aGlzLl9udW1QYXRjaGVzWjsgcGF0Y2haKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHBhdGNoWCA9IDA7IHBhdGNoWCA8IHRoaXMuX251bVBhdGNoZXNYOyBwYXRjaFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbkluZGV4ID0gKHBhdGNoWiAqIHRoaXMuX251bVBhdGNoZXNYICsgcGF0Y2hYKSAqIG1pbk1heFN0YWNrU2l6ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1heEluZGV4ID0gbWluSW5kZXggKyB0aGlzLl9wYXRjaGVzU2VnbWVudFNpemU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hNaW5GYWN0b3IgPSB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWluSW5kZXhdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWluSW5kZXggKyAxXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaE1heGZhY3RvciA9IHRoaXMuZ2V0RmFjdG9yKHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1ttYXhJbmRleF0sIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1ttYXhJbmRleCArIDFdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWluRmFjdG9yID4gcGF0Y2hNaW5GYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5GYWN0b3IgPSBwYXRjaE1pbkZhY3RvcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9taW5IZWlnaHRDb29yZFswXSA9IHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1ttaW5JbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWluSGVpZ2h0Q29vcmRbMV0gPSB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWluSW5kZXggKyAxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWF4RmFjdG9yIDwgcGF0Y2hNYXhmYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhGYWN0b3IgPSBwYXRjaE1heGZhY3RvcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXhIZWlnaHRDb29yZFswXSA9IHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1ttYXhJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWF4SGVpZ2h0Q29vcmRbMV0gPSB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXggKyAxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjYWxjdWxhdGVNaW5NYXgoem9uZTogSVpvbmUpOiB2b2lkIHtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoem9uZS5tYXhYIDwgMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh6b25lLm1heFogPCAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGZpeGVkTWluWCA9IE1hdGgubWF4KHpvbmUubWluWCwgMCk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRNaW5aID0gTWF0aC5tYXgoem9uZS5taW5aLCAwKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1heFggPSBNYXRoLm1pbih6b25lLm1heFgsIHRoaXMud2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTWF4WiA9IE1hdGgubWluKHpvbmUubWF4WiwgdGhpcy5kZXB0aCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSBmaXhlZE1pblo7IHogPCBmaXhlZE1heFo7IHogKz0gdGhpcy5fcGF0Y2hTaXplKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gZml4ZWRNaW5YOyB4IDwgZml4ZWRNYXhYOyB4ICs9IHRoaXMuX3BhdGNoU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaFggICA9IHggLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2haICAgPSB6IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoSSAgID0gcGF0Y2haICogdGhpcy5fbnVtUGF0Y2hlc1ggKyBwYXRjaFg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5JbmRleCA9IHBhdGNoSSAqIG1pbk1heFN0YWNrU2l6ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1heEluZGV4ID0gbWluSW5kZXggKyB0aGlzLl9wYXRjaGVzU2VnbWVudFNpemU7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0UGF0Y2hYID0gcGF0Y2hYICogdGhpcy5fcGF0Y2hTaXplO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RQYXRjaFogPSBwYXRjaFogKiB0aGlzLl9wYXRjaFNpemU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UGF0Y2hYICA9IGZpcnN0UGF0Y2hYICsgdGhpcy5fcGF0Y2hTaXplO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFBhdGNoWiAgPSBmaXJzdFBhdGNoWiArIHRoaXMuX3BhdGNoU2l6ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbWluID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4ID0gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWluWCA9IGZpcnN0UGF0Y2hYO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1pblogPSBmaXJzdFBhdGNoWjtcclxuICAgICAgICAgICAgICAgIGxldCBtYXhYID0gZmlyc3RQYXRjaFg7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4WiA9IGZpcnN0UGF0Y2haO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGlubmVyWiA9IGZpcnN0UGF0Y2haICsgMTsgaW5uZXJaIDwgbGFzdFBhdGNoWjsgaW5uZXJaKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5uZXJYID0gZmlyc3RQYXRjaFggKyAxOyBpbm5lclggPCBsYXN0UGF0Y2hYOyBpbm5lclgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gdGhpcy5nZXRGYWN0b3IoaW5uZXJYLCBpbm5lclopO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbiA+IGZhY3Rvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gZmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWCA9IGlubmVyWDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblogPSBpbm5lclo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXggPCBmYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IGZhY3RvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFggPSBpbm5lclg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhaID0gaW5uZXJaO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1ttaW5JbmRleF0gICAgID0gbWluWDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1ttaW5JbmRleCArIDFdID0gbWluWjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1ttYXhJbmRleF0gICAgID0gbWF4WDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1ttYXhJbmRleCArIDFdID0gbWF4WjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWJzUGF0Y2hlZEhlaWdodE1hcDsiLCJpbXBvcnQgdHlwZSB7IGZsb2F0LCBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgQWJzUGF0Y2hlZEhlaWdodE1hcCwgeyBnZXRPclRocm93RGF0YUNodW5rU2l6ZSwgSVJlYWRvbmx5QWJzUGF0Y2hlZEhlaWdodE1hcFR5cHBlZCB9IGZyb20gXCIuL0Fic1BhdGNoZWRIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB7IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplIH0gZnJvbSBcIi4vSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgVENvbXByZXNzQWxnb3JpdG0gPSBcIngyXCIgfCBcIng0XCI7XHJcbmV4cG9ydCB0eXBlIFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VCBleHRlbmRzIFRDb21wcmVzc0FsZ29yaXRtPiA9IFQgZXh0ZW5kcyBcIngyXCIgPyBVaW50MTZBcnJheSA6IFVpbnQ4QXJyYXk7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXA8VFRDb21wcmVzc0FsZ29yaXRtIGV4dGVuZHMgVENvbXByZXNzQWxnb3JpdG0+XHJcbiAgICAgZXh0ZW5kcyBBYnNQYXRjaGVkSGVpZ2h0TWFwPFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRDb21wcmVzc0FsZ29yaXRtPj5cclxuICBpbXBsZW1lbnRzIElSZWFkb25seUFic1BhdGNoZWRIZWlnaHRNYXBUeXBwZWQ8VEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVENvbXByZXNzQWxnb3JpdG0+PiB7XHJcbiAgICBcclxuICAgIHByaXZhdGUgX2NvbXByZXNzQWxnb3JpdG06IFRUQ29tcHJlc3NBbGdvcml0bTtcclxuICAgIHByaXZhdGUgX3BhdGNoWEJhdGNoU2l6ZTogaW50O1xyXG4gICAgcHJpdmF0ZSBfbWF4U2FmZUZhY3RvcjogaW50O1xyXG5cclxuICAgIHB1YmxpYyBnZXQgY29tcHJlc3NBbGdvcml0bSgpIHsgcmV0dXJuIHRoaXMuX2NvbXByZXNzQWxnb3JpdG07IH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUJ1ZmZlcjxUQ29tcHJlc3MgZXh0ZW5kcyBUQ29tcHJlc3NBbGdvcml0bT4od2lkdGg6IGludCwgZGVwdGg6IGludCwgY2h1bmtTaXplOiBpbnQsIGFsZ29yaXRtOiBUQ29tcHJlc3MpOiBUSGVpZ2h0TWFwQXJyYXlUeXBlQmFnPFRDb21wcmVzcz4ge1xyXG5cclxuICAgICAgICBjb25zdCBudW1DaHVua3NYICAgPSAoKHdpZHRoIC0gMSkgLyAoY2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICBjb25zdCBudW1DaHVua3NaICAgPSAoKGRlcHRoIC0gMSkgLyAoY2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICBjb25zdCBjaHVua0FyclNpemUgPSBjaHVua1NpemUgKiogMjtcclxuICAgICAgICBjb25zdCBjaHVua0NvdW50ICAgPSBudW1DaHVua3NYICogbnVtQ2h1bmtzWjtcclxuICAgICAgICBjb25zdCBwYXRjaFhCYXRjaGluZ0NvdW50ID0gYWxnb3JpdG0gPT09IFwieDRcIiA/IDQgOiAyO1xyXG5cclxuICAgICAgICBpZiAobnVtQ2h1bmtzWCA8IHBhdGNoWEJhdGNoaW5nQ291bnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRoZSBjaHVua1NpemUgKCVkKSBzaG91bGQgYmUgYXQgbGVhc3QgKCVkKSB0aW1lcyBzbWFsbGVyIHRoYW4gdGhlIHdpZHRoICglZClcXG5cIiwgY2h1bmtTaXplLCBwYXRjaFhCYXRjaGluZ0NvdW50LCB3aWR0aCk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChhbGdvcml0bSA9PT0gXCJ4MlwiXHJcbiAgICAgICAgICAgID8gbmV3IFVpbnQxNkFycmF5KGNodW5rQXJyU2l6ZSAqIGNodW5rQ291bnQpXHJcbiAgICAgICAgICAgIDogbmV3IFVpbnQ4QXJyYXkoY2h1bmtBcnJTaXplICogY2h1bmtDb3VudClcclxuICAgICAgICApIGFzIHVua25vd24gYXMgVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUQ29tcHJlc3M+O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgZGF0YUNodW5rU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBhbGdvcml0bTogVFRDb21wcmVzc0FsZ29yaXRtKTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgZGF0YUNodW5rU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBhbGdvcml0bTogVFRDb21wcmVzc0FsZ29yaXRtLCBidWZmZXI6IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRDb21wcmVzc0FsZ29yaXRtPiwgaXRlbVNpemU/OiBpbnQsIGl0ZW1IZWlnaHRJbmRleE9mZnNldD86IGludCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYWxnb3JpdG06IFRUQ29tcHJlc3NBbGdvcml0bSwgYnVmZmVyPzogVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVENvbXByZXNzQWxnb3JpdG0+LCBpdGVtU2l6ZTogaW50ID0gZGVmYXVsdEhlaWdodFZlcnRleFNpemUsIGl0ZW1IZWlnaHRJbmRleE9mZnNldDogaW50ID0gMCkge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkRGF0YUNodW5rU2l6ZSA9IGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplKHBhdGNoU2l6ZSwgZGF0YUNodW5rU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgdG1wQnVmZmVyID0gYnVmZmVyID8/IENvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwLmNyZWF0ZUJ1ZmZlcih3aWR0aCwgZGVwdGgsIHZhbGlkRGF0YUNodW5rU2l6ZSwgYWxnb3JpdG0pO1xyXG4gICAgICAgIHN1cGVyKHdpZHRoLCBkZXB0aCwgcGF0Y2hTaXplLCBkYXRhQ2h1bmtTaXplLCBtYXhIZWlnaHQsIHRtcEJ1ZmZlciwgaXRlbVNpemUsIGl0ZW1IZWlnaHRJbmRleE9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5fY29tcHJlc3NBbGdvcml0bSA9IGFsZ29yaXRtO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSAgPSBhbGdvcml0bSA9PT0gXCJ4NFwiID8gNCA6IDI7XHJcbiAgICAgICAgdGhpcy5fbWF4U2FmZUZhY3RvciAgICA9IGFsZ29yaXRtID09PSBcIng0XCIgPyAweGZmIDogMHhmZmZmO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRDaHVua0luZGV4KGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IGludCB7XHJcbiAgICAgICAgcmV0dXJuIChjaHVua1ogKiB0aGlzLmRhdGFOdW1DaHVua3NYICsgY2h1bmtYKSAvIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSB8IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIGdldENodW5rQnVmZmVyKHR5cGU6IEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBGbG9hdDMyQXJyYXk7XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0Q2h1bmtCdWZmZXIodHlwZTogVWludDE2QXJyYXlDb25zdHJ1Y3RvciwgY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogVWludDE2QXJyYXk7XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0Q2h1bmtCdWZmZXIodHlwZTogVWludDhBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBVaW50OEFycmF5O1xyXG4gICAgcHVibGljIG92ZXJyaWRlIGdldENodW5rQnVmZmVyKHR5cGU6IGFueSwgY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogYW55IHtcclxuICAgICAgICBjb25zdCBzaXplICAgICAgICA9IHRoaXMuZGF0YUNodW5rU2l6ZSAqKiAyO1xyXG4gICAgICAgIGNvbnN0IGNodW5rTGV2ZWwgID0gKGNodW5rWiAqIHRoaXMuZGF0YU51bUNodW5rc1ggKyBjaHVua1gpIC8gdGhpcy5fcGF0Y2hYQmF0Y2hTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBjaHVua09mZnNldCA9IGNodW5rTGV2ZWwgKiBzaXplICogdGhpcy5kYXRhLkJZVEVTX1BFUl9FTEVNRU5UICogdGhpcy5fcGF0Y2hYQmF0Y2hTaXplO1xyXG4gICAgICAgIGNvbnN0IGNvdW50ICAgICAgID0gc2l6ZSAqIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSAqICh0aGlzLmRhdGEuQllURVNfUEVSX0VMRU1FTlQgLyB0eXBlLkJZVEVTX1BFUl9FTEVNRU5UKTtcclxuICAgICAgICByZXR1cm4gbmV3IHR5cGUodGhpcy5kYXRhLmJ1ZmZlciwgdGhpcy5kYXRhLmJ5dGVPZmZzZXQgKyBjaHVua09mZnNldCwgY291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yKTogRmxvYXQzMkFycmF5W107XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yKTogVWludDE2QXJyYXlbXTtcclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IFVpbnQ4QXJyYXlDb25zdHJ1Y3Rvcik6IFVpbnQ4QXJyYXlbXTtcclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IGFueSk6IGFueSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBBcnJheSgodGhpcy5kYXRhTnVtQ2h1bmtzWCAvIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSkgKiB0aGlzLmRhdGFOdW1DaHVua3NaKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBjaHVua1ogPSAwOyBjaHVua1ogPCB0aGlzLmRhdGFOdW1DaHVua3NaOyBjaHVua1orKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgY2h1bmtYID0gMDsgY2h1bmtYIDwgdGhpcy5kYXRhTnVtQ2h1bmtzWDsgY2h1bmtYICs9IHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gKGNodW5rWiAqIHRoaXMuZGF0YU51bUNodW5rc1ggKyBjaHVua1gpIC8gdGhpcy5fcGF0Y2hYQmF0Y2hTaXplIHwgMDtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSB0aGlzLmdldENodW5rQnVmZmVyKHR5cGUsIGNodW5rWCwgY2h1bmtaKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX2VuY29kZUhlaWdodEZhY3RvcihzdG9yZTogVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVENvbXByZXNzQWxnb3JpdG0+LCBpbmRleDogaW50LCB2YWx1ZTogZmxvYXQpIHtcclxuICAgICAgICBzdG9yZVtpbmRleF0gPSBNYXRoLm1pbih2YWx1ZSAqIHRoaXMuX21heFNhZmVGYWN0b3IsIHRoaXMuX21heFNhZmVGYWN0b3IpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX2RlY29kZUhlaWdodEZhY3RvcihzdG9yZTogVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVENvbXByZXNzQWxnb3JpdG0+LCBpbmRleDogaW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlW2luZGV4XSAvIHRoaXMuX21heFNhZmVGYWN0b3I7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRJbmRleCh4OiBpbnQsIHo6IGludCk6IGludCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvY2FsWCA9IHggJSB0aGlzLmRhdGFDaHVua1NpemU7XHJcbiAgICAgICAgY29uc3QgbG9jYWxaID0geiAlIHRoaXMuZGF0YUNodW5rU2l6ZTtcclxuICAgICAgICBjb25zdCBjaHVua1ggPSB4IC8gdGhpcy5kYXRhQ2h1bmtTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBjaHVua1ogPSB6IC8gdGhpcy5kYXRhQ2h1bmtTaXplIHwgMDtcclxuXHJcbiAgICAgICAgY29uc3QgY2h1bmtMZXZlbCAgPSAoY2h1bmtaICogdGhpcy5kYXRhTnVtQ2h1bmtzWCArIGNodW5rWCkgLyB0aGlzLl9wYXRjaFhCYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IGNodW5rT2Zmc2V0ID0gY2h1bmtMZXZlbCAqICh0aGlzLmRhdGFDaHVua1NpemUgKiogMik7XHJcbiAgICAgICAgY29uc3QgbG9jYWxJbmRleCAgPSBsb2NhbFogKiB0aGlzLmRhdGFDaHVua1NpemUgKyBsb2NhbFg7XHJcbiAgICAgICAgY29uc3QgbnVtQ29tcHJlc3MgPSBjaHVua1ggJSB0aGlzLl9wYXRjaFhCYXRjaFNpemU7IC8vIGNvbXByZXNzIGJ5IHggYXhpc1xyXG5cclxuICAgICAgICByZXR1cm4gKGNodW5rT2Zmc2V0ICsgbG9jYWxJbmRleCkgKiB0aGlzLl9wYXRjaFhCYXRjaFNpemUgKyBudW1Db21wcmVzcztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXA7IiwiaW1wb3J0IHsgZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9BYnNQYXRjaGVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBUQ29tcHJlc3NBbGdvcml0bSwgVEhlaWdodE1hcEFycmF5VHlwZUJhZyB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0NvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBIZWlnaHRNYXBBcnJUeXBlIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgVENvbXByZXNzQWxnb3JpdG1Pck5vbmUgPSBUQ29tcHJlc3NBbGdvcml0bSB8ICdub25lJztcclxuZXhwb3J0IHR5cGUgVFRUPFQgZXh0ZW5kcyBUQ29tcHJlc3NBbGdvcml0bU9yTm9uZT4gPVxyXG4gICAgVCBleHRlbmRzICdub25lJyA/IEhlaWdodE1hcEFyclR5cGUgOlxyXG4gICAgVCBleHRlbmRzICd4NCcgICA/IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VD4gOlxyXG4gICAgVCBleHRlbmRzICd4MicgICA/IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VD4gOlxyXG4gICAgbmV2ZXI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnVmZmVyPFRDb21wcmVzcyBleHRlbmRzIFRDb21wcmVzc0FsZ29yaXRtT3JOb25lPihcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBkZXB0aDogbnVtYmVyLFxyXG4gICAgcGF0Y2hTaXplOiBudW1iZXIsXHJcbiAgICBkYXRhQ2h1bmtTaXplOiBudW1iZXIsXHJcbiAgICBjb21wcmVzc0FsZ29yaXRtOiBUQ29tcHJlc3NcclxuKTogVFRUPFRDb21wcmVzcz4ge1xyXG5cclxuICAgIGlmICh0eXBlb2YgQW1tbyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiQW1tbyBub3QgZXhpc3RzXCIpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNodW5rU2l6ZSAgICA9IGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplKHBhdGNoU2l6ZSwgZGF0YUNodW5rU2l6ZSk7XHJcbiAgICBjb25zdCBudW1DaHVua3NYICAgPSAoKHdpZHRoIC0gMSkgLyAoY2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgIGNvbnN0IG51bUNodW5rc1ogICA9ICgoZGVwdGggLSAxKSAvIChjaHVua1NpemUgLSAxKSkgfCAwO1xyXG4gICAgY29uc3QgY2h1bmtBcnJTaXplID0gY2h1bmtTaXplICoqIDI7XHJcbiAgICBjb25zdCBjaHVua0NvdW50ICAgPSBudW1DaHVua3NYICogbnVtQ2h1bmtzWjtcclxuXHJcbiAgICBpZiAoY29tcHJlc3NBbGdvcml0bSAhPT0gXCJub25lXCIpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hYQmF0Y2hpbmdDb3VudCA9IGNvbXByZXNzQWxnb3JpdG0gPT09IFwieDRcIiA/IDQgOiAyO1xyXG5cclxuICAgICAgICBpZiAobnVtQ2h1bmtzWCA8IHBhdGNoWEJhdGNoaW5nQ291bnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRoZSBjaHVua1NpemUgKCVkKSBzaG91bGQgYmUgYXQgbGVhc3QgKCVkKSB0aW1lcyBzbWFsbGVyIHRoYW4gdGhlIHdpZHRoICglZClcXG5cIiwgY2h1bmtTaXplLCBwYXRjaFhCYXRjaGluZ0NvdW50LCB3aWR0aCk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgYnN6ID0gY29tcHJlc3NBbGdvcml0bSA9PT0gXCJ4MlwiID8gMiA6XHJcbiAgICAgICAgICAgICAgICBjb21wcmVzc0FsZ29yaXRtID09PSBcIng0XCIgPyAxIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0OyAvLyBmbG9hdDMyXHJcbiAgICBcclxuICAgIGNvbnN0IGxlbiA9IGNodW5rQXJyU2l6ZSAqIGNodW5rQ291bnQ7XHJcbiAgICBjb25zdCBwdHIgPSBBbW1vLl9tYWxsb2MoYnN6ICogbGVuKTtcclxuICAgIFxyXG4gICAgc3dpdGNoIChjb21wcmVzc0FsZ29yaXRtKSB7XHJcbiAgICAgICAgY2FzZSBcIng0XCI6IHJldHVybiBuZXcgVWludDhBcnJheShBbW1vLkhFQVBVOC5idWZmZXIsIHB0ciwgbGVuKSBhcyB1bmtub3duIGFzIFRUVDxUQ29tcHJlc3M+O1xyXG4gICAgICAgIGNhc2UgXCJ4MlwiOiByZXR1cm4gbmV3IFVpbnQxNkFycmF5KEFtbW8uSEVBUFUxNi5idWZmZXIsIHB0ciwgbGVuKSBhcyB1bmtub3duIGFzIFRUVDxUQ29tcHJlc3M+O1xyXG4gICAgICAgIGRlZmF1bHQ6ICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoQW1tby5IRUFQRjMyLmJ1ZmZlciwgcHRyLCBsZW4pIGFzIHVua25vd24gYXMgVFRUPFRDb21wcmVzcz47XHJcbiAgICB9XHJcbn0iLCJcclxuLyoqXHJcbiAqIFByaW1pdGl2ZSBvYmplY3QgZGVzY3JpYmluZyBob3cgdG8gc3VibWl0IGN1cnJlbnQgdmVydGV4L2luZGV4IGJ1ZmZlcnMuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElQcmltaXRpdmU8VE1hcCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4gPSBSZWNvcmQ8c3RyaW5nLCBhbnk+PiB7XHJcblxyXG4gICAgLyoqIFRydWUgaWYgZW5hYmxlZCAqL1xyXG4gICAgZW5hYmxlZDogYm9vbGVhbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0eXBlIG9mIHByaW1pdGl2ZSB0byByZW5kZXIuIENhbiBiZTpcclxuICAgICAqIFxyXG4gICAgICogLSB7QGxpbmsgcGN4LlBSSU1JVElWRV9QT0lOVFN9XHJcbiAgICAgKiAtIHtAbGluayBwY3guUFJJTUlUSVZFX0xJTkVTfVxyXG4gICAgICogLSB7QGxpbmsgcGN4LlBSSU1JVElWRV9MSU5FTE9PUH1cclxuICAgICAqIC0ge0BsaW5rIHBjeC5QUklNSVRJVkVfTElORVNUUklQfVxyXG4gICAgICogLSB7QGxpbmsgcGN4LlBSSU1JVElWRV9UUklBTkdMRVN9XHJcbiAgICAgKiAtIHtAbGluayBwY3guUFJJTUlUSVZFX1RSSVNUUklQfVxyXG4gICAgICogLSB7QGxpbmsgcGN4LlBSSU1JVElWRV9UUklGQU59XHJcbiAgICAgKi9cclxuICAgIHR5cGU6IG51bWJlcjtcclxuIFxyXG4gICAgLyoqIFRoZSBvZmZzZXQgb2YgdGhlIGZpcnN0IGluZGV4IG9yIHZlcnRleCB0byBkaXNwYXRjaCBpbiB0aGUgZHJhdyBjYWxsLiAqL1xyXG4gICAgYmFzZTogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGluZGljZXMgb3IgdmVydGljZXMgdG8gZGlzcGF0Y2ggaW4gdGhlIGRyYXcgY2FsbC4gKi9cclxuICAgIGNvdW50OiBudW1iZXI7XHJcblxyXG4gICAgLyoqIFRydWUgdG8gaW50ZXJwcmV0IHRoZSBwcmltaXRpdmUgYXMgaW5kZXhlZCwgdGhlcmVieSB1c2luZyB0aGUgY3VycmVudGx5IHNldCBpbmRleCBidWZmZXIgYW5kIGZhbHNlIG90aGVyd2lzZS4gKi9cclxuICAgIGluZGV4ZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgYXR0cmlidXRlczogVE1hcDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21NZXNoPFRNYXAgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gUmVjb3JkPHN0cmluZywgYW55Pj4ge1xyXG4gICAgcHJpbWl0aXZlQ2h1bmtzOiBJUHJpbWl0aXZlPFRNYXA+W11bXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21NZXNoSW5zdGFuY2U8VE1hcCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4gPSBSZWNvcmQ8c3RyaW5nLCBhbnk+PiB7XHJcbiAgICBtZXNoOiBwY3guTWVzaCAmIEN1c3RvbU1lc2g8VE1hcD47XHJcbn1cclxuXHJcbigoKSA9PiB7XHJcblxyXG4gICAgaWYgKCEod2luZG93IGFzIGFueSkuRVhQRVJJTUVOVEFMX1RFUlJBSU5fQ1VTVE9NX1JFTkRFUikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBjb25zdCBvcmlnaW5hbERyYXdJbnN0YW5jZSA9IHBjLkZvcndhcmRSZW5kZXJlci5wcm90b3R5cGUuZHJhd0luc3RhbmNlO1xyXG5cclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHBjLkZvcndhcmRSZW5kZXJlci5wcm90b3R5cGUuZHJhd0luc3RhbmNlID0gZnVuY3Rpb24oXHJcbiAgICAgICAgZGV2aWNlOiBwY3guV2ViZ2xHcmFwaGljc0RldmljZSxcclxuICAgICAgICBtZXNoSW5zdGFuY2U6IHBjeC5NZXNoSW5zdGFuY2UgJiBDdXN0b21NZXNoSW5zdGFuY2UsXHJcbiAgICAgICAgbWVzaDogcGN4Lk1lc2ggJiBDdXN0b21NZXNoLFxyXG4gICAgICAgIHN0eWxlOiBudW1iZXIsXHJcbiAgICAgICAgbm9ybWFsPzogYm9vbGVhblxyXG4gICAgKSB7XHJcblxyXG4gICAgICAgIGlmIChtZXNoLnByaW1pdGl2ZUNodW5rcyAmJiBkZXZpY2UuaXNXZWJHTDIpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubW9kZWxNYXRyaXhJZC5zZXRWYWx1ZSgobWVzaEluc3RhbmNlLm5vZGUgYXMgYW55KS53b3JsZFRyYW5zZm9ybS5kYXRhKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3JtYWxNYXRyaXhJZC5zZXRWYWx1ZShtZXNoSW5zdGFuY2Uubm9kZS5ub3JtYWxNYXRyaXguZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBrYiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBwcmltaXRpdmUgb2YgbWVzaC5wcmltaXRpdmVDaHVua3Nbc3R5bGVdKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByaW1pdGl2ZS5lbmFibGVkKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmltaXRpdmUuYXR0cmlidXRlcykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzY29wZUlkIGluIHByaW1pdGl2ZS5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2Uuc2NvcGUucmVzb2x2ZShzY29wZUlkKS5zZXRWYWx1ZShwcmltaXRpdmUuYXR0cmlidXRlc1tzY29wZUlkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRldmljZS5kcmF3KHByaW1pdGl2ZSwgMCwga2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIGtiID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHsgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvcmlnaW5hbERyYXdJbnN0YW5jZS5jYWxsKHRoaXMsIGRldmljZSwgbWVzaEluc3RhbmNlLCBtZXNoLCBzdHlsZSwgbm9ybWFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KSgpOyIsImltcG9ydCB7IGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR3Jhc3NGaWVsZFRleHR1cmUge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTUFYX0NIQU5FTCA9IDg7XHJcblxyXG4gICAgcHJpdmF0ZSBfdGV4dHVyZTogcGN4LlRleHR1cmU7XHJcbiAgICBwcml2YXRlIF9idWZmZXI6IFVpbnQ4QXJyYXk7XHJcbiAgICBwcml2YXRlIF93aWR0aDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfZGVwdGg6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRleHR1cmUoKSB7IHJldHVybiB0aGlzLl90ZXh0dXJlOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgd2lkdGg6IG51bWJlciwgZGVwdGg6IG51bWJlciwgYnVmZmVyPzogVWludDhBcnJheSkge1xyXG5cclxuICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuX2RlcHRoID0gZGVwdGg7XHJcblxyXG4gICAgICAgIGNvbnN0IHcgPSAod2lkdGggLSAxKSAvIDQgKyAxO1xyXG4gICAgICAgIGNvbnN0IGQgPSAoZGVwdGggLSAxKSAvIDQgKyAxO1xyXG5cclxuICAgICAgICB0aGlzLl9idWZmZXIgPSBidWZmZXIgPz8gbmV3IFVpbnQ4QXJyYXkodyAqIGQgKiA0KTsgLy8gPT4gMSBieXRlID0gOCBiaXRzID0+IDggLyAyID0gNCBiaXQgZm9yIDggbGV2ZWxzXHJcbiAgICAgICAgdGhpcy5fdGV4dHVyZSA9IG5ldyBwYy5UZXh0dXJlKGdyYXBoaWNzRGV2aWNlLCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiB3LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGQsXHJcbiAgICAgICAgICAgIGZvcm1hdDogcGMuUElYRUxGT1JNQVRfUkdCQThVLFxyXG4gICAgICAgICAgICBtaXBtYXBzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWluRmlsdGVyOiBwYy5GSUxURVJfTkVBUkVTVCxcclxuICAgICAgICAgICAgbWFnRmlsdGVyOiBwYy5GSUxURVJfTkVBUkVTVCxcclxuICAgICAgICAgICAgYWRkcmVzc1U6IHBjLkFERFJFU1NfQ0xBTVBfVE9fRURHRSxcclxuICAgICAgICAgICAgYWRkcmVzc1Y6IHBjLkFERFJFU1NfQ0xBTVBfVE9fRURHRSxcclxuICAgICAgICAgICAgZmxpcFk6IGdyYXBoaWNzRGV2aWNlLmlzV2ViR1BVLFxyXG4gICAgICAgICAgICBsZXZlbHM6IFt0aGlzLl9idWZmZXJdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fdGV4dHVyZT8uZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRDaGFubmVsKHg6IGludCwgejogaW50LCBjaGFubmVsOiBpbnQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9ICh4ICsgeiAqIHRoaXMuX3dpZHRoKSAvIDQgfCAwO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fYnVmZmVyW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UGl4ZWwoKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl90ZXh0dXJlKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLl90ZXh0dXJlLmRldmljZTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUNodW5rU2l6ZSA9IDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRldmljZS5pc1dlYkdMMikge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsID0gKGRldmljZSBhcyBwY3guV2ViZ2xHcmFwaGljc0RldmljZSkuZ2w7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlRm9ybWF0ID0gdGhpcy5fdGV4dHVyZS5pbXBsLl9nbEZvcm1hdDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmVQaXhlbFQgPSB0aGlzLl90ZXh0dXJlLmltcGwuX2dsUGl4ZWxUeXBlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZVRhcmdldCA9IHRoaXMuX3RleHR1cmUuaW1wbC5fZ2xUYXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlT2JqZWN0ID0gdGhpcy5fdGV4dHVyZS5pbXBsLl9nbFRleHR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUodGV4dHVyZVRhcmdldCwgdGV4dHVyZU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBnbC50ZXhTdWJJbWFnZTNEKGdsLlRFWFRVUkVfMkRfQVJSQVksIDAsIDAsIDAsIDAsIGRhdGFDaHVua1NpemUsIGRhdGFDaHVua1NpemUsIDEsIHRleHR1cmVGb3JtYXQsIHRleHR1cmVQaXhlbFQsIGJ1ZmZlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGV2aWNlLmlzV2ViR1BVKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2ViZ3B1ICA9IChkZXZpY2UgYXMgYW55KS53Z3B1IGFzIEdQVURldmljZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSAodGhpcy5fdGV4dHVyZS5pbXBsLmdwdVRleHR1cmUpIGFzIEdQVVRleHR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgd2ViZ3B1LnF1ZXVlLndyaXRlVGV4dHVyZShcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogWzAsIDAsIDBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaXBMZXZlbDogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlc1BlclJvdzogNCAqIGRhdGFDaHVua1NpemUsIC8vIGFsd2F5cyA0IGZvciByZ2JhIGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzUGVySW1hZ2U6IGRhdGFDaHVua1NpemVcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGRhdGFDaHVua1NpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogZGF0YUNodW5rU2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4vVHlwZXMubWpzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGV4dCh2YWw6IG51bWJlciwgbWluV2lkdGg6IG51bWJlciwgcHJlZml4OiBzdHJpbmcpIHtcclxuXHJcbiAgICBjb25zdCBzdHIgPSB2YWwudG9TdHJpbmcoKTtcclxuICAgIGNvbnN0IHN0ckxlbiA9IHN0ci5sZW5ndGg7XHJcbiAgICBjb25zdCBhcHBlbmRDb3VudCA9IG1pbldpZHRoIC0gc3RyTGVuO1xyXG5cclxuICAgIGxldCByZXN1bHQgPSBzdHI7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBlbmRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gcHJlZml4ICsgcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcclxuXHRyZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHZhbHVlKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByYW5kb21GbG9hdCgpIHtcclxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tRmxvYXRSYW5nZShzdGFydDogZmxvYXQsIGVuZDogZmxvYXQpIHtcclxuXHJcbiAgICBpZiAoZW5kID09IHN0YXJ0KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByYW5kb20gcmFuZ2VcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVsdGEgPSBlbmQgLSBzdGFydDtcclxuXHJcbiAgICBjb25zdCByYW5kb21WYWx1ZSA9IHJhbmRvbUZsb2F0KCkgKiBkZWx0YSArIHN0YXJ0O1xyXG5cclxuICAgIHJldHVybiByYW5kb21WYWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNOZXh0UG93ZXJPZlR3byh4OiBpbnQpOiBpbnQge1xyXG4gICAgXHJcbiAgICBsZXQgcmV0ID0gMTtcclxuXHJcbiAgICBpZiAoeCA9PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIDI7XHJcbiAgICB9XHJcblxyXG4gICAgd2hpbGUgKHJldCA8IHgpIHtcclxuICAgICAgICByZXQgPSByZXQgKiAyO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXQ7XHJcbn1cclxuXHJcbi8qKiBBIHJhbmRvbSBudW1iZXIgZnJvbSAtMS4wIHRvIDEuMCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbnJhbmQoKSB7XHJcblx0cmV0dXJuIE1hdGgucmFuZG9tKCkgKiAyLjAgLSAxLjA7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzZXRQcmVjaXNpb24gPSAoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgc2hhZGVyQ29kZTogc3RyaW5nKSA9PiB7XHJcbiAgICByZXR1cm4gXCJwcmVjaXNpb24gXCIgKyBncmFwaGljc0RldmljZS5wcmVjaXNpb24gKyBcIiBmbG9hdDtcXG5cIiArIHNoYWRlckNvZGU7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBsaXR0bGVFbmRpYW4gPSAoKCkgPT4ge1xyXG4gICAgY29uc3QgdWludDhBcnJheSAgPSBuZXcgVWludDhBcnJheShbMHhBQSwgMHhCQl0pO1xyXG4gICAgY29uc3QgdWludDE2YXJyYXkgPSBuZXcgVWludDE2QXJyYXkodWludDhBcnJheS5idWZmZXIpO1xyXG4gICAgcmV0dXJuIHVpbnQxNmFycmF5WzBdID09PSAweEJCQUE7XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tTdXBwb3J0UjMyRlRleHR1cmUgPSAoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkgPT4ge1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRPRE86IG5lZWQgbW9yZSB0ZXN0Li4uXHJcbiAgICAgICAgLy8gVE9ETzogb24gaXBob25lIG5vdCB3b3JrIHIzMmYgdGV4dHVyZXNcclxuICAgICAgICBpZiAobmF2aWdhdG9yLnBsYXRmb3JtLm1hdGNoKC9pUGhvbmV8aVBvZHxpUGFkLykgIT09IG51bGwgfHxcclxuICAgICAgICAgICAgbmF2aWdhdG9yLnBsYXRmb3JtLnN0YXJ0c1dpdGgoXCJNYWNcIikgJiYgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZ3JhcGhpY3NEZXZpY2UuaXNXZWJHTDIpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdsID0gKGdyYXBoaWNzRGV2aWNlIGFzIHBjeC5XZWJnbEdyYXBoaWNzRGV2aWNlKS5nbDtcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2wuZ2V0RXh0ZW5zaW9uKFwiRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdFwiKTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZ2wuZ2V0RXh0ZW5zaW9uKFwiT0VTX3RleHR1cmVfZmxvYXRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghIXJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChleCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFRIZWlnaHRNYXBGb3JtYXQgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9BYnNIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB7IGxpdHRsZUVuZGlhbiB9IGZyb20gXCIuLi9TaGFyZWQvVXRpbHMubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgdmVydGV4Q29vcmRBdHRyTmFtZSAgID0gXCJ2ZXJ0ZXhfcG9zaXRpb25cIjtcclxuZXhwb3J0IGNvbnN0IHZlcnRleEhlaWdodEF0dHJOYW1lICA9IFwidmVydGV4X2hlaWdodFwiO1xyXG5leHBvcnQgY29uc3QgdmVydGV4Tm9ybWFsQXR0ck5hbWUgID0gXCJ2ZXJ0ZXhfbm9ybWFsXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGF0Y2hJbnN0Q29vcmRPZmZzZXRQYXJhbU5hbWUgPSBcInZlcnRleF9wb3N0aW9uX29mZnNldFwiO1xyXG5leHBvcnQgY29uc3QgcGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSAgICAgPSBcInVUZXJyYWluUGF0Y2hDb29yZE9mZnNldFwiO1xyXG5leHBvcnQgY29uc3QgcGF0Y2hMb2RDb3JlUGFyYW1OYW1lICAgICAgICAgPSBcInVUZXJyYWluUGF0Y2hMb2RDb3JlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgdGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZSA9IFwidVRlcnJhaW5IZWlnaHRNYXBcIjtcclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5NYXhIZWlnaHRQYXJhbU5hbWUgPSBcInVUZXJyYWluTWF4SGVpZ2h0XCI7XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluU3BsYXRNYXBQYXJhbU5hbWUgID0gXCJ1VGVycmFpblNwbGF0TWFwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgbGl0dGxlRW5kaWFuVmFsdWUgPSBsaXR0bGVFbmRpYW4gPyAndHJ1ZScgOiAnZmFsc2UnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmluZXNWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICNkZWZpbmUgSE1fTlVNX0NIVU5LU19YICAgICAoJSVITV9OVU1fQ0hVTktTX1glJSlcclxuICAgICNkZWZpbmUgSE1fTlVNX0NIVU5LU19YX1UgICAodWludChITV9OVU1fQ0hVTktTX1gpKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFICAgICAgICglJUhNX0NIVU5LX1NJWkUlJSlcclxuICAgICNkZWZpbmUgSE1fQ0hVTktfU0laRV9VICAgICAodWludChITV9DSFVOS19TSVpFKSlcclxuICAgICNkZWZpbmUgSE1fQ0hVTktfU0laRV9NMV9VICAoSE1fQ0hVTktfU0laRV9VIC0gMXUpXHJcbiAgICAjZGVmaW5lIEhNX0NIVU5LX1NJWkVfRiAgICAgKGZsb2F0KEhNX0NIVU5LX1NJWkUpKVxyXG4gICAgI2RlZmluZSBUUl9TSVpFICAgICAgICAgICAgIChpdmVjMiglJVRSX1NJWkVfWCUlLCAlJVRSX1NJWkVfWiUlKSlcclxuICAgICNkZWZpbmUgVFJfU0laRV9GICAgICAgICAgICAodmVjMiglJVRSX1NJWkVfWF9GJSUsICUlVFJfU0laRV9aX0YlJSkpXHJcbiAgICAjZGVmaW5lIFRSX1NJWkVfVSAgICAgICAgICAgKHV2ZWMyKFRSX1NJWkUpKVxyXG4gICAgI2RlZmluZSBUUl9TSVpFX0hfRiAgICAgICAgIChUUl9TSVpFX0YgLyAyLjApXHJcbiAgICAjZGVmaW5lIFRSX1NJWkVfSF9OX0YgICAgICAgKC1UUl9TSVpFX0hfRilcclxuICAgICNkZWZpbmUgVFJfUEFUQ0hfU0laRV9YICAgICAoJSVUUl9QQVRDSF9TSVpFX1glJSlcclxuICAgICNkZWZpbmUgVFJfUEFUQ0hfU0laRV9NMSAgICAoVFJfUEFUQ0hfU0laRV9YIC0gMS4wKVxyXG4gICAgI2RlZmluZSBUUl9QQVRDSF9TSVpFX00xX0ggIChUUl9QQVRDSF9TSVpFX00xIC8gMi4wKVxyXG4gICAgI2RlZmluZSBUUl9QQVRDSF9TSVpFX00xX0YgICh2ZWMyKFRSX1BBVENIX1NJWkVfTTFfSCwgVFJfUEFUQ0hfU0laRV9NMV9IKSlcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlT3JpZ2luYWxWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIGF0dHJpYnV0ZSB1dmVjMiAke3ZlcnRleENvb3JkQXR0ck5hbWV9O1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IE9MRF9iYXNlRm9ySW5zdGFuY2luZ1ZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgYXR0cmlidXRlIHV2ZWMyICR7dmVydGV4Q29vcmRBdHRyTmFtZX07XHJcbiAgICBhdHRyaWJ1dGUgdXZlYzIgJHtwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZX07XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZUZvckluc3RhbmNpbmdWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIGF0dHJpYnV0ZSB1dmVjMiAke3ZlcnRleENvb3JkQXR0ck5hbWV9O1xyXG4gICAgYXR0cmlidXRlIHV2ZWMyICR7cGF0Y2hJbnN0Q29vcmRPZmZzZXRQYXJhbU5hbWV9O1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJhc2VGb3JDb21iaW5lSW5zdGFuY2luZ1ZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgYXR0cmlidXRlIHV2ZWMyICR7dmVydGV4Q29vcmRBdHRyTmFtZX07XHJcbiAgICBhdHRyaWJ1dGUgdXZlYzQgJHtwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZX07XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgaGVpZ2h0TWFwU2FtcGxlckJ1Z0ZpeCA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHVuaWZvcm0gaGlnaHAgJSVIRUlHSFRfTUFQX1NBTVBMRVIlJSAke3RlcnJhaW5IZWlnaHRNYXBQYXJhbU5hbWV9O1xyXG4gICAgXHJcbiAgICAjaWYgZGVmaW5lZCAoV0VCR1BVKVxyXG4gICAgICAgICNkZWZpbmUgZml4XyR7dGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZX0gaGlnaHAgJSVIRUlHSFRfTUFQX1NBTVBMRVIlJSgke3RlcnJhaW5IZWlnaHRNYXBQYXJhbU5hbWV9X3RleHR1cmUsICR7dGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZX1fc2FtcGxlcilcclxuICAgICNlbHNlXHJcbiAgICAgICAgI2RlZmluZSBmaXhfJHt0ZXJyYWluSGVpZ2h0TWFwUGFyYW1OYW1lfSAke3RlcnJhaW5IZWlnaHRNYXBQYXJhbU5hbWV9XHJcbiAgICAjZW5kaWZcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlQ2xlYXJWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHVuaWZvcm0gbWF0NCBtYXRyaXhfdmlld1Byb2plY3Rpb247XHJcbiAgICB1bmlmb3JtIG1hdDQgbWF0cml4X21vZGVsO1xyXG4gICAgdW5pZm9ybSBtYXQzIG1hdHJpeF9ub3JtYWw7XHJcblxyXG4gICAgdW5pZm9ybSBtZWRpdW1wIHZlYzIgJHtwYXRjaENvb3JkT2Zmc2V0UGFyYW1OYW1lfTtcclxuICAgIHVuaWZvcm0gbWVkaXVtcCBmbG9hdCAke3BhdGNoTG9kQ29yZVBhcmFtTmFtZX07XHJcblxyXG4gICAgdW5pZm9ybSBtZWRpdW1wIGZsb2F0ICR7dGVycmFpbk1heEhlaWdodFBhcmFtTmFtZX07XHJcblxyXG4gICAgdmVjMiBkQ3VycmVudFRlcnJhaW5YWjtcclxuICAgIGZsb2F0IGRDdXJyZW50VGVycmFpbkhlaWdodDtcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlQ2xlYXJTdWJWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzMgZFBvc2l0aW9uVztcclxuICAgIG1hdDQgZE1vZGVsTWF0cml4O1xyXG4gICAgbWF0MyBkTm9ybWFsTWF0cml4O1xyXG5cclxuICAgIHZlYzMgZEN1cnJlbnRUZXJyYWluTm9ybWFsO1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGN1cnJlbnRUZXJyYWluWFpGb3JJbnN0YW5jaW5nQ2h1bmtWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzIgZ2V0Q3VycmVudFRlcnJhaW5YWigpIHtcclxuICAgICAgICByZXR1cm4gdmVjMigke3ZlcnRleENvb3JkQXR0ck5hbWV9ICsgJHtwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZX0pO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGN1cnJlbnRUZXJyYWluWFpGb3JDb21iaW5lSW5zdGFuY2luZ0NodW5rVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWM0IHJvdGF0ZVBhdGNoWFpDb2ZmWzRdID0gdmVjNFs0XShcclxuICAgICAgICB2ZWM0KCAxLjAsICAwLjAsICAwLjAsICAxLjApLFxyXG4gICAgICAgIHZlYzQoIDAuMCwgIDEuMCwgLTEuMCwgIDAuMCksXHJcbiAgICAgICAgdmVjNCgtMS4wLCAgMC4wLCAgMC4wLCAtMS4wKSxcclxuICAgICAgICB2ZWM0KCAwLjAsIC0xLjAsICAxLjAsICAwLjApXHJcbiAgICApO1xyXG5cclxuICAgIHZlYzIgcm90YXRlUGF0Y2hYWih2ZWMyIGNvb3JkLCB1aW50IGFuZ2xlKSB7XHJcbiAgICAgICAgdmVjMiBvZmZzZXQgPSBjb29yZCAtIFRSX1BBVENIX1NJWkVfTTFfSDtcclxuICAgICAgICB2ZWM0IHRyYW5zZiA9IHJvdGF0ZVBhdGNoWFpDb2ZmW2FuZ2xlXTtcclxuICAgICAgICByZXR1cm4gVFJfUEFUQ0hfU0laRV9NMV9IICsgb2Zmc2V0Lnh4ICogdHJhbnNmLnh6ICsgb2Zmc2V0Lnl5ICogdHJhbnNmLnl3O1xyXG4gICAgfVxyXG5cclxuICAgIHZlYzIgZ2V0Q3VycmVudFRlcnJhaW5YWigpIHtcclxuICAgICAgICB2ZWMyIG9yZ1haID0gdmVjMigke3ZlcnRleENvb3JkQXR0ck5hbWV9KTtcclxuICAgICAgICB1aW50IGFuZ2xlID0gJHtwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZX0uejtcclxuICAgICAgICB2ZWMyIHJvdFhaID0gcm90YXRlUGF0Y2hYWihvcmdYWiwgYW5nbGUpO1xyXG4gICAgICAgIHJldHVybiByb3RYWiArIHZlYzIoJHtwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZX0ueHkpICogVFJfUEFUQ0hfU0laRV9NMTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBjdXJyZW50VGVycmFpblhaQ2h1bmtWUyA9IFxyXG5gXHJcbiAgICB2ZWMyIGdldEN1cnJlbnRUZXJyYWluWFooKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlYzIoJHt2ZXJ0ZXhDb29yZEF0dHJOYW1lfSkgKyAke3BhdGNoQ29vcmRPZmZzZXRQYXJhbU5hbWV9O1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5Db29yZHNDaHVua1ZTID1cclxuYFxyXG4gICAgdmVjMiBnZXRDdXJyZW50VGVycmFpblV2Q29vcmQoKSB7XHJcbiAgICAgICAgdmVjMiB4eiA9IGRDdXJyZW50VGVycmFpblhaO1xyXG4gICAgICAgIHZlYzIgdXYgPSAoeHogKyAwLjUpIC8gVFJfU0laRV9GO1xyXG4gICAgICAgIHJldHVybiB1djtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdXZlYzIgY2xhbXBUZXJyYWluWFoodmVjMiB4eikge1xyXG4gICAgICAgIHJldHVybiB1dmVjMihjbGFtcCh4eiwgdmVjMigwLjApLCBUUl9TSVpFX0YpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmVjMiBnZXRUZXJyYWluWFooaXZlYzIgb2Zmc2V0KSB7XHJcbiAgICAgICAgcmV0dXJuIGRDdXJyZW50VGVycmFpblhaICsgdmVjMihvZmZzZXQpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRGYWN0b3JSMzJGVlMgPSBcclxuYFxyXG4gICAgZmxvYXQgZ2V0VGVycmFpbkhlaWdodEZhY3RvckZyb21UZXh0dXJlKHV2ZWMzIGNvb3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRleGVsRmV0Y2goZml4XyR7dGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZX0sIGl2ZWMzKGNvb3JkKSwgMCkucjtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzYzODI3ODM2L2lzLWl0LXBvc3NpYmxlLXRvLWRvLWEtcmdiYS10by1mbG9hdC1hbmQtYmFjay1yb3VuZC10cmlwLWFuZC1yZWFkLXRoZS1waXhlbHMtaW5cclxuLy8gbm90ZTogdGhlIDAuMXMgaGVyZSBhbiB0aGVyZSBhcmUgdm9vZG9vIHJlbGF0ZWQgdG8gcHJlY2lzaW9uXHJcbi8qXHJcbiAgICBmbG9hdCByZ2JhOHVUb0Zsb2F0MCh1dmVjNCB2KSB7XHJcbiAgICAgICAgdmVjNCBiaXRzICA9IHZlYzQoJHtsaXR0bGVFbmRpYW4gPyAndicgOiAndi5hYmdyJ30pO1xyXG4gICAgICAgIGZsb2F0IHNpZ24gPSBtaXgoLTEuMCwgMS4wLCBzdGVwKGJpdHNbM10sIDEyOC4wKSk7XHJcbiAgICAgICAgZmxvYXQgZXhwbyA9IGZsb29yKG1vZChiaXRzWzNdICsgMC4xLCAxMjguMCkpICogMi4wICsgZmxvb3IoKGJpdHNbMl0gKyAwLjEpIC8gMTI4LjApIC0gMTI3LjA7XHJcbiAgICAgICAgZmxvYXQgc2lnICA9IGJpdHNbMF0gKyBiaXRzWzFdICogMjU2LjAgKyBmbG9vcihtb2QoYml0c1syXSArIDAuMSwgMTI4LjApKSAqIDI1Ni4wICogMjU2LjA7XHJcbiAgICAgICAgcmV0dXJuIHNpZ24gKiAoMS4wICsgc2lnIC8gODM4ODYwNy4wKSAqIHBvdygyLjAsIGV4cG8pO1xyXG4gICAgfVxyXG4qL1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRGYWN0b3JSR0JBOFVWUyA9XHJcbmAgICAgXHJcbiAgICBmbG9hdCByZ2JhOHVUb0Zsb2F0KHV2ZWM0IHYpIHtcclxuICAgICAgICB1dmVjNCBiaXRzID0gJHtsaXR0bGVFbmRpYW4gPyAndicgOiAndi5hYmdyJ307XHJcbiAgICAgICAgZmxvYXQgc2lnbiA9IDIuMCAqIHN0ZXAoZmxvYXQoYml0c1szXSksIDEyOC4wKSAtIDEuMDtcclxuICAgICAgICBmbG9hdCBleHBvID0gZmxvYXQoKGJpdHNbM10gJiAxMjd1KSAqIDJ1ICsgYml0c1syXSAvIDEyOHUpIC0gMTI3LjA7XHJcbiAgICAgICAgZmxvYXQgc2lnICA9IGZsb2F0KGJpdHNbMF0gKyBiaXRzWzFdICogMjU2dSArIChiaXRzWzJdICYgMTI3dSkgKiA2NTUzNnUpO1xyXG4gICAgICAgIHJldHVybiBzaWduICogKDEuMCArIHNpZyAvIDgzODg2MDcuMCkgKiBwb3coMi4wLCBleHBvKTtcclxuICAgIH1cclxuXHJcbiAgICBmbG9hdCBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yRnJvbVRleHR1cmUodXZlYzMgY29vcmQpIHtcclxuICAgICAgICB1dmVjNCByZ2JhID0gdGV4ZWxGZXRjaChmaXhfJHt0ZXJyYWluSGVpZ2h0TWFwUGFyYW1OYW1lfSwgaXZlYzMoY29vcmQpLCAwKTtcclxuICAgICAgICByZXR1cm4gcmdiYTh1VG9GbG9hdChyZ2JhKTtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIENvbXByZXNzIGhlaWdodCBieSB4IGNvb3JkIFtwYXRjaDAsIHBhdGNoMV0gLi4uXHJcbi8vIHNlZTogQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXAgZmlsZVxyXG5leHBvcnQgY29uc3QgdGVycmFpbkhlaWdodEZhY3RvclJHMTZVWDJWUyA9XHJcbmBcclxuICAgIGZsb2F0IGdldFRlcnJhaW5IZWlnaHRGYWN0b3JGcm9tVGV4dHVyZSh1dmVjMyBjb29yZCkge1xyXG5cclxuICAgICAgICB1aW50IGxldmVsICAgID0gY29vcmQuYjtcclxuICAgICAgICB1aW50IG5ld0xldmVsID0gbGV2ZWwgLyAydTtcclxuICAgICAgICB1aW50IHNoaWZ0ICAgID0gbGV2ZWwgJiAxdTtcclxuXHJcbiAgICAgICAgdXZlYzQgcmdiYSA9IHRleGVsRmV0Y2goZml4XyR7dGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZX0sIGl2ZWMzKGNvb3JkLnh5LCBuZXdMZXZlbCksIDApO1xyXG5cclxuICAgICAgICByZXR1cm4gZmxvYXQocmdiYVtzaGlmdF0pIC8gNjU1MzUuMDtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIENvbXByZXNzIGhlaWdodCBieSB4IGNvb3JkIFtwYXRjaDAsIHBhdGNoMSwgcGF0Y2gyLCBwYXRjaDNdIC4uLlxyXG4vLyBzZWU6IENvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwIGZpbGVcclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRGYWN0b3JSR0JBOFVYNFZTID1cclxuYFxyXG4gICAgZmxvYXQgZ2V0VGVycmFpbkhlaWdodEZhY3RvckZyb21UZXh0dXJlKHV2ZWMzIGNvb3JkKSB7XHJcblxyXG4gICAgICAgIHVpbnQgbGV2ZWwgICAgPSBjb29yZC5iO1xyXG4gICAgICAgIHVpbnQgbmV3TGV2ZWwgPSBsZXZlbCAvIDR1O1xyXG4gICAgICAgIHVpbnQgc2hpZnQgICAgPSBsZXZlbCAmIDN1O1xyXG5cclxuICAgICAgICB1dmVjNCByZ2JhID0gdGV4ZWxGZXRjaChmaXhfJHt0ZXJyYWluSGVpZ2h0TWFwUGFyYW1OYW1lfSwgaXZlYzMoY29vcmQueHksIG5ld0xldmVsKSwgMCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmbG9hdChyZ2JhW3NoaWZ0XSkgLyAyNTUuMDtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluQ2h1bmtCdWZmZXJDb29yZFZTID1cclxuYFxyXG4gICAgdXZlYzMgZ2V0VGVycmFpbkNodW5rQnVmZmVyQ29vcmQodXZlYzIgeHopIHtcclxuXHJcbiAgICAgICAgdXZlYzIgY2sgPSB4eiAvIEhNX0NIVU5LX1NJWkVfVTtcclxuXHJcbiAgICAgICAgdWludCBsb2NhbFggPSB4elswXSAlIEhNX0NIVU5LX1NJWkVfVTtcclxuICAgICAgICB1aW50IGxvY2FsWiA9IHh6WzFdICUgSE1fQ0hVTktfU0laRV9VO1xyXG4gICAgICAgIHVpbnQgbGV2ZWwgID0gY2tbMV0gKiBITV9OVU1fQ0hVTktTX1hfVSArIGNrWzBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdXZlYzMobG9jYWxYLCBsb2NhbFosIGxldmVsKTtcclxuICAgIH1cclxuXHJcbiAgICB1dmVjMyBnZXRUZXJyYWluQ2h1bmtCdWZmZXJSZWxhdGl2ZUNvb3JkKGl2ZWMyIG9mZnNldCkge1xyXG4gICAgICAgIHZlYzIgIG9jID0gZ2V0VGVycmFpblhaKG9mZnNldCk7XHJcbiAgICAgICAgdXZlYzIgeHogPSBjbGFtcFRlcnJhaW5YWihvYyk7XHJcbiAgICAgICAgcmV0dXJuIGdldFRlcnJhaW5DaHVua0J1ZmZlckNvb3JkKHh6KTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluSGVpZ2h0RmFjdG9yQ2h1bmtWUyA9IFxyXG5gXHJcbiAgICBmbG9hdCBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yKGl2ZWMyIG9mZnNldCkge1xyXG4gICAgICAgIHV2ZWMzIGNvb3JkID0gZ2V0VGVycmFpbkNodW5rQnVmZmVyUmVsYXRpdmVDb29yZChvZmZzZXQpO1xyXG4gICAgICAgIHJldHVybiBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yRnJvbVRleHR1cmUoY29vcmQpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRDaHVua1ZTID1cclxuYFxyXG4gICAgZmxvYXQgZ2V0VGVycmFpbkhlaWdodChpdmVjMiBvZmZzZXQpIHtcclxuICAgICAgICByZXR1cm4gZ2V0VGVycmFpbkhlaWdodEZhY3RvcihvZmZzZXQpICogJHt0ZXJyYWluTWF4SGVpZ2h0UGFyYW1OYW1lfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZmxvYXQgZ2V0Q3VycmVudFRlcnJhaW5IZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldFRlcnJhaW5IZWlnaHQoaXZlYzIoMCwgMCkpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluc3RhbmNpbmdWUyA9IGBgO1xyXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtSW5zdGFuY2luZ1ZTID0gYGA7XHJcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1EZWNsVlMgPSBgYDtcclxuXHJcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1WUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIC8vdmFyeWluZyBmbG9hdCB2UGF0Y2hMb2Q7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2Q29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdkdyaWRQb3NpdGlvbjtcclxuXHJcbiAgICBtYXQ0IGdldE1vZGVsTWF0cml4KCkge1xyXG4gICAgICAgIHJldHVybiBtYXRyaXhfbW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgdmVjMyBnZXRXb3JsZFBvc2l0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBkUG9zaXRpb25XO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2ZWM0IGdldFBvc2l0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgZE1vZGVsTWF0cml4ID0gZ2V0TW9kZWxNYXRyaXgoKTtcclxuICAgICAgICBkQ3VycmVudFRlcnJhaW5YWiA9IGdldEN1cnJlbnRUZXJyYWluWFooKTtcclxuICAgICAgICBkQ3VycmVudFRlcnJhaW5IZWlnaHQgPSBnZXRDdXJyZW50VGVycmFpbkhlaWdodCgpO1xyXG5cclxuICAgICAgICB2ZWMyIGNlbnRlcmVkWFogPSBUUl9TSVpFX0hfTl9GICsgZEN1cnJlbnRUZXJyYWluWFo7XHJcbiAgICAgICAgdmVjNCBsb2NhbFBvcyAgID0gdmVjNChjZW50ZXJlZFhaLnIsIGRDdXJyZW50VGVycmFpbkhlaWdodCwgY2VudGVyZWRYWi5nLCAxLjApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZlYzQgcG9zVyAgICAgID0gZE1vZGVsTWF0cml4ICogbG9jYWxQb3M7XHJcbiAgICAgICAgdmVjNCBzY3JlZW5Qb3MgPSBtYXRyaXhfdmlld1Byb2plY3Rpb24gKiBwb3NXO1xyXG5cclxuICAgICAgICBkUG9zaXRpb25XID0gcG9zVy54eXo7XHJcblxyXG4gICAgICAgIC8vdlBhdGNoTG9kICAgICA9ICR7cGF0Y2hMb2RDb3JlUGFyYW1OYW1lfTtcclxuICAgICAgICB2R3JpZFBvc2l0aW9uID0gZEN1cnJlbnRUZXJyYWluWFo7XHJcbiAgICAgICAgdlV2Q29vcmQgICAgICA9IGdldEN1cnJlbnRUZXJyYWluVXZDb29yZCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gc2NyZWVuUG9zO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHV2MFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG5gO1xyXG5cclxuLy8gRklYOiBidWcgd2l0aCBnZXRVdjAgZm9yIFYxIEVuZ2luZVxyXG5leHBvcnQgY29uc3Qgc3RhcnRVdjBWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmAgXHJcbiAgICB2ZWMyIGdldFV2MCgpIHtcclxuICAgICAgICByZXR1cm4gdmVjMigwLjApO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbEJ5SGVpZ2h0TWFwVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGdldEN1cnJlbnRUZXJyYWluTm9ybWFsKCkge1xyXG5cclxuICAgICAgICBmbG9hdCBzdGVwICA9IHBvdygyLjAsICR7cGF0Y2hMb2RDb3JlUGFyYW1OYW1lfSArIDEuMCkgLyAyLjA7XHJcbiAgICAgICAgZmxvYXQgbGVmdCAgPSBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yKGl2ZWMyKCBzdGVwLCAgMCkpO1xyXG4gICAgICAgIGZsb2F0IHJpZ2h0ID0gZ2V0VGVycmFpbkhlaWdodEZhY3RvcihpdmVjMigtc3RlcCwgIDApKTtcclxuICAgICAgICBmbG9hdCB1cCAgICA9IGdldFRlcnJhaW5IZWlnaHRGYWN0b3IoaXZlYzIoIDAsICAgICBzdGVwKSk7XHJcbiAgICAgICAgZmxvYXQgZG93biAgPSBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yKGl2ZWMyKCAwLCAgICAtc3RlcCkpO1xyXG5cclxuICAgICAgICB2ZWMzIG5vcm1hbCA9IHZlYzMobGVmdCwgc3RlcCAqIDAuMDIsIGRvd24pIC0gdmVjMyhyaWdodCwgMCwgdXApO1xyXG5cclxuICAgICAgICByZXR1cm4gbm9ybWFsaXplKG5vcm1hbCk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3Qgbm9ybWFsVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGdldE5vcm1hbCgpIHtcclxuICAgICAgICBkTm9ybWFsTWF0cml4ID0gbWF0cml4X25vcm1hbDtcclxuICAgICAgICByZXR1cm4gbm9ybWFsaXplKGROb3JtYWxNYXRyaXggKiBkQ3VycmVudFRlcnJhaW5Ob3JtYWwpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbENvcmVWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIC8vIEZJWDogdmVydGV4X25vcm1hbCB1bmRlY2xhcmF0aW9uXHJcbiAgICB2ZWMzIHZlcnRleF9ub3JtYWw7XHJcbiAgICB2ZWMzIGRDdXJyZW50VGVycmFpbk5vcm1hbDtcclxuXHJcbiAgICB2ZWMzIGdldExvY2FsTm9ybWFsKHZlYzMgdmVydGV4Tm9ybWFsKSB7XHJcblxyXG4gICAgICAgIGRDdXJyZW50VGVycmFpbk5vcm1hbCA9IGdldEN1cnJlbnRUZXJyYWluTm9ybWFsKCk7XHJcbiAgICAgICAgdmVydGV4X25vcm1hbCA9IGRDdXJyZW50VGVycmFpbk5vcm1hbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRDdXJyZW50VGVycmFpbk5vcm1hbDtcclxuICAgIH1cclxuXHJcbiAgICBtYXQzIGdldE5vcm1hbE1hdHJpeChtYXQ0IG1vZGVsTWF0cml4KSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeF9ub3JtYWw7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3Qgc3RhcnRWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcblxyXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcclxuXHJcbiAgICAjaWYgZGVmaW5lZChTSEFET1dfUEFTUylcclxuICAgICNlbHNlXHJcbiAgICAgICAgZEN1cnJlbnRUZXJyYWluTm9ybWFsID0gZ2V0Q3VycmVudFRlcnJhaW5Ob3JtYWwoKTtcclxuICAgICNlbmRpZlxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdhbW1hTm9ybWFsaXplSGVhZGVyUFMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICAjZGVmaW5lIEdBTU1BX05PUk1BTElaRVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdhbW1hTm9ybWFsaXplQ2h1bmtQUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzMgYXV0b0dhbW1hQ29ycmVjdElucHV0KHZlYzMgdikge1xyXG4gICAgICAgICNpZiBkZWZpbmVkKEdBTU1BX05PUk1BTElaRSlcclxuICAgICAgICAgICAgcmV0dXJuIGdhbW1hQ29ycmVjdElucHV0KHYpO1xyXG4gICAgICAgICNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICNlbmRpZlxyXG4gICAgfVxyXG5cclxuICAgIHZlYzQgYXV0b0dhbW1hQ29ycmVjdElucHV0KHZlYzQgdikge1xyXG4gICAgICAgICNpZiBkZWZpbmVkKEdBTU1BX05PUk1BTElaRSlcclxuICAgICAgICAgICAgcmV0dXJuIGdhbW1hQ29ycmVjdElucHV0KHYpO1xyXG4gICAgICAgICNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICNlbmRpZlxyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG1heExheWVyc0NvdW50ID0gNTsgLy8gRGVmYXVsdCArIFIgKyBHICsgQiArIEFcclxuZXhwb3J0IGNvbnN0IGRpZmZ1c2VQUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgJHt0ZXJyYWluU3BsYXRNYXBQYXJhbU5hbWV9O1xyXG4gICAgdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyREFycmF5IHVUZXJyYWluTGF5ZXJzRGlmZnVzZTtcclxuICAgIC8vdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyREFycmF5IHVUZXJyYWluTGF5ZXJzTm9ybWFsTWFwO1xyXG4gICAgdW5pZm9ybSBmbG9hdCB1VGVycmFpbkxheWVyc0NvdW50O1xyXG4gICAgdW5pZm9ybSBmbG9hdCB1VGVycmFpbkxheWVyc0ZsYWdzWyR7bWF4TGF5ZXJzQ291bnR9XTtcclxuICAgIHVuaWZvcm0gdmVjMiB1VGVycmFpbkxheWVyc1NjYWxlWyR7bWF4TGF5ZXJzQ291bnR9XTtcclxuICAgIHVuaWZvcm0gdmVjMiB1VGVycmFpbkxheWVyc09mZnNldFske21heExheWVyc0NvdW50fV07XHJcblxyXG4gICAgLy92YXJ5aW5nIGZsb2F0IHZQYXRjaExvZDtcclxuICAgIHZhcnlpbmcgdmVjMiB2VXZDb29yZDtcclxuICAgIHZhcnlpbmcgdmVjMiB2R3JpZFBvc2l0aW9uO1xyXG5cclxuICAgIHZvaWQgZ2V0QWxiZWRvKCkge1xyXG5cclxuICAgICAgICB2ZWM0IHNwbGF0ICAgICA9IGF1dG9HYW1tYUNvcnJlY3RJbnB1dCh0ZXh0dXJlKCR7dGVycmFpblNwbGF0TWFwUGFyYW1OYW1lfSwgdlV2Q29vcmQpKTtcclxuICAgICAgICB2ZWMyIHV2VGV4WmVybyA9IHVUZXJyYWluTGF5ZXJzT2Zmc2V0WzBdICsgdlV2Q29vcmQgKiB1VGVycmFpbkxheWVyc1NjYWxlWzBdOyAvLyAvICh2UGF0Y2hMb2QgKyAxLjApO1xyXG4gICAgICAgIHZlYzQgdGV4WmVybyAgID0gdGV4dHVyZSh1VGVycmFpbkxheWVyc0RpZmZ1c2UsIHZlYzModXZUZXhaZXJvLCAwKSk7XHJcbiAgICAgICAgdmVjMyBhbGJlZG8gICAgPSB0ZXhaZXJvLnJnYjtcclxuXHJcbiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCAke21heExheWVyc0NvdW50fTsgKytpKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodVRlcnJhaW5MYXllcnNGbGFnc1tpXSA+IDAuMCAmJiBzcGxhdFtpIC0gMV0gPiAwLjApIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWMyIHV2ICA9IHVUZXJyYWluTGF5ZXJzT2Zmc2V0W2ldICsgdlV2Q29vcmQgKiB1VGVycmFpbkxheWVyc1NjYWxlW2ldO1xyXG4gICAgICAgICAgICAgICAgdmVjNCB0ZXggPSB0ZXh0dXJlKHVUZXJyYWluTGF5ZXJzRGlmZnVzZSwgdmVjMyh1diwgaSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGFsYmVkbyA9IG1peChhbGJlZG8sIHRleC5yZ2IsIHNwbGF0W2kgLSAxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRBbGJlZG8gPSBhdXRvR2FtbWFDb3JyZWN0SW5wdXQoYWxiZWRvKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBoZWlnaHRNYXBGYWN0b3JzQ2h1bmtzID0ge1xyXG4gICAgdGVycmFpbkhlaWdodEZhY3RvclIzMkZWUyxcclxuICAgIHRlcnJhaW5IZWlnaHRGYWN0b3JSR0JBOFVWUyxcclxuICAgIHRlcnJhaW5IZWlnaHRGYWN0b3JSRzE2VVgyVlMsXHJcbiAgICB0ZXJyYWluSGVpZ2h0RmFjdG9yUkdCQThVWDRWUyxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNodW5rcyA9IHtcclxuXHJcbiAgICAuLi5oZWlnaHRNYXBGYWN0b3JzQ2h1bmtzLFxyXG5cclxuICAgIGhlaWdodE1hcFNhbXBsZXJCdWdGaXgsXHJcblxyXG4gICAgY3VycmVudFRlcnJhaW5YWkZvckNvbWJpbmVJbnN0YW5jaW5nQ2h1bmtWUyxcclxuICAgIGN1cnJlbnRUZXJyYWluWFpGb3JJbnN0YW5jaW5nQ2h1bmtWUyxcclxuICAgIGN1cnJlbnRUZXJyYWluWFpDaHVua1ZTLFxyXG5cclxuICAgIHRlcnJhaW5IZWlnaHRGYWN0b3JDaHVua1ZTLFxyXG5cclxuICAgIHRlcnJhaW5IZWlnaHRDaHVua1ZTLFxyXG4gICAgdGVycmFpbkNvb3Jkc0NodW5rVlMsXHJcbiAgICB0ZXJyYWluQ2h1bmtCdWZmZXJDb29yZFZTLFxyXG5cclxuICAgIG5vcm1hbEJ5SGVpZ2h0TWFwVlMsXHJcblxyXG4gICAgLy8gVmVydGV4XHJcbiAgICBkZWZpbmVzVlMsXHJcbiAgICBiYXNlRm9yQ29tYmluZUluc3RhbmNpbmdWUyxcclxuICAgIGJhc2VGb3JJbnN0YW5jaW5nVlMsXHJcbiAgICBiYXNlT3JpZ2luYWxWUyxcclxuICAgIGJhc2VDbGVhclZTLFxyXG4gICAgYmFzZUNsZWFyU3ViVlMsXHJcblxyXG4gICAgdHJhbnNmb3JtRGVjbFZTLFxyXG4gICAgXHJcbiAgICB0cmFuc2Zvcm1WUyxcclxuICAgIGluc3RhbmNpbmdWUyxcclxuICAgIHRyYW5zZm9ybUluc3RhbmNpbmdWUyxcclxuICAgIG5vcm1hbFZTLFxyXG4gICAgbm9ybWFsQ29yZVZTLFxyXG5cclxuICAgIHV2MFZTLFxyXG4gICAgc3RhcnRWUyxcclxuICAgIHN0YXJ0VXYwVlMsXHJcblxyXG4gICAgLy8gRnJhZ21lbnRcclxuICAgIGdhbW1hTm9ybWFsaXplSGVhZGVyUFMsXHJcbiAgICBnYW1tYU5vcm1hbGl6ZUNodW5rUFMsXHJcbiAgICBkaWZmdXNlUFMsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRlcnJhaW5IZWlnaHRGYWN0b3JWU1N0b3JlIHtcclxuICAgIHRlcnJhaW5IZWlnaHRGYWN0b3JSMzJGVlM6IHN0cmluZyxcclxuICAgIHRlcnJhaW5IZWlnaHRGYWN0b3JSR0JBOFVWUzogc3RyaW5nLFxyXG4gICAgdGVycmFpbkhlaWdodEZhY3RvclJHMTZVWDJWUzogc3RyaW5nLFxyXG4gICAgdGVycmFpbkhlaWdodEZhY3RvclJHQkE4VVg0VlM6IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRlcnJhaW5IZWlnaHRGYWN0b3JWUyhmb3JtYXQ6IFRIZWlnaHRNYXBGb3JtYXQsIGNodW5rc1N0b3JlOiBJVGVycmFpbkhlaWdodEZhY3RvclZTU3RvcmUpIHtcclxuICAgIHN3aXRjaCAoZm9ybWF0KSB7XHJcbiAgICAgICAgY2FzZSAncjMyZic6ICAgcmV0dXJuIGNodW5rc1N0b3JlLnRlcnJhaW5IZWlnaHRGYWN0b3JSMzJGVlM7XHJcbiAgICAgICAgY2FzZSAncmdiYSc6ICAgcmV0dXJuIGNodW5rc1N0b3JlLnRlcnJhaW5IZWlnaHRGYWN0b3JSR0JBOFVWUztcclxuICAgICAgICBjYXNlICdyZ2JhWDInOiByZXR1cm4gY2h1bmtzU3RvcmUudGVycmFpbkhlaWdodEZhY3RvclJHMTZVWDJWUztcclxuICAgICAgICBjYXNlICdyZ2JhWDQnOiByZXR1cm4gY2h1bmtzU3RvcmUudGVycmFpbkhlaWdodEZhY3RvclJHQkE4VVg0VlM7XHJcbiAgICAgICAgZGVmYXVsdDogYnJlYWs7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1hdCBub3Qgc3VwcG9ydGVkJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0dXJlVHlwZShmb3JtYXQ6IFRIZWlnaHRNYXBGb3JtYXQpIHtcclxuICAgIHN3aXRjaCAoZm9ybWF0KSB7XHJcbiAgICAgICAgY2FzZSAncjMyZic6ICAgcmV0dXJuIHBjLlBJWEVMRk9STUFUX1IzMkY7XHJcbiAgICAgICAgY2FzZSAncmdiYSc6ICAgcmV0dXJuIHBjLlBJWEVMRk9STUFUX1JHQkE4VTtcclxuICAgICAgICBjYXNlICdyZ2JhWDInOiByZXR1cm4gcGMuUElYRUxGT1JNQVRfUkcxNlU7XHJcbiAgICAgICAgY2FzZSAncmdiYVg0JzogcmV0dXJuIHBjLlBJWEVMRk9STUFUX1JHQkE4VTtcclxuICAgICAgICBkZWZhdWx0OiBicmVhaztcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignRm9ybWF0IG5vdCBzdXBwb3J0ZWQnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNhbXBsZXJUeXBlKGZvcm1hdDogVEhlaWdodE1hcEZvcm1hdCkge1xyXG4gICAgc3dpdGNoIChmb3JtYXQpIHtcclxuICAgICAgICBjYXNlICdyMzJmJzogICByZXR1cm4gJ3NhbXBsZXIyREFycmF5JztcclxuICAgICAgICBjYXNlICdyZ2JhJzogICByZXR1cm4gJ3VzYW1wbGVyMkRBcnJheSc7XHJcbiAgICAgICAgY2FzZSAncmdiYVgyJzogcmV0dXJuICd1c2FtcGxlcjJEQXJyYXknO1xyXG4gICAgICAgIGNhc2UgJ3JnYmFYNCc6IHJldHVybiAndXNhbXBsZXIyREFycmF5JztcclxuICAgICAgICBkZWZhdWx0OiBicmVhaztcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignRm9ybWF0IG5vdCBzdXBwb3J0ZWQnKTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVGVycmFpblNoYWRlck9wdGlvbnMge1xyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGRlcHRoOiBudW1iZXIsXHJcbiAgICBwYXRjaFNpemU6IG51bWJlcixcclxuICAgIGhlaWdodE1hcENodW5rU2l6ZTogbnVtYmVyLFxyXG4gICAgaW5zdGFuY2luZzogJ3NpbXBsZScgfCAnY29tYmluZScgfCBmYWxzZSxcclxuICAgIGhlaWdodE1hcEZvcm1hdDogVEhlaWdodE1hcEZvcm1hdCxcclxuICAgIGNodW5rc1N0b3JlPzogdHlwZW9mIGNodW5rcyxcclxuICAgIGVuZ2luZVZlcnNpb246ICd2MScgfCAndjInXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXJyYWluU2hhZGVyQ2h1bmtzKHtcclxuICAgIHdpZHRoLFxyXG4gICAgZGVwdGgsXHJcbiAgICBwYXRjaFNpemUsXHJcbiAgICBoZWlnaHRNYXBDaHVua1NpemUsXHJcbiAgICBpbnN0YW5jaW5nLFxyXG4gICAgaGVpZ2h0TWFwRm9ybWF0LFxyXG4gICAgY2h1bmtzU3RvcmUgPSBjaHVua3MsXHJcbiAgICBlbmdpbmVWZXJzaW9uID0gJ3YxJyxcclxufTogSVRlcnJhaW5TaGFkZXJPcHRpb25zKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XHJcblxyXG4gICAgY29uc3QgZGVmaW5lc1ZTID0gY2h1bmtzU3RvcmUuZGVmaW5lc1ZTXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlSE1fTlVNX0NIVU5LU19YJSUnLCBTdHJpbmcoKHdpZHRoIC0gMSkgLyAoaGVpZ2h0TWFwQ2h1bmtTaXplIC0gMSkgfCAwKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVITV9DSFVOS19TSVpFJSUnLCBTdHJpbmcoaGVpZ2h0TWFwQ2h1bmtTaXplIHwgMCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlVFJfU0laRV9YJSUnLCBTdHJpbmcod2lkdGgpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJVRSX1NJWkVfWiUlJywgU3RyaW5nKGRlcHRoKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUl9TSVpFX1hfRiUlJywgd2lkdGgudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUl9TSVpFX1pfRiUlJywgZGVwdGgudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUl9QQVRDSF9TSVpFX1glJScsIHBhdGNoU2l6ZS50b0ZpeGVkKDEpKTtcclxuXHJcbiAgICBjb25zdCB0ZXJyYWluSGVpZ2h0RmFjdG9yVlMgPSBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yVlMoaGVpZ2h0TWFwRm9ybWF0LCBjaHVua3NTdG9yZSk7XHJcblxyXG4gICAgY29uc3QgYmFzZUNsZWFyVlMgPSBjaHVua3NTdG9yZS5iYXNlQ2xlYXJWUyArIGNodW5rc1N0b3JlLmhlaWdodE1hcFNhbXBsZXJCdWdGaXgucmVwbGFjZUFsbCgnJSVIRUlHSFRfTUFQX1NBTVBMRVIlJScsIGdldFNhbXBsZXJUeXBlKGhlaWdodE1hcEZvcm1hdCkpO1xyXG5cclxuICAgIGNvbnN0IGJhc2VDb29yZFZTID0gaW5zdGFuY2luZyA9PT0gJ2NvbWJpbmUnID8gY2h1bmtzU3RvcmUuYmFzZUZvckNvbWJpbmVJbnN0YW5jaW5nVlMgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jaW5nID09PSAnc2ltcGxlJyAgPyBjaHVua3NTdG9yZS5iYXNlRm9ySW5zdGFuY2luZ1ZTIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzU3RvcmUuYmFzZU9yaWdpbmFsVlM7XHJcblxyXG4gICAgY29uc3QgY3VycmVudFRlcnJhaW5YWlZTID0gaW5zdGFuY2luZyA9PT0gJ2NvbWJpbmUnID8gY2h1bmtzU3RvcmUuY3VycmVudFRlcnJhaW5YWkZvckNvbWJpbmVJbnN0YW5jaW5nQ2h1bmtWUyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jaW5nID09PSAnc2ltcGxlJyAgPyBjaHVua3NTdG9yZS5jdXJyZW50VGVycmFpblhaRm9ySW5zdGFuY2luZ0NodW5rVlMgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzU3RvcmUuY3VycmVudFRlcnJhaW5YWkNodW5rVlM7XHJcbiAgICBcclxuICAgIGlmIChlbmdpbmVWZXJzaW9uID09PSAndjInKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vcm1hbENvcmVWUyA9IGNodW5rc1N0b3JlLm5vcm1hbEJ5SGVpZ2h0TWFwVlMgKyBjaHVua3NTdG9yZS5ub3JtYWxDb3JlVlM7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtVlMgPSBkZWZpbmVzVlNcclxuICAgICAgICAgICAgKyBiYXNlQ29vcmRWU1xyXG4gICAgICAgICAgICArIGJhc2VDbGVhclZTXHJcbiAgICAgICAgICAgICsgY3VycmVudFRlcnJhaW5YWlZTXHJcbiAgICAgICAgICAgICsgdGVycmFpbkhlaWdodEZhY3RvclZTXHJcbiAgICAgICAgICAgICsgY2h1bmtzU3RvcmUudGVycmFpbkNvb3Jkc0NodW5rVlNcclxuICAgICAgICAgICAgKyBjaHVua3NTdG9yZS50ZXJyYWluQ2h1bmtCdWZmZXJDb29yZFZTXHJcbiAgICAgICAgICAgICsgY2h1bmtzU3RvcmUudGVycmFpbkhlaWdodEZhY3RvckNodW5rVlNcclxuICAgICAgICAgICAgKyBjaHVua3NTdG9yZS50ZXJyYWluSGVpZ2h0Q2h1bmtWU1xyXG4gICAgICAgICAgICArIGNodW5rc1N0b3JlLnRyYW5zZm9ybVZTO1xyXG5cclxuICAgICAgICBjb25zdCBkaWZmdXNlUFMgPSBjaHVua3NTdG9yZS5nYW1tYU5vcm1hbGl6ZUNodW5rUFNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5kaWZmdXNlUFM7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBWZXJ0ZXhcclxuICAgICAgICAgICAgbm9ybWFsQ29yZVZTLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1WUyxcclxuICAgICAgICAgICAgdHJhbnNmb3JtQ29yZVZTOiBcIlwiLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1JbnN0YW5jaW5nVlM6IFwiXCIsXHJcblxyXG4gICAgICAgICAgICAvLyBGcmFnbWVudFxyXG4gICAgICAgICAgICBkaWZmdXNlUFMsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzdGFydFZTID0gY2h1bmtzU3RvcmUubm9ybWFsQnlIZWlnaHRNYXBWUyArIGNodW5rc1N0b3JlLnN0YXJ0VXYwVlMgKyBjaHVua3NTdG9yZS5zdGFydFZTO1xyXG4gICAgY29uc3QgYmFzZVZTID0gYmFzZUNvb3JkVlMgKyBiYXNlQ2xlYXJWUyArIGNodW5rc1N0b3JlLmJhc2VDbGVhclN1YlZTO1xyXG4gICAgY29uc3QgdHJhbnNmb3JtVlMgPSBkZWZpbmVzVlNcclxuICAgICAgICArIGN1cnJlbnRUZXJyYWluWFpWU1xyXG4gICAgICAgICsgdGVycmFpbkhlaWdodEZhY3RvclZTXHJcbiAgICAgICAgKyBjaHVua3NTdG9yZS50ZXJyYWluQ29vcmRzQ2h1bmtWU1xyXG4gICAgICAgICsgY2h1bmtzU3RvcmUudGVycmFpbkNodW5rQnVmZmVyQ29vcmRWU1xyXG4gICAgICAgICsgY2h1bmtzU3RvcmUudGVycmFpbkhlaWdodEZhY3RvckNodW5rVlNcclxuICAgICAgICArIGNodW5rc1N0b3JlLnRlcnJhaW5IZWlnaHRDaHVua1ZTXHJcbiAgICAgICAgKyBjaHVua3NTdG9yZS50cmFuc2Zvcm1WUztcclxuXHJcbiAgICBjb25zdCBkaWZmdXNlUFMgPSBjaHVua3NTdG9yZS5nYW1tYU5vcm1hbGl6ZUhlYWRlclBTXHJcbiAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5nYW1tYU5vcm1hbGl6ZUNodW5rUFNcclxuICAgICAgICAgICAgICAgICAgICArIGNodW5rc1N0b3JlLmRpZmZ1c2VQUztcclxuXHJcbiAgICByZXR1cm4ge1xyXG5cclxuICAgICAgICAvLyBWZXJ0ZXhcclxuICAgICAgICBiYXNlVlMsXHJcbiAgICAgICAgdHJhbnNmb3JtVlMsXHJcbiAgICAgICAgbm9ybWFsVlM6IGNodW5rc1N0b3JlLm5vcm1hbFZTLFxyXG4gICAgICAgIHV2MFZTOiBjaHVua3NTdG9yZS51djBWUyxcclxuICAgICAgICBzdGFydFZTLFxyXG5cclxuICAgICAgICB0cmFuc2Zvcm1EZWNsVlM6IGNodW5rc1N0b3JlLnRyYW5zZm9ybURlY2xWUyxcclxuICAgICAgICBpbnN0YW5jaW5nVlM6IGNodW5rc1N0b3JlLmluc3RhbmNpbmdWUyxcclxuXHJcbiAgICAgICAgLy8gRnJhZ21lbnRcclxuICAgICAgICBkaWZmdXNlUFMsXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBnZXRTYW1wbGVyVHlwZSwgZ2V0VGVycmFpbkhlaWdodEZhY3RvclZTLCBoZWlnaHRNYXBGYWN0b3JzQ2h1bmtzLCBoZWlnaHRNYXBTYW1wbGVyQnVnRml4LCB0ZXJyYWluTWF4SGVpZ2h0UGFyYW1OYW1lIH0gZnJvbSBcIi4uL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5QYXRjaGVzU2hhZGVyQ2h1bmtzLm1qc1wiO1xyXG5pbXBvcnQgeyBUSGVpZ2h0TWFwRm9ybWF0IH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHZpbmRleEF0dHJOYW1lID0gXCJ2ZXJ0ZXhfcG9zaXRpb25cIjtcclxuZXhwb3J0IGNvbnN0IG9mZnNldEF0dHJOYW1lID0gXCJ2ZXJ0ZXhfb2Zmc2V0XCI7XHJcbmV4cG9ydCBjb25zdCBzaGFwZUF0dHJOYW1lICA9IFwidmVydGV4X3NoYXBlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgdGltZVBhcmFtTmFtZSAgICAgICAgICA9IFwidVRpbWVcIjtcclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5TY2FsZVBhcmFtTmFtZSAgPSBcInVUZXJyYWluU2NhbGVcIjtcclxuZXhwb3J0IGNvbnN0IGxvZDFPZmZzZXRYWlBhcmFtTmFtZSAgPSBcInVMb2QxT2Zmc2V0WFpcIjtcclxuZXhwb3J0IGNvbnN0IGxvZDJPZmZzZXRYWlBhcmFtTmFtZSAgPSBcInVMb2QyT2Zmc2V0WFpcIjtcclxuZXhwb3J0IGNvbnN0IGRyYXdQb3NQYXJhbU5hbWUgICAgICAgPSBcInVEcmF3UG9zaXRpb25cIjtcclxuZXhwb3J0IGNvbnN0IHdpbmRJbnRlbnNpdHlQYXJhbU5hbWUgPSBcInVXaW5kSW50ZW5zaXR5XCI7XHJcblxyXG5leHBvcnQgY29uc3QgaW5zdGFuY2luZ1ZTID0gYGA7XHJcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1JbnN0YW5jaW5nVlMgPSBgYDtcclxuZXhwb3J0IGNvbnN0IHRyYW5zZm9ybURlY2xWUyA9IGBgO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmluZXNWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICNkZWZpbmUgSE1fTlVNX0NIVU5LU19YICAgICglJUhNX05VTV9DSFVOS1NfWCUlKVxyXG4gICAgI2RlZmluZSBITV9OVU1fQ0hVTktTX1hfVSAgKHVpbnQoSE1fTlVNX0NIVU5LU19YKSlcclxuICAgICNkZWZpbmUgSE1fQ0hVTktfU0laRSAgICAgICglJUhNX0NIVU5LX1NJWkUlJSlcclxuICAgICNkZWZpbmUgSE1fQ0hVTktfU0laRV9GICAgIChmbG9hdChITV9DSFVOS19TSVpFKSlcclxuICAgICNkZWZpbmUgSE1fQ0hVTktfU0laRV9VICAgICh1aW50KEhNX0NIVU5LX1NJWkUpKVxyXG4gICAgI2RlZmluZSBUUl9TSVpFICAgICAgICAgICAgKGl2ZWMyKCUlVFJfU0laRV9YJSUsICUlVFJfU0laRV9aJSUpKVxyXG4gICAgI2RlZmluZSBUUl9TSVpFX0YgICAgICAgICAgKHZlYzIoJSVUUl9TSVpFX1hfRiUlLCAlJVRSX1NJWkVfWl9GJSUpKVxyXG4gICAgI2RlZmluZSBUUl9TSVpFX0JPVU5EX0YgICAgKFRSX1NJWkVfRiAtIDIuMCkgICAgICBcclxuICAgICNkZWZpbmUgVFJfU0laRV9IX0YgICAgICAgIChUUl9TSVpFX0YgLyAyLjApXHJcbiAgICAjZGVmaW5lIFRSX1NJWkVfSF9OX0YgICAgICAoLVRSX1NJWkVfSF9GKVxyXG5cclxuICAgICNkZWZpbmUgUEFUQ0hfU0laRSAgICAgICAgICglJVBBVENIX1NJWkUlJSlcclxuICAgICNkZWZpbmUgSEFMRl9QQVRDSF9TSVpFICAgIChQQVRDSF9TSVpFIC8gMi4wKVxyXG5cclxuICAgICNkZWZpbmUgQkxBREVfSEVJR0hUX1RBTEwgICglJUJMQURFX0hFSUdIVF9UQUxMJSUpIC8vIGhlaWdodCBvZiBhIHRhbGwgYmxhZGVcclxuXHJcbiAgICAjZGVmaW5lIFRSQU5TSVRJT05fTE9XICAgICAoJSVUUkFOU0lUSU9OX0xPVyUlKSAgIC8vIGVsZXZhdGlvbiBvZiBiZWFjaC1ncmFzcyB0cmFuc2l0aW9uIChzdGFydClcclxuICAgICNkZWZpbmUgVFJBTlNJVElPTl9ISUdIICAgICglJVRSQU5TSVRJT05fSElHSCUlKSAgLy8gKGVuZClcclxuICAgICNkZWZpbmUgVFJBTlNJVElPTl9OT0lTRSAgICgwLjA2KSAgICAgICAgICAgICAgICAgLy8gdHJhbnNpdGlvbiBub2lzZSBzY2FsZVxyXG4gICAgI2RlZmluZSBDSVJDTEVfUkFESVVTICAgICAgKFBBVENIX1NJWkUgKiAyLjkpXHJcbiAgICAjZGVmaW5lIE1BWF9aSU5JVF9ESVNUQU5DRSAoMzAwLjApXHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgZGVmaW5lc0JsYWRlVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICAjZGVmaW5lIExPRDBfQkxBREVfU0VHUyAgICAgICAgKCUlTE9EMF9CTEFERV9TRUdTJSUpIC8vICMgb2YgYmxhZGUgc2VnbWVudHMgbG9kIDBcclxuICAgICNkZWZpbmUgTE9EMV9CTEFERV9TRUdTICAgICAgICAoJSVMT0QxX0JMQURFX1NFR1MlJSkgLy8gIyBvZiBibGFkZSBzZWdtZW50cyBsb2QgMVxyXG4gICAgI2RlZmluZSBMT0QyX0JMQURFX1NFR1MgICAgICAgICglJUxPRDJfQkxBREVfU0VHUyUlKSAvLyAjIG9mIGJsYWRlIHNlZ21lbnRzIGxvZCAyXHJcblxyXG4gICAgI2RlZmluZSBMT0QwX0JMQURFX0RJVlMgICAgICAgIChMT0QwX0JMQURFX1NFR1MgKyAxLjApICAvLyAjIG9mIGRpdmlzaW9uc1xyXG4gICAgI2RlZmluZSBMT0QwX0JMQURFX1ZFUlRTICAgICAgIChMT0QwX0JMQURFX0RJVlMgKiAyLjApICAvLyAjIG9mIHZlcnRpY2VzIChwZXIgc2lkZSwgc28gMS8yIHRvdGFsKVxyXG4gICAgI2RlZmluZSBMT0QwX0JMQURFX1ZFUlRTX0NPVU5UIChMT0QwX0JMQURFX1ZFUlRTICogMi4wKSAvLyAjIG9mIHZlcnRpY2VzXHJcblxyXG4gICAgI2RlZmluZSBMT0QxX0JMQURFX0RJVlMgICAgICAgIChMT0QxX0JMQURFX1NFR1MgKyAxLjApICAvLyAjIG9mIGRpdmlzaW9uc1xyXG4gICAgI2RlZmluZSBMT0QxX0JMQURFX1ZFUlRTICAgICAgIChMT0QxX0JMQURFX0RJVlMgKiAyLjApICAvLyAjIG9mIHZlcnRpY2VzIChwZXIgc2lkZSwgc28gMS8yIHRvdGFsKVxyXG4gICAgI2RlZmluZSBMT0QxX0JMQURFX1ZFUlRTX0NPVU5UIChMT0QxX0JMQURFX1ZFUlRTICogMi4wKSAvLyAjIG9mIHZlcnRpY2VzXHJcblxyXG4gICAgI2RlZmluZSBMT0QyX0JMQURFX0RJVlMgICAgICAgIChMT0QyX0JMQURFX1NFR1MgKyAxLjApICAvLyAjIG9mIGRpdmlzaW9uc1xyXG4gICAgI2RlZmluZSBMT0QyX0JMQURFX1ZFUlRTICAgICAgIChMT0QyX0JMQURFX0RJVlMgKiAyLjApICAvLyAjIG9mIHZlcnRpY2VzIChwZXIgc2lkZSwgc28gMS8yIHRvdGFsKVxyXG4gICAgI2RlZmluZSBMT0QyX0JMQURFX1ZFUlRTX0NPVU5UIChMT0QyX0JMQURFX1ZFUlRTICogMi4wKSAvLyAjIG9mIHZlcnRpY2VzXHJcbiAgICBcclxuICAgICNkZWZpbmUgTE9EMl9CTEFERV9WRVJUU19BTExfQ09VTlQgKExPRDJfQkxBREVfVkVSVFNfQ09VTlQgKiAxNi4wKSAvLyAjIG9mIHZlcnRpY2VzIGFsbCBmcmFnbWVudHNcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBub3JtYWxDb3JlVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICAvLyBGSVg6IHZlcnRleF9ub3JtYWwgdW5kZWNsYXJhdGlvblxyXG4gICAgdmVjMyB2ZXJ0ZXhfbm9ybWFsO1xyXG5cclxuICAgIHZlYzMgZ2V0TG9jYWxOb3JtYWwodmVjMyB2ZXJ0ZXhOb3JtYWwpIHtcclxuXHJcbiAgICAgICAgLy8gU2V0IGRlZmF1bHQgc2hhZGVyIG5vcm1hbFxyXG4gICAgICAgIHZlcnRleF9ub3JtYWwgPSBkVmVydGV4Tm9ybWFsO1xyXG5cclxuICAgICAgICByZXR1cm4gZFZlcnRleE5vcm1hbDtcclxuICAgIH1cclxuXHJcbiAgICBtYXQzIGdldE5vcm1hbE1hdHJpeChtYXQ0IG1vZGVsTWF0cml4KSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeF9ub3JtYWw7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGdldFdvcmxkUG9zaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGRQb3NpdGlvblc7XHJcbiAgICB9XHJcblxyXG4gICAgbWF0NCBnZXRNb2RlbE1hdHJpeCgpIHtcclxuICAgICAgICByZXR1cm4gbWF0cml4X21vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIHZlYzQgZ2V0UG9zaXRpb24oKSB7XHJcblxyXG4gICAgICAgIGRlY29kZUJsYWRlKCk7XHJcbiAgICAgICAgY2FsY3VsYXRlQmxhZGVWZXJ0ZXgoKTtcclxuXHJcbiAgICAgICAgZE1vZGVsTWF0cml4ID0gZ2V0TW9kZWxNYXRyaXgoKTtcclxuXHJcbiAgICAgICAgdmVjNCBwb3NXICAgICAgPSBkTW9kZWxNYXRyaXggKiB2ZWM0KGRWZXJ0ZXhQb3NpdGlvbiwgMS4wKTtcclxuICAgICAgICB2ZWM0IHNjcmVlblBvcyA9IG1hdHJpeF92aWV3UHJvamVjdGlvbiAqIHBvc1c7XHJcblxyXG4gICAgICAgIGRQb3NpdGlvblcgPSBwb3NXLnh5ejtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNjcmVlblBvcztcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBub3JtYWxWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzMgZ2V0Tm9ybWFsKCkge1xyXG4gICAgICAgIGROb3JtYWxNYXRyaXggPSBtYXRyaXhfbm9ybWFsO1xyXG4gICAgICAgIHJldHVybiBub3JtYWxpemUoZE5vcm1hbE1hdHJpeCAqIGRWZXJ0ZXhOb3JtYWwpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHV2MFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdmVjMiBnZXRVdjAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlYzIoZEVkZ2VPZkJsYWRlLCBkRGl2VmVydGV4SW5kZXggKiAyLjApO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuLy8gYnVnIHdpdGggZ2V0VXYwXHJcbmV4cG9ydCBjb25zdCBzdGFydFV2MFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYCAgICBcclxuICAgIHZlYzIgZ2V0VXYwKCkge1xyXG4gICAgICAgIHJldHVybiB2ZWMyKGRFZGdlT2ZCbGFkZSwgZERpdlZlcnRleEluZGV4ICogMi4wKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB1bmlmb3JtIG1hdDQgbWF0cml4X3ZpZXdQcm9qZWN0aW9uO1xyXG4gICAgdW5pZm9ybSBtYXQ0IG1hdHJpeF9tb2RlbDtcclxuICAgIHVuaWZvcm0gbWF0MyBtYXRyaXhfbm9ybWFsO1xyXG5cclxuICAgIHVuaWZvcm0gbWVkaXVtcCB1c2FtcGxlcjJEIHVEYXRhTWFwO1xyXG5cclxuICAgIHVuaWZvcm0gdmVjMyAgJHt0ZXJyYWluU2NhbGVQYXJhbU5hbWV9O1xyXG4gICAgdW5pZm9ybSBmbG9hdCAke3RlcnJhaW5NYXhIZWlnaHRQYXJhbU5hbWV9O1xyXG4gICAgXHJcbiAgICB1bmlmb3JtIHZlYzMgICR7ZHJhd1Bvc1BhcmFtTmFtZX07ICAgICAgIC8vIGNlbnRyZSBvZiB3aGVyZSB3ZSB3YW50IHRvIGRyYXdcclxuICAgIHVuaWZvcm0gZmxvYXQgJHt0aW1lUGFyYW1OYW1lfTsgICAgICAgICAgLy8gdXNlZCB0byBhbmltYXRlIGJsYWRlc1xyXG4gICAgdW5pZm9ybSBmbG9hdCAke3dpbmRJbnRlbnNpdHlQYXJhbU5hbWV9O1xyXG5cclxuICAgIHVuaWZvcm0gdmVjMiAke2xvZDFPZmZzZXRYWlBhcmFtTmFtZX1bOF07ICAvLyBjZW50ZXIgb2Zmc2V0IGZyb20gZHJhdyBwb3MgbG9kIDFcclxuICAgIHVuaWZvcm0gdmVjMiAke2xvZDJPZmZzZXRYWlBhcmFtTmFtZX1bMTZdOyAvLyBjZW50ZXIgb2Zmc2V0IGZyb20gZHJhdyBwb3MgbG9kIDJcclxuXHJcbiAgICBhdHRyaWJ1dGUgZmxvYXQgJHt2aW5kZXhBdHRyTmFtZX07XHJcbiAgICBhdHRyaWJ1dGUgdmVjNCAke29mZnNldEF0dHJOYW1lfTtcclxuICAgIGF0dHJpYnV0ZSB2ZWM0ICR7c2hhcGVBdHRyTmFtZX07XHJcblxyXG4gICAgZmxvYXQgZFZlcnRleEluZGV4OyAgICAgICAgICAgLy8gdmVydGV4IGluZGV4IGZvciB0aGlzIHNpZGUgb2YgdGhlIGJsYWRlXHJcbiAgICBmbG9hdCBkRGl2VmVydGV4SW5kZXg7ICAgICAgICAvLyBkaXYgaW5kZXggKDAgLi4gQkxBREVfRElWUylcclxuICAgIGZsb2F0IGRQZXJjZW50T2ZCbGFkZUhlaWdodDsgIC8vIHBlcmNlbnQgb2YgaGVpZ2h0IG9mIGJsYWRlIHRoaXMgdmVydGV4IGlzIGF0XHJcbiAgICBmbG9hdCBkU2lkZU9mQmxhZGU7ICAgICAgICAgICAvLyBmcm9udC9iYWNrIHNpZGUgb2YgYmxhZGVcclxuICAgIGZsb2F0IGRFZGdlT2ZCbGFkZTsgICAgICAgICAgIC8vIGxlZnQvcmlnaHQgZWRnZSAoeD0wIG9yIHg9MSlcclxuICAgIHZlYzIgZEJsYWRlVGVycmFpblhaUG9zOyAgICAgIC8vIGJsYWRlIHh6IHBvc2l0aW9uIG9uIHRlcnJhaW5cclxuICAgIHZlYzMgZFZlcnRleFBvc2l0aW9uOyAgICAgICAgIC8vIFZlcnRleCBwb3NpdGlvbiAtIHN0YXJ0IHdpdGggMkQgc2hhcGUsIG5vIGJlbmQgYXBwbGllZFxyXG4gICAgdmVjMyBkVmVydGV4Tm9ybWFsOyAgICAgICAgICAgLy8gVmVydGV4IG5vcm1hbFxyXG4gICAgdmVjMiBkVGVycmFpblBhdGNoT2Zmc2V0WFo7ICAgLy8gVGVycmFpbiBwYXRjaCBvZmZzZXQgZnJvbSBjZW50ZXJcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlQ2xlYXJTdWJWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzMgZFBvc2l0aW9uVztcclxuICAgIG1hdDQgZE1vZGVsTWF0cml4O1xyXG4gICAgbWF0MyBkTm9ybWFsTWF0cml4O1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRNYXBWUyA9IFxyXG5gXHJcbiAgICB1dmVjMiBjbGFtcFRlcnJhaW5YWih2ZWMyIHh6KSB7XHJcbiAgICAgICAgcmV0dXJuIHV2ZWMyKGNsYW1wKHh6LCB2ZWMyKDAuMCksIFRSX1NJWkVfRikpO1xyXG4gICAgfVxyXG5cclxuICAgIHV2ZWMzIGdldFRlcnJhaW5DaHVua0J1ZmZlckNvb3JkKHZlYzIgb3JpZ1haKSB7XHJcblxyXG4gICAgICAgIHV2ZWMyIHh6ID0gY2xhbXBUZXJyYWluWFoob3JpZ1haKTtcclxuICAgICAgICB1dmVjMiBjayA9IHh6IC8gSE1fQ0hVTktfU0laRV9VO1xyXG5cclxuICAgICAgICB1aW50IGxvY2FsWCA9IHh6WzBdICUgSE1fQ0hVTktfU0laRV9VO1xyXG4gICAgICAgIHVpbnQgbG9jYWxaID0geHpbMV0gJSBITV9DSFVOS19TSVpFX1U7XHJcbiAgICAgICAgdWludCBsZXZlbCAgPSBja1sxXSAqIEhNX05VTV9DSFVOS1NfWF9VICsgY2tbMF07XHJcblxyXG4gICAgICAgIHJldHVybiB1dmVjMyhsb2NhbFgsIGxvY2FsWiwgbGV2ZWwpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmbG9hdCBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yKHZlYzIgeHopIHtcclxuICAgICAgICB1dmVjMyBjb29yZCA9IGdldFRlcnJhaW5DaHVua0J1ZmZlckNvb3JkKHh6KTtcclxuICAgICAgICByZXR1cm4gZ2V0VGVycmFpbkhlaWdodEZhY3RvckZyb21UZXh0dXJlKGNvb3JkKTtcclxuICAgIH1cclxuXHJcbiAgICBmbG9hdCBnZXRUZXJyYWluSGVpZ2h0KHZlYzIgeHopIHtcclxuICAgICAgICByZXR1cm4gZ2V0VGVycmFpbkhlaWdodEZhY3Rvcih4eikgKiAke3RlcnJhaW5NYXhIZWlnaHRQYXJhbU5hbWV9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmbG9hdCBnZXRUZXJyYWluSGVpZ2h0SW50ZXJwb2xhdGVkKHZlYzIgeHopIHtcclxuXHJcbiAgICAgICAgLy8gaGVyZSB3ZSBjYW4gY2FsY3VsYXRlIG5vcm1hbFxyXG5cclxuICAgICAgICB2ZWMyIGZsb29yWFogPSBmbG9vcih4eik7XHJcblxyXG4gICAgICAgIGZsb2F0IHgwejAgPSBnZXRUZXJyYWluSGVpZ2h0KGZsb29yWFopO1xyXG5cclxuICAgICAgICBpZiAoKGZsb29yWFpbMF0gKyAxLjAgPj0gVFJfU0laRV9GWzBdKSB8fFxyXG4gICAgICAgICAgICAoZmxvb3JYWlsxXSArIDEuMCA+PSBUUl9TSVpFX0ZbMV0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB4MHowO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmxvYXQgeDF6MCA9IGdldFRlcnJhaW5IZWlnaHQoZmxvb3JYWiArIHZlYzIoMS4wLCAwLjApKTtcclxuICAgICAgICBmbG9hdCB4MHoxID0gZ2V0VGVycmFpbkhlaWdodChmbG9vclhaICsgdmVjMigwLjAsIDEuMCkpO1xyXG4gICAgICAgIGZsb2F0IHgxejEgPSBnZXRUZXJyYWluSGVpZ2h0KGZsb29yWFogKyB2ZWMyKDEuMCwgMS4wKSk7XHJcblxyXG4gICAgICAgIGZsb2F0IGZhY3RvclggPSB4elswXSAtIGZsb29yWFpbMF07XHJcbiAgICAgICAgZmxvYXQgZmFjdG9yWiA9IHh6WzFdIC0gZmxvb3JYWlsxXTtcclxuXHJcbiAgICAgICAgZmxvYXQgaW50ZXJwb2xhdGVkQm90dG9tID0gKHgxejAgLSB4MHowKSAqIGZhY3RvclggKyB4MHowO1xyXG4gICAgICAgIGZsb2F0IGludGVycG9sYXRlZFRvcCAgICA9ICh4MXoxIC0geDB6MSkgKiBmYWN0b3JYICsgeDB6MTtcclxuICAgICAgICBmbG9hdCBmaW5hbEhlaWdodCAgICAgICAgPSAoaW50ZXJwb2xhdGVkVG9wIC0gaW50ZXJwb2xhdGVkQm90dG9tKSAqIGZhY3RvclogKyBpbnRlcnBvbGF0ZWRCb3R0b207XHJcblxyXG4gICAgICAgIHJldHVybiBmaW5hbEhlaWdodDtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBibGFkZURlY29kZXJWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZvaWQgZGVjb2RlQmxhZGUoKSB7XHJcblxyXG4gICAgICAgIGZsb2F0IG5uVmkgPSAke3ZpbmRleEF0dHJOYW1lfSAtIExPRDJfQkxBREVfVkVSVFNfQUxMX0NPVU5UO1xyXG5cclxuICAgICAgICBpZiAobm5WaSA8IDAuMCkge1xyXG5cclxuICAgICAgICAgICAgZmxvYXQgbG9kMm5WaSAgPSBtb2QoJHt2aW5kZXhBdHRyTmFtZX0sIExPRDJfQkxBREVfVkVSVFNfQ09VTlQpO1xyXG4gICAgICAgICAgICBpbnQgcGF0Y2hJbmRleCA9IGludCgke3ZpbmRleEF0dHJOYW1lfSAvIExPRDJfQkxBREVfVkVSVFNfQ09VTlQpO1xyXG5cclxuICAgICAgICAgICAgZFZlcnRleEluZGV4ICAgICAgICAgID0gbW9kKGxvZDJuVmksIExPRDJfQkxBREVfVkVSVFMpO1xyXG4gICAgICAgICAgICBkRGl2VmVydGV4SW5kZXggICAgICAgPSBmbG9vcihkVmVydGV4SW5kZXggLyAyLjApO1xyXG4gICAgICAgICAgICBkUGVyY2VudE9mQmxhZGVIZWlnaHQgPSBkRGl2VmVydGV4SW5kZXggLyBMT0QyX0JMQURFX1NFR1M7XHJcbiAgICAgICAgICAgIGRTaWRlT2ZCbGFkZSAgICAgICAgICA9IGZsb29yKGxvZDJuVmkgLyBMT0QyX0JMQURFX1ZFUlRTKTtcclxuXHJcbiAgICAgICAgICAgIGRUZXJyYWluUGF0Y2hPZmZzZXRYWiA9ICR7bG9kMk9mZnNldFhaUGFyYW1OYW1lfVtwYXRjaEluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobm5WaSA8IExPRDBfQkxBREVfVkVSVFNfQ09VTlQpIHtcclxuXHJcbiAgICAgICAgICAgIGRWZXJ0ZXhJbmRleCAgICAgICAgICA9IG1vZChublZpLCBMT0QwX0JMQURFX1ZFUlRTKTtcclxuICAgICAgICAgICAgZERpdlZlcnRleEluZGV4ICAgICAgID0gZmxvb3IoZFZlcnRleEluZGV4IC8gMi4wKTtcclxuICAgICAgICAgICAgZFBlcmNlbnRPZkJsYWRlSGVpZ2h0ID0gZERpdlZlcnRleEluZGV4IC8gTE9EMF9CTEFERV9TRUdTO1xyXG4gICAgICAgICAgICBkU2lkZU9mQmxhZGUgICAgICAgICAgPSBmbG9vcihublZpIC8gTE9EMF9CTEFERV9WRVJUUyk7XHJcblxyXG4gICAgICAgICAgICBkVGVycmFpblBhdGNoT2Zmc2V0WFogPSB2ZWMyKDAuMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgZmxvYXQgbG9kMW5uVmkgPSBublZpIC0gTE9EMF9CTEFERV9WRVJUU19DT1VOVDtcclxuICAgICAgICAgICAgZmxvYXQgbG9kMW5WaSAgPSBtb2QobG9kMW5uVmksIExPRDFfQkxBREVfVkVSVFNfQ09VTlQpO1xyXG4gICAgICAgICAgICBpbnQgcGF0Y2hJbmRleCA9IGludChsb2Qxbm5WaSAvIExPRDFfQkxBREVfVkVSVFNfQ09VTlQpO1xyXG5cclxuICAgICAgICAgICAgZFZlcnRleEluZGV4ICAgICAgICAgID0gbW9kKGxvZDFuVmksIExPRDFfQkxBREVfVkVSVFMpO1xyXG4gICAgICAgICAgICBkRGl2VmVydGV4SW5kZXggICAgICAgPSBmbG9vcihkVmVydGV4SW5kZXggLyAyLjApO1xyXG4gICAgICAgICAgICBkUGVyY2VudE9mQmxhZGVIZWlnaHQgPSBkRGl2VmVydGV4SW5kZXggLyBMT0QxX0JMQURFX1NFR1M7XHJcbiAgICAgICAgICAgIGRTaWRlT2ZCbGFkZSAgICAgICAgICA9IGZsb29yKGxvZDFuVmkgLyBMT0QxX0JMQURFX1ZFUlRTKTtcclxuXHJcbiAgICAgICAgICAgIGRUZXJyYWluUGF0Y2hPZmZzZXRYWiA9ICR7bG9kMU9mZnNldFhaUGFyYW1OYW1lfVtwYXRjaEluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgZEVkZ2VPZkJsYWRlID0gbW9kKGRWZXJ0ZXhJbmRleCwgMi4wKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVMb2NhbFZTID0gIC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIC8vIFJvdGF0ZSBieSBhbiBhbmdsZVxyXG4gICAgdmVjMiByb3RhdGUoZmxvYXQgeCwgZmxvYXQgeSwgZmxvYXQgcikge1xyXG4gICAgICAgIGZsb2F0IGMgPSBjb3Mocik7XHJcbiAgICAgICAgZmxvYXQgcyA9IHNpbihyKTtcclxuICAgICAgICByZXR1cm4gdmVjMih4ICogYyAtIHkgKiBzLCB4ICogcyArIHkgKiBjKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSb3RhdGUgYnkgYSB2ZWN0b3JcclxuICAgIHZlYzIgcm90YXRlKGZsb2F0IHgsIGZsb2F0IHksIHZlYzIgcikge1xyXG4gICAgICAgIHJldHVybiB2ZWMyKHggKiByLnggLSB5ICogci55LCB4ICogci55ICsgeSAqIHIueCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmxvYXQgZ2V0R3Jhc3NGYWN0b3IodmVjMiBveHopIHtcclxuICAgIFxyXG4gICAgICAgIHZlYzIgeHogPSBmbG9vcihveHopO1xyXG5cclxuICAgICAgICBpZiAoeHpbMF0gPCAwLjAgfHxcclxuICAgICAgICAgICAgeHpbMV0gPCAwLjAgfHxcclxuICAgICAgICAgICAgeHpbMF0gPiBUUl9TSVpFX0JPVU5EX0ZbMF0gfHxcclxuICAgICAgICAgICAgeHpbMV0gPiBUUl9TSVpFX0JPVU5EX0ZbMV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIDAuMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAxLjA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZhcnlpbmcgdmVjMiB2VXZUZXJyYWluQ29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2Q29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzMgdkNvbG9yO1xyXG5cclxuICAgIHZvaWQgY2FsY3VsYXRlQmxhZGVWZXJ0ZXgoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmVjNCBvZmZzZXQgPSAke29mZnNldEF0dHJOYW1lfTtcclxuICAgICAgICB2ZWM0IHNoYXBlICA9ICR7c2hhcGVBdHRyTmFtZX07XHJcblxyXG4gICAgICAgIC8vIEJhc2VkIG9uIGNlbnRyZSBvZiB2aWV3IGNvbmUgcG9zaXRpb24sIHdoYXQgZ3JpZCB0aWxlIHNob3VsZFxyXG4gICAgICAgIC8vIHRoaXMgcGllY2Ugb2YgZ3Jhc3MgYmUgZHJhd24gYXQ/XHJcbiAgICAgICAgdmVjMiBxdWFkQ2VudGVyUG9zID0gJHtkcmF3UG9zUGFyYW1OYW1lfS54ejtcclxuICAgICAgICB2ZWMyIGJsYWRlT2Zmc2V0ICAgPSBvZmZzZXQueHk7XHJcbiAgICAgICAgdmVjMiBwYXRjaENlbnRlciAgID0gZmxvb3IoKHF1YWRDZW50ZXJQb3MgLSBibGFkZU9mZnNldCkgLyBQQVRDSF9TSVpFKSAqIFBBVENIX1NJWkUgKyBIQUxGX1BBVENIX1NJWkUgKyBkVGVycmFpblBhdGNoT2Zmc2V0WFo7XHJcblxyXG4gICAgICAgIGZsb2F0IGRyYXdQb3NBbHRpdHVkZSA9ICR7ZHJhd1Bvc1BhcmFtTmFtZX0ueTtcclxuXHJcbiAgICAgICAgLy8gRmluZCB0aGUgYmxhZGUgbWVzaCB4LHkgcG9zaXRpb25cclxuICAgICAgICB2ZWMyIGJsYWRlUG9zID0gcGF0Y2hDZW50ZXIgKyBibGFkZU9mZnNldDtcclxuXHJcbiAgICAgICAgLy8gTG9jYWwgcXVhZCBjZW50ZXIgcG9zaXRpb24gaW4gdGVycmFpblxyXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlIHBvc2l0aW9ucyBhcmUgc2hpZnRlZCBieSBoYWxmIHRoZSBzaXplIG9mIHRoZSB0ZXJyYWluXHJcbiAgICAgICAgLy8gdmVjMiBsb2NhbFF1YWRDZW50ZXJQb3MgPSBxdWFkQ2VudGVyUG9zICsgVFJfU0laRV9IX0Y7XHJcblxyXG4gICAgICAgIGZsb2F0IGRpc3RhbmNlRnJvbUJsYWRlVG9RdWFkQ2VudGVyID0gZGlzdGFuY2UoYmxhZGVQb3MsIHF1YWRDZW50ZXJQb3MpO1xyXG4gICAgICAgIGZsb2F0IGRlZ2VuZXJhdGVCeURpc3RhbmNlRnJvbUJsYWRlVG9RdWFkQ2VudGVyID0gc21vb3Roc3RlcCgwLjkyLCAxLjAsIENJUkNMRV9SQURJVVMgLyBkaXN0YW5jZUZyb21CbGFkZVRvUXVhZENlbnRlcik7XHJcblxyXG4gICAgICAgIC8vIFZlcnRleCBwb3NpdGlvbiAtIHN0YXJ0IHdpdGggMkQgc2hhcGUsIG5vIGJlbmQgYXBwbGllZFxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbiA9IHZlYzMoXHJcbiAgICAgICAgICAgIHNoYXBlLnggKiAoZEVkZ2VPZkJsYWRlIC0gMC41KSAqICgxLjAgLSBwb3coZFBlcmNlbnRPZkJsYWRlSGVpZ2h0LCAzLjApKSwgLy8gdGFwZXIgYmxhZGUgZWRnZXMgYXMgYXBwcm9hY2ggdGlwXHJcbiAgICAgICAgICAgIDAuMCwgLy8gZmxhdCB5LCB1bmJlbnRcclxuICAgICAgICAgICAgc2hhcGUueSAqIGRQZXJjZW50T2ZCbGFkZUhlaWdodCAvLyBoZWlnaHQgb2YgdnR4LCB1bmJlbnRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBBcHBseSBibGFkZSdzIG5hdHVyYWwgY3VydmUgYW1vdW50XHJcbiAgICAgICAgZmxvYXQgY3VydmUgPSBzaGFwZS53O1xyXG5cclxuICAgICAgICAvLyBUaGVuIGFkZCBhbmltYXRlZCBjdXJ2ZSBhbW91bnQgYnkgdGltZSB1c2luZyB0aGlzIGJsYWRlJ3NcclxuICAgICAgICAvLyB1bmlxdWUgcHJvcGVydGllcyB0byByYW5kb21pemUgaXRzIG9zY2lsbGF0aW9uXHJcbiAgICAgICAgY3VydmUgKz0gc2hhcGUudyArIDAuMTI1ICogKHNpbigke3RpbWVQYXJhbU5hbWV9ICogNC4wICsgb2Zmc2V0LncgKiAwLjIgKiBzaGFwZS55ICsgb2Zmc2V0LnggKyBvZmZzZXQueSkpO1xyXG5cclxuICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgZmxvYXQgd2luZCA9IDAuNTtcclxuXHJcbiAgICAgICAgd2luZCA9IChjbGFtcCh3aW5kLCAwLjI1LCAxLjApIC0gMC4yNSkgKiAoMS4wIC8gMC43NSk7XHJcbiAgICAgICAgd2luZCA9IHdpbmQgKiB3aW5kICogJHt3aW5kSW50ZW5zaXR5UGFyYW1OYW1lfTtcclxuICAgICAgICB3aW5kICo9IGRQZXJjZW50T2ZCbGFkZUhlaWdodDsgLy8gc2NhbGUgd2luZCBieSBoZWlnaHQgb2YgYmxhZGVcclxuICAgICAgICB3aW5kID0gLXdpbmQ7XHJcblxyXG4gICAgICAgIC8vIFN0YXJ0IGNvbXB1dGluZyBhIG5vcm1hbCBmb3IgdGhpcyB2ZXJ0ZXhcclxuICAgICAgICBkVmVydGV4Tm9ybWFsID0gdmVjMygwLjAsIGRTaWRlT2ZCbGFkZSAqIC0yLjAgKyAxLjAsIDAuMCk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBsZWFuIGFuZCBjdXJ2ZSB0b2dldGhlclxyXG4gICAgICAgIGZsb2F0IHJvdCA9IHNoYXBlLnogKyBjdXJ2ZSAqIGRQZXJjZW50T2ZCbGFkZUhlaWdodDtcclxuICAgICAgICB2ZWMyIHJvdHYgPSB2ZWMyKGNvcyhyb3QpLCBzaW4ocm90KSk7XHJcblxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi55eiA9IHJvdGF0ZShkVmVydGV4UG9zaXRpb24ueSwgZFZlcnRleFBvc2l0aW9uLnosIHJvdHYpO1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwueXogICA9IHJvdGF0ZShkVmVydGV4Tm9ybWFsLnksIGRWZXJ0ZXhOb3JtYWwueiwgcm90dik7XHJcblxyXG4gICAgICAgIC8vIHJvdGF0aW9uIG9mIHRoaXMgYmxhZGUgYXMgYSB2ZWN0b3JcclxuICAgICAgICByb3R2ID0gdmVjMihjb3Mob2Zmc2V0LncpLCBzaW4ob2Zmc2V0LncpKTtcclxuXHJcbiAgICAgICAgZFZlcnRleFBvc2l0aW9uLnh5ID0gcm90YXRlKGRWZXJ0ZXhQb3NpdGlvbi54LCBkVmVydGV4UG9zaXRpb24ueSwgcm90dik7XHJcbiAgICAgICAgZFZlcnRleE5vcm1hbC54eSAgID0gcm90YXRlKGRWZXJ0ZXhOb3JtYWwueCwgZFZlcnRleE5vcm1hbC55LCByb3R2KTtcclxuXHJcbiAgICAgICAgcm90diA9IHZlYzIoY29zKHdpbmQpLCBzaW4od2luZCkpO1xyXG5cclxuICAgICAgICAvLyBXaW5kIGJsb3dzIGluIGF4aXMtYWxpZ25lZCBkaXJlY3Rpb24gdG8gbWFrZSB0aGluZ3Mgc2ltcGxlclxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi55eiA9IHJvdGF0ZShkVmVydGV4UG9zaXRpb24ueSwgZFZlcnRleFBvc2l0aW9uLnosIHJvdHYpO1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwueXogICA9IHJvdGF0ZShkVmVydGV4Tm9ybWFsLnksIGRWZXJ0ZXhOb3JtYWwueiwgcm90dik7XHJcblxyXG4gICAgICAgIC8vIExvY2FsIGJsYWRlIHBvc2l0aW9uIGluIHRlcnJhaW5cclxuICAgICAgICAvLyBiZWNhdXNlIHRoZSBwb3NpdGlvbnMgYXJlIHNoaWZ0ZWQgYnkgaGFsZiB0aGUgc2l6ZSBvZiB0aGUgdGVycmFpblxyXG4gICAgICAgIGRCbGFkZVRlcnJhaW5YWlBvcyA9IGJsYWRlUG9zIC8gJHt0ZXJyYWluU2NhbGVQYXJhbU5hbWV9Lnh6ICsgVFJfU0laRV9IX0Y7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2FtcGxlIHRoZSBoZWlnaHRmaWVsZCBkYXRhIHRleHR1cmUgdG8gZ2V0IGFsdGl0dWRlIGZvciB0aGlzIGJsYWRlIHBvc2l0aW9uXHJcbiAgICAgICAgZmxvYXQgYmxhZGVBbHRpdHVkZSA9IGdldFRlcnJhaW5IZWlnaHRJbnRlcnBvbGF0ZWQoZEJsYWRlVGVycmFpblhaUG9zKSAqICR7dGVycmFpblNjYWxlUGFyYW1OYW1lfS55O1xyXG4gICAgICAgIGZsb2F0IGdyYXNzRmFjdG9yICAgPSBnZXRHcmFzc0ZhY3RvcihkQmxhZGVUZXJyYWluWFpQb3MpO1xyXG5cclxuICAgICAgICBmbG9hdCBkaXN0YW5jZVF1YWRDZW50ZXJUb0RyYXcgPSBkaXN0YW5jZShibGFkZUFsdGl0dWRlLCBkcmF3UG9zQWx0aXR1ZGUpO1xyXG4gICAgICAgIGZsb2F0IGRlZ2VuZXJhdGVCeURpc3RhbmNlRnJvbUJsYWRlVG9EcmF3ID0gc21vb3Roc3RlcCgwLjgxLCAxLjAsIE1BWF9aSU5JVF9ESVNUQU5DRSAvIGRpc3RhbmNlUXVhZENlbnRlclRvRHJhdyk7XHJcblxyXG4gICAgICAgIC8vIERldGVybWluZSBpZiB3ZSB3YW50IHRoZSBncmFzcyB0byBhcHBlYXIgb3Igbm90XHJcbiAgICAgICAgLy8gVXNlIHRoZSBub2lzZSBjaGFubmVsIHRvIHBlcnR1cmIgdGhlIGJsYWRlIGFsdGl0dWRlIGdyYXNzIHN0YXJ0cyBncm93aW5nIGF0LlxyXG4gICAgICAgIC8vIGZsb2F0IG5vaXN5QWx0aXR1ZGUgPSBncmFzc0ZhY3RvciAqIFRSQU5TSVRJT05fTk9JU0UgLSAoVFJBTlNJVElPTl9OT0lTRSAvIDIuMCk7XHJcbiAgICAgICAgLy8gZmxvYXQgZGVnZW5lcmF0ZUJ5Tm9pc2UgPSAoY2xhbXAobm9pc3lBbHRpdHVkZSwgVFJBTlNJVElPTl9MT1csIFRSQU5TSVRJT05fSElHSCkgLSBUUkFOU0lUSU9OX0xPVykgKiAoMS4wIC8gKFRSQU5TSVRJT05fSElHSCAtIFRSQU5TSVRJT05fTE9XKSk7XHJcblxyXG4gICAgICAgIC8vIFRyYW5zaXRpb24gZ2VvbWV0cnkgdG93YXJkIGRlZ2VuZXJhdGUgYXMgd2UgYXBwcm9hY2ggdGVycmFpbiBhbHRpdHVkZVxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbiAqPSBncmFzc0ZhY3RvciAqIGRlZ2VuZXJhdGVCeURpc3RhbmNlRnJvbUJsYWRlVG9EcmF3ICogZGVnZW5lcmF0ZUJ5RGlzdGFuY2VGcm9tQmxhZGVUb1F1YWRDZW50ZXI7IC8vIGRlZ2VuZXJhdGVCeU5vaXNlXHJcblxyXG4gICAgICAgIC8vIFRyYW5zbGF0ZSB0byB3b3JsZCBjb29yZGluYXRlc1xyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi54ICs9IGJsYWRlUG9zLng7XHJcbiAgICAgICAgZFZlcnRleFBvc2l0aW9uLnkgKz0gYmxhZGVQb3MueTtcclxuICAgICAgICBkVmVydGV4UG9zaXRpb24ueiArPSBibGFkZUFsdGl0dWRlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyYW5zbGF0ZSB0byB4eiBwbGFuZVxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbiA9IGRWZXJ0ZXhQb3NpdGlvbi54enk7XHJcbiAgICAgICAgZFZlcnRleE5vcm1hbCAgID0gZFZlcnRleE5vcm1hbC54enk7XHJcblxyXG4gICAgICAgIC8vIGdyYXNzIHRleHR1cmUgY29vcmRpbmF0ZSBmb3IgdGhpcyB2ZXJ0ZXhcclxuICAgICAgICB2VXZDb29yZCA9IHZlYzIoZEVkZ2VPZkJsYWRlLCBkRGl2VmVydGV4SW5kZXggKiAyLjApO1xyXG5cclxuICAgICAgICAvLyB0ZXJyYWluIHRleHR1cmUgY29vcmRpbmF0ZSBmb3IgdGhpcyB2ZXJ0ZXhcclxuICAgICAgICB2VXZUZXJyYWluQ29vcmQgPSBkQmxhZGVUZXJyYWluWFpQb3MgLyBUUl9TSVpFX0Y7XHJcblxyXG4gICAgICAgIC8vIFZlcnRleCBjb2xvciBtdXN0IGJlIGJyaWdodGVyIGJlY2F1c2UgaXQgaXMgbXVsdGlwbGllZCB3aXRoIGJsYWRlIHRleHR1cmVcclxuICAgICAgICAvLyBFYWNoIGJsYWRlIGlzIHJhbmRvbWx5IGNvbG91cml6ZWQgYSBiaXQgYnkgaXRzIHBvc2l0aW9uXHJcbiAgICAgICAgdkNvbG9yID0gdmVjMyhjb3MoJHtvZmZzZXRBdHRyTmFtZX0ueCksIHNpbigke29mZnNldEF0dHJOYW1lfS55KSwgc2luKCR7b2Zmc2V0QXR0ck5hbWV9LngpKTtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIGh0dHBzOi8vY29tbXVuaXR5Lmtocm9ub3Mub3JnL3QvZGlzY2FyZGluZy1wb2x5Z29ucy1pbi12ZXJ0ZXgtc2hhZGVyLzEwMzgzOS85XHJcbmV4cG9ydCBjb25zdCBzdGFydFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgJHtzdGFydFV2MFZTfVxyXG5cclxuICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcblxyXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBkaWZmdXNlUFMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1RGlmZnVzZVRleDtcclxuICAgIHVuaWZvcm0gdmVjMyB1RGlmZnVzZUNvbG9yO1xyXG4gICAgdW5pZm9ybSB2ZWMzIHVEaWZmdXNlQ29sb3JSYW5kb207XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZVdlRlcnJhaW5Db29yZDtcclxuICAgIHZhcnlpbmcgdmVjMiB2VXZDb29yZDtcclxuICAgIHZhcnlpbmcgdmVjMyB2Q29sb3I7XHJcblxyXG4gICAgdmVjMyBhdXRvR2FtbWFDb3JyZWN0SW5wdXQodmVjMyB2KSB7XHJcbiAgICAgICAgI2lmIGRlZmluZWQoR0FNTUFfTk9STUFMSVpFKVxyXG4gICAgICAgICAgICByZXR1cm4gZ2FtbWFDb3JyZWN0SW5wdXQodik7XHJcbiAgICAgICAgI2Vsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgI2VuZGlmXHJcbiAgICB9XHJcblxyXG4gICAgdmVjNCBhdXRvR2FtbWFDb3JyZWN0SW5wdXQodmVjNCB2KSB7XHJcbiAgICAgICAgI2lmIGRlZmluZWQoR0FNTUFfTk9STUFMSVpFKVxyXG4gICAgICAgICAgICByZXR1cm4gZ2FtbWFDb3JyZWN0SW5wdXQodik7XHJcbiAgICAgICAgI2Vsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgI2VuZGlmXHJcbiAgICB9XHJcblxyXG4gICAgdm9pZCBnZXRBbGJlZG8oKSB7XHJcblxyXG4gICAgICAgIHZlYzMgdGV4ID0gYXV0b0dhbW1hQ29ycmVjdElucHV0KHRleHR1cmUyRCh1RGlmZnVzZVRleCwgdlV2Q29vcmQpLnJnYik7XHJcblxyXG4gICAgICAgIGRBbGJlZG8gPSB0ZXggKiB1RGlmZnVzZUNvbG9yICsgdkNvbG9yICogdURpZmZ1c2VDb2xvclJhbmRvbTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBjaHVua3MgPSB7XHJcblxyXG4gICAgLi4uaGVpZ2h0TWFwRmFjdG9yc0NodW5rcyxcclxuXHJcbiAgICBoZWlnaHRNYXBTYW1wbGVyQnVnRml4LFxyXG5cclxuICAgIGRlZmluZXNWUyxcclxuICAgIGRlZmluZXNCbGFkZVZTLFxyXG4gICAgYmxhZGVEZWNvZGVyVlMsXHJcbiAgICBjYWxjdWxhdGVMb2NhbFZTLFxyXG5cclxuICAgIHRlcnJhaW5IZWlnaHRNYXBWUyxcclxuXHJcbiAgICAvLyBWZXJ0ZXhcclxuICAgIGJhc2VWUyxcclxuICAgIGJhc2VDbGVhclN1YlZTLFxyXG4gICAgdHJhbnNmb3JtVlMsXHJcbiAgICB0cmFuc2Zvcm1EZWNsVlMsXHJcbiAgICBpbnN0YW5jaW5nVlMsXHJcbiAgICB0cmFuc2Zvcm1JbnN0YW5jaW5nVlMsXHJcbiAgICBub3JtYWxDb3JlVlMsXHJcbiAgICBub3JtYWxWUyxcclxuICAgIHV2MFZTLFxyXG4gICAgc3RhcnRWUyxcclxuXHJcbiAgICAvLyBGcmFnbWVudFxyXG4gICAgZGlmZnVzZVBTLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHcmFzc1NoYWRlck9wdGlvbnMge1xyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGRlcHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHRNYXBDaHVua1NpemU6IG51bWJlcixcclxuICAgIGhlaWdodE1hcEZvcm1hdDogVEhlaWdodE1hcEZvcm1hdCxcclxuICAgIGJsYWRlTWF4SGVpZ2h0OiBudW1iZXIsXHJcbiAgICBsb2QwQmxhZGVTZWdzOiBudW1iZXIsXHJcbiAgICBsb2QxQmxhZGVTZWdzOiBudW1iZXIsXHJcbiAgICBsb2QyQmxhZGVTZWdzOiBudW1iZXIsXHJcbiAgICByYWRpdXM6IG51bWJlcixcclxuICAgIHRyYW5zaXRpb25Mb3c6IG51bWJlcixcclxuICAgIHRyYW5zaXRpb25IaWdoOiBudW1iZXIsXHJcbiAgICBjaHVua3NTdG9yZT86IHR5cGVvZiBjaHVua3MsXHJcbiAgICBlbmdpbmVWZXJzaW9uPzogJ3YxJyB8ICd2MidcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyYXNzU2hhZGVyQ2h1bmtzKHtcclxuICAgIHdpZHRoLFxyXG4gICAgZGVwdGgsXHJcbiAgICBoZWlnaHRNYXBDaHVua1NpemUsXHJcbiAgICBoZWlnaHRNYXBGb3JtYXQsXHJcbiAgICBibGFkZU1heEhlaWdodCxcclxuICAgIGxvZDBCbGFkZVNlZ3MsXHJcbiAgICBsb2QxQmxhZGVTZWdzLFxyXG4gICAgbG9kMkJsYWRlU2VncyxcclxuICAgIHJhZGl1cyxcclxuICAgIHRyYW5zaXRpb25Mb3csXHJcbiAgICB0cmFuc2l0aW9uSGlnaCxcclxuICAgIGNodW5rc1N0b3JlID0gY2h1bmtzLFxyXG4gICAgZW5naW5lVmVyc2lvbiA9ICd2MScsXHJcbn06IElHcmFzc1NoYWRlck9wdGlvbnMpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcclxuXHJcbiAgICBjb25zdCBkZWZpbmVzVlMgPSBjaHVua3NTdG9yZS5kZWZpbmVzVlNcclxuICAgICAgICAucmVwbGFjZSgnJSVITV9OVU1fQ0hVTktTX1glJScsIFN0cmluZygod2lkdGggLSAxKSAvIChoZWlnaHRNYXBDaHVua1NpemUgLSAxKSB8IDApKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUhNX0NIVU5LX1NJWkUlJScsIFN0cmluZyhoZWlnaHRNYXBDaHVua1NpemUgfCAwKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUl9TSVpFX1glJScsIFN0cmluZyh3aWR0aCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlVFJfU0laRV9aJSUnLCBTdHJpbmcoZGVwdGgpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJVRSX1NJWkVfWF9GJSUnLCB3aWR0aC50b0ZpeGVkKDEpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJVRSX1NJWkVfWl9GJSUnLCBkZXB0aC50b0ZpeGVkKDEpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUJMQURFX0hFSUdIVF9UQUxMJSUnLCBibGFkZU1heEhlaWdodC50b0ZpeGVkKDEpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJVBBVENIX1NJWkUlJScsIHJhZGl1cy50b0ZpeGVkKDEpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJVRSQU5TSVRJT05fTE9XJSUnLCB0cmFuc2l0aW9uTG93LnRvU3RyaW5nKCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlVFJBTlNJVElPTl9ISUdIJSUnLCB0cmFuc2l0aW9uSGlnaC50b1N0cmluZygpKTtcclxuICAgIFxyXG4gICAgY29uc3QgZGVmaW5lc0JsYWRlVlMgPSBjaHVua3NTdG9yZS5kZWZpbmVzQmxhZGVWU1xyXG4gICAgICAgIC5yZXBsYWNlKCclJUxPRDBfQkxBREVfU0VHUyUlJywgbG9kMEJsYWRlU2Vncy50b0ZpeGVkKDEpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUxPRDFfQkxBREVfU0VHUyUlJywgbG9kMUJsYWRlU2Vncy50b0ZpeGVkKDEpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUxPRDJfQkxBREVfU0VHUyUlJywgbG9kMkJsYWRlU2Vncy50b0ZpeGVkKDEpKTtcclxuXHJcbiAgICBjb25zdCBiYXNlQ2xlYXJWUyA9IGNodW5rc1N0b3JlLmJhc2VWUyArIGNodW5rc1N0b3JlLmhlaWdodE1hcFNhbXBsZXJCdWdGaXgucmVwbGFjZUFsbCgnJSVIRUlHSFRfTUFQX1NBTVBMRVIlJScsIGdldFNhbXBsZXJUeXBlKGhlaWdodE1hcEZvcm1hdCkpO1xyXG4gICAgY29uc3QgdGVycmFpbkhlaWdodEZhY3RvclZTID0gZ2V0VGVycmFpbkhlaWdodEZhY3RvclZTKGhlaWdodE1hcEZvcm1hdCwgY2h1bmtzU3RvcmUpO1xyXG5cclxuICAgIGNvbnN0IHRyYW5zZm9ybVZTID0gdGVycmFpbkhlaWdodEZhY3RvclZTXHJcbiAgICAgICAgICAgICAgICAgICAgICArIGNodW5rc1N0b3JlLnRlcnJhaW5IZWlnaHRNYXBWU1xyXG4gICAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5ibGFkZURlY29kZXJWU1xyXG4gICAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5jYWxjdWxhdGVMb2NhbFZTXHJcbiAgICAgICAgICAgICAgICAgICAgICArIGNodW5rc1N0b3JlLnRyYW5zZm9ybVZTO1xyXG5cclxuICAgIGlmIChlbmdpbmVWZXJzaW9uID09PSAndjInKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtMlZTID0gZGVmaW5lc1ZTICsgZGVmaW5lc0JsYWRlVlMgKyBiYXNlQ2xlYXJWUyArIHRyYW5zZm9ybVZTO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAvLyBWZXJ0ZXhcclxuICAgICAgICAgICAgdHJhbnNmb3JtVlM6IHRyYW5zZm9ybTJWUyxcclxuICAgICAgICAgICAgdHJhbnNmb3JtQ29yZVZTOiBcIlwiLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1JbnN0YW5jaW5nVlM6IFwiXCIsXHJcbiAgICAgICAgICAgIG5vcm1hbENvcmVWUzogY2h1bmtzU3RvcmUubm9ybWFsQ29yZVZTLFxyXG5cclxuICAgICAgICAgICAgLy8gRnJhZ21lbnRcclxuICAgICAgICAgICAgZGlmZnVzZVBTOiBjaHVua3NTdG9yZS5kaWZmdXNlUFMsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgYmFzZVZTID0gZGVmaW5lc1ZTICtcclxuICAgICAgICAgICAgICAgICAgIGRlZmluZXNCbGFkZVZTICtcclxuICAgICAgICAgICAgICAgICAgIGJhc2VDbGVhclZTICtcclxuICAgICAgICAgICAgICAgICAgIGNodW5rc1N0b3JlLmJhc2VDbGVhclN1YlZTO1xyXG5cclxuICAgIGNvbnN0IGRpZmZ1c2VQUyA9ICcjZGVmaW5lIEdBTU1BX05PUk1BTElaRVxcclxcbidcclxuICAgICAgICAgICAgICAgICAgICArIGNodW5rc1N0b3JlLmRpZmZ1c2VQUztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIC8vIFZlcnRleFxyXG4gICAgICAgIGJhc2VWUyxcclxuICAgICAgICBzdGFydFZTOiBjaHVua3NTdG9yZS5zdGFydFZTLFxyXG4gICAgICAgIHRyYW5zZm9ybVZTOiB0cmFuc2Zvcm1WUyxcclxuICAgICAgICB0cmFuc2Zvcm1EZWNsVlM6IGNodW5rc1N0b3JlLnRyYW5zZm9ybURlY2xWUyxcclxuICAgICAgICBpbnN0YW5jaW5nVlM6IGNodW5rc1N0b3JlLmluc3RhbmNpbmdWUyxcclxuICAgICAgICBub3JtYWxWUzogY2h1bmtzU3RvcmUubm9ybWFsVlMsXHJcbiAgICAgICAgdXYwVlM6IGNodW5rc1N0b3JlLnV2MFZTLFxyXG5cclxuICAgICAgICAvLyBGcmFnbWVudFxyXG4gICAgICAgIGRpZmZ1c2VQUzogZGlmZnVzZVBTLFxyXG4gICAgfTtcclxufSIsIi8qXHJcbiAqIEEgc3BlZWQtaW1wcm92ZWQgcGVybGluIGFuZCBzaW1wbGV4IG5vaXNlIGFsZ29yaXRobXMgZm9yIDJELlxyXG4gKlxyXG4gKiBCYXNlZCBvbiBleGFtcGxlIGNvZGUgYnkgU3RlZmFuIEd1c3RhdnNvbiAoc3RlZ3VAaXRuLmxpdS5zZSkuXHJcbiAqIE9wdGltaXNhdGlvbnMgYnkgUGV0ZXIgRWFzdG1hbiAocGVhc3RtYW5AZHJpenpsZS5zdGFuZm9yZC5lZHUpLlxyXG4gKiBCZXR0ZXIgcmFuayBvcmRlcmluZyBtZXRob2QgYnkgU3RlZmFuIEd1c3RhdnNvbiBpbiAyMDEyLlxyXG4gKiBDb252ZXJ0ZWQgdG8gSmF2YXNjcmlwdCBieSBKb3NlcGggR2VudGxlLlxyXG4gKlxyXG4gKiBWZXJzaW9uIDIwMTItMDMtMDlcclxuICpcclxuICogVGhpcyBjb2RlIHdhcyBwbGFjZWQgaW4gdGhlIHB1YmxpYyBkb21haW4gYnkgaXRzIG9yaWdpbmFsIGF1dGhvcixcclxuICogU3RlZmFuIEd1c3RhdnNvbi4gWW91IG1heSB1c2UgaXQgYXMgeW91IHNlZSBmaXQsIGJ1dFxyXG4gKiBhdHRyaWJ1dGlvbiBpcyBhcHByZWNpYXRlZC5cclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogVHlwZVNjcmlwdGlmaWVkIDIwMTZcclxuICovXHJcblxyXG5jbGFzcyBHcmFkIHtcclxuXHRcclxuXHR4OiBudW1iZXJcclxuXHR5OiBudW1iZXJcclxuXHR6OiBudW1iZXJcclxuXHJcblx0Y29uc3RydWN0b3IgKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpIHtcclxuXHRcdHRoaXMueCA9IHhcclxuXHRcdHRoaXMueSA9IHlcclxuXHRcdHRoaXMueiA9IHpcclxuXHR9XHJcblxyXG5cdGRvdDIgKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcblx0XHRyZXR1cm4gdGhpcy54ICogeCArIHRoaXMueSAqIHlcclxuXHR9XHJcblxyXG5cdGRvdDMgKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpIHtcclxuXHRcdHJldHVybiB0aGlzLnggKiB4ICsgdGhpcy55ICogeSArIHRoaXMueiAqIHpcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IEYyID0gMC41ICogKE1hdGguc3FydCgzKSAtIDEpXHJcbmNvbnN0IEcyID0gKDMgLSBNYXRoLnNxcnQoMykpIC8gNlxyXG5cclxuY29uc3QgcGVybSA9IG5ldyBBcnJheSg1MTIpXHJcbmNvbnN0IGdyYWRQID0gbmV3IEFycmF5KDUxMilcclxuXHJcbmNvbnN0IGdyYWQzID0gW1xyXG5cdG5ldyBHcmFkKDEsMSwwKSwgbmV3IEdyYWQoLTEsMSwwKSwgbmV3IEdyYWQoMSwtMSwwKSwgbmV3IEdyYWQoLTEsLTEsMCksXHJcblx0bmV3IEdyYWQoMSwwLDEpLCBuZXcgR3JhZCgtMSwwLDEpLCBuZXcgR3JhZCgxLDAsLTEpLCBuZXcgR3JhZCgtMSwwLC0xKSxcclxuXHRuZXcgR3JhZCgwLDEsMSksIG5ldyBHcmFkKDAsLTEsMSksIG5ldyBHcmFkKDAsMSwtMSksIG5ldyBHcmFkKDAsLTEsLTEpXHJcbl1cclxuXHJcbmNvbnN0IHAgPSBbXHJcblx0MTUxLDE2MCwxMzcsOTEsOTAsMTUsXHJcblx0MTMxLDEzLDIwMSw5NSw5Niw1MywxOTQsMjMzLDcsMjI1LDE0MCwzNiwxMDMsMzAsNjksMTQyLDgsOTksMzcsMjQwLDIxLDEwLDIzLFxyXG5cdDE5MCwgNiwxNDgsMjQ3LDEyMCwyMzQsNzUsMCwyNiwxOTcsNjIsOTQsMjUyLDIxOSwyMDMsMTE3LDM1LDExLDMyLDU3LDE3NywzMyxcclxuXHQ4OCwyMzcsMTQ5LDU2LDg3LDE3NCwyMCwxMjUsMTM2LDE3MSwxNjgsIDY4LDE3NSw3NCwxNjUsNzEsMTM0LDEzOSw0OCwyNywxNjYsXHJcblx0NzcsMTQ2LDE1OCwyMzEsODMsMTExLDIyOSwxMjIsNjAsMjExLDEzMywyMzAsMjIwLDEwNSw5Miw0MSw1NSw0NiwyNDUsNDAsMjQ0LFxyXG5cdDEwMiwxNDMsNTQsIDY1LDI1LDYzLDE2MSwgMSwyMTYsODAsNzMsMjA5LDc2LDEzMiwxODcsMjA4LCA4OSwxOCwxNjksMjAwLDE5NixcclxuXHQxMzUsMTMwLDExNiwxODgsMTU5LDg2LDE2NCwxMDAsMTA5LDE5OCwxNzMsMTg2LCAzLDY0LDUyLDIxNywyMjYsMjUwLDEyNCwxMjMsXHJcblx0NSwyMDIsMzgsMTQ3LDExOCwxMjYsMjU1LDgyLDg1LDIxMiwyMDcsMjA2LDU5LDIyNyw0NywxNiw1OCwxNywxODIsMTg5LDI4LDQyLFxyXG5cdDIyMywxODMsMTcwLDIxMywxMTksMjQ4LDE1MiwgMiw0NCwxNTQsMTYzLCA3MCwyMjEsMTUzLDEwMSwxNTUsMTY3LCA0MywxNzIsOSxcclxuXHQxMjksMjIsMzksMjUzLCAxOSw5OCwxMDgsMTEwLDc5LDExMywyMjQsMjMyLDE3OCwxODUsIDExMiwxMDQsMjE4LDI0Niw5NywyMjgsXHJcblx0MjUxLDM0LDI0MiwxOTMsMjM4LDIxMCwxNDQsMTIsMTkxLDE3OSwxNjIsMjQxLCA4MSw1MSwxNDUsMjM1LDI0OSwxNCwyMzksMTA3LFxyXG5cdDQ5LDE5MiwyMTQsIDMxLDE4MSwxOTksMTA2LDE1NywxODQsIDg0LDIwNCwxNzYsMTE1LDEyMSw1MCw0NSwxMjcsIDQsMTUwLDI1NCxcclxuXHQxMzgsMjM2LDIwNSw5MywyMjIsMTE0LDY3LDI5LDI0LDcyLDI0MywxNDEsMTI4LDE5NSw3OCw2NiwyMTUsNjEsMTU2LDE4MFxyXG5dXHJcblxyXG4vLyBUaGlzIGlzbid0IGEgdmVyeSBnb29kIHNlZWRpbmcgZnVuY3Rpb24sIGJ1dCBpdCB3b3JrcyBvay4gSXQgc3VwcG9ydHMgMl4xNlxyXG4vLyBkaWZmZXJlbnQgc2VlZCB2YWx1ZXMuIFdyaXRlIHNvbWV0aGluZyBiZXR0ZXIgaWYgeW91IG5lZWQgbW9yZSBzZWVkcy5cclxuZnVuY3Rpb24gc2VlZCAoc2VlZDogbnVtYmVyKSB7XHJcblx0aWYgKHNlZWQgPiAwICYmIHNlZWQgPCAxKSB7XHJcblx0XHQvLyBTY2FsZSB0aGUgc2VlZCBvdXRcclxuXHRcdHNlZWQgKj0gNjU1MzZcclxuXHR9XHJcblxyXG5cdHNlZWQgPSBNYXRoLmZsb29yKHNlZWQpXHJcblx0aWYgKHNlZWQgPCAyNTYpIHtcclxuXHRcdHNlZWQgfD0gc2VlZCA8PCA4XHJcblx0fVxyXG5cclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XHJcblx0XHRsZXQgdjogbnVtYmVyXHJcblx0XHRpZiAoaSAmIDEpIHtcclxuXHRcdFx0diA9IHBbaV0gXiAoc2VlZCAmIDI1NSlcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHYgPSBwW2ldIF4gKChzZWVkID4+IDgpICYgMjU1KVxyXG5cdFx0fVxyXG5cclxuXHRcdHBlcm1baV0gPSBwZXJtW2kgKyAyNTZdID0gdlxyXG5cdFx0Z3JhZFBbaV0gPSBncmFkUFtpICsgMjU2XSA9IGdyYWQzW3YgJSAxMl1cclxuXHR9XHJcbn1cclxuXHJcbnNlZWQoMClcclxuXHJcbi8vIDJEIHNpbXBsZXggbm9pc2VcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2ltcGxleCh4aW46IG51bWJlciwgeWluOiBudW1iZXIpIHtcclxuXHRsZXQgbjA6IG51bWJlciwgbjE6IG51bWJlciwgbjI6IG51bWJlciAvLyBOb2lzZSBjb250cmlidXRpb25zIGZyb20gdGhlIHRocmVlIGNvcm5lcnNcclxuXHQvLyBTa2V3IHRoZSBpbnB1dCBzcGFjZSB0byBkZXRlcm1pbmUgd2hpY2ggc2ltcGxleCBjZWxsIHdlJ3JlIGluXHJcblx0Y29uc3QgcyA9ICh4aW4gKyB5aW4pICogRjIgLy8gSGFpcnkgZmFjdG9yIGZvciAyRFxyXG5cdGxldCBpID0gTWF0aC5mbG9vcih4aW4gKyBzKVxyXG5cdGxldCBqID0gTWF0aC5mbG9vcih5aW4gKyBzKVxyXG5cdGNvbnN0IHQgPSAoaSArIGopICogRzJcclxuXHRjb25zdCB4MCA9IHhpbiAtIGkgKyB0IC8vIFRoZSB4LHkgZGlzdGFuY2VzIGZyb20gdGhlIGNlbGwgb3JpZ2luLCB1bnNrZXdlZC5cclxuXHRjb25zdCB5MCA9IHlpbiAtIGogKyB0XHJcblx0Ly8gRm9yIHRoZSAyRCBjYXNlLCB0aGUgc2ltcGxleCBzaGFwZSBpcyBhbiBlcXVpbGF0ZXJhbCB0cmlhbmdsZS5cclxuXHQvLyBEZXRlcm1pbmUgd2hpY2ggc2ltcGxleCB3ZSBhcmUgaW4uXHJcblx0bGV0IGkxOiBudW1iZXIsIGoxOiBudW1iZXIgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIChtaWRkbGUpIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGopIGNvb3Jkc1xyXG5cdGlmICh4MCA+IHkwKSB7IC8vIGxvd2VyIHRyaWFuZ2xlLCBYWSBvcmRlcjogKDAsMCktPigxLDApLT4oMSwxKVxyXG5cdFx0aTEgPSAxXHJcblx0XHRqMSA9IDBcclxuXHR9IGVsc2UgeyAgICAvLyB1cHBlciB0cmlhbmdsZSwgWVggb3JkZXI6ICgwLDApLT4oMCwxKS0+KDEsMSlcclxuXHRcdGkxID0gMFxyXG5cdFx0ajEgPSAxXHJcblx0fVxyXG5cdC8vIEEgc3RlcCBvZiAoMSwwKSBpbiAoaSxqKSBtZWFucyBhIHN0ZXAgb2YgKDEtYywtYykgaW4gKHgseSksIGFuZFxyXG5cdC8vIGEgc3RlcCBvZiAoMCwxKSBpbiAoaSxqKSBtZWFucyBhIHN0ZXAgb2YgKC1jLDEtYykgaW4gKHgseSksIHdoZXJlXHJcblx0Ly8gYyA9ICgzLXNxcnQoMykpLzZcclxuXHRjb25zdCB4MSA9IHgwIC0gaTEgKyBHMiAvLyBPZmZzZXRzIGZvciBtaWRkbGUgY29ybmVyIGluICh4LHkpIHVuc2tld2VkIGNvb3Jkc1xyXG5cdGNvbnN0IHkxID0geTAgLSBqMSArIEcyXHJcblx0Y29uc3QgeDIgPSB4MCAtIDEgKyAyICogRzIgLy8gT2Zmc2V0cyBmb3IgbGFzdCBjb3JuZXIgaW4gKHgseSkgdW5za2V3ZWQgY29vcmRzXHJcblx0Y29uc3QgeTIgPSB5MCAtIDEgKyAyICogRzJcclxuXHQvLyBXb3JrIG91dCB0aGUgaGFzaGVkIGdyYWRpZW50IGluZGljZXMgb2YgdGhlIHRocmVlIHNpbXBsZXggY29ybmVyc1xyXG5cdGkgJj0gMjU1XHJcblx0aiAmPSAyNTVcclxuXHRjb25zdCBnaTAgPSBncmFkUFtpICsgcGVybVtqXV1cclxuXHRjb25zdCBnaTEgPSBncmFkUFtpICsgaTEgKyBwZXJtW2ogKyBqMV1dXHJcblx0Y29uc3QgZ2kyID0gZ3JhZFBbaSArIDEgKyBwZXJtW2ogKyAxXV1cclxuXHQvLyBDYWxjdWxhdGUgdGhlIGNvbnRyaWJ1dGlvbiBmcm9tIHRoZSB0aHJlZSBjb3JuZXJzXHJcblx0bGV0IHQwID0gMC41IC0geDAgKiB4MCAtIHkwICogeTBcclxuXHRpZiAodDAgPCAwKSB7XHJcblx0XHRuMCA9IDBcclxuXHR9IGVsc2Uge1xyXG5cdFx0dDAgKj0gdDBcclxuXHRcdG4wID0gdDAgKiB0MCAqIGdpMC5kb3QyKHgwLCB5MCkgIC8vICh4LHkpIG9mIGdyYWQzIHVzZWQgZm9yIDJEIGdyYWRpZW50XHJcblx0fVxyXG5cdGxldCB0MSA9IDAuNSAtIHgxICogeDEgLSB5MSAqIHkxXHJcblx0aWYgKHQxIDwgMCkge1xyXG5cdFx0bjEgPSAwXHJcblx0fSBlbHNlIHtcclxuXHRcdHQxICo9IHQxXHJcblx0XHRuMSA9IHQxICogdDEgKiBnaTEuZG90Mih4MSwgeTEpXHJcblx0fVxyXG5cdGxldCB0MiA9IDAuNSAtIHgyICogeDIgLSB5MiAqIHkyXHJcblx0aWYgKHQyIDwgMCkge1xyXG5cdFx0bjIgPSAwXHJcblx0fSBlbHNlIHtcclxuXHRcdHQyICo9IHQyXHJcblx0XHRuMiA9IHQyICogdDIgKiBnaTIuZG90Mih4MiwgeTIpXHJcblx0fVxyXG5cdC8vIEFkZCBjb250cmlidXRpb25zIGZyb20gZWFjaCBjb3JuZXIgdG8gZ2V0IHRoZSBmaW5hbCBub2lzZSB2YWx1ZS5cclxuXHQvLyBUaGUgcmVzdWx0IGlzIHNjYWxlZCB0byByZXR1cm4gdmFsdWVzIGluIHRoZSBpbnRlcnZhbCBbLTEsMV0uXHJcblx0cmV0dXJuIDcwICogKG4wICsgbjEgKyBuMilcclxufSIsImV4cG9ydCBjbGFzcyBGbHlDYW1lcmEgZXh0ZW5kcyBwYy5TY3JpcHRUeXBlIHtcclxuXHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBtb2RlOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBzcGVlZDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgc2xvd1NwZWVkOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBmYXN0U3BlZWQ6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHNlbnNpdGl2aXR5OiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBtb2JpbGVDb250cm9sczogcGN4LkVudGl0eSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBwcml2YXRlIGV4OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGV5OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHRyYW5zbGF0ZUxvYzogcGN4LlZlYzM7XHJcbiAgICBwcml2YXRlIG1vdmVkOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBtaWRkbGVEb3duOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSByaWdodERvd246IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIG1vYmlsZUNvbnRyb2w6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgLy8gQ2FtZXJhIGV1bGVyIGFuZ2xlIHJvdGF0aW9uIGFyb3VuZCB4IGFuZCB5IGF4ZXNcclxuICAgICAgICBjb25zdCBldWxlcnMgPSB0aGlzLmVudGl0eS5nZXRMb2NhbEV1bGVyQW5nbGVzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZXggPSAoZXVsZXJzLnogLSBldWxlcnMueCk7XHJcbiAgICAgICAgdGhpcy5leSA9IChldWxlcnMueiAtIGV1bGVycy55KTtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZUxvYyA9IHBjLlZlYzMuWkVSTy5jbG9uZSgpO1xyXG4gICAgICAgIHRoaXMubW92ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJpZ2h0RG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubWlkZGxlRG93biA9IGZhbHNlO1xyXG4gICAgXHJcbiAgICAgICAgLy8gRGlzYWJsaW5nIHRoZSBjb250ZXh0IG1lbnUgc3RvcHMgdGhlIGJyb3dzZXIgZGlzcGxheWluZyBhIG1lbnUgd2hlblxyXG4gICAgICAgIC8vIHlvdSByaWdodC1jbGljayB0aGUgcGFnZVxyXG4gICAgICAgIGlmICh0aGlzLmFwcC5tb3VzZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZS5kaXNhYmxlQ29udGV4dE1lbnUoKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2Uub24ocGMuRVZFTlRfTU9VU0VNT1ZFLCB0aGlzLm9uTW91c2VNb3ZlLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2Uub24ocGMuRVZFTlRfTU9VU0VET1dOLCB0aGlzLm9uTW91c2VEb3duLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2Uub24ocGMuRVZFTlRfTU9VU0VVUCwgICB0aGlzLm9uTW91c2VVcCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhcHBlbmQoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmV4ICs9IHg7XHJcbiAgICAgICAgdGhpcy5leSArPSB5O1xyXG4gICAgICAgIHRoaXMuZXggPSBwYy5tYXRoLmNsYW1wKHRoaXMuZXgsIC05MCwgOTApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0cmFuc2xhdGUoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlTG9jLnggKz0geDtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZUxvYy55ICs9IHk7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGVMb2MueiArPSB6O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcikge1xyXG5cclxuICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmFwcDtcclxuXHJcbiAgICAgICAgbGV0IHNwZWVkID0gdGhpcy5zcGVlZDtcclxuXHJcbiAgICAgICAgaWYgKGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9TUEFDRSkpIHtcclxuICAgICAgICAgICAgc3BlZWQgPSB0aGlzLnNsb3dTcGVlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9TSElGVCkpIHtcclxuICAgICAgICAgICAgc3BlZWQgPSB0aGlzLmZhc3RTcGVlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEpveXBhZCBjb250cm9sXHJcbiAgICAgICAgY29uc3Qgam95c3RpY2tNb3ZlciA9IHRvdWNoSm95cGFkPy5zdGlja3NbJ2pveXN0aWNrMCddO1xyXG4gICAgICAgIGNvbnN0IGpveXN0aWNrUm90ZXIgPSB0b3VjaEpveXBhZD8uc3RpY2tzWydqb3lzdGljazEnXTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5tb2JpbGVDb250cm9scyAmJiB0b3VjaEpveXBhZD8uYnV0dG9ucy53YXNQcmVzc2VkKCdidXR0b24yJykpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2JpbGVDb250cm9sID0gIXRoaXMubW9iaWxlQ29udHJvbDtcclxuICAgICAgICAgICAgdGhpcy5tb2JpbGVDb250cm9scy5lbmFibGVkID0gdGhpcy5tb2JpbGVDb250cm9sO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGpveXN0aWNrUm90ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmQoam95c3RpY2tSb3Rlci55LCAtam95c3RpY2tSb3Rlci54KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChqb3lzdGlja01vdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKHNwZWVkICogam95c3RpY2tNb3Zlci54ICogZHQsIDAsIC1zcGVlZCAqIGpveXN0aWNrTW92ZXIueSAqIGR0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgY2FtZXJhJ3MgcG9zaXRpb25cclxuICAgICAgICBpZiAoYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX1VQKSB8fCBhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfVykpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoMCwgMCwgLXNwZWVkICogZHQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX0RPV04pIHx8IGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9TKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZSgwLCAwLCBzcGVlZCAqIGR0KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAoYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX0xFRlQpIHx8IGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9BKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZSgtc3BlZWQgKiBkdCwgMCwgMCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfUklHSFQpIHx8IGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9EKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZShzcGVlZCAqIGR0LCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBjYW1lcmEncyBUUlNcclxuICAgICAgICB0aGlzLmVudGl0eS5zZXRMb2NhbEV1bGVyQW5nbGVzKHRoaXMuZXgsIHRoaXMuZXksIDApO1xyXG4gICAgICAgIHRoaXMuZW50aXR5LnRyYW5zbGF0ZUxvY2FsKHRoaXMudHJhbnNsYXRlTG9jKTtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZUxvYy5zZXQoMCwgMCwgMCk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBmcnVzdHVtIGJ5IGFjdHVhbCBtYXRyaXhcclxuICAgICAgICB0aGlzLmFwcC5yZW5kZXJlci51cGRhdGVDYW1lcmFGcnVzdHVtKHRoaXMuZW50aXR5LmNhbWVyYT8uY2FtZXJhKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uTW91c2VNb3ZlKGV2ZW50OiBwY3guTW91c2VFdmVudCkge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMubW9kZSAmJiAhcGMuTW91c2UuaXNQb2ludGVyTG9ja2VkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnJpZ2h0RG93biAmJlxyXG4gICAgICAgICAgICAhdGhpcy5taWRkbGVEb3duKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgY3VycmVudCBFdWxlciBhbmdsZXMsIGNsYW1wIHRoZSBwaXRjaC5cclxuICAgICAgICBpZiAoIXRoaXMubW92ZWQpIHtcclxuICAgICAgICAgICAgLy8gZmlyc3QgbW92ZSBldmVudCBjYW4gYmUgdmVyeSBsYXJnZVxyXG4gICAgICAgICAgICB0aGlzLm1vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucmlnaHREb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgLWV2ZW50LmR5IC8gdGhpcy5zZW5zaXRpdml0eSxcclxuICAgICAgICAgICAgICAgIC1ldmVudC5keCAvIHRoaXMuc2Vuc2l0aXZpdHlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1pZGRsZURvd24pIHtcclxuXHJcbiAgICAgICAgICAgIGxldCBzcGVlZCA9IHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZCEuaXNQcmVzc2VkKHBjLktFWV9TSElGVCkpIHtcclxuICAgICAgICAgICAgICAgIHNwZWVkID0gdGhpcy5mYXN0U3BlZWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKC0oZXZlbnQuZHggLyA1KSAqIHNwZWVkLCAoZXZlbnQuZHkgLyA1KSAqIHNwZWVkLCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbk1vdXNlRG93bihldmVudDogcGN4Lk1vdXNlRXZlbnQpIHtcclxuXHJcbiAgICAgICAgLy8gV2hlbiB0aGUgbW91c2UgYnV0dG9uIGlzIGNsaWNrZWQgdHJ5IGFuZCBjYXB0dXJlIHRoZSBwb2ludGVyXHJcbiAgICAgICAgaWYgKCF0aGlzLm1vZGUgJiYgIXBjLk1vdXNlLmlzUG9pbnRlckxvY2tlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLm1vdXNlIS5lbmFibGVQb2ludGVyTG9jaygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gcGMuTU9VU0VCVVRUT05fUklHSFQpIHtcclxuICAgICAgICAgICAgdGhpcy5yaWdodERvd24gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSBwYy5NT1VTRUJVVFRPTl9NSURETEUpIHtcclxuICAgICAgICAgICAgdGhpcy5taWRkbGVEb3duID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgb25Nb3VzZVVwKGV2ZW50OiBwY3guTW91c2VFdmVudCkge1xyXG5cclxuICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSBwYy5NT1VTRUJVVFRPTl9SSUdIVCkge1xyXG4gICAgICAgICAgICB0aGlzLnJpZ2h0RG93biA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gcGMuTU9VU0VCVVRUT05fTUlERExFKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWlkZGxlRG93biA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRmx5Q2FtZXJhO1xyXG5leHBvcnQgY29uc3QgZmx5Q2FtZXJhU2NyaXB0TmFtZSA9ICdmbHlDYW1lcmEnO1xyXG5cclxucGMucmVnaXN0ZXJTY3JpcHQoRmx5Q2FtZXJhLCBmbHlDYW1lcmFTY3JpcHROYW1lKTtcclxuXHJcbkZseUNhbWVyYS5hdHRyaWJ1dGVzLmFkZCgnbW9iaWxlQ29udHJvbHMnLCB7XHJcbiAgICB0eXBlOiAnZW50aXR5JyxcclxufSk7XHJcblxyXG5GbHlDYW1lcmEuYXR0cmlidXRlcy5hZGQoJ3NwZWVkJywge1xyXG4gICAgdHlwZTogJ251bWJlcicsXHJcbiAgICBkZWZhdWx0OiAxMFxyXG59KTtcclxuXHJcbkZseUNhbWVyYS5hdHRyaWJ1dGVzLmFkZCgnc2xvd1NwZWVkJywge1xyXG4gICAgdHlwZTogJ251bWJlcicsXHJcbiAgICBkZWZhdWx0OiAxXHJcbn0pO1xyXG5cclxuRmx5Q2FtZXJhLmF0dHJpYnV0ZXMuYWRkKCdmYXN0U3BlZWQnLCB7XHJcbiAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgIGRlZmF1bHQ6IDIwXHJcbn0pO1xyXG5cclxuRmx5Q2FtZXJhLmF0dHJpYnV0ZXMuYWRkKCdzZW5zaXRpdml0eScsIHtcclxuICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgbWluOiAxLFxyXG4gICAgZGVmYXVsdDogNVxyXG59KTtcclxuXHJcbkZseUNhbWVyYS5hdHRyaWJ1dGVzLmFkZCgnbW9kZScsIHtcclxuICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgZGVmYXVsdDogMCxcclxuICAgIGVudW06IFt7XHJcbiAgICAgICAgXCJMb2NrXCI6IDBcclxuICAgIH0sIHtcclxuICAgICAgICBcIkRyYWdcIjogMVxyXG4gICAgfV1cclxufSk7IiwiY2xhc3MgRnBzQ291bnRlciBleHRlbmRzIHBjLlNjcmlwdFR5cGUge1xyXG5cclxuICAgIGZwczogeyB0aWNrKCk6IHZvaWQgfSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBpbml0aWFsaXplKCk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbnN0ciA9ICh3aW5kb3cgYXMgYW55KS5GUFNNZXRlcjtcclxuXHJcbiAgICAgICAgaWYgKGNvbnN0cikge1xyXG4gICAgICAgICAgICB0aGlzLmZwcyA9IG5ldyBjb25zdHIoe1xyXG4gICAgICAgICAgICAgICAgaGVhdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGdyYXBoOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZnBzPy50aWNrKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZwc0NvdW50ZXI7XHJcbmV4cG9ydCBjb25zdCBmcHNDb3VudGVyU2NyaXB0TmFtZSA9ICdGcHNDb3VudGVyJztcclxuXHJcbnBjLnJlZ2lzdGVyU2NyaXB0KEZwc0NvdW50ZXIsIGZwc0NvdW50ZXJTY3JpcHROYW1lKTsiLCJjb25zdCB0bXBWZWMgPSBuZXcgcGMuVmVjMygpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdEaXJlY3Rpb25WZWN0b3IocG9zaXRpb246IHBjeC5WZWMzLCBkaXI6IHBjeC5WZWMzLCBjb2xvciA9IHBjLkNvbG9yLlJFRCkge1xyXG5cclxuICAgIC8vIERyYXcgdGhlIHZlY3RvclxyXG4gICAgY29uc3Qgc3RhcnQgPSBwb3NpdGlvbjtcclxuICAgIGNvbnN0IGVuZCA9IHRtcFZlYy5hZGQyKHBvc2l0aW9uLCBkaXIpO1xyXG4gICAgXHJcbiAgICBwYy5hcHAhLmRyYXdMaW5lKHN0YXJ0LCBlbmQsIGNvbG9yLCBmYWxzZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3UG9pbnQoXHJcbiAgICB7Y2VudGVyLCByYWRpdXMgPSAwLjEsIG51bVNlZ21lbnRzID0gNCwgY29sb3IgPSBwYy5Db2xvci5SRUQsIGxheWVyLCBkZXB0aFRlc3QgPSBmYWxzZSB9OlxyXG4gICAge2NlbnRlcjogcGN4LlZlYzMsIHJhZGl1cz86IG51bWJlciwgbnVtU2VnbWVudHM/OiBudW1iZXIsIGNvbG9yPzogcGN4LkNvbG9yLCBkZXB0aFRlc3Q/OiBib29sZWFuLCBsYXllcj86IHBjeC5MYXllcn1cclxuKSB7XHJcbiAgICBjb25zdCBibG9jayAgPSA2ICogMztcclxuICAgIGNvbnN0IHBvaW50cyA9IG5ldyBBcnJheShudW1TZWdtZW50cyAqIGJsb2NrKTtcclxuICAgIGNvbnN0IHN0ZXAgPSAyICogTWF0aC5QSSAvIG51bVNlZ21lbnRzO1xyXG5cclxuICAgIGxldCBhbmdsZSA9IDA7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1TZWdtZW50czsgaSsrKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNpbjAgPSBNYXRoLnNpbihhbmdsZSk7XHJcbiAgICAgICAgY29uc3QgY29zMCA9IE1hdGguY29zKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgYW5nbGUgKz0gc3RlcDtcclxuXHJcbiAgICAgICAgY29uc3Qgc2luMSA9IE1hdGguc2luKGFuZ2xlKTtcclxuICAgICAgICBjb25zdCBjb3MxID0gTWF0aC5jb3MoYW5nbGUpO1xyXG5cclxuICAgICAgICBjb25zdCBqID0gaSAqIGJsb2NrO1xyXG5cclxuICAgICAgICBwb2ludHNbaiArIDBdID0gY2VudGVyLnggKyByYWRpdXMgKiBzaW4wO1xyXG4gICAgICAgIHBvaW50c1tqICsgMV0gPSBjZW50ZXIueTtcclxuICAgICAgICBwb2ludHNbaiArIDJdID0gY2VudGVyLnogKyByYWRpdXMgKiBjb3MwO1xyXG5cclxuICAgICAgICBwb2ludHNbaiArIDNdID0gY2VudGVyLnggKyByYWRpdXMgKiBzaW4xO1xyXG4gICAgICAgIHBvaW50c1tqICsgNF0gPSBjZW50ZXIueTtcclxuICAgICAgICBwb2ludHNbaiArIDVdID0gY2VudGVyLnogKyByYWRpdXMgKiBjb3MxO1xyXG5cclxuICAgICAgICBwb2ludHNbaiArIDZdID0gY2VudGVyLng7XHJcbiAgICAgICAgcG9pbnRzW2ogKyA3XSA9IGNlbnRlci55ICsgcmFkaXVzICogc2luMDtcclxuICAgICAgICBwb2ludHNbaiArIDhdID0gY2VudGVyLnogKyByYWRpdXMgKiBjb3MwO1xyXG5cclxuICAgICAgICBwb2ludHNbaiArIDldICA9IGNlbnRlci54O1xyXG4gICAgICAgIHBvaW50c1tqICsgMTBdID0gY2VudGVyLnkgKyByYWRpdXMgKiBzaW4xO1xyXG4gICAgICAgIHBvaW50c1tqICsgMTFdID0gY2VudGVyLnogKyByYWRpdXMgKiBjb3MxO1xyXG5cclxuICAgICAgICBwb2ludHNbaiArIDEyXSA9IGNlbnRlci54ICsgcmFkaXVzICogY29zMDtcclxuICAgICAgICBwb2ludHNbaiArIDEzXSA9IGNlbnRlci55ICsgcmFkaXVzICogc2luMDtcclxuICAgICAgICBwb2ludHNbaiArIDE0XSA9IGNlbnRlci56O1xyXG5cclxuICAgICAgICBwb2ludHNbaiArIDE1XSA9IGNlbnRlci54ICsgcmFkaXVzICogY29zMTtcclxuICAgICAgICBwb2ludHNbaiArIDE2XSA9IGNlbnRlci55ICsgcmFkaXVzICogc2luMTtcclxuICAgICAgICBwb2ludHNbaiArIDE3XSA9IGNlbnRlci56O1xyXG4gICAgfVxyXG5cclxuICAgIHBjLmFwcCEuZHJhd0xpbmVBcnJheXMocG9pbnRzLCBjb2xvciwgZGVwdGhUZXN0LCBsYXllcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3Qm94KFxyXG4gICAge21pbiwgbWF4LCBjb2xvciA9IHBjLkNvbG9yLlJFRCwgbGF5ZXIsIGRlcHRoVGVzdCA9IGZhbHNlfTpcclxuICAgIHttaW46IHBjeC5WZWMzLCBtYXg6IHBjeC5WZWMzLCBjb2xvcj86IHBjeC5Db2xvciwgZGVwdGhUZXN0PzogYm9vbGVhbiwgbGF5ZXI/OiBwY3guTGF5ZXJ9XHJcbikge1xyXG4gICAgcGMuYXBwPy5kcmF3V2lyZUFsaWduZWRCb3gobWluLCBtYXgsIGNvbG9yLCBkZXB0aFRlc3QsIGxheWVyKTtcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFJhbmRvbSB7XHJcblxyXG4gICAgcHJpdmF0ZSBfdG1wOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF90aWNrOiBudW1iZXI7XHJcblxyXG4gICAgcmVhZG9ubHkgc2VlZDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNlZWQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2VlZCA9IHNlZWQ7XHJcbiAgICAgICAgdGhpcy5fdG1wICA9IHNlZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5fdG1wID0gdGhpcy5zZWVkO1xyXG4gICAgfVxyXG5cclxuICAgIG5leHQoKTogbnVtYmVyIHtcclxuICAgICAgICB0aGlzLl90bXAgPSAodGhpcy5fdG1wICogNDgyNzEpICUgMjE0NzQ4MzY0NztcclxuICAgICAgICB0aGlzLl90aWNrID0gdGhpcy5fdG1wIC8gMjE0NzQ4MzY0NztcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGljaztcclxuICAgIH1cclxuXHJcbiAgICBuZXh0RmxvYXQobWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KCkgKiAobWF4IC0gbWluKSArIG1pbjtcclxuICAgIH1cclxuXHJcbiAgICBuZXh0SW50KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dEZsb2F0KG1pbiwgbWF4KSB8IDA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJhbmRvbSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5leHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBucmFuZCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5leHRGbG9hdCgtMSwgMSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuL1R5cGVzLm1qc1wiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic1N0b3JlMkQ8VCBleHRlbmRzIHN0cmluZyB8IG51bWJlciB8IG9iamVjdD4ge1xyXG5cclxuICAgIHByb3RlY3RlZCBfcDogVFtdO1xyXG4gICAgcHJvdGVjdGVkIF9jb2xzID0gMDtcclxuICAgIHByb3RlY3RlZCBfcm93cyA9IDA7XHJcblxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IF9pbml0QXJyYXlUeXBlKHNpemU6IGludCk6IFRbXTtcclxuXHJcbiAgICBwdWJsaWMgaW5pdChjb2xzOiBpbnQsIHJvd3M6IGludCk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLl9jb2xzID0gY29scztcclxuICAgICAgICB0aGlzLl9yb3dzID0gcm93cztcclxuXHJcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGNvbHMgKiByb3dzO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3AgPSB0aGlzLl9pbml0QXJyYXlUeXBlKHNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0QnlWYWwoY29sczogaW50LCByb3dzOiBpbnQsIHZhbDogVCB8ICgoKSA9PiBUKSk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLmluaXQoY29scywgcm93cyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNpemUgPSBjb2xzICogcm93cztcclxuICAgICAgICBjb25zdCB2YWxJc0Z1bmMgPSB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCBzaXplOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5fcFtpXSA9IHZhbElzRnVuYyA/IHZhbCgpIDogdmFsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdEJ5U3RvcmUoY29sczogaW50LCByb3dzOiBpbnQsIHZhbDogUmVjb3JkPGludCwgVD4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9jb2xzID0gY29scztcclxuICAgICAgICB0aGlzLl9yb3dzID0gcm93cztcclxuICAgICAgICB0aGlzLl9wID0gdmFsIGFzIFRbXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkcigpOiBSZWNvcmQ8bnVtYmVyLCBUPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3A7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNpemUoKTogaW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcm93cyAqIHRoaXMuX2NvbHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldChjb2w6IGludCwgcm93OiBpbnQpOiBUIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcFtyb3cgKiB0aGlzLl9jb2xzICsgY29sXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0KGNvbDogaW50LCByb3c6IGludCwgdmFsdWU6IFQpIHtcclxuICAgICAgICB0aGlzLl9wW3JvdyAqIHRoaXMuX2NvbHMgKyBjb2xdID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEJ5SW5kZXgoaW5kZXg6IGludCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wW2luZGV4XTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIHNldEJ5SW5kZXgoaW5kZXg6IGludCwgdmFsdWU6IFQpIHtcclxuICAgICAgICB0aGlzLl9wW2luZGV4XSA9IHZhbHVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT2JqU3RvcmUyRDxUIGV4dGVuZHMgb2JqZWN0PiBleHRlbmRzIEFic1N0b3JlMkQ8VD4ge1xyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfaW5pdEFycmF5VHlwZShzaXplOiBudW1iZXIpOiBUW10ge1xyXG4gICAgICAgIHJldHVybiBuZXcgQXJyYXk8VD4oc2l6ZSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBJVmVjdG9yMywgZmxvYXQgfSBmcm9tIFwiLi9UeXBlcy5tanNcIjtcclxuXHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBzcGVjaWZpZWQgMy1kaW1lbnNpb25hbCB2ZWN0b3IgdG8gdGhlIHN1cHBsaWVkIG51bWVyaWNhbCB2YWx1ZXMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0PFQgZXh0ZW5kcyBJVmVjdG9yMz4odG86IFQsIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpOiBUIHtcclxuICAgIHRvLnggPSB4O1xyXG4gICAgdG8ueSA9IHk7XHJcbiAgICB0by56ID0gejtcclxuICAgIHJldHVybiB0bztcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIEV1Y2xpZGVhbiBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0d28gZ2l2ZW4gcG9pbnRzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKHZhbHVlMTogUmVhZG9ubHk8SVZlY3RvcjM+LCB2YWx1ZTI6IFJlYWRvbmx5PElWZWN0b3IzPikge1xyXG4gICAgY29uc3QgZHggPSB2YWx1ZTEueCAtIHZhbHVlMi54O1xyXG4gICAgY29uc3QgZHkgPSB2YWx1ZTEueSAtIHZhbHVlMi55O1xyXG4gICAgY29uc3QgZHogPSB2YWx1ZTEueiAtIHZhbHVlMi56O1xyXG4gICAgY29uc3QgbHMgPSBkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHo7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGxzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIEV1Y2xpZGVhbiBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0d28gZ2l2ZW4gcG9pbnRzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlVjNYWVoodmFsdWUxOiBSZWFkb25seTxJVmVjdG9yMz4sIHg6IGZsb2F0LCB5OiBmbG9hdCwgejogZmxvYXQpIHtcclxuICAgIGNvbnN0IGR4ID0gdmFsdWUxLnggLSB4O1xyXG4gICAgY29uc3QgZHkgPSB2YWx1ZTEueSAtIHk7XHJcbiAgICBjb25zdCBkeiA9IHZhbHVlMS56IC0gejtcclxuICAgIGNvbnN0IGxzID0gZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6O1xyXG4gICAgcmV0dXJuIE1hdGguc3FydChscyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiB0aGUgdHdvIGdpdmVuIHBvaW50cy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZVgxWTFaMVgyWTJaMih4MTogZmxvYXQsIHkxOiBmbG9hdCwgejE6IGZsb2F0LCB4MjogZmxvYXQsIHkyOiBmbG9hdCwgejI6IGZsb2F0KSB7XHJcbiAgICBjb25zdCBkeCA9IHgxIC0geDI7XHJcbiAgICBjb25zdCBkeSA9IHkxIC0geTI7XHJcbiAgICBjb25zdCBkeiA9IHoxIC0gejI7XHJcbiAgICBjb25zdCBscyA9IGR4ICogZHggKyBkeSAqIGR5ICsgZHogKiBkejtcclxuICAgIHJldHVybiBNYXRoLnNxcnQobHMpO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJucyBhIHZlY3RvciB3aXRoIHRoZSBzYW1lIGRpcmVjdGlvbiBhcyB0aGUgZ2l2ZW4gdmVjdG9yLCBidXQgd2l0aCBhIGxlbmd0aCBvZiAxLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZTxUT3V0IGV4dGVuZHMgSVZlY3RvcjM+KHZhbHVlOiBSZWFkb25seTxJVmVjdG9yMz4sIG91dDogVE91dCk6IFRPdXQge1xyXG5cclxuICAgIGNvbnN0IGxzID0gdmFsdWUueCAqIHZhbHVlLnggKyB2YWx1ZS55ICogdmFsdWUueSArIHZhbHVlLnogKiB2YWx1ZS56O1xyXG4gICAgY29uc3QgbGVuZ3RoID0gTWF0aC5zcXJ0KGxzKTtcclxuXHJcbiAgICByZXR1cm4gc2V0KFxyXG4gICAgICAgIG91dCxcclxuICAgICAgICB2YWx1ZS54IC8gbGVuZ3RoLFxyXG4gICAgICAgIHZhbHVlLnkgLyBsZW5ndGgsXHJcbiAgICAgICAgdmFsdWUueiAvIGxlbmd0aFxyXG4gICAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgdmVjdG9yIHdpdGggdGhlIHNhbWUgZGlyZWN0aW9uIGFzIHRoZSBnaXZlbiB2ZWN0b3IsIGJ1dCB3aXRoIGEgbGVuZ3RoIG9mIDEuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUmVmPFQgZXh0ZW5kcyBJVmVjdG9yMz4ocmVmVmFsdWU6IFQpOiBUIHtcclxuXHJcbiAgICBjb25zdCBscyA9IHJlZlZhbHVlLnggKiByZWZWYWx1ZS54ICsgcmVmVmFsdWUueSAqIHJlZlZhbHVlLnkgKyByZWZWYWx1ZS56ICogcmVmVmFsdWUuejtcclxuICAgIGNvbnN0IGxlbmd0aCA9IE1hdGguc3FydChscyk7XHJcbiAgICBcclxuICAgIHJlZlZhbHVlLnggLz0gbGVuZ3RoO1xyXG4gICAgcmVmVmFsdWUueSAvPSBsZW5ndGg7XHJcbiAgICByZWZWYWx1ZS56IC89IGxlbmd0aDtcclxuICAgIHJldHVybiByZWZWYWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZHMgdHdvIHZlY3RvcnMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkPFRPdXQgZXh0ZW5kcyBJVmVjdG9yMz4obGVmdDogUmVhZG9ubHk8SVZlY3RvcjM+LCByaWdodDogUmVhZG9ubHk8SVZlY3RvcjM+LCBvdXQ6IFRPdXQpOiBUT3V0IHtcclxuICAgIHJldHVybiBzZXQoXHJcbiAgICAgICAgb3V0LFxyXG4gICAgICAgIGxlZnQueCArIHJpZ2h0LngsXHJcbiAgICAgICAgbGVmdC55ICsgcmlnaHQueSxcclxuICAgICAgICBsZWZ0LnogKyByaWdodC56XHJcbiAgICApO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkcyB0d28gdmVjdG9ycy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRSZWYocmVmTGVmdDogSVZlY3RvcjMsIHJpZ2h0OiBSZWFkb25seTxJVmVjdG9yMz4pIHtcclxuICAgIHJldHVybiBhZGQocmVmTGVmdCwgcmlnaHQsIHJlZkxlZnQpO1xyXG59XHJcblxyXG4vKipcclxuICogU3VidHJhY3RzIHRoZSBzZWNvbmQgdmVjdG9yIGZyb20gdGhlIGZpcnN0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0PFRPdXQgZXh0ZW5kcyBJVmVjdG9yMz4obGVmdDogUmVhZG9ubHk8SVZlY3RvcjM+LCByaWdodDogUmVhZG9ubHk8SVZlY3RvcjM+LCBvdXQ6IFRPdXQpOiBUT3V0IHtcclxuICAgIHJldHVybiBzZXQoXHJcbiAgICAgICAgb3V0LFxyXG4gICAgICAgIGxlZnQueCAtIHJpZ2h0LngsXHJcbiAgICAgICAgbGVmdC55IC0gcmlnaHQueSxcclxuICAgICAgICBsZWZ0LnogLSByaWdodC56XHJcbiAgICApO1xyXG59XHJcblxyXG4vKipcclxuICogQ29tcHV0ZXMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3Jvc3M8VE91dCBleHRlbmRzIElWZWN0b3IzPih2ZWN0b3IxOiBSZWFkb25seTxJVmVjdG9yMz4sIHZlY3RvcjI6IFJlYWRvbmx5PElWZWN0b3IzPiwgb3V0OiBUT3V0KTogVE91dCB7XHJcbiAgICByZXR1cm4gc2V0KFxyXG4gICAgICAgIG91dCxcclxuICAgICAgICB2ZWN0b3IxLnkgKiB2ZWN0b3IyLnogLSB2ZWN0b3IxLnogKiB2ZWN0b3IyLnksXHJcbiAgICAgICAgdmVjdG9yMS56ICogdmVjdG9yMi54IC0gdmVjdG9yMS54ICogdmVjdG9yMi56LFxyXG4gICAgICAgIHZlY3RvcjEueCAqIHZlY3RvcjIueSAtIHZlY3RvcjEueSAqIHZlY3RvcjIueFxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgc2V0LFxyXG4gICAgbm9ybWFsaXplLFxyXG4gICAgbm9ybWFsaXplUmVmLFxyXG4gICAgYWRkLFxyXG4gICAgc3VidHJhY3QsXHJcbiAgICBhZGRSZWYsXHJcbiAgICBkaXN0YW5jZSxcclxuICAgIGRpc3RhbmNlVjNYWVosXHJcbiAgICBkaXN0YW5jZVgxWTFaMVgyWTJaMixcclxuICAgIGNyb3NzXHJcbn0iLCJpbXBvcnQgeyBmbG9hdCB9IGZyb20gXCIuL1R5cGVzLm1qc1wiO1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIEV1Y2xpZGVhbiBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0d28gZ2l2ZW4gcG9pbnRzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlWDFaMVgyWjIoeDE6IGZsb2F0LCB6MTogZmxvYXQsIHgyOiBmbG9hdCwgejI6IGZsb2F0KSB7XHJcbiAgICBjb25zdCBkeCA9IHgxIC0geDI7XHJcbiAgICBjb25zdCBkeiA9IHoxIC0gejI7XHJcbiAgICBjb25zdCBscyA9IGR4ICogZHggKyBkeiAqIGR6O1xyXG4gICAgcmV0dXJuIE1hdGguc3FydChscyk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGRpc3RhbmNlWDFaMVgyWjIsXHJcbn07IiwiaW1wb3J0IHR5cGUgeyBSZWZPYmplY3QsIElWZWN0b3IzLCBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgT2JqU3RvcmUyRCB9IGZyb20gXCIuLi9TaGFyZWQvU3RvcmUyRC5tanNcIjtcclxuaW1wb3J0IHsgZ2V0VGV4dCB9IGZyb20gXCIuLi9TaGFyZWQvVXRpbHMubWpzXCI7XHJcbmltcG9ydCBWZWN0b3IzTWF0aCBmcm9tIFwiLi4vU2hhcmVkL1ZlY3RvcjNNYXRoLm1qc1wiO1xyXG5pbXBvcnQgVmVjdG9yMk1hdGggZnJvbSBcIi4uL1NoYXJlZC9WZWN0b3IyTWF0aC5tanNcIjtcclxuaW1wb3J0IHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGF0Y2hMb2RCYXNlIHtcclxuICAgIGNvcmU6IGludDtcclxuICAgIGxlZnQ6IGludDtcclxuICAgIHJpZ2h0OiBpbnQ7XHJcbiAgICB0b3A6IGludDtcclxuICAgIGJvdHRvbTogaW50O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElQYXRjaExvZCBleHRlbmRzIElQYXRjaExvZEJhc2Uge1xyXG5cclxuICAgIC8qKiBEaXN0YW5jZSB0byBwYXRjaCBjZW50ZXIgeHogYW5kIHkgcG9zIGZyb20gaGVpZ2h0bWFwIGFsdGl0dWRlIGJ5IGNhbWVyYSB4eiB0byAqL1xyXG4gICAgZGlzdGFuY2U6IGZsb2F0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9kSWQoYzogaW50LCBsOiBpbnQsIHI6IGludCwgdDogaW50LCBiOiBpbnQpIHtcclxuICAgICAgICAgICAgXHJcbiAgICBjb25zdCBsb2RDb3JlID0gYyArIDE7XHJcbiAgICBjb25zdCBsb2RCaW5hcnlWYWx1ZSA9IChsIDw8IDMpIHwgKHIgPDwgMikgfCAodCA8PCAxKSB8IGI7XHJcbiAgICBcclxuICAgIHJldHVybiBsb2RDb3JlICogMHgxMTExIC0gbG9kQmluYXJ5VmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0UGF0Y2hMb2Q6IFJlYWRvbmx5PElQYXRjaExvZD4gPSB7XHJcbiAgICBkaXN0YW5jZTogMCxcclxuICAgIGNvcmU6ICAgICAwLFxyXG4gICAgbGVmdDogICAgIDAsXHJcbiAgICByaWdodDogICAgMCxcclxuICAgIHRvcDogICAgICAwLFxyXG4gICAgYm90dG9tOiAgIDAsXHJcbn1cclxuXHJcbmNvbnN0IGdldFplcm9QYXRjaExvZCA9ICgpOiBJUGF0Y2hMb2QgPT4gKHtcclxuICAgIGRpc3RhbmNlOiAwLFxyXG4gICAgY29yZTogICAgIDAsXHJcbiAgICBsZWZ0OiAgICAgMCxcclxuICAgIHJpZ2h0OiAgICAwLFxyXG4gICAgdG9wOiAgICAgIDAsXHJcbiAgICBib3R0b206ICAgMCxcclxufSk7XHJcblxyXG5leHBvcnQgY2xhc3MgTG9kTWFuYWdlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBfekZhcjogaW50O1xyXG4gICAgcHJpdmF0ZSBfbWFwOiBPYmpTdG9yZTJEPElQYXRjaExvZD47XHJcbiAgICBwcml2YXRlIF9yZWdpb25zOiBmbG9hdFtdO1xyXG5cclxuICAgIHByaXZhdGUgX3BhdGNoU2l6ZTogaW50O1xyXG4gICAgcHJpdmF0ZSBfbnVtUGF0Y2hlc1g6IGludDtcclxuICAgIHByaXZhdGUgX251bVBhdGNoZXNaOiBpbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBfbWF4TE9EOiBpbnQ7XHJcblxyXG4gICAgcHVibGljIGdldCB6RmFyKCkgeyByZXR1cm4gdGhpcy5fekZhcjsgfVxyXG4gICAgcHVibGljIGdldCBtYXhMT0QoKSB7IHJldHVybiB0aGlzLl9tYXhMT0Q7IH1cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoekZhcjogaW50LCBwYXRjaFNpemU6IGludCwgbnVtUGF0Y2hlc1g6IGludCwgbnVtUGF0Y2hlc1o6IGludCkge1xyXG4gICAgICAgIHRoaXMuc2V0UGFyYW1zKHpGYXIsIHBhdGNoU2l6ZSwgbnVtUGF0Y2hlc1gsIG51bVBhdGNoZXNaKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0WkZhcih6RmFyOiBpbnQpIHtcclxuICAgICAgICB0aGlzLl96RmFyID0gekZhcjtcclxuICAgICAgICB0aGlzLl9jYWxjTG9kUmVnaW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRQYXJhbXMoekZhcjogaW50LCBwYXRjaFNpemU6IGludCwgbnVtUGF0Y2hlc1g6IGludCwgbnVtUGF0Y2hlc1o6IGludCkge1xyXG5cclxuICAgICAgICB0aGlzLl9wYXRjaFNpemUgICA9IHBhdGNoU2l6ZTtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWCA9IG51bVBhdGNoZXNYO1xyXG4gICAgICAgIHRoaXMuX251bVBhdGNoZXNaID0gbnVtUGF0Y2hlc1o7XHJcblxyXG4gICAgICAgIHRoaXMuX2NhbGNNYXhMT0QoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IE9ialN0b3JlMkQ8SVBhdGNoTG9kPigpO1xyXG4gICAgICAgIHRoaXMuX21hcC5pbml0QnlWYWwobnVtUGF0Y2hlc1gsIG51bVBhdGNoZXNaLCBnZXRaZXJvUGF0Y2hMb2QpO1xyXG4gICAgICAgIHRoaXMuX3JlZ2lvbnMgPSBuZXcgQXJyYXk8bnVtYmVyPih0aGlzLl9tYXhMT0QgKyAxKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRaRmFyKHpGYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NhbGNNYXhMT0QoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG51bVNlZ21lbnRzICAgICAgICAgID0gdGhpcy5fcGF0Y2hTaXplIC0gMTtcclxuICAgICAgICBjb25zdCBudW1TZWdtZW50c0xvZzIgICAgICA9IE1hdGgubG9nMihudW1TZWdtZW50cyk7XHJcbiAgICAgICAgY29uc3QgbnVtU2VnbWVudHNMb2cyQ2VpbCAgPSBNYXRoLmNlaWwobnVtU2VnbWVudHNMb2cyKTtcclxuICAgICAgICBjb25zdCBudW1TZWdtZW50c0xvZzJGbG9vciA9IE1hdGguZmxvb3IobnVtU2VnbWVudHNMb2cyKTtcclxuXHJcbiAgICAgICAgaWYgKG51bVNlZ21lbnRzTG9nMkNlaWwgIT09IG51bVNlZ21lbnRzTG9nMkZsb29yKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBudW1iZXIgb2YgdmVydGljZXMgaW4gdGhlIHBhdGNoIG1pbnVzIG9uZSBtdXN0IGJlIGEgcG93ZXIgb2YgdHdvXFxuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbWF4TE9EID0gbnVtU2VnbWVudHNMb2cyRmxvb3IgLSAxO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NhbGNMb2RSZWdpb25zKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhlIHJpbmcgc3lzdGVtIHRvIGRldGVybWluZSB0aGUgTE9ELlxyXG4gICAgICAgIC8vIFRPRE86IEJhc2VkIG9uIHRoZSBoZWlnaHRzIHdlIGNhbiBjYWxjdWxhdGUgdGhlIG9wdGltYWwgbG9kc1xyXG5cclxuICAgICAgICBsZXQgc3VtID0gMDtcclxuICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHRoaXMuX21heExPRDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN1bSArPSBpICsgMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB4ID0gdGhpcy5fekZhciAvIHN1bTtcclxuICAgICAgICBsZXQgdGVtcCA9IDA7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSB0aGlzLl9tYXhMT0Q7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJSYW5nZSA9ICh4ICogKGkgKyAxKSkgfCAwO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWdpb25zW2ldID0gdGVtcCArIGN1clJhbmdlO1xyXG4gICAgICAgICAgICB0ZW1wICs9IGN1clJhbmdlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJpbnRMb2RNYXAoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHN0ciA9ICcnO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhMb2RNYXhaICA9IHRoaXMuX251bVBhdGNoZXNaIC0gMTtcclxuICAgICAgICBjb25zdCBtYXhMb2RNYXhYICA9IHRoaXMuX251bVBhdGNoZXNYO1xyXG5cclxuICAgICAgICBsZXQgbWF4Q29yZSA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZE1hcFogPSBtYXhMb2RNYXhaOyBsb2RNYXBaID49IDA7IGxvZE1hcFotLSkge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgbG9kTWFwWCA9IDAgOyBsb2RNYXBYIDwgbWF4TG9kTWF4WDsgbG9kTWFwWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLl9tYXAuZ2V0KGxvZE1hcFgsIGxvZE1hcFopLmNvcmU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1heENvcmUgPCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heENvcmUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbG9kTWF4TnVtYmVyQ291bnQgID0gbWF4TG9kTWF4Wi50b1N0cmluZygpLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBjb3JlTWF4TnVtYmVyQ291bnQgPSBtYXhDb3JlLnRvU3RyaW5nKCkubGVuZ3RoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGxvZE1hcFogPSBtYXhMb2RNYXhaOyBsb2RNYXBaID49IDA7IGxvZE1hcFotLSkge1xyXG4gICAgICAgICAgICBzdHIgKz0gZ2V0VGV4dChsb2RNYXBaLCBsb2RNYXhOdW1iZXJDb3VudCwgJyAnKSArICc6ICc7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGxvZE1hcFggPSAwIDsgbG9kTWFwWCA8IG1heExvZE1heFg7IGxvZE1hcFgrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLl9tYXAuZ2V0KGxvZE1hcFgsIGxvZE1hcFopLmNvcmU7XHJcbiAgICAgICAgICAgICAgICBzdHIgKz0gZ2V0VGV4dCh2YWx1ZSwgY29yZU1heE51bWJlckNvdW50LCAnICcpICsgJyAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0ciArPSAnXFxuJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKHN0cik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc3RhbmNlVG9Mb2QoZGlzdGFuY2U6IGZsb2F0KSB7XHJcblxyXG4gICAgICAgIGxldCBsb2QgPSB0aGlzLl9tYXhMT0Q7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbWF4TE9EOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IHRoaXMuX3JlZ2lvbnNbaV0pIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbG9kID0gaTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGxvZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGF0Y2hMb2QocGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXQocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQYXRjaExvZEJ5SW5kZXgoaW5kZXg6IGludCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0QnlJbmRleChpbmRleCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShjYW1lcmFQb3M6IFJlZk9iamVjdDxJVmVjdG9yMz4sIGhlaWdodE1hcDogSVJlYWRvbmx5QWJzSGVpZ2h0TWFwLCB1c2VZUG9zOiBib29sZWFuID0gdHJ1ZSwgY2VudGVyOiBib29sZWFuID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGEgPSB0aGlzLnVwZGF0ZUxvZE1hcFBhc3MxKGNhbWVyYVBvcywgaGVpZ2h0TWFwLCB1c2VZUG9zLCBjZW50ZXIpO1xyXG4gICAgICAgIGNvbnN0IGIgPSB0aGlzLnVwZGF0ZUxvZE1hcFBhc3MyKCk7XHJcbiAgICAgICAgcmV0dXJuIGEgfHwgYjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlTG9kTWFwUGFzczEoY2FtZXJhUG9zOiBSZWZPYmplY3Q8SVZlY3RvcjM+LCBoZWlnaHRNYXA6IElSZWFkb25seUFic0hlaWdodE1hcCwgdXNlWVBvczogYm9vbGVhbiwgY2VudGVyOiBib29sZWFuKSB7XHJcblxyXG4gICAgICAgIGxldCBoYXNDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBsZXQgZGlzdGFuY2VUb0NhbWVyYTtcclxuXHJcbiAgICAgICAgY29uc3QgY2VudGVyU3RlcCA9IHRoaXMuX3BhdGNoU2l6ZSAvIDIgfCAwO1xyXG4gICAgICAgIGNvbnN0IGhhbGZXaWR0aCAgPSBoZWlnaHRNYXAud2lkdGggLyAyO1xyXG4gICAgICAgIGNvbnN0IGhhbGZEZXB0aCAgPSBoZWlnaHRNYXAuZGVwdGggLyAyO1xyXG5cclxuICAgICAgICBsZXQgY2FtZXJhUG9zVGVycmFpbkFsdGl0dWRlID0gMDtcclxuXHJcbiAgICAgICAgaWYgKHVzZVlQb3MpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZUNhbWVyYVggPSBNYXRoLm1pbihNYXRoLm1heChjZW50ZXIgPyBjYW1lcmFQb3MueCArIGhhbGZXaWR0aCA6IGNhbWVyYVBvcy54LCAwKSwgaGVpZ2h0TWFwLndpZHRoIC0gMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZUNhbWVyYVogPSBNYXRoLm1pbihNYXRoLm1heChjZW50ZXIgPyBjYW1lcmFQb3MueiArIGhhbGZEZXB0aCA6IGNhbWVyYVBvcy56LCAwKSwgaGVpZ2h0TWFwLmRlcHRoIC0gMSk7XHJcblxyXG4gICAgICAgICAgICBjYW1lcmFQb3NUZXJyYWluQWx0aXR1ZGUgPSBoZWlnaHRNYXAuZ2V0KG5vcm1hbGl6ZUNhbWVyYVggfCAwLCBub3JtYWxpemVDYW1lcmFaIHwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBsb2RNYXBaID0gMDsgbG9kTWFwWiA8IHRoaXMuX251bVBhdGNoZXNaOyBsb2RNYXBaKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGxvZE1hcFggPSAwOyBsb2RNYXBYIDwgdGhpcy5fbnVtUGF0Y2hlc1g7IGxvZE1hcFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBsb2RNYXBYICogKHRoaXMuX3BhdGNoU2l6ZSAtIDEpICsgY2VudGVyU3RlcDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHogPSBsb2RNYXBaICogKHRoaXMuX3BhdGNoU2l6ZSAtIDEpICsgY2VudGVyU3RlcDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaENlbnRlclggPSBjZW50ZXIgPyAtaGFsZldpZHRoICsgeCA6IHg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaENlbnRlclogPSBjZW50ZXIgPyAtaGFsZkRlcHRoICsgeiA6IHo7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHVzZVlQb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVRvQ2FtZXJhID0gVmVjdG9yM01hdGguZGlzdGFuY2VWM1hZWihjYW1lcmFQb3MsIHBhdGNoQ2VudGVyWCwgY2FtZXJhUG9zVGVycmFpbkFsdGl0dWRlLCBwYXRjaENlbnRlclopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VUb0NhbWVyYSA9IFZlY3RvcjJNYXRoLmRpc3RhbmNlWDFaMVgyWjIoY2FtZXJhUG9zLngsIGNhbWVyYVBvcy56LCBwYXRjaENlbnRlclgsIHBhdGNoQ2VudGVyWik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY29yZUxvZCAgID0gdGhpcy5kaXN0YW5jZVRvTG9kKGRpc3RhbmNlVG9DYW1lcmEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcFBhdGNoTE9EID0gdGhpcy5fbWFwLmdldChsb2RNYXBYLCBsb2RNYXBaKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwUGF0Y2hMT0QuZGlzdGFuY2UgPSBkaXN0YW5jZVRvQ2FtZXJhO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwUGF0Y2hMT0QuY29yZSAhPT0gY29yZUxvZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBQYXRjaExPRC5jb3JlID0gY29yZUxvZDtcclxuICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGFzQ2hhbmdlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCB1cGRhdGVMb2RNYXBQYXNzMigpIHtcclxuXHJcbiAgICAgICAgbGV0IGhhc0NoYW5nZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsb2RNYXBaID0gMDsgbG9kTWFwWiA8IHRoaXMuX251bVBhdGNoZXNaIDsgbG9kTWFwWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBsb2RNYXBYID0gMDsgbG9kTWFwWCA8IHRoaXMuX251bVBhdGNoZXNYIDsgbG9kTWFwWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSAgICA9IHRoaXMuX21hcC5nZXQobG9kTWFwWCwgbG9kTWFwWik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb3JlTG9kID0gaXRlbS5jb3JlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXhMZWZ0ICAgPSBsb2RNYXBYO1xyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4UmlnaHQgID0gbG9kTWFwWDtcclxuICAgICAgICAgICAgICAgIGxldCBpbmRleFRvcCAgICA9IGxvZE1hcFo7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXhCb3R0b20gPSBsb2RNYXBaO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobG9kTWFwWCA+IDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhMZWZ0LS07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXYgPSBpdGVtLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuX21hcC5nZXQoaW5kZXhMZWZ0LCBsb2RNYXBaKS5jb3JlID4gY29yZUxvZCA/IDEgOiAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmxlZnQgPSBuZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGxvZE1hcFggPCB0aGlzLl9udW1QYXRjaGVzWCAtIDEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhSaWdodCsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2ID0gaXRlbS5yaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5fbWFwLmdldChpbmRleFJpZ2h0LCBsb2RNYXBaKS5jb3JlID4gY29yZUxvZCA/IDEgOiAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnJpZ2h0ID0gbmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChsb2RNYXBaID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbmRleEJvdHRvbS0tO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2ID0gaXRlbS5ib3R0b207XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuX21hcC5nZXQobG9kTWFwWCwgaW5kZXhCb3R0b20pLmNvcmUgPiBjb3JlTG9kID8gMSA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2ICE9PSBuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYm90dG9tID0gbmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChsb2RNYXBaIDwgdGhpcy5fbnVtUGF0Y2hlc1ogLSAxKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4VG9wKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXYgPSBpdGVtLnRvcDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5fbWFwLmdldChsb2RNYXBYLCBpbmRleFRvcCkuY29yZSA+IGNvcmVMb2QgPyAxIDogMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS50b3AgPSBuZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTG9kTWFuYWdlcjsiLCJpbXBvcnQgeyBJVmVjdG9yMiwgSVZlY3RvcjMsIFJlZk9iamVjdCwgZmxvYXQsIGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBBYnNIZWlnaHRNYXAsIHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVmVydGV4SGVpZ2h0c0luZm8ge1xyXG4gICAgbWF4SGVpZ2h0OiBmbG9hdDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29vcmRzUmVhZGVyIHtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBnZXRQb3NpdGlvbihpbmRleDogaW50LCBidWY6IFJlZk9iamVjdDxJVmVjdG9yMz4pOiBib29sZWFuO1xyXG4gICAgZ2V0UG9zaXRpb25XaXRoSGVpZ2h0QnlGYWN0b3IoaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjM+KTogYm9vbGVhbjtcclxuICAgIGdldENvb3JkcyhpbmRleDogaW50LCBidWY6IFJlZk9iamVjdDxJVmVjdG9yMj4pOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZWFkb25seUNvb3Jkc0J1ZmZlciBleHRlbmRzIElDb29yZHNSZWFkZXIge1xyXG5cclxuICAgIHJlYWRvbmx5IGhlaWdodE1hcDogSVJlYWRvbmx5QWJzSGVpZ2h0TWFwO1xyXG4gICAgcmVhZG9ubHkgcGF0Y2hWZXJ0ZXhCdWZmZXJMZW5ndGg6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHBhdGNoVmVydGV4QnVmZmVyVHlwZWQ6IFVpbnQxNkFycmF5IHwgVWludDhBcnJheTtcclxuICAgIHJlYWRvbmx5IHBhdGNoVmVydGV4QnVmZmVyRGF0YTogUmVhZG9ubHk8QXJyYXlCdWZmZXI+O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY29vcmRzVmVydGV4U2l6ZSA9IDI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29vcmRzQnVmZmVyIGltcGxlbWVudHMgSVJlYWRvbmx5Q29vcmRzQnVmZmVyIHtcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfd2lkdGg6IGludDtcclxuICAgIHByaXZhdGUgX2RlcHRoOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9wYXRjaFNpemU6IGludDtcclxuICAgIHByaXZhdGUgX2RhdGE6IEFycmF5QnVmZmVyO1xyXG4gICAgcHJpdmF0ZSBfZGF0YVR5cGVkOiBVaW50MTZBcnJheTtcclxuICAgIHByaXZhdGUgX2xlbmd0aDogbnVtYmVyO1xyXG5cclxuICAgIHJlYWRvbmx5IGhlaWdodE1hcDogQWJzSGVpZ2h0TWFwO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hWZXJ0ZXhCdWZmZXJMZW5ndGgoKSB7IHJldHVybiB0aGlzLl9sZW5ndGg7IH1cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hWZXJ0ZXhCdWZmZXJEYXRhKCkgICB7IHJldHVybiB0aGlzLl9kYXRhOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoVmVydGV4QnVmZmVyVHlwZWQoKSAgeyByZXR1cm4gdGhpcy5fZGF0YVR5cGVkOyB9XHJcblxyXG4gICAgcHVibGljIGdldCB3aWR0aCgpICAgICAgIHsgcmV0dXJuIHRoaXMuX3dpZHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRlcHRoKCkgICAgICAgeyByZXR1cm4gdGhpcy5fZGVwdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hTaXplKCkgICB7IHJldHVybiB0aGlzLl9wYXRjaFNpemU7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihoZWlnaHRNYXA6IEFic0hlaWdodE1hcCwgcGF0Y2hTaXplOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5oZWlnaHRNYXAgID0gaGVpZ2h0TWFwO1xyXG5cclxuICAgICAgICAvLyBXZSBjYW4gdXNlIHVpbnQ4IGZvciBwYXRjaGVzIHNtYWxsZXIgdGhhbiAyNTUsIGJ1dCB3ZSBvbmx5IHVzZSAyIGJ5dGVzLFxyXG4gICAgICAgIC8vIGZvciBvcHRpbWFsIHBlcmZvcm1hbmNlIG5lZWQgNCBieXRlcyBmb3IgdGhlIGJ1ZmZlci5cclxuXHJcbiAgICAgICAgdGhpcy5fcGF0Y2hTaXplID0gcGF0Y2hTaXplO1xyXG4gICAgICAgIHRoaXMuX3dpZHRoID0gaGVpZ2h0TWFwLndpZHRoO1xyXG4gICAgICAgIHRoaXMuX2RlcHRoID0gaGVpZ2h0TWFwLmRlcHRoO1xyXG4gICAgICAgIHRoaXMuX2xlbmd0aCA9IHRoaXMuX3BhdGNoU2l6ZSAqIHRoaXMuX3BhdGNoU2l6ZTtcclxuXHJcbiAgICAgICAgY29uc3QgY29vcmRzQXJyTGVuZ3RoICA9IHRoaXMuX2xlbmd0aCAqIGNvb3Jkc1ZlcnRleFNpemU7XHJcbiAgICAgICAgY29uc3QgY29vcmRzQnl0ZUxlbmd0aCA9IGNvb3Jkc0Fyckxlbmd0aCAqIFVpbnQxNkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xyXG5cclxuICAgICAgICB0aGlzLl9kYXRhICAgICAgPSBuZXcgQXJyYXlCdWZmZXIoY29vcmRzQnl0ZUxlbmd0aCk7XHJcbiAgICAgICAgdGhpcy5fZGF0YVR5cGVkID0gbmV3IFVpbnQxNkFycmF5KHRoaXMuX2RhdGEsIDAsIGNvb3Jkc0Fyckxlbmd0aCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBpbml0KCkge1xyXG5cclxuICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHRoaXMuX3BhdGNoU2l6ZTsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuX3BhdGNoU2l6ZTsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YVR5cGVkW2luZGV4KytdID0geDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFUeXBlZFtpbmRleCsrXSA9IHo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXRQb3NpdGlvbihpbmRleDogaW50LCBidWY6IFJlZk9iamVjdDxJVmVjdG9yMz4pIHtcclxuXHJcbiAgICAgICAgY29uc3QgeCA9IGluZGV4ICUgdGhpcy5fd2lkdGggfCAwO1xyXG4gICAgICAgIGNvbnN0IHogPSBpbmRleCAvIHRoaXMuX3dpZHRoIHwgMDtcclxuXHJcbiAgICAgICAgYnVmLnggPSB4O1xyXG4gICAgICAgIGJ1Zi55ID0gdGhpcy5oZWlnaHRNYXAuZ2V0KHgsIHopO1xyXG4gICAgICAgIGJ1Zi56ID0gejtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UG9zaXRpb25XaXRoSGVpZ2h0QnlGYWN0b3IoaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjM+KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIHRoaXMuX3dpZHRoIHwgMDtcclxuICAgICAgICBjb25zdCB6ID0gaW5kZXggLyB0aGlzLl93aWR0aCB8IDA7XHJcblxyXG4gICAgICAgIGJ1Zi54ID0geDtcclxuICAgICAgICBidWYueSA9IHRoaXMuaGVpZ2h0TWFwLmdldEZhY3Rvcih4LCB6KTtcclxuICAgICAgICBidWYueiA9IHo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvb3JkcyhpbmRleDogbnVtYmVyLCBidWY6IElWZWN0b3IzKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIHRoaXMuX3dpZHRoIHwgMDtcclxuICAgICAgICBjb25zdCB6ID0gaW5kZXggLyB0aGlzLl93aWR0aCB8IDA7XHJcblxyXG4gICAgICAgIGJ1Zi54ID0geDtcclxuICAgICAgICBidWYueiA9IHo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvb3Jkc0J1ZmZlcjsiLCJpbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IExFRlQgICA9IDI7XHJcbmV4cG9ydCBjb25zdCBSSUdIVCAgPSAyO1xyXG5leHBvcnQgY29uc3QgVE9QICAgID0gMjtcclxuZXhwb3J0IGNvbnN0IEJPVFRPTSA9IDI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTaW5nbGVMb2RJbmZvIHtcclxuICAgIHN0YXJ0OiBpbnQ7XHJcbiAgICBjb3VudDogaW50O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdEluZm8oKTogSVNpbmdsZUxvZEluZm9bXVtdW11bXSB7XHJcblxyXG4gICAgY29uc3QgYXJyOiBJU2luZ2xlTG9kSW5mb1tdW11bXVtdID0gW107XHJcblxyXG4gICAgZm9yIChsZXQgbCA9IDAgOyBsIDwgTEVGVCA7IGwrKykge1xyXG5cclxuICAgICAgICBhcnJbbF0gPSBuZXcgQXJyYXk8SVNpbmdsZUxvZEluZm9bXVtdPihSSUdIVCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHIgPSAwIDsgciA8IFJJR0hUIDsgcisrKSB7XHJcblxyXG4gICAgICAgICAgICBhcnJbbF1bcl0gPSBuZXcgQXJyYXk8SVNpbmdsZUxvZEluZm9bXT4oVE9QKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwIDsgdCA8IFRPUCA7IHQrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGFycltsXVtyXVt0XSA9IG5ldyBBcnJheTxJU2luZ2xlTG9kSW5mbz4oQk9UVE9NKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDAgOyBiIDwgQk9UVE9NIDsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFycltsXVtyXVt0XVtiXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXJyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTG9kSW5mbyB7XHJcblxyXG4gICAgLy9pbmZvW0xFRlRdW1JJR0hUXVtUT1BdW0JPVFRPTV07XHJcbiAgICBwdWJsaWMgaW5mbzogSVNpbmdsZUxvZEluZm9bXVtdW11bXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmluZm8gPSBpbml0SW5mbygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGVhcigpIHtcclxuICAgICAgICBmb3IgKGxldCBsID0gMCA7IGwgPCBMRUZUIDsgbCsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwIDsgciA8IFJJR0hUIDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMCA7IHQgPCBUT1AgOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMCA7IGIgPCBCT1RUT00gOyBiKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2luZ2xlID0gdGhpcy5pbmZvW2xdW3JdW3RdW2JdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGUuc3RhcnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGUuY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTG9kSW5mbzsiLCJpbXBvcnQgdHlwZSB7IGZsb2F0LCBpbnQsIFJlZk9iamVjdCwgdW5zaWduZWRpbnQgYXMgdW5zaWduZWRfaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgQk9UVE9NLCBMRUZULCBMb2RJbmZvLCBSSUdIVCwgVE9QIH0gZnJvbSBcIi4vTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IExvZE1hbmFnZXIgZnJvbSBcIi4vTG9kTWFuYWdlci5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyaWQge1xyXG4gICAgcmVhZG9ubHkgd2lkdGg6IGludDtcclxuICAgIHJlYWRvbmx5IGRlcHRoOiBpbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyaWRQYXRjaGVkIGV4dGVuZHMgSUdyaWQge1xyXG4gICAgcmVhZG9ubHkgcGF0Y2hTaXplOiBpbnQ7XHJcbiAgICByZWFkb25seSBudW1QYXRjaGVzWDogaW50O1xyXG4gICAgcmVhZG9ubHkgbnVtUGF0Y2hlc1o6IGludDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdyaWRCdWlsZGVyIHtcclxuXHJcbiAgICBwcml2YXRlIF9sb2RJbmZvOiBMb2RJbmZvW107XHJcbiAgICBwcml2YXRlIF9sb2RNYW5hZ2VyOiBMb2RNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBfaW5kaWNlczogVWludDMyQXJyYXk7XHJcbiAgICBwcml2YXRlIF9ncmlkOiBJR3JpZFBhdGNoZWQ7XHJcblxyXG4gICAgcHVibGljIGdldCB6RmFyKCkgeyByZXR1cm4gdGhpcy5fbG9kTWFuYWdlci56RmFyOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHdpZHRoKCkgeyByZXR1cm4gdGhpcy5fZ3JpZC53aWR0aDsgfVxyXG4gICAgcHVibGljIGdldCBkZXB0aCgpIHsgcmV0dXJuIHRoaXMuX2dyaWQuZGVwdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hTaXplKCkgeyByZXR1cm4gdGhpcy5fZ3JpZC5wYXRjaFNpemU7IH1cclxuICAgIHB1YmxpYyBnZXQgbnVtUGF0Y2hlc1goKSB7IHJldHVybiB0aGlzLl9ncmlkLm51bVBhdGNoZXNYOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNaKCkgeyByZXR1cm4gdGhpcy5fZ3JpZC5udW1QYXRjaGVzWjsgfVxyXG4gICAgcHVibGljIGdldCBtYXhMT0QoKSB7IHJldHVybiB0aGlzLmxvZE1hbmFnZXIubWF4TE9EOyB9XHJcblxyXG4gICAgcHVibGljIGdldCBwYXRjaEluZGljZXMoKTogUmVhZG9ubHk8VWludDMyQXJyYXk+IHsgcmV0dXJuIHRoaXMuX2luZGljZXMgYXMgYW55OyB9XHJcbiAgICBwdWJsaWMgZ2V0IGxvZE1hbmFnZXIoKTogTG9kTWFuYWdlciB7IHJldHVybiB0aGlzLl9sb2RNYW5hZ2VyOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGxvZEluZm8oKTogUmVhZG9ubHk8UmVhZG9ubHk8TG9kSW5mbz4+W10geyByZXR1cm4gdGhpcy5fbG9kSW5mbzsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGdyaWQ6IFJlZk9iamVjdDxJR3JpZFBhdGNoZWQ+LCB6RmFyOiBmbG9hdCkge1xyXG5cclxuICAgICAgICB0aGlzLl9ncmlkID0gZ3JpZDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB3aWR0aCAgICAgICA9IGdyaWQud2lkdGg7XHJcbiAgICAgICAgY29uc3QgZGVwdGggICAgICAgPSBncmlkLmRlcHRoO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoU2l6ZSAgID0gZ3JpZC5wYXRjaFNpemU7XHJcbiAgICAgICAgY29uc3QgbnVtUGF0Y2hlc1ggPSBncmlkLm51bVBhdGNoZXNYO1xyXG4gICAgICAgIGNvbnN0IG51bVBhdGNoZXNaID0gZ3JpZC5udW1QYXRjaGVzWjtcclxuXHJcbiAgICAgICAgaWYgKHdpZHRoID49IDB4ZmZmZikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTWF4IHdpZHRoID0gJWRcXG5cIiwgMHhmZmZmIC0xKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGVwdGggPj0gMHhmZmZmKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJNYXggZGVwdGggPSAlZFxcblwiLCAweGZmZmYgLTEpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgod2lkdGggLSAxKSAlIChwYXRjaFNpemUgLSAxKSAhPT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCByZWNvbW1lbmRlZFdpZHRoID0gKCh3aWR0aCAtIDEgKyBwYXRjaFNpemUgLSAxKSAvIChwYXRjaFNpemUgLSAxKSkgKiAocGF0Y2hTaXplIC0gMSkgKyAxO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiV2lkdGggbWludXMgMSAoJWQpIG11c3QgYmUgZGl2aXNpYmxlIGJ5IHBhdGNoU2l6ZSBtaW51cyAxICglZClcXG5cIiwgd2lkdGgsIHBhdGNoU2l6ZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUcnkgdXNpbmcgV2lkdGggPSAlZFxcblwiLCByZWNvbW1lbmRlZFdpZHRoKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKGRlcHRoIC0gMSkgJSAocGF0Y2hTaXplIC0gMSkgIT09IDApIHtcclxuICAgICAgICAgICAgY29uc3QgcmVjb21tZW5kZWREZXB0aCA9ICgoZGVwdGggLSAxICsgcGF0Y2hTaXplIC0gMSkgLyAocGF0Y2hTaXplIC0gMSkpICogKHBhdGNoU2l6ZSAtIDEpICsgMTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRlcHRoIG1pbnVzIDEgKCVkKSBtdXN0IGJlIGRpdmlzaWJsZSBieSBwYXRjaFNpemUgbWludXMgMSAoJWQpXFxuXCIsIGRlcHRoLCBwYXRjaFNpemUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVHJ5IHVzaW5nIFdpZHRoID0gJWRcXG5cIiwgcmVjb21tZW5kZWREZXB0aCk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhdGNoU2l6ZSA8IDMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRoZSBtaW5pbXVtIHBhdGNoIHNpemUgaXMgMyAoJWQpXFxuXCIsIHBhdGNoU2l6ZSk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmIChwYXRjaFNpemUgJSAyID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJQYXRjaCBzaXplIG11c3QgYmUgYW4gb2RkIG51bWJlciAoJWQpXFxuXCIsIHBhdGNoU2l6ZSk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fYnVpbGRMb2RzQW5kSW5kaWNlcyh6RmFyLCBwYXRjaFNpemUsIG51bVBhdGNoZXNYLCBudW1QYXRjaGVzWik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFpGYXIoekZhcjogaW50KSB7XHJcbiAgICAgICAgdGhpcy5fbG9kTWFuYWdlci5zZXRaRmFyKHpGYXIpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIF9idWlsZExvZHNBbmRJbmRpY2VzKHpGYXI6IGludCwgcGF0Y2hTaXplOiBpbnQsIG51bVBhdGNoZXNYOiBpbnQsIG51bVBhdGNoZXNaOiBpbnQpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fbG9kTWFuYWdlciA9IG5ldyBMb2RNYW5hZ2VyKHpGYXIsIHBhdGNoU2l6ZSwgbnVtUGF0Y2hlc1gsIG51bVBhdGNoZXNaKTtcclxuICAgICAgICB0aGlzLl9sb2RJbmZvID0gbmV3IEFycmF5KHRoaXMuX2xvZE1hbmFnZXIubWF4TE9EICsgMSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbG9kSW5mby5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2RJbmZvW2ldID0gbmV3IExvZEluZm8oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBudW1JbmRpY2VzID0gdGhpcy5fY2FsY051bUluZGljZXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5kaWNlcyA9IG5ldyBVaW50MzJBcnJheShudW1JbmRpY2VzKTtcclxuXHJcbiAgICAgICAgbnVtSW5kaWNlcyA9IHRoaXMuX2luaXRJbmRpY2VzKHRoaXMuX2luZGljZXMpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJGaW5hbCBudW1iZXIgb2YgaW5kaWNlcyAlZFxcblwiLCBudW1JbmRpY2VzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfY2FsY051bUluZGljZXMoKTogaW50IHtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgbnVtUXVhZHMgPSAodGhpcy5wYXRjaFNpemUgLSAxKSAqICh0aGlzLnBhdGNoU2l6ZSAtIDEpO1xyXG4gICAgICAgIGxldCBudW1JbmRpY2VzID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4UGVybXV0YXRpb25zUGVyTGV2ZWwgPSAxNjsgLy8gdHJ1ZS9mYWxzZSBmb3IgZWFjaCBvZiB0aGUgZm91ciBzaWRlc1xyXG4gICAgICAgIGNvbnN0IGluZGljZXNQZXJRdWFkID0gNjsgICAgICAgICAgIC8vIHR3byB0cmlhbmdsZXNcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kID0gMDsgbG9kIDw9IHRoaXMubWF4TE9EOyBsb2QrKykge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTE9EICVkOiBudW0gcXVhZHMgJWRcXG5cIiwgbG9kLCBudW1RdWFkcyk7XHJcbiAgICAgICAgICAgIG51bUluZGljZXMgKz0gbnVtUXVhZHMgKiBpbmRpY2VzUGVyUXVhZCAqIG1heFBlcm11dGF0aW9uc1BlckxldmVsO1xyXG4gICAgICAgICAgICBudW1RdWFkcyAvPSA0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkluaXRpYWwgbnVtYmVyIG9mIGluZGljZXMgJWRcXG5cIiwgbnVtSW5kaWNlcyk7XHJcbiAgICAgICAgcmV0dXJuIG51bUluZGljZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEluZGljZXMoaW5kaWNlczogVWludDMyQXJyYXkpOiBpbnQge1xyXG5cclxuICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsb2QgPSAwOyBsb2QgPD0gdGhpcy5tYXhMT0Q7IGxvZCsrKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCIqKiogSW5pdCBpbmRpY2VzIGxvZCAlZCAqKipcXG5cIiwgbG9kKTtcclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9pbml0SW5kaWNlc0xPRChpbmRleCwgaW5kaWNlcywgbG9kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0SW5kaWNlc0xPRChpbmRleDogaW50LCBpbmRpY2VzOiBVaW50MzJBcnJheSwgbG9kOiBpbnQpOiBpbnQge1xyXG5cclxuICAgICAgICBsZXQgdG90YWxJbmRpY2VzRm9yTE9EID0gMDtcclxuICAgIFxyXG4gICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgUklHSFQ7IHIrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSB0aGlzLl9sb2RJbmZvW2xvZF0uaW5mb1tsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5zdGFydCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuX2luaXRJbmRpY2VzTE9EU2luZ2xlKGluZGV4LCBpbmRpY2VzLCBsb2QsIGxvZCArIGwsIGxvZCArIHIsIGxvZCArIHQsIGxvZCArIGIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uY291bnQgPSBpbmRleCAtIGluZm8uc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsSW5kaWNlc0ZvckxPRCArPSBpbmZvLmNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJUb3RhbCBpbmRpY2VzIGZvciBMT0Q6ICVkXFxuXCIsIHRvdGFsSW5kaWNlc0ZvckxPRCk7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRJbmRpY2VzTE9EU2luZ2xlKGluZGV4OiBpbnQsIGluZGljZXM6IFVpbnQzMkFycmF5LCBsb2RDb3JlOiBpbnQsIGxvZExlZnQ6IGludCwgbG9kUmlnaHQ6IGludCwgbG9kVG9wOiBpbnQsIGxvZEJvdHRvbTogaW50KTogaW50IHtcclxuXHJcbiAgICAgICAgY29uc3Qgd2lkdGggICA9IHRoaXMucGF0Y2hTaXplO1xyXG4gICAgICAgIGNvbnN0IGZhblN0ZXAgPSBNYXRoLnBvdygyLCBsb2RDb3JlICsgMSk7ICAgICAgLy8gbG9kID0gMCAtLT4gMiwgbG9kID0gMSAtLT4gNCwgbG9kID0gMiAtLT4gOCwgZXRjXHJcbiAgICAgICAgY29uc3QgZW5kUG9zICA9IHRoaXMucGF0Y2hTaXplIC0gMSAtIGZhblN0ZXA7ICAvLyBwYXRjaCBzaXplIDUsIGZhbiBzdGVwIDIgLS0+IEVuZFBvcyA9IDI7IHBhdGNoIHNpemUgOSwgZmFuIHN0ZXAgMiAtLT4gRW5kUG9zID0gNlxyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gMCA7IHogPD0gZW5kUG9zIDsgeiArPSBmYW5TdGVwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwIDsgeCA8PSBlbmRQb3MgOyB4ICs9IGZhblN0ZXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxMZWZ0ICAgPSB4ID09IDAgICAgICA/IGxvZExlZnQgICA6IGxvZENvcmU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsUmlnaHQgID0geCA9PSBlbmRQb3MgPyBsb2RSaWdodCAgOiBsb2RDb3JlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbEJvdHRvbSA9IHogPT0gMCAgICAgID8gbG9kQm90dG9tIDogbG9kQ29yZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxUb3AgICAgPSB6ID09IGVuZFBvcyA/IGxvZFRvcCAgICA6IGxvZENvcmU7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuX2NyZWF0ZVRyaWFuZ2xlRmFuKGluZGV4LCBpbmRpY2VzLCBsb2RDb3JlLCBsTGVmdCwgbFJpZ2h0LCBsVG9wLCBsQm90dG9tLCB4LCB6LCB3aWR0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NyZWF0ZVRyaWFuZ2xlRmFuKGluZGV4OiBpbnQsIGluZGljZXM6IFVpbnQzMkFycmF5LCBsb2RDb3JlOiBpbnQsIGxvZExlZnQ6IGludCwgbG9kUmlnaHQ6IGludCwgbG9kVG9wOiBpbnQsIGxvZEJvdHRvbTogaW50LCB4OiBpbnQsIHo6IGludCwgd2lkdGg6IGludCk6IHVuc2lnbmVkX2ludCB7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0ZXBMZWZ0ICAgPSBNYXRoLnBvdygyLCBsb2RMZWZ0KTsgLy8gYmVjYXVzZSBMT0Qgc3RhcnRzIGF0IHplcm8uLi5cclxuICAgICAgICBjb25zdCBzdGVwUmlnaHQgID0gTWF0aC5wb3coMiwgbG9kUmlnaHQpO1xyXG4gICAgICAgIGNvbnN0IHN0ZXBUb3AgICAgPSBNYXRoLnBvdygyLCBsb2RUb3ApO1xyXG4gICAgICAgIGNvbnN0IHN0ZXBCb3R0b20gPSBNYXRoLnBvdygyLCBsb2RCb3R0b20pO1xyXG4gICAgICAgIGNvbnN0IHN0ZXBDZW50ZXIgPSBNYXRoLnBvdygyLCBsb2RDb3JlKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXhDZW50ZXIgPSAoeiArIHN0ZXBDZW50ZXIpICogd2lkdGggKyB4ICsgc3RlcENlbnRlcjtcclxuXHJcbiAgICAgICAgLy8gZmlyc3QgdXBcclxuICAgICAgICBsZXQgaW5kZXhUZW1wMSA9IHogKiB3aWR0aCArIHg7XHJcbiAgICAgICAgbGV0IGluZGV4VGVtcDIgPSAoeiArIHN0ZXBMZWZ0KSAqIHdpZHRoICsgeDtcclxuXHJcbiAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG5cclxuICAgICAgICAvLyBzZWNvbmQgdXBcclxuICAgICAgICBpZiAobG9kTGVmdCA9PSBsb2RDb3JlKSB7XHJcbiAgICAgICAgICAgIGluZGV4VGVtcDEgPSBpbmRleFRlbXAyO1xyXG4gICAgICAgICAgICBpbmRleFRlbXAyICs9IHN0ZXBMZWZ0ICogd2lkdGg7XHJcblxyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2FkZFRyaWFuZ2xlKGluZGV4LCBpbmRpY2VzLCBpbmRleENlbnRlciwgaW5kZXhUZW1wMSwgaW5kZXhUZW1wMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaXJzdCByaWdodFxyXG4gICAgICAgIGluZGV4VGVtcDEgPSBpbmRleFRlbXAyO1xyXG4gICAgICAgIGluZGV4VGVtcDIgKz0gc3RlcFRvcDtcclxuXHJcbiAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG5cclxuICAgICAgICAvLyBzZWNvbmQgcmlnaHRcclxuICAgICAgICBpZiAobG9kVG9wID09PSBsb2RDb3JlKSB7XHJcbiAgICAgICAgICAgIGluZGV4VGVtcDEgPSBpbmRleFRlbXAyO1xyXG4gICAgICAgICAgICBpbmRleFRlbXAyICs9IHN0ZXBUb3A7XHJcblxyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2FkZFRyaWFuZ2xlKGluZGV4LCBpbmRpY2VzLCBpbmRleENlbnRlciwgaW5kZXhUZW1wMSwgaW5kZXhUZW1wMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaXJzdCBkb3duXHJcbiAgICAgICAgaW5kZXhUZW1wMSA9IGluZGV4VGVtcDI7XHJcbiAgICAgICAgaW5kZXhUZW1wMiAtPSBzdGVwUmlnaHQgKiB3aWR0aDtcclxuXHJcbiAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG5cclxuICAgICAgICAvLyBzZWNvbmQgZG93blxyXG4gICAgICAgIGlmIChsb2RSaWdodCA9PT0gbG9kQ29yZSkge1xyXG4gICAgICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMiAtPSBzdGVwUmlnaHQgKiB3aWR0aDtcclxuXHJcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZpcnN0IGxlZnRcclxuICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICBpbmRleFRlbXAyIC09IHN0ZXBCb3R0b207XHJcblxyXG4gICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuXHJcbiAgICAgICAgLy8gc2Vjb25kIGxlZnRcclxuICAgICAgICBpZiAobG9kQm90dG9tID09PSBsb2RDb3JlKSB7XHJcbiAgICAgICAgICAgIGluZGV4VGVtcDEgPSBpbmRleFRlbXAyO1xyXG4gICAgICAgICAgICBpbmRleFRlbXAyIC09IHN0ZXBCb3R0b207XHJcblxyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2FkZFRyaWFuZ2xlKGluZGV4LCBpbmRpY2VzLCBpbmRleENlbnRlciwgaW5kZXhUZW1wMSwgaW5kZXhUZW1wMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYWRkVHJpYW5nbGUoaW5kZXg6IHVuc2lnbmVkX2ludCwgaW5kaWNlczogVWludDMyQXJyYXksIHYxOiB1bnNpZ25lZF9pbnQsIHYyOiB1bnNpZ25lZF9pbnQsIHYzOiB1bnNpZ25lZF9pbnQpIHtcclxuICAgICAgICBpbmRpY2VzW2luZGV4KytdID0gdjE7XHJcbiAgICAgICAgaW5kaWNlc1tpbmRleCsrXSA9IHYyO1xyXG4gICAgICAgIGluZGljZXNbaW5kZXgrK10gPSB2MztcclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgLy8gVE9ET1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHcmlkQnVpbGRlcjsiLCJpbXBvcnQgdHlwZSB7IGZsb2F0LCBSZWZPYmplY3QgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBJUmVhZG9ubHlDb29yZHNCdWZmZXIsIENvb3Jkc0J1ZmZlciB9IGZyb20gXCIuL0Nvb3Jkc0J1ZmZlci5tanNcIjtcclxuaW1wb3J0IEFic1BhdGNoZWRIZWlnaHRNYXAsIHsgdHlwZSBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzUGF0Y2hlZEhlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IEdyaWRCdWlsZGVyLCB7IElHcmlkUGF0Y2hlZCB9IGZyb20gXCIuL0dyaWRCdWlsZGVyLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR3JvbWlwR3JpZFdpdGhIZWlnaHQgZXh0ZW5kcyBJR3JpZFBhdGNoZWQge1xyXG4gICAgcmVhZG9ubHkgbWF4SGVpZ2h0OiBmbG9hdDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdlb21pcEdyaWRCdWlsZGVyIGV4dGVuZHMgR3JpZEJ1aWxkZXIge1xyXG5cclxuICAgIHByaXZhdGUgX3ZlcnRpY2VzOiBDb29yZHNCdWZmZXI7XHJcblxyXG4gICAgcHJvdGVjdGVkIF9oZWlnaHRNYXA6IEFic1BhdGNoZWRIZWlnaHRNYXA8YW55PjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoVmVydGljZXMoKTogSVJlYWRvbmx5Q29vcmRzQnVmZmVyIHsgcmV0dXJuIHRoaXMuX3ZlcnRpY2VzOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodE1hcCgpOiBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwIHsgcmV0dXJuIHRoaXMuX2hlaWdodE1hcDsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGhlaWdodE1hcDogUmVmT2JqZWN0PEFic1BhdGNoZWRIZWlnaHRNYXA8YW55Pj4sIHpGYXI6IGZsb2F0KSB7XHJcblxyXG4gICAgICAgIHN1cGVyKGhlaWdodE1hcCwgekZhcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwID0gaGVpZ2h0TWFwO1xyXG4gICAgICAgIHRoaXMuX3ZlcnRpY2VzICA9IG5ldyBDb29yZHNCdWZmZXIodGhpcy5faGVpZ2h0TWFwLCB0aGlzLl9oZWlnaHRNYXAucGF0Y2hTaXplKTtcclxuICAgICAgICB0aGlzLl92ZXJ0aWNlcy5pbml0KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdlb21pcEdyaWRCdWlsZGVyOyIsImltcG9ydCB0eXBlIHsgSVZlY3RvcjMsIFJlZk9iamVjdCwgZmxvYXQsIGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBHZW9taXBHcmlkQnVpbGRlciBmcm9tIFwiLi9HZW9taXBHcmlkQnVpbGRlci5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoTG9kLCBkZWZhdWx0UGF0Y2hMb2QgfSBmcm9tIFwiLi9Mb2RNYW5hZ2VyLm1qc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgUGF0Y2hJbml0RnVuY3Rpb24gPSAoYmFzZUluZGV4OiBpbnQsIGJhc2VWZXJ0ZXg6IGludCwgY291bnQ6IGludCwgcGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50LCBtaW5YOiBpbnQsIG1pblo6IGludCwgc2l6ZTogaW50LCBsb2RJbmZvOiBSZWFkb25seTxJUGF0Y2hMb2Q+KSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBSZW5kZXJQcmVwYXJlclBhdGNoRnVuY3Rpb24gPSAodmlzaWJsZTogYm9vbGVhbiwgYmFzZUluZGV4OiBpbnQsIGJhc2VWZXJ0ZXg6IGludCwgY291bnQ6IGludCwgcGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50LCBtaW5YOiBpbnQsIG1pblo6IGludCwgc2l6ZTogaW50LCBsb2RJbmZvOiBSZWFkb25seTxJUGF0Y2hMb2Q+KSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBGcnVzdHVtU3BoZXJlVGVzdEZ1bmN0aW9uID0gKGxvY2FsWDogZmxvYXQsIGxvY2FsWTogZmxvYXQsIGxvY2FsWjogZmxvYXQsIHJhZGl1czogZmxvYXQpID0+IGJvb2xlYW47XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHcmlkUGF0Y2hJbml0aWFsaXplciB7XHJcbiAgICBpbml0UGF0Y2g6IFBhdGNoSW5pdEZ1bmN0aW9uLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHcmlkUGF0Y2hSZW5kZXJQcmVwYXJlciB7XHJcbiAgICBwcmVwYXJlUGF0Y2g6IFJlbmRlclByZXBhcmVyUGF0Y2hGdW5jdGlvbixcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJRnJ1c3R1bSB7XHJcbiAgICBjb250YWluc1NwaGVyZTogRnJ1c3R1bVNwaGVyZVRlc3RGdW5jdGlvbixcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdlb21pcEdyaWRSZW5kZXJQcmVwYXJlciBleHRlbmRzIEdlb21pcEdyaWRCdWlsZGVyIHtcclxuXHJcbiAgICBwdWJsaWMgaW5pdFBhdGNoZXMoaW5pdGlhbGl6ZXI6IElHcmlkUGF0Y2hJbml0aWFsaXplcikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IHBhdGNoWiA9IDA7IHBhdGNoWiA8IHRoaXMubnVtUGF0Y2hlc1o7IHBhdGNoWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBwYXRjaFggPSAwOyBwYXRjaFggPCB0aGlzLm51bVBhdGNoZXNYOyBwYXRjaFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pblggPSBwYXRjaFggKiAodGhpcy5wYXRjaFNpemUgLSAxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pblogPSBwYXRjaFogKiAodGhpcy5wYXRjaFNpemUgLSAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvICAgICAgID0gdGhpcy5sb2RJbmZvWzBdLmluZm9bMF1bMF1bMF1bMF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlSW5kZXggID0gaW5mby5zdGFydDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VWZXJ0ZXggPSBtaW5aICogdGhpcy53aWR0aCArIG1pblg7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVyLmluaXRQYXRjaChiYXNlSW5kZXgsIGJhc2VWZXJ0ZXgsIGluZm8uY291bnQsIHBhdGNoWCwgcGF0Y2haLCBtaW5YLCBtaW5aLCB0aGlzLnBhdGNoU2l6ZSwgZGVmYXVsdFBhdGNoTG9kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIHByaW50TG9kTWFwKCkge1xyXG4gICAgICAgIHRoaXMubG9kTWFuYWdlci5wcmludExvZE1hcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVMb2RzKGxvY2FsQ2FtZXJhUG9zOiBSZWZPYmplY3Q8SVZlY3RvcjM+LCB1c2VZUG9zOiBib29sZWFuID0gdHJ1ZSwgY2VudGVyOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMubG9kTWFuYWdlci51cGRhdGUobG9jYWxDYW1lcmFQb3MsIHRoaXMuaGVpZ2h0TWFwLCB1c2VZUG9zLCBjZW50ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlYWNoUGF0Y2hlcyhyZW5kZXJQcmVwYXJlcjogSUdyaWRQYXRjaFJlbmRlclByZXBhcmVyLCBmcnVzdHVtPzogSUZydXN0dW0pIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hTaXplTm9ybSA9IHRoaXMucGF0Y2hTaXplIC0gMTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcGF0Y2haID0gMDsgcGF0Y2haIDwgdGhpcy5udW1QYXRjaGVzWjsgcGF0Y2haKyspIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1pblogPSBwYXRjaFogKiBwYXRjaFNpemVOb3JtO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcGF0Y2hYID0gMDsgcGF0Y2hYIDwgdGhpcy5udW1QYXRjaGVzWDsgcGF0Y2hYKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5YID0gcGF0Y2hYICogcGF0Y2hTaXplTm9ybTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aXNpYmxlID0gISFmcnVzdHVtICYmIHRoaXMuaXNQYXRjaEluc2lkZVZpZXdGcnVzdHVtQnlTcGhlcmUocGF0Y2hYLCBwYXRjaFosIGZydXN0dW0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBsb2QgPSB0aGlzLmxvZE1hbmFnZXIuZ2V0UGF0Y2hMb2QocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMubG9kSW5mb1twbG9kLmNvcmVdLmluZm9bcGxvZC5sZWZ0XVtwbG9kLnJpZ2h0XVtwbG9kLnRvcF1bcGxvZC5ib3R0b21dO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VJbmRleCAgPSBpbmZvLnN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZVZlcnRleCA9IG1pblogKiB0aGlzLndpZHRoICsgbWluWDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyUHJlcGFyZXIucHJlcGFyZVBhdGNoKHZpc2libGUsIGJhc2VJbmRleCwgYmFzZVZlcnRleCwgaW5mby5jb3VudCwgcGF0Y2hYLCBwYXRjaFosIG1pblgsIG1pblosIHRoaXMucGF0Y2hTaXplLCBwbG9kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNQYXRjaEluc2lkZVZpZXdGcnVzdHVtQnlTcGhlcmUocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQsIGZydXN0dW06IElGcnVzdHVtKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWluSGVpZ2h0ID0gdGhpcy5oZWlnaHRNYXAuZ2V0UGF0Y2hNaW4ocGF0Y2hCYXNlWCwgcGF0Y2hCYXNlWik7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hNYXhIZWlnaHQgPSB0aGlzLmhlaWdodE1hcC5nZXRQYXRjaE1heChwYXRjaEJhc2VYLCBwYXRjaEJhc2VaKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwYXRjaFJhZGl1c0J5U2l6ZSAgID0gdGhpcy5wYXRjaFNpemUgLyAyO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoUmVkaXVzQnlIZWlnaHQgPSAocGF0Y2hNYXhIZWlnaHQgLSBwYXRjaE1pbkhlaWdodCkgLyAyO1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaENlbnRlclggICA9IChwYXRjaEJhc2VYICogdGhpcy5wYXRjaFNpemUpICsgcGF0Y2hSYWRpdXNCeVNpemU7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hDZW50ZXJZICAgPSAocGF0Y2hNYXhIZWlnaHQgKyBwYXRjaE1pbkhlaWdodCkgLyAyO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoQ2VudGVyWiAgID0gKHBhdGNoQmFzZVogKiB0aGlzLnBhdGNoU2l6ZSkgKyBwYXRjaFJhZGl1c0J5U2l6ZTtcclxuICAgICAgICBjb25zdCByYWRpdXMgICAgICAgICA9IChwYXRjaFJhZGl1c0J5U2l6ZSA+IHBhdGNoUmVkaXVzQnlIZWlnaHQgPyBwYXRjaFJhZGl1c0J5U2l6ZSA6IHBhdGNoUmVkaXVzQnlIZWlnaHQpICogTWF0aC5TUVJUMjtcclxuXHJcbiAgICAgICAgLy8gY2VudGVyIHRoZSBwYXRjaGVzIHJlbGF0aXZlIHRvIHRoZSBlbnRpdHkgY2VudGVyXHJcbiAgICAgICAgY29uc3QgcGF0Y2hDZW50ZXJlZFggPSAoLXRoaXMud2lkdGggLyAyKSArIHBhdGNoQ2VudGVyWDtcclxuICAgICAgICBjb25zdCBwYXRjaENlbnRlcmVkWiA9ICgtdGhpcy5kZXB0aCAvIDIpICsgcGF0Y2hDZW50ZXJaO1xyXG5cclxuICAgICAgICByZXR1cm4gZnJ1c3R1bS5jb250YWluc1NwaGVyZShwYXRjaENlbnRlcmVkWCwgcGF0Y2hDZW50ZXJZLCBwYXRjaENlbnRlcmVkWiwgcmFkaXVzKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR2VvbWlwR3JpZFJlbmRlclByZXBhcmVyIiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJSGVpZ2h0TWFwRmlsZUltcG9ydE9wdGlvbnMgfSBmcm9tIFwiLi9BYnNIZWlnaHRNYXBGaWxlSU8ubWpzXCI7XHJcbmltcG9ydCBHZW9taXBHcmlkUmVuZGVyUHJlcGFyZXIgZnJvbSBcIi4vR2VvbWlwR3JpZFJlbmRlclByZXBhcmVyLm1qc1wiO1xyXG5pbXBvcnQgSGVpZ2h0TWFwIGZyb20gXCIuL0hlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IHsgSVpvbmUgfSBmcm9tIFwiLi9JWm9uZS5tanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9taXBHcmlkIGV4dGVuZHMgR2VvbWlwR3JpZFJlbmRlclByZXBhcmVyIHtcclxuXHJcbiAgICBwdWJsaWMgc2V0SGVpZ2h0KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAuc2V0KHgsIHosIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXBwZW5kVG9IZWlnaHQoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCkge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5hcHBlbmQoeCwgeiwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtdWx0aXBseVRvSGVpZ2h0KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQsIGRlZmF1bHRIZWlnaHQ6IGZsb2F0ID0gMCkge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5tdWx0aXBseSh4LCB6LCB2YWx1ZSwgZGVmYXVsdEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNtb290aEhlaWdodHNab25lKHpvbmU6IElab25lLCBucDogZmxvYXQsIHJhZGl1czogZmxvYXQpIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAuc21vb3RoWm9uZSh6b25lLCBucCwgcmFkaXVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZEhlaWdodE1hcEZyb21GaWxlKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIG9wdGlvbnM/OiBJSGVpZ2h0TWFwRmlsZUltcG9ydE9wdGlvbnMsIG5wOiBmbG9hdCA9IC0xLCByYWRpdXM6IGludCA9IDApIHtcclxuICAgICAgICBjb25zdCBoZWFkZXIgPSBhd2FpdCB0aGlzLl9oZWlnaHRNYXAuZnJvbUZpbGUoYnVmZmVyLCBvcHRpb25zKTtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAuc21vb3RoKG5wLCByYWRpdXMpO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5yZWNhbGN1bGF0ZU1pbk1heCh0aGlzLl9oZWlnaHRNYXApO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5yZWNhbGN1bGF0ZUFBQkIoKTtcclxuICAgICAgICByZXR1cm4gaGVhZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsb2FkSGVpZ2h0TWFwRnJvbUltZyhpbWc6IEltYWdlQml0bWFwLCBucDogZmxvYXQgPSAtMSwgcmFkaXVzOiBpbnQgPSAwKSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLmZyb21JbWFnZShpbWcpO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5zbW9vdGgobnAsIHJhZGl1cyk7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnJlY2FsY3VsYXRlTWluTWF4KHRoaXMuX2hlaWdodE1hcCk7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnJlY2FsY3VsYXRlQUFCQigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBub3JtYWxpemVIZWlnaHRNYXAobWF4SGVpZ2h0PzogZmxvYXQpIHtcclxuICAgICAgICBcclxuICAgICAgICBtYXhIZWlnaHQgPz89IHRoaXMuX2hlaWdodE1hcC5tYXhIZWlnaHQ7XHJcblxyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5ub3JtYWxpemUobWF4SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0TWF4SGVpZ2h0KG1heEhlaWdodDogZmxvYXQpIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAuc2V0TWF4SGVpZ2h0KG1heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFwcGVuZEhlaWdodE1hcChcclxuICAgICAgICBoZWlnaHRNYXA6IEhlaWdodE1hcCxcclxuICAgICAgICB2YWx1ZTogZmxvYXQsXHJcbiAgICAgICAgem9uZTogSVpvbmUsXHJcbiAgICAgICAgbWluSGVpZ2h0OiBmbG9hdCB8IG51bGwgPSBudWxsLFxyXG4gICAgICAgIG1heEhlaWdodDogZmxvYXQgfCBudWxsID0gbnVsbFxyXG4gICAgKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLmNvbWJpbmVIZWlnaHRzKCcrJywgaGVpZ2h0TWFwLCB2YWx1ZSwgem9uZSwgMCwgbWluSGVpZ2h0LCBtYXhIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWNhbGN1bGF0ZU1pbk1heCh6b25lOiBJWm9uZSwgYWFiYjogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnJlY2FsY3VsYXRlTWluTWF4KHpvbmUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChhYWJiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodE1hcC5yZWNhbGN1bGF0ZUFBQkIoKTtcclxuICAgICAgICB9IFxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHZW9taXBHcmlkIiwiaW1wb3J0IEdlb21pcEdyaWQgZnJvbSBcIi4vR2VvbWlwR3JpZC5tanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNlVGVycmFpbiBleHRlbmRzIEdlb21pcEdyaWQge1xyXG4gICAgcHVibGljIGdldCBtYXhIZWlnaHQoKSB7IHJldHVybiB0aGlzLmhlaWdodE1hcC5tYXhIZWlnaHQ7IH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQmFzZVRlcnJhaW47IiwiZXhwb3J0IGludGVyZmFjZSBJUGF0Y2gge1xyXG4gICAgcmVhZG9ubHkgaW5kZXg6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IG1pblg6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IG1pblo6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHg6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHo6IG51bWJlcjtcclxufSIsImltcG9ydCB7IGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB7IElQYXRjaCB9IGZyb20gXCIuL0lQYXRjaC5tanNcIjtcclxuaW1wb3J0IHsgSVNpbmdsZUxvZEluZm8gfSBmcm9tIFwiLi9Mb2RJbmZvLm1qc1wiO1xyXG5pbXBvcnQgeyBJUGF0Y2hMb2RCYXNlIH0gZnJvbSBcIi4vTG9kTWFuYWdlci5tanNcIjtcclxuaW1wb3J0IEJhc2VUZXJyYWluIGZyb20gXCIuL1RlcnJhaW4ubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElJbnN0YW5jaW5nT2JqZWN0IHtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VE9iamVjdCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0LCBURGF0YSBleHRlbmRzIFVpbnQxNkFycmF5IHwgVWludDhBcnJheT4ge1xyXG4gICAgdmVydGV4QmFzZUluZGV4OiBpbnQ7XHJcbiAgICB2ZXJ0ZXhDb3VudDogaW50O1xyXG4gICAgZGF0YTogVERhdGE7XHJcbiAgICBjb3VudDogaW50O1xyXG4gICAgb2JqZWN0OiBUT2JqZWN0IHwgbnVsbDtcclxuICAgIGhhc0NoYW5nZXM6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFRCdWxkZXI8VE9iamVjdCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0LCBURGF0YSBleHRlbmRzIFVpbnQxNkFycmF5IHwgVWludDhBcnJheT4gPSAobG9kSW5mbzogSVBhdGNoTG9kQmFzZSwgcHJpbWl0aXZlSW5mbzogSVNpbmdsZUxvZEluZm8sIGluc3RhbmNpbmdEYXRhOiBURGF0YSwgbWF4SW5zdGFuY2luZ0NvdW50OiBpbnQpID0+IFRPYmplY3QgfCBudWxsO1xyXG5leHBvcnQgdHlwZSBURGVzdHJ1Y3RvcjxUT2JqZWN0IGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3Q+ID0gKG9iamVjdDogVE9iamVjdCkgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgVFNlbGVjdG9yPFRPYmplY3QgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdCwgVERhdGEgZXh0ZW5kcyBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXk+ID0gKGl0ZW06IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxUT2JqZWN0LCBURGF0YT4pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElQYXRjaGVzSW5zdGFuY2luZzxUT2JqZWN0IGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3QsIFREYXRhIGV4dGVuZHMgVWludDE2QXJyYXkgfCBVaW50OEFycmF5PiB7XHJcblxyXG4gICAgYnVpbGRGcm9tVGVycmFpbih0ZXJyYWluOiBCYXNlVGVycmFpbiwgb2JqZWN0QnVpbGRlcj86IFRCdWxkZXI8VE9iamVjdCwgVERhdGE+KTogdm9pZDtcclxuXHJcbiAgICBmb3JFYWNoKGZuOiBUU2VsZWN0b3I8VE9iamVjdCwgVERhdGE+KTogdm9pZDtcclxuXHJcbiAgICBkZXN0cm95KGRlc3RydWN0b3I6IFREZXN0cnVjdG9yPFRPYmplY3Q+KTogdm9pZDtcclxuXHJcbiAgICBnZXQobG9kOiBJUGF0Y2hMb2RCYXNlKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFRPYmplY3QsIFREYXRhPjtcclxuXHJcbiAgICBpbmNyZW1lbnQobG9kOiBJUGF0Y2hMb2RCYXNlLCBwYXRjaDogSVBhdGNoKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFRPYmplY3QsIFREYXRhPjtcclxuXHJcbiAgICB6ZXJvQWxsKCk6IHZvaWQ7XHJcbn0iLCJpbXBvcnQgeyBJUGF0Y2hlc0luc3RhbmNpbmcgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9JUGF0Y2hlc0luc3RhbmNpbmcubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmc8VERhdGEgZXh0ZW5kcyBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXk+IGV4dGVuZHMgSVBhdGNoZXNJbnN0YW5jaW5nPHBjeC5NZXNoSW5zdGFuY2UsIFREYXRhPiB7XHJcblxyXG4gICAgYnVmZmVyVHlwZTogVWludDE2QXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQ4QXJyYXlDb25zdHJ1Y3RvcjtcclxuXHJcbiAgICBpdGVtQnVmZmVyU2l6ZTogbnVtYmVyO1xyXG4gICAgbWVzaEluc3RhbmNlQ291bnQ6IG51bWJlcjtcclxuICAgIFxyXG4gICAgYXBwZW5kTWVzaEluc3RhbmNlcyhhcnI6IHBjeC5NZXNoSW5zdGFuY2VbXSwgb2Zmc2V0PzogbnVtYmVyKTogbnVtYmVyO1xyXG5cclxuICAgIGJlZ2luKGNhc3RTaGFkb3c/OiBib29sZWFuLCByZWNlaXZlU2hhZG93PzogYm9vbGVhbik6IHZvaWQ7XHJcblxyXG4gICAgZW5kKCk6IHZvaWQ7XHJcbn0iLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB7IGRlZmF1bHRQYXRjaExvZCwgSVBhdGNoTG9kLCBJUGF0Y2hMb2RCYXNlIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vTG9kTWFuYWdlci5tanNcIjtcclxuaW1wb3J0IEJhc2VUZXJyYWluIGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL1RlcnJhaW4ubWpzXCI7XHJcbmltcG9ydCB7IElTaW5nbGVMb2RJbmZvIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IHsgSUdyaWRQYXRjaEluaXRpYWxpemVyIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vR2VvbWlwR3JpZFJlbmRlclByZXBhcmVyLm1qc1wiO1xyXG5pbXBvcnQgeyBJWm9uZSB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0lab25lLm1qc1wiO1xyXG5pbXBvcnQgeyBDdXN0b21NZXNoSW5zdGFuY2UgfSBmcm9tIFwiLi4vRW5naW5lRXh0ZW5zaW9ucy9SZW5kZXJlci5tanNcIjtcclxuaW1wb3J0IHsgSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZyB9IGZyb20gXCIuL0lUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcubWpzXCI7XHJcblxyXG5leHBvcnQgdHlwZSBURm9yRWFjaFBhdGNoQ2FsbGJhY2sgPSAocGF0Y2hJbmRleDogaW50LCB4OiBpbnQsIHo6IGludCkgPT4gdm9pZCB8IGJvb2xlYW47XHJcblxyXG5leHBvcnQgY2xhc3MgVGVycmFpblBhdGNoQnVmZmVyQmFzaWMge1xyXG5cclxuICAgIHJlYWRvbmx5IGluZGV4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSB4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSB6OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtaW5YOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtaW5aOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBzaXplOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIHZpc2libGU6IGJvb2xlYW47XHJcblxyXG4gICAgcHVibGljIGhhc2g6IG51bWJlcjtcclxuICAgIHB1YmxpYyBsb2Q6IElQYXRjaExvZDtcclxuICAgIHB1YmxpYyBpbmRpY2VzQmFzZUluZGV4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgaW5kaWNlc0Jhc2VWZXJ0ZXg6IG51bWJlcjtcclxuICAgIHB1YmxpYyBpbmRpY2VzQ291bnQ6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgZGVwZW5kZW5jZXNVcGRhdGVkOiBib29sZWFuO1xyXG4gICAgcHVibGljIGhlaWdodHNVcGRhdGVkOiBib29sZWFuO1xyXG4gICAgcHVibGljIGhlaWdodHNVcGRhdGVkVGhpc0ZyYW1lOiBib29sZWFuO1xyXG5cclxuICAgIHB1YmxpYyBsYXN0Q2hhbmdlVGltZTogbnVtYmVyO1xyXG4gICAgcHVibGljIGxhc3RDaGFuZ2VBdHRhY2hUaW1lOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgbGFzdENoYW5nZUhlaWdodHNUaW1lOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaW5kZXg6IG51bWJlciwgeDogbnVtYmVyLCB6OiBudW1iZXIsIG1pblg6IG51bWJlciwgbWluWjogbnVtYmVyLCBzaXplOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMueCAgICAgPSB4O1xyXG4gICAgICAgIHRoaXMueiAgICAgPSB6O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWluWCAgPSBtaW5YO1xyXG4gICAgICAgIHRoaXMubWluWiAgPSBtaW5aO1xyXG4gICAgICAgIHRoaXMuc2l6ZSAgPSBzaXplO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaGFzaCAgPSAwO1xyXG4gICAgICAgIHRoaXMubG9kID0gZGVmYXVsdFBhdGNoTG9kO1xyXG4gICAgICAgIHRoaXMuaW5kaWNlc0Jhc2VJbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5pbmRpY2VzQmFzZVZlcnRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5pbmRpY2VzQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuZGVwZW5kZW5jZXNVcGRhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oZWlnaHRzVXBkYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0c1VwZGF0ZWRUaGlzRnJhbWUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhc3RDaGFuZ2VUaW1lID0gMDtcclxuICAgICAgICB0aGlzLmxhc3RDaGFuZ2VBdHRhY2hUaW1lID0gMDtcclxuICAgICAgICB0aGlzLmxhc3RDaGFuZ2VIZWlnaHRzVGltZSA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFRlcnJhaW5QYXRjaGVzQmFzaWM8XHJcbiAgICBUUGF0Y2hCdWZmZXIgZXh0ZW5kcyBUZXJyYWluUGF0Y2hCdWZmZXJCYXNpYyA9IFRlcnJhaW5QYXRjaEJ1ZmZlckJhc2ljLFxyXG4gICAgVFBhdGNoUHJpbWl0aXZlIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55PiA9IFJlY29yZDxzdHJpbmcsIGFueT5cclxuPiB7XHJcbiAgICBwcml2YXRlIF9pbml0OiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBfYWFiYjogcGN4LkJvdW5kaW5nQm94O1xyXG4gICAgcHJpdmF0ZSBfcGF0Y2hBdmFsYWJsZUNvdW50OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9jaGFuZ2VzSWRzOiBudW1iZXJbXTtcclxuICAgIHByaXZhdGUgX3VzZU1hc2hlc0JhZzogYm9vbGVhbjtcclxuXHJcbiAgICBwcm90ZWN0ZWQgX2VudGl0eTogcGN4LkVudGl0eTtcclxuICAgIHByb3RlY3RlZCBfYXBwOiBwY3guQXBwQmFzZTtcclxuICAgIHByb3RlY3RlZCBfbWF0ZXJpYWw6IHBjeC5TdGFuZGFyZE1hdGVyaWFsO1xyXG5cclxuICAgIHByb3RlY3RlZCBfbGFzdENoYW5nZVRpbWU6IG51bWJlcjtcclxuICAgIHByb3RlY3RlZCBfbGFzdENoYW5nZUF0dGFjaFRpbWU6IG51bWJlcjtcclxuICAgIHByb3RlY3RlZCBfbGFzdENoYW5nZUhlaWdodHNUaW1lOiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBfYnVmZmVyQXJyYXk6IFRQYXRjaEJ1ZmZlcltdO1xyXG4gICAgcHJpdmF0ZSBfbWVzaEluc3RhbmNlQXJyYXk6IEFycmF5PHBjeC5NZXNoSW5zdGFuY2UgfCB1bmRlZmluZWQ+O1xyXG4gICAgcHJpdmF0ZSBfY3VzdG9tTWVzaEluc3RhbmNlOiAocGN4Lk1lc2hJbnN0YW5jZSAmIEN1c3RvbU1lc2hJbnN0YW5jZTxUUGF0Y2hQcmltaXRpdmU+KSB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgX2luc3RhbmNpbmc6IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmc8YW55PiB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBwdWJsaWMgY3VzdG9tRm9yd2FyZFJlbmRlcmVyOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IHRlcnJhaW46IEJhc2VUZXJyYWluO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgaW5zdGFuY2luZygpIHsgcmV0dXJuIHRoaXMuX2luc3RhbmNpbmc7IH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGJ1ZmZlckFycmF5KCk6IFJlYWRvbmx5PHR5cGVvZiB0aGlzLl9idWZmZXJBcnJheT4geyByZXR1cm4gdGhpcy5fYnVmZmVyQXJyYXk7IH1cclxuICAgIHB1YmxpYyBnZXQgbWVzaEluc3RhbmNlQXJyYXkoKTogUmVhZG9ubHk8dHlwZW9mIHRoaXMuX21lc2hJbnN0YW5jZUFycmF5PiB7IHJldHVybiB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheTsgfVxyXG4gICAgcHVibGljIGdldCBhYWJiKCkgeyByZXR1cm4gdGhpcy5fYWFiYjsgfVxyXG4gICAgcHVibGljIGdldCBjdXN0b21NZXNoSW5zdGFuY2UoKSB7IHJldHVybiB0aGlzLl9jdXN0b21NZXNoSW5zdGFuY2U7IH1cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgaGVpZ2h0TWFwVGV4dHVyZTogcGN4LlRleHR1cmU7XHJcblxyXG4gICAgY29uc3RydWN0b3IodGVycmFpbjogQmFzZVRlcnJhaW4sIGluc3RhbmNlcj86IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmc8YW55Pikge1xyXG4gICAgICAgIHRoaXMudGVycmFpbiA9IHRlcnJhaW47XHJcbiAgICAgICAgdGhpcy5jdXN0b21Gb3J3YXJkUmVuZGVyZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl91c2VNYXNoZXNCYWcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9idWZmZXJBcnJheSA9IG5ldyBBcnJheSh0aGlzLnRlcnJhaW4ubnVtUGF0Y2hlc1ggKiB0aGlzLnRlcnJhaW4ubnVtUGF0Y2hlc1opO1xyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0YW5jZUFycmF5ID0gbmV3IEFycmF5KHRoaXMudGVycmFpbi5udW1QYXRjaGVzWCAqIHRoaXMudGVycmFpbi5udW1QYXRjaGVzWik7XHJcbiAgICAgICAgdGhpcy5fY3VzdG9tTWVzaEluc3RhbmNlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoQXZhbGFibGVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlc0lkcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2FhYmIgPSBuZXcgcGMuQm91bmRpbmdCb3goKTtcclxuICAgICAgICB0aGlzLl9pbml0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faW5zdGFuY2luZyA9IGluc3RhbmNlcjtcclxuICAgICAgICB0aGlzLnVwZGF0ZUFhYmIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0TWF0ZXJpYWwobWF0ZXJpYWw6IHBjeC5TdGFuZGFyZE1hdGVyaWFsKSB7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwgPSBtYXRlcmlhbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0SW5zdGFuY2luZyh2YWx1ZTogSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZzxhbnk+IHwgdW5kZWZpbmVkLCB1cGRhdGVNZXNoZXM6IGJvb2xlYW4gPSB0cnVlKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pbnN0YW5jaW5nID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9kZXN0cm95TWVzaGVzKCk7XHJcbiAgICAgICAgdGhpcy5faW5zdGFuY2luZyA9IHZhbHVlO1xyXG5cclxuICAgICAgICBpZiAodXBkYXRlTWVzaGVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWVzaGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVBYWJiKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGhhbGZXaWR0aCA9IHRoaXMudGVycmFpbi53aWR0aCAvIDI7XHJcbiAgICAgICAgY29uc3QgaGFsZkRlcHRoID0gdGhpcy50ZXJyYWluLmRlcHRoIC8gMjtcclxuXHJcbiAgICAgICAgdGhpcy5fYWFiYi5zZXRNaW5NYXgoXHJcbiAgICAgICAgICAgIG5ldyBwYy5WZWMzKC1oYWxmV2lkdGgsIDAsICAgICAgICAgICAgICAgICAgICAgIC1oYWxmRGVwdGgpLFxyXG4gICAgICAgICAgICBuZXcgcGMuVmVjMygraGFsZldpZHRoLCB0aGlzLnRlcnJhaW4ubWF4SGVpZ2h0LCAraGFsZkRlcHRoKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jdXN0b21NZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VzdG9tTWVzaEluc3RhbmNlLnNldEN1c3RvbUFhYmIodGhpcy5fYWFiYik7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1c3RvbU1lc2hJbnN0YW5jZS5tZXNoLmFhYmIgPSB0aGlzLl9hYWJiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBtZXNoSW5zdGFuY2Ugb2YgdGhpcy5fbWVzaEluc3RhbmNlQXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKG1lc2hJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgbWVzaEluc3RhbmNlLnNldEN1c3RvbUFhYmIodGhpcy5fYWFiYik7XHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UubWVzaC5hYWJiID0gdGhpcy5fYWFiYjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2luZy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ub2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5vYmplY3Quc2V0Q3VzdG9tQWFiYih0aGlzLl9hYWJiKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLm9iamVjdC5tZXNoLmFhYmIgPSB0aGlzLl9hYWJiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0VXBkYXRlKCkge1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2ZvcmNlVXBkYXRlUmVuZGVyQ29tcG9uZW50KGVudGl0eTogcGN4LkVudGl0eSkge1xyXG5cclxuICAgICAgICBsZXQgYXBwZW5kID0gZmFsc2U7IC8vIGRlc3Ryb3kgcHJldiBtZXNoSW5zdGFuY2VzIGJ5IGRlZmF1bHRcclxuICAgICAgICBsZXQgbWVzaEluc3RhbmNlczogQXJyYXk8cGN4Lk1lc2hJbnN0YW5jZT47XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcndhcmRSZW5kZXJlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl9jdXN0b21NZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXNlTWFzaGVzQmFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlcyA9IFt0aGlzLl9jdXN0b21NZXNoSW5zdGFuY2VdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5pbnN0YW5jaW5nXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuaW5zdGFuY2luZy5tZXNoSW5zdGFuY2VDb3VudFxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLl9wYXRjaEF2YWxhYmxlQ291bnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2VzID0gbmV3IEFycmF5PHBjeC5NZXNoSW5zdGFuY2U+KGNvdW50KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNpbmcuYXBwZW5kTWVzaEluc3RhbmNlcyhtZXNoSW5zdGFuY2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBpbnN0YW5jaW5nIHdhcyB1c2VkLCB0aGVuIHdlIGRlbGV0ZSBhbGwgcHJldmlvdXMgaW5zdGFuY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBvciB1c2UgY3VzdG9tIHJlbmRlcmVyXHJcbiAgICAgICAgICAgICAgICBhcHBlbmQgPSAhdGhpcy5fdXNlTWFzaGVzQmFnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxldCBpID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwYXRjaEluZGV4ID0gMDsgcGF0Y2hJbmRleCA8IHRoaXMuX21lc2hJbnN0YW5jZUFycmF5Lmxlbmd0aDsgcGF0Y2hJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hNZXNoSW5zdGFuY2UgPSB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheVtwYXRjaEluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGF0Y2hNZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzaEluc3RhbmNlc1tpKytdID0gcGF0Y2hNZXNoSW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZXNJZHMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fdXNlTWFzaGVzQmFnID0gISF0aGlzLmluc3RhbmNpbmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZW50aXR5LnJlbmRlcikge1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogaHR0cHM6Ly9naXRodWIuY29tL3BsYXljYW52YXMvZW5naW5lL2lzc3Vlcy82NjgwXHJcbiAgICAgICAgICAgIGlmIChhcHBlbmQpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGVudGl0eS5yZW5kZXIuX21lc2hJbnN0YW5jZXMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZW50aXR5LnJlbmRlci5tZXNoSW5zdGFuY2VzID0gbWVzaEluc3RhbmNlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVudGl0eS5hZGRDb21wb25lbnQoJ3JlbmRlcicsIHtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZXM6IG1lc2hJbnN0YW5jZXMsXHJcbiAgICAgICAgICAgICAgICBjdWxsOiBmYWxzZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgc2hhZG93c1xyXG4gICAgICAgIGZvciAoY29uc3QgbWVzaEluc3RhbmNlIG9mIG1lc2hJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLmN1bGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLmNhc3RTaGFkb3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLnJlY2VpdmVTaGFkb3cgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgX3VwZGF0ZVJlbmRlckNvbXBvbmVudChlbnRpdHk6IHBjeC5FbnRpdHkpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9yd2FyZFJlbmRlcmVyIHx8XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2luZyB8fFxyXG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VzSWRzLmxlbmd0aCA9PT0gMCB8fFxyXG4gICAgICAgICAgICAhZW50aXR5LmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZm9yY2VVcGRhdGVSZW5kZXJDb21wb25lbnQoZW50aXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgdXBkYXRlSW5kZXhCdWZmZXIoKTogdm9pZDtcclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlTG9kcygpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUluZGV4QnVmZmVyKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVNZXNoZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2ZvckVhY2goem9uZTogSVpvbmUsIHF1YWQ6IGludCwgbnVtUXVhZFg6IGludCwgbnVtUXVhZFo6IGludCwgY2FsbGJhY2s6IFRGb3JFYWNoUGF0Y2hDYWxsYmFjaykge1xyXG5cclxuICAgICAgICBpZiAoem9uZS5tYXhYIDwgMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh6b25lLm1heFogPCAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IG1pblggPSBNYXRoLm1heCh6b25lLm1pblgsIDApO1xyXG4gICAgICAgIGNvbnN0IG1pblogPSBNYXRoLm1heCh6b25lLm1pblosIDApO1xyXG4gICAgICAgIGNvbnN0IG1heFggPSBNYXRoLm1pbih6b25lLm1heFgsIHRoaXMudGVycmFpbi53aWR0aCk7XHJcbiAgICAgICAgY29uc3QgbWF4WiA9IE1hdGgubWluKHpvbmUubWF4WiwgdGhpcy50ZXJyYWluLmRlcHRoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWluUGF0Y2hYID0gbWluWCAvIHF1YWQgfCAwO1xyXG4gICAgICAgIGNvbnN0IG1pblBhdGNoWiA9IG1pblogLyBxdWFkIHwgMDtcclxuICAgICAgICBjb25zdCBtYXhQYXRjaFggPSBtYXhYIC8gcXVhZCB8IDA7XHJcbiAgICAgICAgY29uc3QgbWF4UGF0Y2haID0gbWF4WiAvIHF1YWQgfCAwO1xyXG5cclxuICAgICAgICBjb25zdCBub3JtYWxpemVNaW5YID0gTWF0aC5tYXgobWluUGF0Y2hYLCAwKTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVNaW5aID0gTWF0aC5tYXgobWluUGF0Y2haLCAwKTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVNYXhYID0gTWF0aC5taW4obWF4UGF0Y2hYICsgMSwgbnVtUXVhZFgpO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZU1heFogPSBNYXRoLm1pbihtYXhQYXRjaFogKyAxLCBudW1RdWFkWik7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSBub3JtYWxpemVNaW5aOyB6IDwgbm9ybWFsaXplTWF4WjsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gbm9ybWFsaXplTWluWDsgeCA8IG5vcm1hbGl6ZU1heFg7IHgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoSW5kZXggPSB6ICogbnVtUXVhZFggKyB4O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayhwYXRjaEluZGV4LCB4LCB6KSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZvckVhY2goem9uZTogSVpvbmUsIGNhbGxiYWNrOiBURm9yRWFjaFBhdGNoQ2FsbGJhY2spIHtcclxuXHJcbiAgICAgICAgdGhpcy5fZm9yRWFjaChcclxuICAgICAgICAgICAgem9uZSxcclxuICAgICAgICAgICAgdGhpcy50ZXJyYWluLnBhdGNoU2l6ZSxcclxuICAgICAgICAgICAgdGhpcy50ZXJyYWluLm51bVBhdGNoZXNYLFxyXG4gICAgICAgICAgICB0aGlzLnRlcnJhaW4ubnVtUGF0Y2hlc1osXHJcbiAgICAgICAgICAgIGNhbGxiYWNrXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlRGVwZW5kZW5jaWVzKHpvbmU6IElab25lKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cclxuICAgICAgICB0aGlzLmZvckVhY2goem9uZSwgKHBhdGNoSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGNoQnVmZmVyID0gdGhpcy5fYnVmZmVyQXJyYXlbcGF0Y2hJbmRleF07XHJcblxyXG4gICAgICAgICAgICBwYXRjaEJ1ZmZlci5sYXN0Q2hhbmdlVGltZSA9IG5vdztcclxuICAgICAgICAgICAgcGF0Y2hCdWZmZXIubGFzdENoYW5nZUF0dGFjaFRpbWUgPSBub3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2xhc3RDaGFuZ2VUaW1lID0gbm93O1xyXG4gICAgICAgIHRoaXMuX2xhc3RDaGFuZ2VBdHRhY2hUaW1lID0gbm93O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgdXBkYXRlSGVpZ2h0cyh6b25lOiBJWm9uZSkge1xyXG5cclxuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKHpvbmUsIChwYXRjaEluZGV4KSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwYXRjaEJ1ZmZlciA9IHRoaXMuX2J1ZmZlckFycmF5W3BhdGNoSW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgcGF0Y2hCdWZmZXIubGFzdENoYW5nZVRpbWUgPSBub3c7XHJcbiAgICAgICAgICAgIHBhdGNoQnVmZmVyLmxhc3RDaGFuZ2VIZWlnaHRzVGltZSA9IG5vdztcclxuICAgICAgICAgICAgcGF0Y2hCdWZmZXIuaGVpZ2h0c1VwZGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9sYXN0Q2hhbmdlVGltZSA9IG5vdztcclxuICAgICAgICB0aGlzLl9sYXN0Q2hhbmdlSGVpZ2h0c1RpbWUgPSBub3c7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYWRkUGF0Y2hCdWZmZXIocGF0Y2hJbmRleDogbnVtYmVyLCBidWZmZXI6IFRQYXRjaEJ1ZmZlcikge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fYnVmZmVyQXJyYXlbcGF0Y2hJbmRleF0pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCdWZmZXIgaGFzIGFscmVhZHkgYmVlbiBhZGRlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fYnVmZmVyQXJyYXlbcGF0Y2hJbmRleF0gPSBidWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYWRkUGF0Y2hNZXNoSW5zdGFuY2UocGF0Y2hJbmRleDogbnVtYmVyLCBtZXNoSW5zdGFuY2U6IHBjeC5NZXNoSW5zdGFuY2UpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX21lc2hJbnN0YW5jZUFycmF5W3BhdGNoSW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWVzaCBpbnN0YW5jZSBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheVtwYXRjaEluZGV4XSA9IG1lc2hJbnN0YW5jZTtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VzSWRzLnB1c2gocGF0Y2hJbmRleCk7XHJcbiAgICAgICAgdGhpcy5fcGF0Y2hBdmFsYWJsZUNvdW50Kys7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IF9jcmVhdGVDdXN0b21CYWdNZXNoKGFwcDogcGN4LkFwcEJhc2UsIGVudGl0eTogcGN4LkVudGl0eSwgbWF0ZXJpYWw6IHBjeC5NYXRlcmlhbCwgdGVycmFpbjogQmFzZVRlcnJhaW4pOiBwY3guTWVzaEluc3RhbmNlICYgQ3VzdG9tTWVzaEluc3RhbmNlPFRQYXRjaFByaW1pdGl2ZT47XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgX2NyZWF0ZUluc3RhbmNpbmdNZXNoKGFwcDogcGN4LkFwcEJhc2UsIGVudGl0eTogcGN4LkVudGl0eSwgbWF0ZXJpYWw6IHBjeC5NYXRlcmlhbCwgbG9kSW5mbzogSVBhdGNoTG9kQmFzZSwgcHJpbWl0aXZlSW5mbzogSVNpbmdsZUxvZEluZm8sIGluc3RhbmNlcjogSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZzxhbnk+LCBkYXRhOiBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXkpOiBwY3guTWVzaEluc3RhbmNlO1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IF9jcmVhdGVQYXRjaEJ1ZmZlcihwYXRjaEluZGV4OiBudW1iZXIsIGJhc2VJbmRleDogbnVtYmVyLCBiYXNlVmVydGV4OiBudW1iZXIsIGNvdW50OiBudW1iZXIsIHBhdGNoWDogbnVtYmVyLCBwYXRjaFo6IG51bWJlciwgbWluWDogbnVtYmVyLCBtaW5aOiBudW1iZXIsIHNpemU6IG51bWJlciwgbG9kOiBJUGF0Y2hMb2QpOiBUUGF0Y2hCdWZmZXI7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgX2NyZWF0ZVBhdGNoTWVzaChwYXRjaEluZGV4OiBudW1iZXIsIGFwcDogcGN4LkFwcEJhc2UsIGVudGl0eTogcGN4LkVudGl0eSwgbWF0ZXJpYWw6IHBjeC5NYXRlcmlhbCk6IHBjeC5NZXNoSW5zdGFuY2U7XHJcbiAgICBcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBfZGVzdHJveUN1c3RvbUJhZ01lc2gobWVzaDogcGN4Lk1lc2hJbnN0YW5jZSk6IHZvaWQ7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgX2Rlc3Ryb3lJbnN0YW5jaW5nTWVzaChtZXNoOiBwY3guTWVzaEluc3RhbmNlKTogdm9pZDtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBfZGVzdHJveVBhdGNoTWVzaChwYXRjaEluZGV4OiBudW1iZXIpOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBlbmRVcGRhdGUoaGFzVXBkYXRlSGVpZ2h0czogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVJlbmRlckNvbXBvbmVudCh0aGlzLl9lbnRpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRPckNyZWF0ZVBhdGNoTWVzaChwYXRjaEluZGV4OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgbGV0IHBhdGNoID0gdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF07XHJcbiAgICAgICAgaWYgKCFwYXRjaCkge1xyXG4gICAgICAgICAgICBwYXRjaCA9IHRoaXMuX2NyZWF0ZVBhdGNoTWVzaChwYXRjaEluZGV4LCB0aGlzLl9hcHAsIHRoaXMuX2VudGl0eSwgdGhpcy5fbWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRQYXRjaE1lc2hJbnN0YW5jZShwYXRjaEluZGV4LCBwYXRjaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcGF0Y2g7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3lQYXRjaE1lc2gocGF0Y2hJbmRleDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lQYXRjaE1lc2gocGF0Y2hJbmRleCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVzaEluc3RhbmNlID0gdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF07XHJcblxyXG4gICAgICAgIGlmIChwYXRjaE1lc2hJbnN0YW5jZSkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcGF0Y2hBdmFsYWJsZUNvdW50LS07XHJcbiAgICAgICAgICAgIHRoaXMuX2NoYW5nZXNJZHMucHVzaChwYXRjaEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheVtwYXRjaEluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3lQYXRjaGVzTWVzaCgpIHtcclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHRoaXMudGVycmFpbi5udW1QYXRjaGVzWjsgeisrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy50ZXJyYWluLm51bVBhdGNoZXNYOyB4KyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0geiAqIHRoaXMudGVycmFpbi5udW1QYXRjaGVzWCArIHg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lQYXRjaE1lc2goaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVQYXRjaGVzTWVzaE1hdGVyaWFsKCkge1xyXG4gICAgICAgIGZvciAobGV0IHogPSAwOyB6IDwgdGhpcy50ZXJyYWluLm51bVBhdGNoZXNaOyB6KyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLnRlcnJhaW4ubnVtUGF0Y2hlc1g7IHgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0geiAqIHRoaXMudGVycmFpbi5udW1QYXRjaGVzWCArIHg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2UgPSB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheVtpbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc2hJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tYXRlcmlhbCA9IHRoaXMuX21hdGVyaWFsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2Rlc3Ryb3lNZXNoZXMoKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jdXN0b21NZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVzdHJveUN1c3RvbUJhZ01lc2godGhpcy5fY3VzdG9tTWVzaEluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5fY3VzdG9tTWVzaEluc3RhbmNlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbnN0YW5jaW5nPy5kZXN0cm95KChtZXNoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rlc3Ryb3lJbnN0YW5jaW5nTWVzaChtZXNoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9yd2FyZFJlbmRlcmVyIHx8IHRoaXMuaW5zdGFuY2luZykge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lQYXRjaGVzTWVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlTWVzaGVzKCkge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX2luaXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZGVzdHJveU1lc2hlcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcndhcmRSZW5kZXJlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXN0b21NZXNoSW5zdGFuY2UgPSB0aGlzLl9jcmVhdGVDdXN0b21CYWdNZXNoKHRoaXMuX2FwcCwgdGhpcy5fZW50aXR5LCB0aGlzLl9tYXRlcmlhbCwgdGhpcy50ZXJyYWluKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5pbnN0YW5jaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2luZy5idWlsZEZyb21UZXJyYWluKHRoaXMudGVycmFpbiwgKGxvZEluZm8sIHByaW1pdGl2ZUluZm8sIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVJbnN0YW5jaW5nTWVzaCh0aGlzLl9hcHAsIHRoaXMuX2VudGl0eSwgdGhpcy5fbWF0ZXJpYWwsIGxvZEluZm8sIHByaW1pdGl2ZUluZm8sIHRoaXMuaW5zdGFuY2luZyEsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGF0Y2hlc01lc2hNYXRlcmlhbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZm9yY2VVcGRhdGVSZW5kZXJDb21wb25lbnQodGhpcy5fZW50aXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdChhcHA6IHBjeC5BcHBCYXNlLCBlbnRpdHk6IHBjeC5FbnRpdHksIG1hdGVyaWFsOiBwY3guU3RhbmRhcmRNYXRlcmlhbCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5faW5pdCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB0ZXJyYWluIHBhdGNoZXMgd2FzIGluaXRpYWxpemVkIGVhcmxpZXInKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2FwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLl9lbnRpdHkgPSBlbnRpdHk7XHJcblxyXG4gICAgICAgIC8vIGZvciBvdGhlciBsYW5ndWFnZSB1c2UgaW50ZXJuYWwgY2xhc3NcclxuICAgICAgICBjb25zdCBpbml0aWFsaXplcjogSUdyaWRQYXRjaEluaXRpYWxpemVyID0ge1xyXG4gICAgICAgICAgICBpbml0UGF0Y2g6IChiYXNlSW5kZXg6IGludCwgYmFzZVZlcnRleDogaW50LCBjb3VudDogaW50LCBwYXRjaFg6IGludCwgcGF0Y2haOiBpbnQsIG1pblg6IGludCwgbWluWjogaW50LCBzaXplOiBpbnQsIGxvZEluZm86IFJlYWRvbmx5PElQYXRjaExvZD4pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoSW5kZXggPSBwYXRjaFogKiB0aGlzLnRlcnJhaW4ubnVtUGF0Y2hlc1ggKyBwYXRjaFg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9jcmVhdGVQYXRjaEJ1ZmZlcihwYXRjaEluZGV4LCBiYXNlSW5kZXgsIGJhc2VWZXJ0ZXgsIGNvdW50LCBwYXRjaFgsIHBhdGNoWiwgbWluWCwgbWluWiwgc2l6ZSwgbG9kSW5mbyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRQYXRjaEJ1ZmZlcihwYXRjaEluZGV4LCBidWZmZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldE1hdGVyaWFsKG1hdGVyaWFsKTtcclxuICAgICAgICB0aGlzLnRlcnJhaW4uaW5pdFBhdGNoZXMoaW5pdGlhbGl6ZXIpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTWVzaGVzKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBJUGF0Y2ggfSBmcm9tIFwiLi9JUGF0Y2gubWpzXCI7XHJcbmltcG9ydCB7IElJbnN0YW5jaW5nT2JqZWN0LCBJUGF0Y2hlc0luc3RhbmNpbmcsIElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZywgVEJ1bGRlciwgVERlc3RydWN0b3IsIFRTZWxlY3RvciB9IGZyb20gXCIuL0lQYXRjaGVzSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IHsgQk9UVE9NLCBMRUZULCBMb2RJbmZvLCBSSUdIVCwgVE9QIH0gZnJvbSBcIi4vTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IHsgZ2V0TG9kSWQsIElQYXRjaExvZCwgSVBhdGNoTG9kQmFzZSB9IGZyb20gXCIuL0xvZE1hbmFnZXIubWpzXCI7XHJcbmltcG9ydCBCYXNlVGVycmFpbiBmcm9tIFwiLi9UZXJyYWluLm1qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbUluc3REYXRhU2l6ZSA9IDQ7XHJcbmV4cG9ydCBjb25zdCBjb21iaW5lR3JvdXBMZW4gPSA2O1xyXG5cclxuZXhwb3J0IHR5cGUgIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZSA9IFVpbnQ4QXJyYXk7XHJcbmV4cG9ydCBjb25zdCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGUgPSBVaW50OEFycmF5O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29tYmluZUl0ZW0ge1xyXG4gICAgbWFpbklkOiBpbnQsXHJcbiAgICBncm91cElkOiBpbnQsXHJcbiAgICBhbmdsZTogaW50LFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElMb2RDb21iaW5lRGF0YTxUIGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3Q+IHtcclxuICAgIGdyb3VwczogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT5bXSxcclxuICAgIGl0ZW1zOiBJQ29tYmluZUl0ZW1bXVtdW11bXVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGF0Y2hDb21iaW5lSW5zdGFuY2luZzxUIGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3Q+IGltcGxlbWVudHMgSVBhdGNoZXNJbnN0YW5jaW5nPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4ge1xyXG5cclxuICAgIHByaXZhdGUgX3BhdGNoQ291bnQ6IGludDtcclxuXHJcbiAgICBwdWJsaWMgZGF0YTogSUxvZENvbWJpbmVEYXRhPFQ+W107XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoQ291bnQoKSB7IHJldHVybiB0aGlzLl9wYXRjaENvdW50OyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gW107XHJcbiAgICAgICAgdGhpcy5fcGF0Y2hDb3VudCA9IDA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBmb3JFYWNoKGZuOiBUU2VsZWN0b3I8VCwgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlPikge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21iaW5lR3JvdXBMZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWdtZW50ID0gdGhpcy5kYXRhW2NdLmdyb3Vwc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmbihzZWdtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveVNlZ21lbnRPYmplY3RzKGluZGV4OiBpbnQsIGRlc3RydWN0b3I6IFREZXN0cnVjdG9yPFQ+KSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tYmluZUdyb3VwTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHNlZ21lbnQgPSB0aGlzLmRhdGFbaW5kZXhdLmdyb3Vwc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzZWdtZW50Lm9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgZGVzdHJ1Y3RvcihzZWdtZW50Lm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBzZWdtZW50Lm9iamVjdCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koZGVzdHJ1Y3RvcjogVERlc3RydWN0b3I8VD4pIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lTZWdtZW50T2JqZWN0cyhpLCBkZXN0cnVjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJ1aWxkRnJvbVRlcnJhaW4odGVycmFpbjogQmFzZVRlcnJhaW4sIG9iamVjdEJ1aWxkZXI/OiBUQnVsZGVyPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4pIHtcclxuXHJcbiAgICAgICAgdGhpcy5fcGF0Y2hDb3VudCA9IHRlcnJhaW4ubnVtUGF0Y2hlc1ggKiB0ZXJyYWluLm51bVBhdGNoZXNaO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBBcnJheSh0ZXJyYWluLmxvZEluZm8ubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kQ29yZSA9IDA7IGxvZENvcmUgPCB0aGlzLmRhdGEubGVuZ3RoOyBsb2RDb3JlKyspIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW2xvZENvcmVdID0gdGhpcy5fYnVpbGRJbmZvKGxvZENvcmUsIHRlcnJhaW4ubG9kSW5mb1tsb2RDb3JlXSwgdGhpcy5fcGF0Y2hDb3VudCwgb2JqZWN0QnVpbGRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2J1aWxkSW5mbzxUIGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3Q+KGxvZENvcmU6IGludCwgbG9kSW5mbzogUmVhZG9ubHk8UmVhZG9ubHk8TG9kSW5mbz4+LCBwYXRjaENvdW50OiBpbnQsIG9iamVjdEJ1aWxkZXI/OiBUQnVsZGVyPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4pOiBJTG9kQ29tYmluZURhdGE8VD4ge1xyXG5cclxuICAgICAgICBjb25zdCBncm91cHMgPSBuZXcgQXJyYXk8SVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4+KGNvbWJpbmVHcm91cExlbik7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgID0gbmV3IEFycmF5PElDb21iaW5lSXRlbVtdW11bXT4oTEVGVCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGwgPSAwIDsgbCA8IExFRlQgOyBsKyspIHtcclxuICAgICAgICBcclxuICAgICAgICAgICAgaXRlbXNbbF0gPSBuZXcgQXJyYXk8SUNvbWJpbmVJdGVtW11bXT4oUklHSFQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwIDsgciA8IFJJR0hUIDsgcisrKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGl0ZW1zW2xdW3JdID0gbmV3IEFycmF5PElDb21iaW5lSXRlbVtdPihUT1ApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMCA7IHQgPCBUT1AgOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpdGVtc1tsXVtyXVt0XSA9IG5ldyBBcnJheTxJQ29tYmluZUl0ZW0+KEJPVFRPTSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMCA7IGIgPCBCT1RUT00gOyBiKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gZ2V0TG9kSWQobG9kQ29yZSwgbCwgciwgdCwgYik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWFpbklkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ3JvdXBJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFuZ2xlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwgPT09IDAgJiYgciA9PT0gMCAmJiB0ID09PSAwICYmIGIgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAwLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA9PT0gMSAmJiByID09PSAwICYmIHQgPT09IDAgJiYgYiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAgID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsID09PSAwICYmIHIgPT09IDAgJiYgdCA9PT0gMSAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlICAgPSA5MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsID09PSAwICYmIHIgPT09IDEgJiYgdCA9PT0gMCAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlICAgPSAxODA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA9PT0gMCAmJiByID09PSAwICYmIHQgPT09IDAgJiYgYiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAgID0gMjcwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMCAmJiB0ID09PSAxICYmIGIgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAxLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA9PT0gMCAmJiByID09PSAxICYmIHQgPT09IDEgJiYgYiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAgID0gOTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA9PT0gMCAmJiByID09PSAxICYmIHQgPT09IDAgJiYgYiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAgID0gMTgwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMCAmJiB0ID09PSAwICYmIGIgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAxLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDI3MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDEgJiYgdCA9PT0gMCAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMSwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkID0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlICAgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDAgJiYgciA9PT0gMCAmJiB0ID09PSAxICYmIGIgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAxLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDkwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMCAmJiB0ID09PSAxICYmIGIgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAxLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA9PT0gMSAmJiByID09PSAxICYmIHQgPT09IDEgJiYgYiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAgID0gOTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA9PT0gMCAmJiByID09PSAxICYmIHQgPT09IDEgJiYgYiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAgID0gMTgwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMSAmJiB0ID09PSAwICYmIGIgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAxLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDI3MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDEgJiYgdCA9PT0gMSAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMSwgMSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkID0gNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlICAgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5cXCd0IGNvbWJpbmUgJHtsfSwke3J9LCR7dH0sJHtifWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tsXVtyXVt0XVtiXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZTogYW5nbGUgLyA5MCwgLy8gc2F2ZSBmb3IgdWludDhcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gbWFpbklkKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IGxvZEluZm8uaW5mb1tsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZDogSVBhdGNoTG9kQmFzZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlOiBsb2RDb3JlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IHIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSAgID0gbmV3IFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZShwYXRjaENvdW50ICogY29tSW5zdERhdGFTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdCA9IG9iamVjdEJ1aWxkZXIgPyBvYmplY3RCdWlsZGVyKGxvZCwgaW5mbywgZGF0YSwgcGF0Y2hDb3VudCkgOiBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cHNbZ3JvdXBJZF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4QmFzZUluZGV4OiBpbmZvLnN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleENvdW50OiBpbmZvLmNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBvYmplY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBncm91cHMsXHJcbiAgICAgICAgICAgIGl0ZW1zXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0KGxvZDogSVBhdGNoTG9kKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGFbbG9kLmNvcmVdO1xyXG4gICAgICAgIGNvbnN0IGdyb3VwSWQgPSBkYXRhLml0ZW1zW2xvZC5sZWZ0XVtsb2QucmlnaHRdW2xvZC50b3BdW2xvZC5ib3R0b21dLmdyb3VwSWQ7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuZ3JvdXBzW2dyb3VwSWRdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbmNyZW1lbnQobG9kOiBJUGF0Y2hMb2QsIHBhdGNoOiBJUGF0Y2gpOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZGF0YSAgID0gdGhpcy5kYXRhW2xvZC5jb3JlXTtcclxuICAgICAgICBjb25zdCBpdGVtICAgPSBkYXRhLml0ZW1zW2xvZC5sZWZ0XVtsb2QucmlnaHRdW2xvZC50b3BdW2xvZC5ib3R0b21dO1xyXG4gICAgICAgIGNvbnN0IHNpbmdsZSA9IGRhdGEuZ3JvdXBzW2l0ZW0uZ3JvdXBJZF07XHJcblxyXG4gICAgICAgIGNvbnN0IHByZXZJbmRleCA9IHNpbmdsZS5jb3VudDtcclxuICAgICAgICBjb25zdCBpbmRleCAgICAgPSBwcmV2SW5kZXggKiBjb21JbnN0RGF0YVNpemU7XHJcblxyXG4gICAgICAgIGlmIChzaW5nbGUuZGF0YVtpbmRleCArIDBdICE9PSBwYXRjaC54IHx8XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMV0gIT09IHBhdGNoLnogfHxcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAyXSAhPT0gaXRlbS5hbmdsZSkge1xyXG4gICAgICAgICAgICBzaW5nbGUuZGF0YVtpbmRleCArIDBdID0gcGF0Y2gueDtcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAxXSA9IHBhdGNoLno7XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMl0gPSBpdGVtLmFuZ2xlO1xyXG4gICAgICAgICAgICBzaW5nbGUuaGFzQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzaW5nbGUuY291bnQrKztcclxuICAgICAgICByZXR1cm4gc2luZ2xlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB6ZXJvQWxsKCkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsb2RDb3JlID0gMDsgbG9kQ29yZSA8IHRoaXMuZGF0YS5sZW5ndGg7IGxvZENvcmUrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21iaW5lR3JvdXBMZW47IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbmdsZSA9IHRoaXMuZGF0YVtsb2RDb3JlXS5ncm91cHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgc2luZ2xlLmNvdW50ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB7IGNvbWJpbmVHcm91cExlbiwgY29tSW5zdERhdGFTaXplLCBQYXRjaENvbWJpbmVJbnN0YW5jaW5nLCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGUgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9QYXRjaGVzQ29tYmluZUluc3RhbmNpbmcubWpzXCI7XHJcbmltcG9ydCB7IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcgfSBmcm9tIFwiLi9JVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nLm1qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRlcnJhaW5QYXRoY2VzQ29tYmluZUluc3RhbmNpbmcgZXh0ZW5kcyBQYXRjaENvbWJpbmVJbnN0YW5jaW5nPHBjeC5NZXNoSW5zdGFuY2U+IGltcGxlbWVudHMgSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZzxUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+IHtcclxuXHJcbiAgICBidWZmZXJUeXBlID0gVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlO1xyXG4gICAgaXRlbUJ1ZmZlclNpemUgPSA0O1xyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0IG1lc2hJbnN0YW5jZUNvdW50KCkgeyByZXR1cm4gdGhpcy5kYXRhLmxlbmd0aCAqIGNvbWJpbmVHcm91cExlbjsgfVxyXG5cclxuICAgIHB1YmxpYyBhcHBlbmRNZXNoSW5zdGFuY2VzKGFycjogcGN4Lk1lc2hJbnN0YW5jZVtdLCBvZmZzZXQ6IGludCA9IDApIHtcclxuXHJcbiAgICAgICAgbGV0IG1lc2hJbmRleCA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmRhdGEubGVuZ3RoOyBjKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tYmluZUdyb3VwTGVuOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMuZGF0YVtjXS5ncm91cHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNodW5rLm9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyclttZXNoSW5kZXgrKyArIG9mZnNldF0gPSBjaHVuay5vYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNoSW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJlZ2luKGNhc3RTaGFkb3c6IGJvb2xlYW4gPSBmYWxzZSwgcmVjZWl2ZVNoYWRvdzogYm9vbGVhbiA9IGZhbHNlKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbWJpbmVHcm91cExlbjsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRhdGFbY10uZ3JvdXBzW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmtPYmplY3QgPSBjaHVuay5vYmplY3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgY2h1bmsuY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgY2h1bmsuaGFzQ2hhbmdlcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaHVua09iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC52aXNpYmxlVGhpc0ZyYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QuY2FzdFNoYWRvdyA9IGNhc3RTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QucmVjZWl2ZVNoYWRvdyA9IHJlY2VpdmVTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVuZCgpIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmRhdGEubGVuZ3RoOyBjKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tYmluZUdyb3VwTGVuOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMuZGF0YVtjXS5ncm91cHNbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVua09iamVjdCA9IGNodW5rLm9iamVjdDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGNodW5rT2JqZWN0ICYmIGNodW5rLmNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0Lmluc3RhbmNpbmdDb3VudCA9IGNodW5rLmNvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsuaGFzQ2hhbmdlcyAmJiBjaHVua09iamVjdC5pbnN0YW5jaW5nRGF0YSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jaHVua09iamVjdC5pbnN0YW5jaW5nRGF0YS52ZXJ0ZXhCdWZmZXI/LnVubG9jaygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gY2h1bmsuY291bnQgKiBjb21JbnN0RGF0YVNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRleEJ1ZmZlciA9IGNodW5rT2JqZWN0Lmluc3RhbmNpbmdEYXRhLnZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUJ1ZmZlcih2ZXJ0ZXhCdWZmZXIsIGNodW5rLmRhdGEsIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZUJ1ZmZlcih2ZXJ0ZXhCdWZmZXI6IHBjeC5WZXJ0ZXhCdWZmZXIgfCBudWxsLCBkYXRhOiBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGUsIGxlbmd0aDogaW50KSB7XHJcblxyXG4gICAgICAgIGlmICh2ZXJ0ZXhCdWZmZXIpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGRldmljZSA9IHZlcnRleEJ1ZmZlci5kZXZpY2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGV2aWNlLmlzV2ViR0wyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnbCA9IChkZXZpY2UgYXMgcGN4LldlYmdsR3JhcGhpY3NEZXZpY2UpLmdsO1xyXG4gICAgICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHZlcnRleEJ1ZmZlci5pbXBsLmJ1ZmZlcklkKTtcclxuICAgICAgICAgICAgICAgIGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCBkYXRhLCAwLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRldmljZS5pc1dlYkdQVSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2dwdSAgID0gKGRldmljZSBhcyBhbnkpLndncHUgYXMgR1BVRGV2aWNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gdmVydGV4QnVmZmVyLmltcGwuYnVmZmVyIGFzIEdQVUJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgIHdncHUucXVldWUud3JpdGVCdWZmZXIoYnVmZmVyLCAwLCBkYXRhLCAwLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5zdXBwb3J0ZWQgZGV2aWNlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBJUGF0Y2ggfSBmcm9tIFwiLi9JUGF0Y2gubWpzXCI7XHJcbmltcG9ydCB7IElJbnN0YW5jaW5nT2JqZWN0LCBJUGF0Y2hlc0luc3RhbmNpbmcsIElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZywgVEJ1bGRlciwgVERlc3RydWN0b3IsIFRTZWxlY3RvciB9IGZyb20gXCIuL0lQYXRjaGVzSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IHsgQk9UVE9NLCBMRUZULCBMb2RJbmZvLCBSSUdIVCwgVE9QIH0gZnJvbSBcIi4vTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoTG9kQmFzZSB9IGZyb20gXCIuL0xvZE1hbmFnZXIubWpzXCI7XHJcbmltcG9ydCBCYXNlVGVycmFpbiBmcm9tIFwiLi9UZXJyYWluLm1qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluc3REYXRhU2l6ZSA9IDI7XHJcblxyXG5leHBvcnQgdHlwZSAgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlID0gVWludDE2QXJyYXk7XHJcbmV4cG9ydCBjb25zdCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGUgPSBVaW50MTZBcnJheTtcclxuXHJcbmV4cG9ydCBjbGFzcyBQYXRjaEluc3RhbmNpbmc8VCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0PiBpbXBsZW1lbnRzIElQYXRjaGVzSW5zdGFuY2luZzxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+IHtcclxuXHJcbiAgICBwcml2YXRlIF9wYXRjaENvdW50OiBpbnQ7XHJcblxyXG4gICAgcHVibGljIGRhdGE6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+W11bXVtdW11bXTtcclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hDb3VudCgpIHsgcmV0dXJuIHRoaXMuX3BhdGNoQ291bnQ7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgICB0aGlzLl9wYXRjaENvdW50ID0gMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGZvckVhY2goZm46IFRTZWxlY3RvcjxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+KSB7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmRhdGEubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgUklHSFQ7IHIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuZGF0YVtjXVtsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuKHNlZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95U2VnbWVudE9iamVjdHMoaW5kZXg6IGludCwgZGVzdHJ1Y3RvcjogVERlc3RydWN0b3I8VD4pIHtcclxuICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWdtZW50ID0gdGhpcy5kYXRhW2luZGV4XVtsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50Lm9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdHJ1Y3RvcihzZWdtZW50Lm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50Lm9iamVjdCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koZGVzdHJ1Y3RvcjogVERlc3RydWN0b3I8VD4pIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lTZWdtZW50T2JqZWN0cyhpLCBkZXN0cnVjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJ1aWxkRnJvbVRlcnJhaW4odGVycmFpbjogQmFzZVRlcnJhaW4sIG9iamVjdEJ1aWxkZXI/OiBUQnVsZGVyPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4pIHtcclxuXHJcbiAgICAgICAgdGhpcy5fcGF0Y2hDb3VudCA9IHRlcnJhaW4ubnVtUGF0Y2hlc1ggKiB0ZXJyYWluLm51bVBhdGNoZXNaO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBBcnJheSh0ZXJyYWluLmxvZEluZm8ubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kQ29yZSA9IDA7IGxvZENvcmUgPCB0aGlzLmRhdGEubGVuZ3RoOyBsb2RDb3JlKyspIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW2xvZENvcmVdID0gdGhpcy5fYnVpbGRJbmZvKGxvZENvcmUsIHRlcnJhaW4ubG9kSW5mb1tsb2RDb3JlXSwgdGhpcy5fcGF0Y2hDb3VudCwgb2JqZWN0QnVpbGRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2J1aWxkSW5mbzxUIGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3Q+KGxvZENvcmU6IGludCwgbG9kSW5mbzogUmVhZG9ubHk8UmVhZG9ubHk8TG9kSW5mbz4+LCBwYXRjaENvdW50OiBpbnQsIG9iamVjdEJ1aWxkZXI/OiBUQnVsZGVyPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4pOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPltdW11bXVtdIHtcclxuXHJcbiAgICAgICAgY29uc3QgYXJyOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPltdW11bXVtdID0gbmV3IEFycmF5KExFRlQpO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgbCA9IDAgOyBsIDwgTEVGVCA7IGwrKykge1xyXG4gICAgXHJcbiAgICAgICAgICAgIGFycltsXSA9IG5ldyBBcnJheShSSUdIVCk7XHJcbiAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgciA9IDAgOyByIDwgUklHSFQgOyByKyspIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgYXJyW2xdW3JdID0gbmV3IEFycmF5KFRPUCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwIDsgdCA8IFRPUCA7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGFycltsXVtyXVt0XSA9IG5ldyBBcnJheShCT1RUT00pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDAgOyBiIDwgQk9UVE9NIDsgYisrKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IGxvZEluZm8uaW5mb1tsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9kOiBJUGF0Y2hMb2RCYXNlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZTogbG9kQ29yZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSAgID0gbmV3IFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZShwYXRjaENvdW50ICogaW5zdERhdGFTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0ID0gb2JqZWN0QnVpbGRlciA/IG9iamVjdEJ1aWxkZXIobG9kLCBpbmZvLCBkYXRhLCBwYXRjaENvdW50KSA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJbbF1bcl1bdF1bYl0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhCYXNlSW5kZXg6IGluZm8uc3RhcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhDb3VudDogaW5mby5jb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogb2JqZWN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGFycjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0KGxvZDogSVBhdGNoTG9kQmFzZSk6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhW2xvZC5jb3JlXVtsb2QubGVmdF1bbG9kLnJpZ2h0XVtsb2QudG9wXVtsb2QuYm90dG9tXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGluY3JlbWVudChsb2Q6IElQYXRjaExvZEJhc2UsIHBhdGNoOiBJUGF0Y2gpOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc2luZ2xlICAgID0gdGhpcy5nZXQobG9kKTtcclxuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBzaW5nbGUuY291bnQ7XHJcbiAgICAgICAgY29uc3QgaW5kZXggICAgID0gcHJldkluZGV4ICogaW5zdERhdGFTaXplO1xyXG5cclxuICAgICAgICBpZiAoc2luZ2xlLmRhdGFbaW5kZXggKyAwXSAhPT0gcGF0Y2gubWluWCB8fFxyXG4gICAgICAgICAgICBzaW5nbGUuZGF0YVtpbmRleCArIDFdICE9PSBwYXRjaC5taW5aKSB7XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMF0gPSBwYXRjaC5taW5YO1xyXG4gICAgICAgICAgICBzaW5nbGUuZGF0YVtpbmRleCArIDFdID0gcGF0Y2gubWluWjtcclxuICAgICAgICAgICAgc2luZ2xlLmhhc0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2luZ2xlLmNvdW50Kys7XHJcbiAgICAgICAgcmV0dXJuIHNpbmdsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgemVyb0FsbCgpIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kQ29yZSA9IDA7IGxvZENvcmUgPCB0aGlzLmRhdGEubGVuZ3RoOyBsb2RDb3JlKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgUklHSFQ7IHIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpbmdsZSA9IHRoaXMuZGF0YVtsb2RDb3JlXVtsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZS5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBCT1RUT00sIExFRlQsIFJJR0hULCBUT1AgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9Mb2RJbmZvLm1qc1wiO1xyXG5pbXBvcnQgeyBpbnN0RGF0YVNpemUsIFBhdGNoSW5zdGFuY2luZywgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vUGF0Y2hlc0luc3RhbmNpbmcubWpzXCI7XHJcbmltcG9ydCB7IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcgfSBmcm9tIFwiLi9JVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nLm1qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRlcnJhaW5QYXRoY2VzSW5zdGFuY2luZyBleHRlbmRzIFBhdGNoSW5zdGFuY2luZzxwY3guTWVzaEluc3RhbmNlPiBpbXBsZW1lbnRzIElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmc8VEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcblxyXG4gICAgYnVmZmVyVHlwZSA9IFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZTtcclxuICAgIGl0ZW1CdWZmZXJTaXplID0gMjtcclxuICAgIFxyXG4gICAgcHVibGljIGdldCBtZXNoSW5zdGFuY2VDb3VudCgpIHsgcmV0dXJuIHRoaXMuZGF0YS5sZW5ndGggKiBMRUZUICogUklHSFQgKiBUT1AgKiBCT1RUT007IH1cclxuXHJcbiAgICBwdWJsaWMgYXBwZW5kTWVzaEluc3RhbmNlcyhhcnI6IHBjeC5NZXNoSW5zdGFuY2VbXSwgb2Zmc2V0OiBpbnQgPSAwKSB7XHJcblxyXG4gICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRhdGFbY11bbF1bcl1bdF1bYl07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rLm9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycltpKysgKyBvZmZzZXRdID0gY2h1bmsub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmVnaW4oY2FzdFNoYWRvdzogYm9vbGVhbiA9IGZhbHNlLCByZWNlaXZlU2hhZG93OiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRhdGFbY11bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua09iamVjdCA9IGNodW5rLm9iamVjdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5oYXNDaGFuZ2VzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0LnZpc2libGVUaGlzRnJhbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC5jYXN0U2hhZG93ID0gY2FzdFNoYWRvdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC5yZWNlaXZlU2hhZG93ID0gcmVjZWl2ZVNoYWRvdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW5kKCkge1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMuZGF0YVtjXVtsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rT2JqZWN0ID0gY2h1bmsub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmtPYmplY3QgJiYgY2h1bmsuY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QuaW5zdGFuY2luZ0NvdW50ID0gY2h1bmsuY291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay5oYXNDaGFuZ2VzICYmIGNodW5rT2JqZWN0Lmluc3RhbmNpbmdEYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NodW5rT2JqZWN0Lmluc3RhbmNpbmdEYXRhLnZlcnRleEJ1ZmZlcj8udW5sb2NrKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBjaHVuay5jb3VudCAqIGluc3REYXRhU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVydGV4QnVmZmVyID0gY2h1bmtPYmplY3QuaW5zdGFuY2luZ0RhdGEudmVydGV4QnVmZmVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQnVmZmVyKHZlcnRleEJ1ZmZlciwgY2h1bmsuZGF0YSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlQnVmZmVyKHZlcnRleEJ1ZmZlcjogcGN4LlZlcnRleEJ1ZmZlciB8IG51bGwsIGRhdGE6IFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZSwgbGVuZ3RoOiBpbnQpIHtcclxuXHJcbiAgICAgICAgaWYgKHZlcnRleEJ1ZmZlcikge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGV2aWNlID0gdmVydGV4QnVmZmVyLmRldmljZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZXZpY2UuaXNXZWJHTDIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsID0gKGRldmljZSBhcyBwY3guV2ViZ2xHcmFwaGljc0RldmljZSkuZ2w7XHJcbiAgICAgICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdmVydGV4QnVmZmVyLmltcGwuYnVmZmVySWQpO1xyXG4gICAgICAgICAgICAgICAgZ2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIGRhdGEsIDAsIGxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGV2aWNlLmlzV2ViR1BVKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3Z3B1ICAgPSAoZGV2aWNlIGFzIGFueSkud2dwdSBhcyBHUFVEZXZpY2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSB2ZXJ0ZXhCdWZmZXIuaW1wbC5idWZmZXIgYXMgR1BVQnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgd2dwdS5xdWV1ZS53cml0ZUJ1ZmZlcihidWZmZXIsIDAsIGRhdGEsIDAsIGxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbnN1cHBvcnRlZCBkZXZpY2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IElQYXRjaExvZCwgSVBhdGNoTG9kQmFzZSB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0xvZE1hbmFnZXIubWpzXCI7XHJcbmltcG9ydCB7IGNvb3Jkc1ZlcnRleFNpemUsIElSZWFkb25seUNvb3Jkc0J1ZmZlciB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0Nvb3Jkc0J1ZmZlci5tanNcIjtcclxuaW1wb3J0IFRlcnJhaW5QYXRjaGVzQmFzaWMsIHsgVGVycmFpblBhdGNoQnVmZmVyQmFzaWMgfSBmcm9tIFwiLi9UZXJyYWluUGF0Y2hlc0Jhc2ljLm1qc1wiO1xyXG5pbXBvcnQgeyBwYXRjaENvb3JkT2Zmc2V0UGFyYW1OYW1lLCB0ZXJyYWluSGVpZ2h0TWFwUGFyYW1OYW1lLCBnZXRUZXJyYWluU2hhZGVyQ2h1bmtzLCB2ZXJ0ZXhDb29yZEF0dHJOYW1lLCBwYXRjaExvZENvcmVQYXJhbU5hbWUsIHBhdGNoSW5zdENvb3JkT2Zmc2V0UGFyYW1OYW1lLCBnZXRUZXh0dXJlVHlwZSB9IGZyb20gXCIuL1RlcnJhaW5QYXRjaGVzU2hhZGVyQ2h1bmtzLm1qc1wiO1xyXG5pbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBJU2luZ2xlTG9kSW5mbyB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCB7IElab25lIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vSVpvbmUubWpzXCI7XHJcbmltcG9ydCB7IElSZWFkb25seUFic0hlaWdodE1hcCwgVEhlaWdodE1hcEZvcm1hdCB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0Fic0hlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IENvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwIGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0NvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgQmFzZVRlcnJhaW4gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vVGVycmFpbi5tanNcIjtcclxuaW1wb3J0IHsgQ3VzdG9tTWVzaCwgQ3VzdG9tTWVzaEluc3RhbmNlLCBJUHJpbWl0aXZlIH0gZnJvbSBcIi4uL0VuZ2luZUV4dGVuc2lvbnMvUmVuZGVyZXIubWpzXCI7XHJcbmltcG9ydCB7IGNoZWNrU3VwcG9ydFIzMkZUZXh0dXJlIH0gZnJvbSBcIi4uL1NoYXJlZC9VdGlscy5tanNcIjtcclxuaW1wb3J0IHsgSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZyB9IGZyb20gXCIuL0lUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcubWpzXCI7XHJcbmltcG9ydCB7IFRlcnJhaW5QYXRoY2VzQ29tYmluZUluc3RhbmNpbmcgfSBmcm9tIFwiLi9UZXJyYWluUGF0Y2hlc0NvbWJpbmVJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgeyBUZXJyYWluUGF0aGNlc0luc3RhbmNpbmcgfSBmcm9tIFwiLi9UZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElQYXRjaFByaW1pdGl2ZSB7XHJcbiAgICBbcGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZV06IFtudW1iZXIsIG51bWJlcl0gfCBGbG9hdDMyQXJyYXksXHJcbiAgICBbcGF0Y2hMb2RDb3JlUGFyYW1OYW1lXTogbnVtYmVyLFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGVpZ2h0TWFwRm9ybWF0KGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIGhlaWdodE1hcDogSVJlYWRvbmx5QWJzSGVpZ2h0TWFwKSB7XHJcbiAgICBcclxuICAgIGxldCBobUZvcm1hdDogVEhlaWdodE1hcEZvcm1hdCA9IGNoZWNrU3VwcG9ydFIzMkZUZXh0dXJlKGdyYXBoaWNzRGV2aWNlKSA/ICdyMzJmJyA6ICdyZ2JhJztcclxuXHJcbiAgICBpZiAoaGVpZ2h0TWFwIGluc3RhbmNlb2YgQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXApIHtcclxuICAgICAgICBobUZvcm1hdCA9IGhlaWdodE1hcC5jb21wcmVzc0FsZ29yaXRtID09PSAneDQnID8gJ3JnYmFYNCcgOiAncmdiYVgyJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaG1Gb3JtYXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIZWlnaHRNYXBDaHVua0J1ZmZlclR5cGUoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgZm9ybWF0OiBudW1iZXIpIHtcclxuXHJcbiAgICBpZiAoZm9ybWF0ID09PSBwYy5QSVhFTEZPUk1BVF9SMzJGKSB7XHJcbiAgICAgICAgcmV0dXJuIEZsb2F0MzJBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZm9ybWF0ID09PSBwYy5QSVhFTEZPUk1BVF9SRzE2VSkge1xyXG4gICAgICAgIHJldHVybiBVaW50MTZBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZm9ybWF0ID09PSBwYy5QSVhFTEZPUk1BVF9SR0JBOFUpIHtcclxuICAgICAgICByZXR1cm4gVWludDhBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGZvcm1hdCcpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXJyYWluUGF0Y2hlcyBleHRlbmRzIFRlcnJhaW5QYXRjaGVzQmFzaWM8VGVycmFpblBhdGNoQnVmZmVyQmFzaWMsIElQYXRjaFByaW1pdGl2ZT4ge1xyXG5cclxuICAgIHByaXZhdGUgX2hlaWdodE1hcDogcGN4LlRleHR1cmU7XHJcbiAgICBwcml2YXRlIF9oZWlnaHRNYXBMZXZlbHNUeXBlOiBGbG9hdDMyQXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQxNkFycmF5Q29uc3RydWN0b3IgfCBVaW50OEFycmF5Q29uc3RydWN0b3I7XHJcbiAgICBwcml2YXRlIF9zaGFyZWRJbmRleEJ1ZmZlcjogcGN4LkluZGV4QnVmZmVyO1xyXG4gICAgcHJpdmF0ZSBfc2hhcmVkVmVydGV4QnVmZmVyOiBwY3guVmVydGV4QnVmZmVyO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgaGVpZ2h0TWFwVGV4dHVyZSgpIHsgcmV0dXJuIHRoaXMuX2hlaWdodE1hcDsgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZVBhdGNoSGVpZ2h0c09uR1BVKGRhdGFDaHVua1g6IGludCwgZGF0YUNodW5rWjogaW50KSB7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IGEgYmF0Y2ggdXBkYXRlIG1heSBiZSByZXF1aXJlZC5cclxuICAgICAgICAvLyBUT0RPOiB0cmFuc2Zvcm0gaW4gaGVpZ2h0bWFwIGNsYXNzXHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGFDaHVua1NpemUgPSB0aGlzLnRlcnJhaW4uaGVpZ2h0TWFwLmRhdGFDaHVua1NpemU7XHJcbiAgICAgICAgY29uc3QgbGV2ZWwgID0gdGhpcy50ZXJyYWluLmhlaWdodE1hcC5nZXRDaHVua0luZGV4KGRhdGFDaHVua1gsIGRhdGFDaHVua1opO1xyXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMudGVycmFpbi5oZWlnaHRNYXAuZ2V0Q2h1bmtCdWZmZXIodGhpcy5faGVpZ2h0TWFwTGV2ZWxzVHlwZSwgZGF0YUNodW5rWCwgZGF0YUNodW5rWik7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UuaXNXZWJHTDIpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdsID0gKHRoaXMuX2FwcC5ncmFwaGljc0RldmljZSBhcyBwY3guV2ViZ2xHcmFwaGljc0RldmljZSkuZ2w7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVGb3JtYXQgPSB0aGlzLl9oZWlnaHRNYXAuaW1wbC5fZ2xGb3JtYXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVQaXhlbFQgPSB0aGlzLl9oZWlnaHRNYXAuaW1wbC5fZ2xQaXhlbFR5cGU7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVUYXJnZXQgPSB0aGlzLl9oZWlnaHRNYXAuaW1wbC5fZ2xUYXJnZXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVPYmplY3QgPSB0aGlzLl9oZWlnaHRNYXAuaW1wbC5fZ2xUZXh0dXJlO1xyXG5cclxuICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUodGV4dHVyZVRhcmdldCwgdGV4dHVyZU9iamVjdCk7XHJcbiAgICAgICAgICAgIGdsLnRleFN1YkltYWdlM0QoZ2wuVEVYVFVSRV8yRF9BUlJBWSwgMCwgMCwgMCwgbGV2ZWwsIGRhdGFDaHVua1NpemUsIGRhdGFDaHVua1NpemUsIDEsIHRleHR1cmVGb3JtYXQsIHRleHR1cmVQaXhlbFQsIGJ1ZmZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2FwcC5ncmFwaGljc0RldmljZS5pc1dlYkdQVSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgd2ViZ3B1ICA9ICh0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UgYXMgYW55KS53Z3B1IGFzIEdQVURldmljZTtcclxuICAgICAgICAgICAgY29uc3QgdGV4dHVyZSA9ICh0aGlzLl9oZWlnaHRNYXAuaW1wbC5ncHVUZXh0dXJlKSBhcyBHUFVUZXh0dXJlO1xyXG5cclxuICAgICAgICAgICAgd2ViZ3B1LnF1ZXVlLndyaXRlVGV4dHVyZShcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlOiB0ZXh0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogWzAsIDAsIGxldmVsXSxcclxuICAgICAgICAgICAgICAgICAgICBtaXBMZXZlbDogMFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ1ZmZlcixcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXNQZXJSb3c6IGRhdGFDaHVua1NpemUgKiA0LCAvLyBhbHdheXMgNCBmb3IgcmdiYSBmb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICByb3dzUGVySW1hZ2U6IGRhdGFDaHVua1NpemVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGRhdGFDaHVua1NpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBkYXRhQ2h1bmtTaXplXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZUhlaWdodE1hcCh6b25lOiBJWm9uZSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2ZvckVhY2goXHJcbiAgICAgICAgICAgIHpvbmUsXHJcbiAgICAgICAgICAgIHRoaXMudGVycmFpbi5oZWlnaHRNYXAuZGF0YUNodW5rU2l6ZSxcclxuICAgICAgICAgICAgdGhpcy50ZXJyYWluLmhlaWdodE1hcC5kYXRhTnVtQ2h1bmtzWCxcclxuICAgICAgICAgICAgdGhpcy50ZXJyYWluLmhlaWdodE1hcC5kYXRhTnVtQ2h1bmtzWixcclxuICAgICAgICAgICAgKHBhdGNoSW5kZXgsIHgsIHopID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVBhdGNoSGVpZ2h0c09uR1BVKHgsIHopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2NyZWF0ZVBhdGNoQnVmZmVyKHBhdGNoSW5kZXg6IGludCwgYmFzZUluZGV4OiBpbnQsIGJhc2VWZXJ0ZXg6IGludCwgY291bnQ6IGludCwgcGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50LCBtaW5YOiBpbnQsIG1pblo6IGludCwgc2l6ZTogaW50LCBsb2Q6IElQYXRjaExvZCkge1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaEJ1ZiA9IG5ldyBUZXJyYWluUGF0Y2hCdWZmZXJCYXNpYyhwYXRjaEluZGV4LCBwYXRjaFgsIHBhdGNoWiwgbWluWCwgbWluWiwgc2l6ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcGF0Y2hCdWYubG9kID0gbG9kO1xyXG4gICAgICAgIHBhdGNoQnVmLmluZGljZXNCYXNlSW5kZXggPSBiYXNlSW5kZXg7XHJcbiAgICAgICAgcGF0Y2hCdWYuaW5kaWNlc0Jhc2VWZXJ0ZXggPSBiYXNlVmVydGV4O1xyXG4gICAgICAgIHBhdGNoQnVmLmluZGljZXNDb3VudCA9IGNvdW50O1xyXG4gICAgICAgIHBhdGNoQnVmLmRlcGVuZGVuY2VzVXBkYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoQnVmLmhlaWdodHNVcGRhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHBhdGNoQnVmO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIF9idWlsZFZlcnRleEZvcm1hdChncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlLCB2ZXJ0ZXhCdWZmZXI6IElSZWFkb25seUNvb3Jkc0J1ZmZlcikge1xyXG5cclxuICAgICAgICBjb25zdCBjb29yZHNGb3JtYXQgPSAodmVydGV4QnVmZmVyLnBhdGNoVmVydGV4QnVmZmVyVHlwZWQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSA/IHBjLlRZUEVfVUlOVDggOiBwYy5UWVBFX1VJTlQxNjtcclxuICAgICAgICBjb25zdCB2ZXJ0ZXhEZXNjID0gW3tcclxuICAgICAgICAgICAgc2VtYW50aWM6IHBjLlNFTUFOVElDX1BPU0lUSU9OLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBjb29yZHNWZXJ0ZXhTaXplLFxyXG4gICAgICAgICAgICB0eXBlOiBjb29yZHNGb3JtYXQsXHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGFzSW50OiB0cnVlXHJcbiAgICAgICAgfV07XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgcGMuVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlLCB2ZXJ0ZXhEZXNjLCB2ZXJ0ZXhCdWZmZXIucGF0Y2hWZXJ0ZXhCdWZmZXJMZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfYnVpbGRJbnN0YW5jaW5nVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIGluc3RhbmNlcjogSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZzxhbnk+KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBpbnN0YW5jZXIuYnVmZmVyVHlwZSA9PT0gVWludDE2QXJyYXkgPyBwYy5UWVBFX1VJTlQxNiA6XHJcbiAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlci5idWZmZXJUeXBlID09PSBVaW50OEFycmF5ID8gIHBjLlRZUEVfVUlOVDggOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5UWVBFX0ZMT0FUMzI7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgcGMuVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlLCBbe1xyXG4gICAgICAgICAgICBzZW1hbnRpYzogcGMuU0VNQU5USUNfQVRUUjEwLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBpbnN0YW5jZXIuaXRlbUJ1ZmZlclNpemUsXHJcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGFzSW50OiB0cnVlXHJcbiAgICAgICAgfV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfYnVpbGRJbnN0YW5jaW5nVmVydGV4QnVmZmVyKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIGluc3RhbmNlcjogSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZzxhbnk+LCBkYXRhOiBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IHBjLlZlcnRleEJ1ZmZlcihncmFwaGljc0RldmljZSwgdGhpcy5fYnVpbGRJbnN0YW5jaW5nVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlLCBpbnN0YW5jZXIpLCBkYXRhLmxlbmd0aCAvIGluc3RhbmNlci5pdGVtQnVmZmVyU2l6ZSwge1xyXG4gICAgICAgICAgICB1c2FnZTogcGMuQlVGRkVSX0dQVURZTkFNSUMsXHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgIHN0b3JhZ2U6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfc2V0Q3VzdG9tUHJpbWl0aXZlQ2h1bmtzKHRlcnJhaW46IEJhc2VUZXJyYWluLCBtZXNoOiBwY3guTWVzaCAmIEN1c3RvbU1lc2g8SVBhdGNoUHJpbWl0aXZlPikge1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaGVzID0gbmV3IEFycmF5PElQcmltaXRpdmU8SVBhdGNoUHJpbWl0aXZlPj4odGVycmFpbi5udW1QYXRjaGVzWCAqIHRlcnJhaW4ubnVtUGF0Y2hlc1opO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBwYXRjaFogPSAwOyBwYXRjaFogPCB0ZXJyYWluLm51bVBhdGNoZXNaOyBwYXRjaForKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcGF0Y2hYID0gMDsgcGF0Y2hYIDwgdGVycmFpbi5udW1QYXRjaGVzWDsgcGF0Y2hYKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaEluZGV4ID0gcGF0Y2haICogdGVycmFpbi5udW1QYXRjaGVzWCArIHBhdGNoWDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoQnVmICAgPSB0aGlzLmJ1ZmZlckFycmF5W3BhdGNoSW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgICAgIHBhdGNoZXNbcGF0Y2hJbmRleF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUyxcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBiYXNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBbcGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZV06IFtwYXRjaEJ1Zi5taW5YLCBwYXRjaEJ1Zi5taW5aXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGNoTG9kQ29yZVBhcmFtTmFtZV06IHBhdGNoQnVmLmxvZC5jb3JlLFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1lc2gucHJpbWl0aXZlQ2h1bmtzID0gW3BhdGNoZXNdO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfY3JlYXRlQ3VzdG9tQmFnTWVzaChhcHA6IHBjeC5BcHBCYXNlLCBlbnRpdHk6IHBjeC5FbnRpdHksIG1hdGVyaWFsOiBwY3guTWF0ZXJpYWwsIHRlcnJhaW46IEJhc2VUZXJyYWluKTogcGN4Lk1lc2hJbnN0YW5jZSAmIEN1c3RvbU1lc2hJbnN0YW5jZTxJUGF0Y2hQcmltaXRpdmU+IHtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hNZXNoID0gbmV3IHBjLk1lc2goYXBwLmdyYXBoaWNzRGV2aWNlKSBhcyBwY3guTWVzaCAmIEN1c3RvbU1lc2g8SVBhdGNoUHJpbWl0aXZlPjtcclxuICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBwYXRjaE1lc2gucHJpbWl0aXZlWzBdO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2guYWFiYiA9IHRoaXMuYWFiYjtcclxuICAgICAgICBwYXRjaE1lc2guaW5kZXhCdWZmZXJbMF0gPSB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcjtcclxuICAgICAgICBwYXRjaE1lc2gudmVydGV4QnVmZmVyICAgPSB0aGlzLl9zaGFyZWRWZXJ0ZXhCdWZmZXI7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEN1c3RvbVByaW1pdGl2ZUNodW5rcyh0ZXJyYWluLCBwYXRjaE1lc2gpO1xyXG5cclxuICAgICAgICBwcmltaXRpdmUudHlwZSA9IHBjLlBSSU1JVElWRV9UUklBTkdMRVM7XHJcbiAgICAgICAgcHJpbWl0aXZlLmJhc2UgPSAwO1xyXG4gICAgICAgIHByaW1pdGl2ZS5jb3VudCA9IDA7XHJcbiAgICAgICAgcHJpbWl0aXZlLmluZGV4ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaE1lc2hJbnN0YW5jZSA9IG5ldyBwYy5NZXNoSW5zdGFuY2UocGF0Y2hNZXNoLCBtYXRlcmlhbCwgZW50aXR5KSBhcyBwY3guTWVzaEluc3RhbmNlICYgQ3VzdG9tTWVzaEluc3RhbmNlPElQYXRjaFByaW1pdGl2ZT47XHJcblxyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLmN1bGwgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UudmlzaWJsZVRoaXNGcmFtZSA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLmNhc3RTaGFkb3cgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5yZWNlaXZlU2hhZG93ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnNldFBhcmFtZXRlcihwYXRjaExvZENvcmVQYXJhbU5hbWUsIDAsIDB4ZmZmZmZmZmYpO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnNldFBhcmFtZXRlcihwYXRjaENvb3JkT2Zmc2V0UGFyYW1OYW1lLCBbMCwgMF0sIDB4ZmZmZmZmZmYpO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnNldEluc3RhbmNpbmcobnVsbCk7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2Uuc2V0Q3VzdG9tQWFiYih0aGlzLmFhYmIpO1xyXG5cclxuICAgICAgICByZXR1cm4gcGF0Y2hNZXNoSW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG92ZXJyaWRlIF9jcmVhdGVJbnN0YW5jaW5nTWVzaChhcHA6IHBjeC5BcHBCYXNlLCBlbnRpdHk6IHBjeC5FbnRpdHksIG1hdGVyaWFsOiBwY3guTWF0ZXJpYWwsIGxvZEluZm86IElQYXRjaExvZEJhc2UsIHByaW1pdGl2ZUluZm86IElTaW5nbGVMb2RJbmZvLCBpbnN0YW5jZXI6IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmc8YW55PiwgZGF0YTogVWludDE2QXJyYXkgfCBVaW50OEFycmF5KTogcGN4Lk1lc2hJbnN0YW5jZSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcGF0Y2hNZXNoID0gbmV3IHBjLk1lc2goYXBwLmdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBwYXRjaE1lc2gucHJpbWl0aXZlWzBdO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNpbmdCdWYgPSB0aGlzLl9idWlsZEluc3RhbmNpbmdWZXJ0ZXhCdWZmZXIoYXBwLmdyYXBoaWNzRGV2aWNlLCBpbnN0YW5jZXIsIGRhdGEpO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2guYWFiYiA9IHRoaXMuYWFiYjtcclxuICAgICAgICBwYXRjaE1lc2guaW5kZXhCdWZmZXJbMF0gPSB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcjtcclxuICAgICAgICBwYXRjaE1lc2gudmVydGV4QnVmZmVyICAgPSB0aGlzLl9zaGFyZWRWZXJ0ZXhCdWZmZXI7XHJcblxyXG4gICAgICAgIHByaW1pdGl2ZS50eXBlID0gcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICBwcmltaXRpdmUuYmFzZSA9IHByaW1pdGl2ZUluZm8uc3RhcnQ7XHJcbiAgICAgICAgcHJpbWl0aXZlLmNvdW50ID0gcHJpbWl0aXZlSW5mby5jb3VudDtcclxuICAgICAgICBwcmltaXRpdmUuaW5kZXhlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVzaEluc3RhbmNlID0gbmV3IHBjLk1lc2hJbnN0YW5jZShwYXRjaE1lc2gsIG1hdGVyaWFsLCBlbnRpdHkpO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5jdWxsID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnZpc2libGVUaGlzRnJhbWUgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRQYXJhbWV0ZXIocGF0Y2hMb2RDb3JlUGFyYW1OYW1lLCBsb2RJbmZvLmNvcmUsIDB4ZmZmZmZmZmYpO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnNldEluc3RhbmNpbmcoaW5zdGFuY2luZ0J1ZiwgZmFsc2UpO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnNldEN1c3RvbUFhYmIodGhpcy5hYWJiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhdGNoTWVzaEluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfY3JlYXRlUGF0Y2hNZXNoKHBhdGNoSW5kZXg6IG51bWJlciwgYXBwOiBwY3guQXBwQmFzZSwgZW50aXR5OiBwY3guRW50aXR5LCBtYXRlcmlhbDogcGN4Lk1hdGVyaWFsKTogcGN4Lk1lc2hJbnN0YW5jZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoQnVmICA9IHRoaXMuYnVmZmVyQXJyYXlbcGF0Y2hJbmRleF07XHJcbiAgICAgICAgY29uc3QgcGF0Y2hNZXNoID0gbmV3IHBjLk1lc2goYXBwLmdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBwYXRjaE1lc2gucHJpbWl0aXZlWzBdO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2guYWFiYiA9IHRoaXMuYWFiYjtcclxuICAgICAgICBwYXRjaE1lc2guaW5kZXhCdWZmZXJbMF0gPSB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcjtcclxuICAgICAgICBwYXRjaE1lc2gudmVydGV4QnVmZmVyICAgPSB0aGlzLl9zaGFyZWRWZXJ0ZXhCdWZmZXI7XHJcblxyXG4gICAgICAgIHByaW1pdGl2ZS50eXBlID0gcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICBwcmltaXRpdmUuYmFzZSA9IDA7XHJcbiAgICAgICAgcHJpbWl0aXZlLmNvdW50ID0gMDtcclxuICAgICAgICBwcmltaXRpdmUuaW5kZXhlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVzaEluc3RhbmNlID0gbmV3IHBjLk1lc2hJbnN0YW5jZShwYXRjaE1lc2gsIG1hdGVyaWFsLCBlbnRpdHkpO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5jdWxsID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnZpc2libGVUaGlzRnJhbWUgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRQYXJhbWV0ZXIocGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSwgW3BhdGNoQnVmLm1pblgsIHBhdGNoQnVmLm1pblpdLCAweGZmZmZmZmZmKTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRJbnN0YW5jaW5nKG51bGwpO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnNldEN1c3RvbUFhYmIodGhpcy5hYWJiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhdGNoTWVzaEluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2Rlc3Ryb3lNZXNoKG1lc2hJbnN0YW5jZTogcGN4Lk1lc2hJbnN0YW5jZSkge1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBkb250IGRlc3Ryb3kgc2hhcmVkIGluZGV4IGFuZCB2ZXJ0ZXggYnVmZmVyc1xyXG4gICAgICAgIGlmIChtZXNoSW5zdGFuY2UubWVzaCkge1xyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UubWVzaC5pbmRleEJ1ZmZlciA9IFtudWxsXSBhcyB1bmtub3duIGFzIHBjeC5JbmRleEJ1ZmZlcltdO1xyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UubWVzaC52ZXJ0ZXhCdWZmZXIgPSBudWxsIGFzIHVua25vd24gYXMgcGN4LlZlcnRleEJ1ZmZlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1lc2hJbnN0YW5jZS5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIGlmIChtZXNoSW5zdGFuY2UubWVzaCkge1xyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UubWVzaC5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobWVzaEluc3RhbmNlLmluc3RhbmNpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBpZiAobWVzaEluc3RhbmNlLmluc3RhbmNpbmdEYXRhLmRlc3Ryb3kpIHsgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgbWVzaEluc3RhbmNlLmluc3RhbmNpbmdEYXRhLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLmluc3RhbmNpbmdEYXRhLnZlcnRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX2Rlc3Ryb3lJbnN0YW5jaW5nTWVzaChtZXNoOiBwY3guTWVzaEluc3RhbmNlKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fZGVzdHJveU1lc2gobWVzaCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG92ZXJyaWRlIF9kZXN0cm95UGF0Y2hNZXNoKHBhdGNoSW5kZXg6IG51bWJlcik6IHZvaWQge1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaE1lc2hJbnN0YW5jZSA9IHRoaXMubWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF07XHJcblxyXG4gICAgICAgIGlmIChwYXRjaE1lc2hJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZXN0cm95TWVzaChwYXRjaE1lc2hJbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfZGVzdHJveUN1c3RvbUJhZ01lc2gobWVzaDogcGN4Lk1lc2hJbnN0YW5jZSAmIEN1c3RvbU1lc2hJbnN0YW5jZSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lNZXNoKG1lc2gpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZUluZGV4QnVmZmVyKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UpIHtcclxuICAgICAgICB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZEluZGV4QnVmZmVyID0gbmV3IHBjLkluZGV4QnVmZmVyKFxyXG4gICAgICAgICAgICBncmFwaGljc0RldmljZSxcclxuICAgICAgICAgICAgcGMuSU5ERVhGT1JNQVRfVUlOVDMyLFxyXG4gICAgICAgICAgICB0aGlzLnRlcnJhaW4ucGF0Y2hJbmRpY2VzLmxlbmd0aCxcclxuICAgICAgICAgICAgcGMuQlVGRkVSX1NUQVRJQyxcclxuICAgICAgICAgICAgdGhpcy50ZXJyYWluLnBhdGNoSW5kaWNlcyxcclxuICAgICAgICAgICAgeyBzdG9yYWdlOiBmYWxzZSB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVWZXJ0ZXhCdWZmZXIoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkge1xyXG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMuX2J1aWxkVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlLCB0aGlzLnRlcnJhaW4ucGF0Y2hWZXJ0aWNlcyk7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyID0gbmV3IHBjLlZlcnRleEJ1ZmZlcihncmFwaGljc0RldmljZSwgZm9ybWF0LCBmb3JtYXQudmVydGV4Q291bnQsIHtcclxuICAgICAgICAgICAgdXNhZ2U6IHBjLkJVRkZFUl9TVEFUSUMsXHJcbiAgICAgICAgICAgIHN0b3JhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnRlcnJhaW4ucGF0Y2hWZXJ0aWNlcy5wYXRjaFZlcnRleEJ1ZmZlckRhdGEsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEhlaWdodE1hcFRleHR1cmUoYXBwOiBwY3guQXBwQmFzZSkge1xyXG5cclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXA/LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgY29uc3QgaGVpZ2h0Rm9ybWF0ICA9IGdldEhlaWdodE1hcEZvcm1hdChhcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMudGVycmFpbi5oZWlnaHRNYXApO1xyXG4gICAgICAgIGNvbnN0IGZvcm1hdCAgICAgICAgPSBnZXRUZXh0dXJlVHlwZShoZWlnaHRGb3JtYXQpO1xyXG4gICAgICAgIGNvbnN0IGJ1ZkZvcm1hdCAgICAgPSBnZXRIZWlnaHRNYXBDaHVua0J1ZmZlclR5cGUoYXBwLmdyYXBoaWNzRGV2aWNlLCBmb3JtYXQpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFDaHVua1NpemUgPSB0aGlzLnRlcnJhaW4uaGVpZ2h0TWFwLmRhdGFDaHVua1NpemU7XHJcbiAgICAgICAgY29uc3QgY2h1bmtzICAgICAgICA9IHRoaXMudGVycmFpbi5oZWlnaHRNYXAuZ2V0Q2h1bmtzQnVmZmVycyhidWZGb3JtYXQpO1xyXG5cclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXBMZXZlbHNUeXBlID0gYnVmRm9ybWF0O1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcCA9IG5ldyBwYy5UZXh0dXJlKGFwcC5ncmFwaGljc0RldmljZSwge1xyXG4gICAgICAgICAgICB3aWR0aDogZGF0YUNodW5rU2l6ZSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBkYXRhQ2h1bmtTaXplLFxyXG4gICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCxcclxuICAgICAgICAgICAgbWlwbWFwczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1pbkZpbHRlcjogcGMuRklMVEVSX05FQVJFU1QsXHJcbiAgICAgICAgICAgIG1hZ0ZpbHRlcjogcGMuRklMVEVSX05FQVJFU1QsXHJcbiAgICAgICAgICAgIGFkZHJlc3NVOiBwYy5BRERSRVNTX0NMQU1QX1RPX0VER0UsXHJcbiAgICAgICAgICAgIGFkZHJlc3NWOiBwYy5BRERSRVNTX0NMQU1QX1RPX0VER0UsXHJcbiAgICAgICAgICAgIGFkZHJlc3NXOiBwYy5BRERSRVNTX0NMQU1QX1RPX0VER0UsXHJcbiAgICAgICAgICAgIGZsaXBZOiBhcHAuZ3JhcGhpY3NEZXZpY2UuaXNXZWJHUFUsXHJcbiAgICAgICAgICAgIGFycmF5TGVuZ3RoOiBjaHVua3MubGVuZ3RoLFxyXG4gICAgICAgICAgICBsZXZlbHM6IFtjaHVua3NdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHVwZGF0ZUluZGV4QnVmZmVyKCkge1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVJbmRleEJ1ZmZlcih0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3J3YXJkUmVuZGVyZXIgfHwgdGhpcy5pbnN0YW5jaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWVzaGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMubWVzaEluc3RhbmNlQXJyYXkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ubWVzaC5pbmRleEJ1ZmZlclswXSA9IHRoaXMuX3NoYXJlZEluZGV4QnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlTWF0ZXJpYWwoKTogcGN4LlN0YW5kYXJkTWF0ZXJpYWwge1xyXG5cclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBwYy5TdGFuZGFyZE1hdGVyaWFsKCk7XHJcbiAgICAgICAgICAgICAgbWF0ZXJpYWwubmFtZSA9ICdUZXJyYWluTWF0ZXJpYWwnO1xyXG5cclxuICAgICAgICBtYXRlcmlhbC5zZXRBdHRyaWJ1dGUocGF0Y2hJbnN0Q29vcmRPZmZzZXRQYXJhbU5hbWUsIHBjLlNFTUFOVElDX0FUVFIxMCk7XHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHZlcnRleENvb3JkQXR0ck5hbWUsIHBjLlNFTUFOVElDX1BPU0lUSU9OKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2JpbmREZXBlbmRlbmNpZXNUb01hdGVyaWFsKG1hdGVyaWFsOiBwY3guU3RhbmRhcmRNYXRlcmlhbCkge1xyXG5cclxuICAgICAgICBtYXRlcmlhbC5zZXRBdHRyaWJ1dGUocGF0Y2hJbnN0Q29vcmRPZmZzZXRQYXJhbU5hbWUsIHBjLlNFTUFOVElDX0FUVFIxMCk7XHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHZlcnRleENvb3JkQXR0ck5hbWUsIHBjLlNFTUFOVElDX1BPU0lUSU9OKTtcclxuXHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHBhdGNoTG9kQ29yZVBhcmFtTmFtZSwgMCk7XHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHBhdGNoQ29vcmRPZmZzZXRQYXJhbU5hbWUsIFswLCAwXSk7XHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHRlcnJhaW5IZWlnaHRNYXBQYXJhbU5hbWUsIHRoaXMuX2hlaWdodE1hcCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IGdldEhlaWdodE1hcEZvcm1hdCh0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMudGVycmFpbi5oZWlnaHRNYXApO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNpbmcgPSB0aGlzLmluc3RhbmNpbmcgaW5zdGFuY2VvZiBUZXJyYWluUGF0aGNlc0NvbWJpbmVJbnN0YW5jaW5nID8gJ2NvbWJpbmUnIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jaW5nIGluc3RhbmNlb2YgVGVycmFpblBhdGhjZXNJbnN0YW5jaW5nID8gJ3NpbXBsZScgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgY2h1bmtzU3RvcmUgPSBnZXRUZXJyYWluU2hhZGVyQ2h1bmtzKHtcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMudGVycmFpbi53aWR0aCxcclxuICAgICAgICAgICAgZGVwdGg6IHRoaXMudGVycmFpbi5kZXB0aCxcclxuICAgICAgICAgICAgcGF0Y2hTaXplOiB0aGlzLnRlcnJhaW4ucGF0Y2hTaXplLFxyXG4gICAgICAgICAgICBoZWlnaHRNYXBDaHVua1NpemU6IHRoaXMudGVycmFpbi5oZWlnaHRNYXAuZGF0YUNodW5rU2l6ZSwgXHJcbiAgICAgICAgICAgIGluc3RhbmNpbmc6IGluc3RhbmNpbmcsXHJcbiAgICAgICAgICAgIGhlaWdodE1hcEZvcm1hdDogZm9ybWF0LFxyXG4gICAgICAgICAgICBlbmdpbmVWZXJzaW9uOiBgdiR7cGMudmVyc2lvblswXX1gIGFzIHVua25vd24gYXMgYW55LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNodW5rTmFtZXMgPSBPYmplY3Qua2V5cyhjaHVua3NTdG9yZSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGNodW5rTmFtZSBvZiBjaHVua05hbWVzKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgbWF0ZXJpYWwuY2h1bmtzW2NodW5rTmFtZV0gPSBjaHVua3NTdG9yZVtjaHVua05hbWVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIG1hdGVyaWFsLmNodW5rcy5BUElWZXJzaW9uID0gcGMuQ0hVTktBUElfMV83MDtcclxuICAgICAgICBtYXRlcmlhbC51cGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgc2V0SW5zdGFuY2luZyh2YWx1ZTogSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZzxhbnk+IHwgdW5kZWZpbmVkLCB1cGRhdGVNZXNoZXM6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzLmluc3RhbmNpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3VwZXIuc2V0SW5zdGFuY2luZyh2YWx1ZSwgZmFsc2UpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWF0ZXJpYWwpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2JpbmREZXBlbmRlbmNpZXNUb01hdGVyaWFsKHRoaXMuX21hdGVyaWFsKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh1cGRhdGVNZXNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWVzaGVzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHNldE1hdGVyaWFsKG1hdGVyaWFsOiBwY3guU3RhbmRhcmRNYXRlcmlhbCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2JpbmREZXBlbmRlbmNpZXNUb01hdGVyaWFsKG1hdGVyaWFsKTtcclxuICAgICAgICBzdXBlci5zZXRNYXRlcmlhbChtYXRlcmlhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHVwZGF0ZUhlaWdodHMoem9uZTogSVpvbmUpIHtcclxuICAgICAgICBzdXBlci51cGRhdGVIZWlnaHRzKHpvbmUpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUhlaWdodE1hcCh6b25lKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdChhcHA6IHBjeC5BcHBCYXNlLCBlbnRpdHk6IHBjeC5FbnRpdHksIG1hdGVyaWFsOiBwY3guU3RhbmRhcmRNYXRlcmlhbCkge1xyXG4gICAgICAgIHRoaXMuX2luaXRIZWlnaHRNYXBUZXh0dXJlKGFwcCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlSW5kZXhCdWZmZXIoYXBwLmdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVWZXJ0ZXhCdWZmZXIoYXBwLmdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICBzdXBlci5pbml0KGFwcCwgZW50aXR5LCBtYXRlcmlhbCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBjYWxjTmV4dFBvd2VyT2ZUd28sIHJhbmRvbUZsb2F0UmFuZ2UgfSBmcm9tIFwiLi4vU2hhcmVkL1V0aWxzLm1qc1wiO1xyXG5pbXBvcnQgeyBpbnQsIGZsb2F0IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IEJhc2VUZXJyYWluIGZyb20gXCIuL1RlcnJhaW4ubWpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWlkcG9pbnREaXNwVGVycmFpbiBleHRlbmRzIEJhc2VUZXJyYWluIHtcclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlTWlkcG9pbnREaXNwbGFjZW1lbnQocm91Z2huZXNzOiBmbG9hdCk6IHZvaWQge1xyXG5cclxuICAgICAgICBpZiAocm91Z2huZXNzIDwgMC4wKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwicm91Z2huZXNzIG11c3QgYmUgcG9zaXRpdmVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jcmVhdGVNaWRwb2ludERpc3BsYWNlbWVudEYzMihyb3VnaG5lc3MpO1xyXG4gICAgICAgIHRoaXMubm9ybWFsaXplSGVpZ2h0TWFwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY3JlYXRlTWlkcG9pbnREaXNwbGFjZW1lbnRGMzIocm91Z2huZXNzOiBmbG9hdCk6IHZvaWQge1xyXG5cclxuICAgICAgICBsZXQgcmVjdFNpemUgID0gY2FsY05leHRQb3dlck9mVHdvKHRoaXMud2lkdGgpO1xyXG4gICAgICAgIGxldCBjdXJIZWlnaHQgPSByZWN0U2l6ZSAvIDIuMDtcclxuXHJcbiAgICAgICAgY29uc3QgaGVpZ2h0UmVkdWNlID0gTWF0aC5wb3coMi4wLCAtcm91Z2huZXNzKTtcclxuICAgIFxyXG4gICAgICAgIHdoaWxlIChyZWN0U2l6ZSA+IDApIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RpYW1vbmRTdGVwKHJlY3RTaXplLCBjdXJIZWlnaHQpO1xyXG4gICAgICAgICAgICB0aGlzLl9zcXVhcmVTdGVwKHJlY3RTaXplLCBjdXJIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgcmVjdFNpemUgPSAocmVjdFNpemUgLyAyKSB8IDA7XHJcbiAgICAgICAgICAgIGN1ckhlaWdodCAqPSBoZWlnaHRSZWR1Y2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2RpYW1vbmRTdGVwKHJlY3RTaXplOiBpbnQsIGN1ckhlaWdodDogZmxvYXQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY29uc3QgSGFsZlJlY3RTaXplID0gTWF0aC5mbG9vcihyZWN0U2l6ZSAvIDIpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuZGVwdGg7IHkgKz0gcmVjdFNpemUpIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCArPSByZWN0U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgbmV4dFggPSAoeCArIHJlY3RTaXplKSAlIHRoaXMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV4dFkgPSAoeSArIHJlY3RTaXplKSAlIHRoaXMuZGVwdGg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0WCA8IHgpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0WCA9IHRoaXMud2lkdGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFkgPCB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFkgPSB0aGlzLmRlcHRoIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdG9wTGVmdCAgICAgPSB0aGlzLmhlaWdodE1hcC5nZXQoeCwgeSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b3BSaWdodCAgICA9IHRoaXMuaGVpZ2h0TWFwLmdldChuZXh0WCwgeSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib3R0b21MZWZ0ICA9IHRoaXMuaGVpZ2h0TWFwLmdldCh4LCBuZXh0WSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IHRoaXMuaGVpZ2h0TWFwLmdldChuZXh0WCwgbmV4dFkpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaWRYID0gKHggKyBIYWxmUmVjdFNpemUpICUgdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pZFkgPSAoeSArIEhhbGZSZWN0U2l6ZSkgJSB0aGlzLmRlcHRoO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByYW5kVmFsdWUgPSByYW5kb21GbG9hdFJhbmdlKGN1ckhlaWdodCwgLWN1ckhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaWRQb2ludCA9ICh0b3BMZWZ0ICsgdG9wUmlnaHQgKyBib3R0b21MZWZ0ICsgYm90dG9tUmlnaHQpIC8gNC4wO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhlaWdodChtaWRYLCBtaWRZLCBtaWRQb2ludCArIHJhbmRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc3F1YXJlU3RlcChyZWN0U2l6ZTogaW50LCBjdXJIZWlnaHQ6IGZsb2F0KTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGhhbGZSZWN0U2l6ZSA9IChyZWN0U2l6ZSAvIDIpIHwgMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmRlcHRoOyB5ICs9IHJlY3RTaXplKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHggKz0gcmVjdFNpemUpIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IG5leHRYID0gKHggKyByZWN0U2l6ZSkgJSB0aGlzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5leHRZID0gKHkgKyByZWN0U2l6ZSkgJSB0aGlzLmRlcHRoO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFggPCB4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFggPSB0aGlzLndpZHRoIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRZIDwgeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRZID0gdGhpcy5kZXB0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pZFggPSAoeCArIGhhbGZSZWN0U2l6ZSkgJSB0aGlzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWlkWSA9ICh5ICsgaGFsZlJlY3RTaXplKSAlIHRoaXMuZGVwdGg7XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldk1pZFggPSAoeCAtIGhhbGZSZWN0U2l6ZSArIHRoaXMud2lkdGgpICUgdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZNaWRZID0gKHkgLSBoYWxmUmVjdFNpemUgKyB0aGlzLmRlcHRoKSAlIHRoaXMuZGVwdGg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1clRvcExlZnQgID0gdGhpcy5oZWlnaHRNYXAuZ2V0KHgsIHkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VyVG9wUmlnaHQgPSB0aGlzLmhlaWdodE1hcC5nZXQobmV4dFgsIHkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VyQ2VudGVyICAgPSB0aGlzLmhlaWdodE1hcC5nZXQobWlkWCwgbWlkWSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2WUNlbnRlciA9IHRoaXMuaGVpZ2h0TWFwLmdldChtaWRYLCBwcmV2TWlkWSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJCb3RMZWZ0ICA9IHRoaXMuaGVpZ2h0TWFwLmdldCh4LCBuZXh0WSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2WENlbnRlciA9IHRoaXMuaGVpZ2h0TWFwLmdldChwcmV2TWlkWCwgbWlkWSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1ckxlZnRNaWQgPSAoY3VyVG9wTGVmdCArIGN1ckNlbnRlciArIGN1ckJvdExlZnQgKyBwcmV2WENlbnRlcikgLyA0LjAgKyByYW5kb21GbG9hdFJhbmdlKC1jdXJIZWlnaHQsIGN1ckhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJUb3BNaWQgID0gKGN1clRvcExlZnQgKyBjdXJDZW50ZXIgKyBjdXJUb3BSaWdodCArIHByZXZZQ2VudGVyKSAvIDQuMCArIHJhbmRvbUZsb2F0UmFuZ2UoLWN1ckhlaWdodCwgY3VySGVpZ2h0KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIZWlnaHQobWlkWCwgeSwgY3VyVG9wTWlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KHgsIG1pZFksIGN1ckxlZnRNaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFRlcnJhaW5SYXljYXN0UmVzdWx0IHtcclxuXHJcbiAgICBwdWJsaWMgdmVydGV4SW5kZXggPSAwO1xyXG4gICAgcHVibGljIGRpc3RhbmNlICAgID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgIHB1YmxpYyBsb2NhbE5vcm1hbCA9IG5ldyBwYy5WZWMzKDAsIDEsIDApO1xyXG4gICAgcHVibGljIG5vcm1hbCAgICAgID0gbmV3IHBjLlZlYzMoMCwgMSwgMCk7XHJcbiAgICBwdWJsaWMgbG9jYWxQb2ludCAgPSBuZXcgcGMuVmVjMyhOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcclxuICAgIHB1YmxpYyBwb2ludCAgICAgICA9IG5ldyBwYy5WZWMzKE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpO1xyXG5cclxuICAgIHB1YmxpYyBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLnZlcnRleEluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICB0aGlzLmxvY2FsTm9ybWFsLnNldCgwLCAxLCAwKTtcclxuICAgICAgICB0aGlzLm5vcm1hbC5zZXQoMCwgMSwgMCk7XHJcbiAgICAgICAgdGhpcy5sb2NhbFBvaW50LnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcclxuICAgICAgICB0aGlzLnBvaW50LnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGVycmFpblJheWNhc3RSZXN1bHQ7IiwiaW1wb3J0IHsgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgSUZydXN0dW0sIElHcmlkUGF0Y2hSZW5kZXJQcmVwYXJlciB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0dlb21pcEdyaWRSZW5kZXJQcmVwYXJlci5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoTG9kIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vTG9kTWFuYWdlci5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoUHJpbWl0aXZlIH0gZnJvbSBcIi4vVGVycmFpblBhdGNoZXMubWpzXCI7XHJcbmltcG9ydCBUZXJyYWluUGF0Y2hlc0Jhc2ljLCB7IFRlcnJhaW5QYXRjaEJ1ZmZlckJhc2ljIH0gZnJvbSBcIi4vVGVycmFpblBhdGNoZXNCYXNpYy5tanNcIjtcclxuaW1wb3J0IHsgcGF0Y2hMb2RDb3JlUGFyYW1OYW1lIH0gZnJvbSBcIi4vVGVycmFpblBhdGNoZXNTaGFkZXJDaHVua3MubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZW5kZXJPcHRpb25zIHtcclxuICAgIHdpcmVmcmFtZT86IGJvb2xlYW4sXHJcbiAgICBjYXN0U2hhZG93PzogYm9vbGVhbixcclxuICAgIHJlY2VpdmVTaGFkb3c/OiBib29sZWFuLFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXJyYWluUmVuZGVyUHJlcGFyZXIgaW1wbGVtZW50cyBJR3JpZFBhdGNoUmVuZGVyUHJlcGFyZXIge1xyXG5cclxuICAgIHByaXZhdGUgX3dpcmVmcmFtZTogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX2Nhc3RTaGFkb3c6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9yZWNlaXZlU2hhZG93OiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBfaGFzVXBkYXRlZEhlaWdodHM6IGJvb2xlYW47XHJcblxyXG4gICAgcHVibGljIGdldCB3aXJlZnJhbWUoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl93aXJlZnJhbWU7IH1cclxuICAgIHB1YmxpYyBzZXQgd2lyZWZyYW1lKHY6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl93aXJlZnJhbWUgPSB2O1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgY2FzdFNoYWRvdygpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMuX2Nhc3RTaGFkb3c7IH1cclxuICAgIHB1YmxpYyBzZXQgY2FzdFNoYWRvdyh2OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fY2FzdFNoYWRvdyA9IHY7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCByZWNlaXZlU2hhZG93KCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fcmVjZWl2ZVNoYWRvdzsgfVxyXG4gICAgcHVibGljIHNldCByZWNlaXZlU2hhZG93KHY6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9yZWNlaXZlU2hhZG93ID0gdjtcclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkb25seSBwYXRjaGVzU3RvcmU6IFRlcnJhaW5QYXRjaGVzQmFzaWM8VGVycmFpblBhdGNoQnVmZmVyQmFzaWMsIElQYXRjaFByaW1pdGl2ZT47XHJcblxyXG4gICAgY29uc3RydWN0b3IocGF0Y2hlc1N0b3JlOiBUZXJyYWluUGF0Y2hlc0Jhc2ljPFRlcnJhaW5QYXRjaEJ1ZmZlckJhc2ljLCBJUGF0Y2hQcmltaXRpdmU+LCBvcHRpb25zOiBJUmVuZGVyT3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMucGF0Y2hlc1N0b3JlID0gcGF0Y2hlc1N0b3JlO1xyXG4gICAgICAgIHRoaXMuX3dpcmVmcmFtZSA9IG9wdGlvbnMud2lyZWZyYW1lID8/IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2Nhc3RTaGFkb3cgPSBvcHRpb25zLmNhc3RTaGFkb3cgPz8gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcmVjZWl2ZVNoYWRvdyA9IG9wdGlvbnMucmVjZWl2ZVNoYWRvdyA/PyBmYWxzZTtcclxuICAgICAgICB0aGlzLl9oYXNVcGRhdGVkSGVpZ2h0cyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdXBkYXRlTWVzaGVzKCkge1xyXG5cclxuICAgICAgICBjb25zdCBjdXN0b21NZXNoSW5zdGFuY2UgPSB0aGlzLnBhdGNoZXNTdG9yZS5jdXN0b21NZXNoSW5zdGFuY2U7XHJcbiAgICAgICAgaWYgKGN1c3RvbU1lc2hJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoKGN1c3RvbU1lc2hJbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IG1lc2hJbnN0YW5jZSBvZiB0aGlzLnBhdGNoZXNTdG9yZS5tZXNoSW5zdGFuY2VBcnJheSkge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoKG1lc2hJbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBhdGNoZXNTdG9yZS5pbnN0YW5jaW5nPy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoKGl0ZW0ub2JqZWN0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZU1lc2gobWVzaEluc3RhbmNlPzogcGN4Lk1lc2hJbnN0YW5jZSB8IG51bGwpIHtcclxuICAgICAgICBpZiAobWVzaEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tZXNoLnByaW1pdGl2ZVswXS50eXBlID0gdGhpcy5fd2lyZWZyYW1lID8gcGMuUFJJTUlUSVZFX0xJTkVTIDogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLmNhc3RTaGFkb3cgPSB0aGlzLl9jYXN0U2hhZG93O1xyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IHRoaXMuX3JlY2VpdmVTaGFkb3c7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgcHJlcGFyZVBhdGNoKHZpc2libGU6IGJvb2xlYW4sIGJhc2VJbmRleDogaW50LCBiYXNlVmVydGV4OiBpbnQsIGNvdW50OiBpbnQsIHBhdGNoWDogaW50LCBwYXRjaFo6IGludCwgbWluWDogaW50LCBtaW5aOiBpbnQsIHNpemU6IGludCwgbG9kSW5mbzogUmVhZG9ubHk8SVBhdGNoTG9kPikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRlcnJhaW4gICAgPSB0aGlzLnBhdGNoZXNTdG9yZS50ZXJyYWluO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoSW5kZXggPSBwYXRjaFogKiB0ZXJyYWluLm51bVBhdGNoZXNYICsgcGF0Y2hYO1xyXG4gICAgICAgIGNvbnN0IGJ1ZmZlciAgICAgPSB0aGlzLnBhdGNoZXNTdG9yZS5idWZmZXJBcnJheVtwYXRjaEluZGV4XTtcclxuICAgICAgICBjb25zdCBjdXJySGFzaCAgID0gYmFzZUluZGV4IC8gY291bnQ7XHJcblxyXG4gICAgICAgIGJ1ZmZlci5oYXNoICAgICAgICAgICAgICA9IGN1cnJIYXNoO1xyXG4gICAgICAgIGJ1ZmZlci52aXNpYmxlICAgICAgICAgICA9IHZpc2libGU7XHJcbiAgICAgICAgYnVmZmVyLmluZGljZXNCYXNlSW5kZXggID0gYmFzZUluZGV4O1xyXG4gICAgICAgIGJ1ZmZlci5pbmRpY2VzQmFzZVZlcnRleCA9IGJhc2VWZXJ0ZXg7XHJcbiAgICAgICAgYnVmZmVyLmluZGljZXNDb3VudCAgICAgID0gY291bnQ7XHJcbiAgICAgICAgYnVmZmVyLmxvZCAgICAgICAgICAgICAgID0gbG9kSW5mbztcclxuXHJcbiAgICAgICAgaWYgKGJ1ZmZlci5oZWlnaHRzVXBkYXRlZCkge1xyXG4gICAgICAgICAgICBidWZmZXIuaGVpZ2h0c1VwZGF0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgYnVmZmVyLmhlaWdodHNVcGRhdGVkVGhpc0ZyYW1lID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgdGhpcy5faGFzVXBkYXRlZEhlaWdodHMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGF0Y2hlc1N0b3JlLmN1c3RvbUZvcndhcmRSZW5kZXJlcikge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gdGhpcy5wYXRjaGVzU3RvcmUuY3VzdG9tTWVzaEluc3RhbmNlIS5tZXNoLnByaW1pdGl2ZUNodW5rc1swXVtwYXRjaEluZGV4XTtcclxuXHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5lbmFibGVkID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgcHJpbWl0aXZlLmJhc2UgICAgPSBiYXNlSW5kZXg7XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5jb3VudCAgID0gY291bnQ7XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS50eXBlICAgID0gdGhpcy5fd2lyZWZyYW1lID8gcGMuUFJJTUlUSVZFX0xJTkVTIDogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuXHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5hdHRyaWJ1dGVzW3BhdGNoTG9kQ29yZVBhcmFtTmFtZV0gPSBsb2RJbmZvLmNvcmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMucGF0Y2hlc1N0b3JlLmluc3RhbmNpbmcpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2aXNpYmxlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdCA9IHRoaXMucGF0Y2hlc1N0b3JlLmluc3RhbmNpbmcuaW5jcmVtZW50KGxvZEluZm8sIGJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChpbnN0LmNvdW50ID09PSAxICYmIGluc3Qub2JqZWN0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc2hJbnN0YW5jZSA9IGluc3Qub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IG1lc2hJbnN0YW5jZS5tZXNoLnByaW1pdGl2ZVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaEluc3RhbmNlLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS52aXNpYmxlVGhpc0ZyYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyA9IHRoaXMuX2Nhc3RTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaEluc3RhbmNlLnJlY2VpdmVTaGFkb3cgPSB0aGlzLl9yZWNlaXZlU2hhZG93O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcmltaXRpdmUudHlwZSA9IHRoaXMuX3dpcmVmcmFtZSA/IHBjLlBSSU1JVElWRV9MSU5FUyA6IHBjLlBSSU1JVElWRV9UUklBTkdMRVM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2UgPSB0aGlzLnBhdGNoZXNTdG9yZS5nZXRPckNyZWF0ZVBhdGNoTWVzaChwYXRjaEluZGV4KTtcclxuICAgICAgICAgICAgY29uc3QgbWVzaCA9IG1lc2hJbnN0YW5jZS5tZXNoO1xyXG4gICAgICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBtZXNoLnByaW1pdGl2ZVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS52aXNpYmxlVGhpc0ZyYW1lID0gdmlzaWJsZTtcclxuXHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyAgICA9IHRoaXMuX2Nhc3RTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IHRoaXMuX3JlY2VpdmVTaGFkb3c7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5iYXNlICA9IGJhc2VJbmRleDtcclxuICAgICAgICAgICAgcHJpbWl0aXZlLmNvdW50ID0gY291bnQ7XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS50eXBlICA9IHRoaXMuX3dpcmVmcmFtZSA/IHBjLlBSSU1JVElWRV9MSU5FUyA6IHBjLlBSSU1JVElWRV9UUklBTkdMRVM7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2Uuc2V0UGFyYW1ldGVyKHBhdGNoTG9kQ29yZVBhcmFtTmFtZSwgbG9kSW5mby5jb3JlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShmcnVzdHVtPzogSUZydXN0dW0pIHtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogSW4gdGhlb3J5IHdlIGNhbiBjb250cm9sIHRoZSBxdWFsaXR5IG9mIHRoZSBtb2RlbCBmb3Igc2hhZG93c1xyXG4gICAgICAgIC8vIFRPRE86IEFkZCBzdXBwb3J0IGZvciBPY2NsdXNpb24gY3VsbGluZ1xyXG5cclxuICAgICAgICB0aGlzLl9oYXNVcGRhdGVkSGVpZ2h0cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYXRjaGVzU3RvcmUuY3VzdG9tRm9yd2FyZFJlbmRlcmVyKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21NZXNoSW5zdGFuY2UgPSB0aGlzLnBhdGNoZXNTdG9yZS5jdXN0b21NZXNoSW5zdGFuY2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VzdG9tTWVzaEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21NZXNoSW5zdGFuY2UudmlzaWJsZSAgICAgICA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21NZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyAgICA9IHRoaXMuX2Nhc3RTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21NZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IHRoaXMuX3JlY2VpdmVTaGFkb3c7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IGN1c3RvbU1lc2hJbnN0YW5jZS5tZXNoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gbWVzaC5wcmltaXRpdmVbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgcHJpbWl0aXZlLnR5cGUgID0gdGhpcy5fd2lyZWZyYW1lID8gcGMuUFJJTUlUSVZFX0xJTkVTIDogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnBhdGNoZXNTdG9yZS5pbnN0YW5jaW5nPy5iZWdpbihmYWxzZSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLnBhdGNoZXNTdG9yZS5zdGFydFVwZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMucGF0Y2hlc1N0b3JlLnRlcnJhaW4uZWFjaFBhdGNoZXModGhpcywgZnJ1c3R1bSk7XHJcbiAgICAgICAgdGhpcy5wYXRjaGVzU3RvcmUuZW5kVXBkYXRlKHRoaXMuX2hhc1VwZGF0ZWRIZWlnaHRzKTtcclxuXHJcbiAgICAgICAgdGhpcy5wYXRjaGVzU3RvcmUuaW5zdGFuY2luZz8uZW5kKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgaW50ZXJmYWNlIElCcnVzaFNldHRpbmdzIHtcclxuICAgIHJlYWRvbmx5IGFjdGl2ZTogbnVtYmVyLFxyXG4gICAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyLFxyXG4gICAgcmVhZG9ubHkgb3BhY2l0eTogbnVtYmVyLFxyXG4gICAgcmVhZG9ubHkgdGV4dHVyZXM6IHBjeC5Bc3NldFtdO1xyXG59IiwiZXhwb3J0IGNvbnN0IHZlcnRleFNoYWRlciA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIGF0dHJpYnV0ZSB2ZWMzIGFQb3NpdGlvbjtcclxuICAgIGF0dHJpYnV0ZSB2ZWMyIGFVdjA7XHJcblxyXG4gICAgdW5pZm9ybSBtYXQ0IG1hdHJpeF9tb2RlbDtcclxuICAgIHVuaWZvcm0gbWF0NCBtYXRyaXhfdmlld1Byb2plY3Rpb247XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZVdjA7XHJcblxyXG4gICAgdm9pZCBtYWluKHZvaWQpXHJcbiAgICB7XHJcbiAgICAgICAgdlV2MCA9IGFVdjA7XHJcbiAgICAgICAgZ2xfUG9zaXRpb24gPSBtYXRyaXhfdmlld1Byb2plY3Rpb24gKiBtYXRyaXhfbW9kZWwgKiB2ZWM0KGFQb3NpdGlvbiwgMS4wKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBmYWN0b3JNZXRob2QgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2MDtcclxuXHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1SGVpZ2h0TWFwO1xyXG4gICAgdW5pZm9ybSBmbG9hdCB1QnJ1c2hPcGFjaXR5O1xyXG4gICAgdW5pZm9ybSB2ZWM0IHVCcnVzaE1hc2s7XHJcblxyXG4gICAgZmxvYXQgZ2V0RmFjdG9yKCkge1xyXG4gICAgICAgIHZlYzQgaGVpZ2h0TWFwID0gdGV4dHVyZTJEKHVIZWlnaHRNYXAsIHZVdjApO1xyXG4gICAgICAgIGZsb2F0IGhlaWdodCAgID0gKGhlaWdodE1hcC5yICsgaGVpZ2h0TWFwLmcgKyBoZWlnaHRNYXAuYikgLyAzLjAgLyBoZWlnaHRNYXAuYTtcclxuICAgICAgICBmbG9hdCBmYWN0b3IgICA9IGhlaWdodCAqIHVCcnVzaE9wYWNpdHk7XHJcbiAgICAgICAgcmV0dXJuIGZhY3RvcjtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBmcmFnbWVudFNoYWRlciA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICR7ZmFjdG9yTWV0aG9kfVxyXG5cclxuICAgIHZvaWQgbWFpbih2b2lkKVxyXG4gICAge1xyXG4gICAgICAgIGZsb2F0IGZhY3RvciA9IGdldEZhY3RvcigpO1xyXG4gICAgICAgIHZlYzQgY29sb3IgPSB2ZWM0KHVCcnVzaE1hc2sgKiBmYWN0b3IpO1xyXG5cclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSBjb2xvcjtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBmcmFnbWVudEludmVydFNoYWRlciA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICR7ZmFjdG9yTWV0aG9kfVxyXG5cclxuICAgIHZvaWQgbWFpbih2b2lkKVxyXG4gICAge1xyXG4gICAgICAgIGZsb2F0IGxldmVscyA9IDQuMDtcclxuICAgICAgICBmbG9hdCBmYWN0b3IgPSBnZXRGYWN0b3IoKTtcclxuICAgICAgICB2ZWM0IGNvbG9yICAgPSB2ZWM0KGZhY3Rvcik7XHJcblxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLnIgPiAwLjApIHsgY29sb3IuciA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLmcgPiAwLjApIHsgY29sb3IuZyA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLmIgPiAwLjApIHsgY29sb3IuYiA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLmEgPiAwLjApIHsgY29sb3IuYSA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG5cclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSBjb2xvciAvIGxldmVscztcclxuICAgIH1cclxuYDsiLCJpbXBvcnQgeyBJQnJ1c2hTZXR0aW5ncyB9IGZyb20gXCIuL0JydXNoLm1qc1wiO1xyXG5pbXBvcnQgeyBmcmFnbWVudEludmVydFNoYWRlciwgZnJhZ21lbnRTaGFkZXIsIHZlcnRleFNoYWRlciB9IGZyb20gXCIuL0NvbG9yUGFpbnRlclNoYWRlcnMubWpzXCI7XHJcbmltcG9ydCB7IHNldFByZWNpc2lvbiB9IGZyb20gXCIuLi9TaGFyZWQvVXRpbHMubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGFpbnRlckNhbWVyYUZhciA9IDEwO1xyXG5leHBvcnQgY29uc3QgcGFpbnRlckxheWVyTmFtZSA9ICdUZXJyYWluRWRpdG9yJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbG9yUGFpbnRlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBfcGFpbnRpbmc6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9wYWludGVyTWFzazogRmxvYXQzMkFycmF5O1xyXG4gICAgcHJpdmF0ZSBfYnJ1c2hTZXR0aW5nczogSUJydXNoU2V0dGluZ3M7XHJcblxyXG4gICAgcHJpdmF0ZSBfYXBwOiBwY3guQXBwQmFzZTtcclxuICAgIHByaXZhdGUgX2J1ZmZlcjogcGN4LlRleHR1cmU7XHJcbiAgICBwcml2YXRlIF9wYWludGVyUmVuZGVyVGFyZ2V0OiBwY3guUmVuZGVyVGFyZ2V0O1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRlckNhbWVyYUVudGl0eTogcGN4LkVudGl0eTtcclxuXHJcbiAgICBwcml2YXRlIF9wYWludGVyU2hhZGVyOiBwY3guU2hhZGVyO1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRlck1hdGVyaWFsOiBwY3guTWF0ZXJpYWw7XHJcbiAgICBwcml2YXRlIF9wYWludGVyRW50aXR5OiBwY3guRW50aXR5O1xyXG5cclxuICAgIHByaXZhdGUgX3BhaW50ZXJJbnZlcnRTaGFkZXI6IHBjeC5TaGFkZXI7XHJcbiAgICBwcml2YXRlIF9wYWludGVySW52ZXJ0TWF0ZXJpYWw6IHBjeC5NYXRlcmlhbDtcclxuICAgIHByaXZhdGUgX3BhaW50ZXJJbnZlcnRFbnRpdHk6IHBjeC5FbnRpdHk7XHJcblxyXG4gICAgcHVibGljIGdldCBwYWludGluZygpICAgeyByZXR1cm4gdGhpcy5fcGFpbnRpbmc7IH1cclxuICAgIHB1YmxpYyBnZXQgY2FtZXJhRmFyKCkgIHsgcmV0dXJuIHBhaW50ZXJDYW1lcmFGYXI7IH1cclxuICAgIHB1YmxpYyBnZXQgYmFja2dyb3VuZCgpIHsgcmV0dXJuIHRoaXMuX2J1ZmZlcjsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogcGN4LkFwcEJhc2UsIGJ1ZmZlcjogcGN4LlRleHR1cmUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wYWludGVyTWFzayA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XHJcbiAgICAgICAgdGhpcy5fYnVmZmVyID0gYnVmZmVyO1xyXG4gICAgICAgIHRoaXMuX2FwcCA9IGFwcDtcclxuXHJcbiAgICAgICAgdGhpcy5faW5pdENhbWVyYSgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRTaGFkZXJzKCk7XHJcbiAgICAgICAgdGhpcy5faW5pdE1hdGVyaWFscygpO1xyXG4gICAgICAgIHRoaXMuX2luaXRFbnRpdGllcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRDYW1lcmEoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhaW50ZXJMYXllciA9IHRoaXMuX2FwcC5zY2VuZS5sYXllcnMuZ2V0TGF5ZXJCeU5hbWUocGFpbnRlckxheWVyTmFtZSkhO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVyUmVuZGVyVGFyZ2V0ID0gbmV3IHBjLlJlbmRlclRhcmdldCh7XHJcbiAgICAgICAgICAgIGNvbG9yQnVmZmVyOiB0aGlzLl9idWZmZXIsXHJcbiAgICAgICAgICAgIGZsaXBZOiB0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UuaXNXZWJHUFUsXHJcbiAgICAgICAgICAgIGRlcHRoOiBmYWxzZSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eSA9IG5ldyBwYy5FbnRpdHkoJ1RlcnJhaW5QYWludGVyQ2FtZXJhJyk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5zZXRMb2NhbFBvc2l0aW9uKDAsIDAsIHBhaW50ZXJDYW1lcmFGYXIpO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkubG9va0F0KDAsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuYWRkQ29tcG9uZW50KCdjYW1lcmEnLCB7XHJcbiAgICAgICAgICAgIHByb2plY3Rpb246IHBjLlBST0pFQ1RJT05fT1JUSE9HUkFQSElDLFxyXG4gICAgICAgICAgICBjbGVhckNvbG9yQnVmZmVyOiBmYWxzZSxcclxuICAgICAgICAgICAgY2xlYXJEZXB0aEJ1ZmZlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIHByaW9yaXR5OiAtMSxcclxuICAgICAgICAgICAgbGF5ZXJzOiBbcGFpbnRlckxheWVyLmlkXSxcclxuICAgICAgICAgICAgbmVhckNsaXA6IDAuMSxcclxuICAgICAgICAgICAgZmFyQ2xpcDogcGFpbnRlckNhbWVyYUZhciAqIDIsXHJcbiAgICAgICAgICAgIHJlbmRlclRhcmdldDogdGhpcy5fcGFpbnRlclJlbmRlclRhcmdldCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fYXBwLnJvb3QuYWRkQ2hpbGQodGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuY2FtZXJhIS5mcnVzdHVtQ3VsbGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuY2FtZXJhIS5vcnRob0hlaWdodCA9IHBhaW50ZXJDYW1lcmFGYXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEVudGl0aWVzKCkge1xyXG5cclxuICAgICAgICBjb25zdCBwYWludGVyTGF5ZXIgPSB0aGlzLl9hcHAuc2NlbmUubGF5ZXJzLmdldExheWVyQnlOYW1lKHBhaW50ZXJMYXllck5hbWUpITtcclxuXHJcbiAgICAgICAgcGFpbnRlckxheWVyLnRyYW5zcGFyZW50U29ydE1vZGUgPSBwYy5TT1JUTU9ERV9NQU5VQUw7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkgID0gbmV3IHBjLkVudGl0eSgnVGVycmFpbkJydXNoUGFpbnRlcicpO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkuYWRkQ29tcG9uZW50KCdyZW5kZXInLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdwbGFuZScsXHJcbiAgICAgICAgICAgIGxheWVyczogW3BhaW50ZXJMYXllci5pZF0sXHJcbiAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLl9wYWludGVyTWF0ZXJpYWwsXHJcbiAgICAgICAgICAgIGNhc3RTaGFkb3dzOiBmYWxzZSxcclxuICAgICAgICAgICAgY2FzdFNoYWRvd3NMaWdodG1hcDogZmFsc2UsXHJcbiAgICAgICAgICAgIHJlY2VpdmVTaGFkb3dzOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5ICA9IG5ldyBwYy5FbnRpdHkoJ1RlcnJhaW5CcnVzaFBhaW50ZXJJbnZlcnQnKTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5LmFkZENvbXBvbmVudCgncmVuZGVyJywge1xyXG4gICAgICAgICAgICB0eXBlOiAncGxhbmUnLFxyXG4gICAgICAgICAgICBsYXllcnM6IFtwYWludGVyTGF5ZXIuaWRdLFxyXG4gICAgICAgICAgICBtYXRlcmlhbDogdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLFxyXG4gICAgICAgICAgICBjYXN0U2hhZG93czogZmFsc2UsXHJcbiAgICAgICAgICAgIGNhc3RTaGFkb3dzTGlnaHRtYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICByZWNlaXZlU2hhZG93czogZmFsc2UsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkucmVuZGVyIS5tZXNoSW5zdGFuY2VzWzBdLmRyYXdPcmRlciA9IDE7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5yZW5kZXIhLm1lc2hJbnN0YW5jZXNbMF0uZHJhd09yZGVyID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5fYXBwLnJvb3QuYWRkQ2hpbGQodGhpcy5fcGFpbnRlckludmVydEVudGl0eSk7XHJcbiAgICAgICAgdGhpcy5fYXBwLnJvb3QuYWRkQ2hpbGQodGhpcy5fcGFpbnRlckVudGl0eSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkuc2V0TG9jYWxFdWxlckFuZ2xlcyg5MCwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5zZXRMb2NhbEV1bGVyQW5nbGVzKDkwLCAwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdFNoYWRlcnMoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZlcnRleCA9IHZlcnRleFNoYWRlcjtcclxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IHNldFByZWNpc2lvbih0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UsIGZyYWdtZW50U2hhZGVyKTtcclxuICAgICAgICBjb25zdCBmcmFnbWVudEludmVydCA9IHNldFByZWNpc2lvbih0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UsIGZyYWdtZW50SW52ZXJ0U2hhZGVyKTtcclxuXHJcbiAgICAgICAgaWYgKHBjLlNoYWRlck1hdGVyaWFsKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwgPSBuZXcgcGMuU2hhZGVyTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICAgICAgdW5pcXVlTmFtZTogJ1BhaW50ZXJGcmFnbWVudFNoYWRlcicsXHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhDb2RlOiB2ZXJ0ZXgsXHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudENvZGU6IGZyYWdtZW50LFxyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGFQb3NpdGlvbjogcGMuU0VNQU5USUNfUE9TSVRJT04sXHJcbiAgICAgICAgICAgICAgICAgICAgYVV2MDogcGMuU0VNQU5USUNfVEVYQ09PUkQwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsID0gbmV3IHBjLlNoYWRlck1hdGVyaWFsKHtcclxuICAgICAgICAgICAgICAgIHVuaXF1ZU5hbWU6ICdQYWludGVySW52ZXJ0RnJhZ21lbnRTaGFkZXInLFxyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgdmVydGV4Q29kZTogdmVydGV4LFxyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRDb2RlOiBmcmFnbWVudEludmVydCxcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhUG9zaXRpb246IHBjLlNFTUFOVElDX1BPU0lUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIGFVdjA6IHBjLlNFTUFOVElDX1RFWENPT1JEMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJTaGFkZXIgPSBwYy5jcmVhdGVTaGFkZXJGcm9tQ29kZSh0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UsIHZlcnRleCwgZnJhZ21lbnQsICdQYWludGVyRnJhZ21lbnRTaGFkZXInLCB7XHJcbiAgICAgICAgICAgIGFQb3NpdGlvbjogcGMuU0VNQU5USUNfUE9TSVRJT04sXHJcbiAgICAgICAgICAgIGFVdjA6IHBjLlNFTUFOVElDX1RFWENPT1JEMFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0U2hhZGVyID0gcGMuY3JlYXRlU2hhZGVyRnJvbUNvZGUodGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlLCB2ZXJ0ZXgsIGZyYWdtZW50SW52ZXJ0LCAnUGFpbnRlckludmVydEZyYWdtZW50U2hhZGVyJywge1xyXG4gICAgICAgICAgICBhUG9zaXRpb246IHBjLlNFTUFOVElDX1BPU0lUSU9OLFxyXG4gICAgICAgICAgICBhVXYwOiBwYy5TRU1BTlRJQ19URVhDT09SRDBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0TWF0ZXJpYWxzKCkge1xyXG5cclxuICAgICAgICBpZiAoIXBjLlNoYWRlck1hdGVyaWFsKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwgPSBuZXcgcGMuTWF0ZXJpYWwoKTtcclxuICAgICAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsID0gbmV3IHBjLk1hdGVyaWFsKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvKiBAdHMtaWdub3JlICovXHJcbiAgICAgICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbC5zaGFkZXIgPSB0aGlzLl9wYWludGVyU2hhZGVyO1xyXG4gICAgICAgICAgICAvKiBAdHMtaWdub3JlICovXHJcbiAgICAgICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC5zaGFkZXIgPSB0aGlzLl9wYWludGVySW52ZXJ0U2hhZGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsLm5hbWUgPSAnQnJ1c2hQYWludGVyTWF0ZXJpYWwnO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbC5ibGVuZFR5cGUgPSBwYy5CTEVORF9BRERJVElWRTtcclxuICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwudXBkYXRlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC5uYW1lID0gJ0JydXNoUGFpbnRlckludmVydE1hdGVyaWFsJztcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwuYmxlbmRUeXBlID0gcGMuQkxFTkRfU1VCVFJBQ1RJVkU7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZVJ1bnRpbWVTZXR0aW5ncyhkdDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxPcGFjaXR5ID0gdGhpcy5fYnJ1c2hTZXR0aW5ncy5vcGFjaXR5O1xyXG4gICAgICAgIGNvbnN0IG9wYWNpdHkgPSBvcmlnaW5hbE9wYWNpdHk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsLnNldFBhcmFtZXRlcigndUJydXNoT3BhY2l0eScsIG9wYWNpdHkpO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VCcnVzaE9wYWNpdHknLCBvcGFjaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVQb3NpdGlvbkFuZFNjYWxlKHg6IG51bWJlciwgeTogbnVtYmVyLCBzY2FsZVdpZHRoOiBudW1iZXIsIHNjYWxlSGVpZ2h0OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgY29uc3QgZmFyICAgID0gdGhpcy5jYW1lcmFGYXIgKiAyO1xyXG4gICAgICAgIGNvbnN0IHJhdGlvbiA9IHRoaXMuYmFja2dyb3VuZC53aWR0aCAvIHRoaXMuYmFja2dyb3VuZC5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHggPSB4ICogZmFyICogcmF0aW9uIC0gdGhpcy5jYW1lcmFGYXIgKiByYXRpb247XHJcbiAgICAgICAgeSA9IHkgKiBmYXIgLSB0aGlzLmNhbWVyYUZhcjtcclxuXHJcbiAgICAgICAgc2NhbGVXaWR0aCAgPSBzY2FsZVdpZHRoICAqIHRoaXMuYmFja2dyb3VuZC53aWR0aCAgLyBmYXIgLyAyLjU7XHJcbiAgICAgICAgc2NhbGVIZWlnaHQgPSBzY2FsZUhlaWdodCAqIHRoaXMuYmFja2dyb3VuZC5oZWlnaHQgLyBmYXIgLyAyLjU7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldFNjYWxlKHNjYWxlV2lkdGgsIHNjYWxlSGVpZ2h0KTtcclxuICAgICAgICB0aGlzLl9zZXRQb3NpdGlvbih4LCB5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRQYWludChkdDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlciwgc2NhbGVXaWR0aDogbnVtYmVyLCBzY2FsZUhlaWdodDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVJ1bnRpbWVTZXR0aW5ncyhkdCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlUG9zaXRpb25BbmRTY2FsZSh4LCB5LCBzY2FsZVdpZHRoLCBzY2FsZUhlaWdodCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5LmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5lbmFibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RvcFBhaW50KCkge1xyXG4gICAgICAgIHRoaXMuX3BhaW50aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc2V0U2NhbGUoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9wYWludGVyRW50aXR5LnNldExvY2FsU2NhbGUoeCwgMSwgeSk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5zZXRMb2NhbFNjYWxlKHgsIDEsIHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NldFBvc2l0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5zZXRMb2NhbFBvc2l0aW9uKHgsIHksIDApO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkuc2V0TG9jYWxQb3NpdGlvbih4LCB5LCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlU2V0dGluZ3MoYnJ1c2hTZXR0aW5nczogSUJydXNoU2V0dGluZ3MsIGFjdGl2ZUxheWVyOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hc2suZmlsbCgwKTtcclxuXHJcbiAgICAgICAgaWYgKGFjdGl2ZUxheWVyID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVyTWFza1thY3RpdmVMYXllciAtIDFdID0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJydXNoVGV4dHVyZSA9IGJydXNoU2V0dGluZ3MudGV4dHVyZXNbYnJ1c2hTZXR0aW5ncy5hY3RpdmVdLnJlc291cmNlIGFzIHBjeC5UZXh0dXJlO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1QnJ1c2hNYXNrJywgdGhpcy5fcGFpbnRlck1hc2spO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VIZWlnaHRNYXAnLCBicnVzaFRleHR1cmUpO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1QnJ1c2hNYXNrJywgdGhpcy5fcGFpbnRlck1hc2spO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VIZWlnaHRNYXAnLCBicnVzaFRleHR1cmUpO1xyXG5cclxuICAgICAgICB0aGlzLl9icnVzaFNldHRpbmdzID0gYnJ1c2hTZXR0aW5ncztcclxuICAgIH1cclxufSIsImV4cG9ydCBmdW5jdGlvbiBpc051bWVyaWModmFsdWU6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIC9eLT9cXGQrJC8udGVzdCh2YWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXBUaXRsZUVudW08VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+Pihzb21lRW51bTogVCkge1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG5cclxuICAgIGZvciAobGV0IHZhbHVlIGluIHNvbWVFbnVtKSB7XHJcblxyXG4gICAgICAgIGlmICghc29tZUVudW0uaGFzT3duUHJvcGVydHkodmFsdWUpIHx8XHJcbiAgICAgICAgICAgIGlzTnVtZXJpYyh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBlbnVtRW50cnk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XHJcbiAgICAgICAgZW51bUVudHJ5W3ZhbHVlXSA9IHNvbWVFbnVtW3ZhbHVlXTtcclxuICAgICAgICByZXN1bHQucHVzaChlbnVtRW50cnkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFwRW51bTxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KHNvbWVFbnVtOiBUKSB7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gW107XHJcblxyXG4gICAgZm9yIChsZXQgdmFsdWUgaW4gc29tZUVudW0pIHtcclxuXHJcbiAgICAgICAgaWYgKCFzb21lRW51bS5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBlbnVtRW50cnk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XHJcbiAgICAgICAgZW51bUVudHJ5W3ZhbHVlXSA9IHNvbWVFbnVtW3ZhbHVlXTtcclxuICAgICAgICByZXN1bHQucHVzaChlbnVtRW50cnkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59IiwiaW1wb3J0IHsgbWFwRW51bSB9IGZyb20gXCIuLi9TaGFyZWQvRW51bUNvbnZlcnRlci5tanNcIlxyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5TaXplRW51bURlZmF1bHQgPSA1MTM7XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluU2l6ZUVudW0gPSBtYXBFbnVtKHtcclxuICAgICcxMjgnOiAgIDEyOSxcclxuICAgICcyNTYnOiAgIDI1NyxcclxuICAgICc1MTInOiAgIDUxMyxcclxuICAgICcxMDI0JzogIDEwMjUsXHJcbiAgICAnMjA0OCc6ICAyMDQ5LFxyXG4gICAgJzQwOTYnOiAgNDA5NyxcclxuICAgICc4MTkyJzogIDgxOTMsXHJcbiAgICAnMTYzODQnOiAxNjM4NSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgdGVycmFpblBhdGNoU2l6ZUVudW1EZWZhdWx0ID0gMzM7XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluUGF0Y2hTaXplRW51bSA9IG1hcEVudW0oe1xyXG4gICAgJzE2JzogICAgMTcsXHJcbiAgICAnMzInOiAgICAzMyxcclxuICAgICc2NCc6ICAgIDY1LFxyXG4gICAgJzEyOCc6ICAgMTI5LFxyXG4gICAgJzI1Nic6ICAgMjU3LFxyXG4gICAgJzUxMic6ICAgNTEzLFxyXG4gICAgJzEwMjQnOiAgMTAyNSxcclxuICAgICcyMDQ4JzogIDIwNDksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRzQ29tcHJlc3NBbGdvcml0bURlZmF1bHQgPSAnbm9uZSc7XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluSGVpZ2h0c0NvbXByZXNzQWxnb3JpdG0gPSBtYXBFbnVtKHtcclxuICAgICdOb25lJzogJ25vbmUnLFxyXG4gICAgJ1gyJzogJ3gyJyxcclxuICAgICdYNCc6ICd4NCdcclxufSk7IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5cclxuY29uc3QgdG1wVHJpVmVjQSA9IG5ldyBwYy5WZWMzKCk7XHJcbmNvbnN0IHRtcFRyaVZlY0IgPSBuZXcgcGMuVmVjMygpO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRyaWFuZ2xlIGV4dGVuZHMgcGMuVHJpIHtcclxuXHJcbiAgICBpbmRleDA6IGludDtcclxuICAgIGluZGV4MTogaW50O1xyXG4gICAgaW5kZXgyOiBpbnQ7XHJcblxyXG4gICAgZ2V0Tm9ybWFsKHJzaDogcGN4LlZlYzMpIHtcclxuICAgICAgICB0bXBUcmlWZWNBLnN1YjIodGhpcy52MSwgdGhpcy52MCk7XHJcbiAgICAgICAgdG1wVHJpVmVjQi5zdWIyKHRoaXMudjIsIHRoaXMudjApO1xyXG4gICAgICAgIHJzaC5jcm9zcyh0bXBUcmlWZWNBLCB0bXBUcmlWZWNCKS5ub3JtYWxpemUoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVHJpYW5nbGU7IiwiaW1wb3J0IHsgZmxvYXQsIGludCwgSVZlY3RvcjMsIFJlZk9iamVjdCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB7IElSZWFkb25seUFic1BhdGNoZWRIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNQYXRjaGVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBJWm9uZSB9IGZyb20gXCIuL0lab25lLm1qc1wiO1xyXG5pbXBvcnQgVGVycmFpblJheWNhc3RSZXN1bHQgZnJvbSBcIi4vVGVycmFpblJheWNhc3RSZXN1bHQubWpzXCI7XHJcbmltcG9ydCBUcmlhbmdsZSBmcm9tIFwiLi9UcmlhbmdsZS5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvb3JkWFoge1xyXG4gICAgeDogaW50LFxyXG4gICAgejogaW50LFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHcmlkUmF5Y2FzdFN0YXRlIHtcclxuICAgIHg6IGludCxcclxuICAgIHo6IGludCxcclxuICAgIHBhcmFtOiBpbnQsXHJcbiAgICBwcmV2WDogaW50LFxyXG4gICAgcHJldlo6IGludCxcclxuICAgIHByZXZQYXJhbTogaW50LFxyXG4gICAgbWF4RGlzdGFuY2VGbGF0OiBmbG9hdCxcclxufVxyXG5cclxuY29uc3QgaW5maW5pdGUgICAgICAgID0gOTk5OTk5OTtcclxuY29uc3QgbW9kZWxUcmFuc2Zvcm0gID0gbmV3IHBjLk1hdDQoKTtcclxuY29uc3QgdG1wUmF5ICAgICAgICAgID0gbmV3IHBjLlJheSgpO1xyXG5jb25zdCB0bXBSYXljYXN0VmVjICAgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCB0bXBQb3MxICAgICAgICAgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCB0bXBQb3MyICAgICAgICAgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCB0bXBQb3MzICAgICAgICAgPSBuZXcgcGMuVmVjMygpO1xyXG5cclxuY29uc3QgdHJpYW5nbGUgICAgICAgPSBuZXcgVHJpYW5nbGUoKTtcclxuY29uc3QgZGVidWdUbXBWZWMgICAgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCBkZWJ1Z1RyYW5zZm9ybSA9IG5ldyBwYy5NYXQ0KCk7XHJcbmNvbnN0IGRlYnVnUG9zaXRpb25zID0gbmV3IEFycmF5KDE2KTtcclxuXHJcbmxldCBkZWJ1Z1RyYW5zZm9ybUlzSWRlbnRpdHkgPSB0cnVlO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQUFCQiBleHRlbmRzIElab25lIHtcclxuICAgIG1pblk6IGZsb2F0LFxyXG4gICAgbWF4WTogZmxvYXQsXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlYnVnRHJhd1RyaWFuZ2xlTGluZXModHJpOiBwY3guVHJpLCBjb2xvciA9IHBjLkNvbG9yLllFTExPVykge1xyXG4gICAgLypcclxuICAgIFtcclxuICAgICAgICB0cmkudjAueCwgdHJpLnYwLnksIHRyaS52MC56LCB0cmkudjEueCwgdHJpLnYxLnksIHRyaS52MS56LFxyXG4gICAgICAgIHRyaS52MS54LCB0cmkudjEueSwgdHJpLnYxLnosIHRyaS52Mi54LCB0cmkudjIueSwgdHJpLnYyLnosXHJcbiAgICAgICAgdHJpLnYyLngsIHRyaS52Mi55LCB0cmkudjIueiwgdHJpLnYwLngsIHRyaS52MC55LCB0cmkudjAueixcclxuICAgIF0sIGNvbG9yLCBmYWxzZSk7XHJcbiAgICBdXHJcbiAgICAqL1xyXG4gICAgZGVidWdUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnQodHJpLnYwLCBkZWJ1Z1RtcFZlYyk7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1swXSA9IGRlYnVnUG9zaXRpb25zWzE1XSA9IGRlYnVnVG1wVmVjLng7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1sxXSA9IGRlYnVnUG9zaXRpb25zWzE2XSA9IGRlYnVnVG1wVmVjLnk7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1syXSA9IGRlYnVnUG9zaXRpb25zWzE3XSA9IGRlYnVnVG1wVmVjLno7XHJcbiAgICBkZWJ1Z1RyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludCh0cmkudjEsIGRlYnVnVG1wVmVjKTtcclxuICAgIGRlYnVnUG9zaXRpb25zWzNdID0gZGVidWdQb3NpdGlvbnNbNl0gPSBkZWJ1Z1RtcFZlYy54O1xyXG4gICAgZGVidWdQb3NpdGlvbnNbNF0gPSBkZWJ1Z1Bvc2l0aW9uc1s3XSA9IGRlYnVnVG1wVmVjLnk7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1s1XSA9IGRlYnVnUG9zaXRpb25zWzhdID0gZGVidWdUbXBWZWMuejtcclxuICAgIGRlYnVnVHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50KHRyaS52MiwgZGVidWdUbXBWZWMpO1xyXG4gICAgZGVidWdQb3NpdGlvbnNbOV0gID0gZGVidWdQb3NpdGlvbnNbMTJdID0gZGVidWdUbXBWZWMueDtcclxuICAgIGRlYnVnUG9zaXRpb25zWzEwXSA9IGRlYnVnUG9zaXRpb25zWzEzXSA9IGRlYnVnVG1wVmVjLnk7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1sxMV0gPSBkZWJ1Z1Bvc2l0aW9uc1sxNF0gPSBkZWJ1Z1RtcFZlYy56O1xyXG4gICAgcGMuYXBwPy5kcmF3TGluZUFycmF5cyhkZWJ1Z1Bvc2l0aW9ucywgY29sb3IsIGZhbHNlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNSYXlCb3goYWFiYjogSUFBQkIsIHJheTogcGN4LlJheSkge1xyXG5cclxuICAgIGNvbnN0IHJheU9yaWdpbiAgICA9IHJheS5vcmlnaW47XHJcbiAgICBjb25zdCByYXlEaXJlY3Rpb24gPSByYXkuZGlyZWN0aW9uO1xyXG5cclxuICAgIGNvbnN0IG1pblggPSBhYWJiLm1pblg7XHJcbiAgICBjb25zdCBtYXhYID0gYWFiYi5tYXhYO1xyXG4gICAgY29uc3QgbWluWSA9IGFhYmIubWluWTtcclxuICAgIGNvbnN0IG1heFkgPSBhYWJiLm1heFk7XHJcbiAgICBjb25zdCBtaW5aID0gYWFiYi5taW5aO1xyXG4gICAgY29uc3QgbWF4WiA9IGFhYmIubWF4WjtcclxuXHJcbiAgICBsZXQgdG1pbiA9IChtaW5YIC0gcmF5T3JpZ2luLngpIC8gcmF5RGlyZWN0aW9uLng7XHJcbiAgICBsZXQgdG1heCA9IChtYXhYIC0gcmF5T3JpZ2luLngpIC8gcmF5RGlyZWN0aW9uLng7XHJcblxyXG4gICAgaWYgKHRtaW4gPiB0bWF4KSB7XHJcbiAgICAgICAgbGV0IHRlbXAgPSB0bWluO1xyXG4gICAgICAgIHRtaW4gPSB0bWF4O1xyXG4gICAgICAgIHRtYXggPSB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0eW1pbiA9IChtaW5ZIC0gcmF5T3JpZ2luLnkpIC8gcmF5RGlyZWN0aW9uLnk7XHJcbiAgICBsZXQgdHltYXggPSAobWF4WSAtIHJheU9yaWdpbi55KSAvIHJheURpcmVjdGlvbi55O1xyXG5cclxuICAgIGlmICh0eW1pbiA+IHR5bWF4KSB7XHJcbiAgICAgICAgbGV0IHRlbXAgPSB0eW1pbjtcclxuICAgICAgICB0eW1pbiA9IHR5bWF4O1xyXG4gICAgICAgIHR5bWF4ID0gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoKHRtaW4gPiB0eW1heCkgfHwgKHR5bWluID4gdG1heCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5bWluID4gdG1pbikge1xyXG4gICAgICAgIHRtaW4gPSB0eW1pbjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHltYXggPCB0bWF4KSB7XHJcbiAgICAgICAgdG1heCA9IHR5bWF4O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0em1pbiA9IChtaW5aIC0gcmF5T3JpZ2luLnopIC8gcmF5RGlyZWN0aW9uLno7XHJcbiAgICBsZXQgdHptYXggPSAobWF4WiAtIHJheU9yaWdpbi56KSAvIHJheURpcmVjdGlvbi56O1xyXG5cclxuICAgIGlmICh0em1pbiA+IHR6bWF4KSB7XHJcbiAgICAgICAgbGV0IHRlbXAgPSB0em1pbjtcclxuICAgICAgICB0em1pbiA9IHR6bWF4O1xyXG4gICAgICAgIHR6bWF4ID0gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoKHRtaW4gPiB0em1heCkgfHwgKHR6bWluID4gdG1heCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlaWdodGZpZWxkU2hhcGUge1xyXG5cclxuICAgIHByaXZhdGUgX2hlaWdodE1hcDogSVJlYWRvbmx5QWJzUGF0Y2hlZEhlaWdodE1hcDtcclxuICAgIHByaXZhdGUgX2JlZ2luUG9zOiBwY3guVmVjMztcclxuICAgIHByaXZhdGUgX2VuZFBvczogcGN4LlZlYzM7XHJcbiAgICBwcml2YXRlIF9ib3VuZGluZ0JveDogSUFBQkI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwKSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwID0gaGVpZ2h0TWFwO1xyXG4gICAgICAgIHRoaXMuX2JlZ2luUG9zID0gbmV3IHBjLlZlYzMoKTtcclxuICAgICAgICB0aGlzLl9lbmRQb3MgPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlQm91bmRpbmdCb3goKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaGFsZldpZHRoID0gdGhpcy5faGVpZ2h0TWFwLndpZHRoIC8gMjtcclxuICAgICAgICBjb25zdCBoYWxmRGVwdGggPSB0aGlzLl9oZWlnaHRNYXAuZGVwdGggLyAyO1xyXG5cclxuICAgICAgICB0aGlzLl9ib3VuZGluZ0JveCA9IHtcclxuICAgICAgICAgICAgbWluWDogLWhhbGZXaWR0aCxcclxuICAgICAgICAgICAgbWluWTogMCxcclxuICAgICAgICAgICAgbWluWjogLWhhbGZEZXB0aCxcclxuICAgICAgICAgICAgbWF4WDogaGFsZldpZHRoLFxyXG4gICAgICAgICAgICBtYXhZOiB0aGlzLl9oZWlnaHRNYXAubWF4SGVpZ2h0LFxyXG4gICAgICAgICAgICBtYXhaOiBoYWxmRGVwdGgsXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdHJpYW5nbGVJbnRlcnNlY3RzUmF5KHRyaTogVHJpYW5nbGUsIHJheTogcGN4LlJheSwgYmVzdFJlc3VsdDogVGVycmFpblJheWNhc3RSZXN1bHQpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgaWYgKHRyaS5pbnRlcnNlY3RzUmF5KHJheSwgdG1wUmF5Y2FzdFZlYykpIHtcclxuICAgIFxyXG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHRtcFJheWNhc3RWZWMuZGlzdGFuY2UocmF5Lm9yaWdpbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoYmVzdFJlc3VsdC5kaXN0YW5jZSA+IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LmRpc3RhbmNlID0gZGlzdGFuY2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRyaS5nZXROb3JtYWwoYmVzdFJlc3VsdC5sb2NhbE5vcm1hbCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJlc3RSZXN1bHQubm9ybWFsLmNvcHkoYmVzdFJlc3VsdC5sb2NhbE5vcm1hbCk7XHJcbiAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LmxvY2FsUG9pbnQuY29weSh0bXBSYXljYXN0VmVjKTtcclxuICAgICAgICAgICAgICAgIGJlc3RSZXN1bHQucG9pbnQuY29weSh0bXBSYXljYXN0VmVjKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZGVidWdEcmF3VHJpYW5nbGVMaW5lcyh0cmksIHBjLkNvbG9yLlJFRCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlUDAgPSBiZXN0UmVzdWx0LnBvaW50LmRpc3RhbmNlKHRyaS52MCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZVAxID0gYmVzdFJlc3VsdC5wb2ludC5kaXN0YW5jZSh0cmkudjEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VQMiA9IGJlc3RSZXN1bHQucG9pbnQuZGlzdGFuY2UodHJpLnYyKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlUDAgPiBkaXN0YW5jZVAxKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VQMSA+IGRpc3RhbmNlUDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFJlc3VsdC52ZXJ0ZXhJbmRleCA9IHRyaS5pbmRleDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LnZlcnRleEluZGV4ID0gdHJpLmluZGV4MTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VQMCA+IGRpc3RhbmNlUDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFJlc3VsdC52ZXJ0ZXhJbmRleCA9IHRyaS5pbmRleDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LnZlcnRleEluZGV4ID0gdHJpLmluZGV4MDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy9kZWJ1Z0RyYXdUcmlhbmdsZUxpbmVzKHRyaSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfYXNzaWduUG9zaXRpb24oaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjM+KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIHRoaXMuX2hlaWdodE1hcC53aWR0aCB8IDA7XHJcbiAgICAgICAgY29uc3QgeiA9IGluZGV4IC8gdGhpcy5faGVpZ2h0TWFwLndpZHRoIHwgMDtcclxuXHJcbiAgICAgICAgYnVmLnggPSAoLXRoaXMuX2hlaWdodE1hcC53aWR0aCAvIDIpICsgeDtcclxuICAgICAgICBidWYueSA9IHRoaXMuX2hlaWdodE1hcC5nZXQoeCwgeik7XHJcbiAgICAgICAgYnVmLnogPSAoLXRoaXMuX2hlaWdodE1hcC5kZXB0aCAvIDIpICsgejtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3F1YWRBY3Rpb24ocnM6IElHcmlkUmF5Y2FzdFN0YXRlLCByYXk6IHBjeC5SYXksIHJlc3VsdDogVGVycmFpblJheWNhc3RSZXN1bHQpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgY29uc3QgeCA9IHJzLnByZXZYO1xyXG4gICAgICAgIGNvbnN0IHogPSBycy5wcmV2WjtcclxuXHJcbiAgICAgICAgaWYgKHggPCAwIHx8IHogPCAwIHx8IHggPj0gdGhpcy5faGVpZ2h0TWFwLndpZHRoIC0gMSB8fCB6ID49IHRoaXMuX2hlaWdodE1hcC5kZXB0aCAtIDEpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBjb25zdCB4RmFuMiA9IHggJSAyID09PSAwO1xyXG4gICAgICAgIGNvbnN0IHpGYW4yID0geiAlIDIgPT09IDA7XHJcblxyXG4gICAgICAgIGxldCBpbmRleDAsIGluZGV4MSwgaW5kZXgyO1xyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh4RmFuMiAhPT0gekZhbjIpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4MCA9ICh6ICsgMCkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDApO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgxID0gKHogKyAxKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMCk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDIgPSAoeiArIDApICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluZGV4MCA9ICh6ICsgMCkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDApO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgxID0gKHogKyAxKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDIgPSAoeiArIDApICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgwLCB0bXBQb3MxKTtcclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgxLCB0bXBQb3MyKTtcclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgyLCB0bXBQb3MzKTtcclxuXHJcbiAgICAgICAgICAgIHRyaWFuZ2xlLmluZGV4MCA9IGluZGV4MDtcclxuICAgICAgICAgICAgdHJpYW5nbGUuaW5kZXgxID0gaW5kZXgxO1xyXG4gICAgICAgICAgICB0cmlhbmdsZS5pbmRleDIgPSBpbmRleDI7XHJcblxyXG4gICAgICAgICAgICB0cmlhbmdsZS5zZXQodG1wUG9zMSwgdG1wUG9zMiwgdG1wUG9zMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fdHJpYW5nbGVJbnRlcnNlY3RzUmF5KHRyaWFuZ2xlLCByYXksIHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh4RmFuMiAhPT0gekZhbjIpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4MCA9ICh6ICsgMCkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDEpO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgxID0gKHogKyAxKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMCk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDIgPSAoeiArIDEpICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluZGV4MCA9ICh6ICsgMCkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDApO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgxID0gKHogKyAxKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMCk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDIgPSAoeiArIDEpICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgwLCB0bXBQb3MxKTtcclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgxLCB0bXBQb3MyKTtcclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgyLCB0bXBQb3MzKTtcclxuXHJcbiAgICAgICAgICAgIHRyaWFuZ2xlLmluZGV4MCA9IGluZGV4MDtcclxuICAgICAgICAgICAgdHJpYW5nbGUuaW5kZXgxID0gaW5kZXgxO1xyXG4gICAgICAgICAgICB0cmlhbmdsZS5pbmRleDIgPSBpbmRleDI7XHJcblxyXG4gICAgICAgICAgICB0cmlhbmdsZS5zZXQodG1wUG9zMSwgdG1wUG9zMiwgdG1wUG9zMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fdHJpYW5nbGVJbnRlcnNlY3RzUmF5KHRyaWFuZ2xlLCByYXksIHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW50ZXJzZWN0c1JheShsb2NhbFJheTogcGN4LlJheSwgcmVzdWx0OiBUZXJyYWluUmF5Y2FzdFJlc3VsdCA9IG5ldyBUZXJyYWluUmF5Y2FzdFJlc3VsdCgpKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGlmICghaW50ZXJzZWN0c1JheUJveCh0aGlzLl9ib3VuZGluZ0JveCwgbG9jYWxSYXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2JlZ2luUG9zLmNvcHkobG9jYWxSYXkub3JpZ2luKTtcclxuICAgICAgICB0aGlzLl9iZWdpblBvcy54ICs9IHRoaXMuX2JvdW5kaW5nQm94Lm1heFg7XHJcbiAgICAgICAgdGhpcy5fYmVnaW5Qb3MueiArPSB0aGlzLl9ib3VuZGluZ0JveC5tYXhaO1xyXG5cclxuICAgICAgICB0aGlzLl9lbmRQb3MuY29weShsb2NhbFJheS5kaXJlY3Rpb24pLmFkZCh0aGlzLl9iZWdpblBvcyk7XHJcblxyXG4gICAgICAgIGxldCByYXlEaXJlY3Rpb25GbGF0WCA9IHRoaXMuX2VuZFBvcy54IC0gdGhpcy5fYmVnaW5Qb3MueDtcclxuICAgICAgICBsZXQgcmF5RGlyZWN0aW9uRmxhdFogPSB0aGlzLl9lbmRQb3MueiAtIHRoaXMuX2JlZ2luUG9zLno7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heERpc3RhbmNlRmxhdCA9IE1hdGguc3FydChyYXlEaXJlY3Rpb25GbGF0WCAqKiAyICsgcmF5RGlyZWN0aW9uRmxhdFogKiogMik7XHJcblxyXG4gICAgICAgIGlmIChtYXhEaXN0YW5jZUZsYXQgPCAwLjAwMDEpIHtcclxuICAgICAgICAgICAgLy8gQ29uc2lkZXIgdGhlIHJheSB2ZXJ0aWNhbFxyXG4gICAgICAgICAgICByYXlEaXJlY3Rpb25GbGF0WCA9IDA7XHJcbiAgICAgICAgICAgIHJheURpcmVjdGlvbkZsYXRaID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJheURpcmVjdGlvbkZsYXRYIC89IG1heERpc3RhbmNlRmxhdDtcclxuICAgICAgICAgICAgcmF5RGlyZWN0aW9uRmxhdFogLz0gbWF4RGlzdGFuY2VGbGF0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeGlTdGVwID0gcmF5RGlyZWN0aW9uRmxhdFggPiAwID8gMSA6IHJheURpcmVjdGlvbkZsYXRYIDwgMCA/IC0xIDogMDtcclxuICAgICAgICBjb25zdCB6aVN0ZXAgPSByYXlEaXJlY3Rpb25GbGF0WiA+IDAgPyAxIDogcmF5RGlyZWN0aW9uRmxhdFogPCAwID8gLTEgOiAwO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJhbURlbHRhWCA9IHhpU3RlcCAhPT0gMCA/IDEgLyBNYXRoLmFicyhyYXlEaXJlY3Rpb25GbGF0WCkgOiBpbmZpbml0ZTtcclxuICAgICAgICBjb25zdCBwYXJhbURlbHRhWiA9IHppU3RlcCAhPT0gMCA/IDEgLyBNYXRoLmFicyhyYXlEaXJlY3Rpb25GbGF0WikgOiBpbmZpbml0ZTtcclxuXHJcbiAgICAgICAgbGV0IHBhcmFtQ3Jvc3NYO1xyXG4gICAgICAgIGxldCBwYXJhbUNyb3NzWjtcclxuXHJcbiAgICAgICAgaWYgKHhpU3RlcCAhPT0gMCkge1xyXG4gICAgICAgICAgICBwYXJhbUNyb3NzWCA9IHhpU3RlcCA9PT0gMVxyXG4gICAgICAgICAgICAgICAgPyAoTWF0aC5jZWlsKHRoaXMuX2JlZ2luUG9zLngpIC0gdGhpcy5fYmVnaW5Qb3MueCkgKiBwYXJhbURlbHRhWFxyXG4gICAgICAgICAgICAgICAgOiAodGhpcy5fYmVnaW5Qb3MueCAtIE1hdGguZmxvb3IodGhpcy5fYmVnaW5Qb3MueCkpICogcGFyYW1EZWx0YVg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbUNyb3NzWCA9IGluZmluaXRlOyAgLy8gV2lsbCBuZXZlciBjcm9zcyBvbiBYXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoemlTdGVwICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHBhcmFtQ3Jvc3NaID0gemlTdGVwID09PSAxXHJcbiAgICAgICAgICAgICAgICA/IChNYXRoLmNlaWwodGhpcy5fYmVnaW5Qb3MueikgLSB0aGlzLl9iZWdpblBvcy56KSAqIHBhcmFtRGVsdGFaXHJcbiAgICAgICAgICAgICAgICA6ICh0aGlzLl9iZWdpblBvcy56IC0gTWF0aC5mbG9vcih0aGlzLl9iZWdpblBvcy56KSkgKiBwYXJhbURlbHRhWjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtQ3Jvc3NaID0gaW5maW5pdGU7ICAvLyBXaWxsIG5ldmVyIGNyb3NzIG9uIFpcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJzOiBJR3JpZFJheWNhc3RTdGF0ZSA9IHtcclxuICAgICAgICAgICAgeDogdGhpcy5fYmVnaW5Qb3MueCB8IDAsXHJcbiAgICAgICAgICAgIHo6IHRoaXMuX2JlZ2luUG9zLnogfCAwLFxyXG4gICAgICAgICAgICBwYXJhbTogMCxcclxuICAgICAgICAgICAgcHJldlg6IDAsXHJcbiAgICAgICAgICAgIHByZXZaOiAwLFxyXG4gICAgICAgICAgICBwcmV2UGFyYW06IDAsXHJcbiAgICAgICAgICAgIG1heERpc3RhbmNlRmxhdDogbWF4RGlzdGFuY2VGbGF0LFxyXG4gICAgICAgIH07XHJcblxyXG5cdCAgICAvLyBXb3JrYXJvdW5kIGNhc2VzIHdoZXJlIHRoZSByYXkgc3RhcnRzIGF0IGFuIGludGVnZXIgcG9zaXRpb25cclxuXHQgICAgaWYgKHBhcmFtQ3Jvc3NYID09PSAwLjApIHtcclxuICAgICAgICAgICAgcGFyYW1Dcm9zc1ggKz0gcGFyYW1EZWx0YVg7XHJcbiAgICAgICAgICAgIC8vIElmIGdvaW5nIGJhY2t3YXJkcywgd2Ugc2hvdWxkIGlnbm9yZSB0aGUgcG9zaXRpb24gd2Ugd291bGQgZ2V0IGJ5IHRoZSBhYm92ZSBmbG9vcmluZyxcclxuICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGUgcmF5IGlzIG5vdCBoZWFkaW5nIGluIHRoYXQgZGlyZWN0aW9uXHJcbiAgICAgICAgICAgIGlmICh4aVN0ZXAgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBycy54IC09IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYXJhbUNyb3NzWiA9PT0gMC4wKSB7XHJcbiAgICAgICAgICAgIHBhcmFtQ3Jvc3NaICs9IHBhcmFtRGVsdGFaO1xyXG4gICAgICAgICAgICBpZiAoemlTdGVwID09PSAtMSlcclxuICAgICAgICAgICAgICAgIHJzLnogLT0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoYXNIaXQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgd2hpbGUgKCFoYXNIaXQpIHtcclxuXHJcbiAgICAgICAgICAgIHJzLnByZXZYID0gcnMueDtcclxuICAgICAgICAgICAgcnMucHJldlogPSBycy56O1xyXG4gICAgICAgICAgICBycy5wcmV2UGFyYW0gPSBycy5wYXJhbTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAocGFyYW1Dcm9zc1ggPCBwYXJhbUNyb3NzWikge1xyXG4gICAgICAgICAgICAgICAgLy8gWCBsYW5lXHJcbiAgICAgICAgICAgICAgICBycy54ICs9IHhpU3RlcDtcclxuICAgICAgICAgICAgICAgIC8vIEFzc2lnbiBiZWZvcmUgYWR2YW5jaW5nIHRoZSBwYXJhbSxcclxuICAgICAgICAgICAgICAgIC8vIHRvIGJlIGluIHN5bmMgd2l0aCB0aGUgaW5pdGlhbGl6YXRpb24gc3RlcFxyXG4gICAgICAgICAgICAgICAgcnMucGFyYW0gPSBwYXJhbUNyb3NzWDtcclxuICAgICAgICAgICAgICAgIHBhcmFtQ3Jvc3NYICs9IHBhcmFtRGVsdGFYO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gWiBsYW5lXHJcbiAgICAgICAgICAgICAgICBycy56ICs9IHppU3RlcDtcclxuICAgICAgICAgICAgICAgIHJzLnBhcmFtID0gcGFyYW1Dcm9zc1o7XHJcbiAgICAgICAgICAgICAgICBwYXJhbUNyb3NzWiArPSBwYXJhbURlbHRhWjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9xdWFkQWN0aW9uKHJzLCBsb2NhbFJheSwgcmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgaGFzSGl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJzLnBhcmFtID4gcnMubWF4RGlzdGFuY2VGbGF0KSB7XHJcbiAgICAgICAgICAgICAgICBycy5wYXJhbSA9IHJzLm1heERpc3RhbmNlRmxhdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGFzSGl0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbnRlcnNlY3RzUmF5KHdvcmxkVHJhbmZvcm06IHBjeC5NYXQ0IHwgbnVsbCB8IHVuZGVmaW5lZCwgcmF5OiBwY3guUmF5LCByZXN1bHQ6IFRlcnJhaW5SYXljYXN0UmVzdWx0ID0gbmV3IFRlcnJhaW5SYXljYXN0UmVzdWx0KCkpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgaWYgKHdvcmxkVHJhbmZvcm0pIHtcclxuICAgICAgICAgICAgbW9kZWxUcmFuc2Zvcm0uY29weSh3b3JsZFRyYW5mb3JtKS5pbnZlcnQoKTtcclxuICAgICAgICAgICAgbW9kZWxUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnQocmF5Lm9yaWdpbiwgdG1wUmF5Lm9yaWdpbik7XHJcbiAgICAgICAgICAgIG1vZGVsVHJhbnNmb3JtLnRyYW5zZm9ybVZlY3RvcihyYXkuZGlyZWN0aW9uLCB0bXBSYXkuZGlyZWN0aW9uKTtcclxuICAgIFxyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybS5jb3B5KHdvcmxkVHJhbmZvcm0pO1xyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybUlzSWRlbnRpdHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIWRlYnVnVHJhbnNmb3JtSXNJZGVudGl0eSkge1xyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybS5zZXRJZGVudGl0eSgpO1xyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybUlzSWRlbnRpdHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGhpdCA9IHRoaXMuX2ludGVyc2VjdHNSYXkod29ybGRUcmFuZm9ybSA/IHRtcFJheSA6IHJheSwgcmVzdWx0KTtcclxuICAgIFxyXG4gICAgICAgIGlmIChoaXQgJiYgd29ybGRUcmFuZm9ybSkge1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgd29ybGQgcG9pbnQgYW5kIG5vcm1hbCwgYnV0IHNhdmUgbG9jYWxcclxuICAgICAgICAgICAgd29ybGRUcmFuZm9ybS50cmFuc2Zvcm1Qb2ludChyZXN1bHQucG9pbnQsIHJlc3VsdC5wb2ludCk7XHJcbiAgICAgICAgICAgIHdvcmxkVHJhbmZvcm0udHJhbnNmb3JtVmVjdG9yKHJlc3VsdC5ub3JtYWwsIHJlc3VsdC5ub3JtYWwpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiAhIWhpdDtcclxuICAgIH1cclxufSIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBBYnNQYXRjaGVkSGVpZ2h0TWFwLCB7IGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplLCBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwVHlwcGVkIH0gZnJvbSBcIi4vQWJzUGF0Y2hlZEhlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlYWRvbmx5UGF0Y2hlZEhlaWdodE1hcCBleHRlbmRzIElSZWFkb25seUFic1BhdGNoZWRIZWlnaHRNYXBUeXBwZWQ8RmxvYXQzMkFycmF5PiB7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQYXRjaGVkSGVpZ2h0TWFwIGV4dGVuZHMgQWJzUGF0Y2hlZEhlaWdodE1hcDxGbG9hdDMyQXJyYXk+IGltcGxlbWVudHMgSVJlYWRvbmx5UGF0Y2hlZEhlaWdodE1hcCB7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlQnVmZmVyKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIGNodW5rU2l6ZTogaW50KTogRmxvYXQzMkFycmF5IHtcclxuXHJcbiAgICAgICAgY29uc3QgbnVtQ2h1bmtzWCAgID0gKCh3aWR0aCAtIDEpIC8gKGNodW5rU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgY29uc3QgbnVtQ2h1bmtzWiAgID0gKChkZXB0aCAtIDEpIC8gKGNodW5rU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgY29uc3QgY2h1bmtBcnJTaXplID0gY2h1bmtTaXplICoqIDI7XHJcbiAgICAgICAgY29uc3QgY2h1bmtDb3VudCAgID0gbnVtQ2h1bmtzWCAqIG51bUNodW5rc1o7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShjaHVua0FyclNpemUgKiBjaHVua0NvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgZGF0YUNodW5rU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI/OiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICBjb25zdCB2YWxpZERhdGFDaHVua1NpemUgPSBnZXRPclRocm93RGF0YUNodW5rU2l6ZShwYXRjaFNpemUsIGRhdGFDaHVua1NpemUpO1xyXG4gICAgICAgIGNvbnN0IHRtcEJ1ZmZlciA9IGJ1ZmZlciA/PyBQYXRjaGVkSGVpZ2h0TWFwLmNyZWF0ZUJ1ZmZlcih3aWR0aCwgZGVwdGgsIHZhbGlkRGF0YUNodW5rU2l6ZSk7XHJcbiAgICAgICAgc3VwZXIod2lkdGgsIGRlcHRoLCBwYXRjaFNpemUsIGRhdGFDaHVua1NpemUsIG1heEhlaWdodCwgdG1wQnVmZmVyLCAxLCAwKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGF0Y2hlZEhlaWdodE1hcDsiLCJpbXBvcnQgeyBmbG9hdCB9IGZyb20gXCIuL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBJRnJ1c3R1bSB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0dlb21pcEdyaWRSZW5kZXJQcmVwYXJlci5tanNcIjtcclxuaW1wb3J0IHsgZHJhd1BvaW50IH0gZnJvbSBcIi4vRGVidWcubWpzXCI7XHJcblxyXG5jb25zdCB0bXBWZWMgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCB0bXBSYWQgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCB0bXBTcGhlcmUgPSBuZXcgcGMuQm91bmRpbmdTcGhlcmUoKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBGcnVzdHVtIGltcGxlbWVudHMgSUZydXN0dW0ge1xyXG5cclxuICAgIHByaXZhdGUgX21hcmdpbjogZmxvYXQ7XHJcbiAgICBwcml2YXRlIF9tYXQ6IHBjeC5NYXQ0O1xyXG4gICAgcHJpdmF0ZSBfc2NhbGU6IHBjeC5WZWMzO1xyXG4gICAgcHJpdmF0ZSBfZnJ1c3R1bTogcGN4LkZydXN0dW07XHJcblxyXG4gICAgcHVibGljIGdldCBtYXJnaW4oKSAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9tYXJnaW47IH1cclxuICAgIHB1YmxpYyBzZXQgbWFyZ2luKHZhbHVlOiBmbG9hdCkgeyB0aGlzLl9tYXJnaW4gPSB2YWx1ZTsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZnJ1c3R1bSgpICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2ZydXN0dW07IH1cclxuICAgIHB1YmxpYyBzZXQgZnJ1c3R1bSh2YWx1ZTogcGN4LkZydXN0dW0pIHsgdGhpcy5fZnJ1c3R1bSA9IHZhbHVlOyB9XHJcblxyXG4gICAgcHVibGljIGdldCB0cmFuc2Zvcm0oKSAgICAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9tYXQ7IH1cclxuICAgIHB1YmxpYyBzZXQgdHJhbnNmb3JtKHZhbHVlOiBwY3guTWF0NCkge1xyXG4gICAgICAgIHRoaXMuX21hdC5jb3B5KHZhbHVlKTtcclxuICAgICAgICB0aGlzLl9tYXQuZ2V0U2NhbGUodGhpcy5fc2NhbGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9tYXJnaW4gPSAxO1xyXG4gICAgICAgIHRoaXMuX21hdCAgICA9IG5ldyBwYy5NYXQ0KCk7XHJcbiAgICAgICAgdGhpcy5fc2NhbGUgID0gbmV3IHBjLlZlYzMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29udGFpbnNTcGhlcmUobG9jYWxYOiBmbG9hdCwgbG9jYWxZOiBmbG9hdCwgbG9jYWxaOiBmbG9hdCwgcmFkaXVzOiBmbG9hdCkge1xyXG5cclxuICAgICAgICB0bXBWZWMuc2V0KGxvY2FsWCwgbG9jYWxZLCBsb2NhbFopO1xyXG4gICAgICAgIHRtcFJhZC5jb3B5KHRoaXMuX3NjYWxlKS5tdWxTY2FsYXIocmFkaXVzKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWF0LnRyYW5zZm9ybVBvaW50KHRtcFZlYywgdG1wVmVjKTtcclxuXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBbUExBWUNBTlZBUzpET0NdOiBjZW50ZXIgcHJpdmF0ZSBpbiB2MlxyXG4gICAgICAgIHRtcFNwaGVyZS5jZW50ZXIgPSB0bXBWZWM7XHJcbiAgICAgICAgdG1wU3BoZXJlLnJhZGl1cyA9IHRtcFJhZC5kaXN0YW5jZShwYy5WZWMzLlpFUk8pICogdGhpcy5fbWFyZ2luO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZnJ1c3R1bS5jb250YWluc1NwaGVyZSh0bXBTcGhlcmUpID4gMDtcclxuICAgIH1cclxufSIsImltcG9ydCB7IGRyYXdEaXJlY3Rpb25WZWN0b3IsIGRyYXdQb2ludCB9IGZyb20gXCIuLi9TaGFyZWQvRGVidWcubWpzXCI7XHJcbmltcG9ydCB7IE1pZHBvaW50RGlzcFRlcnJhaW4gfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9NaWRwb2ludERpc3BUZXJyYWluLm1qc1wiO1xyXG5pbXBvcnQgVGVycmFpblJheWNhc3RSZXN1bHQgZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vVGVycmFpblJheWNhc3RSZXN1bHQubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRNYXAgZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgVGVycmFpblJlbmRlclByZXBhcmVyIGZyb20gXCIuLi9UZXJyYWluSGVscGVycy9UZXJyYWluUmVuZGVyUHJlcGFyZXIubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUJydXNoU2V0dGluZ3MgfSBmcm9tIFwiLi4vVGVycmFpbkhlbHBlcnMvQnJ1c2gubWpzXCI7XHJcbmltcG9ydCBDb2xvclBhaW50ZXIgZnJvbSBcIi4uL1RlcnJhaW5IZWxwZXJzL0NvbG9yUGFpbnRlci5tanNcIjtcclxuaW1wb3J0IFRlcnJhaW5QYXRjaGVzIGZyb20gXCIuLi9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlcy5tanNcIjtcclxuaW1wb3J0IHsgdGVycmFpbkhlaWdodHNDb21wcmVzc0FsZ29yaXRtLCB0ZXJyYWluSGVpZ2h0c0NvbXByZXNzQWxnb3JpdG1EZWZhdWx0LCB0ZXJyYWluUGF0Y2hTaXplRW51bSwgdGVycmFpblBhdGNoU2l6ZUVudW1EZWZhdWx0LCB0ZXJyYWluU2l6ZUVudW0sIHRlcnJhaW5TaXplRW51bURlZmF1bHQgfSBmcm9tIFwiLi4vVGVycmFpbkhlbHBlcnMvRW51bXMubWpzXCI7XHJcbmltcG9ydCB7IHRlcnJhaW5NYXhIZWlnaHRQYXJhbU5hbWUsIHRlcnJhaW5TcGxhdE1hcFBhcmFtTmFtZSwgfSBmcm9tIFwiLi4vVGVycmFpbkhlbHBlcnMvVGVycmFpblBhdGNoZXNTaGFkZXJDaHVua3MubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRmaWVsZFNoYXBlIGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0hlaWdodGZpZWxkU2hhcGUubWpzXCI7XHJcbmltcG9ydCBQYXRjaGVkSGVpZ2h0TWFwIGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL1BhdGNoZWRIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCBDb21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcCwgeyBUQ29tcHJlc3NBbGdvcml0bSB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0NvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBGcnVzdHVtIH0gZnJvbSBcIi4uL1NoYXJlZC9GcnVzdHVtLm1qc1wiO1xyXG5pbXBvcnQgeyBtYXBUaXRsZUVudW0gfSBmcm9tIFwiLi4vU2hhcmVkL0VudW1Db252ZXJ0ZXIubWpzXCI7XHJcbmltcG9ydCB7IGdldEJ1ZmZlciB9IGZyb20gXCIuLi9BbW1vSW50ZWdyYXRpb24vQW1tb0ludGVncmF0aW9uLm1qc1wiO1xyXG5pbXBvcnQgeyBUZXJyYWluUGF0aGNlc0luc3RhbmNpbmcgfSBmcm9tIFwiLi4vVGVycmFpbkhlbHBlcnMvVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgeyBUZXJyYWluUGF0aGNlc0NvbWJpbmVJbnN0YW5jaW5nIH0gZnJvbSBcIi4uL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5QYXRjaGVzQ29tYmluZUluc3RhbmNpbmcubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElUZXJyYWluSGVpZ2h0TWFwQXR0cmlidXRlIHtcclxuICAgIHJlYWRvbmx5IGZpbGU6IHBjeC5Bc3NldDtcclxuICAgIHJlYWRvbmx5IHRleHR1cmU6IHBjeC5Bc3NldDtcclxuICAgIHJlYWRvbmx5IHNtb290aEZhY3RvcjogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgc21vb3RoUmFkaXVzOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRlcnJhaW5CcnVzaEF0dHJpYnV0ZSBleHRlbmRzIElCcnVzaFNldHRpbmdzIHtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVGVycmFpbkxheWVyQXR0cmlidXRlIHtcclxuICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcclxuICAgIHJlYWRvbmx5IGRpZmZ1c2U6IHBjeC5Bc3NldDtcclxuICAgIHJlYWRvbmx5IG5vcm1hbE1hcDogcGN4LkFzc2V0O1xyXG4gICAgcmVhZG9ubHkgc2l6ZTogcGN4LlZlYzI7XHJcbiAgICByZWFkb25seSBvZmZzZXQ6IHBjeC5WZWMyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElUZXJyYWluUGFpbnRlclNldHRpbmdzQXR0cmlidXRlIHtcclxuICAgIHJlYWRvbmx5IHNwbGF0TWFwOiBwY3guQXNzZXQ7XHJcbn1cclxuXHJcbmNvbnN0IGJydXNoTWluU2l6ZSA9IDI7XHJcbmNvbnN0IGJydXNoTWF4U2l6ZSA9IDI1MDtcclxuY29uc3QgdG1wTWF0ID0gbmV3IHBjLk1hdDQoKTtcclxuY29uc3QgdGVycmFpbkxvY2FsVmVydGV4UG9zID0gbmV3IHBjLlZlYzMoKTtcclxuY29uc3QgaGVpZ2h0TWFwRXh0ID0gJy5obSc7XHJcblxyXG5leHBvcnQgZW51bSBSZW5kZXJNb2RlIHtcclxuICAgIFN0YW5kYXJkID0gMSxcclxuICAgIEluc3RhbmNpbmdBY2NlbGVyYXRvciA9IDIsXHJcbiAgICBDb21iaW5lSW5zdGFuY2luZ0FjY2VsZXJhdG9yID0gMyxcclxuICAgIEN1c3RvbUZvcndhcmRSZW5kZXJlciA9IDQsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUZXJyYWluIGV4dGVuZHMgcGMuU2NyaXB0VHlwZSB7XHJcblxyXG4gICAgZGVjbGFyZSByZWFkb25seSByZW5kZXJNb2RlOiBSZW5kZXJNb2RlO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBsb2RCeVlQb3M6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IHpGYXI6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgd2lkdGg6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgZGVwdGg6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGNvbXByZXNzQWxnb3JpdG06IFRDb21wcmVzc0FsZ29yaXRtIHwgJ25vbmUnO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBwYXRjaFNpemU6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgY2FzdFNoYWRvdzogYm9vbGVhbjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgcmVjZWl2ZVNoYWRvdzogYm9vbGVhbjtcclxuXHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGxheWVyOiBzdHJpbmc7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGxheWVyMjogc3RyaW5nO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBhdXRvUmVuZGVyOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSB3aXJlZnJhbWU6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IHBhaW50aW5nOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBjYW1lcmFFbnRpdHk6IHBjeC5FbnRpdHkgfCB1bmRlZmluZWQ7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGhlaWdodE1hcDogSVRlcnJhaW5IZWlnaHRNYXBBdHRyaWJ1dGU7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGJydXNoOiBJVGVycmFpbkJydXNoQXR0cmlidXRlO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBhY3RpdmVMYXllcjogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBsYXllcnM6IElUZXJyYWluTGF5ZXJBdHRyaWJ1dGVbXTtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgcGFpbnRlclNldHRpbmdzOiBJVGVycmFpblBhaW50ZXJTZXR0aW5nc0F0dHJpYnV0ZTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHNoYXBlKCkgeyByZXR1cm4gdGhpcy5faGVpZ2h0RmllbGRTaGFwZTsgfVxyXG4gICAgcHVibGljIGdldCBvYmplY3QoKSB7IHJldHVybiB0aGlzLl90ZXJyYWluOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoZXMoKSB7IHJldHVybiB0aGlzLl9wYXRjaGVzU3RvcmU7IH1cclxuICAgIHB1YmxpYyBnZXQgcmVuZGVyUHJlcGFyZXIoKSB7IHJldHVybiB0aGlzLl9yZW5kZXJQcmVwYXJlcjsgfVxyXG5cclxuICAgIHByaXZhdGUgX2xvY2sgPSAwO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgbG9jaygpIHsgcmV0dXJuIHRoaXMuX2xvY2s7IH1cclxuXHJcbiAgICBwcml2YXRlIF9sb2NhbENhbWVyYVBvc2l0aW9uID0gbmV3IHBjLlZlYzMoKTtcclxuICAgIHByaXZhdGUgX3RlcnJhaW46IE1pZHBvaW50RGlzcFRlcnJhaW47XHJcbiAgICBwcml2YXRlIF9wYXRjaGVzU3RvcmU6IFRlcnJhaW5QYXRjaGVzO1xyXG4gICAgcHJpdmF0ZSBfcm91Z2huZXNzID0gMS4wO1xyXG5cclxuICAgIHByaXZhdGUgX2hlaWdodEZpZWxkU2hhcGU6IEhlaWdodGZpZWxkU2hhcGU7XHJcbiAgICBwcml2YXRlIF9yYXljYXN0UmVzdWx0OiBUZXJyYWluUmF5Y2FzdFJlc3VsdDtcclxuICAgIHByaXZhdGUgX3JheVN0YXJ0ID0gbmV3IHBjLlZlYzMoKTtcclxuICAgIHByaXZhdGUgX3JheUVuZCA9IG5ldyBwYy5WZWMzKCk7XHJcbiAgICBwcml2YXRlIF9yYXlEaXJlY3Rpb24gPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgcHJpdmF0ZSBfcmF5ID0gbmV3IHBjLlJheSgpO1xyXG5cclxuICAgIHByaXZhdGUgX2xhc3RNb3VzZU1vdmVFdmVudDogcGN4Lk1vdXNlRXZlbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBfbGFzdExvZEdyaWRVcGRhdGU6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIF9hY3RpdmVCcnVzaDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfYnJ1c2hIZWlnaHRNYXA6IEhlaWdodE1hcDtcclxuICAgIHByaXZhdGUgX2NvbG9yUGFpbnRlcjogQ29sb3JQYWludGVyO1xyXG4gICAgcHJpdmF0ZSBfYnJ1c2hTaXplOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9icnVzaFNpemVTdGVwOiBudW1iZXIgPSAxO1xyXG4gICAgcHJpdmF0ZSBfYnJ1c2hPcGFjaXR5OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9icnVzaE9wYWNpdHlTdGVwOiBudW1iZXIgPSAwLjAxO1xyXG4gICAgcHJpdmF0ZSBfaW50ZXJzZWN0c1JheVJlc3VsdDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfbWF0ZXJpYWw6IHBjeC5TdGFuZGFyZE1hdGVyaWFsO1xyXG4gICAgcHJpdmF0ZSBfbGF5ZXJzRGlmZnVzZTogcGN4LlRleHR1cmUgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgcHJpdmF0ZSBfcmVuZGVyUHJlcGFyZXI6IFRlcnJhaW5SZW5kZXJQcmVwYXJlcjtcclxuICAgIHByaXZhdGUgX2ZydXN0dW06IEZydXN0dW07XHJcblxyXG4gICAgcHVibGljIGFkZExvY2soKSB7XHJcbiAgICAgICAgdGhpcy5fbG9jaysrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmcmVlTG9jaygpIHtcclxuICAgICAgICB0aGlzLl9sb2NrLS07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBvc3RJbml0aWFsaXplKCk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVNb3VzZSgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVLZXlib2FyZCgpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbml0QnJ1c2goKTtcclxuICAgICAgICB0aGlzLl9pbml0VGVycmFpbigpO1xyXG5cclxuICAgICAgICB0aGlzLl9jcmVhdGVUZXJyYWluTWF0ZXJpYWwoKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVUZXJyYWluTWF0ZXJpYWxQYXJhbWV0ZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUxheWVycygpO1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVIZWlnaHRNYXBGcm9tQXR0cigpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUJydXNoKCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlUGFpbnRlck1hdGVyaWFsKCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaCgpO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOnJlbmRlck1vZGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclByZXBhcmVyLnBhdGNoZXNTdG9yZS5jdXN0b21Gb3J3YXJkUmVuZGVyZXIgPSB0aGlzLnJlbmRlck1vZGUgPT09IFJlbmRlck1vZGUuQ3VzdG9tRm9yd2FyZFJlbmRlcmVyO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJQcmVwYXJlci5wYXRjaGVzU3RvcmUuc2V0TWF0ZXJpYWwodGhpcy5fbWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJQcmVwYXJlci5wYXRjaGVzU3RvcmUuc2V0SW5zdGFuY2luZyhcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kZSA9PT0gUmVuZGVyTW9kZS5JbnN0YW5jaW5nQWNjZWxlcmF0b3IgPyBuZXcgVGVycmFpblBhdGhjZXNJbnN0YW5jaW5nKCkgOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkNvbWJpbmVJbnN0YW5jaW5nQWNjZWxlcmF0b3IgPyBuZXcgVGVycmFpblBhdGhjZXNDb21iaW5lSW5zdGFuY2luZygpIDpcclxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOndpcmVmcmFtZScsICgpID0+IHsgdGhpcy5fcmVuZGVyUHJlcGFyZXIud2lyZWZyYW1lID0gdGhpcy53aXJlZnJhbWU7IH0pO1xyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6Y2FzdFNoYWRvdycsICgpID0+IHsgdGhpcy5fcmVuZGVyUHJlcGFyZXIuY2FzdFNoYWRvdyA9IHRoaXMuY2FzdFNoYWRvdzsgfSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpyZWNlaXZlU2hhZG93JywgKCkgPT4geyB0aGlzLl9yZW5kZXJQcmVwYXJlci5yZWNlaXZlU2hhZG93ID0gdGhpcy5yZWNlaXZlU2hhZG93OyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjphY3RpdmVMYXllcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGFpbnRlck1hdGVyaWFsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6bGF5ZXJzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVMYXllcnMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpicnVzaCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQnJ1c2goKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGFpbnRlck1hdGVyaWFsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6aGVpZ2h0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLnNldE1heEhlaWdodCh0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRlcnJhaW5NYXRlcmlhbFBhcmFtZXRlcnMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjp6RmFyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLnNldFpGYXIodGhpcy56RmFyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0QnJ1c2goKSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRNYXAgPSB0aGlzLnBhaW50ZXJTZXR0aW5ncy5zcGxhdE1hcC5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICB0aGlzLl9icnVzaEhlaWdodE1hcCA9IG5ldyBIZWlnaHRNYXAoMjU2LCAyNTYsIDEwMCk7XHJcbiAgICAgICAgdGhpcy5fY29sb3JQYWludGVyID0gbmV3IENvbG9yUGFpbnRlcih0aGlzLmFwcCwgc3BsYXRNYXApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZVBhaW50ZXJNYXRlcmlhbCgpIHtcclxuICAgICAgICB0aGlzLl9jb2xvclBhaW50ZXIudXBkYXRlU2V0dGluZ3ModGhpcy5icnVzaCwgdGhpcy5hY3RpdmVMYXllcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlQnJ1c2goKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2JydXNoU2l6ZSA9IHRoaXMuYnJ1c2guc2l6ZSB8IDA7XHJcbiAgICAgICAgdGhpcy5fYnJ1c2hPcGFjaXR5ID0gdGhpcy5icnVzaC5vcGFjaXR5O1xyXG5cclxuICAgICAgICBjb25zdCBhY3RpdmVCcnVzaCA9IHRoaXMuYnJ1c2guYWN0aXZlIHwgMDtcclxuXHJcbiAgICAgICAgaWYgKGFjdGl2ZUJydXNoID09PSB0aGlzLl9hY3RpdmVCcnVzaCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYnJ1c2gudGV4dHVyZXNbYWN0aXZlQnJ1c2hdKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JydXNoIGltYWdlIHVuc2V0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBicnVzaFRleHR1cmUgPSB0aGlzLmJydXNoLnRleHR1cmVzW2FjdGl2ZUJydXNoXS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICBjb25zdCBicnVzaEltZyA9IGJydXNoVGV4dHVyZS5nZXRTb3VyY2UoKSBhcyB1bmtub3duIGFzIEltYWdlQml0bWFwO1xyXG5cclxuICAgICAgICBpZiAoIWJydXNoSW1nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JydXNoIGltYWdlIHVuc2V0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9hY3RpdmVCcnVzaCA9IGFjdGl2ZUJydXNoO1xyXG4gICAgICAgIHRoaXMuX2JydXNoSGVpZ2h0TWFwLmZyb21JbWFnZShicnVzaEltZyk7XHJcbiAgICAgICAgdGhpcy5fYnJ1c2hIZWlnaHRNYXAuc21vb3RoKDEsIDEpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9icnVzaEhlaWdodE1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEhlaWdodE1hcEJ1ZmZlcihjaHVua1NpemU6IG51bWJlcikge1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBNb3ZlIHRvIHRlcnJhaW4gY29sbGlkZXJcclxuICAgICAgICAvLyBUT0RPOiBBbW1vIGpzIGludGVncmF0aW9uXHJcblxyXG4gICAgICAgIGNvbnN0IGJ1ZmZlcjogYW55ID0gKCh3aW5kb3cgYXMgYW55KS5BbW1vKSA/IGdldEJ1ZmZlcih0aGlzLndpZHRoLCB0aGlzLmRlcHRoLCB0aGlzLnBhdGNoU2l6ZSwgY2h1bmtTaXplLCB0aGlzLmNvbXByZXNzQWxnb3JpdG0pIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBpZiAoKCh3aW5kb3cgYXMgYW55KS5BbW1vKSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaHQgPSB0aGlzLmNvbXByZXNzQWxnb3JpdG0gPT09ICdub25lJyA/IDAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NBbGdvcml0bSA9PT0gJ3gyJyAgID8gMSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyIDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGhtID0gbmV3IEFtbW8uYnRBbGV4VGVycmFpblBhdGNoZWRIZWlnaHRNYXAodGhpcy53aWR0aCwgdGhpcy5kZXB0aCwgdGhpcy5wYXRjaFNpemUsIGNodW5rU2l6ZSwgMCwgdGhpcy5oZWlnaHQsIGh0LCBidWZmZXIuYnl0ZU9mZnNldCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0gbmV3IEFtbW8uYnRBbGV4SGVpZ2h0ZmllbGRUZXJyYWluU2hhcGUoaG0sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VuZFRyYW5zZm9ybSA9IG5ldyBBbW1vLmJ0VHJhbnNmb3JtKCk7XHJcblxyXG4gICAgICAgICAgICBncm91bmRUcmFuc2Zvcm0uc2V0SWRlbnRpdHkoKTtcclxuICAgICAgICAgICAgZ3JvdW5kVHJhbnNmb3JtLnNldE9yaWdpbihuZXcgQW1tby5idFZlY3RvcjMoMCwgdGhpcy5oZWlnaHQgLyAyLCAwKSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBncm91bmRNYXNzID0gMDtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdW5kTG9jYWxJbmVydGlhID0gbmV3IEFtbW8uYnRWZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgICAgICBjb25zdCBncm91bmRNb3Rpb25TdGF0ZSA9IG5ldyBBbW1vLmJ0RGVmYXVsdE1vdGlvblN0YXRlKGdyb3VuZFRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VuZEJvZHkgPSBuZXcgQW1tby5idFJpZ2lkQm9keShuZXcgQW1tby5idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm8oZ3JvdW5kTWFzcywgZ3JvdW5kTW90aW9uU3RhdGUsIHNoYXBlLCBncm91bmRMb2NhbEluZXJ0aWEpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLnN5c3RlbXMucmlnaWRib2R5IS5keW5hbWljc1dvcmxkLmFkZFJpZ2lkQm9keShncm91bmRCb2R5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBidWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdFRlcnJhaW4oKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdG1wQ2h1bmtTaXplID0gdGhpcy5wYXRjaFNpemUgKiAyIC0gMTsgLy8gMjU3LCA1MTMsIC4uLlxyXG4gICAgICAgIGNvbnN0IGNodW5rU2l6ZSA9IE1hdGgubWluKHRoaXMud2lkdGgsIHRoaXMuZGVwdGgsIHRtcENodW5rU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5faW5pdEhlaWdodE1hcEJ1ZmZlcihjaHVua1NpemUpO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodE1hcCA9IHRoaXMuY29tcHJlc3NBbGdvcml0bSAhPT0gJ25vbmUnXHJcbiAgICAgICAgPyBuZXcgQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXAodGhpcy53aWR0aCwgdGhpcy5kZXB0aCwgdGhpcy5wYXRjaFNpemUsIGNodW5rU2l6ZSwgdGhpcy5oZWlnaHQsIHRoaXMuY29tcHJlc3NBbGdvcml0bSwgYnVmZmVyKVxyXG4gICAgICAgIDogbmV3IFBhdGNoZWRIZWlnaHRNYXAodGhpcy53aWR0aCwgdGhpcy5kZXB0aCwgdGhpcy5wYXRjaFNpemUsIGNodW5rU2l6ZSwgdGhpcy5oZWlnaHQsIGJ1ZmZlcik7XHJcblxyXG4gICAgICAgIHRoaXMuX3RlcnJhaW4gPSBuZXcgTWlkcG9pbnREaXNwVGVycmFpbihoZWlnaHRNYXAsIHRoaXMuekZhcik7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0RmllbGRTaGFwZSA9IG5ldyBIZWlnaHRmaWVsZFNoYXBlKGhlaWdodE1hcCk7XHJcbiAgICAgICAgdGhpcy5fcmF5Y2FzdFJlc3VsdCA9IG5ldyBUZXJyYWluUmF5Y2FzdFJlc3VsdCgpO1xyXG4gICAgICAgIHRoaXMuX2ZydXN0dW0gPSBuZXcgRnJ1c3R1bSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9wYXRjaGVzU3RvcmUgPSBuZXcgVGVycmFpblBhdGNoZXModGhpcy5fdGVycmFpbik7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyUHJlcGFyZXIgPSBuZXcgVGVycmFpblJlbmRlclByZXBhcmVyKHRoaXMuX3BhdGNoZXNTdG9yZSwge1xyXG4gICAgICAgICAgICB3aXJlZnJhbWU6IHRoaXMud2lyZWZyYW1lLFxyXG4gICAgICAgICAgICBjYXN0U2hhZG93OiB0aGlzLmNhc3RTaGFkb3csXHJcbiAgICAgICAgICAgIHJlY2VpdmVTaGFkb3c6IHRoaXMucmVjZWl2ZVNoYWRvdyxcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl90ZXJyYWluLCB0aGlzLl9oZWlnaHRGaWVsZFNoYXBlLCB0aGlzLl9yZW5kZXJQcmVwYXJlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY3JlYXRlVGVycmFpbk1hdGVyaWFsKCkge1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsID0gVGVycmFpblBhdGNoZXMuY3JlYXRlTWF0ZXJpYWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVUZXJyYWluTWF0ZXJpYWxQYXJhbWV0ZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih0ZXJyYWluU3BsYXRNYXBQYXJhbU5hbWUsIHRoaXMuX2NvbG9yUGFpbnRlci5iYWNrZ3JvdW5kKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIodGVycmFpbk1heEhlaWdodFBhcmFtTmFtZSwgdGhpcy5fdGVycmFpbi5tYXhIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZUxheWVycygpIHtcclxuXHJcbiAgICAgICAgLy8gVE9ET1xyXG4gICAgICAgIGNvbnN0IG1heENvdW50ID0gNTtcclxuICAgICAgICBjb25zdCB3aWR0aCAgPSAxMDI0O1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IDEwMjQ7XHJcblxyXG4gICAgICAgIGxldCBsZW5ndGggICA9IDA7XHJcbiAgICAgICAgbGV0IGZsYWdzICAgID0gW107XHJcbiAgICAgICAgbGV0IHNjYWxlcyAgID0gW107XHJcbiAgICAgICAgbGV0IG9mZnNldHMgID0gW107XHJcbiAgICAgICAgbGV0IGRpZmZ1c2VzID0gW107XHJcbiAgICAgICAgbGV0IG5vcm1hbHMgID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4Q291bnQ7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgbGV0IGZsYWcgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKGkgPCB0aGlzLmxheWVycy5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXllciAgICAgPSB0aGlzLmxheWVyc1tpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZ1c2UgICA9IGxheWVyLmRpZmZ1c2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxNYXAgPSBsYXllci5ub3JtYWxNYXA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRpZmZ1c2UpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZSA9IGRpZmZ1c2UucmVzb3VyY2UgYXMgcGN4LlRleHR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcrKztcclxuICAgICAgICAgICAgICAgICAgICBsZW5ndGgrKztcclxuICAgICAgICAgICAgICAgICAgICBkaWZmdXNlcy5wdXNoKHRleHR1cmUuZ2V0U291cmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlcy5wdXNoKGxheWVyLnNpemUueCwgbGF5ZXIuc2l6ZS55KTtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRzLnB1c2gobGF5ZXIub2Zmc2V0LngsIGxheWVyLm9mZnNldC55KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vcm1hbE1hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbHMucHVzaCgobm9ybWFsTWFwLnJlc291cmNlIGFzIHBjeC5UZXh0dXJlKS5nZXRTb3VyY2UoKSk7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZsYWdzLnB1c2goZmxhZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9sYXllcnNEaWZmdXNlPy5kZXN0cm95KCk7XHJcbiAgICAgICAgLy90aGlzLl9sYXllcnNEaWZmdXNlID0gdGhpcy5sYXllcnNbMF0uZGlmZnVzZS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICB0aGlzLl9sYXllcnNEaWZmdXNlID0gbmV3IHBjLlRleHR1cmUodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHtcclxuICAgICAgICAgICAgbmFtZTogJ3RlcnJhaW5MYXllcnNEaWZmdXNlJyxcclxuICAgICAgICAgICAgZm9ybWF0OiBwYy5QSVhFTEZPUk1BVF9SR0JBOCxcclxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcclxuICAgICAgICAgICAgYXJyYXlMZW5ndGg6IGxlbmd0aCxcclxuICAgICAgICAgICAgZmxpcFk6IHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLmlzV2ViR1BVLFxyXG4gICAgICAgICAgICAvL21hZ0ZpbHRlcjogcGMuRklMVEVSX0xJTkVBUixcclxuICAgICAgICAgICAgLy9taW5GaWx0ZXI6IHBjLkZJTFRFUl9MSU5FQVJfTUlQTUFQX0xJTkVBUixcclxuICAgICAgICAgICAgbWlwbWFwczogdHJ1ZSxcclxuICAgICAgICAgICAgYWRkcmVzc1U6IHBjLkFERFJFU1NfUkVQRUFULFxyXG4gICAgICAgICAgICBhZGRyZXNzVjogcGMuQUREUkVTU19SRVBFQVQsXHJcbiAgICAgICAgICAgIGFkZHJlc3NXOiBwYy5BRERSRVNTX0NMQU1QX1RPX0VER0UsXHJcbiAgICAgICAgICAgIGxldmVsczogWyBkaWZmdXNlcyBhcyBhbnkgXVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2xheWVyc0RpZmZ1c2UudXBsb2FkKCk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX2xheWVyc0RpZmZ1c2UpO1xyXG5cclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoYHVUZXJyYWluTGF5ZXJzQ291bnRgLCBsZW5ndGgpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihgdVRlcnJhaW5MYXllcnNEaWZmdXNlYCwgdGhpcy5fbGF5ZXJzRGlmZnVzZSk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGB1VGVycmFpbkxheWVyc0ZsYWdzWzBdYCwgZmxhZ3MpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihgdVRlcnJhaW5MYXllcnNTY2FsZVswXWAsIHNjYWxlcyk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGB1VGVycmFpbkxheWVyc09mZnNldFswXWAsIG9mZnNldHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZU1lc2goKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyUHJlcGFyZXIucGF0Y2hlc1N0b3JlLmN1c3RvbUZvcndhcmRSZW5kZXJlciA9IHRoaXMucmVuZGVyTW9kZSA9PT0gUmVuZGVyTW9kZS5DdXN0b21Gb3J3YXJkUmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyUHJlcGFyZXIucGF0Y2hlc1N0b3JlLnNldEluc3RhbmNpbmcoXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kZSA9PT0gUmVuZGVyTW9kZS5JbnN0YW5jaW5nQWNjZWxlcmF0b3IgPyBuZXcgVGVycmFpblBhdGhjZXNJbnN0YW5jaW5nKCkgOlxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlck1vZGUgPT09IFJlbmRlck1vZGUuQ29tYmluZUluc3RhbmNpbmdBY2NlbGVyYXRvciA/IG5ldyBUZXJyYWluUGF0aGNlc0NvbWJpbmVJbnN0YW5jaW5nKCkgOlxyXG4gICAgICAgICAgICB1bmRlZmluZWRcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlclByZXBhcmVyLnBhdGNoZXNTdG9yZS5pbml0KHRoaXMuYXBwLCB0aGlzLmVudGl0eSwgdGhpcy5fbWF0ZXJpYWwpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIF9pbml0aWFsaXplTW91c2UoKSB7XHJcbiAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9uKHBjLkVWRU5UX01PVVNFTU9WRSwgdGhpcy5fb25Nb3VzZU1vdmUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYXBwLm1vdXNlPy5vbihwYy5FVkVOVF9NT1VTRVdIRUVMLCB0aGlzLl9vbk1vdXNlV2hlZWwsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMub24oJ2Rlc3Ryb3knLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLm1vdXNlPy5vZmYocGMuRVZFTlRfTU9VU0VNT1ZFLCB0aGlzLl9vbk1vdXNlTW92ZSwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLm1vdXNlPy5vZmYocGMuRVZFTlRfTU9VU0VXSEVFTCwgdGhpcy5fb25Nb3VzZVdoZWVsLCB0aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vbk1vdXNlTW92ZShldmVudDogcGN4Lk1vdXNlRXZlbnQpIHtcclxuICAgICAgICB0aGlzLl9sYXN0TW91c2VNb3ZlRXZlbnQgPSBldmVudDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vbk1vdXNlV2hlZWwoZXZlbnQ6IHBjeC5Nb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gdGhpcy5fYnJ1c2hTaXplICsgZXZlbnQud2hlZWxEZWx0YSAqIHRoaXMuX2JydXNoU2l6ZVN0ZXA7XHJcbiAgICAgICAgdGhpcy5fYnJ1c2hTaXplID0gTWF0aC5taW4oTWF0aC5tYXgoY2FuZGlkYXRlLCBicnVzaE1pblNpemUpLCBicnVzaE1heFNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRpYWxpemVLZXlib2FyZCgpIHtcclxuICAgICAgICB0aGlzLmFwcC5rZXlib2FyZD8ub24ocGMuRVZFTlRfS0VZRE9XTiwgdGhpcy5fb25LZXlib2FyZERvd24sIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYXBwLmtleWJvYXJkPy5vbihwYy5FVkVOVF9LRVlVUCwgdGhpcy5fb25LZXlib2FyZFVwLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm9uKCdkZXN0cm95JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZT8ub2ZmKHBjLkVWRU5UX0tFWURPV04sIHRoaXMuX29uS2V5Ym9hcmREb3duLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9mZihwYy5FVkVOVF9LRVlVUCwgdGhpcy5fb25LZXlib2FyZFVwLCB0aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9rZXlBZGRMb2NrID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgX2tleVN1YkxvY2sgPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfb25LZXlib2FyZERvd24oZXZlbnQ6IHBjeC5LZXlib2FyZEV2ZW50KSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9rZXlBZGRMb2NrID09PSBmYWxzZSAmJiBldmVudC5rZXkgPT09IHBjLktFWV9BREQpIHtcclxuICAgICAgICAgICAgdGhpcy5fa2V5QWRkTG9jayA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2JydXNoT3BhY2l0eSA9IE1hdGgubWF4KHRoaXMuX2JydXNoT3BhY2l0eSArIHRoaXMuX2JydXNoT3BhY2l0eVN0ZXAsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2tleVN1YkxvY2sgPT09IGZhbHNlICYmIGV2ZW50LmtleSA9PT0gcGMuS0VZX1NVQlRSQUNUKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tleVN1YkxvY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9icnVzaE9wYWNpdHkgPSBNYXRoLm1pbih0aGlzLl9icnVzaE9wYWNpdHkgLSB0aGlzLl9icnVzaE9wYWNpdHlTdGVwLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfb25LZXlib2FyZFVwKGV2ZW50OiBwY3guS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5rZXkgPT09IHBjLktFWV9BREQpIHtcclxuICAgICAgICAgICAgdGhpcy5fa2V5QWRkTG9jayA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudC5rZXkgPT09IHBjLktFWV9TVUJUUkFDVCkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXlTdWJMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgX3VwZGF0ZUhlaWdodE1hcEZyb21BdHRyKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5oZWlnaHRNYXAuZmlsZSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmhlaWdodE1hcC5maWxlLnJlc291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0hlaWdodCBtYXAgZmlsZSB1bnNldC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuaGVpZ2h0TWFwLmZpbGUucmVzb3VyY2UgYXMgQXJyYXlCdWZmZXI7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3RlcnJhaW4ubG9hZEhlaWdodE1hcEZyb21GaWxlKGRhdGEsIHtcclxuICAgICAgICAgICAgICAgIGFkYXB0aXZlTWF4SGVpZ2h0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYWRhcHRpdmVXaWR0aEFuZERlcHRoOiB0cnVlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5oZWlnaHRNYXAudGV4dHVyZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdIZWlnaHQgbWFwIGltYWdlIHVuc2V0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNvdXJjZSA9IHRleHR1cmUucmVzb3VyY2UgYXMgcGN4LlRleHR1cmU7XHJcbiAgICAgICAgICAgIGNvbnN0IGltZyA9IHJlc291cmNlLmdldFNvdXJjZSgpIGFzIGFueTtcclxuXHJcbiAgICAgICAgICAgIGlmICghaW1nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0hlaWdodCBtYXAgaW1hZ2UgdW5zZXQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3RlcnJhaW4ubG9hZEhlaWdodE1hcEZyb21JbWcoaW1nLCB0aGlzLmhlaWdodE1hcC5zbW9vdGhGYWN0b3IsIHRoaXMuaGVpZ2h0TWFwLnNtb290aFJhZGl1cyk7XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPOiBjbGVhciBoZWlnaHRtYXBcclxuICAgICAgICAgICAgcmVzb3VyY2UuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcmVuZGVyUHJlcGFyZXIucGF0Y2hlc1N0b3JlLnVwZGF0ZUFhYmIoKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJQcmVwYXJlci5wYXRjaGVzU3RvcmUudXBkYXRlSGVpZ2h0cyh7XHJcbiAgICAgICAgICAgIG1pblg6IDAsXHJcbiAgICAgICAgICAgIG1pblo6IDAsXHJcbiAgICAgICAgICAgIG1heFg6IHRoaXMud2lkdGgsXHJcbiAgICAgICAgICAgIG1heFo6IHRoaXMuZGVwdGhcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zYXZlSGVpZ2h0TWFwVG9JbWcoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYmFzZTY0ID0gdGhpcy5fdGVycmFpbi5oZWlnaHRNYXAudG9JbWFnZSgpO1xyXG4gICAgICAgIGNvbnN0IGltYWdlICA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGltYWdlLnNyYyA9IGJhc2U2NDtcclxuXHJcbiAgICAgICAgY29uc3QgdyA9IHdpbmRvdy5vcGVuKHVuZGVmaW5lZCwgJ19ibGFuaycpITtcclxuICAgICAgICB3LmRvY3VtZW50LndyaXRlKGltYWdlLm91dGVySFRNTCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBfc2F2ZUhlaWdodE1hcFRvRmlsZSgpIHtcclxuXHJcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHRoaXMuX3RlcnJhaW4uaGVpZ2h0TWFwLnRvRmlsZSgpO1xyXG4gICAgICAgIGNvbnN0IGJsb2JVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xyXG5cclxuICAgICAgICBhLmhyZWYgICAgID0gYmxvYlVybDtcclxuICAgICAgICBhLmRvd25sb2FkID0gYGhtXyR7K3RpbWVzdGFtcH0ke2hlaWdodE1hcEV4dH1gO1xyXG4gICAgICAgIGEuY2xpY2soKTtcclxuXHJcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChibG9iVXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbG9yUGFpbnRlci5wYWludGluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9jb2xvclBhaW50ZXIuc3RvcFBhaW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5hdXRvUmVuZGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhRW50aXR5ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhRW50aXR5LmNhbWVyYSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FtZXJhID0gdGhpcy5jYW1lcmFFbnRpdHkuY2FtZXJhO1xyXG4gICAgICAgICAgICBjb25zdCBtYXQgICAgPSB0aGlzLmVudGl0eS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZSAgPSBtYXQuZ2V0U2NhbGUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0TW91c2VNb3ZlRXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgaGFzQ2hhbmdlcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuc2NyZWVuVG9Xb3JsZCh0aGlzLl9sYXN0TW91c2VNb3ZlRXZlbnQueCwgdGhpcy5fbGFzdE1vdXNlTW92ZUV2ZW50LnksIGNhbWVyYS5uZWFyQ2xpcCwgdGhpcy5fcmF5U3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgY2FtZXJhLnNjcmVlblRvV29ybGQodGhpcy5fbGFzdE1vdXNlTW92ZUV2ZW50LngsIHRoaXMuX2xhc3RNb3VzZU1vdmVFdmVudC55LCBjYW1lcmEuZmFyQ2xpcCwgdGhpcy5fcmF5RW5kKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yYXlEaXJlY3Rpb24uc3ViMih0aGlzLl9yYXlFbmQsIHRoaXMuX3JheVN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlUmF5ID0gIXRoaXMuX3JheS5vcmlnaW4uZXF1YWxzKHRoaXMuX3JheVN0YXJ0KSB8fCAhdGhpcy5fcmF5LmRpcmVjdGlvbi5lcXVhbHModGhpcy5fcmF5RGlyZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlUmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmF5LnNldCh0aGlzLl9yYXlTdGFydCwgdGhpcy5fcmF5RGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yYXljYXN0UmVzdWx0LmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW50ZXJzZWN0c1JheVJlc3VsdCA9IHRoaXMuX2hlaWdodEZpZWxkU2hhcGUuaW50ZXJzZWN0c1JheShtYXQsIHRoaXMuX3JheSwgdGhpcy5fcmF5Y2FzdFJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ludGVyc2VjdHNSYXlSZXN1bHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnJ1c2hTaXplWCA9IHRoaXMuX2JydXNoU2l6ZSAvIHNjYWxlLnggfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJydXNoU2l6ZVogPSB0aGlzLl9icnVzaFNpemUgLyBzY2FsZS56IHwgMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5wYXRjaFZlcnRpY2VzLmdldFBvc2l0aW9uKHRoaXMuX3JheWNhc3RSZXN1bHQudmVydGV4SW5kZXgsIHRlcnJhaW5Mb2NhbFZlcnRleFBvcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8ud2FzUHJlc3NlZChwYy5LRVlfSSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5fcmF5Y2FzdFJlc3VsdCwgdGhpcy5fbG9jYWxDYW1lcmFQb3NpdGlvbiwgdGVycmFpbkxvY2FsVmVydGV4UG9zKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRyYXdQb2ludCh7IGNlbnRlcjogdGhpcy5fcmF5Y2FzdFJlc3VsdC5wb2ludCwgcmFkaXVzOiB0aGlzLl9icnVzaFNpemUsIG51bVNlZ21lbnRzOiAxMCwgZGVwdGhUZXN0OiB0cnVlLCBjb2xvcjogcGMuQ29sb3IuR1JBWSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBkcmF3RGlyZWN0aW9uVmVjdG9yKHRoaXMuX3JheWNhc3RSZXN1bHQucG9pbnQsIHRoaXMuX3JheWNhc3RSZXN1bHQubm9ybWFsLCBwYy5Db2xvci5NQUdFTlRBKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fbG9jayA8IDEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAubW91c2U/LmlzUHJlc3NlZChwYy5NT1VTRUJVVFRPTl9MRUZUKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFpbnRpbmcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCAgID0gdGhpcy5fdGVycmFpbi53aWR0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXB0aCAgID0gdGhpcy5fdGVycmFpbi5kZXB0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4ICAgICAgID0gdGVycmFpbkxvY2FsVmVydGV4UG9zLnggLyB3aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgICAgICAgPSB0ZXJyYWluTG9jYWxWZXJ0ZXhQb3MueiAvIGRlcHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVXICA9IGJydXNoU2l6ZVggLyB3aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlSCAgPSBicnVzaFNpemVaIC8gZGVwdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29sb3JQYWludGVyLnN0YXJ0UGFpbnQoZHQsIHgsIHksIHNjYWxlVywgc2NhbGVIKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdmVyYWdlID0gKGJydXNoU2l6ZVggKyBicnVzaFNpemVaKSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXJYID0gdGVycmFpbkxvY2FsVmVydGV4UG9zLnggfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VudGVyWiA9IHRlcnJhaW5Mb2NhbFZlcnRleFBvcy56IHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHpvbmUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWDogY2VudGVyWCAtIGJydXNoU2l6ZVgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WDogY2VudGVyWCArIGJydXNoU2l6ZVggKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblo6IGNlbnRlclogLSBicnVzaFNpemVaLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFo6IGNlbnRlclogKyBicnVzaFNpemVaICsgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfQUxUKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RlcnJhaW4uc21vb3RoSGVpZ2h0c1pvbmUoem9uZSwgYXZlcmFnZSAqIHRoaXMuX2JydXNoT3BhY2l0eSAqIGR0IC8gMTAsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVnYXRpdmUgPSAhIXRoaXMuYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX0NPTlRST0wpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcGVuZFZhbHVlID0gKG5lZ2F0aXZlID8gLWF2ZXJhZ2UgOiBhdmVyYWdlKSAqIHRoaXMuX2JydXNoT3BhY2l0eSAqIGR0IC8gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5hcHBlbmRIZWlnaHRNYXAodGhpcy5fYnJ1c2hIZWlnaHRNYXAsIGFwcGVuZFZhbHVlLCB6b25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hcHAua2V5Ym9hcmQ/Lndhc1ByZXNzZWQocGMuS0VZX0kpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coem9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5yZWNhbGN1bGF0ZU1pbk1heCh6b25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlclByZXBhcmVyLnBhdGNoZXNTdG9yZS51cGRhdGVIZWlnaHRzKHpvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRtcE1hdC5pbnZlcnQobWF0KTtcclxuICAgICAgICAgICAgdG1wTWF0LnRyYW5zZm9ybVBvaW50KGNhbWVyYS5lbnRpdHkuZ2V0UG9zaXRpb24oKSwgdGhpcy5fbG9jYWxDYW1lcmFQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9mcnVzdHVtLmZydXN0dW0gICA9IGNhbWVyYS5mcnVzdHVtO1xyXG4gICAgICAgICAgICB0aGlzLl9mcnVzdHVtLnRyYW5zZm9ybSA9IG1hdDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3RlcnJhaW4udXBkYXRlTG9kcyh0aGlzLl9sb2NhbENhbWVyYVBvc2l0aW9uLCB0aGlzLmxvZEJ5WVBvcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclByZXBhcmVyLnVwZGF0ZSh0aGlzLl9mcnVzdHVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8ud2FzUHJlc3NlZChwYy5LRVlfTCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5wcmludExvZE1hcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkPy53YXNQcmVzc2VkKHBjLktFWV9QKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zYXZlSGVpZ2h0TWFwVG9JbWcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8ud2FzUHJlc3NlZChwYy5LRVlfTykpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2F2ZUhlaWdodE1hcFRvRmlsZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGVidWdcclxuICAgICAgICAvL3RoaXMuYXBwLmRyYXdUZXh0dXJlKCAwLjUsIC0wLjYsIDAuNSwgMC4zLCB0aGlzLnBhaW50ZXJTZXR0aW5ncy5zcGxhdE1hcC5yZXNvdXJjZSwgdW5kZWZpbmVkIGFzIGFueSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRlcnJhaW47XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluU2NyaXB0TmFtZSA9IFwiVGVycmFpblwiO1xyXG5leHBvcnQgY29uc3QgYmlnVGVycmFpbkVkaXRvclNjcmlwdE5hbWUgPSBcImJpZ1RlcnJhaW5FZGl0b3JcIjtcclxuXHJcbnBjLnJlZ2lzdGVyU2NyaXB0KFRlcnJhaW4sIHRlcnJhaW5TY3JpcHROYW1lKTtcclxucGMucmVnaXN0ZXJTY3JpcHQoVGVycmFpbiwgYmlnVGVycmFpbkVkaXRvclNjcmlwdE5hbWUpO1xyXG5cclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcInJlbmRlck1vZGVcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBlbnVtOiBtYXBUaXRsZUVudW0oUmVuZGVyTW9kZSksIGRlZmF1bHQ6IFJlbmRlck1vZGUuU3RhbmRhcmQsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiY2FzdFNoYWRvd1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcInJlY2VpdmVTaGFkb3dcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogdHJ1ZSwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJsb2RCeVlQb3NcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogdHJ1ZSwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJ6RmFyXCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogNTAwMCwgbWluOiAxLCBzdGVwOiAxLCBwcmVjaXNpb246IDAsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwid2lkdGhcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBlbnVtOiB0ZXJyYWluU2l6ZUVudW0sIGRlZmF1bHQ6IHRlcnJhaW5TaXplRW51bURlZmF1bHQsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiZGVwdGhcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBlbnVtOiB0ZXJyYWluU2l6ZUVudW0sIGRlZmF1bHQ6IHRlcnJhaW5TaXplRW51bURlZmF1bHQsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicGF0Y2hTaXplXCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZW51bTogdGVycmFpblBhdGNoU2l6ZUVudW0sIGRlZmF1bHQ6IHRlcnJhaW5QYXRjaFNpemVFbnVtRGVmYXVsdCwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJoZWlnaHRcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAxMCwgbWluOiAxLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImNvbXByZXNzQWxnb3JpdG1cIiwgeyB0eXBlOiBcInN0cmluZ1wiLCBlbnVtOiB0ZXJyYWluSGVpZ2h0c0NvbXByZXNzQWxnb3JpdG0sIGRlZmF1bHQ6IHRlcnJhaW5IZWlnaHRzQ29tcHJlc3NBbGdvcml0bURlZmF1bHQsIH0pO1xyXG5cclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImxheWVyXCIsIHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogJ1RlcnJhaW5FZGl0b3InLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImNhbWVyYUVudGl0eVwiLCB7IHR5cGU6IFwiZW50aXR5XCIgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJhdXRvUmVuZGVyXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IHRydWUsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicGFpbnRpbmdcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogZmFsc2UsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwid2lyZWZyYW1lXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlLCB9KTtcclxuXHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJoZWlnaHRNYXBcIiwge1xyXG4gICAgdHlwZTogJ2pzb24nLFxyXG4gICAgc2NoZW1hOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnZmlsZScsXHJcbiAgICAgICAgICAgIHR5cGU6ICdhc3NldCcsXHJcbiAgICAgICAgICAgIGFzc2V0VHlwZTogJ2JpbmFyeScsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICd0ZXh0dXJlJyxcclxuICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxyXG4gICAgICAgICAgICBhc3NldFR5cGU6ICd0ZXh0dXJlJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ3Ntb290aEZhY3RvcicsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgXHJcbiAgICAgICAgICAgICAgICBUbyB3aGF0IGV4dGVudCBuZWlnaGJvcnMgaW5mbHVlbmNlIHRoZSBuZXcgaGVpZ2h0OlxyXG4gICAgICAgICAgICAgICAgVmFsdWUgb2YgMCB3aWxsIGlnbm9yZSBuZWlnaGJvcnMgKG5vIHNtb290aGluZykuXHJcbiAgICAgICAgICAgICAgICBWYWx1ZSBvZiAxIHdpbGwgaWdub3JlIHRoZSBub2RlIG9sZCBoZWlnaHQuXHJcbiAgICAgICAgICAgIGAsXHJcbiAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDEsXHJcbiAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgbWF4OiAxLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnc21vb3RoUmFkaXVzJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGBUaGUgcmFkaXVzIG9mIGZhY3RvciBzbW9vdGguYCxcclxuICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogMSxcclxuICAgICAgICAgICAgc3RlcDogMSxcclxuICAgICAgICAgICAgbWluOiAxLFxyXG4gICAgICAgIH1cclxuICAgIF1cclxufSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiYnJ1c2hcIiwge1xyXG4gICAgdHlwZTogXCJqc29uXCIsXHJcbiAgICBzY2hlbWE6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiYWN0aXZlXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBicnVzaCB0ZXh0dXJlIGluZGV4LlwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAwLFxyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIHN0ZXA6IDEsXHJcbiAgICAgICAgICAgIHByZWNpc2lvbjogMCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJzaXplXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBicnVzaCBzaXplXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDEwLFxyXG4gICAgICAgICAgICBtaW46IGJydXNoTWluU2l6ZSxcclxuICAgICAgICAgICAgbWF4OiBicnVzaE1heFNpemUsXHJcbiAgICAgICAgICAgIHN0ZXA6IDEsXHJcbiAgICAgICAgICAgIHByZWNpc2lvbjogMCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJvcGFjaXR5XCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBicnVzaCBvcGFjaXR5XCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDAuNSxcclxuICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICBtYXg6IDEsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwidGV4dHVyZXNcIixcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGJydXNoIHRleHR1cmVzXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcclxuICAgICAgICAgICAgYXNzZXRUeXBlOiAndGV4dHVyZScsXHJcbiAgICAgICAgICAgIGFycmF5OiB0cnVlLFxyXG4gICAgICAgIH1cclxuICAgIF1cclxufSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiYWN0aXZlTGF5ZXJcIiwgeyB0eXBlOiAnbnVtYmVyJywgZGVmYXVsdDogMCwgbWluOiAwLCBtYXg6IDMyLCBzdGVwOiAxLCBwcmVjaXNpb246IDAsIH0pO1xyXG5cclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImxheWVyc1wiLCB7XHJcbiAgICB0eXBlOiBcImpzb25cIixcclxuICAgIGFycmF5OiB0cnVlLFxyXG4gICAgc2NoZW1hOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcIm5hbWVcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiTmFtZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcImRpZmZ1c2VcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiRGlmZnVzZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgIGFzc2V0VHlwZTogXCJ0ZXh0dXJlXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwibm9ybWFsTWFwXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIk5vcm1hbCBNYXBcIixcclxuICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxyXG4gICAgICAgICAgICBhc3NldFR5cGU6IFwidGV4dHVyZVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcInNpemVcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiU2l6ZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInZlYzJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogWzEsIDFdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwib2Zmc2V0XCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIk9mZnNldFwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInZlYzJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogWzAsIDBdXHJcbiAgICAgICAgfSxcclxuICAgIF1cclxufSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicGFpbnRlclNldHRpbmdzXCIsIHtcclxuICAgIHR5cGU6IFwianNvblwiLFxyXG4gICAgc2NoZW1hOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcInNwbGF0TWFwXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcclxuICAgICAgICAgICAgYXNzZXRUeXBlOiBcInRleHR1cmVcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiU3BsYXQgTWFwXCIsXHJcbiAgICAgICAgfSxcclxuICAgIF1cclxufSk7IiwiaW1wb3J0IHsgR3Jhc3NGaWVsZFRleHR1cmUgfSBmcm9tIFwiLi4vR3Jhc3NGaWVsZEhlbHBlcnMvR3Jhc3NGaWVsZFRleHR1cmUubWpzXCI7XHJcbmltcG9ydCB7IGRyYXdQb3NQYXJhbU5hbWUsIGdldEdyYXNzU2hhZGVyQ2h1bmtzLCBsb2QyT2Zmc2V0WFpQYXJhbU5hbWUsIG9mZnNldEF0dHJOYW1lLCBsb2QxT2Zmc2V0WFpQYXJhbU5hbWUsIHNoYXBlQXR0ck5hbWUsIHRpbWVQYXJhbU5hbWUsIHZpbmRleEF0dHJOYW1lLCB3aW5kSW50ZW5zaXR5UGFyYW1OYW1lLCB0ZXJyYWluU2NhbGVQYXJhbU5hbWUgfSBmcm9tIFwiLi4vR3Jhc3NGaWVsZEhlbHBlcnMvR3Jhc3NTaGFkZXJDaHVuay5tanNcIjtcclxuaW1wb3J0IHsgZHJhd0JveCB9IGZyb20gXCIuLi9TaGFyZWQvRGVidWcubWpzXCI7XHJcbmltcG9ydCBSYW5kb20gZnJvbSBcIi4uL1NoYXJlZC9SYW5kb20ubWpzXCI7XHJcbmltcG9ydCB7IGdldEhlaWdodE1hcEZvcm1hdCB9IGZyb20gXCIuLi9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlcy5tanNcIjtcclxuaW1wb3J0IHsgdGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZSwgdGVycmFpbk1heEhlaWdodFBhcmFtTmFtZSB9IGZyb20gXCIuLi9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlc1NoYWRlckNodW5rcy5tanNcIjtcclxuaW1wb3J0IFRlcnJhaW4gZnJvbSBcIi4vVGVycmFpbi5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUJ1ZmZlclN0b3JlIHtcclxuXHJcbiAgICAvLyBJbmRpY2VzIGZvciBhIGJsYWRlXHJcbiAgICBpbmRleDogVWludDE2QXJyYXksXHJcblxyXG4gICAgLy8gVGVsbHMgdGhlIHNoYWRlciB3aGljaCB2ZXJ0ZXggb2YgdGhlIGJsYWRlIGl0cyB3b3JraW5nIG9uLlxyXG4gICAgLy8gUmF0aGVyIHRoYW4gc3VwcGx5aW5nIHBvc2l0aW9ucywgdGhleSBhcmUgY29tcHV0ZWQgZnJvbSB0aGlzIHZpbmRleC5cclxuICAgIGluZGV4VmVydHM6IEZsb2F0MzJBcnJheSxcclxuXHJcbiAgICAvLyBTaGFwZSBwcm9wZXJ0aWVzIG9mIGFsbCBibGFkZXNcclxuICAgIC8vIFBvc2l0b24gJiByb3RhdGlvbiBvZiBhbGwgYmxhZGVzXHJcbiAgICBvZmZzZXRBbmRTaGFwZTogRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXksIC8vIHdlYmdwdSBub3Qgc3VwcG9ydCBmbG9hdDE2IChVaW50MTZBcnJheSA9IEZsb2F0MTZBcnJheSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHF1YWQxTWF0cml4ID0gW1xyXG4gICAgMiwgMiwgIDEsIDIsICAwLCAyLFxyXG4gICAgMCwgMSwgIDAsIDAsICAxLCAwLFxyXG4gICAgMiwgMCwgIDIsIDEsICAxLCAxXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgcXVhZDJNYXRyaXggPSBbXHJcbiAgICA0LCA0LCAgMywgNCwgIDIsIDQsICAxLCA0LFxyXG4gICAgMCwgNCwgIDAsIDMsICAwLCAyLCAgMCwgMSxcclxuICAgIDAsIDAsICAxLCAwLCAgMiwgMCwgIDMsIDAsXHJcbiAgICA0LCAwLCAgNCwgMSwgIDQsIDIsICA0LCAzXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgcXVhZE1hdHJpeEluZGV4ZXMgPSBbXHJcbiAgICBbNCwgMywgMl0sIC8vIDBcclxuICAgIFs1LCA4LCAxXSwgLy8gMVxyXG4gICAgWzYsIDcsIDBdLCAvLyAyXHJcbl07XHJcblxyXG5jb25zdCBsb2QxUXVhZENvdW50ID0gODtcclxuY29uc3QgbG9kMlF1YWRDb3VudCA9IDE2O1xyXG5jb25zdCB0bXBNYXQgPSBuZXcgcGMuTWF0NCgpO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR3Jhc3NUZXh0dXJlQXR0cmlidXRlIHtcclxuICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcclxuICAgIHJlYWRvbmx5IGRpZmZ1c2U6IHBjeC5Bc3NldDtcclxuICAgIHJlYWRvbmx5IGNvbG9yOiBwY3guQ29sb3I7XHJcbiAgICByZWFkb25seSBjb2xvclJhbmRvbTogcGN4LlZlYzM7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHcmFzc0ZpZWxkIGV4dGVuZHMgcGMuU2NyaXB0VHlwZSB7XHJcblxyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgZ3JpZEVudGl0eTogcGN4LkVudGl0eTtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGZyZWV6ZURyYXdQb3M6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBhdXRvUmVuZGVyOiBib29sZWFuO1xyXG5cclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHBhaW50aW5nOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgd2lyZWZyYW1lOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgY2FzdFNoYWRvdzogYm9vbGVhbjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHJlY2VpdmVTaGFkb3c6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBzZWVkOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSB3aW5kSW50ZW5zaXR5OiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBudW1CbGFkZXM6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHJhZGl1czogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgbG9kMEJsYWRlU2VnczogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgbG9kMUJsYWRlU2VnczogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgbG9kMkJsYWRlU2VnczogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgYmxhZGVXaWR0aDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgYmxhZGVNaW5IZWlnaHQ6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGJsYWRlTWF4SGVpZ2h0OiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSB0ZXh0dXJlczogSUdyYXNzVGV4dHVyZUF0dHJpYnV0ZVtdO1xyXG5cclxuICAgIHB1YmxpYyB0cmFuc2l0aW9uTG93ID0gMC4zMTtcclxuICAgIHB1YmxpYyB0cmFuc2l0aW9uSGlnaCA9IDAuMzY7XHJcblxyXG4gICAgcHJpdmF0ZSBfc2hhcmVkSW5kZXhCdWZmZXI6IHBjeC5JbmRleEJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX3NoYXJlZFZlcnRleEJ1ZmZlcjogcGN4LlZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICBwcml2YXRlIF9idWZmZXJTdG9yZTogSUJ1ZmZlclN0b3JlID0ge30gYXMgYW55O1xyXG4gICAgcHJpdmF0ZSBfc2hhcmVkSW5zdGFuY2luZ0J1ZmZlcjogcGN4LlZlcnRleEJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX21lc2hJbnN0OiBwY3guTWVzaEluc3RhbmNlO1xyXG4gICAgcHJpdmF0ZSBfbWF0ZXJpYWw6IHBjeC5TdGFuZGFyZE1hdGVyaWFsO1xyXG5cclxuICAgIHByaXZhdGUgX2RhdGFUZXh0dXJlOiBHcmFzc0ZpZWxkVGV4dHVyZTtcclxuICAgIHByaXZhdGUgX2NhbWVyYUVudGl0eTogcGN4LkVudGl0eTtcclxuICAgIHByaXZhdGUgX3RlcnJhaW46IFRlcnJhaW47XHJcbiAgICBwcml2YXRlIF90aW1lOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfbGFzdERyYXdQb3M6IHBjeC5WZWMzID0gbmV3IHBjLlZlYzMoKTtcclxuICAgIHByaXZhdGUgX2xvZDFNaW5NYXhTdG9yZTogQXJyYXk8W3BjeC5WZWMzLCBwY3guVmVjMywgYm9vbGVhbl0+ID0gW107XHJcbiAgICBwcml2YXRlIF9sb2QyTWluTWF4U3RvcmU6IEFycmF5PFtwY3guVmVjMywgcGN4LlZlYzMsIGJvb2xlYW5dPiA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgX2FhYmI6IHBjeC5Cb3VuZGluZ0JveDtcclxuXHJcbiAgICBwcml2YXRlIF9vZmZzZXRMb2QxQXJyOiBudW1iZXJbXSA9IFtcclxuICAgICAgICAwLCAwLCAgMCwgMCxcclxuICAgICAgICAwLCAwLCAgMCwgMCxcclxuICAgICAgICAwLCAwLCAgMCwgMCxcclxuICAgICAgICAwLCAwLCAgMCwgMCxcclxuICAgIF07XHJcblxyXG4gICAgcHJpdmF0ZSBfb2Zmc2V0TG9kMkFycjogbnVtYmVyW10gPSBbXHJcbiAgICAgICAgMCwgMCwgIDAsIDAsICAwLCAwLCAgMCwgMCxcclxuICAgICAgICAwLCAwLCAgMCwgMCwgIDAsIDAsICAwLCAwLFxyXG4gICAgICAgIDAsIDAsICAwLCAwLCAgMCwgMCwgIDAsIDAsXHJcbiAgICAgICAgMCwgMCwgIDAsIDAsICAwLCAwLCAgMCwgMCxcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIGdldCBjaGVja1JhZGl1cygpIHsgcmV0dXJuIHRoaXMucmFkaXVzIC8gMjsgfVxyXG4gICAgcHVibGljIGdldCBwYXRjaFJhZGl1cygpIHsgcmV0dXJuIHRoaXMucmFkaXVzIC8gMjsgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KCkge1xyXG5cclxuICAgICAgICB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZEluc3RhbmNpbmdCdWZmZXI/LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX21lc2hJbnN0KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9tZXNoSW5zdC5pbnN0YW5jaW5nRGF0YT8udmVydGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tZXNoSW5zdC5tZXNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXNoSW5zdC5tZXNoLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX21hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXRlcmlhbC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVudGl0eS5yZW5kZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5lbnRpdHkucmVuZGVyLm1lc2hJbnN0YW5jZXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEJsYWRlc0FuZEVkaXRNb2RlKCkge1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVHcmFzc01lc2godGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucGF0Y2hSYWRpdXMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYWludGluZykge1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLmFkZExvY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBvc3RJbml0aWFsaXplKCk6IHZvaWQge1xyXG5cclxuICAgICAgICBjb25zdCB0ZXJyYWluRW50aXR5ID0gdGhpcy5lbnRpdHkucm9vdC5maW5kQnlOYW1lKCdUZXJyYWluJykgYXMgcGN4LkVudGl0eTtcclxuICAgICAgICBjb25zdCB0ZXJyYWluU2NyaXB0ID0gdGVycmFpbkVudGl0eS5zY3JpcHQ/LmdldChUZXJyYWluKSBhcyBUZXJyYWluO1xyXG5cclxuICAgICAgICB0aGlzLl90ZXJyYWluICAgICAgPSB0ZXJyYWluU2NyaXB0O1xyXG4gICAgICAgIHRoaXMuX2NhbWVyYUVudGl0eSA9IHRlcnJhaW5TY3JpcHQuY2FtZXJhRW50aXR5ITtcclxuICAgICAgICB0aGlzLl9kYXRhVGV4dHVyZSAgPSBuZXcgR3Jhc3NGaWVsZFRleHR1cmUodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMuX3RlcnJhaW4ud2lkdGgsIHRoaXMuX3RlcnJhaW4uZGVwdGgpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbml0QmxhZGVzQW5kRWRpdE1vZGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignZW5hYmxlJywgKCkgPT4gdGhpcy5faW5pdEJsYWRlc0FuZEVkaXRNb2RlKCkpO1xyXG4gICAgICAgIHRoaXMub24oJ2Rpc2FibGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLmZyZWVMb2NrKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6cGFpbnRpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhaW50aW5nKSB7IHRoaXMuX3RlcnJhaW4uYWRkTG9jaygpOyB9XHJcbiAgICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICB7IHRoaXMuX3RlcnJhaW4uZnJlZUxvY2soKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6d2lyZWZyYW1lJywgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gdGhpcy5fbWVzaEluc3Q/Lm1lc2g/LnByaW1pdGl2ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwcmltaXRpdmUgJiYgcHJpbWl0aXZlWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBwcmltaXRpdmVbMF0udHlwZSA9IHRoaXMud2lyZWZyYW1lID8gcGMuUFJJTUlUSVZFX0xJTkVTIDogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmNhc3RTaGFkb3cnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0LmNhc3RTaGFkb3cgPSB0aGlzLmNhc3RTaGFkb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6cmVjZWl2ZVNoYWRvdycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEluc3QucmVjZWl2ZVNoYWRvdyA9IHRoaXMucmVjZWl2ZVNoYWRvdztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpzZWVkJywgICAgICAgICAgICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpudW1CbGFkZXMnLCAgICAgICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpibGFkZVdpZHRoJywgICAgICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpibGFkZU1pbkhlaWdodCcsICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpibGFkZU1heEhlaWdodCcsICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpyYWRpdXMnLCAgICAgICAgICgpID0+IHRoaXMuX3VwZGF0ZUdyYXNzTWVzaCh0aGlzLmFwcC5ncmFwaGljc0RldmljZSwgdGhpcy5wYXRjaFJhZGl1cykpO1xyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6bG9kMEJsYWRlU2VncycsICAoKSA9PiB0aGlzLl91cGRhdGVHcmFzc01lc2godGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucGF0Y2hSYWRpdXMpKTtcclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmxvZDFCbGFkZVNlZ3MnLCAgKCkgPT4gdGhpcy5fdXBkYXRlR3Jhc3NNZXNoKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbWVyYVBvcyA9IHRoaXMuX2NhbWVyYUVudGl0eS5nZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0c1RleHMgPSAhIXRoaXMudGV4dHVyZXMgJiYgdGhpcy50ZXh0dXJlcy5sZW5ndGggPiAwO1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gZXhpc3RzVGV4cyA/IHRoaXMudGV4dHVyZXNbMF0uY29sb3IgOiBwYy5Db2xvci5XSElURTtcclxuICAgICAgICBjb25zdCByYW5kICA9IGV4aXN0c1RleHMgPyB0aGlzLnRleHR1cmVzWzBdLmNvbG9yUmFuZG9tIDogcGMuVmVjMy5aRVJPO1xyXG4gICAgICAgIGNvbnN0IHRleCAgID0gZXhpc3RzVGV4cyA/IHRoaXMudGV4dHVyZXNbMF0uZGlmZnVzZS5yZXNvdXJjZSA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5mcmVlemVEcmF3UG9zKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYXQgPSB0aGlzLmVudGl0eS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xyXG5cclxuICAgICAgICAgICAgdG1wTWF0LmludmVydChtYXQpO1xyXG4gICAgICAgICAgICB0bXBNYXQudHJhbnNmb3JtUG9pbnQoY2FtZXJhUG9zLCB0aGlzLl9sYXN0RHJhd1Bvcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl90aW1lICs9IGR0O1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih0aW1lUGFyYW1OYW1lLCB0aGlzLl90aW1lKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIod2luZEludGVuc2l0eVBhcmFtTmFtZSwgdGhpcy53aW5kSW50ZW5zaXR5KTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoZHJhd1Bvc1BhcmFtTmFtZSwgW3RoaXMuX2xhc3REcmF3UG9zLngsIHRoaXMuX2xhc3REcmF3UG9zLnksIHRoaXMuX2xhc3REcmF3UG9zLnpdKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VEaWZmdXNlQ29sb3InLCBbY29sb3IuciwgY29sb3IuZywgY29sb3IuYl0pO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcigndURpZmZ1c2VDb2xvclJhbmRvbScsIFtyYW5kLngsIHJhbmQueSwgcmFuZC56XSk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1RGlmZnVzZVRleCcsIHRleCBhcyBhbnkpO1xyXG5cclxuICAgICAgICB0aGlzLl9mcnVzdHVtKGNhbWVyYVBvcywgdGhpcy5fY2FtZXJhRW50aXR5IS5jYW1lcmEhLmNhbWVyYSwgdGhpcy5mcmVlemVEcmF3UG9zKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlQWFiYigpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwYXRjaGVzQWFiYiA9IHRoaXMuX3RlcnJhaW4ucmVuZGVyUHJlcGFyZXIucGF0Y2hlc1N0b3JlLmFhYmI7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9tZXNoSW5zdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9tZXNoSW5zdC5tZXNoLmFhYmIgPSBwYXRjaGVzQWFiYjtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEluc3QuYWFiYiA9IHBhdGNoZXNBYWJiO1xyXG4gICAgICAgICAgICB0aGlzLl9tZXNoSW5zdC5zZXRDdXN0b21BYWJiKHBhdGNoZXNBYWJiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZnJ1c3R1bUhlbHBlcihcclxuICAgICAgICBjb3VudDogbnVtYmVyLFxyXG4gICAgICAgIHF1YWRNYXRyaXg6IG51bWJlcltdLFxyXG4gICAgICAgIHF1YWRPZmZzZXQ6IG51bWJlcixcclxuICAgICAgICBtaW5NYXhTdG9yZTogQXJyYXk8W3BjeC5WZWMzLCBwY3guVmVjMywgYm9vbGVhbl0+LFxyXG4gICAgICAgIG9mZnNldEFycjogbnVtYmVyW10sXHJcbiAgICAgICAgaW52ZXJzZTogYm9vbGVhbixcclxuICAgICAgICBjYW1lcmFQb3M6IHBjeC5WZWMzLFxyXG4gICAgICAgIGNhbWVyYTogcGN4LkNhbWVyYSxcclxuICAgICAgICBmcmVlemU6IGJvb2xlYW4sXHJcbiAgICApIHtcclxuICAgICAgICBjb25zdCBzY2FsZSAgICAgICAgPSB0aGlzLmVudGl0eS5nZXRTY2FsZSgpO1xyXG4gICAgICAgIGNvbnN0IHRlcnJhaW5TY2FsZSA9IHRoaXMuX3RlcnJhaW4uZW50aXR5LmdldFNjYWxlKCk7XHJcbiAgICAgICAgY29uc3QgY2hlY2tSYWRpdXMgID0gdGhpcy5jaGVja1JhZGl1cyAqIE1hdGgubWF4KHNjYWxlLngsIHNjYWxlLnopO1xyXG4gICAgICAgIGNvbnN0IG1heEhlaWdodCAgICA9IHRoaXMuX3RlcnJhaW4ub2JqZWN0Lm1heEhlaWdodCAqIHRlcnJhaW5TY2FsZS55O1xyXG4gICAgICAgIGNvbnN0IGZydXN0dW1QbGFuZXMgPSBjYW1lcmEuZnJ1c3R1bS5wbGFuZXM7XHJcbiAgICAgICAgY29uc3QgY2hlY2tJc1Zpc2libGUgPSAobWluOiBwY3guVmVjMywgbWF4OiBwY3guVmVjMykgPT4ge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCA2OyBwKyspIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZnJ1c3R1bVBsYW5lID0gZnJ1c3R1bVBsYW5lc1twXSBhcyB1bmtub3duIGFzIGFueVtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IE1hdGgubWF4KG1pbi54ICogZnJ1c3R1bVBsYW5lWzBdLCBtYXgueCAqIGZydXN0dW1QbGFuZVswXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyBNYXRoLm1heChtaW4ueSAqIGZydXN0dW1QbGFuZVsxXSwgbWF4LnkgKiBmcnVzdHVtUGxhbmVbMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgTWF0aC5tYXgobWluLnogKiBmcnVzdHVtUGxhbmVbMl0sIG1heC56ICogZnJ1c3R1bVBsYW5lWzJdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICArIGZydXN0dW1QbGFuZVszXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2aXNpYmxlQ291bnQgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghbWluTWF4U3RvcmVbaV0pIG1pbk1heFN0b3JlW2ldID0gW25ldyBwYy5WZWMzKCksIG5ldyBwYy5WZWMzKCksIGZhbHNlXTtcclxuICAgICAgICAgICAgaWYgKCFmcmVlemUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdWFkTWF0cml4WCAgPSBxdWFkTWF0cml4W2kgKiAyICsgMF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdWFkTWF0cml4WiAgPSBxdWFkTWF0cml4W2kgKiAyICsgMV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbENlbnRlclggPSB0aGlzLnJhZGl1cyAqIChxdWFkTWF0cml4WCAtIHF1YWRPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxDZW50ZXJaID0gdGhpcy5yYWRpdXMgKiAocXVhZE1hdHJpeFogLSBxdWFkT2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmxkQ2VudGVyWCA9IGNhbWVyYVBvcy54ICsgbG9jYWxDZW50ZXJYICogc2NhbGUueDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmxkQ2VudGVyWiA9IGNhbWVyYVBvcy56ICsgbG9jYWxDZW50ZXJaICogc2NhbGUuejtcclxuXHJcbiAgICAgICAgICAgICAgICBtaW5NYXhTdG9yZVtpXVswXS5zZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgd29ybGRDZW50ZXJYIC0gY2hlY2tSYWRpdXMsXHJcbiAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICB3b3JsZENlbnRlclogLSBjaGVja1JhZGl1c1xyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtaW5NYXhTdG9yZVtpXVsxXS5zZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgd29ybGRDZW50ZXJYICsgY2hlY2tSYWRpdXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmxkQ2VudGVyWiArIGNoZWNrUmFkaXVzXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHZpc2libGUgPSBjaGVja0lzVmlzaWJsZShtaW5NYXhTdG9yZVtpXVswXSwgbWluTWF4U3RvcmVbaV1bMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0QXJyW3Zpc2libGVDb3VudCAqIDIgKyAwXSA9IGxvY2FsQ2VudGVyWDtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRBcnJbdmlzaWJsZUNvdW50ICogMiArIDFdID0gbG9jYWxDZW50ZXJaO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG1pbk1heFN0b3JlW2ldWzJdID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbWluID0gbWluTWF4U3RvcmVbaV1bMF07XHJcbiAgICAgICAgICAgIGNvbnN0IG1heCA9IG1pbk1heFN0b3JlW2ldWzFdO1xyXG4gICAgICAgICAgICBjb25zdCB2aXMgPSBtaW5NYXhTdG9yZVtpXVsyXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmcmVlemUpIHtcclxuICAgICAgICAgICAgICAgIGRyYXdCb3goeyBtaW4sIG1heCwgY29sb3I6IHZpcyA/IHBjLkNvbG9yLkdSRUVOIDogcGMuQ29sb3IuUkVEIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2aXNpYmxlQ291bnQgKz0gTnVtYmVyKHZpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWZyZWV6ZSAmJiBpbnZlcnNlICYmIHZpc2libGVDb3VudCA+IDApIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGhpZGRlbkNvdW50ID0gY291bnQgLSB2aXNpYmxlQ291bnQ7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdmlzaWJsZUNvdW50OyBpID4gLTE7IGktLSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4SW4gPSAoaGlkZGVuQ291bnQgKyBpKSAqIDI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleE9yID0gaSAqIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0QXJyW2luZGV4SW4gKyAwXSA9IG9mZnNldEFycltpbmRleE9yICsgMF07XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRBcnJbaW5kZXhJbiArIDFdID0gb2Zmc2V0QXJyW2luZGV4T3IgKyAxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZpc2libGVDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9mcnVzdHVtKGNhbWVyYVBvczogcGN4LlZlYzMsIGNhbWVyYTogcGN4LkNhbWVyYSwgZnJlZXplOiBib29sZWFuKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZpc2libGVMb2QxQ291bnQgPSB0aGlzLl9mcnVzdHVtSGVscGVyKGxvZDFRdWFkQ291bnQsIHF1YWQxTWF0cml4LCAxLCB0aGlzLl9sb2QxTWluTWF4U3RvcmUsIHRoaXMuX29mZnNldExvZDFBcnIsIGZhbHNlLCBjYW1lcmFQb3MsIGNhbWVyYSwgZnJlZXplKTtcclxuICAgICAgICBjb25zdCB2aXNpYmxlTG9kMkNvdW50ID0gdGhpcy5fZnJ1c3R1bUhlbHBlcihsb2QyUXVhZENvdW50LCBxdWFkMk1hdHJpeCwgMiwgdGhpcy5fbG9kMk1pbk1heFN0b3JlLCB0aGlzLl9vZmZzZXRMb2QyQXJyLCB0cnVlLCBjYW1lcmFQb3MsIGNhbWVyYSwgZnJlZXplKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWVzaEluc3QgID0gdGhpcy5fbWVzaEluc3Q7XHJcbiAgICAgICAgY29uc3QgbWVzaCAgICAgID0gbWVzaEluc3QubWVzaDtcclxuICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBtZXNoLnByaW1pdGl2ZVswXTtcclxuICAgICAgICBjb25zdCBiYXNlICAgICAgPSB0aGlzLmxvZDJCbGFkZVNlZ3MgKiAxMiAqIChsb2QyUXVhZENvdW50IC0gdmlzaWJsZUxvZDJDb3VudCk7XHJcbiAgICAgICAgY29uc3QgY291bnQgICAgID0gdGhpcy5sb2QwQmxhZGVTZWdzICogMTJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyB0aGlzLmxvZDFCbGFkZVNlZ3MgKiAxMiAqIHZpc2libGVMb2QxQ291bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyB0aGlzLmxvZDJCbGFkZVNlZ3MgKiAxMiAqIHZpc2libGVMb2QyQ291bnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWVzaEluc3Quc2V0UGFyYW1ldGVyKGAke2xvZDFPZmZzZXRYWlBhcmFtTmFtZX1bMF1gLCB0aGlzLl9vZmZzZXRMb2QxQXJyKTtcclxuICAgICAgICBtZXNoSW5zdC5zZXRQYXJhbWV0ZXIoYCR7bG9kMk9mZnNldFhaUGFyYW1OYW1lfVswXWAsIHRoaXMuX29mZnNldExvZDJBcnIpO1xyXG5cclxuICAgICAgICAvLyBhbHdheXMgdHJ1ZSBmb3IgbG9kIDBcclxuICAgICAgICBtZXNoSW5zdC52aXNpYmxlID0gdGhpcy5hdXRvUmVuZGVyIHx8IGZyZWV6ZTtcclxuICAgICAgICBtZXNoSW5zdC52aXNpYmxlVGhpc0ZyYW1lID0gdGhpcy5hdXRvUmVuZGVyIHx8IGZyZWV6ZTtcclxuXHJcbiAgICAgICAgcHJpbWl0aXZlLmJhc2UgID0gYmFzZTtcclxuICAgICAgICBwcmltaXRpdmUuY291bnQgPSBjb3VudDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkPy53YXNSZWxlYXNlZChwYy5LRVlfVikpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codmlzaWJsZUxvZDFDb3VudCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZpc2libGVMb2QyQ291bnQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9vZmZzZXRMb2QxQXJyKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5fb2Zmc2V0TG9kMkFycik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIF91cGRhdGVHcmFzc01lc2goZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgcmFkaXVzOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaEJ1ZmZlcnMoZ3JhcGhpY3NEZXZpY2UpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hNYXRlcmlhbChncmFwaGljc0RldmljZSk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNlKGdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoSW5zdGFuY2luZyhncmFwaGljc0RldmljZSwgcmFkaXVzKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUFhYmIoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlcyA9IFt0aGlzLl9tZXNoSW5zdF07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVudGl0eS5yZW5kZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5lbnRpdHkucmVuZGVyLm1lc2hJbnN0YW5jZXMgPSBtZXNoSW5zdGFuY2VzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbnRpdHkuYWRkQ29tcG9uZW50KCdyZW5kZXInLCB7XHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2VzOiBtZXNoSW5zdGFuY2VzLFxyXG4gICAgICAgICAgICAgICAgY2FzdFNoYWRvd3M6IHRoaXMuY2FzdFNoYWRvdyxcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVTaGFkb3dzOiB0aGlzLnJlY2VpdmVTaGFkb3csXHJcbiAgICAgICAgICAgICAgICBjdWxsOiBmYWxzZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9tZXNoSW5zdC5jYXN0U2hhZG93ID0gdGhpcy5jYXN0U2hhZG93O1xyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0LnJlY2VpdmVTaGFkb3cgPSB0aGlzLnJlY2VpdmVTaGFkb3c7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTWVzaEluc3RhbmNpbmcoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgcmFkaXVzOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fbWVzaEluc3QpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlSW5zdGFuY2luZ0J1ZmZlcihncmFwaGljc0RldmljZSwgcmFkaXVzKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEluc3Q/Lmluc3RhbmNpbmdEYXRhPy52ZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEluc3Quc2V0SW5zdGFuY2luZyh0aGlzLl9zaGFyZWRJbnN0YW5jaW5nQnVmZmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTWVzaEluc3RhbmNlKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fbWVzaEluc3Q/Lmluc3RhbmNpbmdEYXRhPy52ZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdD8uZGVzdHJveSgpO1xyXG5cclxuICAgICAgICBjb25zdCBtZXNoID0gbmV3IHBjLk1lc2goZ3JhcGhpY3NEZXZpY2UpO1xyXG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IG1lc2gucHJpbWl0aXZlWzBdO1xyXG5cclxuICAgICAgICBtZXNoLmluZGV4QnVmZmVyWzBdID0gdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXI7XHJcbiAgICAgICAgbWVzaC52ZXJ0ZXhCdWZmZXIgICA9IHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICAgICAgcHJpbWl0aXZlLnR5cGUgICAgPSB0aGlzLndpcmVmcmFtZSA/IHBjLlBSSU1JVElWRV9MSU5FUyA6IHBjLlBSSU1JVElWRV9UUklBTkdMRVM7XHJcbiAgICAgICAgcHJpbWl0aXZlLmJhc2UgICAgPSAwO1xyXG4gICAgICAgIHByaW1pdGl2ZS5jb3VudCAgID0gdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXgubGVuZ3RoO1xyXG4gICAgICAgIHByaW1pdGl2ZS5pbmRleGVkID0gdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdCA9IG5ldyBwYy5NZXNoSW5zdGFuY2UobWVzaCwgdGhpcy5fbWF0ZXJpYWwsIHRoaXMuZW50aXR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2V0cyB1cCBpbmRpY2VzIGZvciBzaW5nbGUgYmxhZGUgbWVzaC5cclxuICAgICogQHBhcmFtIGlkIGFycmF5IG9mIGluZGljZXNcclxuICAgICogQHBhcmFtIHZjMSB2ZXJ0ZXggc3RhcnQgb2Zmc2V0IGZvciBmcm9udCBzaWRlIG9mIGJsYWRlXHJcbiAgICAqIEBwYXJhbSB2YzIgdmVydGV4IHN0YXJ0IG9mZnNldCBmb3IgYmFjayBzaWRlIG9mIGJsYWRlXHJcbiAgICAqIEBwYXJhbSBpIGluZGV4IG9mZnNldFxyXG4gICAgKi9cclxuICAgIHByaXZhdGUgX2luaXRCbGFkZUluZGljZXMoaWQ6IFVpbnQ4QXJyYXkgfCBVaW50MTZBcnJheSwgdmMxOiBudW1iZXIsIHZjMjogbnVtYmVyLCBpOiBudW1iZXIsIGJsYWRlU2VnczogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGxldCBzZWc6IG51bWJlcjtcclxuXHJcbiAgICAgICAgLy8gYmxhZGUgZnJvbnQgc2lkZVxyXG4gICAgICAgIGZvciAoc2VnID0gMDsgc2VnIDwgYmxhZGVTZWdzOyArK3NlZykge1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAwOyAvLyB0cmkgMVxyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAxO1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAyO1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAyOyAvLyB0cmkgMlxyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAxO1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAzO1xyXG4gICAgICAgICAgIHZjMSArPSAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYmxhZGUgYmFjayBzaWRlXHJcbiAgICAgICAgZm9yIChzZWcgPSAwOyBzZWcgPCBibGFkZVNlZ3M7ICsrc2VnKSB7XHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMiArIDI7IC8vIHRyaSAxXHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMiArIDE7XHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMiArIDA7XHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMiArIDM7IC8vIHRyaSAyXHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMiArIDE7XHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMiArIDI7XHJcbiAgICAgICAgICAgdmMyICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBTZXQgdXAgaW5kaWNlcyBmb3IgMSBibGFkZSAqL1xyXG4gICAgcHJpdmF0ZSBfaW5pdEJsYWRlSW5kZXhWZXJ0cyh2aW5kZXg6IEZsb2F0MzJBcnJheSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmluZGV4Lmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZpbmRleFtpXSA9IGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRCbGFkZU9mZnNldFNoYXBlVmVydHMob2Zmc2V0U2hhcGU6IFVpbnQxNkFycmF5IHwgRmxvYXQzMkFycmF5LCByYWRpdXM6IG51bWJlciwgbnVtQmxhZGVzOiBudW1iZXIpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBub3JtYWxpemVWYWx1ZSA9IG9mZnNldFNoYXBlIGluc3RhbmNlb2YgVWludDE2QXJyYXkgPyBwYy5GbG9hdFBhY2tpbmcuZmxvYXQySGFsZiA6ICh4OiBudW1iZXIpID0+IHg7XHJcbiAgICAgICAgY29uc3QgcmFuZG9tID0gbmV3IFJhbmRvbSh0aGlzLnNlZWQpO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodEZhY3RvciA9IHRoaXMuYmxhZGVNYXhIZWlnaHQgLSB0aGlzLmJsYWRlTWluSGVpZ2h0O1xyXG5cclxuICAgICAgICAvL2xldCBub2lzZSA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1CbGFkZXM7ICsraSkge1xyXG5cclxuICAgICAgICAgICAgLy9ub2lzZSA9IE1hdGguYWJzKHNpbXBsZXgob2Zmc2V0U2hhcGVbaSAqIDggKyAwXSAqIDAuMDMsIG9mZnNldFNoYXBlW2kgKiA4ICsgMl0gKiAwLjAzKSk7XHJcbiAgICAgICAgICAgIC8vbm9pc2UgPSBub2lzZSAqIG5vaXNlICogbm9pc2U7XHJcbiAgICAgICAgICAgIC8vbm9pc2UgKj0gNS4wO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeCA9IHJhbmRvbS5ucmFuZCgpICogcmFkaXVzO1xyXG4gICAgICAgICAgICBjb25zdCB5ID0gcmFuZG9tLm5yYW5kKCkgKiByYWRpdXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHogPSAwO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgcm90YXRpb24gPSBNYXRoLlBJICogMi4wICogcmFuZG9tLnJhbmRvbSgpO1xyXG4gICAgICAgICAgICBjb25zdCB3aWR0aCAgICA9IHRoaXMuYmxhZGVXaWR0aCArIHJhbmRvbS5yYW5kb20oKSAqIHRoaXMuYmxhZGVXaWR0aCAqIDAuNTtcclxuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ICAgPSB0aGlzLmJsYWRlTWluSGVpZ2h0ICsgTWF0aC5wb3cocmFuZG9tLnJhbmRvbSgpLCA0LjApICogaGVpZ2h0RmFjdG9yO1xyXG4gICAgICAgICAgICBjb25zdCBsZWFuICAgICA9IDAuMDEgKyByYW5kb20ucmFuZG9tKCkgKiAwLjM7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnZlICAgID0gMC4wNSArIHJhbmRvbS5yYW5kb20oKSAqIDAuMztcclxuXHJcbiAgICAgICAgICAgIG9mZnNldFNoYXBlW2kgKiA4ICsgMF0gPSBub3JtYWxpemVWYWx1ZSh4KTsgLy8geFxyXG4gICAgICAgICAgICBvZmZzZXRTaGFwZVtpICogOCArIDFdID0gbm9ybWFsaXplVmFsdWUoeSk7IC8vIHlcclxuICAgICAgICAgICAgb2Zmc2V0U2hhcGVbaSAqIDggKyAyXSA9IG5vcm1hbGl6ZVZhbHVlKHopOyAvLyB6XHJcbiAgICAgICAgICAgIG9mZnNldFNoYXBlW2kgKiA4ICsgM10gPSBub3JtYWxpemVWYWx1ZShyb3RhdGlvbik7IC8vIHJvdFxyXG5cclxuICAgICAgICAgICAgb2Zmc2V0U2hhcGVbaSAqIDggKyA0XSA9IG5vcm1hbGl6ZVZhbHVlKHdpZHRoKTsgIC8vIHdpZHRoXHJcbiAgICAgICAgICAgIG9mZnNldFNoYXBlW2kgKiA4ICsgNV0gPSBub3JtYWxpemVWYWx1ZShoZWlnaHQpOyAvLysgbm9pc2U7IC8vKyBoZWlnaHRcclxuICAgICAgICAgICAgb2Zmc2V0U2hhcGVbaSAqIDggKyA2XSA9IG5vcm1hbGl6ZVZhbHVlKGxlYW4pOyAgIC8vIGxlYW5cclxuICAgICAgICAgICAgb2Zmc2V0U2hhcGVbaSAqIDggKyA3XSA9IG5vcm1hbGl6ZVZhbHVlKGN1cnZlKTsgIC8vIGN1cnZlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIF91cGRhdGVJbnN0YW5jaW5nQnVmZmVyKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIHJhZGl1czogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoYXJlZEluc3RhbmNpbmdCdWZmZXI/LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgY29uc3QgbG9kMFBhdGNoQ291bnQgPSAxO1xyXG4gICAgICAgIGNvbnN0IGxvZDFQYXRjaENvdW50ID0gODtcclxuICAgICAgICBjb25zdCBsb2QyUGF0Y2hDb3VudCA9IDE2O1xyXG4gICAgICAgIGNvbnN0IHBhdGNoTnVtQmxhZGVzID0gKHRoaXMubnVtQmxhZGVzIC8gKGxvZDBQYXRjaENvdW50ICsgbG9kMVBhdGNoQ291bnQgKyBsb2QyUGF0Y2hDb3VudCkpIHwgMDtcclxuICAgICAgICBjb25zdCBvZmZzZXRBbmRTaGFwZUxlbmd0aCA9IHBhdGNoTnVtQmxhZGVzICogODtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2J1ZmZlclN0b3JlLm9mZnNldEFuZFNoYXBlID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUub2Zmc2V0QW5kU2hhcGUubGVuZ3RoICE9PSBvZmZzZXRBbmRTaGFwZUxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTdG9yZS5vZmZzZXRBbmRTaGFwZSA9IG5ldyBGbG9hdDMyQXJyYXkob2Zmc2V0QW5kU2hhcGVMZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5faW5pdEJsYWRlT2Zmc2V0U2hhcGVWZXJ0cyh0aGlzLl9idWZmZXJTdG9yZS5vZmZzZXRBbmRTaGFwZSwgcmFkaXVzLCBwYXRjaE51bUJsYWRlcyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLl9idWZmZXJTdG9yZS5vZmZzZXRBbmRTaGFwZSBpbnN0YW5jZW9mIFVpbnQxNkFycmF5ID8gcGMuVFlQRV9GTE9BVDE2IDogcGMuVFlQRV9GTE9BVDMyO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNpbmdGb3JtYXQgPSBuZXcgcGMuVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlLCBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNlbWFudGljOiBwYy5TRU1BTlRJQ19BVFRSMTAsXHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiA0LFxyXG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBhc0ludDogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VtYW50aWM6IHBjLlNFTUFOVElDX0FUVFIxMSxcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IDQsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGFzSW50OiBmYWxzZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5zdGFuY2luZ0J1ZmZlciA9IG5ldyBwYy5WZXJ0ZXhCdWZmZXIoZ3JhcGhpY3NEZXZpY2UsIGluc3RhbmNpbmdGb3JtYXQsIHBhdGNoTnVtQmxhZGVzLCB7XHJcbiAgICAgICAgICAgIHVzYWdlOiBwYy5CVUZGRVJfU1RBVElDLFxyXG4gICAgICAgICAgICBkYXRhOiB0aGlzLl9idWZmZXJTdG9yZS5vZmZzZXRBbmRTaGFwZSxcclxuICAgICAgICAgICAgc3RvcmFnZTogZmFsc2UsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0VmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UpIHtcclxuICAgICAgICByZXR1cm4gbmV3IHBjLlZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSwgW3tcclxuICAgICAgICAgICAgc2VtYW50aWM6IHBjLlNFTUFOVElDX1BPU0lUSU9OLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiAxLFxyXG4gICAgICAgICAgICB0eXBlOiBwYy5UWVBFX0ZMT0FUMzIsXHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGFzSW50OiBmYWxzZVxyXG4gICAgICAgIH1dKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVNZXNoQnVmZmVycyhncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoYXJlZEluZGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvZDBWQyA9ICh0aGlzLmxvZDBCbGFkZVNlZ3MgKyAxKSAqIDI7XHJcbiAgICAgICAgY29uc3QgbG9kMVZDID0gKHRoaXMubG9kMUJsYWRlU2VncyArIDEpICogMjtcclxuICAgICAgICBjb25zdCBsb2QyVkMgPSAodGhpcy5sb2QyQmxhZGVTZWdzICsgMSkgKiAyO1xyXG4gICAgICAgIGNvbnN0IGluZGV4TGVuZ3RoID0gdGhpcy5sb2QwQmxhZGVTZWdzICogMTIgKyB0aGlzLmxvZDFCbGFkZVNlZ3MgKiAxMiAqIGxvZDFRdWFkQ291bnQgKyB0aGlzLmxvZDJCbGFkZVNlZ3MgKiAxMiAqIGxvZDJRdWFkQ291bnQ7XHJcbiAgICAgICAgY29uc3QgaW5kZXhWZXJ0c0xlbmd0aCA9IGxvZDBWQyAqIDIgKyBsb2QxVkMgKiAyICogbG9kMVF1YWRDb3VudCArIGxvZDJWQyAqIDIgKiBsb2QyUXVhZENvdW50O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fYnVmZmVyU3RvcmUuaW5kZXggPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTdG9yZS5pbmRleC5sZW5ndGggIT09IGluZGV4TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4ID0gbmV3IFVpbnQxNkFycmF5KGluZGV4TGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvZDJRdWFkQ291bnQ7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvZDJWQzEgPSBpICogbG9kMlZDICogMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvZDJWQzIgPSBsb2QyVkMxICsgbG9kMlZDO1xyXG5cclxuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5faW5pdEJsYWRlSW5kaWNlcyh0aGlzLl9idWZmZXJTdG9yZS5pbmRleCwgbG9kMlZDMSwgbG9kMlZDMiwgaW5kZXgsIHRoaXMubG9kMkJsYWRlU2Vncyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxvZDBWQzEgPSBsb2QyUXVhZENvdW50ICogbG9kMlZDICogMjtcclxuICAgICAgICAgICAgY29uc3QgbG9kMFZDMiA9IGxvZDBWQzEgKyBsb2QwVkM7XHJcblxyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2luaXRCbGFkZUluZGljZXModGhpcy5fYnVmZmVyU3RvcmUuaW5kZXgsIGxvZDBWQzEsIGxvZDBWQzIsIGluZGV4LCB0aGlzLmxvZDBCbGFkZVNlZ3MpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2QxUXVhZENvdW50OyBpKyspIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9kMVZDMSA9IGxvZDBWQzIgKyBsb2QwVkMgKyBpICogbG9kMVZDICogMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvZDFWQzIgPSBsb2QxVkMxICsgbG9kMVZDO1xyXG5cclxuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5faW5pdEJsYWRlSW5kaWNlcyh0aGlzLl9idWZmZXJTdG9yZS5pbmRleCwgbG9kMVZDMSwgbG9kMVZDMiwgaW5kZXgsIHRoaXMubG9kMUJsYWRlU2Vncyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJTdG9yZS5pbmRleFZlcnRzID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXhWZXJ0cy5sZW5ndGggIT09IGluZGV4VmVydHNMZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXhWZXJ0cyA9IG5ldyBGbG9hdDMyQXJyYXkoaW5kZXhWZXJ0c0xlbmd0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRCbGFkZUluZGV4VmVydHModGhpcy5fYnVmZmVyU3RvcmUuaW5kZXhWZXJ0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlciA9IG5ldyBwYy5JbmRleEJ1ZmZlcihcclxuICAgICAgICAgICAgZ3JhcGhpY3NEZXZpY2UsXHJcbiAgICAgICAgICAgIHBjLklOREVYRk9STUFUX1VJTlQxNixcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXgubGVuZ3RoLFxyXG4gICAgICAgICAgICBwYy5CVUZGRVJfU1RBVElDLFxyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTdG9yZS5pbmRleCxcclxuICAgICAgICAgICAgeyBzdG9yYWdlOiBmYWxzZSB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyID0gbmV3IHBjLlZlcnRleEJ1ZmZlcihncmFwaGljc0RldmljZSwgdGhpcy5fZ2V0VmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlKSwgdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXhWZXJ0cy5sZW5ndGgsIHtcclxuICAgICAgICAgICAgdXNhZ2U6IHBjLkJVRkZFUl9TVEFUSUMsXHJcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4VmVydHMsXHJcbiAgICAgICAgICAgIHN0b3JhZ2U6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZU1lc2hNYXRlcmlhbChncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwgPSBuZXcgcGMuU3RhbmRhcmRNYXRlcmlhbCgpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLm5hbWUgPSBcIkdyYXNzRmllbGRNYXRlcmlhbFwiO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmRlcHRoVGVzdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmRlcHRoV3JpdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmJsZW5kVHlwZSA9IHBjLkJMRU5EX05PTkU7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuYWxwaGFUZXN0ID0gMDtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5hbHBoYVdyaXRlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuYWxwaGFGYWRlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuYWxwaGFUb0NvdmVyYWdlID0gZmFsc2U7XHJcbiAgICAgICAgKi9cclxuXHJcbiAgICAgICAgY29uc3QgdGVycmFpbiAgID0gdGhpcy5fdGVycmFpbi5vYmplY3Q7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hlcyAgID0gdGhpcy5fdGVycmFpbi5yZW5kZXJQcmVwYXJlci5wYXRjaGVzU3RvcmU7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0TWFwID0gcGF0Y2hlcy5oZWlnaHRNYXBUZXh0dXJlO1xyXG4gICAgICAgIGNvbnN0IHRlcnJhaW5TY2FsZSA9IHRoaXMuX3RlcnJhaW4uZW50aXR5LmdldFNjYWxlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldEF0dHJpYnV0ZSh2aW5kZXhBdHRyTmFtZSwgcGMuU0VNQU5USUNfUE9TSVRJT04pO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldEF0dHJpYnV0ZShvZmZzZXRBdHRyTmFtZSwgcGMuU0VNQU5USUNfQVRUUjEwKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRBdHRyaWJ1dGUoc2hhcGVBdHRyTmFtZSwgcGMuU0VNQU5USUNfQVRUUjExKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1RGF0YU1hcCcsIHRoaXMuX2RhdGFUZXh0dXJlLnRleHR1cmUpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih0ZXJyYWluSGVpZ2h0TWFwUGFyYW1OYW1lLCBoZWlnaHRNYXApO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih0ZXJyYWluU2NhbGVQYXJhbU5hbWUsIFt0ZXJyYWluU2NhbGUueCwgdGVycmFpblNjYWxlLnksIHRlcnJhaW5TY2FsZS56XSk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHRlcnJhaW5NYXhIZWlnaHRQYXJhbU5hbWUsIHRlcnJhaW4ubWF4SGVpZ2h0KTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoYCR7bG9kMU9mZnNldFhaUGFyYW1OYW1lfVswXWAsIHRoaXMuX29mZnNldExvZDFBcnIpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihgJHtsb2QyT2Zmc2V0WFpQYXJhbU5hbWV9WzBdYCwgdGhpcy5fb2Zmc2V0TG9kMkFycik7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihkcmF3UG9zUGFyYW1OYW1lLCBbMCwgMCwgMF0pO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih0aW1lUGFyYW1OYW1lLCB0aGlzLl90aW1lKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIod2luZEludGVuc2l0eVBhcmFtTmFtZSwgMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaG1Gb3JtYXQgPSBnZXRIZWlnaHRNYXBGb3JtYXQoZ3JhcGhpY3NEZXZpY2UsIHRlcnJhaW4uaGVpZ2h0TWFwKTtcclxuICAgICAgICBjb25zdCBjaHVua3MgPSBnZXRHcmFzc1NoYWRlckNodW5rcyh7XHJcbiAgICAgICAgICAgIHdpZHRoOiB0ZXJyYWluLndpZHRoLFxyXG4gICAgICAgICAgICBkZXB0aDogdGVycmFpbi5kZXB0aCxcclxuICAgICAgICAgICAgaGVpZ2h0TWFwQ2h1bmtTaXplOiB0ZXJyYWluLmhlaWdodE1hcC5kYXRhQ2h1bmtTaXplLFxyXG4gICAgICAgICAgICBoZWlnaHRNYXBGb3JtYXQ6IGhtRm9ybWF0LFxyXG4gICAgICAgICAgICBibGFkZU1heEhlaWdodDogdGhpcy5ibGFkZU1heEhlaWdodCAqIDEuNSxcclxuICAgICAgICAgICAgbG9kMEJsYWRlU2VnczogdGhpcy5sb2QwQmxhZGVTZWdzLFxyXG4gICAgICAgICAgICBsb2QxQmxhZGVTZWdzOiB0aGlzLmxvZDFCbGFkZVNlZ3MsXHJcbiAgICAgICAgICAgIGxvZDJCbGFkZVNlZ3M6IHRoaXMubG9kMkJsYWRlU2VncyxcclxuICAgICAgICAgICAgcmFkaXVzOiB0aGlzLnJhZGl1cyxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbkxvdzogdGhpcy50cmFuc2l0aW9uTG93LFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uSGlnaDogdGhpcy50cmFuc2l0aW9uSGlnaCxcclxuICAgICAgICAgICAgZW5naW5lVmVyc2lvbjogYHYke3BjLnZlcnNpb25bMF19YCBhcyB1bmtub3duIGFzIGFueSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2h1bmtOYW1lcyA9IE9iamVjdC5rZXlzKGNodW5rcyk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGNodW5rTmFtZSBvZiBjaHVua05hbWVzKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWwuY2h1bmtzW2NodW5rTmFtZV0gPSBjaHVua3NbY2h1bmtOYW1lXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5jaHVua3MuQVBJVmVyc2lvbiA9IHBjLkNIVU5LQVBJXzFfNzA7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwudXBkYXRlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdyYXNzRmllbGQ7XHJcbmV4cG9ydCBjb25zdCBncmFzc0ZpZWxkU2NyaXB0TmFtZSA9IFwiZ3Jhc3NGaWVsZFwiO1xyXG5cclxucGMucmVnaXN0ZXJTY3JpcHQoR3Jhc3NGaWVsZCwgZ3Jhc3NGaWVsZFNjcmlwdE5hbWUpO1xyXG5cclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcInBhaW50aW5nXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiY2FzdFNoYWRvd1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcInJlY2VpdmVTaGFkb3dcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogdHJ1ZSwgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJ3aXJlZnJhbWVcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogZmFsc2UgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJmcmVlemVEcmF3UG9zXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiYXV0b1JlbmRlclwiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwic2VlZFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDUzNDY0NTQ2NDU1LCBtaW46IDEsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcIndpbmRJbnRlbnNpdHlcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAwLCBtaW46IC0zMCwgbWF4OiAzMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcIm51bUJsYWRlc1wiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDQwMDAsIG1pbjogMCwgbWF4OiA4MDAwMDAwLCBzdGVwOiAxLCBwcmVjaXNpb246IDAgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJyYWRpdXNcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA4MCwgbWluOiAxLCBtYXg6IDEwMDAwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwibG9kMEJsYWRlU2Vnc1wiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDMsIG1pbjogMSwgbWF4OiAxMCwgc3RlcDogMSwgcHJlY2lzaW9uOiAwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwibG9kMUJsYWRlU2Vnc1wiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDIsIG1pbjogMSwgbWF4OiAxMCwgc3RlcDogMSwgcHJlY2lzaW9uOiAwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwibG9kMkJsYWRlU2Vnc1wiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDEsIG1pbjogMSwgbWF4OiAxMCwgc3RlcDogMSwgcHJlY2lzaW9uOiAwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiYmxhZGVXaWR0aFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDAuMDQsIG1pbjogMC4wMSwgbWF4OiA1IH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiYmxhZGVNaW5IZWlnaHRcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAwLjI1LCBtaW46IDAuMDEsIG1heDogMTAgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJibGFkZU1heEhlaWdodFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDEsIG1pbjogMC4wMSwgbWF4OiAxMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcInRleHR1cmVzXCIsIHtcclxuICAgIHR5cGU6IFwianNvblwiLFxyXG4gICAgYXJyYXk6IHRydWUsXHJcbiAgICBzY2hlbWE6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwibmFtZVwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJOYW1lXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiZGlmZnVzZVwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJEaWZmdXNlXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcclxuICAgICAgICAgICAgYXNzZXRUeXBlOiBcInRleHR1cmVcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJjb2xvclwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJDb2xvclwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInJnYlwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiY29sb3JSYW5kb21cIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiQ29sb3IgUmFuZG9tXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwidmVjM1wiLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiBbMC4wMSwgMC4wMSwgMC4wMV1cclxuICAgICAgICB9XHJcbiAgICBdXHJcbn0pOyIsImltcG9ydCB7IHRlcnJhaW5TY3JpcHROYW1lIH0gZnJvbSBcIi4vVGVycmFpbi5tanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXJyYWluQ29sbGlkZXIgZXh0ZW5kcyBwYy5TY3JpcHRUeXBlIHtcclxuXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIGNvbnN0IHRlcnJhaW4gPSB0aGlzLmVudGl0eS5zY3JpcHQ/LmdldCh0ZXJyYWluU2NyaXB0TmFtZSk7XHJcbiAgICAgICAgLy8gVE9ET1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUZXJyYWluQ29sbGlkZXI7XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluQ29sbGlkZXJTY3JpcHROYW1lID0gXCJ0ZXJyYWluQ29sbGlkZXJcIjtcclxuXHJcbnBjLnJlZ2lzdGVyU2NyaXB0KFRlcnJhaW5Db2xsaWRlciwgdGVycmFpbkNvbGxpZGVyU2NyaXB0TmFtZSk7IiwiZXhwb3J0IGNsYXNzIEluc3RhbmNlZE1lc2gge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXR0cmlidXRlIHN0b3JpbmcgaW5kaWNlcyBvZiB0aGUgaW5zdGFuY2VzIHRvIGJlIHJlbmRlcmVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW5zdGFuY2VJbmRleDogcGN4LlZlcnRleEZvcm1hdCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgX2dyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2U7XHJcbiAgICBwcml2YXRlIF9jb3VudDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgX2NhcGFjaXR5OiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHByb3RlY3RlZCBfaW5pdEluZGV4QXR0cmlidXRlKCk6IHZvaWQge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX2dyYXBoaWNzRGV2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvdW50ID0gMDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY2FwYWNpdHkgPSB0aGlzLl9jYXBhY2l0eTtcclxuICAgICAgICBjb25zdCBhcnJheSA9IG5ldyBVaW50MzJBcnJheShjYXBhY2l0eSk7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcGFjaXR5OyBpKyspIHtcclxuICAgICAgICAgICAgYXJyYXlbaV0gPSBpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VJbmRleCA9IG5ldyBwYy5WZXJ0ZXhGb3JtYXQodGhpcy5fZ3JhcGhpY3NEZXZpY2UsIFt7XHJcbiAgICAgICAgICAgIHNlbWFudGljOiBwYy5TRU1BTlRJQ19BVFRSMTAsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IDEsXHJcbiAgICAgICAgICAgIHR5cGU6IHBjLlRZUEVfVUlOVDMyLFxyXG4gICAgICAgICAgICBub3JtYWxpemU6IGZhbHNlLFxyXG4gICAgICAgICAgICBhc0ludDogdHJ1ZVxyXG4gICAgICAgIH1dKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxufSIsImV4cG9ydCBpbnRlcmZhY2UgRGF0YSB7XHJcbiAgICBbMF06ICBudW1iZXIsIC8vIFhcclxuICAgIFs0XTogIG51bWJlciwgLy8gWVxyXG4gICAgWzhdOiAgbnVtYmVyLCAvLyBaXHJcbiAgICBbMTJdOiBudW1iZXIsIC8vIHJvdGF0ZVxyXG4gICAgWzE2XTogbnVtYmVyLCAvLyBoZWlnaHRcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEEge1xyXG4gICAgXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUcmVlRmllbGQge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBhZGRUcmVlKHg6IG51bWJlciwgejogbnVtYmVyLCBhbmdsZTogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlVHJlZShpbmRleDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIFxyXG4gICAgfVxyXG59IiwiOygoKSA9PiB7XHJcbiAgICBpZiAod2luZG93Ll9fX2FtZF9fX3JlcXVpcmVSZXNvbHZlcikge1xyXG4gICAgICAgIHdpbmRvdy5fX19hbWRfX19yZXF1aXJlUmVzb2x2ZXIoKTtcclxuICAgIH1cclxufSkoKTsiXX0=