"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
;
(() => {
    const defs = {};
    const resolved = {};
    // save original define and require
    window.___amd___OriginalDefine = window.define;
    window.___amd___OriginalRequire = window.require;
    if (!window.define && !window.require) {
        const define = (id, deps, factory) => {
            if (defs[id]) {
                throw new Error('Duplicate definition for ' + id);
            }
            defs[id] = [deps, factory];
        };
        define.amd = {
            bundle: true, // this implementation works only with bundled amd modules
            dynamic: false, // does not support dynamic or async loading
        };
        const require = (id) => {
            if (id === 'require')
                return require;
            if (id === 'exports')
                return {};
            if (resolved[id])
                return resolved[id];
            if (!defs[id]) {
                console.log(defs, id);
                throw new Error('No definition for ' + id);
            }
            const moduleExports = {};
            const deps = defs[id][0];
            const factory = defs[id][1];
            const args = deps.map(dep => {
                if (dep === 'exports') {
                    return moduleExports;
                }
                return require(dep);
            });
            factory.apply(null, args);
            return resolved[id] = moduleExports;
        };
        window.define = define;
        window.require = require;
    }
    window.___amd___requireResolver = () => {
        for (const id in defs) {
            if (defs.hasOwnProperty(id)) {
                const deps = defs[id][0];
                if (deps) {
                    deps.map(dep => {
                        if (dep !== 'require' &&
                            dep !== 'exports') {
                            if (!resolved.hasOwnProperty(dep)) {
                                require(dep);
                            }
                            if (!defs.hasOwnProperty(dep) &&
                                !resolved.hasOwnProperty(dep)) {
                                throw new Error(`Failed define '${id}' dep not found '${dep}'`);
                            }
                        }
                    });
                }
                require(id);
                delete defs[id];
            }
        }
        // return original define and require
        window.define = window.___amd___OriginalDefine;
        window.require = window.___amd___OriginalRequire;
        // clear
        delete window.___amd___requireResolver;
        delete window.___amd___OriginalDefine;
        delete window.___amd___OriginalRequire;
    };
})();
define("src/Shared/Types", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/TerrainSystem/IZone", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Shared/Compressor", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class Compressor {
        static _concatChunks(chunks, totalLength) {
            let position = 0;
            // Concatenate all Uint8Array chunks into a single ArrayBuffer
            const resultBuffer = new Uint8Array(totalLength);
            for (const chunk of chunks) {
                resultBuffer.set(chunk, position);
                position += chunk.length;
            }
            return resultBuffer.buffer;
        }
        static _getResult(reader) {
            return __awaiter(this, void 0, void 0, function* () {
                let totalLength = 0;
                const chunks = [];
                while (true) {
                    const { done, value } = yield reader.read();
                    if (done)
                        break;
                    chunks.push(value);
                    totalLength += value.length;
                }
                return this._concatChunks(chunks, totalLength);
            });
        }
        static compressBuffer(buffer_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, format = 'gzip') {
                const compressedStream = new CompressionStream(format);
                const writer = compressedStream.writable.getWriter();
                writer.write(new Uint8Array(buffer));
                writer.close();
                const reader = compressedStream.readable.getReader();
                return this._getResult(reader);
            });
        }
        static decompressBuffer(buffer_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, format = 'gzip') {
                const decompressedStream = new DecompressionStream(format);
                const reader = decompressedStream.readable.getReader();
                const writer = decompressedStream.writable.getWriter();
                // Write the compressed buffer to the writer
                writer.write(new Uint8Array(buffer));
                writer.close();
                return this._getResult(reader);
            });
        }
    }
    exports.default = Compressor;
});
define("src/TerrainSystem/AbsHeightMapFileIO", ["require", "exports", "src/Shared/Compressor"], function (require, exports, Compressor_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsHeightMapFileIO = exports.heightMapFileCompressedFormat = exports.factorSize = exports.heightMapVersion = void 0;
    Compressor_mjs_1 = __importDefault(Compressor_mjs_1);
    exports.heightMapVersion = 99;
    exports.factorSize = 3;
    exports.heightMapFileCompressedFormat = 'gzip';
    class AbsHeightMapFileIO {
        __readHeightFactor(view, headerSize, width, x, z) {
            const index = z * width + x;
            const r = view.getUint8(headerSize + index * exports.factorSize + 0);
            const g = view.getUint8(headerSize + index * exports.factorSize + 1);
            const b = view.getUint8(headerSize + index * exports.factorSize + 2);
            const scaled = (r << 16) | (g << 8) | b;
            const factor = scaled / 0xffffff;
            return factor;
        }
        __writeHeightFactor(view, headerSize, heightMap, x, z) {
            const index = z * heightMap.width + x;
            const factor = heightMap.getFactor(x, z);
            const scaled = Math.floor(factor * 0xffffff);
            const r = (scaled >> 16) & 0xff;
            const g = (scaled >> 8) & 0xff;
            const b = (scaled & 0xff);
            view.setUint8(headerSize + index * exports.factorSize + 0, r);
            view.setUint8(headerSize + index * exports.factorSize + 1, g);
            view.setUint8(headerSize + index * exports.factorSize + 2, b);
        }
        __importFromFile(heightMap, buffer, options) {
            return __awaiter(this, void 0, void 0, function* () {
                // TODO:
                // header version 99
                // headerByteSize, version, width, depth, maxHeight
                const nBuffer = yield Compressor_mjs_1.default.decompressBuffer(buffer, exports.heightMapFileCompressedFormat);
                const view = new DataView(nBuffer);
                const version = view.getUint32(1, true);
                if (version !== exports.heightMapVersion) {
                    console.warn('Height map version: %f no support.', version);
                    return null;
                }
                const headerSize = view.getUint8(0);
                const width = view.getUint32(5, true);
                const depth = view.getUint32(9, true);
                const maxHeight = view.getFloat32(13, true);
                const finalMaxHeight = (options === null || options === void 0 ? void 0 : options.adaptiveMaxHeight) ? heightMap.maxHeight : maxHeight;
                if (heightMap.width !== width ||
                    heightMap.depth !== depth &&
                        options &&
                        options.adaptiveWidthAndDepth) {
                    // TODO: its work for x^n + 1, z^n + 1
                    const factorX = (width - 1) / (heightMap.width - 1);
                    const factorZ = (depth - 1) / (heightMap.depth - 1);
                    for (let z = 0; z < depth; z += factorZ) {
                        for (let x = 0; x < width; x += factorX) {
                            // TODO: smooth for heightMap more import data
                            const factor = this.__readHeightFactor(view, headerSize, width, x | 0, z | 0);
                            const height = factor * finalMaxHeight;
                            heightMap.set(x / factorX, z / factorZ, height);
                        }
                    }
                }
                else {
                    for (let z = 0; (z < depth) && (z < heightMap.depth); z++) {
                        for (let x = 0; (x < width) && (x < heightMap.width); x++) {
                            const factor = this.__readHeightFactor(view, headerSize, width, x, z);
                            const height = factor * finalMaxHeight;
                            heightMap.set(x, z, height);
                        }
                    }
                }
                return {
                    width,
                    depth,
                    maxHeight
                };
            });
        }
        __exportToBuffer(heightMap) {
            return __awaiter(this, void 0, void 0, function* () {
                // TODO:
                // header version 99
                // headerByteSize, version, width, depth, maxHeight
                const headerSize = 1 + 4 + 4 + 4 + 4;
                const buffer = new ArrayBuffer(headerSize + exports.factorSize * heightMap.width * heightMap.depth);
                const view = new DataView(buffer);
                view.setUint8(0, headerSize);
                view.setUint32(1, exports.heightMapVersion, true);
                view.setUint32(5, heightMap.width, true);
                view.setUint32(9, heightMap.depth, true);
                view.setFloat32(13, heightMap.maxHeight, true);
                for (let z = 0; z < heightMap.depth; z++) {
                    for (let x = 0; x < heightMap.width; x++) {
                        this.__writeHeightFactor(view, headerSize, heightMap, x, z);
                    }
                }
                return Compressor_mjs_1.default.compressBuffer(buffer, exports.heightMapFileCompressedFormat);
            });
        }
    }
    exports.AbsHeightMapFileIO = AbsHeightMapFileIO;
    exports.default = AbsHeightMapFileIO;
});
define("src/TerrainSystem/AbsHeightMap", ["require", "exports", "src/TerrainSystem/AbsHeightMapFileIO"], function (require, exports, AbsHeightMapFileIO_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsHeightMap = void 0;
    AbsHeightMapFileIO_mjs_1 = __importDefault(AbsHeightMapFileIO_mjs_1);
    class AbsHeightMap extends AbsHeightMapFileIO_mjs_1.default {
        constructor() {
            super(...arguments);
            this.minX = 0;
            this.minZ = 0;
        }
        get maxX() { return this.width; }
        get maxZ() { return this.depth; }
        getHeightInterpolated(x, z) {
            const intX = x | 0;
            const intZ = z | 0;
            const x0z0 = this.get(intX, intZ);
            if ((intX + 1 >= this.width) ||
                (intZ + 1 >= this.depth)) {
                return x0z0;
            }
            const x1z0 = this.get(intX + 1, intZ);
            const x0z1 = this.get(intX, intZ + 1);
            const x1z1 = this.get(intX + 1, intZ + 1);
            const factorX = x - intX;
            const interpolatedBottom = (x1z0 - x0z0) * factorX + x0z0;
            const interpolatedTop = (x1z1 - x0z1) * factorX + x0z1;
            const factorZ = z - intZ;
            const finalHeight = (interpolatedTop - interpolatedBottom) * factorZ + interpolatedBottom;
            return finalHeight;
        }
        substract(x, z, value) {
            return this.append(x, z, -value);
        }
        divide(x, z, value, heightIfZero = 0) {
            return this.multiply(x, z, 1 / value, heightIfZero);
        }
        fromFile(buffer, options) {
            return __awaiter(this, void 0, void 0, function* () {
                return yield this.__importFromFile(this, buffer, options);
            });
        }
        toFile() {
            return __awaiter(this, void 0, void 0, function* () {
                const buffer = yield this.__exportToBuffer(this);
                return new Blob([buffer], { type: "application/octet-stream" });
            });
        }
        toBuffer(buffer) {
            const width = this.width;
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    const h = this.get(x, z);
                    const v = h / this.maxHeight * 255;
                    const pos = (x + z * width) * 4;
                    buffer[pos] = v;
                    buffer[pos + 1] = v;
                    buffer[pos + 2] = v;
                    buffer[pos + 3] = 255;
                }
            }
        }
        toCanvas() {
            const canvas = document.createElement('canvas');
            const width = this.width;
            const height = this.depth;
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');
            if (!ctx) {
                throw new Error('Failed create canvas 2d context');
            }
            const imageData = ctx.getImageData(0, 0, width, height);
            const buffer = imageData.data;
            this.toBuffer(buffer);
            ctx.putImageData(imageData, 0, 0);
            return canvas;
        }
        /**
         * Save height map to image of base64
         */
        toImage(type, quality) {
            const canvas = this.toCanvas();
            return canvas.toDataURL(type, quality);
        }
        /**
         * Load height map from image
         * @param img
         */
        fromImage(img) {
            const bufferWidth = img.width;
            const bufferHeight = img.height;
            if (bufferWidth % 2 !== 0 || bufferHeight % 2 !== 0) {
                throw new Error("Map sizes not divisible by 2 are not supported");
            }
            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            canvas.width = bufferWidth;
            canvas.height = bufferHeight;
            context.drawImage(img, 0, 0);
            const imageData = context.getImageData(0, 0, bufferWidth, bufferHeight);
            const imageBuffer = imageData.data;
            const maxSegmentX = this.width - 1;
            const maxSegmentZ = this.depth - 1;
            const factorX = bufferWidth / maxSegmentX;
            const factorZ = bufferHeight / maxSegmentZ;
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    let normalizeX = x === maxSegmentX ? x - 1 : x;
                    let normalizeZ = z === maxSegmentZ ? z - 1 : z;
                    const heightMapX = (normalizeX * factorX) | 0;
                    const heightMapZ = (normalizeZ * factorZ) | 0;
                    const pos = (heightMapX + heightMapZ * bufferWidth) * 4;
                    const r = imageBuffer[pos];
                    const g = imageBuffer[pos + 1];
                    const b = imageBuffer[pos + 2];
                    const a = imageBuffer[pos + 3];
                    const coeff = (r + g + b) / 3 / a;
                    const height = coeff * this.maxHeight;
                    this.set(x, z, height);
                }
            }
        }
        smoothZone(zone, np, radius) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            if (np < 0 || np > 1)
                return;
            if (radius === 0)
                radius = 1;
            const minX = Math.max(zone.minX, 0);
            const minZ = Math.max(zone.minZ, 0);
            const maxX = Math.min(zone.maxX, this.width);
            const maxZ = Math.min(zone.maxZ, this.depth);
            const cp = 1 - np;
            for (let x = minX; x < maxX; x++) {
                for (let z = minZ; z < maxZ; z++) {
                    const prevHeight = this.get(x, z);
                    let updtHeight;
                    let neighNumber = 0;
                    let neighAverage = 0;
                    for (let rx = -radius; rx <= radius; rx++) {
                        for (let rz = -radius; rz <= radius; rz++) {
                            const innerX = (x + rx);
                            const innerZ = (z + rz);
                            if (innerX < 0 || innerX >= this.width)
                                continue;
                            if (innerZ < 0 || innerZ >= this.depth)
                                continue;
                            const height = (innerX === x && innerZ === z)
                                ? prevHeight
                                : this.get(innerX, innerZ);
                            neighNumber++;
                            neighAverage += height;
                        }
                    }
                    neighAverage /= neighNumber;
                    updtHeight = neighAverage * np + prevHeight * cp;
                    this.set(x, z, updtHeight);
                }
            }
        }
        smooth(np, radius) {
            this.smoothZone(this, np, radius);
        }
        normalize(maxHeight) {
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    const currentHeight = this.get(x, z);
                    const normalizeHeight = (currentHeight / this.maxHeight) * maxHeight;
                    this.set(x, z, normalizeHeight);
                }
            }
        }
        combineHeights(type, heightMap, value, zone, heightIfZero = 0, minHeight = null, maxHeight = null) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const lenX = zone.maxX - zone.minX;
            const lenZ = zone.maxZ - zone.minZ;
            if (lenX < 1 || lenZ < 1 || value === 0) {
                return;
            }
            const fixedMinX = Math.max(zone.minX, 0);
            const fixedMinZ = Math.max(zone.minZ, 0);
            const fixedMaxX = Math.min(zone.maxX, this.width);
            const fixedMaxZ = Math.min(zone.maxZ, this.depth);
            const coeffFactorX = (heightMap.width - 1) / lenX;
            const coeffFactorZ = (heightMap.depth - 1) / lenZ;
            for (let z = fixedMinZ; z < fixedMaxZ; z++) {
                for (let x = fixedMinX; x < fixedMaxX; x++) {
                    const x2 = (coeffFactorX * (x - zone.minX)) | 0;
                    const z2 = (coeffFactorZ * (z - zone.minZ)) | 0;
                    const height = heightMap.get(x2, z2);
                    const smoothAppendValue = height * value;
                    const oldHeight = this.get(x, z) || heightIfZero;
                    let candidate = type === '+' ? oldHeight + smoothAppendValue :
                        type === '-' ? oldHeight - smoothAppendValue :
                            type === '*' ? oldHeight * smoothAppendValue :
                                type === '/' ? oldHeight / smoothAppendValue :
                                    oldHeight;
                    if (minHeight !== null && candidate < minHeight) {
                        candidate = minHeight;
                    }
                    if (maxHeight !== null && candidate > maxHeight) {
                        candidate = maxHeight;
                    }
                    this.set(x, z, candidate);
                }
            }
        }
    }
    exports.AbsHeightMap = AbsHeightMap;
    exports.default = AbsHeightMap;
});
define("src/TerrainSystem/HeightMap", ["require", "exports", "src/TerrainSystem/AbsHeightMap"], function (require, exports, AbsHeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.HeightMap = exports.defaultHeightVertexSize = exports.HeightMapArrType = void 0;
    AbsHeightMap_mjs_1 = __importDefault(AbsHeightMap_mjs_1);
    exports.HeightMapArrType = Float32Array;
    exports.defaultHeightVertexSize = 1;
    class HeightMap extends AbsHeightMap_mjs_1.default {
        get size() { return this._width * this._depth; }
        get width() { return this._width; }
        get depth() { return this._depth; }
        get data() { return this._data; }
        get format() { return 'rgba'; }
        get itemSize() { return this._itemSize; }
        get itemHeightIndexOffset() { return this._itemHeightIndexOffset; }
        get maxHeight() { return this._maxHeight; }
        constructor(width, depth, maxHeight, buffer, itemSize = exports.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            super();
            this._width = 0;
            this._depth = 0;
            this._maxHeight = 0;
            this._init(width, depth, maxHeight, buffer, itemSize, itemHeightIndexOffset);
        }
        _init(width, depth, maxHeight, buffer, itemSize = exports.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            this._width = width;
            this._depth = depth;
            this._maxHeight = maxHeight;
            if (buffer) {
                if (itemSize < itemHeightIndexOffset) {
                    throw new Error("ItemSize can't less or eq ItemHeightIndexOffset");
                }
                if (buffer.length < (width * depth) * itemSize) {
                    throw new Error("Buffer has invalid length");
                }
                this._data = buffer;
                this._itemSize = itemSize;
                this._itemHeightIndexOffset = itemHeightIndexOffset;
            }
            else {
                // TODO: type checker
                this._data = new exports.HeightMapArrType(width * depth * exports.defaultHeightVertexSize);
                this._itemSize = exports.defaultHeightVertexSize;
                this._itemHeightIndexOffset = 0;
            }
        }
        _encodeHeightFactor(store, index, value) {
            store[index] = value;
        }
        _decodeHeightFactor(store, index) {
            return store[index];
        }
        _decodeHeight(store, index, max) {
            return this._decodeHeightFactor(store, index) * max;
        }
        _encodeAndSetHeightFactor(store, index, realHeight, max) {
            const normalize = Math.max(Math.min(realHeight, max), 0);
            const factor = normalize / max;
            this._encodeHeightFactor(store, index, factor);
            return this._decodeHeightFactor(store, index);
        }
        getIndex(x, z) {
            return (z * this._width + x) * this._itemSize + this._itemHeightIndexOffset;
        }
        getFactor(x, z) {
            const index = this.getIndex(x, z);
            return this._decodeHeightFactor(this._data, index);
        }
        get(x, z) {
            const index = this.getIndex(x, z);
            return this._decodeHeight(this._data, index, this._maxHeight);
        }
        set(x, z, value) {
            const index = this.getIndex(x, z);
            return this._encodeAndSetHeightFactor(this._data, index, value, this._maxHeight);
        }
        setMaxHeight(maxHeight) {
            this._maxHeight = maxHeight;
        }
        append(x, z, value) {
            const index = this.getIndex(x, z);
            const oldValue = this._decodeHeight(this._data, index, this._maxHeight);
            const canValue = oldValue + value;
            return this._encodeAndSetHeightFactor(this._data, index, canValue, this._maxHeight);
        }
        multiply(x, z, value, heightIfZero = 0) {
            const index = this.getIndex(x, z);
            const oldValue = this._decodeHeight(this._data, index, this._maxHeight) || heightIfZero;
            const canValue = oldValue * value;
            return this._encodeAndSetHeightFactor(this._data, index, canValue, this._maxHeight);
        }
    }
    exports.HeightMap = HeightMap;
    exports.default = HeightMap;
});
define("src/TerrainSystem/AbsPatchedHeightMap", ["require", "exports", "src/TerrainSystem/HeightMap"], function (require, exports, HeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsPatchedHeightMap = exports.minMaxStackSize = void 0;
    exports.getOrThrowDataChunkSize = getOrThrowDataChunkSize;
    HeightMap_mjs_1 = __importStar(HeightMap_mjs_1);
    exports.minMaxStackSize = 2;
    function getOrThrowDataChunkSize(patchSize, dataChunkSize) {
        if ((dataChunkSize - 1) % (patchSize - 1) !== 0) {
            const recommendedWidth = ((dataChunkSize - 1 + patchSize - 1) / (dataChunkSize - 1)) * (patchSize - 1) + 1;
            console.error("DataChunkSize minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", dataChunkSize, patchSize);
            console.error("Try using DataChunkSize = %d\n", recommendedWidth);
            throw new Error();
        }
        return dataChunkSize;
    }
    class AbsPatchedHeightMap extends HeightMap_mjs_1.default {
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        get dataChunkSize() { return this._dataChunkSize; }
        get dataNumChunksX() { return this._dataNumChunksX; }
        get dataNumChunksZ() { return this._dataNumChunksZ; }
        get dataChunkSizeFactor() { return this._dataChunkSizeFactor; }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, buffer, itemSize = HeightMap_mjs_1.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            super(width, depth, maxHeight, buffer /** TS huck */, itemSize, itemHeightIndexOffset);
            this._minHeightCoord = [0, 0];
            this._maxHeightCoord = [0, 0];
            this._setPatchSize(patchSize);
            this._setDataChunkSize(dataChunkSize);
            this._clearMinMaxHeightCoords();
        }
        _setPatchSize(patchSize) {
            this._patchSize = patchSize;
            this._numPatchesX = ((this.width - 1) / (this._patchSize - 1)) | 0;
            this._numPatchesZ = ((this.depth - 1) / (this._patchSize - 1)) | 0;
            this._patchesSegmentSize = this._numPatchesX * this._numPatchesZ * exports.minMaxStackSize;
            this._minMaxHeightCoords = new Array(this._patchesSegmentSize * 2);
        }
        _setDataChunkSize(value) {
            this._dataChunkSize = getOrThrowDataChunkSize(this._patchSize, value);
            this._dataNumChunksX = ((this.width - 1) / (this._dataChunkSize - 1)) | 0;
            this._dataNumChunksZ = ((this.depth - 1) / (this._dataChunkSize - 1)) | 0;
            this._dataChunkSizeFactor = this._patchSize === this._dataChunkSize
                ? 1.0
                : this._patchSize / (this._dataChunkSize + this._patchSize - (this._dataChunkSize % this._patchSize));
        }
        getIndex(x, z) {
            const localX = x % this._dataChunkSize;
            const localZ = z % this._dataChunkSize;
            const chunkX = x / this._dataChunkSize | 0;
            const chunkZ = z / this._dataChunkSize | 0;
            const chunkOffset = (chunkZ * this._dataNumChunksX + chunkX) * (Math.pow(this._dataChunkSize, 2));
            const localIndex = (localZ * this._dataChunkSize + localX);
            return chunkOffset + localIndex;
        }
        getChunkIndex(chunkX, chunkZ) {
            return chunkZ * this._dataNumChunksX + chunkX;
        }
        getChunkBuffer(type, chunkX, chunkZ) {
            const size = Math.pow(this.dataChunkSize, 2);
            const chunkLevel = chunkZ * this.dataNumChunksX + chunkX;
            const chunkOffset = chunkLevel * size * this.data.BYTES_PER_ELEMENT;
            const count = size * (this.data.BYTES_PER_ELEMENT / type.BYTES_PER_ELEMENT);
            return new type(this.data.buffer, this.data.byteOffset + chunkOffset, count);
        }
        getChunksBuffers(type) {
            const result = new Array(this._dataNumChunksX * this._dataNumChunksZ);
            for (let chunkZ = 0; chunkZ < this._dataNumChunksZ; chunkZ++) {
                for (let chunkX = 0; chunkX < this._dataNumChunksX; chunkX++) {
                    const index = chunkZ * this._dataNumChunksX + chunkX;
                    result[index] = this.getChunkBuffer(type, chunkX, chunkZ);
                }
            }
            return result;
        }
        getEntriesPatchMin(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMin(patchX, patchZ);
        }
        getEntriesPatchMax(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMax(patchX, patchZ);
        }
        getEntriesPatchMinFactor(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMinFactor(patchX, patchZ);
        }
        getEntriesPatchMaxFactor(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMaxFactor(patchX, patchZ);
        }
        getMin() {
            return this.get(this._minHeightCoord[0], this._minHeightCoord[1]);
        }
        getMax() {
            return this.get(this._maxHeightCoord[0], this._maxHeightCoord[1]);
        }
        getMinFactor() {
            return this.getFactor(this._minHeightCoord[0], this._minHeightCoord[1]);
        }
        getMaxFactor() {
            return this.getFactor(this._maxHeightCoord[0], this._maxHeightCoord[1]);
        }
        getPatchMin(patchBaseX, patchBaseZ) {
            const index = (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize;
            return this.get(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        getPatchMax(patchBaseX, patchBaseZ) {
            const index = (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize + this._patchesSegmentSize;
            return this.get(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        getPatchMinFactor(patchBaseX, patchBaseZ) {
            const index = (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize;
            return this.getFactor(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        getPatchMaxFactor(patchBaseX, patchBaseZ) {
            const index = (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize + this._patchesSegmentSize;
            return this.getFactor(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        _clearMinMaxHeightCoords() {
            this._minHeightCoord[0] = 0;
            this._minHeightCoord[1] = 0;
            this._maxHeightCoord[0] = 0;
            this._maxHeightCoord[1] = 0;
            this._minMaxHeightCoords.fill(0);
        }
        recalculateAABB() {
            this._minHeightCoord[0] = 0;
            this._minHeightCoord[1] = 0;
            this._maxHeightCoord[0] = 0;
            this._maxHeightCoord[1] = 0;
            let minFactor = 1;
            let maxFactor = 0;
            for (let patchZ = 0; patchZ < this._numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this._numPatchesX; patchX++) {
                    const minIndex = (patchZ * this._numPatchesX + patchX) * exports.minMaxStackSize;
                    const maxIndex = minIndex + this._patchesSegmentSize;
                    const patchMinFactor = this.getFactor(this._minMaxHeightCoords[minIndex], this._minMaxHeightCoords[minIndex + 1]);
                    const patchMaxfactor = this.getFactor(this._minMaxHeightCoords[maxIndex], this._minMaxHeightCoords[maxIndex + 1]);
                    if (minFactor > patchMinFactor) {
                        minFactor = patchMinFactor;
                        this._minHeightCoord[0] = this._minMaxHeightCoords[minIndex];
                        this._minHeightCoord[1] = this._minMaxHeightCoords[minIndex + 1];
                    }
                    if (maxFactor < patchMaxfactor) {
                        maxFactor = patchMaxfactor;
                        this._maxHeightCoord[0] = this._minMaxHeightCoords[maxIndex];
                        this._maxHeightCoord[1] = this._minMaxHeightCoords[maxIndex + 1];
                    }
                }
            }
        }
        recalculateMinMax(zone) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const fixedMinX = Math.max(zone.minX, 0);
            const fixedMinZ = Math.max(zone.minZ, 0);
            const fixedMaxX = Math.min(zone.maxX, this.width);
            const fixedMaxZ = Math.min(zone.maxZ, this.depth);
            for (let z = fixedMinZ; z < fixedMaxZ; z += this._patchSize) {
                for (let x = fixedMinX; x < fixedMaxX; x += this._patchSize) {
                    const patchX = x / this._patchSize | 0;
                    const patchZ = z / this._patchSize | 0;
                    const patchI = patchZ * this._numPatchesX + patchX;
                    const minIndex = patchI * exports.minMaxStackSize;
                    const maxIndex = minIndex + this._patchesSegmentSize;
                    const firstPatchX = patchX * this._patchSize;
                    const firstPatchZ = patchZ * this._patchSize;
                    const lastPatchX = firstPatchX + this._patchSize;
                    const lastPatchZ = firstPatchZ + this._patchSize;
                    let min = Number.MAX_SAFE_INTEGER;
                    let max = Number.MIN_SAFE_INTEGER;
                    let minX = firstPatchX;
                    let minZ = firstPatchZ;
                    let maxX = firstPatchX;
                    let maxZ = firstPatchZ;
                    for (let innerZ = firstPatchZ + 1; innerZ < lastPatchZ; innerZ++) {
                        for (let innerX = firstPatchX + 1; innerX < lastPatchX; innerX++) {
                            const factor = this.getFactor(innerX, innerZ);
                            if (min > factor) {
                                min = factor;
                                minX = innerX;
                                minZ = innerZ;
                            }
                            if (max < factor) {
                                max = factor;
                                maxX = innerX;
                                maxZ = innerZ;
                            }
                        }
                    }
                    this._minMaxHeightCoords[minIndex] = minX;
                    this._minMaxHeightCoords[minIndex + 1] = minZ;
                    this._minMaxHeightCoords[maxIndex] = maxX;
                    this._minMaxHeightCoords[maxIndex + 1] = maxZ;
                }
            }
        }
    }
    exports.AbsPatchedHeightMap = AbsPatchedHeightMap;
    exports.default = AbsPatchedHeightMap;
});
define("src/TerrainSystem/CompressedPatchedHeightMap", ["require", "exports", "src/TerrainSystem/AbsPatchedHeightMap", "src/TerrainSystem/HeightMap"], function (require, exports, AbsPatchedHeightMap_mjs_1, HeightMap_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CompressedPatchedHeightMap = void 0;
    AbsPatchedHeightMap_mjs_1 = __importStar(AbsPatchedHeightMap_mjs_1);
    class CompressedPatchedHeightMap extends AbsPatchedHeightMap_mjs_1.default {
        get compressAlgoritm() { return this._compressAlgoritm; }
        static createBuffer(width, depth, chunkSize, algoritm) {
            const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
            const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
            const chunkArrSize = Math.pow(chunkSize, 2);
            const chunkCount = numChunksX * numChunksZ;
            const patchXBatchingCount = algoritm === "x4" ? 4 : 2;
            if (numChunksX < patchXBatchingCount) {
                console.error("The chunkSize (%d) should be at least (%d) times smaller than the width (%d)\n", chunkSize, patchXBatchingCount, width);
                throw new Error();
            }
            return (algoritm === "x2"
                ? new Uint16Array(chunkArrSize * chunkCount)
                : new Uint8Array(chunkArrSize * chunkCount));
        }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, algoritm, buffer, itemSize = HeightMap_mjs_2.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            const validDataChunkSize = (0, AbsPatchedHeightMap_mjs_1.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
            const tmpBuffer = buffer !== null && buffer !== void 0 ? buffer : CompressedPatchedHeightMap.createBuffer(width, depth, validDataChunkSize, algoritm);
            super(width, depth, patchSize, dataChunkSize, maxHeight, tmpBuffer, itemSize, itemHeightIndexOffset);
            this._compressAlgoritm = algoritm;
            this._patchXBatchSize = algoritm === "x4" ? 4 : 2;
            this._maxSafeFactor = algoritm === "x4" ? 0xff : 0xffff;
        }
        getChunkIndex(chunkX, chunkZ) {
            return (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
        }
        getChunkBuffer(type, chunkX, chunkZ) {
            const size = Math.pow(this.dataChunkSize, 2);
            const chunkLevel = (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
            const chunkOffset = chunkLevel * size * this.data.BYTES_PER_ELEMENT * this._patchXBatchSize;
            const count = size * this._patchXBatchSize * (this.data.BYTES_PER_ELEMENT / type.BYTES_PER_ELEMENT);
            return new type(this.data.buffer, this.data.byteOffset + chunkOffset, count);
        }
        getChunksBuffers(type) {
            const result = new Array((this.dataNumChunksX / this._patchXBatchSize) * this.dataNumChunksZ);
            for (let chunkZ = 0; chunkZ < this.dataNumChunksZ; chunkZ++) {
                for (let chunkX = 0; chunkX < this.dataNumChunksX; chunkX += this._patchXBatchSize) {
                    const index = (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
                    result[index] = this.getChunkBuffer(type, chunkX, chunkZ);
                }
            }
            return result;
        }
        _encodeHeightFactor(store, index, value) {
            store[index] = Math.min(value * this._maxSafeFactor, this._maxSafeFactor);
        }
        _decodeHeightFactor(store, index) {
            return store[index] / this._maxSafeFactor;
        }
        getIndex(x, z) {
            const localX = x % this.dataChunkSize;
            const localZ = z % this.dataChunkSize;
            const chunkX = x / this.dataChunkSize | 0;
            const chunkZ = z / this.dataChunkSize | 0;
            const chunkLevel = (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
            const chunkOffset = chunkLevel * (Math.pow(this.dataChunkSize, 2));
            const localIndex = localZ * this.dataChunkSize + localX;
            const numCompress = chunkX % this._patchXBatchSize; // compress by x axis
            return (chunkOffset + localIndex) * this._patchXBatchSize + numCompress;
        }
    }
    exports.CompressedPatchedHeightMap = CompressedPatchedHeightMap;
    exports.default = CompressedPatchedHeightMap;
});
define("src/AmmoIntegration/AmmoIntegration", ["require", "exports", "src/TerrainSystem/AbsPatchedHeightMap"], function (require, exports, AbsPatchedHeightMap_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getBuffer = getBuffer;
    function getBuffer(width, depth, patchSize, dataChunkSize, compressAlgoritm) {
        if (typeof Ammo === 'undefined') {
            console.error("Ammo not exists");
            throw new Error();
        }
        const chunkSize = (0, AbsPatchedHeightMap_mjs_2.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
        const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
        const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
        const chunkArrSize = Math.pow(chunkSize, 2);
        const chunkCount = numChunksX * numChunksZ;
        if (compressAlgoritm !== "none") {
            const patchXBatchingCount = compressAlgoritm === "x4" ? 4 : 2;
            if (numChunksX < patchXBatchingCount) {
                console.error("The chunkSize (%d) should be at least (%d) times smaller than the width (%d)\n", chunkSize, patchXBatchingCount, width);
                throw new Error();
            }
        }
        const bsz = compressAlgoritm === "x2" ? 2 :
            compressAlgoritm === "x4" ? 1 :
                4; // float32
        const len = chunkArrSize * chunkCount;
        const ptr = Ammo._malloc(bsz * len);
        switch (compressAlgoritm) {
            case "x4": return new Uint8Array(Ammo.HEAPU8.buffer, ptr, len);
            case "x2": return new Uint16Array(Ammo.HEAPU16.buffer, ptr, len);
            default: return new Float32Array(Ammo.HEAPF32.buffer, ptr, len);
        }
    }
});
define("src/EngineExtensions/Renderer", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    (() => {
        if (!window.EXPERIMENTAL_TERRAIN_CUSTOM_RENDER) {
            return;
        }
        // @ts-ignore
        const originalDrawInstance = pc.ForwardRenderer.prototype.drawInstance;
        // @ts-ignore
        pc.ForwardRenderer.prototype.drawInstance = function (device, meshInstance, mesh, style, normal) {
            if (mesh.primitiveChunks && device.isWebGL2) {
                this.modelMatrixId.setValue(meshInstance.node.worldTransform.data);
                if (normal) {
                    this.normalMatrixId.setValue(meshInstance.node.normalMatrix.data);
                }
                let kb = false;
                for (const primitive of mesh.primitiveChunks[style]) {
                    if (primitive.enabled) {
                        if (primitive.attributes) {
                            for (const scopeId in primitive.attributes) {
                                device.scope.resolve(scopeId).setValue(primitive.attributes[scopeId]);
                            }
                        }
                        device.draw(primitive, 0, kb);
                        kb = true;
                    }
                }
            }
            else {
                originalDrawInstance.call(this, device, meshInstance, mesh, style, normal);
            }
        };
    })();
});
define("src/GrassFieldHelpers/GrassFieldTexture", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GrassFieldTexture = void 0;
    class GrassFieldTexture {
        get texture() { return this._texture; }
        constructor(graphicsDevice, width, depth, buffer) {
            this._width = width;
            this._depth = depth;
            const w = (width - 1) / 4 + 1;
            const d = (depth - 1) / 4 + 1;
            this._buffer = buffer !== null && buffer !== void 0 ? buffer : new Uint8Array(w * d * 4); // => 1 byte = 8 bits => 8 / 2 = 4 bit for 8 levels
            this._texture = new pc.Texture(graphicsDevice, {
                width: w,
                height: d,
                format: pc.PIXELFORMAT_RGBA8U,
                mipmaps: false,
                minFilter: pc.FILTER_NEAREST,
                magFilter: pc.FILTER_NEAREST,
                addressU: pc.ADDRESS_CLAMP_TO_EDGE,
                addressV: pc.ADDRESS_CLAMP_TO_EDGE,
                flipY: graphicsDevice.isWebGPU,
                levels: [this._buffer]
            });
        }
        destroy() {
            var _a;
            (_a = this._texture) === null || _a === void 0 ? void 0 : _a.destroy();
        }
        setChannel(x, z, channel) {
            const index = (x + z * this._width) / 4 | 0;
            const value = this._buffer[index];
        }
        setPixel() {
            if (this._texture) {
                const device = this._texture.device;
                const dataChunkSize = 1;
                const buffer = new Uint8Array(4);
                if (device.isWebGL2) {
                    const gl = device.gl;
                    const textureFormat = this._texture.impl._glFormat;
                    const texturePixelT = this._texture.impl._glPixelType;
                    const textureTarget = this._texture.impl._glTarget;
                    const textureObject = this._texture.impl._glTexture;
                    gl.bindTexture(textureTarget, textureObject);
                    gl.texSubImage3D(gl.TEXTURE_2D_ARRAY, 0, 0, 0, 0, dataChunkSize, dataChunkSize, 1, textureFormat, texturePixelT, buffer);
                }
                else if (device.isWebGPU) {
                    const webgpu = device.wgpu;
                    const texture = (this._texture.impl.gpuTexture);
                    webgpu.queue.writeTexture({
                        texture: texture,
                        origin: [0, 0, 0],
                        mipLevel: 0
                    }, buffer, {
                        offset: 0,
                        bytesPerRow: 4 * dataChunkSize, // always 4 for rgba format
                        rowsPerImage: dataChunkSize
                    }, {
                        width: dataChunkSize,
                        height: dataChunkSize
                    });
                }
            }
        }
    }
    exports.GrassFieldTexture = GrassFieldTexture;
    GrassFieldTexture.MAX_CHANEL = 8;
});
define("src/Shared/Utils", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.checkSupportR32FTexture = exports.littleEndian = exports.setPrecision = void 0;
    exports.getText = getText;
    exports.clamp = clamp;
    exports.randomFloat = randomFloat;
    exports.randomFloatRange = randomFloatRange;
    exports.calcNextPowerOfTwo = calcNextPowerOfTwo;
    exports.nrand = nrand;
    function getText(val, minWidth, prefix) {
        const str = val.toString();
        const strLen = str.length;
        const appendCount = minWidth - strLen;
        let result = str;
        for (let i = 0; i < appendCount; i++) {
            result = prefix + result;
        }
        return result;
    }
    function clamp(value, min, max) {
        return Math.max(min, Math.min(max, value));
    }
    function randomFloat() {
        return Math.random();
    }
    function randomFloatRange(start, end) {
        if (end == start) {
            throw new Error("Invalid random range");
        }
        const delta = end - start;
        const randomValue = randomFloat() * delta + start;
        return randomValue;
    }
    function calcNextPowerOfTwo(x) {
        let ret = 1;
        if (x == 1) {
            return 2;
        }
        while (ret < x) {
            ret = ret * 2;
        }
        return ret;
    }
    /** A random number from -1.0 to 1.0 */
    function nrand() {
        return Math.random() * 2.0 - 1.0;
    }
    const setPrecision = (graphicsDevice, shaderCode) => {
        return "precision " + graphicsDevice.precision + " float;\n" + shaderCode;
    };
    exports.setPrecision = setPrecision;
    exports.littleEndian = (() => {
        const uint8Array = new Uint8Array([0xAA, 0xBB]);
        const uint16array = new Uint16Array(uint8Array.buffer);
        return uint16array[0] === 0xBBAA;
    })();
    const checkSupportR32FTexture = (graphicsDevice) => {
        try {
            // TODO: need more test...
            // TODO: on iphone not work r32f textures
            if (navigator.platform.match(/iPhone|iPod|iPad/) !== null ||
                navigator.platform.startsWith("Mac") && navigator.maxTouchPoints > 4) {
                return false;
            }
            if (graphicsDevice.isWebGL2) {
                const gl = graphicsDevice.gl;
                let result = gl.getExtension("EXT_color_buffer_float");
                if (result) {
                    result = gl.getExtension("OES_texture_float");
                }
                if (!!result) {
                    return false;
                }
            }
            return true;
        }
        catch (ex) {
            return false;
        }
    };
    exports.checkSupportR32FTexture = checkSupportR32FTexture;
});
define("src/TerrainHelpers/TerrainPatchesShaderChunks", ["require", "exports", "src/Shared/Utils"], function (require, exports, Utils_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.chunks = exports.heightMapFactorsChunks = exports.diffusePS = exports.maxLayersCount = exports.gammaNormalizeChunkPS = exports.gammaNormalizeHeaderPS = exports.startVS = exports.normalCoreVS = exports.normalVS = exports.normalByHeightMapVS = exports.startUv0VS = exports.uv0VS = exports.transformVS = exports.transformDeclVS = exports.transformInstancingVS = exports.instancingVS = exports.terrainHeightChunkVS = exports.terrainHeightFactorChunkVS = exports.terrainChunkBufferCoordVS = exports.terrainHeightFactorRGBA8UX4VS = exports.terrainHeightFactorRG16UX2VS = exports.terrainHeightFactorRGBA8UVS = exports.terrainHeightFactorR32FVS = exports.terrainCoordsChunkVS = exports.currentTerrainXZChunkVS = exports.currentTerrainXZForCombineInstancingChunkVS = exports.currentTerrainXZForInstancingChunkVS = exports.baseClearSubVS = exports.baseClearVS = exports.heightMapSamplerBugFix = exports.baseForCombineInstancingVS = exports.baseForInstancingVS = exports.OLD_baseForInstancingVS = exports.baseOriginalVS = exports.definesVS = exports.littleEndianValue = exports.terrainSplatMapParamName = exports.terrainMaxHeightParamName = exports.terrainHeightMapParamName = exports.patchLodCoreParamName = exports.patchCoordOffsetParamName = exports.patchInstCoordOffsetParamName = exports.vertexNormalAttrName = exports.vertexHeightAttrName = exports.vertexCoordAttrName = void 0;
    exports.getTerrainHeightFactorVS = getTerrainHeightFactorVS;
    exports.getTextureType = getTextureType;
    exports.getSamplerType = getSamplerType;
    exports.getTerrainShaderChunks = getTerrainShaderChunks;
    exports.vertexCoordAttrName = "vertex_position";
    exports.vertexHeightAttrName = "vertex_height";
    exports.vertexNormalAttrName = "vertex_normal";
    exports.patchInstCoordOffsetParamName = "vertex_postion_offset";
    exports.patchCoordOffsetParamName = "uTerrainPatchCoordOffset";
    exports.patchLodCoreParamName = "uTerrainPatchLodCore";
    exports.terrainHeightMapParamName = "uTerrainHeightMap";
    exports.terrainMaxHeightParamName = "uTerrainMaxHeight";
    exports.terrainSplatMapParamName = "uTerrainSplatMap";
    exports.littleEndianValue = Utils_mjs_1.littleEndian ? 'true' : 'false';
    exports.definesVS = `
    #define HM_NUM_CHUNKS_X     (%%HM_NUM_CHUNKS_X%%)
    #define HM_NUM_CHUNKS_X_U   (uint(HM_NUM_CHUNKS_X))
    #define HM_CHUNK_SIZE       (%%HM_CHUNK_SIZE%%)
    #define HM_CHUNK_SIZE_U     (uint(HM_CHUNK_SIZE))
    #define HM_CHUNK_SIZE_M1_U  (HM_CHUNK_SIZE_U - 1u)
    #define HM_CHUNK_SIZE_F     (float(HM_CHUNK_SIZE))
    #define TR_SIZE             (ivec2(%%TR_SIZE_X%%, %%TR_SIZE_Z%%))
    #define TR_SIZE_F           (vec2(%%TR_SIZE_X_F%%, %%TR_SIZE_Z_F%%))
    #define TR_SIZE_U           (uvec2(TR_SIZE))
    #define TR_SIZE_H_F         (TR_SIZE_F / 2.0)
    #define TR_SIZE_H_N_F       (-TR_SIZE_H_F)
    #define TR_PATCH_SIZE_X     (%%TR_PATCH_SIZE_X%%)
    #define TR_PATCH_SIZE_M1    (TR_PATCH_SIZE_X - 1.0)
    #define TR_PATCH_SIZE_M1_H  (TR_PATCH_SIZE_M1 / 2.0)
    #define TR_PATCH_SIZE_M1_F  (vec2(TR_PATCH_SIZE_M1_H, TR_PATCH_SIZE_M1_H))
`;
    exports.baseOriginalVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
`;
    exports.OLD_baseForInstancingVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
    attribute uvec2 ${exports.patchInstCoordOffsetParamName};
`;
    exports.baseForInstancingVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
    attribute uvec2 ${exports.patchInstCoordOffsetParamName};
`;
    exports.baseForCombineInstancingVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
    attribute uvec4 ${exports.patchInstCoordOffsetParamName};
`;
    exports.heightMapSamplerBugFix = `
    uniform highp %%HEIGHT_MAP_SAMPLER%% ${exports.terrainHeightMapParamName};
    
    #if defined (WEBGPU)
        #define fix_${exports.terrainHeightMapParamName} highp %%HEIGHT_MAP_SAMPLER%%(${exports.terrainHeightMapParamName}_texture, ${exports.terrainHeightMapParamName}_sampler)
    #else
        #define fix_${exports.terrainHeightMapParamName} ${exports.terrainHeightMapParamName}
    #endif
`;
    exports.baseClearVS = `
    uniform mat4 matrix_viewProjection;
    uniform mat4 matrix_model;
    uniform mat3 matrix_normal;

    uniform mediump vec2 ${exports.patchCoordOffsetParamName};
    uniform mediump float ${exports.patchLodCoreParamName};

    uniform mediump float ${exports.terrainMaxHeightParamName};

    vec2 dCurrentTerrainXZ;
    float dCurrentTerrainHeight;
`;
    exports.baseClearSubVS = `
    vec3 dPositionW;
    mat4 dModelMatrix;
    mat3 dNormalMatrix;

    vec3 dCurrentTerrainNormal;
`;
    exports.currentTerrainXZForInstancingChunkVS = `
    vec2 getCurrentTerrainXZ() {
        return vec2(${exports.vertexCoordAttrName} + ${exports.patchInstCoordOffsetParamName});
    }
`;
    exports.currentTerrainXZForCombineInstancingChunkVS = `
    vec4 rotatePatchXZCoff[4] = vec4[4](
        vec4( 1.0,  0.0,  0.0,  1.0),
        vec4( 0.0,  1.0, -1.0,  0.0),
        vec4(-1.0,  0.0,  0.0, -1.0),
        vec4( 0.0, -1.0,  1.0,  0.0)
    );

    vec2 rotatePatchXZ(vec2 coord, uint angle) {
        vec2 offset = coord - TR_PATCH_SIZE_M1_H;
        vec4 transf = rotatePatchXZCoff[angle];
        return TR_PATCH_SIZE_M1_H + offset.xx * transf.xz + offset.yy * transf.yw;
    }

    vec2 getCurrentTerrainXZ() {
        vec2 orgXZ = vec2(${exports.vertexCoordAttrName});
        uint angle = ${exports.patchInstCoordOffsetParamName}.z;
        vec2 rotXZ = rotatePatchXZ(orgXZ, angle);
        return rotXZ + vec2(${exports.patchInstCoordOffsetParamName}.xy) * TR_PATCH_SIZE_M1;
    }
`;
    exports.currentTerrainXZChunkVS = `
    vec2 getCurrentTerrainXZ() {
        return vec2(${exports.vertexCoordAttrName}) + ${exports.patchCoordOffsetParamName};
    }
`;
    exports.terrainCoordsChunkVS = `
    vec2 getCurrentTerrainUvCoord() {
        vec2 xz = dCurrentTerrainXZ;
        vec2 uv = (xz + 0.5) / TR_SIZE_F;
        return uv;
    }
    
    uvec2 clampTerrainXZ(vec2 xz) {
        return uvec2(clamp(xz, vec2(0.0), TR_SIZE_F));
    }
    
    vec2 getTerrainXZ(ivec2 offset) {
        return dCurrentTerrainXZ + vec2(offset);
    }
`;
    exports.terrainHeightFactorR32FVS = `
    float getTerrainHeightFactorFromTexture(uvec3 coord) {
        return texelFetch(fix_${exports.terrainHeightMapParamName}, ivec3(coord), 0).r;
    }
`;
    // https://stackoverflow.com/questions/63827836/is-it-possible-to-do-a-rgba-to-float-and-back-round-trip-and-read-the-pixels-in
    // note: the 0.1s here an there are voodoo related to precision
    /*
        float rgba8uToFloat0(uvec4 v) {
            vec4 bits  = vec4(${littleEndian ? 'v' : 'v.abgr'});
            float sign = mix(-1.0, 1.0, step(bits[3], 128.0));
            float expo = floor(mod(bits[3] + 0.1, 128.0)) * 2.0 + floor((bits[2] + 0.1) / 128.0) - 127.0;
            float sig  = bits[0] + bits[1] * 256.0 + floor(mod(bits[2] + 0.1, 128.0)) * 256.0 * 256.0;
            return sign * (1.0 + sig / 8388607.0) * pow(2.0, expo);
        }
    */
    exports.terrainHeightFactorRGBA8UVS = `    
    float rgba8uToFloat(uvec4 v) {
        uvec4 bits = ${Utils_mjs_1.littleEndian ? 'v' : 'v.abgr'};
        float sign = 2.0 * step(float(bits[3]), 128.0) - 1.0;
        float expo = float((bits[3] & 127u) * 2u + bits[2] / 128u) - 127.0;
        float sig  = float(bits[0] + bits[1] * 256u + (bits[2] & 127u) * 65536u);
        return sign * (1.0 + sig / 8388607.0) * pow(2.0, expo);
    }

    float getTerrainHeightFactorFromTexture(uvec3 coord) {
        uvec4 rgba = texelFetch(fix_${exports.terrainHeightMapParamName}, ivec3(coord), 0);
        return rgba8uToFloat(rgba);
    }
`;
    // Compress height by x coord [patch0, patch1] ...
    // see: CompressedPatchedHeightMap file
    exports.terrainHeightFactorRG16UX2VS = `
    float getTerrainHeightFactorFromTexture(uvec3 coord) {

        uint level    = coord.b;
        uint newLevel = level / 2u;
        uint shift    = level & 1u;

        uvec4 rgba = texelFetch(fix_${exports.terrainHeightMapParamName}, ivec3(coord.xy, newLevel), 0);

        return float(rgba[shift]) / 65535.0;
    }
`;
    // Compress height by x coord [patch0, patch1, patch2, patch3] ...
    // see: CompressedPatchedHeightMap file
    exports.terrainHeightFactorRGBA8UX4VS = `
    float getTerrainHeightFactorFromTexture(uvec3 coord) {

        uint level    = coord.b;
        uint newLevel = level / 4u;
        uint shift    = level & 3u;

        uvec4 rgba = texelFetch(fix_${exports.terrainHeightMapParamName}, ivec3(coord.xy, newLevel), 0);

        return float(rgba[shift]) / 255.0;
    }
`;
    exports.terrainChunkBufferCoordVS = `
    uvec3 getTerrainChunkBufferCoord(uvec2 xz) {

        uvec2 ck = xz / HM_CHUNK_SIZE_U;

        uint localX = xz[0] % HM_CHUNK_SIZE_U;
        uint localZ = xz[1] % HM_CHUNK_SIZE_U;
        uint level  = ck[1] * HM_NUM_CHUNKS_X_U + ck[0];

        return uvec3(localX, localZ, level);
    }

    uvec3 getTerrainChunkBufferRelativeCoord(ivec2 offset) {
        vec2  oc = getTerrainXZ(offset);
        uvec2 xz = clampTerrainXZ(oc);
        return getTerrainChunkBufferCoord(xz);
    }
`;
    exports.terrainHeightFactorChunkVS = `
    float getTerrainHeightFactor(ivec2 offset) {
        uvec3 coord = getTerrainChunkBufferRelativeCoord(offset);
        return getTerrainHeightFactorFromTexture(coord);
    }
`;
    exports.terrainHeightChunkVS = `
    float getTerrainHeight(ivec2 offset) {
        return getTerrainHeightFactor(offset) * ${exports.terrainMaxHeightParamName};
    }
    
    float getCurrentTerrainHeight() {
        return getTerrainHeight(ivec2(0, 0));
    }
`;
    exports.instancingVS = ``;
    exports.transformInstancingVS = ``;
    exports.transformDeclVS = ``;
    exports.transformVS = `
    //varying float vPatchLod;
    varying vec2 vUvCoord;
    varying vec2 vGridPosition;

    mat4 getModelMatrix() {
        return matrix_model;
    }

    vec3 getWorldPosition() {
        return dPositionW;
    }
    
    vec4 getPosition() {
    
        dModelMatrix = getModelMatrix();
        dCurrentTerrainXZ = getCurrentTerrainXZ();
        dCurrentTerrainHeight = getCurrentTerrainHeight();

        vec2 centeredXZ = TR_SIZE_H_N_F + dCurrentTerrainXZ;
        vec4 localPos   = vec4(centeredXZ.r, dCurrentTerrainHeight, centeredXZ.g, 1.0);
        
        vec4 posW      = dModelMatrix * localPos;
        vec4 screenPos = matrix_viewProjection * posW;

        dPositionW = posW.xyz;

        //vPatchLod     = ${exports.patchLodCoreParamName};
        vGridPosition = dCurrentTerrainXZ;
        vUvCoord      = getCurrentTerrainUvCoord();

        return screenPos;
    }
`;
    exports.uv0VS = `
`;
    // FIX: bug with getUv0 for V1 Engine
    exports.startUv0VS = ` 
    vec2 getUv0() {
        return vec2(0.0);
    }
`;
    exports.normalByHeightMapVS = `
    vec3 getCurrentTerrainNormal() {

        float step  = pow(2.0, ${exports.patchLodCoreParamName} + 1.0) / 2.0;
        float left  = getTerrainHeightFactor(ivec2( step,  0));
        float right = getTerrainHeightFactor(ivec2(-step,  0));
        float up    = getTerrainHeightFactor(ivec2( 0,     step));
        float down  = getTerrainHeightFactor(ivec2( 0,    -step));

        vec3 normal = vec3(left, step * 0.02, down) - vec3(right, 0, up);

        return normalize(normal);
    }
`;
    exports.normalVS = `
    vec3 getNormal() {
        dNormalMatrix = matrix_normal;
        return normalize(dNormalMatrix * dCurrentTerrainNormal);
    }
`;
    exports.normalCoreVS = `
    // FIX: vertex_normal undeclaration
    vec3 vertex_normal;
    vec3 dCurrentTerrainNormal;

    vec3 getLocalNormal(vec3 vertexNormal) {

        dCurrentTerrainNormal = getCurrentTerrainNormal();
        vertex_normal = dCurrentTerrainNormal;

        return dCurrentTerrainNormal;
    }

    mat3 getNormalMatrix(mat4 modelMatrix) {
        return matrix_normal;
    }
`;
    exports.startVS = `
    void main(void) {

        gl_Position = getPosition();

    #if defined(SHADOW_PASS)
    #else
        dCurrentTerrainNormal = getCurrentTerrainNormal();
    #endif
`;
    exports.gammaNormalizeHeaderPS = `
    #define GAMMA_NORMALIZE
`;
    exports.gammaNormalizeChunkPS = `
    vec3 autoGammaCorrectInput(vec3 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    vec4 autoGammaCorrectInput(vec4 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }
`;
    exports.maxLayersCount = 5; // Default + R + G + B + A
    exports.diffusePS = `
    uniform mediump sampler2D ${exports.terrainSplatMapParamName};
    uniform mediump sampler2DArray uTerrainLayersDiffuse;
    //uniform mediump sampler2DArray uTerrainLayersNormalMap;
    uniform float uTerrainLayersCount;
    uniform float uTerrainLayersFlags[${exports.maxLayersCount}];
    uniform vec2 uTerrainLayersScale[${exports.maxLayersCount}];
    uniform vec2 uTerrainLayersOffset[${exports.maxLayersCount}];

    //varying float vPatchLod;
    varying vec2 vUvCoord;
    varying vec2 vGridPosition;

    void getAlbedo() {

        vec4 splat     = autoGammaCorrectInput(texture(${exports.terrainSplatMapParamName}, vUvCoord));
        vec2 uvTexZero = uTerrainLayersOffset[0] + vUvCoord * uTerrainLayersScale[0]; // / (vPatchLod + 1.0);
        vec4 texZero   = texture(uTerrainLayersDiffuse, vec3(uvTexZero, 0));
        vec3 albedo    = texZero.rgb;

        for (int i = 1; i < ${exports.maxLayersCount}; ++i) {

            if (uTerrainLayersFlags[i] > 0.0 && splat[i - 1] > 0.0) {

                vec2 uv  = uTerrainLayersOffset[i] + vUvCoord * uTerrainLayersScale[i];
                vec4 tex = texture(uTerrainLayersDiffuse, vec3(uv, i));

                albedo = mix(albedo, tex.rgb, splat[i - 1]);
            }
        }

        dAlbedo = autoGammaCorrectInput(albedo);
    }
`;
    exports.heightMapFactorsChunks = {
        terrainHeightFactorR32FVS: exports.terrainHeightFactorR32FVS,
        terrainHeightFactorRGBA8UVS: exports.terrainHeightFactorRGBA8UVS,
        terrainHeightFactorRG16UX2VS: exports.terrainHeightFactorRG16UX2VS,
        terrainHeightFactorRGBA8UX4VS: exports.terrainHeightFactorRGBA8UX4VS,
    };
    exports.chunks = Object.assign(Object.assign({}, exports.heightMapFactorsChunks), { heightMapSamplerBugFix: exports.heightMapSamplerBugFix,
        currentTerrainXZForCombineInstancingChunkVS: exports.currentTerrainXZForCombineInstancingChunkVS,
        currentTerrainXZForInstancingChunkVS: exports.currentTerrainXZForInstancingChunkVS,
        currentTerrainXZChunkVS: exports.currentTerrainXZChunkVS,
        terrainHeightFactorChunkVS: exports.terrainHeightFactorChunkVS,
        terrainHeightChunkVS: exports.terrainHeightChunkVS,
        terrainCoordsChunkVS: exports.terrainCoordsChunkVS,
        terrainChunkBufferCoordVS: exports.terrainChunkBufferCoordVS,
        normalByHeightMapVS: exports.normalByHeightMapVS,
        // Vertex
        definesVS: exports.definesVS,
        baseForCombineInstancingVS: exports.baseForCombineInstancingVS,
        baseForInstancingVS: exports.baseForInstancingVS,
        baseOriginalVS: exports.baseOriginalVS,
        baseClearVS: exports.baseClearVS,
        baseClearSubVS: exports.baseClearSubVS,
        transformDeclVS: exports.transformDeclVS,
        transformVS: exports.transformVS,
        instancingVS: exports.instancingVS,
        transformInstancingVS: exports.transformInstancingVS,
        normalVS: exports.normalVS,
        normalCoreVS: exports.normalCoreVS,
        uv0VS: exports.uv0VS,
        startVS: exports.startVS,
        startUv0VS: exports.startUv0VS,
        // Fragment
        gammaNormalizeHeaderPS: exports.gammaNormalizeHeaderPS,
        gammaNormalizeChunkPS: exports.gammaNormalizeChunkPS,
        diffusePS: exports.diffusePS });
    function getTerrainHeightFactorVS(format, chunksStore) {
        switch (format) {
            case 'r32f': return chunksStore.terrainHeightFactorR32FVS;
            case 'rgba': return chunksStore.terrainHeightFactorRGBA8UVS;
            case 'rgbaX2': return chunksStore.terrainHeightFactorRG16UX2VS;
            case 'rgbaX4': return chunksStore.terrainHeightFactorRGBA8UX4VS;
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getTextureType(format) {
        switch (format) {
            case 'r32f': return pc.PIXELFORMAT_R32F;
            case 'rgba': return pc.PIXELFORMAT_RGBA8U;
            case 'rgbaX2': return pc.PIXELFORMAT_RG16U;
            case 'rgbaX4': return pc.PIXELFORMAT_RGBA8U;
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getSamplerType(format) {
        switch (format) {
            case 'r32f': return 'sampler2DArray';
            case 'rgba': return 'usampler2DArray';
            case 'rgbaX2': return 'usampler2DArray';
            case 'rgbaX4': return 'usampler2DArray';
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getTerrainShaderChunks({ width, depth, patchSize, heightMapChunkSize, instancing, heightMapFormat, chunksStore = exports.chunks, engineVersion = 'v1', }) {
        const definesVS = chunksStore.definesVS
            .replace('%%HM_NUM_CHUNKS_X%%', String((width - 1) / (heightMapChunkSize - 1) | 0))
            .replace('%%HM_CHUNK_SIZE%%', String(heightMapChunkSize | 0))
            .replace('%%TR_SIZE_X%%', String(width))
            .replace('%%TR_SIZE_Z%%', String(depth))
            .replace('%%TR_SIZE_X_F%%', width.toFixed(1))
            .replace('%%TR_SIZE_Z_F%%', depth.toFixed(1))
            .replace('%%TR_PATCH_SIZE_X%%', patchSize.toFixed(1));
        const terrainHeightFactorVS = getTerrainHeightFactorVS(heightMapFormat, chunksStore);
        const baseClearVS = chunksStore.baseClearVS + chunksStore.heightMapSamplerBugFix.replaceAll('%%HEIGHT_MAP_SAMPLER%%', getSamplerType(heightMapFormat));
        const baseCoordVS = instancing === 'combine' ? chunksStore.baseForCombineInstancingVS :
            instancing === 'simple' ? chunksStore.baseForInstancingVS :
                chunksStore.baseOriginalVS;
        const currentTerrainXZVS = instancing === 'combine' ? chunksStore.currentTerrainXZForCombineInstancingChunkVS :
            instancing === 'simple' ? chunksStore.currentTerrainXZForInstancingChunkVS :
                chunksStore.currentTerrainXZChunkVS;
        if (engineVersion === 'v2') {
            const normalCoreVS = chunksStore.normalByHeightMapVS + chunksStore.normalCoreVS;
            const transformVS = definesVS
                + baseCoordVS
                + baseClearVS
                + currentTerrainXZVS
                + terrainHeightFactorVS
                + chunksStore.terrainCoordsChunkVS
                + chunksStore.terrainChunkBufferCoordVS
                + chunksStore.terrainHeightFactorChunkVS
                + chunksStore.terrainHeightChunkVS
                + chunksStore.transformVS;
            const diffusePS = chunksStore.gammaNormalizeHeaderPS
                + chunksStore.gammaNormalizeChunkPS
                + chunksStore.diffusePS;
            return {
                // Vertex
                normalCoreVS,
                transformVS,
                transformCoreVS: "",
                transformInstancingVS: "",
                // Fragment
                diffusePS,
            };
        }
        const startVS = chunksStore.normalByHeightMapVS + chunksStore.startUv0VS + chunksStore.startVS;
        const baseVS = baseCoordVS + baseClearVS + chunksStore.baseClearSubVS;
        const transformVS = definesVS
            + currentTerrainXZVS
            + terrainHeightFactorVS
            + chunksStore.terrainCoordsChunkVS
            + chunksStore.terrainChunkBufferCoordVS
            + chunksStore.terrainHeightFactorChunkVS
            + chunksStore.terrainHeightChunkVS
            + chunksStore.transformVS;
        const diffusePS = chunksStore.gammaNormalizeHeaderPS
            + chunksStore.gammaNormalizeChunkPS
            + chunksStore.diffusePS;
        return {
            // Vertex
            baseVS,
            transformVS,
            normalVS: chunksStore.normalVS,
            uv0VS: chunksStore.uv0VS,
            startVS,
            transformDeclVS: chunksStore.transformDeclVS,
            instancingVS: chunksStore.instancingVS,
            // Fragment
            diffusePS,
        };
    }
});
define("src/GrassFieldHelpers/GrassShaderChunk", ["require", "exports", "src/TerrainHelpers/TerrainPatchesShaderChunks"], function (require, exports, TerrainPatchesShaderChunks_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.chunks = exports.diffusePS = exports.startVS = exports.calculateLocalVS = exports.bladeDecoderVS = exports.terrainHeightMapVS = exports.baseClearSubVS = exports.baseVS = exports.startUv0VS = exports.uv0VS = exports.normalVS = exports.transformVS = exports.normalCoreVS = exports.definesBladeVS = exports.definesVS = exports.transformDeclVS = exports.transformInstancingVS = exports.instancingVS = exports.windIntensityParamName = exports.drawPosParamName = exports.lod2OffsetXZParamName = exports.lod1OffsetXZParamName = exports.terrainScaleParamName = exports.timeParamName = exports.shapeAttrName = exports.offsetAttrName = exports.vindexAttrName = void 0;
    exports.getGrassShaderChunks = getGrassShaderChunks;
    exports.vindexAttrName = "vertex_position";
    exports.offsetAttrName = "vertex_offset";
    exports.shapeAttrName = "vertex_shape";
    exports.timeParamName = "uTime";
    exports.terrainScaleParamName = "uTerrainScale";
    exports.lod1OffsetXZParamName = "uLod1OffsetXZ";
    exports.lod2OffsetXZParamName = "uLod2OffsetXZ";
    exports.drawPosParamName = "uDrawPosition";
    exports.windIntensityParamName = "uWindIntensity";
    exports.instancingVS = ``;
    exports.transformInstancingVS = ``;
    exports.transformDeclVS = ``;
    exports.definesVS = `
    #define HM_NUM_CHUNKS_X    (%%HM_NUM_CHUNKS_X%%)
    #define HM_NUM_CHUNKS_X_U  (uint(HM_NUM_CHUNKS_X))
    #define HM_CHUNK_SIZE      (%%HM_CHUNK_SIZE%%)
    #define HM_CHUNK_SIZE_F    (float(HM_CHUNK_SIZE))
    #define HM_CHUNK_SIZE_U    (uint(HM_CHUNK_SIZE))
    #define TR_SIZE            (ivec2(%%TR_SIZE_X%%, %%TR_SIZE_Z%%))
    #define TR_SIZE_F          (vec2(%%TR_SIZE_X_F%%, %%TR_SIZE_Z_F%%))
    #define TR_SIZE_BOUND_F    (TR_SIZE_F - 2.0)      
    #define TR_SIZE_H_F        (TR_SIZE_F / 2.0)
    #define TR_SIZE_H_N_F      (-TR_SIZE_H_F)

    #define PATCH_SIZE         (%%PATCH_SIZE%%)
    #define HALF_PATCH_SIZE    (PATCH_SIZE / 2.0)

    #define BLADE_HEIGHT_TALL  (%%BLADE_HEIGHT_TALL%%) // height of a tall blade

    #define TRANSITION_LOW     (%%TRANSITION_LOW%%)   // elevation of beach-grass transition (start)
    #define TRANSITION_HIGH    (%%TRANSITION_HIGH%%)  // (end)
    #define TRANSITION_NOISE   (0.06)                 // transition noise scale
    #define CIRCLE_RADIUS      (PATCH_SIZE * 2.9)
    #define MAX_ZINIT_DISTANCE (300.0)
`;
    exports.definesBladeVS = `
    #define LOD0_BLADE_SEGS        (%%LOD0_BLADE_SEGS%%) // # of blade segments lod 0
    #define LOD1_BLADE_SEGS        (%%LOD1_BLADE_SEGS%%) // # of blade segments lod 1
    #define LOD2_BLADE_SEGS        (%%LOD2_BLADE_SEGS%%) // # of blade segments lod 2

    #define LOD0_BLADE_DIVS        (LOD0_BLADE_SEGS + 1.0)  // # of divisions
    #define LOD0_BLADE_VERTS       (LOD0_BLADE_DIVS * 2.0)  // # of vertices (per side, so 1/2 total)
    #define LOD0_BLADE_VERTS_COUNT (LOD0_BLADE_VERTS * 2.0) // # of vertices

    #define LOD1_BLADE_DIVS        (LOD1_BLADE_SEGS + 1.0)  // # of divisions
    #define LOD1_BLADE_VERTS       (LOD1_BLADE_DIVS * 2.0)  // # of vertices (per side, so 1/2 total)
    #define LOD1_BLADE_VERTS_COUNT (LOD1_BLADE_VERTS * 2.0) // # of vertices

    #define LOD2_BLADE_DIVS        (LOD2_BLADE_SEGS + 1.0)  // # of divisions
    #define LOD2_BLADE_VERTS       (LOD2_BLADE_DIVS * 2.0)  // # of vertices (per side, so 1/2 total)
    #define LOD2_BLADE_VERTS_COUNT (LOD2_BLADE_VERTS * 2.0) // # of vertices
    
    #define LOD2_BLADE_VERTS_ALL_COUNT (LOD2_BLADE_VERTS_COUNT * 16.0) // # of vertices all fragments
`;
    exports.normalCoreVS = `
    // FIX: vertex_normal undeclaration
    vec3 vertex_normal;

    vec3 getLocalNormal(vec3 vertexNormal) {

        // Set default shader normal
        vertex_normal = dVertexNormal;

        return dVertexNormal;
    }

    mat3 getNormalMatrix(mat4 modelMatrix) {
        return matrix_normal;
    }
`;
    exports.transformVS = `
    vec3 getWorldPosition() {
        return dPositionW;
    }

    mat4 getModelMatrix() {
        return matrix_model;
    }

    vec4 getPosition() {

        decodeBlade();
        calculateBladeVertex();

        dModelMatrix = getModelMatrix();

        vec4 posW      = dModelMatrix * vec4(dVertexPosition, 1.0);
        vec4 screenPos = matrix_viewProjection * posW;

        dPositionW = posW.xyz;

        return screenPos;
    }
`;
    exports.normalVS = `
    vec3 getNormal() {
        dNormalMatrix = matrix_normal;
        return normalize(dNormalMatrix * dVertexNormal);
    }
`;
    exports.uv0VS = `
    vec2 getUv0() {
        return vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);
    }
`;
    // bug with getUv0
    exports.startUv0VS = `    
    vec2 getUv0() {
        return vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);
    }
`;
    exports.baseVS = `
    uniform mat4 matrix_viewProjection;
    uniform mat4 matrix_model;
    uniform mat3 matrix_normal;

    uniform mediump usampler2D uDataMap;

    uniform vec3  ${exports.terrainScaleParamName};
    uniform float ${TerrainPatchesShaderChunks_mjs_1.terrainMaxHeightParamName};
    
    uniform vec3  ${exports.drawPosParamName};       // centre of where we want to draw
    uniform float ${exports.timeParamName};          // used to animate blades
    uniform float ${exports.windIntensityParamName};

    uniform vec2 ${exports.lod1OffsetXZParamName}[8];  // center offset from draw pos lod 1
    uniform vec2 ${exports.lod2OffsetXZParamName}[16]; // center offset from draw pos lod 2

    attribute float ${exports.vindexAttrName};
    attribute vec4 ${exports.offsetAttrName};
    attribute vec4 ${exports.shapeAttrName};

    float dVertexIndex;           // vertex index for this side of the blade
    float dDivVertexIndex;        // div index (0 .. BLADE_DIVS)
    float dPercentOfBladeHeight;  // percent of height of blade this vertex is at
    float dSideOfBlade;           // front/back side of blade
    float dEdgeOfBlade;           // left/right edge (x=0 or x=1)
    vec2 dBladeTerrainXZPos;      // blade xz position on terrain
    vec3 dVertexPosition;         // Vertex position - start with 2D shape, no bend applied
    vec3 dVertexNormal;           // Vertex normal
    vec2 dTerrainPatchOffsetXZ;   // Terrain patch offset from center
`;
    exports.baseClearSubVS = `
    vec3 dPositionW;
    mat4 dModelMatrix;
    mat3 dNormalMatrix;
`;
    exports.terrainHeightMapVS = `
    uvec2 clampTerrainXZ(vec2 xz) {
        return uvec2(clamp(xz, vec2(0.0), TR_SIZE_F));
    }

    uvec3 getTerrainChunkBufferCoord(vec2 origXZ) {

        uvec2 xz = clampTerrainXZ(origXZ);
        uvec2 ck = xz / HM_CHUNK_SIZE_U;

        uint localX = xz[0] % HM_CHUNK_SIZE_U;
        uint localZ = xz[1] % HM_CHUNK_SIZE_U;
        uint level  = ck[1] * HM_NUM_CHUNKS_X_U + ck[0];

        return uvec3(localX, localZ, level);
    }
    
    float getTerrainHeightFactor(vec2 xz) {
        uvec3 coord = getTerrainChunkBufferCoord(xz);
        return getTerrainHeightFactorFromTexture(coord);
    }

    float getTerrainHeight(vec2 xz) {
        return getTerrainHeightFactor(xz) * ${TerrainPatchesShaderChunks_mjs_1.terrainMaxHeightParamName};
    }
    
    float getTerrainHeightInterpolated(vec2 xz) {

        // here we can calculate normal

        vec2 floorXZ = floor(xz);

        float x0z0 = getTerrainHeight(floorXZ);

        if ((floorXZ[0] + 1.0 >= TR_SIZE_F[0]) ||
            (floorXZ[1] + 1.0 >= TR_SIZE_F[1])) {
            return x0z0;
        }

        float x1z0 = getTerrainHeight(floorXZ + vec2(1.0, 0.0));
        float x0z1 = getTerrainHeight(floorXZ + vec2(0.0, 1.0));
        float x1z1 = getTerrainHeight(floorXZ + vec2(1.0, 1.0));

        float factorX = xz[0] - floorXZ[0];
        float factorZ = xz[1] - floorXZ[1];

        float interpolatedBottom = (x1z0 - x0z0) * factorX + x0z0;
        float interpolatedTop    = (x1z1 - x0z1) * factorX + x0z1;
        float finalHeight        = (interpolatedTop - interpolatedBottom) * factorZ + interpolatedBottom;

        return finalHeight;
    }
`;
    exports.bladeDecoderVS = `
    void decodeBlade() {

        float nnVi = ${exports.vindexAttrName} - LOD2_BLADE_VERTS_ALL_COUNT;

        if (nnVi < 0.0) {

            float lod2nVi  = mod(${exports.vindexAttrName}, LOD2_BLADE_VERTS_COUNT);
            int patchIndex = int(${exports.vindexAttrName} / LOD2_BLADE_VERTS_COUNT);

            dVertexIndex          = mod(lod2nVi, LOD2_BLADE_VERTS);
            dDivVertexIndex       = floor(dVertexIndex / 2.0);
            dPercentOfBladeHeight = dDivVertexIndex / LOD2_BLADE_SEGS;
            dSideOfBlade          = floor(lod2nVi / LOD2_BLADE_VERTS);

            dTerrainPatchOffsetXZ = ${exports.lod2OffsetXZParamName}[patchIndex];
        }
        else if (nnVi < LOD0_BLADE_VERTS_COUNT) {

            dVertexIndex          = mod(nnVi, LOD0_BLADE_VERTS);
            dDivVertexIndex       = floor(dVertexIndex / 2.0);
            dPercentOfBladeHeight = dDivVertexIndex / LOD0_BLADE_SEGS;
            dSideOfBlade          = floor(nnVi / LOD0_BLADE_VERTS);

            dTerrainPatchOffsetXZ = vec2(0.0);
        }
        else {

            float lod1nnVi = nnVi - LOD0_BLADE_VERTS_COUNT;
            float lod1nVi  = mod(lod1nnVi, LOD1_BLADE_VERTS_COUNT);
            int patchIndex = int(lod1nnVi / LOD1_BLADE_VERTS_COUNT);

            dVertexIndex          = mod(lod1nVi, LOD1_BLADE_VERTS);
            dDivVertexIndex       = floor(dVertexIndex / 2.0);
            dPercentOfBladeHeight = dDivVertexIndex / LOD1_BLADE_SEGS;
            dSideOfBlade          = floor(lod1nVi / LOD1_BLADE_VERTS);

            dTerrainPatchOffsetXZ = ${exports.lod1OffsetXZParamName}[patchIndex];
        }
        
        dEdgeOfBlade = mod(dVertexIndex, 2.0);
    }
`;
    exports.calculateLocalVS = `
    // Rotate by an angle
    vec2 rotate(float x, float y, float r) {
        float c = cos(r);
        float s = sin(r);
        return vec2(x * c - y * s, x * s + y * c);
    }

    // Rotate by a vector
    vec2 rotate(float x, float y, vec2 r) {
        return vec2(x * r.x - y * r.y, x * r.y + y * r.x);
    }

    float getGrassFactor(vec2 oxz) {
    
        vec2 xz = floor(oxz);

        if (xz[0] < 0.0 ||
            xz[1] < 0.0 ||
            xz[0] > TR_SIZE_BOUND_F[0] ||
            xz[1] > TR_SIZE_BOUND_F[1]) {
            return 0.0;
        }

        return 1.0;
    }
    
    varying vec2 vUvTerrainCoord;
    varying vec2 vUvCoord;
    varying vec3 vColor;

    void calculateBladeVertex() {
        
        vec4 offset = ${exports.offsetAttrName};
        vec4 shape  = ${exports.shapeAttrName};

        // Based on centre of view cone position, what grid tile should
        // this piece of grass be drawn at?
        vec2 quadCenterPos = ${exports.drawPosParamName}.xz;
        vec2 bladeOffset   = offset.xy;
        vec2 patchCenter   = floor((quadCenterPos - bladeOffset) / PATCH_SIZE) * PATCH_SIZE + HALF_PATCH_SIZE + dTerrainPatchOffsetXZ;

        float drawPosAltitude = ${exports.drawPosParamName}.y;

        // Find the blade mesh x,y position
        vec2 bladePos = patchCenter + bladeOffset;

        // Local quad center position in terrain
        // because the positions are shifted by half the size of the terrain
        // vec2 localQuadCenterPos = quadCenterPos + TR_SIZE_H_F;

        float distanceFromBladeToQuadCenter = distance(bladePos, quadCenterPos);
        float degenerateByDistanceFromBladeToQuadCenter = smoothstep(0.92, 1.0, CIRCLE_RADIUS / distanceFromBladeToQuadCenter);

        // Vertex position - start with 2D shape, no bend applied
        dVertexPosition = vec3(
            shape.x * (dEdgeOfBlade - 0.5) * (1.0 - pow(dPercentOfBladeHeight, 3.0)), // taper blade edges as approach tip
            0.0, // flat y, unbent
            shape.y * dPercentOfBladeHeight // height of vtx, unbent
        );

        // Apply blade's natural curve amount
        float curve = shape.w;

        // Then add animated curve amount by time using this blade's
        // unique properties to randomize its oscillation
        curve += shape.w + 0.125 * (sin(${exports.timeParamName} * 4.0 + offset.w * 0.2 * shape.y + offset.x + offset.y));

        // TODO
        float wind = 0.5;

        wind = (clamp(wind, 0.25, 1.0) - 0.25) * (1.0 / 0.75);
        wind = wind * wind * ${exports.windIntensityParamName};
        wind *= dPercentOfBladeHeight; // scale wind by height of blade
        wind = -wind;

        // Start computing a normal for this vertex
        dVertexNormal = vec3(0.0, dSideOfBlade * -2.0 + 1.0, 0.0);

        // put lean and curve together
        float rot = shape.z + curve * dPercentOfBladeHeight;
        vec2 rotv = vec2(cos(rot), sin(rot));

        dVertexPosition.yz = rotate(dVertexPosition.y, dVertexPosition.z, rotv);
        dVertexNormal.yz   = rotate(dVertexNormal.y, dVertexNormal.z, rotv);

        // rotation of this blade as a vector
        rotv = vec2(cos(offset.w), sin(offset.w));

        dVertexPosition.xy = rotate(dVertexPosition.x, dVertexPosition.y, rotv);
        dVertexNormal.xy   = rotate(dVertexNormal.x, dVertexNormal.y, rotv);

        rotv = vec2(cos(wind), sin(wind));

        // Wind blows in axis-aligned direction to make things simpler
        dVertexPosition.yz = rotate(dVertexPosition.y, dVertexPosition.z, rotv);
        dVertexNormal.yz   = rotate(dVertexNormal.y, dVertexNormal.z, rotv);

        // Local blade position in terrain
        // because the positions are shifted by half the size of the terrain
        dBladeTerrainXZPos = bladePos / ${exports.terrainScaleParamName}.xz + TR_SIZE_H_F;
        
        // Sample the heightfield data texture to get altitude for this blade position
        float bladeAltitude = getTerrainHeightInterpolated(dBladeTerrainXZPos) * ${exports.terrainScaleParamName}.y;
        float grassFactor   = getGrassFactor(dBladeTerrainXZPos);

        float distanceQuadCenterToDraw = distance(bladeAltitude, drawPosAltitude);
        float degenerateByDistanceFromBladeToDraw = smoothstep(0.81, 1.0, MAX_ZINIT_DISTANCE / distanceQuadCenterToDraw);

        // Determine if we want the grass to appear or not
        // Use the noise channel to perturb the blade altitude grass starts growing at.
        // float noisyAltitude = grassFactor * TRANSITION_NOISE - (TRANSITION_NOISE / 2.0);
        // float degenerateByNoise = (clamp(noisyAltitude, TRANSITION_LOW, TRANSITION_HIGH) - TRANSITION_LOW) * (1.0 / (TRANSITION_HIGH - TRANSITION_LOW));

        // Transition geometry toward degenerate as we approach terrain altitude
        dVertexPosition *= grassFactor * degenerateByDistanceFromBladeToDraw * degenerateByDistanceFromBladeToQuadCenter; // degenerateByNoise

        // Translate to world coordinates
        dVertexPosition.x += bladePos.x;
        dVertexPosition.y += bladePos.y;
        dVertexPosition.z += bladeAltitude;
        
        // Translate to xz plane
        dVertexPosition = dVertexPosition.xzy;
        dVertexNormal   = dVertexNormal.xzy;

        // grass texture coordinate for this vertex
        vUvCoord = vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);

        // terrain texture coordinate for this vertex
        vUvTerrainCoord = dBladeTerrainXZPos / TR_SIZE_F;

        // Vertex color must be brighter because it is multiplied with blade texture
        // Each blade is randomly colourized a bit by its position
        vColor = vec3(cos(${exports.offsetAttrName}.x), sin(${exports.offsetAttrName}.y), sin(${exports.offsetAttrName}.x));
    }
`;
    // https://community.khronos.org/t/discarding-polygons-in-vertex-shader/103839/9
    exports.startVS = `
    ${exports.startUv0VS}

    void main(void) {

        gl_Position = getPosition();
`;
    exports.diffusePS = `
    uniform sampler2D uDiffuseTex;
    uniform vec3 uDiffuseColor;
    uniform vec3 uDiffuseColorRandom;

    varying vec2 vUvTerrainCoord;
    varying vec2 vUvCoord;
    varying vec3 vColor;

    vec3 autoGammaCorrectInput(vec3 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    vec4 autoGammaCorrectInput(vec4 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    void getAlbedo() {

        vec3 tex = autoGammaCorrectInput(texture2D(uDiffuseTex, vUvCoord).rgb);

        dAlbedo = tex * uDiffuseColor + vColor * uDiffuseColorRandom;
    }
`;
    exports.chunks = Object.assign(Object.assign({}, TerrainPatchesShaderChunks_mjs_1.heightMapFactorsChunks), { heightMapSamplerBugFix: TerrainPatchesShaderChunks_mjs_1.heightMapSamplerBugFix,
        definesVS: exports.definesVS,
        definesBladeVS: exports.definesBladeVS,
        bladeDecoderVS: exports.bladeDecoderVS,
        calculateLocalVS: exports.calculateLocalVS,
        terrainHeightMapVS: exports.terrainHeightMapVS,
        // Vertex
        baseVS: exports.baseVS,
        baseClearSubVS: exports.baseClearSubVS,
        transformVS: exports.transformVS,
        transformDeclVS: exports.transformDeclVS,
        instancingVS: exports.instancingVS,
        transformInstancingVS: exports.transformInstancingVS,
        normalCoreVS: exports.normalCoreVS,
        normalVS: exports.normalVS,
        uv0VS: exports.uv0VS,
        startVS: exports.startVS,
        // Fragment
        diffusePS: exports.diffusePS });
    function getGrassShaderChunks({ width, depth, heightMapChunkSize, heightMapFormat, bladeMaxHeight, lod0BladeSegs, lod1BladeSegs, lod2BladeSegs, radius, transitionLow, transitionHigh, chunksStore = exports.chunks, engineVersion = 'v1', }) {
        const definesVS = chunksStore.definesVS
            .replace('%%HM_NUM_CHUNKS_X%%', String((width - 1) / (heightMapChunkSize - 1) | 0))
            .replace('%%HM_CHUNK_SIZE%%', String(heightMapChunkSize | 0))
            .replace('%%TR_SIZE_X%%', String(width))
            .replace('%%TR_SIZE_Z%%', String(depth))
            .replace('%%TR_SIZE_X_F%%', width.toFixed(1))
            .replace('%%TR_SIZE_Z_F%%', depth.toFixed(1))
            .replace('%%BLADE_HEIGHT_TALL%%', bladeMaxHeight.toFixed(1))
            .replace('%%PATCH_SIZE%%', radius.toFixed(1))
            .replace('%%TRANSITION_LOW%%', transitionLow.toString())
            .replace('%%TRANSITION_HIGH%%', transitionHigh.toString());
        const definesBladeVS = chunksStore.definesBladeVS
            .replace('%%LOD0_BLADE_SEGS%%', lod0BladeSegs.toFixed(1))
            .replace('%%LOD1_BLADE_SEGS%%', lod1BladeSegs.toFixed(1))
            .replace('%%LOD2_BLADE_SEGS%%', lod2BladeSegs.toFixed(1));
        const baseClearVS = chunksStore.baseVS + chunksStore.heightMapSamplerBugFix.replaceAll('%%HEIGHT_MAP_SAMPLER%%', (0, TerrainPatchesShaderChunks_mjs_1.getSamplerType)(heightMapFormat));
        const terrainHeightFactorVS = (0, TerrainPatchesShaderChunks_mjs_1.getTerrainHeightFactorVS)(heightMapFormat, chunksStore);
        const transformVS = terrainHeightFactorVS
            + chunksStore.terrainHeightMapVS
            + chunksStore.bladeDecoderVS
            + chunksStore.calculateLocalVS
            + chunksStore.transformVS;
        const diffusePS = '#define GAMMA_NORMALIZE\r\n'
            + chunksStore.diffusePS;
        if (engineVersion === 'v2') {
            const transform2VS = definesVS + definesBladeVS + baseClearVS + transformVS;
            return {
                // Vertex
                transformVS: transform2VS,
                transformCoreVS: "",
                transformInstancingVS: "",
                normalCoreVS: chunksStore.normalCoreVS,
                // Fragment
                diffusePS: diffusePS,
            };
        }
        const baseVS = definesVS +
            definesBladeVS +
            baseClearVS +
            chunksStore.baseClearSubVS;
        return {
            // Vertex
            baseVS,
            startVS: chunksStore.startVS,
            transformVS: transformVS,
            transformDeclVS: chunksStore.transformDeclVS,
            instancingVS: chunksStore.instancingVS,
            normalVS: chunksStore.normalVS,
            uv0VS: chunksStore.uv0VS,
            // Fragment
            diffusePS: diffusePS,
        };
    }
});
/*
 * A speed-improved perlin and simplex noise algorithms for 2D.
 *
 * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
 * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
 * Better rank ordering method by Stefan Gustavson in 2012.
 * Converted to Javascript by Joseph Gentle.
 *
 * Version 2012-03-09
 *
 * This code was placed in the public domain by its original author,
 * Stefan Gustavson. You may use it as you see fit, but
 * attribution is appreciated.
 *
 * --------------------
 * TypeScriptified 2016
 */
define("src/GrassFieldHelpers/simplex", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.default = simplex;
    class Grad {
        constructor(x, y, z) {
            this.x = x;
            this.y = y;
            this.z = z;
        }
        dot2(x, y) {
            return this.x * x + this.y * y;
        }
        dot3(x, y, z) {
            return this.x * x + this.y * y + this.z * z;
        }
    }
    const F2 = 0.5 * (Math.sqrt(3) - 1);
    const G2 = (3 - Math.sqrt(3)) / 6;
    const perm = new Array(512);
    const gradP = new Array(512);
    const grad3 = [
        new Grad(1, 1, 0), new Grad(-1, 1, 0), new Grad(1, -1, 0), new Grad(-1, -1, 0),
        new Grad(1, 0, 1), new Grad(-1, 0, 1), new Grad(1, 0, -1), new Grad(-1, 0, -1),
        new Grad(0, 1, 1), new Grad(0, -1, 1), new Grad(0, 1, -1), new Grad(0, -1, -1)
    ];
    const p = [
        151, 160, 137, 91, 90, 15,
        131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,
        190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,
        88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,
        77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,
        102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,
        135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,
        5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,
        223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,
        129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,
        251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,
        49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,
        138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180
    ];
    // This isn't a very good seeding function, but it works ok. It supports 2^16
    // different seed values. Write something better if you need more seeds.
    function seed(seed) {
        if (seed > 0 && seed < 1) {
            // Scale the seed out
            seed *= 65536;
        }
        seed = Math.floor(seed);
        if (seed < 256) {
            seed |= seed << 8;
        }
        for (let i = 0; i < 256; i++) {
            let v;
            if (i & 1) {
                v = p[i] ^ (seed & 255);
            }
            else {
                v = p[i] ^ ((seed >> 8) & 255);
            }
            perm[i] = perm[i + 256] = v;
            gradP[i] = gradP[i + 256] = grad3[v % 12];
        }
    }
    seed(0);
    // 2D simplex noise
    function simplex(xin, yin) {
        let n0, n1, n2; // Noise contributions from the three corners
        // Skew the input space to determine which simplex cell we're in
        const s = (xin + yin) * F2; // Hairy factor for 2D
        let i = Math.floor(xin + s);
        let j = Math.floor(yin + s);
        const t = (i + j) * G2;
        const x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.
        const y0 = yin - j + t;
        // For the 2D case, the simplex shape is an equilateral triangle.
        // Determine which simplex we are in.
        let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords
        if (x0 > y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)
            i1 = 1;
            j1 = 0;
        }
        else { // upper triangle, YX order: (0,0)->(0,1)->(1,1)
            i1 = 0;
            j1 = 1;
        }
        // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and
        // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where
        // c = (3-sqrt(3))/6
        const x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords
        const y1 = y0 - j1 + G2;
        const x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords
        const y2 = y0 - 1 + 2 * G2;
        // Work out the hashed gradient indices of the three simplex corners
        i &= 255;
        j &= 255;
        const gi0 = gradP[i + perm[j]];
        const gi1 = gradP[i + i1 + perm[j + j1]];
        const gi2 = gradP[i + 1 + perm[j + 1]];
        // Calculate the contribution from the three corners
        let t0 = 0.5 - x0 * x0 - y0 * y0;
        if (t0 < 0) {
            n0 = 0;
        }
        else {
            t0 *= t0;
            n0 = t0 * t0 * gi0.dot2(x0, y0); // (x,y) of grad3 used for 2D gradient
        }
        let t1 = 0.5 - x1 * x1 - y1 * y1;
        if (t1 < 0) {
            n1 = 0;
        }
        else {
            t1 *= t1;
            n1 = t1 * t1 * gi1.dot2(x1, y1);
        }
        let t2 = 0.5 - x2 * x2 - y2 * y2;
        if (t2 < 0) {
            n2 = 0;
        }
        else {
            t2 *= t2;
            n2 = t2 * t2 * gi2.dot2(x2, y2);
        }
        // Add contributions from each corner to get the final noise value.
        // The result is scaled to return values in the interval [-1,1].
        return 70 * (n0 + n1 + n2);
    }
});
define("src/Scripts/FlyCamera", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.flyCameraScriptName = exports.FlyCamera = void 0;
    class FlyCamera extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this.mobileControl = false;
        }
        initialize() {
            // Camera euler angle rotation around x and y axes
            const eulers = this.entity.getLocalEulerAngles();
            this.ex = (eulers.z - eulers.x);
            this.ey = (eulers.z - eulers.y);
            this.translateLoc = pc.Vec3.ZERO.clone();
            this.moved = false;
            this.rightDown = false;
            this.middleDown = false;
            // Disabling the context menu stops the browser displaying a menu when
            // you right-click the page
            if (this.app.mouse) {
                this.app.mouse.disableContextMenu();
                this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);
                this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);
                this.app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);
            }
        }
        append(x, y) {
            this.ex += x;
            this.ey += y;
            this.ex = pc.math.clamp(this.ex, -90, 90);
        }
        translate(x, y, z) {
            this.translateLoc.x += x;
            this.translateLoc.y += y;
            this.translateLoc.z += z;
        }
        update(dt) {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
            const app = this.app;
            let speed = this.speed;
            if ((_a = app.keyboard) === null || _a === void 0 ? void 0 : _a.isPressed(pc.KEY_SPACE)) {
                speed = this.slowSpeed;
            }
            if ((_b = app.keyboard) === null || _b === void 0 ? void 0 : _b.isPressed(pc.KEY_SHIFT)) {
                speed = this.fastSpeed;
            }
            // Joypad control
            const joystickMover = touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.sticks['joystick0'];
            const joystickRoter = touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.sticks['joystick1'];
            if (this.mobileControls && (touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.buttons.wasPressed('button2'))) {
                this.mobileControl = !this.mobileControl;
                this.mobileControls.enabled = this.mobileControl;
            }
            if (joystickRoter) {
                this.append(joystickRoter.y, -joystickRoter.x);
            }
            if (joystickMover) {
                this.translate(speed * joystickMover.x * dt, 0, -speed * joystickMover.y * dt);
            }
            // Update the camera's position
            if (((_c = app.keyboard) === null || _c === void 0 ? void 0 : _c.isPressed(pc.KEY_UP)) || ((_d = app.keyboard) === null || _d === void 0 ? void 0 : _d.isPressed(pc.KEY_W))) {
                this.translate(0, 0, -speed * dt);
            }
            else if (((_e = app.keyboard) === null || _e === void 0 ? void 0 : _e.isPressed(pc.KEY_DOWN)) || ((_f = app.keyboard) === null || _f === void 0 ? void 0 : _f.isPressed(pc.KEY_S))) {
                this.translate(0, 0, speed * dt);
            }
            if (((_g = app.keyboard) === null || _g === void 0 ? void 0 : _g.isPressed(pc.KEY_LEFT)) || ((_h = app.keyboard) === null || _h === void 0 ? void 0 : _h.isPressed(pc.KEY_A))) {
                this.translate(-speed * dt, 0, 0);
            }
            else if (((_j = app.keyboard) === null || _j === void 0 ? void 0 : _j.isPressed(pc.KEY_RIGHT)) || ((_k = app.keyboard) === null || _k === void 0 ? void 0 : _k.isPressed(pc.KEY_D))) {
                this.translate(speed * dt, 0, 0);
            }
            // Update the camera's TRS
            this.entity.setLocalEulerAngles(this.ex, this.ey, 0);
            this.entity.translateLocal(this.translateLoc);
            this.translateLoc.set(0, 0, 0);
            // Update frustum by actual matrix
            this.app.renderer.updateCameraFrustum((_l = this.entity.camera) === null || _l === void 0 ? void 0 : _l.camera);
        }
        onMouseMove(event) {
            if (!this.mode && !pc.Mouse.isPointerLocked()) {
                return;
            }
            if (!this.rightDown &&
                !this.middleDown)
                return;
            // Update the current Euler angles, clamp the pitch.
            if (!this.moved) {
                // first move event can be very large
                this.moved = true;
                return;
            }
            if (this.rightDown) {
                this.append(-event.dy / this.sensitivity, -event.dx / this.sensitivity);
            }
            if (this.middleDown) {
                let speed = this.speed;
                if (this.app.keyboard.isPressed(pc.KEY_SHIFT)) {
                    speed = this.fastSpeed;
                }
                this.translate(-(event.dx / 5) * speed, (event.dy / 5) * speed, 0);
            }
        }
        onMouseDown(event) {
            // When the mouse button is clicked try and capture the pointer
            if (!this.mode && !pc.Mouse.isPointerLocked()) {
                this.app.mouse.enablePointerLock();
            }
            if (event.button === pc.MOUSEBUTTON_RIGHT) {
                this.rightDown = true;
            }
            if (event.button === pc.MOUSEBUTTON_MIDDLE) {
                this.middleDown = true;
            }
        }
        onMouseUp(event) {
            if (event.button === pc.MOUSEBUTTON_RIGHT) {
                this.rightDown = false;
            }
            if (event.button === pc.MOUSEBUTTON_MIDDLE) {
                this.middleDown = false;
            }
        }
    }
    exports.FlyCamera = FlyCamera;
    exports.default = FlyCamera;
    exports.flyCameraScriptName = 'flyCamera';
    pc.registerScript(FlyCamera, exports.flyCameraScriptName);
    FlyCamera.attributes.add('mobileControls', {
        type: 'entity',
    });
    FlyCamera.attributes.add('speed', {
        type: 'number',
        default: 10
    });
    FlyCamera.attributes.add('slowSpeed', {
        type: 'number',
        default: 1
    });
    FlyCamera.attributes.add('fastSpeed', {
        type: 'number',
        default: 20
    });
    FlyCamera.attributes.add('sensitivity', {
        type: 'number',
        min: 1,
        default: 5
    });
    FlyCamera.attributes.add('mode', {
        type: 'number',
        default: 0,
        enum: [{
                "Lock": 0
            }, {
                "Drag": 1
            }]
    });
});
define("src/Scripts/FpsCounter", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.fpsCounterScriptName = void 0;
    class FpsCounter extends pc.ScriptType {
        initialize() {
            const constr = window.FPSMeter;
            if (constr) {
                this.fps = new constr({
                    heat: true,
                    graph: true
                });
            }
        }
        update(dt) {
            var _a;
            (_a = this.fps) === null || _a === void 0 ? void 0 : _a.tick();
        }
    }
    exports.default = FpsCounter;
    exports.fpsCounterScriptName = 'FpsCounter';
    pc.registerScript(FpsCounter, exports.fpsCounterScriptName);
});
define("src/Shared/Debug", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.drawDirectionVector = drawDirectionVector;
    exports.drawPoint = drawPoint;
    exports.drawBox = drawBox;
    const tmpVec = new pc.Vec3();
    function drawDirectionVector(position, dir, color = pc.Color.RED) {
        // Draw the vector
        const start = position;
        const end = tmpVec.add2(position, dir);
        pc.app.drawLine(start, end, color, false);
    }
    function drawPoint({ center, radius = 0.1, numSegments = 4, color = pc.Color.RED, layer, depthTest = false }) {
        const block = 6 * 3;
        const points = new Array(numSegments * block);
        const step = 2 * Math.PI / numSegments;
        let angle = 0;
        for (let i = 0; i < numSegments; i++) {
            const sin0 = Math.sin(angle);
            const cos0 = Math.cos(angle);
            angle += step;
            const sin1 = Math.sin(angle);
            const cos1 = Math.cos(angle);
            const j = i * block;
            points[j + 0] = center.x + radius * sin0;
            points[j + 1] = center.y;
            points[j + 2] = center.z + radius * cos0;
            points[j + 3] = center.x + radius * sin1;
            points[j + 4] = center.y;
            points[j + 5] = center.z + radius * cos1;
            points[j + 6] = center.x;
            points[j + 7] = center.y + radius * sin0;
            points[j + 8] = center.z + radius * cos0;
            points[j + 9] = center.x;
            points[j + 10] = center.y + radius * sin1;
            points[j + 11] = center.z + radius * cos1;
            points[j + 12] = center.x + radius * cos0;
            points[j + 13] = center.y + radius * sin0;
            points[j + 14] = center.z;
            points[j + 15] = center.x + radius * cos1;
            points[j + 16] = center.y + radius * sin1;
            points[j + 17] = center.z;
        }
        pc.app.drawLineArrays(points, color, depthTest, layer);
    }
    function drawBox({ min, max, color = pc.Color.RED, layer, depthTest = false }) {
        var _a;
        (_a = pc.app) === null || _a === void 0 ? void 0 : _a.drawWireAlignedBox(min, max, color, depthTest, layer);
    }
});
define("src/Shared/Random", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class Random {
        constructor(seed) {
            this.seed = seed;
            this._tmp = seed;
        }
        reset() {
            this._tmp = this.seed;
        }
        next() {
            this._tmp = (this._tmp * 48271) % 2147483647;
            this._tick = this._tmp / 2147483647;
            return this._tick;
        }
        nextFloat(min, max) {
            return this.next() * (max - min) + min;
        }
        nextInt(min, max) {
            return this.nextFloat(min, max) | 0;
        }
        random() {
            return this.next();
        }
        nrand() {
            return this.nextFloat(-1, 1);
        }
    }
    exports.default = Random;
});
define("src/Shared/Store2D", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ObjStore2D = exports.AbsStore2D = void 0;
    class AbsStore2D {
        constructor() {
            this._cols = 0;
            this._rows = 0;
        }
        init(cols, rows) {
            this._cols = cols;
            this._rows = rows;
            const size = cols * rows;
            this._p = this._initArrayType(size);
        }
        initByVal(cols, rows, val) {
            this.init(cols, rows);
            const size = cols * rows;
            const valIsFunc = typeof val === 'function';
            for (let i = 0; i < size; i++) {
                this._p[i] = valIsFunc ? val() : val;
            }
        }
        initByStore(cols, rows, val) {
            this._cols = cols;
            this._rows = rows;
            this._p = val;
        }
        addr() {
            return this._p;
        }
        size() {
            return this._rows * this._cols;
        }
        get(col, row) {
            return this._p[row * this._cols + col];
        }
        set(col, row, value) {
            this._p[row * this._cols + col] = value;
        }
        getByIndex(index) {
            return this._p[index];
        }
        setByIndex(index, value) {
            this._p[index] = value;
        }
    }
    exports.AbsStore2D = AbsStore2D;
    class ObjStore2D extends AbsStore2D {
        _initArrayType(size) {
            return new Array(size);
        }
    }
    exports.ObjStore2D = ObjStore2D;
});
define("src/Shared/Vector3Math", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.set = set;
    exports.distance = distance;
    exports.distanceV3XYZ = distanceV3XYZ;
    exports.distanceX1Y1Z1X2Y2Z2 = distanceX1Y1Z1X2Y2Z2;
    exports.normalize = normalize;
    exports.normalizeRef = normalizeRef;
    exports.add = add;
    exports.addRef = addRef;
    exports.subtract = subtract;
    exports.cross = cross;
    /**
     * Sets the specified 3-dimensional vector to the supplied numerical values.
     */
    function set(to, x, y, z) {
        to.x = x;
        to.y = y;
        to.z = z;
        return to;
    }
    /**
     * Returns the Euclidean distance between the two given points.
     */
    function distance(value1, value2) {
        const dx = value1.x - value2.x;
        const dy = value1.y - value2.y;
        const dz = value1.z - value2.z;
        const ls = dx * dx + dy * dy + dz * dz;
        return Math.sqrt(ls);
    }
    /**
     * Returns the Euclidean distance between the two given points.
     */
    function distanceV3XYZ(value1, x, y, z) {
        const dx = value1.x - x;
        const dy = value1.y - y;
        const dz = value1.z - z;
        const ls = dx * dx + dy * dy + dz * dz;
        return Math.sqrt(ls);
    }
    /**
     * Returns the Euclidean distance between the two given points.
     */
    function distanceX1Y1Z1X2Y2Z2(x1, y1, z1, x2, y2, z2) {
        const dx = x1 - x2;
        const dy = y1 - y2;
        const dz = z1 - z2;
        const ls = dx * dx + dy * dy + dz * dz;
        return Math.sqrt(ls);
    }
    /**
     * Returns a vector with the same direction as the given vector, but with a length of 1.
     */
    function normalize(value, out) {
        const ls = value.x * value.x + value.y * value.y + value.z * value.z;
        const length = Math.sqrt(ls);
        return set(out, value.x / length, value.y / length, value.z / length);
    }
    /**
     * Update the vector with the same direction as the given vector, but with a length of 1.
     */
    function normalizeRef(refValue) {
        const ls = refValue.x * refValue.x + refValue.y * refValue.y + refValue.z * refValue.z;
        const length = Math.sqrt(ls);
        refValue.x /= length;
        refValue.y /= length;
        refValue.z /= length;
        return refValue;
    }
    /**
     * Adds two vectors.
     */
    function add(left, right, out) {
        return set(out, left.x + right.x, left.y + right.y, left.z + right.z);
    }
    /**
     * Adds two vectors.
     */
    function addRef(refLeft, right) {
        return add(refLeft, right, refLeft);
    }
    /**
     * Subtracts the second vector from the first.
     */
    function subtract(left, right, out) {
        return set(out, left.x - right.x, left.y - right.y, left.z - right.z);
    }
    /**
     * Computes the cross product of two vectors.
     */
    function cross(vector1, vector2, out) {
        return set(out, vector1.y * vector2.z - vector1.z * vector2.y, vector1.z * vector2.x - vector1.x * vector2.z, vector1.x * vector2.y - vector1.y * vector2.x);
    }
    exports.default = {
        set,
        normalize,
        normalizeRef,
        add,
        subtract,
        addRef,
        distance,
        distanceV3XYZ,
        distanceX1Y1Z1X2Y2Z2,
        cross
    };
});
define("src/Shared/Vector2Math", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.distanceX1Z1X2Z2 = distanceX1Z1X2Z2;
    /**
     * Returns the Euclidean distance between the two given points.
     */
    function distanceX1Z1X2Z2(x1, z1, x2, z2) {
        const dx = x1 - x2;
        const dz = z1 - z2;
        const ls = dx * dx + dz * dz;
        return Math.sqrt(ls);
    }
    exports.default = {
        distanceX1Z1X2Z2,
    };
});
define("src/TerrainSystem/LodManager", ["require", "exports", "src/Shared/Store2D", "src/Shared/Utils", "src/Shared/Vector3Math", "src/Shared/Vector2Math"], function (require, exports, Store2D_mjs_1, Utils_mjs_2, Vector3Math_mjs_1, Vector2Math_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.LodManager = exports.defaultPatchLod = void 0;
    exports.getLodId = getLodId;
    Vector3Math_mjs_1 = __importDefault(Vector3Math_mjs_1);
    Vector2Math_mjs_1 = __importDefault(Vector2Math_mjs_1);
    function getLodId(c, l, r, t, b) {
        const lodCore = c + 1;
        const lodBinaryValue = (l << 3) | (r << 2) | (t << 1) | b;
        return lodCore * 0x1111 - lodBinaryValue;
    }
    exports.defaultPatchLod = {
        distance: 0,
        core: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
    };
    const getZeroPatchLod = () => ({
        distance: 0,
        core: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
    });
    class LodManager {
        get zFar() { return this._zFar; }
        get maxLOD() { return this._maxLOD; }
        constructor(zFar, patchSize, numPatchesX, numPatchesZ) {
            this.setParams(zFar, patchSize, numPatchesX, numPatchesZ);
        }
        setZFar(zFar) {
            this._zFar = zFar;
            this._calcLodRegions();
        }
        setParams(zFar, patchSize, numPatchesX, numPatchesZ) {
            this._patchSize = patchSize;
            this._numPatchesX = numPatchesX;
            this._numPatchesZ = numPatchesZ;
            this._calcMaxLOD();
            this._map = new Store2D_mjs_1.ObjStore2D();
            this._map.initByVal(numPatchesX, numPatchesZ, getZeroPatchLod);
            this._regions = new Array(this._maxLOD + 1);
            this.setZFar(zFar);
        }
        _calcMaxLOD() {
            const numSegments = this._patchSize - 1;
            const numSegmentsLog2 = Math.log2(numSegments);
            const numSegmentsLog2Ceil = Math.ceil(numSegmentsLog2);
            const numSegmentsLog2Floor = Math.floor(numSegmentsLog2);
            if (numSegmentsLog2Ceil !== numSegmentsLog2Floor) {
                throw new Error("The number of vertices in the patch minus one must be a power of two\n");
            }
            this._maxLOD = numSegmentsLog2Floor - 1;
        }
        _calcLodRegions() {
            // TODO: We can use the ring system to determine the LOD.
            // TODO: Based on the heights we can calculate the optimal lods
            let sum = 0;
            for (let i = 0; i <= this._maxLOD; i++) {
                sum += i + 1;
            }
            let x = this._zFar / sum;
            let temp = 0;
            for (let i = 0; i <= this._maxLOD; i++) {
                const curRange = (x * (i + 1)) | 0;
                this._regions[i] = temp + curRange;
                temp += curRange;
            }
        }
        printLodMap() {
            let str = '';
            const maxLodMaxZ = this._numPatchesZ - 1;
            const maxLodMaxX = this._numPatchesX;
            let maxCore = 0;
            for (let lodMapZ = maxLodMaxZ; lodMapZ >= 0; lodMapZ--) {
                for (let lodMapX = 0; lodMapX < maxLodMaxX; lodMapX++) {
                    const value = this._map.get(lodMapX, lodMapZ).core;
                    if (maxCore < value) {
                        maxCore = value;
                    }
                }
            }
            const lodMaxNumberCount = maxLodMaxZ.toString().length;
            const coreMaxNumberCount = maxCore.toString().length;
            for (let lodMapZ = maxLodMaxZ; lodMapZ >= 0; lodMapZ--) {
                str += (0, Utils_mjs_2.getText)(lodMapZ, lodMaxNumberCount, ' ') + ': ';
                for (let lodMapX = 0; lodMapX < maxLodMaxX; lodMapX++) {
                    const value = this._map.get(lodMapX, lodMapZ).core;
                    str += (0, Utils_mjs_2.getText)(value, coreMaxNumberCount, ' ') + ' ';
                }
                str += '\n';
            }
            console.log(str);
        }
        distanceToLod(distance) {
            let lod = this._maxLOD;
            for (let i = 0; i < this._maxLOD; i++) {
                if (distance < this._regions[i]) {
                    lod = i;
                    break;
                }
            }
            return lod;
        }
        getPatchLod(patchX, patchZ) {
            return this._map.get(patchX, patchZ);
        }
        getPatchLodByIndex(index) {
            return this._map.getByIndex(index);
        }
        update(cameraPos, heightMap, useYPos = true, center = true) {
            const a = this.updateLodMapPass1(cameraPos, heightMap, useYPos, center);
            const b = this.updateLodMapPass2();
            return a || b;
        }
        updateLodMapPass1(cameraPos, heightMap, useYPos, center) {
            let hasChange = false;
            let distanceToCamera;
            const centerStep = this._patchSize / 2 | 0;
            const halfWidth = heightMap.width / 2;
            const halfDepth = heightMap.depth / 2;
            let cameraPosTerrainAltitude = 0;
            if (useYPos) {
                const normalizeCameraX = Math.min(Math.max(center ? cameraPos.x + halfWidth : cameraPos.x, 0), heightMap.width - 1);
                const normalizeCameraZ = Math.min(Math.max(center ? cameraPos.z + halfDepth : cameraPos.z, 0), heightMap.depth - 1);
                cameraPosTerrainAltitude = heightMap.get(normalizeCameraX | 0, normalizeCameraZ | 0);
            }
            for (let lodMapZ = 0; lodMapZ < this._numPatchesZ; lodMapZ++) {
                for (let lodMapX = 0; lodMapX < this._numPatchesX; lodMapX++) {
                    const x = lodMapX * (this._patchSize - 1) + centerStep;
                    const z = lodMapZ * (this._patchSize - 1) + centerStep;
                    const patchCenterX = center ? -halfWidth + x : x;
                    const patchCenterZ = center ? -halfDepth + z : z;
                    if (useYPos) {
                        distanceToCamera = Vector3Math_mjs_1.default.distanceV3XYZ(cameraPos, patchCenterX, cameraPosTerrainAltitude, patchCenterZ);
                    }
                    else {
                        distanceToCamera = Vector2Math_mjs_1.default.distanceX1Z1X2Z2(cameraPos.x, cameraPos.z, patchCenterX, patchCenterZ);
                    }
                    const coreLod = this.distanceToLod(distanceToCamera);
                    const pPatchLOD = this._map.get(lodMapX, lodMapZ);
                    pPatchLOD.distance = distanceToCamera;
                    if (pPatchLOD.core !== coreLod) {
                        pPatchLOD.core = coreLod;
                        hasChange = true;
                    }
                }
            }
            return hasChange;
        }
        updateLodMapPass2() {
            let hasChange = false;
            for (let lodMapZ = 0; lodMapZ < this._numPatchesZ; lodMapZ++) {
                for (let lodMapX = 0; lodMapX < this._numPatchesX; lodMapX++) {
                    const item = this._map.get(lodMapX, lodMapZ);
                    const coreLod = item.core;
                    let indexLeft = lodMapX;
                    let indexRight = lodMapX;
                    let indexTop = lodMapZ;
                    let indexBottom = lodMapZ;
                    if (lodMapX > 0) {
                        indexLeft--;
                        const prev = item.left;
                        const next = this._map.get(indexLeft, lodMapZ).core > coreLod ? 1 : 0;
                        if (prev !== next) {
                            item.left = next;
                            hasChange = true;
                        }
                    }
                    if (lodMapX < this._numPatchesX - 1) {
                        indexRight++;
                        const prev = item.right;
                        const next = this._map.get(indexRight, lodMapZ).core > coreLod ? 1 : 0;
                        if (prev !== next) {
                            item.right = next;
                            hasChange = true;
                        }
                    }
                    if (lodMapZ > 0) {
                        indexBottom--;
                        const prev = item.bottom;
                        const next = this._map.get(lodMapX, indexBottom).core > coreLod ? 1 : 0;
                        if (prev !== next) {
                            item.bottom = next;
                            hasChange = true;
                        }
                    }
                    if (lodMapZ < this._numPatchesZ - 1) {
                        indexTop++;
                        const prev = item.top;
                        const next = this._map.get(lodMapX, indexTop).core > coreLod ? 1 : 0;
                        if (prev !== next) {
                            item.top = next;
                            hasChange = true;
                        }
                    }
                }
            }
            return hasChange;
        }
    }
    exports.LodManager = LodManager;
    exports.default = LodManager;
});
define("src/TerrainSystem/CoordsBuffer", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CoordsBuffer = exports.coordsVertexSize = void 0;
    exports.coordsVertexSize = 2;
    class CoordsBuffer {
        get patchVertexBufferLength() { return this._length; }
        get patchVertexBufferData() { return this._data; }
        get patchVertexBufferTyped() { return this._dataTyped; }
        get width() { return this._width; }
        get depth() { return this._depth; }
        get patchSize() { return this._patchSize; }
        constructor(heightMap, patchSize) {
            this.heightMap = heightMap;
            // We can use uint8 for patches smaller than 255, but we only use 2 bytes,
            // for optimal performance need 4 bytes for the buffer.
            this._patchSize = patchSize;
            this._width = heightMap.width;
            this._depth = heightMap.depth;
            this._length = this._patchSize * this._patchSize;
            const coordsArrLength = this._length * exports.coordsVertexSize;
            const coordsByteLength = coordsArrLength * Uint16Array.BYTES_PER_ELEMENT;
            this._data = new ArrayBuffer(coordsByteLength);
            this._dataTyped = new Uint16Array(this._data, 0, coordsArrLength);
        }
        init() {
            let index = 0;
            for (let z = 0; z < this._patchSize; z++) {
                for (let x = 0; x < this._patchSize; x++) {
                    this._dataTyped[index++] = x;
                    this._dataTyped[index++] = z;
                }
            }
        }
        getPosition(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.y = this.heightMap.get(x, z);
            buf.z = z;
            return true;
        }
        getPositionWithHeightByFactor(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.y = this.heightMap.getFactor(x, z);
            buf.z = z;
            return true;
        }
        getCoords(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.z = z;
            return true;
        }
    }
    exports.CoordsBuffer = CoordsBuffer;
    exports.default = CoordsBuffer;
});
define("src/TerrainSystem/LodInfo", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.LodInfo = exports.BOTTOM = exports.TOP = exports.RIGHT = exports.LEFT = void 0;
    exports.initInfo = initInfo;
    exports.LEFT = 2;
    exports.RIGHT = 2;
    exports.TOP = 2;
    exports.BOTTOM = 2;
    function initInfo() {
        const arr = [];
        for (let l = 0; l < exports.LEFT; l++) {
            arr[l] = new Array(exports.RIGHT);
            for (let r = 0; r < exports.RIGHT; r++) {
                arr[l][r] = new Array(exports.TOP);
                for (let t = 0; t < exports.TOP; t++) {
                    arr[l][r][t] = new Array(exports.BOTTOM);
                    for (let b = 0; b < exports.BOTTOM; b++) {
                        arr[l][r][t][b] = {
                            start: 0,
                            count: 0
                        };
                    }
                }
            }
        }
        return arr;
    }
    class LodInfo {
        constructor() {
            this.info = initInfo();
        }
        clear() {
            for (let l = 0; l < exports.LEFT; l++) {
                for (let r = 0; r < exports.RIGHT; r++) {
                    for (let t = 0; t < exports.TOP; t++) {
                        for (let b = 0; b < exports.BOTTOM; b++) {
                            const single = this.info[l][r][t][b];
                            single.start = 0;
                            single.count = 0;
                        }
                    }
                }
            }
        }
    }
    exports.LodInfo = LodInfo;
    exports.default = LodInfo;
});
define("src/TerrainSystem/GridBuilder", ["require", "exports", "src/TerrainSystem/LodInfo", "src/TerrainSystem/LodManager"], function (require, exports, LodInfo_mjs_1, LodManager_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GridBuilder = void 0;
    LodManager_mjs_1 = __importDefault(LodManager_mjs_1);
    class GridBuilder {
        get zFar() { return this._lodManager.zFar; }
        get width() { return this._grid.width; }
        get depth() { return this._grid.depth; }
        get patchSize() { return this._grid.patchSize; }
        get numPatchesX() { return this._grid.numPatchesX; }
        get numPatchesZ() { return this._grid.numPatchesZ; }
        get maxLOD() { return this.lodManager.maxLOD; }
        get patchIndices() { return this._indices; }
        get lodManager() { return this._lodManager; }
        get lodInfo() { return this._lodInfo; }
        constructor(grid, zFar) {
            this._grid = grid;
            const width = grid.width;
            const depth = grid.depth;
            const patchSize = grid.patchSize;
            const numPatchesX = grid.numPatchesX;
            const numPatchesZ = grid.numPatchesZ;
            if (width >= 0xffff) {
                console.error("Max width = %d\n", 0xffff - 1);
                throw new Error();
            }
            if (depth >= 0xffff) {
                console.error("Max depth = %d\n", 0xffff - 1);
                throw new Error();
            }
            if ((width - 1) % (patchSize - 1) !== 0) {
                const recommendedWidth = ((width - 1 + patchSize - 1) / (patchSize - 1)) * (patchSize - 1) + 1;
                console.error("Width minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", width, patchSize);
                console.error("Try using Width = %d\n", recommendedWidth);
                throw new Error();
            }
            if ((depth - 1) % (patchSize - 1) !== 0) {
                const recommendedDepth = ((depth - 1 + patchSize - 1) / (patchSize - 1)) * (patchSize - 1) + 1;
                console.error("Depth minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", depth, patchSize);
                console.error("Try using Width = %d\n", recommendedDepth);
                throw new Error();
            }
            if (patchSize < 3) {
                console.error("The minimum patch size is 3 (%d)\n", patchSize);
                throw new Error();
            }
            if (patchSize % 2 === 0) {
                console.error("Patch size must be an odd number (%d)\n", patchSize);
                throw new Error();
            }
            this._buildLodsAndIndices(zFar, patchSize, numPatchesX, numPatchesZ);
        }
        setZFar(zFar) {
            this._lodManager.setZFar(zFar);
        }
        _buildLodsAndIndices(zFar, patchSize, numPatchesX, numPatchesZ) {
            this._lodManager = new LodManager_mjs_1.default(zFar, patchSize, numPatchesX, numPatchesZ);
            this._lodInfo = new Array(this._lodManager.maxLOD + 1);
            for (let i = 0; i < this._lodInfo.length; i++) {
                this._lodInfo[i] = new LodInfo_mjs_1.LodInfo();
            }
            let numIndices = this._calcNumIndices();
            this._indices = new Uint32Array(numIndices);
            numIndices = this._initIndices(this._indices);
            //console.log("Final number of indices %d\n", numIndices);
        }
        _calcNumIndices() {
            let numQuads = (this.patchSize - 1) * (this.patchSize - 1);
            let numIndices = 0;
            const maxPermutationsPerLevel = 16; // true/false for each of the four sides
            const indicesPerQuad = 6; // two triangles
            for (let lod = 0; lod <= this.maxLOD; lod++) {
                //console.log("LOD %d: num quads %d\n", lod, numQuads);
                numIndices += numQuads * indicesPerQuad * maxPermutationsPerLevel;
                numQuads /= 4;
            }
            //console.log("Initial number of indices %d\n", numIndices);
            return numIndices;
        }
        _initIndices(indices) {
            let index = 0;
            for (let lod = 0; lod <= this.maxLOD; lod++) {
                //console.log("*** Init indices lod %d ***\n", lod);
                index = this._initIndicesLOD(index, indices, lod);
            }
            return index;
        }
        _initIndicesLOD(index, indices, lod) {
            let totalIndicesForLOD = 0;
            for (let l = 0; l < LodInfo_mjs_1.LEFT; l++) {
                for (let r = 0; r < LodInfo_mjs_1.RIGHT; r++) {
                    for (let t = 0; t < LodInfo_mjs_1.TOP; t++) {
                        for (let b = 0; b < LodInfo_mjs_1.BOTTOM; b++) {
                            const info = this._lodInfo[lod].info[l][r][t][b];
                            info.start = index;
                            index = this._initIndicesLODSingle(index, indices, lod, lod + l, lod + r, lod + t, lod + b);
                            info.count = index - info.start;
                            totalIndicesForLOD += info.count;
                        }
                    }
                }
            }
            //console.log("Total indices for LOD: %d\n", totalIndicesForLOD);
            return index;
        }
        _initIndicesLODSingle(index, indices, lodCore, lodLeft, lodRight, lodTop, lodBottom) {
            const width = this.patchSize;
            const fanStep = Math.pow(2, lodCore + 1); // lod = 0 --> 2, lod = 1 --> 4, lod = 2 --> 8, etc
            const endPos = this.patchSize - 1 - fanStep; // patch size 5, fan step 2 --> EndPos = 2; patch size 9, fan step 2 --> EndPos = 6
            for (let z = 0; z <= endPos; z += fanStep) {
                for (let x = 0; x <= endPos; x += fanStep) {
                    const lLeft = x == 0 ? lodLeft : lodCore;
                    const lRight = x == endPos ? lodRight : lodCore;
                    const lBottom = z == 0 ? lodBottom : lodCore;
                    const lTop = z == endPos ? lodTop : lodCore;
                    index = this._createTriangleFan(index, indices, lodCore, lLeft, lRight, lTop, lBottom, x, z, width);
                }
            }
            return index;
        }
        _createTriangleFan(index, indices, lodCore, lodLeft, lodRight, lodTop, lodBottom, x, z, width) {
            const stepLeft = Math.pow(2, lodLeft); // because LOD starts at zero...
            const stepRight = Math.pow(2, lodRight);
            const stepTop = Math.pow(2, lodTop);
            const stepBottom = Math.pow(2, lodBottom);
            const stepCenter = Math.pow(2, lodCore);
            const indexCenter = (z + stepCenter) * width + x + stepCenter;
            // first up
            let indexTemp1 = z * width + x;
            let indexTemp2 = (z + stepLeft) * width + x;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second up
            if (lodLeft == lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 += stepLeft * width;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first right
            indexTemp1 = indexTemp2;
            indexTemp2 += stepTop;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second right
            if (lodTop === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 += stepTop;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first down
            indexTemp1 = indexTemp2;
            indexTemp2 -= stepRight * width;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second down
            if (lodRight === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 -= stepRight * width;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first left
            indexTemp1 = indexTemp2;
            indexTemp2 -= stepBottom;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second left
            if (lodBottom === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 -= stepBottom;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            return index;
        }
        _addTriangle(index, indices, v1, v2, v3) {
            indices[index++] = v1;
            indices[index++] = v2;
            indices[index++] = v3;
            return index;
        }
        destroy() {
            // TODO
        }
    }
    exports.GridBuilder = GridBuilder;
    exports.default = GridBuilder;
});
define("src/TerrainSystem/GeomipGridBuilder", ["require", "exports", "src/TerrainSystem/CoordsBuffer", "src/TerrainSystem/GridBuilder"], function (require, exports, CoordsBuffer_mjs_1, GridBuilder_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GeomipGridBuilder = void 0;
    GridBuilder_mjs_1 = __importDefault(GridBuilder_mjs_1);
    class GeomipGridBuilder extends GridBuilder_mjs_1.default {
        get patchVertices() { return this._vertices; }
        get heightMap() { return this._heightMap; }
        constructor(heightMap, zFar) {
            super(heightMap, zFar);
            this._heightMap = heightMap;
            this._vertices = new CoordsBuffer_mjs_1.CoordsBuffer(this._heightMap, this._heightMap.patchSize);
            this._vertices.init();
        }
    }
    exports.GeomipGridBuilder = GeomipGridBuilder;
    exports.default = GeomipGridBuilder;
});
define("src/TerrainSystem/GeomipGridRenderPreparer", ["require", "exports", "src/TerrainSystem/GeomipGridBuilder", "src/TerrainSystem/LodManager"], function (require, exports, GeomipGridBuilder_mjs_1, LodManager_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GeomipGridRenderPreparer = void 0;
    GeomipGridBuilder_mjs_1 = __importDefault(GeomipGridBuilder_mjs_1);
    class GeomipGridRenderPreparer extends GeomipGridBuilder_mjs_1.default {
        initPatches(initializer) {
            for (let patchZ = 0; patchZ < this.numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this.numPatchesX; patchX++) {
                    const minX = patchX * (this.patchSize - 1);
                    const minZ = patchZ * (this.patchSize - 1);
                    const info = this.lodInfo[0].info[0][0][0][0];
                    const baseIndex = info.start;
                    const baseVertex = minZ * this.width + minX;
                    initializer.initPatch(baseIndex, baseVertex, info.count, patchX, patchZ, minX, minZ, this.patchSize, LodManager_mjs_2.defaultPatchLod);
                }
            }
        }
        printLodMap() {
            this.lodManager.printLodMap();
        }
        updateLods(localCameraPos, useYPos = true, center = true) {
            this.lodManager.update(localCameraPos, this.heightMap, useYPos, center);
        }
        eachPatches(renderPreparer, frustum) {
            const patchSizeNorm = this.patchSize - 1;
            for (let patchZ = 0; patchZ < this.numPatchesZ; patchZ++) {
                const minZ = patchZ * patchSizeNorm;
                for (let patchX = 0; patchX < this.numPatchesX; patchX++) {
                    const minX = patchX * patchSizeNorm;
                    const visible = !!frustum && this.isPatchInsideViewFrustumBySphere(patchX, patchZ, frustum);
                    const plod = this.lodManager.getPatchLod(patchX, patchZ);
                    const info = this.lodInfo[plod.core].info[plod.left][plod.right][plod.top][plod.bottom];
                    const baseIndex = info.start;
                    const baseVertex = minZ * this.width + minX;
                    renderPreparer.preparePatch(visible, baseIndex, baseVertex, info.count, patchX, patchZ, minX, minZ, this.patchSize, plod);
                }
            }
        }
        isPatchInsideViewFrustumBySphere(patchBaseX, patchBaseZ, frustum) {
            const patchMinHeight = this.heightMap.getPatchMin(patchBaseX, patchBaseZ);
            const patchMaxHeight = this.heightMap.getPatchMax(patchBaseX, patchBaseZ);
            const patchRadiusBySize = this.patchSize / 2;
            const patchRediusByHeight = (patchMaxHeight - patchMinHeight) / 2;
            const patchCenterX = (patchBaseX * this.patchSize) + patchRadiusBySize;
            const patchCenterY = (patchMaxHeight + patchMinHeight) / 2;
            const patchCenterZ = (patchBaseZ * this.patchSize) + patchRadiusBySize;
            const radius = (patchRadiusBySize > patchRediusByHeight ? patchRadiusBySize : patchRediusByHeight) * Math.SQRT2;
            // center the patches relative to the entity center
            const patchCenteredX = (-this.width / 2) + patchCenterX;
            const patchCenteredZ = (-this.depth / 2) + patchCenterZ;
            return frustum.containsSphere(patchCenteredX, patchCenterY, patchCenteredZ, radius);
        }
    }
    exports.GeomipGridRenderPreparer = GeomipGridRenderPreparer;
    exports.default = GeomipGridRenderPreparer;
});
define("src/TerrainSystem/GeomipGrid", ["require", "exports", "src/TerrainSystem/GeomipGridRenderPreparer"], function (require, exports, GeomipGridRenderPreparer_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GeomipGrid = void 0;
    GeomipGridRenderPreparer_mjs_1 = __importDefault(GeomipGridRenderPreparer_mjs_1);
    class GeomipGrid extends GeomipGridRenderPreparer_mjs_1.default {
        setHeight(x, z, value) {
            this._heightMap.set(x, z, value);
        }
        appendToHeight(x, z, value) {
            this._heightMap.append(x, z, value);
        }
        multiplyToHeight(x, z, value, defaultHeight = 0) {
            this._heightMap.multiply(x, z, value, defaultHeight);
        }
        smoothHeightsZone(zone, np, radius) {
            this._heightMap.smoothZone(zone, np, radius);
        }
        loadHeightMapFromFile(buffer_1, options_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, options, np = -1, radius = 0) {
                const header = yield this._heightMap.fromFile(buffer, options);
                this._heightMap.smooth(np, radius);
                this._heightMap.recalculateMinMax(this._heightMap);
                this._heightMap.recalculateAABB();
                return header;
            });
        }
        loadHeightMapFromImg(img, np = -1, radius = 0) {
            this._heightMap.fromImage(img);
            this._heightMap.smooth(np, radius);
            this._heightMap.recalculateMinMax(this._heightMap);
            this._heightMap.recalculateAABB();
        }
        normalizeHeightMap(maxHeight) {
            maxHeight !== null && maxHeight !== void 0 ? maxHeight : (maxHeight = this._heightMap.maxHeight);
            this._heightMap.normalize(maxHeight);
        }
        setMaxHeight(maxHeight) {
            this._heightMap.setMaxHeight(maxHeight);
        }
        appendHeightMap(heightMap, value, zone, minHeight = null, maxHeight = null) {
            this._heightMap.combineHeights('+', heightMap, value, zone, 0, minHeight, maxHeight);
        }
        recalculateMinMax(zone, aabb = true) {
            this._heightMap.recalculateMinMax(zone);
            if (aabb) {
                this._heightMap.recalculateAABB();
            }
        }
    }
    exports.GeomipGrid = GeomipGrid;
    exports.default = GeomipGrid;
});
define("src/TerrainSystem/Terrain", ["require", "exports", "src/TerrainSystem/GeomipGrid"], function (require, exports, GeomipGrid_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.BaseTerrain = void 0;
    GeomipGrid_mjs_1 = __importDefault(GeomipGrid_mjs_1);
    class BaseTerrain extends GeomipGrid_mjs_1.default {
        get maxHeight() { return this.heightMap.maxHeight; }
    }
    exports.BaseTerrain = BaseTerrain;
    exports.default = BaseTerrain;
});
define("src/TerrainSystem/IPatch", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/TerrainSystem/IPatchesInstancing", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/TerrainHelpers/ITerrainPatchesInstancing", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/TerrainHelpers/TerrainPatchesBasic", ["require", "exports", "src/TerrainSystem/LodManager"], function (require, exports, LodManager_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TerrainPatchBufferBasic = void 0;
    class TerrainPatchBufferBasic {
        constructor(index, x, z, minX, minZ, size) {
            this.index = index;
            this.x = x;
            this.z = z;
            this.minX = minX;
            this.minZ = minZ;
            this.size = size;
            this.visible = false;
            this.hash = 0;
            this.lod = LodManager_mjs_3.defaultPatchLod;
            this.indicesBaseIndex = 0;
            this.indicesBaseVertex = 0;
            this.indicesCount = 0;
            this.dependencesUpdated = false;
            this.heightsUpdated = false;
            this.heightsUpdatedThisFrame = false;
            this.lastChangeTime = 0;
            this.lastChangeAttachTime = 0;
            this.lastChangeHeightsTime = 0;
        }
    }
    exports.TerrainPatchBufferBasic = TerrainPatchBufferBasic;
    class TerrainPatchesBasic {
        get instancing() { return this._instancing; }
        get bufferArray() { return this._bufferArray; }
        get meshInstanceArray() { return this._meshInstanceArray; }
        get aabb() { return this._aabb; }
        get customMeshInstance() { return this._customMeshInstance; }
        constructor(terrain, instancer) {
            this.customForwardRenderer = false;
            this.terrain = terrain;
            this.customForwardRenderer = false;
            this._useMashesBag = false;
            this._bufferArray = new Array(this.terrain.numPatchesX * this.terrain.numPatchesZ);
            this._meshInstanceArray = new Array(this.terrain.numPatchesX * this.terrain.numPatchesZ);
            this._customMeshInstance = undefined;
            this._patchAvalableCount = 0;
            this._changesIds = [];
            this._aabb = new pc.BoundingBox();
            this._init = false;
            this._instancing = instancer;
            this.updateAabb();
        }
        setMaterial(material) {
            this._material = material;
        }
        setInstancing(value, updateMeshes = true) {
            if (this._instancing === value) {
                return;
            }
            this._destroyMeshes();
            this._instancing = value;
            if (updateMeshes) {
                this.updateMeshes();
            }
        }
        updateAabb() {
            const halfWidth = this.terrain.width / 2;
            const halfDepth = this.terrain.depth / 2;
            this._aabb.setMinMax(new pc.Vec3(-halfWidth, 0, -halfDepth), new pc.Vec3(+halfWidth, this.terrain.maxHeight, +halfDepth));
            if (this._customMeshInstance) {
                this._customMeshInstance.setCustomAabb(this._aabb);
                this._customMeshInstance.mesh.aabb = this._aabb;
            }
            for (const meshInstance of this._meshInstanceArray) {
                if (meshInstance) {
                    meshInstance.setCustomAabb(this._aabb);
                    meshInstance.mesh.aabb = this._aabb;
                }
            }
            if (this.instancing) {
                this.instancing.forEach(item => {
                    if (item.object) {
                        item.object.setCustomAabb(this._aabb);
                        item.object.mesh.aabb = this._aabb;
                    }
                });
            }
        }
        startUpdate() {
        }
        _forceUpdateRenderComponent(entity) {
            let append = false; // destroy prev meshInstances by default
            let meshInstances;
            if (this.customForwardRenderer &&
                this._customMeshInstance) {
                this._useMashesBag = true;
                meshInstances = [this._customMeshInstance];
            }
            else {
                const count = this.instancing
                    ? this.instancing.meshInstanceCount
                    : this._patchAvalableCount;
                meshInstances = new Array(count);
                if (this.instancing) {
                    this.instancing.appendMeshInstances(meshInstances);
                }
                else {
                    // if instancing was used, then we delete all previous instances
                    // or use custom renderer
                    append = !this._useMashesBag;
                    let i = 0;
                    for (let patchIndex = 0; patchIndex < this._meshInstanceArray.length; patchIndex++) {
                        const patchMeshInstance = this._meshInstanceArray[patchIndex];
                        if (patchMeshInstance) {
                            meshInstances[i++] = patchMeshInstance;
                        }
                    }
                    this._changesIds.length = 0;
                }
                this._useMashesBag = !!this.instancing;
            }
            if (entity.render) {
                // TODO: https://github.com/playcanvas/engine/issues/6680
                if (append) {
                    // @ts-ignore
                    entity.render._meshInstances = [];
                }
                entity.render.meshInstances = meshInstances;
            }
            else {
                entity.addComponent('render', {
                    meshInstances: meshInstances,
                    cull: false,
                });
            }
            // Update shadows
            for (const meshInstance of meshInstances) {
                meshInstance.cull = false;
                meshInstance.castShadow = false;
                meshInstance.receiveShadow = false;
            }
        }
        _updateRenderComponent(entity) {
            if (this.customForwardRenderer ||
                this.instancing ||
                this._changesIds.length === 0 ||
                !entity.enabled) {
                return;
            }
            this._forceUpdateRenderComponent(entity);
        }
        updateLods() {
            this.updateIndexBuffer();
            this.updateMeshes();
        }
        _forEach(zone, quad, numQuadX, numQuadZ, callback) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const minX = Math.max(zone.minX, 0);
            const minZ = Math.max(zone.minZ, 0);
            const maxX = Math.min(zone.maxX, this.terrain.width);
            const maxZ = Math.min(zone.maxZ, this.terrain.depth);
            const minPatchX = minX / quad | 0;
            const minPatchZ = minZ / quad | 0;
            const maxPatchX = maxX / quad | 0;
            const maxPatchZ = maxZ / quad | 0;
            const normalizeMinX = Math.max(minPatchX, 0);
            const normalizeMinZ = Math.max(minPatchZ, 0);
            const normalizeMaxX = Math.min(maxPatchX + 1, numQuadX);
            const normalizeMaxZ = Math.min(maxPatchZ + 1, numQuadZ);
            for (let z = normalizeMinZ; z < normalizeMaxZ; z++) {
                for (let x = normalizeMinX; x < normalizeMaxX; x++) {
                    const patchIndex = z * numQuadX + x;
                    if (callback(patchIndex, x, z) === false) {
                        return;
                    }
                }
            }
        }
        forEach(zone, callback) {
            this._forEach(zone, this.terrain.patchSize, this.terrain.numPatchesX, this.terrain.numPatchesZ, callback);
        }
        updateDependencies(zone) {
            const now = performance.now();
            this.forEach(zone, (patchIndex) => {
                const patchBuffer = this._bufferArray[patchIndex];
                patchBuffer.lastChangeTime = now;
                patchBuffer.lastChangeAttachTime = now;
            });
            this._lastChangeTime = now;
            this._lastChangeAttachTime = now;
        }
        updateHeights(zone) {
            const now = performance.now();
            this.forEach(zone, (patchIndex) => {
                const patchBuffer = this._bufferArray[patchIndex];
                patchBuffer.lastChangeTime = now;
                patchBuffer.lastChangeHeightsTime = now;
                patchBuffer.heightsUpdated = true;
            });
            this._lastChangeTime = now;
            this._lastChangeHeightsTime = now;
        }
        _addPatchBuffer(patchIndex, buffer) {
            if (this._bufferArray[patchIndex]) {
                throw new Error('Buffer has already been added');
            }
            this._bufferArray[patchIndex] = buffer;
        }
        _addPatchMeshInstance(patchIndex, meshInstance) {
            if (this._meshInstanceArray[patchIndex]) {
                throw new Error('Mesh instance has already been added');
            }
            this._meshInstanceArray[patchIndex] = meshInstance;
            this._changesIds.push(patchIndex);
            this._patchAvalableCount++;
        }
        endUpdate(hasUpdateHeights) {
            this._updateRenderComponent(this._entity);
        }
        getOrCreatePatchMesh(patchIndex) {
            let patch = this._meshInstanceArray[patchIndex];
            if (!patch) {
                patch = this._createPatchMesh(patchIndex, this._app, this._entity, this._material);
                this._addPatchMeshInstance(patchIndex, patch);
            }
            return patch;
        }
        destroyPatchMesh(patchIndex) {
            this._destroyPatchMesh(patchIndex);
            const patchMeshInstance = this._meshInstanceArray[patchIndex];
            if (patchMeshInstance) {
                this._patchAvalableCount--;
                this._changesIds.push(patchIndex);
                delete this._meshInstanceArray[patchIndex];
            }
        }
        destroyPatchesMesh() {
            for (let z = 0; z < this.terrain.numPatchesZ; z++) {
                for (let x = 0; x < this.terrain.numPatchesX; x++) {
                    const index = z * this.terrain.numPatchesX + x;
                    this.destroyPatchMesh(index);
                }
            }
        }
        updatePatchesMeshMaterial() {
            for (let z = 0; z < this.terrain.numPatchesZ; z++) {
                for (let x = 0; x < this.terrain.numPatchesX; x++) {
                    const index = z * this.terrain.numPatchesX + x;
                    const meshInstance = this._meshInstanceArray[index];
                    if (meshInstance) {
                        meshInstance.material = this._material;
                    }
                }
            }
        }
        _destroyMeshes() {
            var _a;
            if (this._customMeshInstance) {
                this._destroyCustomBagMesh(this._customMeshInstance);
                this._customMeshInstance = undefined;
            }
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.destroy((mesh) => {
                this._destroyInstancingMesh(mesh);
            });
            if (this.customForwardRenderer || this.instancing) {
                this.destroyPatchesMesh();
            }
        }
        updateMeshes() {
            if (!this._init) {
                return;
            }
            this._destroyMeshes();
            if (this.customForwardRenderer) {
                this._customMeshInstance = this._createCustomBagMesh(this._app, this._entity, this._material, this.terrain);
            }
            else if (this.instancing) {
                this.instancing.buildFromTerrain(this.terrain, (lodInfo, primitiveInfo, data) => {
                    return this._createInstancingMesh(this._app, this._entity, this._material, lodInfo, primitiveInfo, this.instancing, data);
                });
            }
            else {
                this.updatePatchesMeshMaterial();
            }
            this._forceUpdateRenderComponent(this._entity);
        }
        init(app, entity, material) {
            if (this._init) {
                throw new Error('The terrain patches was initialized earlier');
            }
            this._init = true;
            this._app = app;
            this._entity = entity;
            // for other language use internal class
            const initializer = {
                initPatch: (baseIndex, baseVertex, count, patchX, patchZ, minX, minZ, size, lodInfo) => {
                    const patchIndex = patchZ * this.terrain.numPatchesX + patchX;
                    const buffer = this._createPatchBuffer(patchIndex, baseIndex, baseVertex, count, patchX, patchZ, minX, minZ, size, lodInfo);
                    this._addPatchBuffer(patchIndex, buffer);
                }
            };
            this.setMaterial(material);
            this.terrain.initPatches(initializer);
            this.updateMeshes();
        }
    }
    exports.default = TerrainPatchesBasic;
});
define("src/TerrainSystem/PatchesCombineInstancing", ["require", "exports", "src/TerrainSystem/LodInfo", "src/TerrainSystem/LodManager"], function (require, exports, LodInfo_mjs_2, LodManager_mjs_4) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchCombineInstancing = exports.TComInstCoordsOffsetArrType = exports.combineGroupLen = exports.comInstDataSize = void 0;
    exports.comInstDataSize = 4;
    exports.combineGroupLen = 6;
    exports.TComInstCoordsOffsetArrType = Uint8Array;
    class PatchCombineInstancing {
        get patchCount() { return this._patchCount; }
        constructor() {
            this.data = [];
            this._patchCount = 0;
        }
        forEach(fn) {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < exports.combineGroupLen; i++) {
                    const segment = this.data[c].groups[i];
                    fn(segment);
                }
            }
        }
        destroySegmentObjects(index, destructor) {
            for (let i = 0; i < exports.combineGroupLen; i++) {
                const segment = this.data[index].groups[i];
                if (segment.object) {
                    destructor(segment.object);
                    segment.object = null;
                }
            }
        }
        destroy(destructor) {
            for (let i = 0; i < this.data.length; i++) {
                this.destroySegmentObjects(i, destructor);
            }
            this.data.length = 0;
        }
        buildFromTerrain(terrain, objectBuilder) {
            this._patchCount = terrain.numPatchesX * terrain.numPatchesZ;
            this.data = new Array(terrain.lodInfo.length);
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                this.data[lodCore] = this._buildInfo(lodCore, terrain.lodInfo[lodCore], this._patchCount, objectBuilder);
            }
        }
        _buildInfo(lodCore, lodInfo, patchCount, objectBuilder) {
            const groups = new Array(exports.combineGroupLen);
            const items = new Array(LodInfo_mjs_2.LEFT);
            for (let l = 0; l < LodInfo_mjs_2.LEFT; l++) {
                items[l] = new Array(LodInfo_mjs_2.RIGHT);
                for (let r = 0; r < LodInfo_mjs_2.RIGHT; r++) {
                    items[l][r] = new Array(LodInfo_mjs_2.TOP);
                    for (let t = 0; t < LodInfo_mjs_2.TOP; t++) {
                        items[l][r][t] = new Array(LodInfo_mjs_2.BOTTOM);
                        for (let b = 0; b < LodInfo_mjs_2.BOTTOM; b++) {
                            const id = (0, LodManager_mjs_4.getLodId)(lodCore, l, r, t, b);
                            let mainId;
                            let groupId;
                            let angle;
                            if (l === 0 && r === 0 && t === 0 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 0, 0, 0, 0);
                                groupId = 0;
                                angle = 0;
                            }
                            else if (l === 1 && r === 0 && t === 0 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 0, 0);
                                groupId = 1;
                                angle = 0;
                            }
                            else if (l === 0 && r === 0 && t === 1 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 0, 0);
                                groupId = 1;
                                angle = 90;
                            }
                            else if (l === 0 && r === 1 && t === 0 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 0, 0);
                                groupId = 1;
                                angle = 180;
                            }
                            else if (l === 0 && r === 0 && t === 0 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 0, 0);
                                groupId = 1;
                                angle = 270;
                            }
                            else if (l === 1 && r === 0 && t === 1 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 0);
                                groupId = 2;
                                angle = 0;
                            }
                            else if (l === 0 && r === 1 && t === 1 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 0);
                                groupId = 2;
                                angle = 90;
                            }
                            else if (l === 0 && r === 1 && t === 0 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 0);
                                groupId = 2;
                                angle = 180;
                            }
                            else if (l === 1 && r === 0 && t === 0 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 0);
                                groupId = 2;
                                angle = 270;
                            }
                            else if (l === 1 && r === 1 && t === 0 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 1, 0, 0);
                                groupId = 3;
                                angle = 0;
                            }
                            else if (l === 0 && r === 0 && t === 1 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 1, 0, 0);
                                groupId = 3;
                                angle = 90;
                            }
                            else if (l === 1 && r === 0 && t === 1 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 1);
                                groupId = 4;
                                angle = 0;
                            }
                            else if (l === 1 && r === 1 && t === 1 && b === 0) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 1);
                                groupId = 4;
                                angle = 90;
                            }
                            else if (l === 0 && r === 1 && t === 1 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 1);
                                groupId = 4;
                                angle = 180;
                            }
                            else if (l === 1 && r === 1 && t === 0 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 0, 1, 1);
                                groupId = 4;
                                angle = 270;
                            }
                            else if (l === 1 && r === 1 && t === 1 && b === 1) {
                                mainId = (0, LodManager_mjs_4.getLodId)(lodCore, 1, 1, 1, 1);
                                groupId = 5;
                                angle = 0;
                            }
                            else {
                                throw new Error(`Can\'t combine ${l},${r},${t},${b}`);
                            }
                            items[l][r][t][b] = {
                                mainId,
                                groupId,
                                angle: angle / 90, // save for uint8
                            };
                            if (id === mainId) {
                                const info = lodInfo.info[l][r][t][b];
                                const lod = {
                                    core: lodCore,
                                    left: l,
                                    right: r,
                                    top: t,
                                    bottom: b
                                };
                                const data = new exports.TComInstCoordsOffsetArrType(patchCount * exports.comInstDataSize);
                                const object = objectBuilder ? objectBuilder(lod, info, data, patchCount) : null;
                                groups[groupId] = {
                                    vertexBaseIndex: info.start,
                                    vertexCount: info.count,
                                    count: 0,
                                    data: data,
                                    object: object,
                                    hasChanges: false,
                                };
                            }
                        }
                    }
                }
            }
            return {
                groups,
                items
            };
        }
        get(lod) {
            const data = this.data[lod.core];
            const groupId = data.items[lod.left][lod.right][lod.top][lod.bottom].groupId;
            return data.groups[groupId];
        }
        increment(lod, patch) {
            const data = this.data[lod.core];
            const item = data.items[lod.left][lod.right][lod.top][lod.bottom];
            const single = data.groups[item.groupId];
            const prevIndex = single.count;
            const index = prevIndex * exports.comInstDataSize;
            if (single.data[index + 0] !== patch.x ||
                single.data[index + 1] !== patch.z ||
                single.data[index + 2] !== item.angle) {
                single.data[index + 0] = patch.x;
                single.data[index + 1] = patch.z;
                single.data[index + 2] = item.angle;
                single.hasChanges = true;
            }
            single.count++;
            return single;
        }
        zeroAll() {
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                for (let i = 0; i < exports.combineGroupLen; i++) {
                    const single = this.data[lodCore].groups[i];
                    single.count = 0;
                }
            }
        }
    }
    exports.PatchCombineInstancing = PatchCombineInstancing;
});
define("src/TerrainHelpers/TerrainPatchesCombineInstancing", ["require", "exports", "src/TerrainSystem/PatchesCombineInstancing"], function (require, exports, PatchesCombineInstancing_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TerrainPathcesCombineInstancing = void 0;
    class TerrainPathcesCombineInstancing extends PatchesCombineInstancing_mjs_1.PatchCombineInstancing {
        constructor() {
            super(...arguments);
            this.bufferType = PatchesCombineInstancing_mjs_1.TComInstCoordsOffsetArrType;
            this.itemBufferSize = 4;
        }
        get meshInstanceCount() { return this.data.length * PatchesCombineInstancing_mjs_1.combineGroupLen; }
        appendMeshInstances(arr, offset = 0) {
            let meshIndex = 0;
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchesCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    if (chunk.object) {
                        arr[meshIndex++ + offset] = chunk.object;
                    }
                }
            }
            return meshIndex;
        }
        begin(castShadow = false, receiveShadow = false) {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchesCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    const chunkObject = chunk.object;
                    chunk.count = 0;
                    chunk.hasChanges = false;
                    if (chunkObject) {
                        chunkObject.visible = false;
                        chunkObject.visibleThisFrame = false;
                        chunkObject.castShadow = castShadow;
                        chunkObject.receiveShadow = receiveShadow;
                    }
                }
            }
        }
        end() {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchesCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    const chunkObject = chunk.object;
                    if (chunkObject && chunk.count > 0) {
                        chunkObject.instancingCount = chunk.count;
                        if (chunk.hasChanges && chunkObject.instancingData) {
                            // TODO: performance improvement
                            //chunkObject.instancingData.vertexBuffer?.unlock();
                            const length = chunk.count * PatchesCombineInstancing_mjs_1.comInstDataSize;
                            const vertexBuffer = chunkObject.instancingData.vertexBuffer;
                            this._updateBuffer(vertexBuffer, chunk.data, length);
                        }
                    }
                }
            }
        }
        _updateBuffer(vertexBuffer, data, length) {
            if (vertexBuffer) {
                const device = vertexBuffer.device;
                if (device.isWebGL2) {
                    const gl = device.gl;
                    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer.impl.bufferId);
                    gl.bufferSubData(gl.ARRAY_BUFFER, 0, data, 0, length);
                }
                else if (device.isWebGPU) {
                    const wgpu = device.wgpu;
                    const buffer = vertexBuffer.impl.buffer;
                    wgpu.queue.writeBuffer(buffer, 0, data, 0, length);
                }
                else {
                    console.error('Unsupported device');
                }
            }
        }
    }
    exports.TerrainPathcesCombineInstancing = TerrainPathcesCombineInstancing;
});
define("src/TerrainSystem/PatchesInstancing", ["require", "exports", "src/TerrainSystem/LodInfo"], function (require, exports, LodInfo_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchInstancing = exports.TInstCoordsOffsetArrType = exports.instDataSize = void 0;
    exports.instDataSize = 2;
    exports.TInstCoordsOffsetArrType = Uint16Array;
    class PatchInstancing {
        get patchCount() { return this._patchCount; }
        constructor() {
            this.data = [];
            this._patchCount = 0;
        }
        forEach(fn) {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                                const segment = this.data[c][l][r][t][b];
                                fn(segment);
                            }
                        }
                    }
                }
            }
        }
        destroySegmentObjects(index, destructor) {
            for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                    for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                        for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                            const segment = this.data[index][l][r][t][b];
                            if (segment.object) {
                                destructor(segment.object);
                                segment.object = null;
                            }
                        }
                    }
                }
            }
        }
        destroy(destructor) {
            for (let i = 0; i < this.data.length; i++) {
                this.destroySegmentObjects(i, destructor);
            }
            this.data.length = 0;
        }
        buildFromTerrain(terrain, objectBuilder) {
            this._patchCount = terrain.numPatchesX * terrain.numPatchesZ;
            this.data = new Array(terrain.lodInfo.length);
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                this.data[lodCore] = this._buildInfo(lodCore, terrain.lodInfo[lodCore], this._patchCount, objectBuilder);
            }
        }
        _buildInfo(lodCore, lodInfo, patchCount, objectBuilder) {
            const arr = new Array(LodInfo_mjs_3.LEFT);
            for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                arr[l] = new Array(LodInfo_mjs_3.RIGHT);
                for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                    arr[l][r] = new Array(LodInfo_mjs_3.TOP);
                    for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                        arr[l][r][t] = new Array(LodInfo_mjs_3.BOTTOM);
                        for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                            const info = lodInfo.info[l][r][t][b];
                            const lod = {
                                core: lodCore,
                                left: l,
                                right: r,
                                top: t,
                                bottom: b
                            };
                            const data = new exports.TInstCoordsOffsetArrType(patchCount * exports.instDataSize);
                            const object = objectBuilder ? objectBuilder(lod, info, data, patchCount) : null;
                            arr[l][r][t][b] = {
                                vertexBaseIndex: info.start,
                                vertexCount: info.count,
                                count: 0,
                                data: data,
                                object: object,
                                hasChanges: false,
                            };
                        }
                    }
                }
            }
            return arr;
        }
        get(lod) {
            return this.data[lod.core][lod.left][lod.right][lod.top][lod.bottom];
        }
        increment(lod, patch) {
            const single = this.get(lod);
            const prevIndex = single.count;
            const index = prevIndex * exports.instDataSize;
            if (single.data[index + 0] !== patch.minX ||
                single.data[index + 1] !== patch.minZ) {
                single.data[index + 0] = patch.minX;
                single.data[index + 1] = patch.minZ;
                single.hasChanges = true;
            }
            single.count++;
            return single;
        }
        zeroAll() {
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                                const single = this.data[lodCore][l][r][t][b];
                                single.count = 0;
                            }
                        }
                    }
                }
            }
        }
    }
    exports.PatchInstancing = PatchInstancing;
});
define("src/TerrainHelpers/TerrainPatchesInstancing", ["require", "exports", "src/TerrainSystem/LodInfo", "src/TerrainSystem/PatchesInstancing"], function (require, exports, LodInfo_mjs_4, PatchesInstancing_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TerrainPathcesInstancing = void 0;
    class TerrainPathcesInstancing extends PatchesInstancing_mjs_1.PatchInstancing {
        constructor() {
            super(...arguments);
            this.bufferType = PatchesInstancing_mjs_1.TInstCoordsOffsetArrType;
            this.itemBufferSize = 2;
        }
        get meshInstanceCount() { return this.data.length * LodInfo_mjs_4.LEFT * LodInfo_mjs_4.RIGHT * LodInfo_mjs_4.TOP * LodInfo_mjs_4.BOTTOM; }
        appendMeshInstances(arr, offset = 0) {
            let i = 0;
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                if (chunk.object) {
                                    arr[i++ + offset] = chunk.object;
                                }
                            }
                        }
                    }
                }
            }
            return i;
        }
        begin(castShadow = false, receiveShadow = false) {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                const chunkObject = chunk.object;
                                chunk.count = 0;
                                chunk.hasChanges = false;
                                if (chunkObject) {
                                    chunkObject.visible = false;
                                    chunkObject.visibleThisFrame = false;
                                    chunkObject.castShadow = castShadow;
                                    chunkObject.receiveShadow = receiveShadow;
                                }
                            }
                        }
                    }
                }
            }
        }
        end() {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                const chunkObject = chunk.object;
                                if (chunkObject && chunk.count > 0) {
                                    chunkObject.instancingCount = chunk.count;
                                    if (chunk.hasChanges && chunkObject.instancingData) {
                                        // TODO: performance improvement
                                        //chunkObject.instancingData.vertexBuffer?.unlock();
                                        const length = chunk.count * PatchesInstancing_mjs_1.instDataSize;
                                        const vertexBuffer = chunkObject.instancingData.vertexBuffer;
                                        this._updateBuffer(vertexBuffer, chunk.data, length);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        _updateBuffer(vertexBuffer, data, length) {
            if (vertexBuffer) {
                const device = vertexBuffer.device;
                if (device.isWebGL2) {
                    const gl = device.gl;
                    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer.impl.bufferId);
                    gl.bufferSubData(gl.ARRAY_BUFFER, 0, data, 0, length);
                }
                else if (device.isWebGPU) {
                    const wgpu = device.wgpu;
                    const buffer = vertexBuffer.impl.buffer;
                    wgpu.queue.writeBuffer(buffer, 0, data, 0, length);
                }
                else {
                    console.error('Unsupported device');
                }
            }
        }
    }
    exports.TerrainPathcesInstancing = TerrainPathcesInstancing;
});
define("src/TerrainHelpers/TerrainPatches", ["require", "exports", "src/TerrainSystem/CoordsBuffer", "src/TerrainHelpers/TerrainPatchesBasic", "src/TerrainHelpers/TerrainPatchesShaderChunks", "src/TerrainSystem/CompressedPatchedHeightMap", "src/Shared/Utils", "src/TerrainHelpers/TerrainPatchesCombineInstancing", "src/TerrainHelpers/TerrainPatchesInstancing"], function (require, exports, CoordsBuffer_mjs_2, TerrainPatchesBasic_mjs_1, TerrainPatchesShaderChunks_mjs_2, CompressedPatchedHeightMap_mjs_1, Utils_mjs_3, TerrainPatchesCombineInstancing_mjs_1, TerrainPatchesInstancing_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getHeightMapFormat = getHeightMapFormat;
    exports.getHeightMapChunkBufferType = getHeightMapChunkBufferType;
    TerrainPatchesBasic_mjs_1 = __importStar(TerrainPatchesBasic_mjs_1);
    CompressedPatchedHeightMap_mjs_1 = __importDefault(CompressedPatchedHeightMap_mjs_1);
    function getHeightMapFormat(graphicsDevice, heightMap) {
        let hmFormat = (0, Utils_mjs_3.checkSupportR32FTexture)(graphicsDevice) ? 'r32f' : 'rgba';
        if (heightMap instanceof CompressedPatchedHeightMap_mjs_1.default) {
            hmFormat = heightMap.compressAlgoritm === 'x4' ? 'rgbaX4' : 'rgbaX2';
        }
        return hmFormat;
    }
    function getHeightMapChunkBufferType(graphicsDevice, format) {
        if (format === pc.PIXELFORMAT_R32F) {
            return Float32Array;
        }
        if (format === pc.PIXELFORMAT_RG16U) {
            return Uint16Array;
        }
        if (format === pc.PIXELFORMAT_RGBA8U) {
            return Uint8Array;
        }
        throw new Error('Unsupported format');
    }
    class TerrainPatches extends TerrainPatchesBasic_mjs_1.default {
        get heightMapTexture() { return this._heightMap; }
        _updatePatchHeightsOnGPU(dataChunkX, dataChunkZ) {
            // TODO: a batch update may be required.
            // TODO: transform in heightmap class
            const dataChunkSize = this.terrain.heightMap.dataChunkSize;
            const level = this.terrain.heightMap.getChunkIndex(dataChunkX, dataChunkZ);
            const buffer = this.terrain.heightMap.getChunkBuffer(this._heightMapLevelsType, dataChunkX, dataChunkZ);
            if (this._app.graphicsDevice.isWebGL2) {
                const gl = this._app.graphicsDevice.gl;
                const textureFormat = this._heightMap.impl._glFormat;
                const texturePixelT = this._heightMap.impl._glPixelType;
                const textureTarget = this._heightMap.impl._glTarget;
                const textureObject = this._heightMap.impl._glTexture;
                gl.bindTexture(textureTarget, textureObject);
                gl.texSubImage3D(gl.TEXTURE_2D_ARRAY, 0, 0, 0, level, dataChunkSize, dataChunkSize, 1, textureFormat, texturePixelT, buffer);
            }
            else if (this._app.graphicsDevice.isWebGPU) {
                const webgpu = this._app.graphicsDevice.wgpu;
                const texture = (this._heightMap.impl.gpuTexture);
                webgpu.queue.writeTexture({
                    texture: texture,
                    origin: [0, 0, level],
                    mipLevel: 0
                }, buffer, {
                    offset: 0,
                    bytesPerRow: dataChunkSize * 4, // always 4 for rgba format
                    rowsPerImage: dataChunkSize
                }, {
                    width: dataChunkSize,
                    height: dataChunkSize
                });
            }
        }
        _updateHeightMap(zone) {
            this._forEach(zone, this.terrain.heightMap.dataChunkSize, this.terrain.heightMap.dataNumChunksX, this.terrain.heightMap.dataNumChunksZ, (patchIndex, x, z) => {
                this._updatePatchHeightsOnGPU(x, z);
            });
        }
        _createPatchBuffer(patchIndex, baseIndex, baseVertex, count, patchX, patchZ, minX, minZ, size, lod) {
            const patchBuf = new TerrainPatchesBasic_mjs_1.TerrainPatchBufferBasic(patchIndex, patchX, patchZ, minX, minZ, size);
            patchBuf.lod = lod;
            patchBuf.indicesBaseIndex = baseIndex;
            patchBuf.indicesBaseVertex = baseVertex;
            patchBuf.indicesCount = count;
            patchBuf.dependencesUpdated = false;
            patchBuf.heightsUpdated = false;
            return patchBuf;
        }
        _buildVertexFormat(graphicsDevice, vertexBuffer) {
            const coordsFormat = (vertexBuffer.patchVertexBufferTyped instanceof Uint8Array) ? pc.TYPE_UINT8 : pc.TYPE_UINT16;
            const vertexDesc = [{
                    semantic: pc.SEMANTIC_POSITION,
                    components: CoordsBuffer_mjs_2.coordsVertexSize,
                    type: coordsFormat,
                    normalize: false,
                    asInt: true
                }];
            return new pc.VertexFormat(graphicsDevice, vertexDesc, vertexBuffer.patchVertexBufferLength);
        }
        _buildInstancingVertexFormat(graphicsDevice, instancer) {
            const type = instancer.bufferType === Uint16Array ? pc.TYPE_UINT16 :
                instancer.bufferType === Uint8Array ? pc.TYPE_UINT8 :
                    pc.TYPE_FLOAT32;
            return new pc.VertexFormat(graphicsDevice, [{
                    semantic: pc.SEMANTIC_ATTR10,
                    components: instancer.itemBufferSize,
                    type: type,
                    normalize: false,
                    asInt: true
                }]);
        }
        _buildInstancingVertexBuffer(graphicsDevice, instancer, data) {
            return new pc.VertexBuffer(graphicsDevice, this._buildInstancingVertexFormat(graphicsDevice, instancer), data.length / instancer.itemBufferSize, {
                usage: pc.BUFFER_GPUDYNAMIC,
                data: data,
                storage: false,
            });
        }
        _setCustomPrimitiveChunks(terrain, mesh) {
            const patches = new Array(terrain.numPatchesX * terrain.numPatchesZ);
            for (let patchZ = 0; patchZ < terrain.numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < terrain.numPatchesX; patchX++) {
                    const patchIndex = patchZ * terrain.numPatchesX + patchX;
                    const patchBuf = this.bufferArray[patchIndex];
                    patches[patchIndex] = {
                        type: pc.PRIMITIVE_TRIANGLES,
                        enabled: false,
                        base: 0,
                        count: 0,
                        indexed: true,
                        attributes: {
                            [TerrainPatchesShaderChunks_mjs_2.patchCoordOffsetParamName]: [patchBuf.minX, patchBuf.minZ],
                            [TerrainPatchesShaderChunks_mjs_2.patchLodCoreParamName]: patchBuf.lod.core,
                        }
                    };
                }
            }
            mesh.primitiveChunks = [patches];
        }
        _createCustomBagMesh(app, entity, material, terrain) {
            const patchMesh = new pc.Mesh(app.graphicsDevice);
            const primitive = patchMesh.primitive[0];
            patchMesh.aabb = this.aabb;
            patchMesh.indexBuffer[0] = this._sharedIndexBuffer;
            patchMesh.vertexBuffer = this._sharedVertexBuffer;
            this._setCustomPrimitiveChunks(terrain, patchMesh);
            primitive.type = pc.PRIMITIVE_TRIANGLES;
            primitive.base = 0;
            primitive.count = 0;
            primitive.indexed = true;
            const patchMeshInstance = new pc.MeshInstance(patchMesh, material, entity);
            patchMeshInstance.cull = false;
            patchMeshInstance.visible = false;
            patchMeshInstance.visibleThisFrame = false;
            patchMeshInstance.castShadow = false;
            patchMeshInstance.receiveShadow = false;
            patchMeshInstance.setParameter(TerrainPatchesShaderChunks_mjs_2.patchLodCoreParamName, 0, 0xffffffff);
            patchMeshInstance.setParameter(TerrainPatchesShaderChunks_mjs_2.patchCoordOffsetParamName, [0, 0], 0xffffffff);
            patchMeshInstance.setInstancing(null);
            patchMeshInstance.setCustomAabb(this.aabb);
            return patchMeshInstance;
        }
        _createInstancingMesh(app, entity, material, lodInfo, primitiveInfo, instancer, data) {
            const patchMesh = new pc.Mesh(app.graphicsDevice);
            const primitive = patchMesh.primitive[0];
            const instancingBuf = this._buildInstancingVertexBuffer(app.graphicsDevice, instancer, data);
            patchMesh.aabb = this.aabb;
            patchMesh.indexBuffer[0] = this._sharedIndexBuffer;
            patchMesh.vertexBuffer = this._sharedVertexBuffer;
            primitive.type = pc.PRIMITIVE_TRIANGLES;
            primitive.base = primitiveInfo.start;
            primitive.count = primitiveInfo.count;
            primitive.indexed = true;
            const patchMeshInstance = new pc.MeshInstance(patchMesh, material, entity);
            patchMeshInstance.cull = false;
            patchMeshInstance.visible = false;
            patchMeshInstance.visibleThisFrame = false;
            patchMeshInstance.castShadow = false;
            patchMeshInstance.receiveShadow = false;
            patchMeshInstance.setParameter(TerrainPatchesShaderChunks_mjs_2.patchLodCoreParamName, lodInfo.core, 0xffffffff);
            patchMeshInstance.setInstancing(instancingBuf, false);
            patchMeshInstance.setCustomAabb(this.aabb);
            return patchMeshInstance;
        }
        _createPatchMesh(patchIndex, app, entity, material) {
            const patchBuf = this.bufferArray[patchIndex];
            const patchMesh = new pc.Mesh(app.graphicsDevice);
            const primitive = patchMesh.primitive[0];
            patchMesh.aabb = this.aabb;
            patchMesh.indexBuffer[0] = this._sharedIndexBuffer;
            patchMesh.vertexBuffer = this._sharedVertexBuffer;
            primitive.type = pc.PRIMITIVE_TRIANGLES;
            primitive.base = 0;
            primitive.count = 0;
            primitive.indexed = true;
            const patchMeshInstance = new pc.MeshInstance(patchMesh, material, entity);
            patchMeshInstance.cull = false;
            patchMeshInstance.visible = false;
            patchMeshInstance.visibleThisFrame = false;
            patchMeshInstance.castShadow = false;
            patchMeshInstance.receiveShadow = false;
            patchMeshInstance.setParameter(TerrainPatchesShaderChunks_mjs_2.patchCoordOffsetParamName, [patchBuf.minX, patchBuf.minZ], 0xffffffff);
            patchMeshInstance.setInstancing(null);
            patchMeshInstance.setCustomAabb(this.aabb);
            return patchMeshInstance;
        }
        _destroyMesh(meshInstance) {
            var _a;
            // TODO: dont destroy shared index and vertex buffers
            if (meshInstance.mesh) {
                meshInstance.mesh.indexBuffer = [null];
                meshInstance.mesh.vertexBuffer = null;
            }
            meshInstance.destroy();
            if (meshInstance.mesh) {
                meshInstance.mesh.destroy();
            }
            if (meshInstance.instancingData) {
                // @ts-ignore
                if (meshInstance.instancingData.destroy) { // @ts-ignore
                    meshInstance.instancingData.destroy();
                }
                (_a = meshInstance.instancingData.vertexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            }
        }
        _destroyInstancingMesh(mesh) {
            this._destroyMesh(mesh);
        }
        _destroyPatchMesh(patchIndex) {
            const patchMeshInstance = this.meshInstanceArray[patchIndex];
            if (patchMeshInstance) {
                this._destroyMesh(patchMeshInstance);
            }
        }
        _destroyCustomBagMesh(mesh) {
            this._destroyMesh(mesh);
        }
        _updateIndexBuffer(graphicsDevice) {
            var _a;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            this._sharedIndexBuffer = new pc.IndexBuffer(graphicsDevice, pc.INDEXFORMAT_UINT32, this.terrain.patchIndices.length, pc.BUFFER_STATIC, this.terrain.patchIndices, { storage: false });
        }
        _updateVertexBuffer(graphicsDevice) {
            var _a;
            const format = this._buildVertexFormat(graphicsDevice, this.terrain.patchVertices);
            (_a = this._sharedVertexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            this._sharedVertexBuffer = new pc.VertexBuffer(graphicsDevice, format, format.vertexCount, {
                usage: pc.BUFFER_STATIC,
                storage: false,
                data: this.terrain.patchVertices.patchVertexBufferData,
            });
        }
        _initHeightMapTexture(app) {
            var _a;
            (_a = this._heightMap) === null || _a === void 0 ? void 0 : _a.destroy();
            const heightFormat = getHeightMapFormat(app.graphicsDevice, this.terrain.heightMap);
            const format = (0, TerrainPatchesShaderChunks_mjs_2.getTextureType)(heightFormat);
            const bufFormat = getHeightMapChunkBufferType(app.graphicsDevice, format);
            const dataChunkSize = this.terrain.heightMap.dataChunkSize;
            const chunks = this.terrain.heightMap.getChunksBuffers(bufFormat);
            this._heightMapLevelsType = bufFormat;
            this._heightMap = new pc.Texture(app.graphicsDevice, {
                width: dataChunkSize,
                height: dataChunkSize,
                format: format,
                mipmaps: false,
                minFilter: pc.FILTER_NEAREST,
                magFilter: pc.FILTER_NEAREST,
                addressU: pc.ADDRESS_CLAMP_TO_EDGE,
                addressV: pc.ADDRESS_CLAMP_TO_EDGE,
                addressW: pc.ADDRESS_CLAMP_TO_EDGE,
                flipY: app.graphicsDevice.isWebGPU,
                arrayLength: chunks.length,
                levels: [chunks]
            });
        }
        updateIndexBuffer() {
            this._updateIndexBuffer(this._app.graphicsDevice);
            if (this.customForwardRenderer || this.instancing) {
                this.updateMeshes();
            }
            else {
                for (const item of this.meshInstanceArray) {
                    if (item) {
                        item.mesh.indexBuffer[0] = this._sharedIndexBuffer;
                    }
                }
            }
        }
        static createMaterial() {
            const material = new pc.StandardMaterial();
            material.name = 'TerrainMaterial';
            material.setAttribute(TerrainPatchesShaderChunks_mjs_2.patchInstCoordOffsetParamName, pc.SEMANTIC_ATTR10);
            material.setAttribute(TerrainPatchesShaderChunks_mjs_2.vertexCoordAttrName, pc.SEMANTIC_POSITION);
            return material;
        }
        _bindDependenciesToMaterial(material) {
            material.setAttribute(TerrainPatchesShaderChunks_mjs_2.patchInstCoordOffsetParamName, pc.SEMANTIC_ATTR10);
            material.setAttribute(TerrainPatchesShaderChunks_mjs_2.vertexCoordAttrName, pc.SEMANTIC_POSITION);
            material.setParameter(TerrainPatchesShaderChunks_mjs_2.patchLodCoreParamName, 0);
            material.setParameter(TerrainPatchesShaderChunks_mjs_2.patchCoordOffsetParamName, [0, 0]);
            material.setParameter(TerrainPatchesShaderChunks_mjs_2.terrainHeightMapParamName, this._heightMap);
            const format = getHeightMapFormat(this._app.graphicsDevice, this.terrain.heightMap);
            const instancing = this.instancing instanceof TerrainPatchesCombineInstancing_mjs_1.TerrainPathcesCombineInstancing ? 'combine' :
                this.instancing instanceof TerrainPatchesInstancing_mjs_1.TerrainPathcesInstancing ? 'simple' :
                    false;
            const pcVersion = `v${pc.version[0]}`;
            const chunksStore = (0, TerrainPatchesShaderChunks_mjs_2.getTerrainShaderChunks)({
                width: this.terrain.width,
                depth: this.terrain.depth,
                patchSize: this.terrain.patchSize,
                heightMapChunkSize: this.terrain.heightMap.dataChunkSize,
                instancing: instancing,
                heightMapFormat: format,
                engineVersion: pcVersion,
            });
            const chunkNames = Object.keys(chunksStore);
            if (pcVersion === 'v1') {
                const chunks = material.chunks;
                chunks.APIVersion = pc.CHUNKAPI_1_70;
                for (let chunkName of chunkNames) {
                    chunks[chunkName] = chunksStore[chunkName];
                }
            }
            else {
                const shaderChunks = material.getShaderChunks(pc.SHADERLANGUAGE_GLSL);
                for (let chunkName of chunkNames) {
                    shaderChunks.set(chunkName, chunksStore[chunkName]);
                }
                material.shaderChunksVersion = pc.CHUNKAPI_1_70;
            }
            material.update();
        }
        setInstancing(value, updateMeshes = true) {
            if (value === this.instancing) {
                return;
            }
            super.setInstancing(value, false);
            if (this._material) {
                this._bindDependenciesToMaterial(this._material);
                if (updateMeshes) {
                    this.updateMeshes();
                }
            }
        }
        setMaterial(material) {
            this._bindDependenciesToMaterial(material);
            super.setMaterial(material);
        }
        updateHeights(zone) {
            super.updateHeights(zone);
            this._updateHeightMap(zone);
        }
        init(app, entity, material) {
            this._initHeightMapTexture(app);
            this._updateIndexBuffer(app.graphicsDevice);
            this._updateVertexBuffer(app.graphicsDevice);
            super.init(app, entity, material);
        }
    }
    exports.default = TerrainPatches;
});
define("src/TerrainSystem/MidpointDispTerrain", ["require", "exports", "src/Shared/Utils", "src/TerrainSystem/Terrain"], function (require, exports, Utils_mjs_4, Terrain_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.MidpointDispTerrain = void 0;
    Terrain_mjs_1 = __importDefault(Terrain_mjs_1);
    class MidpointDispTerrain extends Terrain_mjs_1.default {
        createMidpointDisplacement(roughness) {
            if (roughness < 0.0) {
                throw Error("roughness must be positive");
            }
            this._createMidpointDisplacementF32(roughness);
            this.normalizeHeightMap();
        }
        _createMidpointDisplacementF32(roughness) {
            let rectSize = (0, Utils_mjs_4.calcNextPowerOfTwo)(this.width);
            let curHeight = rectSize / 2.0;
            const heightReduce = Math.pow(2.0, -roughness);
            while (rectSize > 0) {
                this._diamondStep(rectSize, curHeight);
                this._squareStep(rectSize, curHeight);
                rectSize = (rectSize / 2) | 0;
                curHeight *= heightReduce;
            }
        }
        _diamondStep(rectSize, curHeight) {
            const HalfRectSize = Math.floor(rectSize / 2);
            for (let y = 0; y < this.depth; y += rectSize) {
                for (let x = 0; x < this.width; x += rectSize) {
                    let nextX = (x + rectSize) % this.width;
                    let nextY = (y + rectSize) % this.depth;
                    if (nextX < x) {
                        nextX = this.width - 1;
                    }
                    if (nextY < y) {
                        nextY = this.depth - 1;
                    }
                    const topLeft = this.heightMap.get(x, y);
                    const topRight = this.heightMap.get(nextX, y);
                    const bottomLeft = this.heightMap.get(x, nextY);
                    const bottomRight = this.heightMap.get(nextX, nextY);
                    const midX = (x + HalfRectSize) % this.width;
                    const midY = (y + HalfRectSize) % this.depth;
                    const randValue = (0, Utils_mjs_4.randomFloatRange)(curHeight, -curHeight);
                    const midPoint = (topLeft + topRight + bottomLeft + bottomRight) / 4.0;
                    this.setHeight(midX, midY, midPoint + randValue);
                }
            }
        }
        _squareStep(rectSize, curHeight) {
            const halfRectSize = (rectSize / 2) | 0;
            for (let y = 0; y < this.depth; y += rectSize) {
                for (let x = 0; x < this.width; x += rectSize) {
                    let nextX = (x + rectSize) % this.width;
                    let nextY = (y + rectSize) % this.depth;
                    if (nextX < x) {
                        nextX = this.width - 1;
                    }
                    if (nextY < y) {
                        nextY = this.depth - 1;
                    }
                    const midX = (x + halfRectSize) % this.width;
                    const midY = (y + halfRectSize) % this.depth;
                    const prevMidX = (x - halfRectSize + this.width) % this.width;
                    const prevMidY = (y - halfRectSize + this.depth) % this.depth;
                    const curTopLeft = this.heightMap.get(x, y);
                    const curTopRight = this.heightMap.get(nextX, y);
                    const curCenter = this.heightMap.get(midX, midY);
                    const prevYCenter = this.heightMap.get(midX, prevMidY);
                    const curBotLeft = this.heightMap.get(x, nextY);
                    const prevXCenter = this.heightMap.get(prevMidX, midY);
                    const curLeftMid = (curTopLeft + curCenter + curBotLeft + prevXCenter) / 4.0 + (0, Utils_mjs_4.randomFloatRange)(-curHeight, curHeight);
                    const curTopMid = (curTopLeft + curCenter + curTopRight + prevYCenter) / 4.0 + (0, Utils_mjs_4.randomFloatRange)(-curHeight, curHeight);
                    this.setHeight(midX, y, curTopMid);
                    this.setHeight(x, midY, curLeftMid);
                }
            }
        }
    }
    exports.MidpointDispTerrain = MidpointDispTerrain;
});
define("src/TerrainSystem/TerrainRaycastResult", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TerrainRaycastResult = void 0;
    class TerrainRaycastResult {
        constructor() {
            this.vertexIndex = 0;
            this.distance = Number.MAX_VALUE;
            this.localNormal = new pc.Vec3(0, 1, 0);
            this.normal = new pc.Vec3(0, 1, 0);
            this.localPoint = new pc.Vec3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            this.point = new pc.Vec3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
        }
        clear() {
            this.vertexIndex = 0;
            this.distance = Number.MAX_VALUE;
            this.localNormal.set(0, 1, 0);
            this.normal.set(0, 1, 0);
            this.localPoint.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            this.point.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
        }
    }
    exports.TerrainRaycastResult = TerrainRaycastResult;
    exports.default = TerrainRaycastResult;
});
define("src/TerrainHelpers/TerrainRenderPreparer", ["require", "exports", "src/TerrainHelpers/TerrainPatchesShaderChunks"], function (require, exports, TerrainPatchesShaderChunks_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class TerrainRenderPreparer {
        get wireframe() { return this._wireframe; }
        set wireframe(v) {
            this._wireframe = v;
            this._updateMeshes();
        }
        get castShadow() { return this._castShadow; }
        set castShadow(v) {
            this._castShadow = v;
            this._updateMeshes();
        }
        get receiveShadow() { return this._receiveShadow; }
        set receiveShadow(v) {
            this._receiveShadow = v;
            this._updateMeshes();
        }
        constructor(patchesStore, options) {
            var _a, _b, _c;
            this.patchesStore = patchesStore;
            this._wireframe = (_a = options.wireframe) !== null && _a !== void 0 ? _a : false;
            this._castShadow = (_b = options.castShadow) !== null && _b !== void 0 ? _b : false;
            this._receiveShadow = (_c = options.receiveShadow) !== null && _c !== void 0 ? _c : false;
            this._hasUpdatedHeights = false;
        }
        _updateMeshes() {
            var _a;
            const customMeshInstance = this.patchesStore.customMeshInstance;
            if (customMeshInstance) {
                this._updateMesh(customMeshInstance);
            }
            for (const meshInstance of this.patchesStore.meshInstanceArray) {
                this._updateMesh(meshInstance);
            }
            (_a = this.patchesStore.instancing) === null || _a === void 0 ? void 0 : _a.forEach(item => {
                this._updateMesh(item.object);
            });
        }
        _updateMesh(meshInstance) {
            if (meshInstance) {
                meshInstance.mesh.primitive[0].type = this._wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                meshInstance.castShadow = this._castShadow;
                meshInstance.receiveShadow = this._receiveShadow;
            }
        }
        preparePatch(visible, baseIndex, baseVertex, count, patchX, patchZ, minX, minZ, size, lodInfo) {
            const terrain = this.patchesStore.terrain;
            const patchIndex = patchZ * terrain.numPatchesX + patchX;
            const buffer = this.patchesStore.bufferArray[patchIndex];
            const currHash = baseIndex / count;
            buffer.hash = currHash;
            buffer.visible = visible;
            buffer.indicesBaseIndex = baseIndex;
            buffer.indicesBaseVertex = baseVertex;
            buffer.indicesCount = count;
            buffer.lod = lodInfo;
            if (buffer.heightsUpdated) {
                buffer.heightsUpdated = false;
                buffer.heightsUpdatedThisFrame = visible;
                this._hasUpdatedHeights = true;
            }
            if (this.patchesStore.customForwardRenderer) {
                const primitive = this.patchesStore.customMeshInstance.mesh.primitiveChunks[0][patchIndex];
                primitive.enabled = visible;
                primitive.base = baseIndex;
                primitive.count = count;
                primitive.type = this._wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                primitive.attributes[TerrainPatchesShaderChunks_mjs_3.patchLodCoreParamName] = lodInfo.core;
            }
            else if (this.patchesStore.instancing) {
                if (visible) {
                    const inst = this.patchesStore.instancing.increment(lodInfo, buffer);
                    if (inst.count === 1 && inst.object) {
                        const meshInstance = inst.object;
                        const primitive = meshInstance.mesh.primitive[0];
                        meshInstance.visible = true;
                        meshInstance.visibleThisFrame = true;
                        meshInstance.castShadow = this._castShadow;
                        meshInstance.receiveShadow = this._receiveShadow;
                        primitive.type = this._wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                    }
                }
            }
            else {
                const meshInstance = this.patchesStore.getOrCreatePatchMesh(patchIndex);
                const mesh = meshInstance.mesh;
                const primitive = mesh.primitive[0];
                if (meshInstance) {
                    meshInstance.visible = visible;
                    meshInstance.visibleThisFrame = visible;
                    meshInstance.castShadow = this._castShadow;
                    meshInstance.receiveShadow = this._receiveShadow;
                }
                primitive.base = baseIndex;
                primitive.count = count;
                primitive.type = this._wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                meshInstance.setParameter(TerrainPatchesShaderChunks_mjs_3.patchLodCoreParamName, lodInfo.core);
            }
        }
        update(frustum) {
            // TODO: In theory we can control the quality of the model for shadows
            // TODO: Add support for Occlusion culling
            var _a, _b;
            this._hasUpdatedHeights = false;
            if (this.patchesStore.customForwardRenderer) {
                const customMeshInstance = this.patchesStore.customMeshInstance;
                if (customMeshInstance) {
                    customMeshInstance.visible = true;
                    customMeshInstance.castShadow = this._castShadow;
                    customMeshInstance.receiveShadow = this._receiveShadow;
                    const mesh = customMeshInstance.mesh;
                    const primitive = mesh.primitive[0];
                    primitive.type = this._wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                }
            }
            (_a = this.patchesStore.instancing) === null || _a === void 0 ? void 0 : _a.begin(false, false);
            this.patchesStore.startUpdate();
            this.patchesStore.terrain.eachPatches(this, frustum);
            this.patchesStore.endUpdate(this._hasUpdatedHeights);
            (_b = this.patchesStore.instancing) === null || _b === void 0 ? void 0 : _b.end();
        }
    }
    exports.default = TerrainRenderPreparer;
});
define("src/TerrainHelpers/Brush", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/TerrainHelpers/ColorPainterShaders", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.fragmentInvertShader = exports.fragmentShader = exports.factorMethod = exports.vertexShader = void 0;
    exports.vertexShader = `
    attribute vec3 aPosition;
    attribute vec2 aUv0;

    uniform mat4 matrix_model;
    uniform mat4 matrix_viewProjection;

    varying vec2 vUv0;

    void main(void)
    {
        vUv0 = aUv0;
        gl_Position = matrix_viewProjection * matrix_model * vec4(aPosition, 1.0);
    }
`;
    exports.factorMethod = `
    varying vec2 vUv0;

    uniform sampler2D uHeightMap;
    uniform float uBrushOpacity;
    uniform vec4 uBrushMask;

    float getFactor() {
        vec4 heightMap = texture2D(uHeightMap, vUv0);
        float height   = (heightMap.r + heightMap.g + heightMap.b) / 3.0 / heightMap.a;
        float factor   = height * uBrushOpacity;
        return factor;
    }
`;
    exports.fragmentShader = `
    ${exports.factorMethod}

    void main(void)
    {
        float factor = getFactor();
        vec4 color = vec4(uBrushMask * factor);

        gl_FragColor = color;
    }
`;
    exports.fragmentInvertShader = `
    ${exports.factorMethod}

    void main(void)
    {
        float levels = 4.0;
        float factor = getFactor();
        vec4 color   = vec4(factor);

        if (uBrushMask.r > 0.0) { color.r = 0.0; levels -= 1.0; }
        if (uBrushMask.g > 0.0) { color.g = 0.0; levels -= 1.0; }
        if (uBrushMask.b > 0.0) { color.b = 0.0; levels -= 1.0; }
        if (uBrushMask.a > 0.0) { color.a = 0.0; levels -= 1.0; }

        gl_FragColor = color / levels;
    }
`;
});
define("src/TerrainHelpers/ColorPainter", ["require", "exports", "src/TerrainHelpers/ColorPainterShaders", "src/Shared/Utils"], function (require, exports, ColorPainterShaders_mjs_1, Utils_mjs_5) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.painterLayerName = exports.painterCameraFar = void 0;
    exports.painterCameraFar = 10;
    exports.painterLayerName = 'TerrainEditor';
    class ColorPainter {
        get painting() { return this._painting; }
        get cameraFar() { return exports.painterCameraFar; }
        get background() { return this._buffer; }
        constructor(app, buffer) {
            this._painting = false;
            this._painterMask = new Float32Array(4);
            this._buffer = buffer;
            this._app = app;
            this._initCamera();
            this._initShaders();
            this._initMaterials();
            this._initEntities();
        }
        _initCamera() {
            const painterLayer = this._app.scene.layers.getLayerByName(exports.painterLayerName);
            this._painterRenderTarget = new pc.RenderTarget({
                colorBuffer: this._buffer,
                flipY: this._app.graphicsDevice.isWebGPU,
                depth: false,
            });
            this._painterCameraEntity = new pc.Entity('TerrainPainterCamera');
            this._painterCameraEntity.setLocalPosition(0, 0, exports.painterCameraFar);
            this._painterCameraEntity.lookAt(0, 0, 0);
            this._painterCameraEntity.addComponent('camera', {
                projection: pc.PROJECTION_ORTHOGRAPHIC,
                clearColorBuffer: false,
                clearDepthBuffer: false,
                priority: -1,
                layers: [painterLayer.id],
                nearClip: 0.1,
                farClip: exports.painterCameraFar * 2,
                renderTarget: this._painterRenderTarget,
            });
            this._app.root.addChild(this._painterCameraEntity);
            this._painterCameraEntity.enabled = false;
            this._painterCameraEntity.camera.frustumCulling = false;
            this._painterCameraEntity.camera.orthoHeight = exports.painterCameraFar;
        }
        _initEntities() {
            const painterLayer = this._app.scene.layers.getLayerByName(exports.painterLayerName);
            painterLayer.transparentSortMode = pc.SORTMODE_MANUAL;
            this._painterEntity = new pc.Entity('TerrainBrushPainter');
            this._painterEntity.addComponent('render', {
                type: 'plane',
                layers: [painterLayer.id],
                material: this._painterMaterial,
                castShadows: false,
                castShadowsLightmap: false,
                receiveShadows: false
            });
            this._painterInvertEntity = new pc.Entity('TerrainBrushPainterInvert');
            this._painterInvertEntity.addComponent('render', {
                type: 'plane',
                layers: [painterLayer.id],
                material: this._painterInvertMaterial,
                castShadows: false,
                castShadowsLightmap: false,
                receiveShadows: false,
            });
            this._painterEntity.render.meshInstances[0].drawOrder = 1;
            this._painterInvertEntity.render.meshInstances[0].drawOrder = 0;
            this._app.root.addChild(this._painterInvertEntity);
            this._app.root.addChild(this._painterEntity);
            this._painterInvertEntity.setLocalEulerAngles(90, 0, 0);
            this._painterEntity.setLocalEulerAngles(90, 0, 0);
            this._painterInvertEntity.enabled = false;
            this._painterEntity.enabled = false;
        }
        _initShaders() {
            const vertex = ColorPainterShaders_mjs_1.vertexShader;
            const fragment = (0, Utils_mjs_5.setPrecision)(this._app.graphicsDevice, ColorPainterShaders_mjs_1.fragmentShader);
            const fragmentInvert = (0, Utils_mjs_5.setPrecision)(this._app.graphicsDevice, ColorPainterShaders_mjs_1.fragmentInvertShader);
            if (pc.ShaderMaterial) {
                this._painterMaterial = new pc.ShaderMaterial({
                    uniqueName: 'PainterFragmentShader',
                    vertexGLSL: vertex,
                    fragmentGLSL: fragment,
                    attributes: {
                        aPosition: pc.SEMANTIC_POSITION,
                        aUv0: pc.SEMANTIC_TEXCOORD0
                    }
                });
                this._painterInvertMaterial = new pc.ShaderMaterial({
                    uniqueName: 'PainterInvertFragmentShader',
                    vertexGLSL: vertex,
                    fragmentGLSL: fragmentInvert,
                    attributes: {
                        aPosition: pc.SEMANTIC_POSITION,
                        aUv0: pc.SEMANTIC_TEXCOORD0
                    }
                });
                return;
            }
            this._painterShader = pc.createShaderFromCode(this._app.graphicsDevice, vertex, fragment, 'PainterFragmentShader', {
                aPosition: pc.SEMANTIC_POSITION,
                aUv0: pc.SEMANTIC_TEXCOORD0
            });
            this._painterInvertShader = pc.createShaderFromCode(this._app.graphicsDevice, vertex, fragmentInvert, 'PainterInvertFragmentShader', {
                aPosition: pc.SEMANTIC_POSITION,
                aUv0: pc.SEMANTIC_TEXCOORD0
            });
        }
        _initMaterials() {
            if (!pc.ShaderMaterial) {
                this._painterMaterial = new pc.Material();
                this._painterInvertMaterial = new pc.Material();
                /* @ts-ignore */
                this._painterMaterial.shader = this._painterShader;
                /* @ts-ignore */
                this._painterInvertMaterial.shader = this._painterInvertShader;
            }
            this._painterMaterial.name = 'BrushPainterMaterial';
            this._painterMaterial.blendType = pc.BLEND_ADDITIVE;
            this._painterMaterial.update();
            this._painterInvertMaterial.name = 'BrushPainterInvertMaterial';
            this._painterInvertMaterial.blendType = pc.BLEND_SUBTRACTIVE;
            this._painterInvertMaterial.update();
        }
        _updateRuntimeSettings(dt) {
            const originalOpacity = this._brushSettings.opacity;
            const opacity = originalOpacity;
            this._painterMaterial.setParameter('uBrushOpacity', opacity);
            this._painterInvertMaterial.setParameter('uBrushOpacity', opacity);
        }
        _updatePositionAndScale(x, y, scaleWidth, scaleHeight) {
            const far = this.cameraFar * 2;
            const ration = this.background.width / this.background.height;
            x = x * far * ration - this.cameraFar * ration;
            y = y * far - this.cameraFar;
            scaleWidth = scaleWidth * this.background.width / far / 2.5;
            scaleHeight = scaleHeight * this.background.height / far / 2.5;
            this._setScale(scaleWidth, scaleHeight);
            this._setPosition(x, y);
        }
        startPaint(dt, x, y, scaleWidth, scaleHeight) {
            this._updateRuntimeSettings(dt);
            this._updatePositionAndScale(x, y, scaleWidth, scaleHeight);
            this._painting = true;
            this._painterInvertEntity.enabled = true;
            this._painterEntity.enabled = true;
            this._painterCameraEntity.enabled = true;
        }
        stopPaint() {
            this._painting = false;
            this._painterInvertEntity.enabled = false;
            this._painterEntity.enabled = false;
            this._painterCameraEntity.enabled = false;
        }
        _setScale(x, y) {
            this._painterEntity.setLocalScale(x, 1, y);
            this._painterInvertEntity.setLocalScale(x, 1, y);
        }
        _setPosition(x, y) {
            this._painterEntity.setLocalPosition(x, y, 0);
            this._painterInvertEntity.setLocalPosition(x, y, 0);
        }
        updateSettings(brushSettings, activeLayer) {
            this._painterMask.fill(0);
            if (activeLayer > 0) {
                this._painterMask[activeLayer - 1] = 1;
            }
            const brushTexture = brushSettings.textures[brushSettings.active].resource;
            this._painterMaterial.setParameter('uBrushMask', this._painterMask);
            this._painterMaterial.setParameter('uHeightMap', brushTexture);
            this._painterInvertMaterial.setParameter('uBrushMask', this._painterMask);
            this._painterInvertMaterial.setParameter('uHeightMap', brushTexture);
            this._brushSettings = brushSettings;
        }
    }
    exports.default = ColorPainter;
});
define("src/Shared/EnumConverter", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.isNumeric = isNumeric;
    exports.mapTitleEnum = mapTitleEnum;
    exports.mapEnum = mapEnum;
    function isNumeric(value) {
        return /^-?\d+$/.test(value);
    }
    function mapTitleEnum(someEnum) {
        const result = [];
        for (let value in someEnum) {
            if (!someEnum.hasOwnProperty(value) ||
                isNumeric(value)) {
                continue;
            }
            const enumEntry = {};
            enumEntry[value] = someEnum[value];
            result.push(enumEntry);
        }
        return result;
    }
    function mapEnum(someEnum) {
        const result = [];
        for (let value in someEnum) {
            if (!someEnum.hasOwnProperty(value)) {
                continue;
            }
            const enumEntry = {};
            enumEntry[value] = someEnum[value];
            result.push(enumEntry);
        }
        return result;
    }
});
define("src/TerrainHelpers/Enums", ["require", "exports", "src/Shared/EnumConverter"], function (require, exports, EnumConverter_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.terrainHeightsCompressAlgoritm = exports.terrainHeightsCompressAlgoritmDefault = exports.terrainPatchSizeEnum = exports.terrainPatchSizeEnumDefault = exports.terrainSizeEnum = exports.terrainSizeEnumDefault = void 0;
    exports.terrainSizeEnumDefault = 513;
    exports.terrainSizeEnum = (0, EnumConverter_mjs_1.mapEnum)({
        '128': 129,
        '256': 257,
        '512': 513,
        '1024': 1025,
        '2048': 2049,
        '4096': 4097,
        '8192': 8193,
        '16384': 16385,
    });
    exports.terrainPatchSizeEnumDefault = 33;
    exports.terrainPatchSizeEnum = (0, EnumConverter_mjs_1.mapEnum)({
        '16': 17,
        '32': 33,
        '64': 65,
        '128': 129,
        '256': 257,
        '512': 513,
        '1024': 1025,
        '2048': 2049,
    });
    exports.terrainHeightsCompressAlgoritmDefault = 'none';
    exports.terrainHeightsCompressAlgoritm = (0, EnumConverter_mjs_1.mapEnum)({
        'None': 'none',
        'X2': 'x2',
        'X4': 'x4'
    });
});
define("src/TerrainSystem/Triangle", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Triangle = void 0;
    const tmpTriVecA = new pc.Vec3();
    const tmpTriVecB = new pc.Vec3();
    class Triangle extends pc.Tri {
        getNormal(rsh) {
            tmpTriVecA.sub2(this.v1, this.v0);
            tmpTriVecB.sub2(this.v2, this.v0);
            rsh.cross(tmpTriVecA, tmpTriVecB).normalize();
        }
    }
    exports.Triangle = Triangle;
    exports.default = Triangle;
});
define("src/TerrainSystem/HeightfieldShape", ["require", "exports", "src/TerrainSystem/TerrainRaycastResult", "src/TerrainSystem/Triangle"], function (require, exports, TerrainRaycastResult_mjs_1, Triangle_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.intersectsRayBox = intersectsRayBox;
    TerrainRaycastResult_mjs_1 = __importDefault(TerrainRaycastResult_mjs_1);
    Triangle_mjs_1 = __importDefault(Triangle_mjs_1);
    const infinite = 9999999;
    const modelTransform = new pc.Mat4();
    const tmpRay = new pc.Ray();
    const tmpRaycastVec = new pc.Vec3();
    const tmpPos1 = new pc.Vec3();
    const tmpPos2 = new pc.Vec3();
    const tmpPos3 = new pc.Vec3();
    const triangle = new Triangle_mjs_1.default();
    const debugTmpVec = new pc.Vec3();
    const debugTransform = new pc.Mat4();
    const debugPositions = new Array(16);
    let debugTransformIsIdentity = true;
    function debugDrawTriangleLines(tri, color = pc.Color.YELLOW) {
        var _a;
        /*
        [
            tri.v0.x, tri.v0.y, tri.v0.z, tri.v1.x, tri.v1.y, tri.v1.z,
            tri.v1.x, tri.v1.y, tri.v1.z, tri.v2.x, tri.v2.y, tri.v2.z,
            tri.v2.x, tri.v2.y, tri.v2.z, tri.v0.x, tri.v0.y, tri.v0.z,
        ], color, false);
        ]
        */
        debugTransform.transformPoint(tri.v0, debugTmpVec);
        debugPositions[0] = debugPositions[15] = debugTmpVec.x;
        debugPositions[1] = debugPositions[16] = debugTmpVec.y;
        debugPositions[2] = debugPositions[17] = debugTmpVec.z;
        debugTransform.transformPoint(tri.v1, debugTmpVec);
        debugPositions[3] = debugPositions[6] = debugTmpVec.x;
        debugPositions[4] = debugPositions[7] = debugTmpVec.y;
        debugPositions[5] = debugPositions[8] = debugTmpVec.z;
        debugTransform.transformPoint(tri.v2, debugTmpVec);
        debugPositions[9] = debugPositions[12] = debugTmpVec.x;
        debugPositions[10] = debugPositions[13] = debugTmpVec.y;
        debugPositions[11] = debugPositions[14] = debugTmpVec.z;
        (_a = pc.app) === null || _a === void 0 ? void 0 : _a.drawLineArrays(debugPositions, color, false);
    }
    function intersectsRayBox(aabb, ray) {
        const rayOrigin = ray.origin;
        const rayDirection = ray.direction;
        const minX = aabb.minX;
        const maxX = aabb.maxX;
        const minY = aabb.minY;
        const maxY = aabb.maxY;
        const minZ = aabb.minZ;
        const maxZ = aabb.maxZ;
        let tmin = (minX - rayOrigin.x) / rayDirection.x;
        let tmax = (maxX - rayOrigin.x) / rayDirection.x;
        if (tmin > tmax) {
            let temp = tmin;
            tmin = tmax;
            tmax = temp;
        }
        let tymin = (minY - rayOrigin.y) / rayDirection.y;
        let tymax = (maxY - rayOrigin.y) / rayDirection.y;
        if (tymin > tymax) {
            let temp = tymin;
            tymin = tymax;
            tymax = temp;
        }
        if ((tmin > tymax) || (tymin > tmax)) {
            return false;
        }
        if (tymin > tmin) {
            tmin = tymin;
        }
        if (tymax < tmax) {
            tmax = tymax;
        }
        let tzmin = (minZ - rayOrigin.z) / rayDirection.z;
        let tzmax = (maxZ - rayOrigin.z) / rayDirection.z;
        if (tzmin > tzmax) {
            let temp = tzmin;
            tzmin = tzmax;
            tzmax = temp;
        }
        if ((tmin > tzmax) || (tzmin > tmax)) {
            return false;
        }
        return true;
    }
    class HeightfieldShape {
        constructor(heightMap) {
            this._heightMap = heightMap;
            this._beginPos = new pc.Vec3();
            this._endPos = new pc.Vec3();
            this.updateBoundingBox();
        }
        updateBoundingBox() {
            const halfWidth = this._heightMap.width / 2;
            const halfDepth = this._heightMap.depth / 2;
            this._boundingBox = {
                minX: -halfWidth,
                minY: 0,
                minZ: -halfDepth,
                maxX: halfWidth,
                maxY: this._heightMap.maxHeight,
                maxZ: halfDepth,
            };
        }
        _triangleIntersectsRay(tri, ray, bestResult) {
            if (tri.intersectsRay(ray, tmpRaycastVec)) {
                const distance = tmpRaycastVec.distance(ray.origin);
                if (bestResult.distance > distance) {
                    bestResult.distance = distance;
                    tri.getNormal(bestResult.localNormal);
                    bestResult.normal.copy(bestResult.localNormal);
                    bestResult.localPoint.copy(tmpRaycastVec);
                    bestResult.point.copy(tmpRaycastVec);
                    debugDrawTriangleLines(tri, pc.Color.RED);
                    const distanceP0 = bestResult.point.distance(tri.v0);
                    const distanceP1 = bestResult.point.distance(tri.v1);
                    const distanceP2 = bestResult.point.distance(tri.v2);
                    if (distanceP0 > distanceP1) {
                        if (distanceP1 > distanceP2) {
                            bestResult.vertexIndex = tri.index2;
                        }
                        else {
                            bestResult.vertexIndex = tri.index1;
                        }
                    }
                    else {
                        if (distanceP0 > distanceP2) {
                            bestResult.vertexIndex = tri.index2;
                        }
                        else {
                            bestResult.vertexIndex = tri.index0;
                        }
                    }
                    return true;
                }
            }
            //debugDrawTriangleLines(tri);
            return false;
        }
        _assignPosition(index, buf) {
            const x = index % this._heightMap.width | 0;
            const z = index / this._heightMap.width | 0;
            buf.x = (-this._heightMap.width / 2) + x;
            buf.y = this._heightMap.get(x, z);
            buf.z = (-this._heightMap.depth / 2) + z;
        }
        _quadAction(rs, ray, result) {
            const x = rs.prevX;
            const z = rs.prevZ;
            if (x < 0 || z < 0 || x >= this._heightMap.width - 1 || z >= this._heightMap.depth - 1) {
                return false;
            }
            const xFan2 = x % 2 === 0;
            const zFan2 = z % 2 === 0;
            let index0, index1, index2;
            {
                if (xFan2 !== zFan2) {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 0) * this._heightMap.width + (x + 1);
                }
                else {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 1);
                    index2 = (z + 0) * this._heightMap.width + (x + 1);
                }
                this._assignPosition(index0, tmpPos1);
                this._assignPosition(index1, tmpPos2);
                this._assignPosition(index2, tmpPos3);
                triangle.index0 = index0;
                triangle.index1 = index1;
                triangle.index2 = index2;
                triangle.set(tmpPos1, tmpPos2, tmpPos3);
            }
            if (this._triangleIntersectsRay(triangle, ray, result)) {
                return true;
            }
            {
                if (xFan2 !== zFan2) {
                    index0 = (z + 0) * this._heightMap.width + (x + 1);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 1) * this._heightMap.width + (x + 1);
                }
                else {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 1) * this._heightMap.width + (x + 1);
                }
                this._assignPosition(index0, tmpPos1);
                this._assignPosition(index1, tmpPos2);
                this._assignPosition(index2, tmpPos3);
                triangle.index0 = index0;
                triangle.index1 = index1;
                triangle.index2 = index2;
                triangle.set(tmpPos1, tmpPos2, tmpPos3);
            }
            if (this._triangleIntersectsRay(triangle, ray, result)) {
                return true;
            }
            return false;
        }
        _intersectsRay(localRay, result = new TerrainRaycastResult_mjs_1.default()) {
            if (!intersectsRayBox(this._boundingBox, localRay)) {
                return false;
            }
            this._beginPos.copy(localRay.origin);
            this._beginPos.x += this._boundingBox.maxX;
            this._beginPos.z += this._boundingBox.maxZ;
            this._endPos.copy(localRay.direction).add(this._beginPos);
            let rayDirectionFlatX = this._endPos.x - this._beginPos.x;
            let rayDirectionFlatZ = this._endPos.z - this._beginPos.z;
            const maxDistanceFlat = Math.sqrt(Math.pow(rayDirectionFlatX, 2) + Math.pow(rayDirectionFlatZ, 2));
            if (maxDistanceFlat < 0.0001) {
                // Consider the ray vertical
                rayDirectionFlatX = 0;
                rayDirectionFlatZ = 0;
            }
            else {
                rayDirectionFlatX /= maxDistanceFlat;
                rayDirectionFlatZ /= maxDistanceFlat;
            }
            const xiStep = rayDirectionFlatX > 0 ? 1 : rayDirectionFlatX < 0 ? -1 : 0;
            const ziStep = rayDirectionFlatZ > 0 ? 1 : rayDirectionFlatZ < 0 ? -1 : 0;
            const paramDeltaX = xiStep !== 0 ? 1 / Math.abs(rayDirectionFlatX) : infinite;
            const paramDeltaZ = ziStep !== 0 ? 1 / Math.abs(rayDirectionFlatZ) : infinite;
            let paramCrossX;
            let paramCrossZ;
            if (xiStep !== 0) {
                paramCrossX = xiStep === 1
                    ? (Math.ceil(this._beginPos.x) - this._beginPos.x) * paramDeltaX
                    : (this._beginPos.x - Math.floor(this._beginPos.x)) * paramDeltaX;
            }
            else {
                paramCrossX = infinite; // Will never cross on X
            }
            if (ziStep !== 0) {
                paramCrossZ = ziStep === 1
                    ? (Math.ceil(this._beginPos.z) - this._beginPos.z) * paramDeltaZ
                    : (this._beginPos.z - Math.floor(this._beginPos.z)) * paramDeltaZ;
            }
            else {
                paramCrossZ = infinite; // Will never cross on Z
            }
            const rs = {
                x: this._beginPos.x | 0,
                z: this._beginPos.z | 0,
                param: 0,
                prevX: 0,
                prevZ: 0,
                prevParam: 0,
                maxDistanceFlat: maxDistanceFlat,
            };
            // Workaround cases where the ray starts at an integer position
            if (paramCrossX === 0.0) {
                paramCrossX += paramDeltaX;
                // If going backwards, we should ignore the position we would get by the above flooring,
                // because the ray is not heading in that direction
                if (xiStep === -1) {
                    rs.x -= 1;
                }
            }
            if (paramCrossZ === 0.0) {
                paramCrossZ += paramDeltaZ;
                if (ziStep === -1)
                    rs.z -= 1;
            }
            let hasHit = false;
            while (!hasHit) {
                rs.prevX = rs.x;
                rs.prevZ = rs.z;
                rs.prevParam = rs.param;
                if (paramCrossX < paramCrossZ) {
                    // X lane
                    rs.x += xiStep;
                    // Assign before advancing the param,
                    // to be in sync with the initialization step
                    rs.param = paramCrossX;
                    paramCrossX += paramDeltaX;
                }
                else {
                    // Z lane
                    rs.z += ziStep;
                    rs.param = paramCrossZ;
                    paramCrossZ += paramDeltaZ;
                }
                if (this._quadAction(rs, localRay, result)) {
                    hasHit = true;
                }
                if (rs.param > rs.maxDistanceFlat) {
                    rs.param = rs.maxDistanceFlat;
                    break;
                }
            }
            return hasHit;
        }
        intersectsRay(worldTranform, ray, result = new TerrainRaycastResult_mjs_1.default()) {
            if (worldTranform) {
                modelTransform.copy(worldTranform).invert();
                modelTransform.transformPoint(ray.origin, tmpRay.origin);
                modelTransform.transformVector(ray.direction, tmpRay.direction);
                debugTransform.copy(worldTranform);
                debugTransformIsIdentity = false;
            }
            else if (!debugTransformIsIdentity) {
                debugTransform.setIdentity();
                debugTransformIsIdentity = true;
            }
            const hit = this._intersectsRay(worldTranform ? tmpRay : ray, result);
            if (hit && worldTranform) {
                // update world point and normal, but save local
                worldTranform.transformPoint(result.point, result.point);
                worldTranform.transformVector(result.normal, result.normal);
            }
            return !!hit;
        }
    }
    exports.default = HeightfieldShape;
});
define("src/TerrainSystem/PatchedHeightMap", ["require", "exports", "src/TerrainSystem/AbsPatchedHeightMap"], function (require, exports, AbsPatchedHeightMap_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchedHeightMap = void 0;
    AbsPatchedHeightMap_mjs_3 = __importStar(AbsPatchedHeightMap_mjs_3);
    class PatchedHeightMap extends AbsPatchedHeightMap_mjs_3.default {
        static createBuffer(width, depth, chunkSize) {
            const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
            const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
            const chunkArrSize = Math.pow(chunkSize, 2);
            const chunkCount = numChunksX * numChunksZ;
            return new Float32Array(chunkArrSize * chunkCount);
        }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, buffer) {
            const validDataChunkSize = (0, AbsPatchedHeightMap_mjs_3.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
            const tmpBuffer = buffer !== null && buffer !== void 0 ? buffer : PatchedHeightMap.createBuffer(width, depth, validDataChunkSize);
            super(width, depth, patchSize, dataChunkSize, maxHeight, tmpBuffer, 1, 0);
        }
    }
    exports.PatchedHeightMap = PatchedHeightMap;
    exports.default = PatchedHeightMap;
});
define("src/Shared/Frustum", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Frustum = void 0;
    const tmpVec = new pc.Vec3();
    const tmpRad = new pc.Vec3();
    const tmpSphere = new pc.BoundingSphere();
    class Frustum {
        get margin() { return this._margin; }
        set margin(value) { this._margin = value; }
        get frustum() { return this._frustum; }
        set frustum(value) { this._frustum = value; }
        get transform() { return this._mat; }
        set transform(value) {
            this._mat.copy(value);
            this._mat.getScale(this._scale);
        }
        constructor() {
            this._margin = 1;
            this._mat = new pc.Mat4();
            this._scale = new pc.Vec3();
        }
        containsSphere(localX, localY, localZ, radius) {
            tmpVec.set(localX, localY, localZ);
            tmpRad.copy(this._scale).mulScalar(radius);
            this._mat.transformPoint(tmpVec, tmpVec);
            // @ts-ignore [PLAYCANVAS:DOC]: center private in v2
            tmpSphere.center = tmpVec;
            tmpSphere.radius = tmpRad.distance(pc.Vec3.ZERO) * this._margin;
            return this._frustum.containsSphere(tmpSphere) > 0;
        }
    }
    exports.Frustum = Frustum;
});
define("src/Scripts/Terrain", ["require", "exports", "src/Shared/Debug", "src/TerrainSystem/MidpointDispTerrain", "src/TerrainSystem/TerrainRaycastResult", "src/TerrainSystem/HeightMap", "src/TerrainHelpers/TerrainRenderPreparer", "src/TerrainHelpers/ColorPainter", "src/TerrainHelpers/TerrainPatches", "src/TerrainHelpers/Enums", "src/TerrainHelpers/TerrainPatchesShaderChunks", "src/TerrainSystem/HeightfieldShape", "src/TerrainSystem/PatchedHeightMap", "src/TerrainSystem/CompressedPatchedHeightMap", "src/Shared/Frustum", "src/Shared/EnumConverter", "src/AmmoIntegration/AmmoIntegration", "src/TerrainHelpers/TerrainPatchesInstancing", "src/TerrainHelpers/TerrainPatchesCombineInstancing"], function (require, exports, Debug_mjs_1, MidpointDispTerrain_mjs_1, TerrainRaycastResult_mjs_2, HeightMap_mjs_3, TerrainRenderPreparer_mjs_1, ColorPainter_mjs_1, TerrainPatches_mjs_1, Enums_mjs_1, TerrainPatchesShaderChunks_mjs_4, HeightfieldShape_mjs_1, PatchedHeightMap_mjs_1, CompressedPatchedHeightMap_mjs_2, Frustum_mjs_1, EnumConverter_mjs_2, AmmoIntegration_mjs_1, TerrainPatchesInstancing_mjs_2, TerrainPatchesCombineInstancing_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.bigTerrainEditorScriptName = exports.terrainScriptName = exports.Terrain = exports.RenderMode = void 0;
    TerrainRaycastResult_mjs_2 = __importDefault(TerrainRaycastResult_mjs_2);
    HeightMap_mjs_3 = __importDefault(HeightMap_mjs_3);
    TerrainRenderPreparer_mjs_1 = __importDefault(TerrainRenderPreparer_mjs_1);
    ColorPainter_mjs_1 = __importDefault(ColorPainter_mjs_1);
    TerrainPatches_mjs_1 = __importDefault(TerrainPatches_mjs_1);
    HeightfieldShape_mjs_1 = __importDefault(HeightfieldShape_mjs_1);
    PatchedHeightMap_mjs_1 = __importDefault(PatchedHeightMap_mjs_1);
    CompressedPatchedHeightMap_mjs_2 = __importDefault(CompressedPatchedHeightMap_mjs_2);
    const brushMinSize = 2;
    const brushMaxSize = 250;
    const tmpMat = new pc.Mat4();
    const terrainLocalVertexPos = new pc.Vec3();
    const heightMapExt = '.hm';
    var RenderMode;
    (function (RenderMode) {
        RenderMode[RenderMode["Standard"] = 1] = "Standard";
        RenderMode[RenderMode["InstancingAccelerator"] = 2] = "InstancingAccelerator";
        RenderMode[RenderMode["CombineInstancingAccelerator"] = 3] = "CombineInstancingAccelerator";
        RenderMode[RenderMode["CustomForwardRenderer"] = 4] = "CustomForwardRenderer";
    })(RenderMode || (exports.RenderMode = RenderMode = {}));
    class Terrain extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this._lock = 0;
            this._localCameraPosition = new pc.Vec3();
            this._roughness = 1.0;
            this._rayStart = new pc.Vec3();
            this._rayEnd = new pc.Vec3();
            this._rayDirection = new pc.Vec3();
            this._ray = new pc.Ray();
            this._lastLodGridUpdate = 0;
            this._brushSizeStep = 1;
            this._brushOpacityStep = 0.01;
            this._intersectsRayResult = false;
            this._keyAddLock = true;
            this._keySubLock = true;
        }
        get shape() { return this._heightFieldShape; }
        get object() { return this._terrain; }
        get patches() { return this._patchesStore; }
        get renderPreparer() { return this._renderPreparer; }
        get lock() { return this._lock; }
        addLock() {
            this._lock++;
        }
        freeLock() {
            this._lock--;
        }
        postInitialize() {
            this._initializeMouse();
            this._initializeKeyboard();
            this._initBrush();
            this._initTerrain();
            this._createTerrainMaterial();
            this._updateTerrainMaterialParameters();
            this._updateLayers();
            this._updateHeightMapFromAttr();
            this._updateBrush();
            this._updatePainterMaterial();
            this._updateMesh();
            this.on('attr:renderMode', () => {
                this._renderPreparer.patchesStore.customForwardRenderer = this.renderMode === RenderMode.CustomForwardRenderer;
                this._renderPreparer.patchesStore.setMaterial(this._material);
                this._renderPreparer.patchesStore.setInstancing(this.renderMode === RenderMode.InstancingAccelerator ? new TerrainPatchesInstancing_mjs_2.TerrainPathcesInstancing() :
                    this.renderMode === RenderMode.CombineInstancingAccelerator ? new TerrainPatchesCombineInstancing_mjs_2.TerrainPathcesCombineInstancing() :
                        undefined);
            });
            this.on('attr:wireframe', () => { this._renderPreparer.wireframe = this.wireframe; });
            this.on('attr:castShadow', () => { this._renderPreparer.castShadow = this.castShadow; });
            this.on('attr:receiveShadow', () => { this._renderPreparer.receiveShadow = this.receiveShadow; });
            this.on('attr:activeLayer', () => {
                this._updatePainterMaterial();
            });
            this.on('attr:layers', () => {
                this._updateLayers();
            });
            this.on('attr:brush', () => {
                this._updateBrush();
                this._updatePainterMaterial();
            });
            this.on('attr:height', () => {
                this._terrain.setMaxHeight(this.height);
                this._updateTerrainMaterialParameters();
            });
            this.on('attr:zFar', () => {
                this._terrain.setZFar(this.zFar);
            });
        }
        _initBrush() {
            const splatMap = this.painterSettings.splatMap.resource;
            this._brushHeightMap = new HeightMap_mjs_3.default(256, 256, 100);
            this._colorPainter = new ColorPainter_mjs_1.default(this.app, splatMap);
        }
        _updatePainterMaterial() {
            this._colorPainter.updateSettings(this.brush, this.activeLayer);
        }
        _updateBrush() {
            this._brushSize = this.brush.size | 0;
            this._brushOpacity = this.brush.opacity;
            const activeBrush = this.brush.active | 0;
            if (activeBrush === this._activeBrush) {
                return;
            }
            if (!this.brush.textures[activeBrush]) {
                console.error('Brush image unset.');
                return;
            }
            const brushTexture = this.brush.textures[activeBrush].resource;
            const brushImg = brushTexture.getSource();
            if (!brushImg) {
                console.error('Brush image unset.');
                return;
            }
            this._activeBrush = activeBrush;
            this._brushHeightMap.fromImage(brushImg);
            this._brushHeightMap.smooth(1, 1);
            console.log(this._brushHeightMap);
        }
        _initHeightMapBuffer(chunkSize) {
            // TODO: Move to terrain collider
            // TODO: Ammo js integration
            let buffer = undefined;
            if (typeof Ammo !== 'undefined') {
                buffer = (0, AmmoIntegration_mjs_1.getBuffer)(this.width, this.depth, this.patchSize, chunkSize, this.compressAlgoritm);
                const ht = this.compressAlgoritm === 'none' ? 0 :
                    this.compressAlgoritm === 'x2' ? 1 :
                        2;
                const hm = new Ammo.btAlexTerrainPatchedHeightMap(this.width, this.depth, this.patchSize, chunkSize, 0, this.height, ht, buffer.byteOffset);
                const shape = new Ammo.btAlexHeightfieldTerrainShape(hm, false);
                const groundTransform = new Ammo.btTransform();
                groundTransform.setIdentity();
                groundTransform.setOrigin(new Ammo.btVector3(0, this.height / 2, 0));
                const groundMass = 0;
                const groundLocalInertia = new Ammo.btVector3(0, 0, 0);
                const groundMotionState = new Ammo.btDefaultMotionState(groundTransform);
                const groundBody = new Ammo.btRigidBody(new Ammo.btRigidBodyConstructionInfo(groundMass, groundMotionState, shape, groundLocalInertia));
                this.app.systems.rigidbody.dynamicsWorld.addRigidBody(groundBody);
            }
            return buffer;
        }
        _initTerrain() {
            const tmpChunkSize = this.patchSize * 2 - 1; // 257, 513, ...
            const chunkSize = Math.min(this.width, this.depth, tmpChunkSize);
            const buffer = this._initHeightMapBuffer(chunkSize);
            const heightMap = this.compressAlgoritm !== 'none'
                ? new CompressedPatchedHeightMap_mjs_2.default(this.width, this.depth, this.patchSize, chunkSize, this.height, this.compressAlgoritm, buffer)
                : new PatchedHeightMap_mjs_1.default(this.width, this.depth, this.patchSize, chunkSize, this.height, buffer);
            this._terrain = new MidpointDispTerrain_mjs_1.MidpointDispTerrain(heightMap, this.zFar);
            this._heightFieldShape = new HeightfieldShape_mjs_1.default(heightMap);
            this._raycastResult = new TerrainRaycastResult_mjs_2.default();
            this._frustum = new Frustum_mjs_1.Frustum();
            this._patchesStore = new TerrainPatches_mjs_1.default(this._terrain);
            this._renderPreparer = new TerrainRenderPreparer_mjs_1.default(this._patchesStore, {
                wireframe: this.wireframe,
                castShadow: this.castShadow,
                receiveShadow: this.receiveShadow,
            });
            console.log(this._terrain, this._heightFieldShape, this._renderPreparer);
        }
        _createTerrainMaterial() {
            this._material = TerrainPatches_mjs_1.default.createMaterial();
        }
        _updateTerrainMaterialParameters() {
            this._material.setParameter(TerrainPatchesShaderChunks_mjs_4.terrainSplatMapParamName, this._colorPainter.background);
            this._material.setParameter(TerrainPatchesShaderChunks_mjs_4.terrainMaxHeightParamName, this._terrain.maxHeight);
        }
        _updateLayers() {
            var _a;
            // TODO
            const maxCount = 5;
            const width = 1024;
            const height = 1024;
            let length = 0;
            let flags = [];
            let scales = [];
            let offsets = [];
            let diffuses = [];
            let normals = [];
            for (let i = 0; i < maxCount; i++) {
                let flag = 0;
                if (i < this.layers.length) {
                    const layer = this.layers[i];
                    const diffuse = layer.diffuse;
                    const normalMap = layer.normalMap;
                    if (diffuse) {
                        const texture = diffuse.resource;
                        flag++;
                        length++;
                        diffuses.push(texture.getSource());
                        scales.push(layer.size.x, layer.size.y);
                        offsets.push(layer.offset.x, layer.offset.y);
                        if (normalMap) {
                            flag++;
                            normals.push(normalMap.resource.getSource());
                        }
                    }
                }
                flags.push(flag);
            }
            (_a = this._layersDiffuse) === null || _a === void 0 ? void 0 : _a.destroy();
            //this._layersDiffuse = this.layers[0].diffuse.resource as pcx.Texture;
            this._layersDiffuse = new pc.Texture(this.app.graphicsDevice, {
                name: 'terrainLayersDiffuse',
                format: pc.PIXELFORMAT_RGBA8,
                width: width,
                height: height,
                arrayLength: length,
                flipY: this.app.graphicsDevice.isWebGPU,
                //magFilter: pc.FILTER_LINEAR,
                //minFilter: pc.FILTER_LINEAR_MIPMAP_LINEAR,
                mipmaps: true,
                addressU: pc.ADDRESS_REPEAT,
                addressV: pc.ADDRESS_REPEAT,
                addressW: pc.ADDRESS_CLAMP_TO_EDGE,
                levels: [diffuses]
            });
            this._layersDiffuse.upload();
            console.log(this._layersDiffuse);
            this._material.setParameter(`uTerrainLayersCount`, length);
            this._material.setParameter(`uTerrainLayersDiffuse`, this._layersDiffuse);
            this._material.setParameter(`uTerrainLayersFlags[0]`, flags);
            this._material.setParameter(`uTerrainLayersScale[0]`, scales);
            this._material.setParameter(`uTerrainLayersOffset[0]`, offsets);
        }
        _updateMesh() {
            this._renderPreparer.patchesStore.customForwardRenderer = this.renderMode === RenderMode.CustomForwardRenderer;
            this._renderPreparer.patchesStore.setInstancing(this.renderMode === RenderMode.InstancingAccelerator ? new TerrainPatchesInstancing_mjs_2.TerrainPathcesInstancing() :
                this.renderMode === RenderMode.CombineInstancingAccelerator ? new TerrainPatchesCombineInstancing_mjs_2.TerrainPathcesCombineInstancing() :
                    undefined);
            this._renderPreparer.patchesStore.init(this.app, this.entity, this._material);
        }
        _initializeMouse() {
            var _a, _b;
            (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.on(pc.EVENT_MOUSEMOVE, this._onMouseMove, this);
            (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.on(pc.EVENT_MOUSEWHEEL, this._onMouseWheel, this);
            this.on('destroy', () => {
                var _a, _b;
                (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.off(pc.EVENT_MOUSEMOVE, this._onMouseMove, this);
                (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.off(pc.EVENT_MOUSEWHEEL, this._onMouseWheel, this);
            });
        }
        _onMouseMove(event) {
            this._lastMouseMoveEvent = event;
        }
        _onMouseWheel(event) {
            const candidate = this._brushSize + event.wheelDelta * this._brushSizeStep;
            this._brushSize = Math.min(Math.max(candidate, brushMinSize), brushMaxSize);
        }
        _initializeKeyboard() {
            var _a, _b;
            (_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.on(pc.EVENT_KEYDOWN, this._onKeyboardDown, this);
            (_b = this.app.keyboard) === null || _b === void 0 ? void 0 : _b.on(pc.EVENT_KEYUP, this._onKeyboardUp, this);
            this.on('destroy', () => {
                var _a, _b;
                (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.off(pc.EVENT_KEYDOWN, this._onKeyboardDown, this);
                (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.off(pc.EVENT_KEYUP, this._onKeyboardUp, this);
            });
        }
        _onKeyboardDown(event) {
            if (this._keyAddLock === false && event.key === pc.KEY_ADD) {
                this._keyAddLock = true;
                this._brushOpacity = Math.max(this._brushOpacity + this._brushOpacityStep, 0);
            }
            if (this._keySubLock === false && event.key === pc.KEY_SUBTRACT) {
                this._keySubLock = true;
                this._brushOpacity = Math.min(this._brushOpacity - this._brushOpacityStep, 1);
            }
        }
        _onKeyboardUp(event) {
            if (event.key === pc.KEY_ADD) {
                this._keyAddLock = false;
            }
            else if (event.key === pc.KEY_SUBTRACT) {
                this._keySubLock = false;
            }
        }
        _updateHeightMapFromAttr() {
            return __awaiter(this, void 0, void 0, function* () {
                if (this.heightMap.file) {
                    if (!this.heightMap.file.resource) {
                        console.warn('Height map file unset.');
                        return;
                    }
                    const data = this.heightMap.file.resource;
                    yield this._terrain.loadHeightMapFromFile(data, {
                        adaptiveMaxHeight: true,
                        adaptiveWidthAndDepth: true,
                    });
                }
                else {
                    const texture = this.heightMap.texture;
                    if (!texture) {
                        console.warn('Height map image unset.');
                        return;
                    }
                    const resource = texture.resource;
                    const img = resource.getSource();
                    if (!img) {
                        console.warn('Height map image unset.');
                        return;
                    }
                    this._terrain.loadHeightMapFromImg(img, this.heightMap.smoothFactor, this.heightMap.smoothRadius);
                    // TODO: clear heightmap
                    resource.destroy();
                }
                this._renderPreparer.patchesStore.updateAabb();
                this._renderPreparer.patchesStore.updateHeights({
                    minX: 0,
                    minZ: 0,
                    maxX: this.width,
                    maxZ: this.depth
                });
            });
        }
        _saveHeightMapToImg() {
            const base64 = this._terrain.heightMap.toImage();
            const image = new Image();
            image.src = base64;
            const w = window.open(undefined, '_blank');
            w.document.write(image.outerHTML);
        }
        _saveHeightMapToFile() {
            return __awaiter(this, void 0, void 0, function* () {
                const blob = yield this._terrain.heightMap.toFile();
                const blobUrl = URL.createObjectURL(blob);
                const a = document.createElement("a");
                const timestamp = new Date();
                document.body.appendChild(a);
                a.href = blobUrl;
                a.download = `hm_${+timestamp}${heightMapExt}`;
                a.click();
                URL.revokeObjectURL(blobUrl);
            });
        }
        update(dt) {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            if (this._colorPainter.painting) {
                this._colorPainter.stopPaint();
            }
            if (this.autoRender &&
                this.cameraEntity &&
                this.cameraEntity.camera) {
                const camera = this.cameraEntity.camera;
                const mat = this.entity.getWorldTransform();
                const scale = mat.getScale();
                if (this._lastMouseMoveEvent) {
                    let hasChanges = false;
                    camera.screenToWorld(this._lastMouseMoveEvent.x, this._lastMouseMoveEvent.y, camera.nearClip, this._rayStart);
                    camera.screenToWorld(this._lastMouseMoveEvent.x, this._lastMouseMoveEvent.y, camera.farClip, this._rayEnd);
                    this._rayDirection.sub2(this._rayEnd, this._rayStart);
                    const changeRay = !this._ray.origin.equals(this._rayStart) || !this._ray.direction.equals(this._rayDirection);
                    if (changeRay) {
                        this._ray.set(this._rayStart, this._rayDirection);
                        this._raycastResult.clear();
                        this._intersectsRayResult = this._heightFieldShape.intersectsRay(mat, this._ray, this._raycastResult);
                    }
                    if (this._intersectsRayResult) {
                        const brushSizeX = this._brushSize / scale.x | 0;
                        const brushSizeZ = this._brushSize / scale.z | 0;
                        this._terrain.patchVertices.getPosition(this._raycastResult.vertexIndex, terrainLocalVertexPos);
                        if ((_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.wasPressed(pc.KEY_I)) {
                            console.log(this._raycastResult, this._localCameraPosition, terrainLocalVertexPos);
                        }
                        (0, Debug_mjs_1.drawPoint)({ center: this._raycastResult.point, radius: this._brushSize, numSegments: 10, depthTest: true, color: pc.Color.GRAY });
                        (0, Debug_mjs_1.drawDirectionVector)(this._raycastResult.point, this._raycastResult.normal, pc.Color.MAGENTA);
                        if (this._lock < 1 &&
                            ((_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.isPressed(pc.MOUSEBUTTON_LEFT))) {
                            if (this.painting) {
                                const width = this._terrain.width - 1;
                                const depth = this._terrain.depth - 1;
                                const x = terrainLocalVertexPos.x / width;
                                const y = terrainLocalVertexPos.z / depth;
                                const scaleW = brushSizeX / width;
                                const scaleH = brushSizeZ / depth;
                                this._colorPainter.startPaint(dt, x, y, scaleW, scaleH);
                            }
                            else {
                                const average = (brushSizeX + brushSizeZ) / 2;
                                const centerX = terrainLocalVertexPos.x | 0;
                                const centerZ = terrainLocalVertexPos.z | 0;
                                const zone = {
                                    minX: centerX - brushSizeX,
                                    maxX: centerX + brushSizeX + 1,
                                    minZ: centerZ - brushSizeZ,
                                    maxZ: centerZ + brushSizeZ + 1,
                                };
                                if ((_c = this.app.keyboard) === null || _c === void 0 ? void 0 : _c.isPressed(pc.KEY_ALT)) {
                                    this._terrain.smoothHeightsZone(zone, average * this._brushOpacity * dt / 10, 1);
                                }
                                else {
                                    const negative = !!((_d = this.app.keyboard) === null || _d === void 0 ? void 0 : _d.isPressed(pc.KEY_CONTROL));
                                    const appendValue = (negative ? -average : average) * this._brushOpacity * dt / 10;
                                    this._terrain.appendHeightMap(this._brushHeightMap, appendValue, zone);
                                }
                                if ((_e = this.app.keyboard) === null || _e === void 0 ? void 0 : _e.wasPressed(pc.KEY_I)) {
                                    console.log(zone);
                                }
                                this._terrain.recalculateMinMax(zone);
                                this._renderPreparer.patchesStore.updateHeights(zone);
                                hasChanges = true;
                            }
                        }
                    }
                }
                tmpMat.invert(mat);
                tmpMat.transformPoint(camera.entity.getPosition(), this._localCameraPosition);
                this._frustum.frustum = camera.frustum;
                this._frustum.transform = mat;
                this._terrain.updateLods(this._localCameraPosition, this.lodByYPos, true);
                this._renderPreparer.update(this._frustum);
            }
            if ((_f = this.app.keyboard) === null || _f === void 0 ? void 0 : _f.wasPressed(pc.KEY_L)) {
                this._terrain.printLodMap();
            }
            if ((_g = this.app.keyboard) === null || _g === void 0 ? void 0 : _g.wasPressed(pc.KEY_P)) {
                this._saveHeightMapToImg();
            }
            if ((_h = this.app.keyboard) === null || _h === void 0 ? void 0 : _h.wasPressed(pc.KEY_O)) {
                this._saveHeightMapToFile();
            }
            // Debug
            //this.app.drawTexture( 0.5, -0.6, 0.5, 0.3, this.painterSettings.splatMap.resource, undefined as any);
        }
    }
    exports.Terrain = Terrain;
    exports.default = Terrain;
    exports.terrainScriptName = "Terrain";
    exports.bigTerrainEditorScriptName = "bigTerrainEditor";
    pc.registerScript(Terrain, exports.terrainScriptName);
    pc.registerScript(Terrain, exports.bigTerrainEditorScriptName);
    Terrain.attributes.add("renderMode", { type: "number", enum: (0, EnumConverter_mjs_2.mapTitleEnum)(RenderMode), default: RenderMode.Standard, });
    Terrain.attributes.add("castShadow", { type: "boolean", default: true, });
    Terrain.attributes.add("receiveShadow", { type: "boolean", default: true, });
    Terrain.attributes.add("lodByYPos", { type: "boolean", default: true, });
    Terrain.attributes.add("zFar", { type: "number", default: 5000, min: 1, step: 1, precision: 0, });
    Terrain.attributes.add("width", { type: "number", enum: Enums_mjs_1.terrainSizeEnum, default: Enums_mjs_1.terrainSizeEnumDefault, });
    Terrain.attributes.add("depth", { type: "number", enum: Enums_mjs_1.terrainSizeEnum, default: Enums_mjs_1.terrainSizeEnumDefault, });
    Terrain.attributes.add("patchSize", { type: "number", enum: Enums_mjs_1.terrainPatchSizeEnum, default: Enums_mjs_1.terrainPatchSizeEnumDefault, });
    Terrain.attributes.add("height", { type: "number", default: 10, min: 1, });
    Terrain.attributes.add("compressAlgoritm", { type: "string", enum: Enums_mjs_1.terrainHeightsCompressAlgoritm, default: Enums_mjs_1.terrainHeightsCompressAlgoritmDefault, });
    Terrain.attributes.add("layer", { type: "string", default: 'TerrainEditor', });
    Terrain.attributes.add("cameraEntity", { type: "entity" });
    Terrain.attributes.add("autoRender", { type: "boolean", default: true, });
    Terrain.attributes.add("painting", { type: "boolean", default: false, });
    Terrain.attributes.add("wireframe", { type: "boolean", default: false, });
    Terrain.attributes.add("heightMap", {
        type: 'json',
        schema: [
            {
                name: 'file',
                type: 'asset',
                assetType: 'binary',
            },
            {
                name: 'texture',
                type: "asset",
                assetType: 'texture',
            },
            {
                name: 'smoothFactor',
                description: `
                To what extent neighbors influence the new height:
                Value of 0 will ignore neighbors (no smoothing).
                Value of 1 will ignore the node old height.
            `,
                type: "number",
                default: 1,
                min: 0,
                max: 1,
            },
            {
                name: 'smoothRadius',
                description: `The radius of factor smooth.`,
                type: "number",
                default: 1,
                step: 1,
                min: 1,
            }
        ]
    });
    Terrain.attributes.add("brush", {
        type: "json",
        schema: [
            {
                name: "active",
                description: "The brush texture index.",
                type: "number",
                default: 0,
                min: 0,
                step: 1,
                precision: 0,
            },
            {
                name: "size",
                description: "The brush size",
                type: "number",
                default: 10,
                min: brushMinSize,
                max: brushMaxSize,
                step: 1,
                precision: 0,
            },
            {
                name: "opacity",
                description: "The brush opacity",
                type: "number",
                default: 0.5,
                min: 0,
                max: 1,
            },
            {
                name: "textures",
                description: "The brush textures",
                type: "asset",
                assetType: 'texture',
                array: true,
            }
        ]
    });
    Terrain.attributes.add("activeLayer", { type: 'number', default: 0, min: 0, max: 32, step: 1, precision: 0, });
    Terrain.attributes.add("layers", {
        type: "json",
        array: true,
        schema: [
            {
                name: "name",
                title: "Name",
                type: "string",
            },
            {
                name: "diffuse",
                title: "Diffuse",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "normalMap",
                title: "Normal Map",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "size",
                title: "Size",
                type: "vec2",
                default: [1, 1]
            },
            {
                name: "offset",
                title: "Offset",
                type: "vec2",
                default: [0, 0]
            },
        ]
    });
    Terrain.attributes.add("painterSettings", {
        type: "json",
        schema: [
            {
                name: "splatMap",
                type: "asset",
                assetType: "texture",
                title: "Splat Map",
            },
        ]
    });
});
define("src/Scripts/GrassField", ["require", "exports", "src/GrassFieldHelpers/GrassFieldTexture", "src/GrassFieldHelpers/GrassShaderChunk", "src/Shared/Debug", "src/Shared/Random", "src/TerrainHelpers/TerrainPatches", "src/TerrainHelpers/TerrainPatchesShaderChunks", "src/Scripts/Terrain"], function (require, exports, GrassFieldTexture_mjs_1, GrassShaderChunk_mjs_1, Debug_mjs_2, Random_mjs_1, TerrainPatches_mjs_2, TerrainPatchesShaderChunks_mjs_5, Terrain_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.grassFieldScriptName = exports.GrassField = exports.quadMatrixIndexes = exports.quad2Matrix = exports.quad1Matrix = void 0;
    Random_mjs_1 = __importDefault(Random_mjs_1);
    Terrain_mjs_2 = __importDefault(Terrain_mjs_2);
    exports.quad1Matrix = [
        2, 2, 1, 2, 0, 2,
        0, 1, 0, 0, 1, 0,
        2, 0, 2, 1, 1, 1
    ];
    exports.quad2Matrix = [
        4, 4, 3, 4, 2, 4, 1, 4,
        0, 4, 0, 3, 0, 2, 0, 1,
        0, 0, 1, 0, 2, 0, 3, 0,
        4, 0, 4, 1, 4, 2, 4, 3
    ];
    exports.quadMatrixIndexes = [
        [4, 3, 2], // 0
        [5, 8, 1], // 1
        [6, 7, 0], // 2
    ];
    const lod1QuadCount = 8;
    const lod2QuadCount = 16;
    const tmpMat = new pc.Mat4();
    class GrassField extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this.transitionLow = 0.31;
            this.transitionHigh = 0.36;
            this._bufferStore = {};
            this._time = 0;
            this._lastDrawPos = new pc.Vec3();
            this._lod1MinMaxStore = [];
            this._lod2MinMaxStore = [];
            this._offsetLod1Arr = [
                0, 0, 0, 0,
                0, 0, 0, 0,
                0, 0, 0, 0,
                0, 0, 0, 0,
            ];
            this._offsetLod2Arr = [
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
            ];
        }
        get checkRadius() { return this.radius / 2; }
        get patchRadius() { return this.radius / 2; }
        destroy() {
            var _a, _b, _c, _d, _e;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._sharedVertexBuffer) === null || _b === void 0 ? void 0 : _b.destroy();
            (_c = this._sharedInstancingBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
            if (this._meshInst) {
                (_e = (_d = this._meshInst.instancingData) === null || _d === void 0 ? void 0 : _d.vertexBuffer) === null || _e === void 0 ? void 0 : _e.destroy();
                this._meshInst.destroy();
                if (this._meshInst.mesh) {
                    this._meshInst.mesh.destroy();
                }
                if (this._material) {
                    this._material.destroy();
                }
            }
            if (this.entity.render) {
                this.entity.render.meshInstances = [];
            }
        }
        _initBladesAndEditMode() {
            this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius);
            if (this.painting) {
                this._terrain.addLock();
            }
        }
        postInitialize() {
            var _a;
            const terrainEntity = this.entity.root.findByName('Terrain');
            const terrainScript = (_a = terrainEntity.script) === null || _a === void 0 ? void 0 : _a.get(Terrain_mjs_2.default);
            this._terrain = terrainScript;
            this._cameraEntity = terrainScript.cameraEntity;
            this._dataTexture = new GrassFieldTexture_mjs_1.GrassFieldTexture(this.app.graphicsDevice, this._terrain.width, this._terrain.depth);
            this._initBladesAndEditMode();
            this.on('enable', () => this._initBladesAndEditMode());
            this.on('disable', () => {
                this.destroy();
                this._terrain.freeLock();
            });
            this.on('attr:painting', () => {
                if (this.painting) {
                    this._terrain.addLock();
                }
                else {
                    this._terrain.freeLock();
                }
            });
            this.on('attr:wireframe', () => {
                var _a, _b;
                const primitive = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.mesh) === null || _b === void 0 ? void 0 : _b.primitive;
                if (primitive && primitive[0]) {
                    primitive[0].type = this.wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                }
            });
            this.on('attr:castShadow', () => {
                this._meshInst.castShadow = this.castShadow;
            });
            this.on('attr:receiveShadow', () => {
                this._meshInst.receiveShadow = this.receiveShadow;
            });
            this.on('attr:seed', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:numBlades', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:bladeWidth', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:bladeMinHeight', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:bladeMaxHeight', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:radius', () => this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:lod0BladeSegs', () => this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:lod1BladeSegs', () => this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius));
        }
        update(dt) {
            const cameraPos = this._cameraEntity.getPosition();
            const existsTexs = !!this.textures && this.textures.length > 0;
            const color = existsTexs ? this.textures[0].color : pc.Color.WHITE;
            const rand = existsTexs ? this.textures[0].colorRandom : pc.Vec3.ZERO;
            const tex = existsTexs ? this.textures[0].diffuse.resource : null;
            if (!this.freezeDrawPos) {
                const mat = this.entity.getWorldTransform();
                tmpMat.invert(mat);
                tmpMat.transformPoint(cameraPos, this._lastDrawPos);
            }
            this._time += dt;
            this._material.setParameter(GrassShaderChunk_mjs_1.timeParamName, this._time);
            this._material.setParameter(GrassShaderChunk_mjs_1.windIntensityParamName, this.windIntensity);
            this._material.setParameter(GrassShaderChunk_mjs_1.drawPosParamName, [this._lastDrawPos.x, this._lastDrawPos.y, this._lastDrawPos.z]);
            this._material.setParameter('uDiffuseColor', [color.r, color.g, color.b]);
            this._material.setParameter('uDiffuseColorRandom', [rand.x, rand.y, rand.z]);
            this._material.setParameter('uDiffuseTex', tex);
            this._frustum(cameraPos, this._cameraEntity.camera.camera, this.freezeDrawPos);
        }
        updateAabb() {
            const patchesAabb = this._terrain.renderPreparer.patchesStore.aabb;
            if (this._meshInst) {
                this._meshInst.mesh.aabb = patchesAabb;
                this._meshInst.aabb = patchesAabb;
                this._meshInst.setCustomAabb(patchesAabb);
            }
        }
        _frustumHelper(count, quadMatrix, quadOffset, minMaxStore, offsetArr, inverse, cameraPos, camera, freeze) {
            const scale = this.entity.getScale();
            const terrainScale = this._terrain.entity.getScale();
            const checkRadius = this.checkRadius * Math.max(scale.x, scale.z);
            const maxHeight = this._terrain.object.maxHeight * terrainScale.y;
            const frustumPlanes = camera.frustum.planes;
            const checkIsVisible = (min, max) => {
                for (let p = 0; p < 6; p++) {
                    const frustumPlane = frustumPlanes[p];
                    const d = Math.max(min.x * frustumPlane[0], max.x * frustumPlane[0])
                        + Math.max(min.y * frustumPlane[1], max.y * frustumPlane[1])
                        + Math.max(min.z * frustumPlane[2], max.z * frustumPlane[2])
                        + frustumPlane[3];
                    if (d <= 0) {
                        return false;
                    }
                }
                return true;
            };
            let visibleCount = 0;
            for (let i = 0; i < count; i++) {
                if (!minMaxStore[i])
                    minMaxStore[i] = [new pc.Vec3(), new pc.Vec3(), false];
                if (!freeze) {
                    const quadMatrixX = quadMatrix[i * 2 + 0];
                    const quadMatrixZ = quadMatrix[i * 2 + 1];
                    const localCenterX = this.radius * (quadMatrixX - quadOffset);
                    const localCenterZ = this.radius * (quadMatrixZ - quadOffset);
                    const worldCenterX = cameraPos.x + localCenterX * scale.x;
                    const worldCenterZ = cameraPos.z + localCenterZ * scale.z;
                    minMaxStore[i][0].set(worldCenterX - checkRadius, 0, worldCenterZ - checkRadius);
                    minMaxStore[i][1].set(worldCenterX + checkRadius, maxHeight, worldCenterZ + checkRadius);
                    const visible = checkIsVisible(minMaxStore[i][0], minMaxStore[i][1]);
                    if (visible) {
                        offsetArr[visibleCount * 2 + 0] = localCenterX;
                        offsetArr[visibleCount * 2 + 1] = localCenterZ;
                    }
                    minMaxStore[i][2] = visible;
                }
                const min = minMaxStore[i][0];
                const max = minMaxStore[i][1];
                const vis = minMaxStore[i][2];
                if (freeze) {
                    (0, Debug_mjs_2.drawBox)({ min, max, color: vis ? pc.Color.GREEN : pc.Color.RED });
                }
                visibleCount += Number(vis);
            }
            if (!freeze && inverse && visibleCount > 0) {
                const hiddenCount = count - visibleCount;
                for (let i = visibleCount; i > -1; i--) {
                    const indexIn = (hiddenCount + i) * 2;
                    const indexOr = i * 2;
                    offsetArr[indexIn + 0] = offsetArr[indexOr + 0];
                    offsetArr[indexIn + 1] = offsetArr[indexOr + 1];
                }
            }
            return visibleCount;
        }
        _frustum(cameraPos, camera, freeze) {
            var _a;
            const visibleLod1Count = this._frustumHelper(lod1QuadCount, exports.quad1Matrix, 1, this._lod1MinMaxStore, this._offsetLod1Arr, false, cameraPos, camera, freeze);
            const visibleLod2Count = this._frustumHelper(lod2QuadCount, exports.quad2Matrix, 2, this._lod2MinMaxStore, this._offsetLod2Arr, true, cameraPos, camera, freeze);
            const meshInst = this._meshInst;
            const mesh = meshInst.mesh;
            const primitive = mesh.primitive[0];
            const base = this.lod2BladeSegs * 12 * (lod2QuadCount - visibleLod2Count);
            const count = this.lod0BladeSegs * 12
                + this.lod1BladeSegs * 12 * visibleLod1Count
                + this.lod2BladeSegs * 12 * visibleLod2Count;
            meshInst.setParameter(`${GrassShaderChunk_mjs_1.lod1OffsetXZParamName}[0]`, this._offsetLod1Arr);
            meshInst.setParameter(`${GrassShaderChunk_mjs_1.lod2OffsetXZParamName}[0]`, this._offsetLod2Arr);
            // always true for lod 0
            meshInst.visible = this.autoRender || freeze;
            meshInst.visibleThisFrame = this.autoRender || freeze;
            primitive.base = base;
            primitive.count = count;
            if ((_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.wasReleased(pc.KEY_V)) {
                console.log(visibleLod1Count);
                console.log(visibleLod2Count);
                console.log(this._offsetLod1Arr);
                console.log(this._offsetLod2Arr);
            }
        }
        _updateGrassMesh(graphicsDevice, radius) {
            this._updateMeshBuffers(graphicsDevice);
            this._updateMeshMaterial(graphicsDevice);
            this._updateMeshInstance(graphicsDevice);
            this._updateMeshInstancing(graphicsDevice, radius);
            this.updateAabb();
            const meshInstances = [this._meshInst];
            if (this.entity.render) {
                this.entity.render.meshInstances = meshInstances;
            }
            else {
                this.entity.addComponent('render', {
                    meshInstances: meshInstances,
                    castShadows: this.castShadow,
                    receiveShadows: this.receiveShadow,
                    cull: false,
                });
            }
            this._meshInst.castShadow = this.castShadow;
            this._meshInst.receiveShadow = this.receiveShadow;
        }
        _updateMeshInstancing(graphicsDevice, radius) {
            var _a, _b, _c;
            if (this._meshInst) {
                this._updateInstancingBuffer(graphicsDevice, radius);
                (_c = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.instancingData) === null || _b === void 0 ? void 0 : _b.vertexBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
                this._meshInst.setInstancing(this._sharedInstancingBuffer);
            }
        }
        _updateMeshInstance(graphicsDevice) {
            var _a, _b, _c, _d;
            (_c = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.instancingData) === null || _b === void 0 ? void 0 : _b.vertexBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
            (_d = this._meshInst) === null || _d === void 0 ? void 0 : _d.destroy();
            const mesh = new pc.Mesh(graphicsDevice);
            const primitive = mesh.primitive[0];
            mesh.indexBuffer[0] = this._sharedIndexBuffer;
            mesh.vertexBuffer = this._sharedVertexBuffer;
            primitive.type = this.wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
            primitive.base = 0;
            primitive.count = this._bufferStore.index.length;
            primitive.indexed = true;
            this._meshInst = new pc.MeshInstance(mesh, this._material, this.entity);
        }
        /**
        * Sets up indices for single blade mesh.
        * @param id array of indices
        * @param vc1 vertex start offset for front side of blade
        * @param vc2 vertex start offset for back side of blade
        * @param i index offset
        */
        _initBladeIndices(id, vc1, vc2, i, bladeSegs) {
            let seg;
            // blade front side
            for (seg = 0; seg < bladeSegs; ++seg) {
                id[i++] = vc1 + 0; // tri 1
                id[i++] = vc1 + 1;
                id[i++] = vc1 + 2;
                id[i++] = vc1 + 2; // tri 2
                id[i++] = vc1 + 1;
                id[i++] = vc1 + 3;
                vc1 += 2;
            }
            // blade back side
            for (seg = 0; seg < bladeSegs; ++seg) {
                id[i++] = vc2 + 2; // tri 1
                id[i++] = vc2 + 1;
                id[i++] = vc2 + 0;
                id[i++] = vc2 + 3; // tri 2
                id[i++] = vc2 + 1;
                id[i++] = vc2 + 2;
                vc2 += 2;
            }
            return i;
        }
        /** Set up indices for 1 blade */
        _initBladeIndexVerts(vindex) {
            for (let i = 0; i < vindex.length; ++i) {
                vindex[i] = i;
            }
        }
        _initBladeOffsetShapeVerts(offsetShape, radius, numBlades) {
            const normalizeValue = offsetShape instanceof Uint16Array ? pc.FloatPacking.float2Half : (x) => x;
            const random = new Random_mjs_1.default(this.seed);
            const heightFactor = this.bladeMaxHeight - this.bladeMinHeight;
            //let noise = 0;
            for (let i = 0; i < numBlades; ++i) {
                //noise = Math.abs(simplex(offsetShape[i * 8 + 0] * 0.03, offsetShape[i * 8 + 2] * 0.03));
                //noise = noise * noise * noise;
                //noise *= 5.0;
                const x = random.nrand() * radius;
                const y = random.nrand() * radius;
                const z = 0;
                const rotation = Math.PI * 2.0 * random.random();
                const width = this.bladeWidth + random.random() * this.bladeWidth * 0.5;
                const height = this.bladeMinHeight + Math.pow(random.random(), 4.0) * heightFactor;
                const lean = 0.01 + random.random() * 0.3;
                const curve = 0.05 + random.random() * 0.3;
                offsetShape[i * 8 + 0] = normalizeValue(x); // x
                offsetShape[i * 8 + 1] = normalizeValue(y); // y
                offsetShape[i * 8 + 2] = normalizeValue(z); // z
                offsetShape[i * 8 + 3] = normalizeValue(rotation); // rot
                offsetShape[i * 8 + 4] = normalizeValue(width); // width
                offsetShape[i * 8 + 5] = normalizeValue(height); //+ noise; //+ height
                offsetShape[i * 8 + 6] = normalizeValue(lean); // lean
                offsetShape[i * 8 + 7] = normalizeValue(curve); // curve
            }
        }
        _updateInstancingBuffer(graphicsDevice, radius) {
            var _a;
            (_a = this._sharedInstancingBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            const lod0PatchCount = 1;
            const lod1PatchCount = 8;
            const lod2PatchCount = 16;
            const patchNumBlades = (this.numBlades / (lod0PatchCount + lod1PatchCount + lod2PatchCount)) | 0;
            const offsetAndShapeLength = patchNumBlades * 8;
            if (this._bufferStore.offsetAndShape === undefined ||
                this._bufferStore.offsetAndShape.length !== offsetAndShapeLength) {
                this._bufferStore.offsetAndShape = new Float32Array(offsetAndShapeLength);
            }
            this._initBladeOffsetShapeVerts(this._bufferStore.offsetAndShape, radius, patchNumBlades);
            const type = this._bufferStore.offsetAndShape instanceof Uint16Array ? pc.TYPE_FLOAT16 : pc.TYPE_FLOAT32;
            const instancingFormat = new pc.VertexFormat(graphicsDevice, [
                {
                    semantic: pc.SEMANTIC_ATTR10,
                    components: 4,
                    type: type,
                    normalize: false,
                    asInt: false
                },
                {
                    semantic: pc.SEMANTIC_ATTR11,
                    components: 4,
                    type: type,
                    normalize: false,
                    asInt: false,
                },
            ]);
            this._sharedInstancingBuffer = new pc.VertexBuffer(graphicsDevice, instancingFormat, patchNumBlades, {
                usage: pc.BUFFER_STATIC,
                data: this._bufferStore.offsetAndShape,
                storage: false,
            });
        }
        _getVertexFormat(graphicsDevice) {
            return new pc.VertexFormat(graphicsDevice, [{
                    semantic: pc.SEMANTIC_POSITION,
                    components: 1,
                    type: pc.TYPE_FLOAT32,
                    normalize: false,
                    asInt: false
                }]);
        }
        _updateMeshBuffers(graphicsDevice) {
            var _a, _b;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._sharedVertexBuffer) === null || _b === void 0 ? void 0 : _b.destroy();
            const lod0VC = (this.lod0BladeSegs + 1) * 2;
            const lod1VC = (this.lod1BladeSegs + 1) * 2;
            const lod2VC = (this.lod2BladeSegs + 1) * 2;
            const indexLength = this.lod0BladeSegs * 12 + this.lod1BladeSegs * 12 * lod1QuadCount + this.lod2BladeSegs * 12 * lod2QuadCount;
            const indexVertsLength = lod0VC * 2 + lod1VC * 2 * lod1QuadCount + lod2VC * 2 * lod2QuadCount;
            if (this._bufferStore.index === undefined ||
                this._bufferStore.index.length !== indexLength) {
                this._bufferStore.index = new Uint16Array(indexLength);
                let index = 0;
                for (let i = 0; i < lod2QuadCount; i++) {
                    const lod2VC1 = i * lod2VC * 2;
                    const lod2VC2 = lod2VC1 + lod2VC;
                    index = this._initBladeIndices(this._bufferStore.index, lod2VC1, lod2VC2, index, this.lod2BladeSegs);
                }
                const lod0VC1 = lod2QuadCount * lod2VC * 2;
                const lod0VC2 = lod0VC1 + lod0VC;
                index = this._initBladeIndices(this._bufferStore.index, lod0VC1, lod0VC2, index, this.lod0BladeSegs);
                for (let i = 0; i < lod1QuadCount; i++) {
                    const lod1VC1 = lod0VC2 + lod0VC + i * lod1VC * 2;
                    const lod1VC2 = lod1VC1 + lod1VC;
                    index = this._initBladeIndices(this._bufferStore.index, lod1VC1, lod1VC2, index, this.lod1BladeSegs);
                }
            }
            if (this._bufferStore.indexVerts === undefined ||
                this._bufferStore.indexVerts.length !== indexVertsLength) {
                this._bufferStore.indexVerts = new Float32Array(indexVertsLength);
                this._initBladeIndexVerts(this._bufferStore.indexVerts);
            }
            this._sharedIndexBuffer = new pc.IndexBuffer(graphicsDevice, pc.INDEXFORMAT_UINT16, this._bufferStore.index.length, pc.BUFFER_STATIC, this._bufferStore.index, { storage: false });
            this._sharedVertexBuffer = new pc.VertexBuffer(graphicsDevice, this._getVertexFormat(graphicsDevice), this._bufferStore.indexVerts.length, {
                usage: pc.BUFFER_STATIC,
                data: this._bufferStore.indexVerts,
                storage: false,
            });
        }
        _updateMeshMaterial(graphicsDevice) {
            var _a;
            (_a = this._material) === null || _a === void 0 ? void 0 : _a.destroy();
            this._material = new pc.StandardMaterial();
            this._material.name = "GrassFieldMaterial";
            /*
            this._material.depthTest = false;
            this._material.depthWrite = true;
            this._material.blendType = pc.BLEND_NONE;
            this._material.alphaTest = 0;
            this._material.alphaWrite = false;
            this._material.alphaFade = false;
            this._material.alphaToCoverage = false;
            */
            const terrain = this._terrain.object;
            const patches = this._terrain.renderPreparer.patchesStore;
            const heightMap = patches.heightMapTexture;
            const terrainScale = this._terrain.entity.getScale();
            this._material.setAttribute(GrassShaderChunk_mjs_1.vindexAttrName, pc.SEMANTIC_POSITION);
            this._material.setAttribute(GrassShaderChunk_mjs_1.offsetAttrName, pc.SEMANTIC_ATTR10);
            this._material.setAttribute(GrassShaderChunk_mjs_1.shapeAttrName, pc.SEMANTIC_ATTR11);
            this._material.setParameter('uDataMap', this._dataTexture.texture);
            this._material.setParameter(TerrainPatchesShaderChunks_mjs_5.terrainHeightMapParamName, heightMap);
            this._material.setParameter(GrassShaderChunk_mjs_1.terrainScaleParamName, [terrainScale.x, terrainScale.y, terrainScale.z]);
            this._material.setParameter(TerrainPatchesShaderChunks_mjs_5.terrainMaxHeightParamName, terrain.maxHeight);
            this._material.setParameter(`${GrassShaderChunk_mjs_1.lod1OffsetXZParamName}[0]`, this._offsetLod1Arr);
            this._material.setParameter(`${GrassShaderChunk_mjs_1.lod2OffsetXZParamName}[0]`, this._offsetLod2Arr);
            this._material.setParameter(GrassShaderChunk_mjs_1.drawPosParamName, [0, 0, 0]);
            this._material.setParameter(GrassShaderChunk_mjs_1.timeParamName, this._time);
            this._material.setParameter(GrassShaderChunk_mjs_1.windIntensityParamName, 0);
            const hmFormat = (0, TerrainPatches_mjs_2.getHeightMapFormat)(graphicsDevice, terrain.heightMap);
            const pcVersion = `v${pc.version[0]}`;
            const chunksStore = (0, GrassShaderChunk_mjs_1.getGrassShaderChunks)({
                width: terrain.width,
                depth: terrain.depth,
                heightMapChunkSize: terrain.heightMap.dataChunkSize,
                heightMapFormat: hmFormat,
                bladeMaxHeight: this.bladeMaxHeight * 1.5,
                lod0BladeSegs: this.lod0BladeSegs,
                lod1BladeSegs: this.lod1BladeSegs,
                lod2BladeSegs: this.lod2BladeSegs,
                radius: this.radius,
                transitionLow: this.transitionLow,
                transitionHigh: this.transitionHigh,
                engineVersion: pcVersion,
            });
            const chunkNames = Object.keys(chunksStore);
            if (pcVersion === 'v1') {
                const chunks = this._material.chunks;
                chunks.APIVersion = pc.CHUNKAPI_1_70;
                for (let chunkName of chunkNames) {
                    chunks[chunkName] = chunksStore[chunkName];
                }
            }
            else {
                const shaderChunks = this._material.getShaderChunks(pc.SHADERLANGUAGE_GLSL);
                for (let chunkName of chunkNames) {
                    shaderChunks.set(chunkName, chunksStore[chunkName]);
                }
                this._material.shaderChunksVersion = pc.CHUNKAPI_1_70;
            }
            this._material.update();
        }
    }
    exports.GrassField = GrassField;
    exports.default = GrassField;
    exports.grassFieldScriptName = "grassField";
    pc.registerScript(GrassField, exports.grassFieldScriptName);
    GrassField.attributes.add("painting", { type: "boolean", default: false });
    GrassField.attributes.add("castShadow", { type: "boolean", default: true, });
    GrassField.attributes.add("receiveShadow", { type: "boolean", default: true, });
    GrassField.attributes.add("wireframe", { type: "boolean", default: false });
    GrassField.attributes.add("freezeDrawPos", { type: "boolean", default: false });
    GrassField.attributes.add("autoRender", { type: "boolean", default: true });
    GrassField.attributes.add("seed", { type: "number", default: 53464546455, min: 1, step: 1, precision: 0 });
    GrassField.attributes.add("windIntensity", { type: "number", default: 0, min: -30, max: 30 });
    GrassField.attributes.add("numBlades", { type: "number", default: 4000, min: 0, max: 8000000, step: 1, precision: 0 });
    GrassField.attributes.add("radius", { type: "number", default: 80, min: 1, max: 10000 });
    GrassField.attributes.add("lod0BladeSegs", { type: "number", default: 3, min: 1, max: 10, step: 1, precision: 0 });
    GrassField.attributes.add("lod1BladeSegs", { type: "number", default: 2, min: 1, max: 10, step: 1, precision: 0 });
    GrassField.attributes.add("lod2BladeSegs", { type: "number", default: 1, min: 1, max: 10, step: 1, precision: 0 });
    GrassField.attributes.add("bladeWidth", { type: "number", default: 0.04, min: 0.01, max: 5 });
    GrassField.attributes.add("bladeMinHeight", { type: "number", default: 0.25, min: 0.01, max: 10 });
    GrassField.attributes.add("bladeMaxHeight", { type: "number", default: 1, min: 0.01, max: 10 });
    GrassField.attributes.add("textures", {
        type: "json",
        array: true,
        schema: [
            {
                name: "name",
                title: "Name",
                type: "string",
            },
            {
                name: "diffuse",
                title: "Diffuse",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "color",
                title: "Color",
                type: "rgb"
            },
            {
                name: "colorRandom",
                title: "Color Random",
                type: "vec3",
                default: [0.01, 0.01, 0.01]
            }
        ]
    });
});
define("src/Scripts/TerrainCollider", ["require", "exports", "src/Scripts/Terrain"], function (require, exports, Terrain_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.terrainColliderScriptName = exports.TerrainCollider = void 0;
    class TerrainCollider extends pc.ScriptType {
        initialize() {
            var _a;
            const terrain = (_a = this.entity.script) === null || _a === void 0 ? void 0 : _a.get(Terrain_mjs_3.terrainScriptName);
            // TODO
        }
    }
    exports.TerrainCollider = TerrainCollider;
    exports.default = TerrainCollider;
    exports.terrainColliderScriptName = "terrainCollider";
    pc.registerScript(TerrainCollider, exports.terrainColliderScriptName);
});
define("src/TreeFieldHelpers/InstancedMesh", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.InstancedMesh = void 0;
    class InstancedMesh {
        constructor() {
            /**
             * Attribute storing indices of the instances to be rendered.
             */
            this.instanceIndex = null;
            this._count = 0;
            this._capacity = 0;
        }
        _initIndexAttribute() {
            if (!this._graphicsDevice) {
                this._count = 0;
                return;
            }
            const capacity = this._capacity;
            const array = new Uint32Array(capacity);
            for (let i = 0; i < capacity; i++) {
                array[i] = i;
            }
            this.instanceIndex = new pc.VertexFormat(this._graphicsDevice, [{
                    semantic: pc.SEMANTIC_ATTR10,
                    components: 1,
                    type: pc.TYPE_UINT32,
                    normalize: false,
                    asInt: true
                }]);
        }
    }
    exports.InstancedMesh = InstancedMesh;
});
define("src/TreeFieldHelpers/TreeField", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TreeField = exports.A = void 0;
    class A {
    }
    exports.A = A;
    class TreeField {
        constructor() {
        }
        addTree(x, z, angle, height) {
        }
        removeTree(index) {
        }
    }
    exports.TreeField = TreeField;
});
;
(() => {
    if (window.___amd___requireResolver) {
        window.___amd___requireResolver();
    }
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVycmFpbi1zeXN0ZW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zYXNyYy9yZXF1cmVkU3RhcnQuanMiLCIuLi8uLi9zcmMvU2hhcmVkL1R5cGVzLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL0lab25lLm10cyIsIi4uLy4uL3NyYy9TaGFyZWQvQ29tcHJlc3Nvci5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9BYnNIZWlnaHRNYXBGaWxlSU8ubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vQWJzSGVpZ2h0TWFwLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL0hlaWdodE1hcC5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9BYnNQYXRjaGVkSGVpZ2h0TWFwLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL0NvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwLm10cyIsIi4uLy4uL3NyYy9BbW1vSW50ZWdyYXRpb24vQW1tb0ludGVncmF0aW9uLm10cyIsIi4uLy4uL3NyYy9FbmdpbmVFeHRlbnNpb25zL1JlbmRlcmVyLm10cyIsIi4uLy4uL3NyYy9HcmFzc0ZpZWxkSGVscGVycy9HcmFzc0ZpZWxkVGV4dHVyZS5tdHMiLCIuLi8uLi9zcmMvU2hhcmVkL1V0aWxzLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlc1NoYWRlckNodW5rcy5tdHMiLCIuLi8uLi9zcmMvR3Jhc3NGaWVsZEhlbHBlcnMvR3Jhc3NTaGFkZXJDaHVuay5tdHMiLCIuLi8uLi9zcmMvR3Jhc3NGaWVsZEhlbHBlcnMvc2ltcGxleC5tdHMiLCIuLi8uLi9zcmMvU2NyaXB0cy9GbHlDYW1lcmEubXRzIiwiLi4vLi4vc3JjL1NjcmlwdHMvRnBzQ291bnRlci5tdHMiLCIuLi8uLi9zcmMvU2hhcmVkL0RlYnVnLm10cyIsIi4uLy4uL3NyYy9TaGFyZWQvUmFuZG9tLm10cyIsIi4uLy4uL3NyYy9TaGFyZWQvU3RvcmUyRC5tdHMiLCIuLi8uLi9zcmMvU2hhcmVkL1ZlY3RvcjNNYXRoLm10cyIsIi4uLy4uL3NyYy9TaGFyZWQvVmVjdG9yMk1hdGgubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vTG9kTWFuYWdlci5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9Db29yZHNCdWZmZXIubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vTG9kSW5mby5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9HcmlkQnVpbGRlci5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9HZW9taXBHcmlkQnVpbGRlci5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9HZW9taXBHcmlkUmVuZGVyUHJlcGFyZXIubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vR2VvbWlwR3JpZC5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9UZXJyYWluLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL0lQYXRjaC5tdHMiLCIuLi8uLi9zcmMvVGVycmFpblN5c3RlbS9JUGF0Y2hlc0luc3RhbmNpbmcubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL0lUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5QYXRjaGVzQmFzaWMubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vUGF0Y2hlc0NvbWJpbmVJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlc0NvbWJpbmVJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL1BhdGNoZXNJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5QYXRjaGVzLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL01pZHBvaW50RGlzcFRlcnJhaW4ubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vVGVycmFpblJheWNhc3RSZXN1bHQubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5SZW5kZXJQcmVwYXJlci5tdHMiLCIuLi8uLi9zcmMvVGVycmFpbkhlbHBlcnMvQnJ1c2gubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL0NvbG9yUGFpbnRlclNoYWRlcnMubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL0NvbG9yUGFpbnRlci5tdHMiLCIuLi8uLi9zcmMvU2hhcmVkL0VudW1Db252ZXJ0ZXIubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5IZWxwZXJzL0VudW1zLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL1RyaWFuZ2xlLm10cyIsIi4uLy4uL3NyYy9UZXJyYWluU3lzdGVtL0hlaWdodGZpZWxkU2hhcGUubXRzIiwiLi4vLi4vc3JjL1RlcnJhaW5TeXN0ZW0vUGF0Y2hlZEhlaWdodE1hcC5tdHMiLCIuLi8uLi9zcmMvU2hhcmVkL0ZydXN0dW0ubXRzIiwiLi4vLi4vc3JjL1NjcmlwdHMvVGVycmFpbi5tdHMiLCIuLi8uLi9zcmMvU2NyaXB0cy9HcmFzc0ZpZWxkLm10cyIsIi4uLy4uL3NyYy9TY3JpcHRzL1RlcnJhaW5Db2xsaWRlci5tdHMiLCIuLi8uLi9zcmMvVHJlZUZpZWxkSGVscGVycy9JbnN0YW5jZWRNZXNoLm10cyIsIi4uLy4uL3NyYy9UcmVlRmllbGRIZWxwZXJzL1RyZWVGaWVsZC5tdHMiLCIuLi8uLi9zenNyYy9yZXF1cmVkRmluaXNoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxDQUFDO0FBQUEsQ0FBQyxHQUFHLEVBQUU7SUFFTixNQUFNLElBQUksR0FBTyxFQUFFLENBQUM7SUFDcEIsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFDO0lBRXBCLG1DQUFtQztJQUNuQyxNQUFNLENBQUMsdUJBQXVCLEdBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNoRCxNQUFNLENBQUMsd0JBQXdCLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUVqRCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUV2QyxNQUFNLE1BQU0sR0FBRyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUU7WUFFcEMsSUFBSSxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFDZCxNQUFNLElBQUksS0FBSyxDQUFDLDJCQUEyQixHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ25ELENBQUM7WUFFRCxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDNUIsQ0FBQyxDQUFBO1FBRUQsTUFBTSxDQUFDLEdBQUcsR0FBRztZQUNaLE1BQU0sRUFBRSxJQUFJLEVBQUksMERBQTBEO1lBQzFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsNENBQTRDO1NBQzVELENBQUM7UUFFRixNQUFNLE9BQU8sR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFO1lBRXRCLElBQUksRUFBRSxLQUFLLFNBQVM7Z0JBQUUsT0FBTyxPQUFPLENBQUM7WUFDckMsSUFBSSxFQUFFLEtBQUssU0FBUztnQkFBRSxPQUFPLEVBQUUsQ0FBQztZQUNoQyxJQUFJLFFBQVEsQ0FBQyxFQUFFLENBQUM7Z0JBQU0sT0FBTyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFMUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO2dCQUNmLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUN0QixNQUFNLElBQUksS0FBSyxDQUFDLG9CQUFvQixHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQzVDLENBQUM7WUFFRCxNQUFNLGFBQWEsR0FBRyxFQUFFLENBQUM7WUFDekIsTUFBTSxJQUFJLEdBQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVCLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUUzQixJQUFJLEdBQUcsS0FBSyxTQUFTLEVBQUUsQ0FBQztvQkFDdkIsT0FBTyxhQUFhLENBQUM7Z0JBQ3RCLENBQUM7Z0JBRUQsT0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckIsQ0FBQyxDQUFDLENBQUM7WUFFSCxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztZQUUxQixPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsR0FBRyxhQUFhLENBQUM7UUFDckMsQ0FBQyxDQUFBO1FBRUQsTUFBTSxDQUFDLE1BQU0sR0FBSSxNQUFNLENBQUM7UUFDeEIsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7SUFDMUIsQ0FBQztJQUVELE1BQU0sQ0FBQyx3QkFBd0IsR0FBRyxHQUFHLEVBQUU7UUFFdEMsS0FBSyxNQUFNLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUV2QixJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFFN0IsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUV6QixJQUFJLElBQUksRUFBRSxDQUFDO29CQUNWLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7d0JBRWQsSUFBSSxHQUFHLEtBQUssU0FBUzs0QkFDcEIsR0FBRyxLQUFLLFNBQVMsRUFBRSxDQUFDOzRCQUVwQixJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO2dDQUNuQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7NEJBQ2QsQ0FBQzs0QkFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUM7Z0NBQzVCLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO2dDQUVoQyxNQUFNLElBQUksS0FBSyxDQUFDLGtCQUFrQixFQUFFLG9CQUFvQixHQUFHLEdBQUcsQ0FBQyxDQUFDOzRCQUNqRSxDQUFDO3dCQUNGLENBQUM7b0JBQ0YsQ0FBQyxDQUFDLENBQUM7Z0JBQ0osQ0FBQztnQkFFRCxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBRVosT0FBTyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDakIsQ0FBQztRQUNGLENBQUM7UUFFRCxxQ0FBcUM7UUFDckMsTUFBTSxDQUFDLE1BQU0sR0FBSSxNQUFNLENBQUMsdUJBQXVCLENBQUM7UUFDaEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsd0JBQXdCLENBQUM7UUFFakQsUUFBUTtRQUNSLE9BQU8sTUFBTSxDQUFDLHdCQUF3QixDQUFDO1FBQ3ZDLE9BQU8sTUFBTSxDQUFDLHVCQUF1QixDQUFDO1FBQ3RDLE9BQU8sTUFBTSxDQUFDLHdCQUF3QixDQUFDO0lBQ3hDLENBQUMsQ0FBQztBQUNILENBQUMsQ0FBQyxFQUFFLENBQUM7Ozs7Ozs7Ozs7OztJR25HTCxNQUFxQixVQUFVO1FBRW5CLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBb0IsRUFBRSxXQUFtQjtZQUVsRSxJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7WUFFakIsOERBQThEO1lBQzlELE1BQU0sWUFBWSxHQUFHLElBQUksVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ2pELEtBQUssTUFBTSxLQUFLLElBQUksTUFBTSxFQUFFLENBQUM7Z0JBQ3pCLFlBQVksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO2dCQUNsQyxRQUFRLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQztZQUM3QixDQUFDO1lBRUQsT0FBTyxZQUFZLENBQUMsTUFBTSxDQUFDO1FBQy9CLENBQUM7UUFFTyxNQUFNLENBQU8sVUFBVSxDQUFDLE1BQXdDOztnQkFFcEUsSUFBSSxXQUFXLEdBQUcsQ0FBQyxDQUFDO2dCQUVwQixNQUFNLE1BQU0sR0FBaUIsRUFBRSxDQUFDO2dCQUVoQyxPQUFPLElBQUksRUFBRSxDQUFDO29CQUNWLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsTUFBTSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7b0JBQzVDLElBQUksSUFBSTt3QkFBRSxNQUFNO29CQUNoQixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNuQixXQUFXLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQztnQkFDaEMsQ0FBQztnQkFFRCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBQ25ELENBQUM7U0FBQTtRQUVNLE1BQU0sQ0FBTyxjQUFjO2lFQUFDLE1BQW1CLEVBQUUsU0FBNEIsTUFBTTtnQkFFdEYsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUN2RCxNQUFNLE1BQU0sR0FBRyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBRXJELE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDckMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUVmLE1BQU0sTUFBTSxHQUFHLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUUsQ0FBQztnQkFFckQsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ25DLENBQUM7U0FBQTtRQUVNLE1BQU0sQ0FBTyxnQkFBZ0I7aUVBQUMsTUFBbUIsRUFBRSxTQUE0QixNQUFNO2dCQUV4RixNQUFNLGtCQUFrQixHQUFHLElBQUksbUJBQW1CLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzNELE1BQU0sTUFBTSxHQUFHLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUUsQ0FBQztnQkFDdkQsTUFBTSxNQUFNLEdBQUcsa0JBQWtCLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO2dCQUV2RCw0Q0FBNEM7Z0JBQzVDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDckMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUVmLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNuQyxDQUFDO1NBQUE7S0FDSjtJQXpERCw2QkF5REM7Ozs7Ozs7SUNwRFksUUFBQSxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7SUFDdEIsUUFBQSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBYWYsUUFBQSw2QkFBNkIsR0FBc0IsTUFBTSxDQUFDO0lBRXZFLE1BQXNCLGtCQUFrQjtRQUU1QixrQkFBa0IsQ0FBQyxJQUFjLEVBQUUsVUFBZSxFQUFFLEtBQVUsRUFBRSxDQUFNLEVBQUUsQ0FBTTtZQUVsRixNQUFNLEtBQUssR0FBRyxDQUFDLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQztZQUM1QixNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxLQUFLLEdBQUcsa0JBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM3RCxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxLQUFLLEdBQUcsa0JBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM3RCxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxLQUFLLEdBQUcsa0JBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUU3RCxNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDeEMsTUFBTSxNQUFNLEdBQUcsTUFBTSxHQUFHLFFBQVEsQ0FBQztZQUVqQyxPQUFPLE1BQU0sQ0FBQztRQUNsQixDQUFDO1FBRU8sbUJBQW1CLENBQUMsSUFBYyxFQUFFLFVBQWUsRUFBRSxTQUFnQyxFQUFFLENBQU0sRUFBRSxDQUFNO1lBRXpHLE1BQU0sS0FBSyxHQUFJLENBQUMsR0FBRyxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztZQUN2QyxNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN6QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsQ0FBQztZQUM3QyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7WUFDaEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDO1lBRTFCLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxHQUFHLEtBQUssR0FBRyxrQkFBVSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN0RCxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxLQUFLLEdBQUcsa0JBQVUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDdEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsS0FBSyxHQUFHLGtCQUFVLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzFELENBQUM7UUFFZSxnQkFBZ0IsQ0FBQyxTQUF1QixFQUFFLE1BQW1CLEVBQUUsT0FBcUM7O2dCQUVoSCxRQUFRO2dCQUNSLG9CQUFvQjtnQkFDcEIsbURBQW1EO2dCQUVuRCxNQUFNLE9BQU8sR0FBRyxNQUFNLHdCQUFVLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLHFDQUE2QixDQUFDLENBQUM7Z0JBQ3pGLE1BQU0sSUFBSSxHQUFNLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUN0QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFFeEMsSUFBSSxPQUFPLEtBQUssd0JBQWdCLEVBQUUsQ0FBQztvQkFDL0IsT0FBTyxDQUFDLElBQUksQ0FBQyxvQ0FBb0MsRUFBRSxPQUFPLENBQUMsQ0FBQztvQkFDNUQsT0FBTyxJQUFJLENBQUM7Z0JBQ2hCLENBQUM7Z0JBRUQsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDcEMsTUFBTSxLQUFLLEdBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQzNDLE1BQU0sS0FBSyxHQUFRLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUMzQyxNQUFNLFNBQVMsR0FBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFFN0MsTUFBTSxjQUFjLEdBQUcsQ0FBQSxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsaUJBQWlCLEVBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztnQkFFcEYsSUFBSSxTQUFTLENBQUMsS0FBSyxLQUFLLEtBQUs7b0JBQ3pCLFNBQVMsQ0FBQyxLQUFLLEtBQUssS0FBSzt3QkFDekIsT0FBTzt3QkFDUCxPQUFPLENBQUMscUJBQXFCLEVBQUUsQ0FBQztvQkFFaEMsc0NBQXNDO29CQUN0QyxNQUFNLE9BQU8sR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQ3BELE1BQU0sT0FBTyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztvQkFFcEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLElBQUksT0FBTyxFQUFFLENBQUM7d0JBRXRDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxJQUFJLE9BQU8sRUFBRSxDQUFDOzRCQUV0Qyw4Q0FBOEM7NEJBQzlDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzs0QkFDOUUsTUFBTSxNQUFNLEdBQUcsTUFBTSxHQUFHLGNBQWMsQ0FBQzs0QkFFdkMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsT0FBTyxFQUFFLENBQUMsR0FBRyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7d0JBQ3BELENBQUM7b0JBQ0wsQ0FBQztnQkFDTCxDQUFDO3FCQUNJLENBQUM7b0JBRUYsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7d0JBRXhELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDOzRCQUV4RCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDOzRCQUN0RSxNQUFNLE1BQU0sR0FBRyxNQUFNLEdBQUcsY0FBYyxDQUFDOzRCQUV2QyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7d0JBQ2hDLENBQUM7b0JBQ0wsQ0FBQztnQkFDTCxDQUFDO2dCQUVELE9BQU87b0JBQ0gsS0FBSztvQkFDTCxLQUFLO29CQUNMLFNBQVM7aUJBQ1osQ0FBQTtZQUNMLENBQUM7U0FBQTtRQUVlLGdCQUFnQixDQUFDLFNBQXVCOztnQkFFcEQsUUFBUTtnQkFDUixvQkFBb0I7Z0JBQ3BCLG1EQUFtRDtnQkFFbkQsTUFBTSxVQUFVLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDckMsTUFBTSxNQUFNLEdBQU8sSUFBSSxXQUFXLENBQUMsVUFBVSxHQUFHLGtCQUFVLEdBQUcsU0FBUyxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ2hHLE1BQU0sSUFBSSxHQUFTLElBQUksUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUV4QyxJQUFJLENBQUMsUUFBUSxDQUFHLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQztnQkFDL0IsSUFBSSxDQUFDLFNBQVMsQ0FBRSxDQUFDLEVBQUUsd0JBQWdCLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxTQUFTLENBQUUsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQzFDLElBQUksQ0FBQyxTQUFTLENBQUUsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQzFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBRS9DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7b0JBRXZDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7d0JBRXZDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQ2hFLENBQUM7Z0JBQ0wsQ0FBQztnQkFFRCxPQUFPLHdCQUFVLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxxQ0FBNkIsQ0FBQyxDQUFDO1lBQzVFLENBQUM7U0FBQTtLQUNKO0lBdkhELGdEQXVIQztJQUVELGtCQUFlLGtCQUFrQixDQUFDOzs7Ozs7O0lDaEhsQyxNQUFzQixZQUFhLFNBQVEsZ0NBQWtCO1FBQTdEOztZQVVvQixTQUFJLEdBQUcsQ0FBQyxDQUFDO1lBQ1QsU0FBSSxHQUFHLENBQUMsQ0FBQztRQTZSN0IsQ0FBQztRQTNSRyxJQUFXLElBQUksS0FBSyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLElBQVcsSUFBSSxLQUFLLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFFakMscUJBQXFCLENBQUMsQ0FBUSxFQUFFLENBQVE7WUFFM0MsTUFBTSxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNuQixNQUFNLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ25CLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBRWxDLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQ3hCLENBQUMsSUFBSSxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQkFDM0IsT0FBTyxJQUFJLENBQUM7WUFDaEIsQ0FBQztZQUVELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUN0QyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksRUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDMUMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztZQUUxQyxNQUFNLE9BQU8sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDO1lBRXpCLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBTyxHQUFHLElBQUksQ0FBQztZQUMxRCxNQUFNLGVBQWUsR0FBTSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBRTFELE1BQU0sT0FBTyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUM7WUFFekIsTUFBTSxXQUFXLEdBQUcsQ0FBQyxlQUFlLEdBQUcsa0JBQWtCLENBQUMsR0FBRyxPQUFPLEdBQUcsa0JBQWtCLENBQUM7WUFFMUYsT0FBTyxXQUFXLENBQUM7UUFDdkIsQ0FBQztRQUlNLFNBQVMsQ0FBQyxDQUFNLEVBQUUsQ0FBTSxFQUFFLEtBQVk7WUFDekMsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyQyxDQUFDO1FBSU0sTUFBTSxDQUFDLENBQU0sRUFBRSxDQUFNLEVBQUUsS0FBWSxFQUFFLGVBQXNCLENBQUM7WUFDL0QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxZQUFZLENBQUMsQ0FBQztRQUN4RCxDQUFDO1FBRVksUUFBUSxDQUFDLE1BQW1CLEVBQUUsT0FBcUM7O2dCQUM1RSxPQUFPLE1BQU0sSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDOUQsQ0FBQztTQUFBO1FBRVksTUFBTTs7Z0JBQ2YsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2pELE9BQU8sSUFBSSxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSwwQkFBMEIsRUFBRSxDQUFDLENBQUM7WUFDcEUsQ0FBQztTQUFBO1FBRU0sUUFBUSxDQUFDLE1BQXNDO1lBRWxELE1BQU0sS0FBSyxHQUFJLElBQUksQ0FBQyxLQUFLLENBQUM7WUFFMUIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFFbEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztvQkFFbEMsTUFBTSxDQUFDLEdBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQzNCLE1BQU0sQ0FBQyxHQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQztvQkFDckMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFFaEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFPLENBQUMsQ0FBQztvQkFDcEIsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ3BCLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUNwQixNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFDMUIsQ0FBQztZQUNMLENBQUM7UUFDTCxDQUFDO1FBRU0sUUFBUTtZQUVYLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDaEQsTUFBTSxLQUFLLEdBQUksSUFBSSxDQUFDLEtBQUssQ0FBQztZQUMxQixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBRTFCLE1BQU0sQ0FBQyxLQUFLLEdBQUksS0FBSyxDQUFDO1lBQ3RCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1lBRXZCLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFcEMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUNQLE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQztZQUN2RCxDQUFDO1lBRUQsTUFBTSxTQUFTLEdBQUcsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztZQUN4RCxNQUFNLE1BQU0sR0FBTSxTQUFTLENBQUMsSUFBSSxDQUFDO1lBRWpDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEIsR0FBRyxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRWxDLE9BQU8sTUFBTSxDQUFDO1FBQ2xCLENBQUM7UUFFRDs7V0FFRztRQUNJLE9BQU8sQ0FBQyxJQUF5QixFQUFFLE9BQWE7WUFDbkQsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQy9CLE9BQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDM0MsQ0FBQztRQUVEOzs7V0FHRztRQUNJLFNBQVMsQ0FBQyxHQUFnQjtZQUU3QixNQUFNLFdBQVcsR0FBSSxHQUFHLENBQUMsS0FBSyxDQUFDO1lBQy9CLE1BQU0sWUFBWSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUM7WUFFaEMsSUFBSSxXQUFXLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxZQUFZLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO2dCQUNsRCxNQUFNLElBQUksS0FBSyxDQUFDLGdEQUFnRCxDQUFDLENBQUM7WUFDdEUsQ0FBQztZQUVELE1BQU0sTUFBTSxHQUFJLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDakQsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUUsQ0FBQztZQUV6QyxNQUFNLENBQUMsS0FBSyxHQUFJLFdBQVcsQ0FBQztZQUM1QixNQUFNLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQztZQUU3QixPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFN0IsTUFBTSxTQUFTLEdBQUssT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFdBQVcsRUFBRSxZQUFZLENBQUMsQ0FBQztZQUMxRSxNQUFNLFdBQVcsR0FBRyxTQUFTLENBQUMsSUFBSSxDQUFDO1lBRW5DLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1lBQ25DLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1lBQ25DLE1BQU0sT0FBTyxHQUFPLFdBQVcsR0FBSSxXQUFXLENBQUM7WUFDL0MsTUFBTSxPQUFPLEdBQU8sWUFBWSxHQUFHLFdBQVcsQ0FBQztZQUUvQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUVsQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO29CQUVsQyxJQUFJLFVBQVUsR0FBRyxDQUFDLEtBQUssV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQy9DLElBQUksVUFBVSxHQUFHLENBQUMsS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFFL0MsTUFBTSxVQUFVLEdBQUcsQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUM5QyxNQUFNLFVBQVUsR0FBRyxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBRTlDLE1BQU0sR0FBRyxHQUFHLENBQUMsVUFBVSxHQUFHLFVBQVUsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ3hELE1BQU0sQ0FBQyxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDM0IsTUFBTSxDQUFDLEdBQUcsV0FBVyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztvQkFDL0IsTUFBTSxDQUFDLEdBQUcsV0FBVyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztvQkFDL0IsTUFBTSxDQUFDLEdBQUcsV0FBVyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztvQkFFL0IsTUFBTSxLQUFLLEdBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ25DLE1BQU0sTUFBTSxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO29CQUV0QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQzNCLENBQUM7WUFDTCxDQUFDO1FBQ0wsQ0FBQztRQUVNLFVBQVUsQ0FBQyxJQUFXLEVBQUUsRUFBUyxFQUFFLE1BQVc7WUFFakQsSUFBSSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUM7Z0JBQUUsT0FBTztZQUMxQixJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQztnQkFBRSxPQUFPO1lBRTFCLElBQUksRUFBRSxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQztnQkFBRSxPQUFPO1lBQzdCLElBQUksTUFBTSxLQUFLLENBQUM7Z0JBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQztZQUU3QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDcEMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDN0MsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUU3QyxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBRWxCLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFFL0IsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO29CQUUvQixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFFbEMsSUFBSSxVQUFVLENBQUM7b0JBQ2YsSUFBSSxXQUFXLEdBQUksQ0FBQyxDQUFDO29CQUNyQixJQUFJLFlBQVksR0FBRyxDQUFDLENBQUM7b0JBRXJCLEtBQUssSUFBSSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFBRSxJQUFJLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO3dCQUV4QyxLQUFLLElBQUksRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQzs0QkFFeEMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7NEJBQ3hCLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDOzRCQUV4QixJQUFJLE1BQU0sR0FBRyxDQUFDLElBQUksTUFBTSxJQUFJLElBQUksQ0FBQyxLQUFLO2dDQUFFLFNBQVM7NEJBQ2pELElBQUksTUFBTSxHQUFHLENBQUMsSUFBSSxNQUFNLElBQUksSUFBSSxDQUFDLEtBQUs7Z0NBQUUsU0FBUzs0QkFFakQsTUFBTSxNQUFNLEdBQUcsQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLE1BQU0sS0FBSyxDQUFDLENBQUM7Z0NBQ3pDLENBQUMsQ0FBQyxVQUFVO2dDQUNaLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQzs0QkFFL0IsV0FBVyxFQUFFLENBQUM7NEJBQ2QsWUFBWSxJQUFJLE1BQU0sQ0FBQzt3QkFDM0IsQ0FBQztvQkFDTCxDQUFDO29CQUVELFlBQVksSUFBSSxXQUFXLENBQUM7b0JBQzVCLFVBQVUsR0FBRyxZQUFZLEdBQUcsRUFBRSxHQUFHLFVBQVUsR0FBRyxFQUFFLENBQUM7b0JBRWpELElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQztnQkFDL0IsQ0FBQztZQUNMLENBQUM7UUFDTCxDQUFDO1FBRU0sTUFBTSxDQUFDLEVBQVMsRUFBRSxNQUFXO1lBQ2hDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN0QyxDQUFDO1FBRU0sU0FBUyxDQUFDLFNBQWdCO1lBRTdCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBRWxDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7b0JBRWxDLE1BQU0sYUFBYSxHQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUN2QyxNQUFNLGVBQWUsR0FBRyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsU0FBUyxDQUFDO29CQUVyRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsZUFBZSxDQUFDLENBQUM7Z0JBQ3BDLENBQUM7WUFDTCxDQUFDO1FBQ0wsQ0FBQztRQUVNLGNBQWMsQ0FDakIsSUFBMkIsRUFDM0IsU0FBdUIsRUFDdkIsS0FBWSxFQUNaLElBQVcsRUFDWCxlQUFzQixDQUFDLEVBQ3ZCLFlBQTBCLElBQUksRUFDOUIsWUFBMEIsSUFBSTtZQUc5QixJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQztnQkFBRSxPQUFPO1lBQzFCLElBQUksSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDO2dCQUFFLE9BQU87WUFFMUIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ25DLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztZQUVuQyxJQUFJLElBQUksR0FBRyxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0JBQ3RDLE9BQU87WUFDWCxDQUFDO1lBRUQsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN6QyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2xELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFbEQsTUFBTSxZQUFZLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztZQUNsRCxNQUFNLFlBQVksR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO1lBRWxELEtBQUssSUFBSSxDQUFDLEdBQUcsU0FBUyxFQUFFLENBQUMsR0FBRyxTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFFekMsS0FBSyxJQUFJLENBQUMsR0FBRyxTQUFTLEVBQUUsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO29CQUV6QyxNQUFNLEVBQUUsR0FBRyxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ2hELE1BQU0sRUFBRSxHQUFHLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDaEQsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQ3JDLE1BQU0saUJBQWlCLEdBQUcsTUFBTSxHQUFHLEtBQUssQ0FBQztvQkFFekMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksWUFBWSxDQUFDO29CQUVqRCxJQUFJLFNBQVMsR0FBRyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxTQUFTLEdBQUcsaUJBQWlCLENBQUMsQ0FBQzt3QkFDOUMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUFHLGlCQUFpQixDQUFDLENBQUM7NEJBQzlDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQyxDQUFDO2dDQUM5QyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxTQUFTLEdBQUcsaUJBQWlCLENBQUMsQ0FBQztvQ0FDOUMsU0FBUyxDQUFDO29CQUUxQixJQUFJLFNBQVMsS0FBSyxJQUFJLElBQUksU0FBUyxHQUFHLFNBQVMsRUFBRSxDQUFDO3dCQUM5QyxTQUFTLEdBQUcsU0FBUyxDQUFDO29CQUMxQixDQUFDO29CQUVELElBQUksU0FBUyxLQUFLLElBQUksSUFBSSxTQUFTLEdBQUcsU0FBUyxFQUFFLENBQUM7d0JBQzlDLFNBQVMsR0FBRyxTQUFTLENBQUM7b0JBQzFCLENBQUM7b0JBRUQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO2dCQUM5QixDQUFDO1lBQ0wsQ0FBQztRQUNMLENBQUM7S0FDSjtJQXhTRCxvQ0F3U0M7SUFFRCxrQkFBZSxZQUFZLENBQUM7Ozs7Ozs7SUNwVWYsUUFBQSxnQkFBZ0IsR0FBRyxZQUFZLENBQUM7SUFFaEMsUUFBQSx1QkFBdUIsR0FBUSxDQUFDLENBQUM7SUFROUMsTUFBYSxTQUFvRixTQUFRLDBCQUFZO1FBVWpILElBQVcsSUFBSSxLQUFNLE9BQU8sSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUN4RCxJQUFXLEtBQUssS0FBSyxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzFDLElBQVcsS0FBSyxLQUFLLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDMUMsSUFBVyxJQUFJLEtBQU0sT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN6QyxJQUFXLE1BQU0sS0FBdUIsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBRXhELElBQVcsUUFBUSxLQUFrQixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQzdELElBQVcscUJBQXFCLEtBQUssT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDO1FBRTFFLElBQVcsU0FBUyxLQUFNLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFJbkQsWUFBbUIsS0FBVSxFQUFFLEtBQVUsRUFBRSxTQUFnQixFQUFFLE1BQTBCLEVBQUUsV0FBZ0IsK0JBQXVCLEVBQUUsd0JBQTZCLENBQUM7WUFDNUosS0FBSyxFQUFFLENBQUM7WUF0QkosV0FBTSxHQUFRLENBQUMsQ0FBQztZQUNoQixXQUFNLEdBQVEsQ0FBQyxDQUFDO1lBQ2hCLGVBQVUsR0FBVSxDQUFDLENBQUM7WUFxQjFCLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTyxFQUFFLFFBQVEsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO1FBQ2xGLENBQUM7UUFJUyxLQUFLLENBQUMsS0FBVSxFQUFFLEtBQVUsRUFBRSxTQUFnQixFQUFFLE1BQTBCLEVBQUUsV0FBZ0IsK0JBQXVCLEVBQUUsd0JBQTZCLENBQUM7WUFFekosSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDcEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7WUFFNUIsSUFBSSxNQUFNLEVBQUUsQ0FBQztnQkFFVCxJQUFJLFFBQVEsR0FBRyxxQkFBcUIsRUFBRSxDQUFDO29CQUNuQyxNQUFNLElBQUksS0FBSyxDQUFDLGlEQUFpRCxDQUFDLENBQUM7Z0JBQ3ZFLENBQUM7Z0JBRUQsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDO29CQUM3QyxNQUFNLElBQUksS0FBSyxDQUFDLDJCQUEyQixDQUFDLENBQUM7Z0JBQ2pELENBQUM7Z0JBRUQsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7Z0JBQ3BCLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO2dCQUMxQixJQUFJLENBQUMsc0JBQXNCLEdBQUcscUJBQXFCLENBQUM7WUFDeEQsQ0FBQztpQkFDSSxDQUFDO2dCQUNGLHFCQUFxQjtnQkFDckIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLHdCQUFnQixDQUFDLEtBQUssR0FBRyxLQUFLLEdBQUcsK0JBQXVCLENBQXFCLENBQUM7Z0JBQy9GLElBQUksQ0FBQyxTQUFTLEdBQUcsK0JBQXVCLENBQUM7Z0JBQ3pDLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxDQUFDLENBQUM7WUFDcEMsQ0FBQztRQUNMLENBQUM7UUFFUyxtQkFBbUIsQ0FBQyxLQUFZLEVBQUUsS0FBVSxFQUFFLEtBQVk7WUFDaEUsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQztRQUN6QixDQUFDO1FBRVMsbUJBQW1CLENBQUMsS0FBNkIsRUFBRSxLQUFVO1lBQ25FLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hCLENBQUM7UUFFUyxhQUFhLENBQUMsS0FBNkIsRUFBRSxLQUFVLEVBQUUsR0FBVTtZQUN6RSxPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQ3hELENBQUM7UUFFUyx5QkFBeUIsQ0FBQyxLQUFZLEVBQUUsS0FBVSxFQUFFLFVBQWlCLEVBQUUsR0FBVTtZQUV2RixNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3pELE1BQU0sTUFBTSxHQUFNLFNBQVMsR0FBRyxHQUFHLENBQUM7WUFFM0IsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDdEQsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2xELENBQUM7UUFFTSxRQUFRLENBQUMsQ0FBTSxFQUFFLENBQU07WUFDMUIsT0FBTyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDO1FBQ2hGLENBQUM7UUFFTSxTQUFTLENBQUMsQ0FBTSxFQUFFLENBQU07WUFDM0IsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDbEMsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN2RCxDQUFDO1FBRWUsR0FBRyxDQUFDLENBQU0sRUFBRSxDQUFNO1lBQzlCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDbEUsQ0FBQztRQUVlLEdBQUcsQ0FBQyxDQUFNLEVBQUUsQ0FBTSxFQUFFLEtBQVk7WUFDNUMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDbEMsT0FBTyxJQUFJLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNyRixDQUFDO1FBRU0sWUFBWSxDQUFDLFNBQWdCO1lBQ2hDLElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO1FBQ2hDLENBQUM7UUFFZSxNQUFNLENBQUMsQ0FBTSxFQUFFLENBQU0sRUFBRSxLQUFZO1lBRS9DLE1BQU0sS0FBSyxHQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3RDLE1BQU0sUUFBUSxHQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3pFLE1BQU0sUUFBUSxHQUFJLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFFbkMsT0FBTyxJQUFJLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN4RixDQUFDO1FBRWUsUUFBUSxDQUFDLENBQU0sRUFBRSxDQUFNLEVBQUUsS0FBWSxFQUFFLGVBQXNCLENBQUM7WUFFMUUsTUFBTSxLQUFLLEdBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDdEMsTUFBTSxRQUFRLEdBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksWUFBWSxDQUFDO1lBQ3pGLE1BQU0sUUFBUSxHQUFJLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFFbkMsT0FBTyxJQUFJLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN4RixDQUFDO0tBQ0o7SUF2SEQsOEJBdUhDO0lBRUQsa0JBQWUsU0FBUyxDQUFDOzs7Ozs7SUN6RnpCLDBEQVVDOztJQVpZLFFBQUEsZUFBZSxHQUFHLENBQUMsQ0FBQztJQUVqQyxTQUFnQix1QkFBdUIsQ0FBQyxTQUFjLEVBQUUsYUFBa0I7UUFFdEUsSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUM5QyxNQUFNLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUMzRyxPQUFPLENBQUMsS0FBSyxDQUFDLDBFQUEwRSxFQUFFLGFBQWEsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNwSCxPQUFPLENBQUMsS0FBSyxDQUFDLGdDQUFnQyxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFDbEUsTUFBTSxJQUFJLEtBQUssRUFBRSxDQUFDO1FBQ3RCLENBQUM7UUFFRCxPQUFPLGFBQWEsQ0FBQztJQUN6QixDQUFDO0lBRUQsTUFBc0IsbUJBQThGLFNBQVEsdUJBQWdCO1FBY3hJLElBQVcsU0FBUyxLQUFlLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDNUQsSUFBVyxXQUFXLEtBQWEsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUM5RCxJQUFXLFdBQVcsS0FBYSxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBQzlELElBQVcsYUFBYSxLQUFXLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7UUFDaEUsSUFBVyxjQUFjLEtBQVUsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztRQUNqRSxJQUFXLGNBQWMsS0FBVSxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLElBQVcsbUJBQW1CLEtBQUssT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO1FBSXRFLFlBQW1CLEtBQVUsRUFBRSxLQUFVLEVBQUUsU0FBYyxFQUFFLGFBQWtCLEVBQUUsU0FBZ0IsRUFBRSxNQUEwQixFQUFFLFdBQWdCLHVDQUF1QixFQUFFLHdCQUE2QixDQUFDO1lBQ2hNLEtBQUssQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFPLENBQUMsY0FBYyxFQUFFLFFBQVEsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO1lBQ3hGLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDOUIsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM5QixJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzlCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUN0QyxJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUNwQyxDQUFDO1FBRVMsYUFBYSxDQUFDLFNBQWM7WUFDbEMsSUFBSSxDQUFDLFVBQVUsR0FBSyxTQUFTLENBQUM7WUFDOUIsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDbkUsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDbkUsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyx1QkFBZSxDQUFDO1lBQ25GLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLEtBQUssQ0FBTSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUUsQ0FBQztRQUVTLGlCQUFpQixDQUFDLEtBQVU7WUFDbEMsSUFBSSxDQUFDLGNBQWMsR0FBSSx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3ZFLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzFFLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzFFLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsVUFBVSxLQUFLLElBQUksQ0FBQyxjQUFjO2dCQUMvRCxDQUFDLENBQUMsR0FBRztnQkFDTCxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDOUcsQ0FBQztRQUVlLFFBQVEsQ0FBQyxDQUFNLEVBQUUsQ0FBTTtZQUVuQyxNQUFNLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztZQUN2QyxNQUFNLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztZQUN2QyxNQUFNLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUM7WUFDM0MsTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDO1lBRTNDLE1BQU0sV0FBVyxHQUFHLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFBLElBQUksQ0FBQyxjQUFjLEVBQUksQ0FBQyxDQUFBLENBQUMsQ0FBQztZQUMxRixNQUFNLFVBQVUsR0FBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQyxDQUFDO1lBRTVELE9BQU8sV0FBVyxHQUFHLFVBQVUsQ0FBQztRQUNwQyxDQUFDO1FBRU0sYUFBYSxDQUFDLE1BQVcsRUFBRSxNQUFXO1lBQ3pDLE9BQU8sTUFBTSxHQUFHLElBQUksQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDO1FBQ2xELENBQUM7UUFLTSxjQUFjLENBQUMsSUFBUyxFQUFFLE1BQVcsRUFBRSxNQUFXO1lBQ3JELE1BQU0sSUFBSSxHQUFVLFNBQUEsSUFBSSxDQUFDLGFBQWEsRUFBSSxDQUFDLENBQUEsQ0FBQztZQUM1QyxNQUFNLFVBQVUsR0FBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsR0FBRyxNQUFNLENBQUM7WUFDMUQsTUFBTSxXQUFXLEdBQUcsVUFBVSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDO1lBQ3BFLE1BQU0sS0FBSyxHQUFTLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDbEYsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDakYsQ0FBQztRQUtNLGdCQUFnQixDQUFDLElBQVM7WUFFN0IsTUFBTSxNQUFNLEdBQUcsSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7WUFFdEUsS0FBSyxJQUFJLE1BQU0sR0FBRyxDQUFDLEVBQUUsTUFBTSxHQUFHLElBQUksQ0FBQyxlQUFlLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztnQkFFM0QsS0FBSyxJQUFJLE1BQU0sR0FBRyxDQUFDLEVBQUUsTUFBTSxHQUFHLElBQUksQ0FBQyxlQUFlLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztvQkFFM0QsTUFBTSxLQUFLLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDO29CQUNyRCxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUM5RCxDQUFDO1lBQ0wsQ0FBQztZQUVELE9BQU8sTUFBTSxDQUFDO1FBQ2xCLENBQUM7UUFFTSxrQkFBa0IsQ0FBQyxDQUFNLEVBQUUsQ0FBTTtZQUNwQyxNQUFNLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7WUFDdkMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDO1lBQ3ZDLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDNUMsQ0FBQztRQUVNLGtCQUFrQixDQUFDLENBQU0sRUFBRSxDQUFNO1lBQ3BDLE1BQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztZQUN2QyxNQUFNLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7WUFDdkMsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUM1QyxDQUFDO1FBRU0sd0JBQXdCLENBQUMsQ0FBTSxFQUFFLENBQU07WUFDMUMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDO1lBQ3ZDLE1BQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztZQUN2QyxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDbEQsQ0FBQztRQUVNLHdCQUF3QixDQUFDLENBQU0sRUFBRSxDQUFNO1lBQzFDLE1BQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztZQUN2QyxNQUFNLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7WUFDdkMsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2xELENBQUM7UUFFTSxNQUFNO1lBQ1QsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RFLENBQUM7UUFFTSxNQUFNO1lBQ1QsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RFLENBQUM7UUFFTSxZQUFZO1lBQ2YsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVFLENBQUM7UUFFTSxZQUFZO1lBQ2YsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVFLENBQUM7UUFFTSxXQUFXLENBQUMsVUFBZSxFQUFFLFVBQWU7WUFDL0MsTUFBTSxLQUFLLEdBQUcsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyxVQUFVLENBQUMsR0FBRyx1QkFBZSxDQUFDO1lBQzlFLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFGLENBQUM7UUFFTSxXQUFXLENBQUMsVUFBZSxFQUFFLFVBQWU7WUFDL0MsTUFBTSxLQUFLLEdBQUcsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyxVQUFVLENBQUMsR0FBRyx1QkFBZSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztZQUN6RyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxRixDQUFDO1FBRU0saUJBQWlCLENBQUMsVUFBZSxFQUFFLFVBQWU7WUFDckQsTUFBTSxLQUFLLEdBQUcsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyxVQUFVLENBQUMsR0FBRyx1QkFBZSxDQUFDO1lBQzlFLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hHLENBQUM7UUFFTSxpQkFBaUIsQ0FBQyxVQUFlLEVBQUUsVUFBZTtZQUNyRCxNQUFNLEtBQUssR0FBRyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLFVBQVUsQ0FBQyxHQUFHLHVCQUFlLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDO1lBQ3pHLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hHLENBQUM7UUFFUyx3QkFBd0I7WUFFOUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDNUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDNUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDNUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDNUIsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyQyxDQUFDO1FBRU0sZUFBZTtZQUVsQixJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUU1QixJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7WUFDbEIsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO1lBRWxCLEtBQUssSUFBSSxNQUFNLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7Z0JBRXhELEtBQUssSUFBSSxNQUFNLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7b0JBRXhELE1BQU0sUUFBUSxHQUFHLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDLEdBQUcsdUJBQWUsQ0FBQztvQkFDekUsTUFBTSxRQUFRLEdBQUcsUUFBUSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztvQkFFckQsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNsSCxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBRWxILElBQUksU0FBUyxHQUFHLGNBQWMsRUFBRSxDQUFDO3dCQUM3QixTQUFTLEdBQUcsY0FBYyxDQUFDO3dCQUMzQixJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsQ0FBQzt3QkFDN0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUNyRSxDQUFDO29CQUVELElBQUksU0FBUyxHQUFHLGNBQWMsRUFBRSxDQUFDO3dCQUM3QixTQUFTLEdBQUcsY0FBYyxDQUFDO3dCQUMzQixJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsQ0FBQzt3QkFDN0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUNyRSxDQUFDO2dCQUNMLENBQUM7WUFDTCxDQUFDO1FBQ0wsQ0FBQztRQUVNLGlCQUFpQixDQUFDLElBQVc7WUFFaEMsSUFBSSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUM7Z0JBQUUsT0FBTztZQUMxQixJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQztnQkFBRSxPQUFPO1lBRTFCLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN6QyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDekMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNsRCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRWxELEtBQUssSUFBSSxDQUFDLEdBQUcsU0FBUyxFQUFFLENBQUMsR0FBRyxTQUFTLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztnQkFFMUQsS0FBSyxJQUFJLENBQUMsR0FBRyxTQUFTLEVBQUUsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO29CQUUxRCxNQUFNLE1BQU0sR0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7b0JBQ3pDLE1BQU0sTUFBTSxHQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztvQkFDekMsTUFBTSxNQUFNLEdBQUssTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDO29CQUNyRCxNQUFNLFFBQVEsR0FBRyxNQUFNLEdBQUcsdUJBQWUsQ0FBQztvQkFDMUMsTUFBTSxRQUFRLEdBQUcsUUFBUSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztvQkFFckQsTUFBTSxXQUFXLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7b0JBQzdDLE1BQU0sV0FBVyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO29CQUM3QyxNQUFNLFVBQVUsR0FBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztvQkFDbEQsTUFBTSxVQUFVLEdBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7b0JBRWxELElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQztvQkFDbEMsSUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLGdCQUFnQixDQUFDO29CQUNsQyxJQUFJLElBQUksR0FBRyxXQUFXLENBQUM7b0JBQ3ZCLElBQUksSUFBSSxHQUFHLFdBQVcsQ0FBQztvQkFDdkIsSUFBSSxJQUFJLEdBQUcsV0FBVyxDQUFDO29CQUN2QixJQUFJLElBQUksR0FBRyxXQUFXLENBQUM7b0JBRXZCLEtBQUssSUFBSSxNQUFNLEdBQUcsV0FBVyxHQUFHLENBQUMsRUFBRSxNQUFNLEdBQUcsVUFBVSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7d0JBRS9ELEtBQUssSUFBSSxNQUFNLEdBQUcsV0FBVyxHQUFHLENBQUMsRUFBRSxNQUFNLEdBQUcsVUFBVSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7NEJBRS9ELE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDOzRCQUU5QyxJQUFJLEdBQUcsR0FBRyxNQUFNLEVBQUUsQ0FBQztnQ0FDZixHQUFHLEdBQUcsTUFBTSxDQUFDO2dDQUNiLElBQUksR0FBRyxNQUFNLENBQUM7Z0NBQ2QsSUFBSSxHQUFHLE1BQU0sQ0FBQzs0QkFDbEIsQ0FBQzs0QkFFRCxJQUFJLEdBQUcsR0FBRyxNQUFNLEVBQUUsQ0FBQztnQ0FDZixHQUFHLEdBQUcsTUFBTSxDQUFDO2dDQUNiLElBQUksR0FBRyxNQUFNLENBQUM7Z0NBQ2QsSUFBSSxHQUFHLE1BQU0sQ0FBQzs0QkFDbEIsQ0FBQzt3QkFDTCxDQUFDO29CQUNMLENBQUM7b0JBRUQsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxHQUFPLElBQUksQ0FBQztvQkFDOUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7b0JBQzlDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsR0FBTyxJQUFJLENBQUM7b0JBQzlDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO2dCQUNsRCxDQUFDO1lBQ0wsQ0FBQztRQUNMLENBQUM7S0FDSjtJQXBRRCxrREFvUUM7SUFFRCxrQkFBZSxtQkFBbUIsQ0FBQzs7Ozs7OztJQ3pUbkMsTUFBYSwwQkFDUixTQUFRLGlDQUErRDtRQU94RSxJQUFXLGdCQUFnQixLQUFLLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztRQUV6RCxNQUFNLENBQUMsWUFBWSxDQUFzQyxLQUFVLEVBQUUsS0FBVSxFQUFFLFNBQWMsRUFBRSxRQUFtQjtZQUV2SCxNQUFNLFVBQVUsR0FBSyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3pELE1BQU0sVUFBVSxHQUFLLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDekQsTUFBTSxZQUFZLEdBQUcsU0FBQSxTQUFTLEVBQUksQ0FBQyxDQUFBLENBQUM7WUFDcEMsTUFBTSxVQUFVLEdBQUssVUFBVSxHQUFHLFVBQVUsQ0FBQztZQUM3QyxNQUFNLG1CQUFtQixHQUFHLFFBQVEsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXRELElBQUksVUFBVSxHQUFHLG1CQUFtQixFQUFFLENBQUM7Z0JBQ25DLE9BQU8sQ0FBQyxLQUFLLENBQUMsZ0ZBQWdGLEVBQUUsU0FBUyxFQUFFLG1CQUFtQixFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUN2SSxNQUFNLElBQUksS0FBSyxFQUFFLENBQUM7WUFDdEIsQ0FBQztZQUVELE9BQU8sQ0FBQyxRQUFRLEtBQUssSUFBSTtnQkFDckIsQ0FBQyxDQUFDLElBQUksV0FBVyxDQUFDLFlBQVksR0FBRyxVQUFVLENBQUM7Z0JBQzVDLENBQUMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxZQUFZLEdBQUcsVUFBVSxDQUFDLENBQ0UsQ0FBQztRQUN0RCxDQUFDO1FBSUQsWUFBbUIsS0FBVSxFQUFFLEtBQVUsRUFBRSxTQUFjLEVBQUUsYUFBa0IsRUFBRSxTQUFnQixFQUFFLFFBQTRCLEVBQUUsTUFBbUQsRUFBRSxXQUFnQix1Q0FBdUIsRUFBRSx3QkFBNkIsQ0FBQztZQUN2UCxNQUFNLGtCQUFrQixHQUFHLElBQUEsaURBQXVCLEVBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1lBQzdFLE1BQU0sU0FBUyxHQUFHLE1BQU0sYUFBTixNQUFNLGNBQU4sTUFBTSxHQUFJLDBCQUEwQixDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLGtCQUFrQixFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ2hILEtBQUssQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUscUJBQXFCLENBQUMsQ0FBQztZQUNyRyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsUUFBUSxDQUFDO1lBQ2xDLElBQUksQ0FBQyxnQkFBZ0IsR0FBSSxRQUFRLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNuRCxJQUFJLENBQUMsY0FBYyxHQUFNLFFBQVEsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1FBQy9ELENBQUM7UUFFZSxhQUFhLENBQUMsTUFBVyxFQUFFLE1BQVc7WUFDbEQsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUM7UUFDL0UsQ0FBQztRQUtlLGNBQWMsQ0FBQyxJQUFTLEVBQUUsTUFBVyxFQUFFLE1BQVc7WUFDOUQsTUFBTSxJQUFJLEdBQVUsU0FBQSxJQUFJLENBQUMsYUFBYSxFQUFJLENBQUMsQ0FBQSxDQUFDO1lBQzVDLE1BQU0sVUFBVSxHQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixHQUFHLENBQUMsQ0FBQztZQUN4RixNQUFNLFdBQVcsR0FBRyxVQUFVLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDO1lBQzVGLE1BQU0sS0FBSyxHQUFTLElBQUksR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQzFHLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2pGLENBQUM7UUFLZSxnQkFBZ0IsQ0FBQyxJQUFTO1lBRXRDLE1BQU0sTUFBTSxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7WUFFOUYsS0FBSyxJQUFJLE1BQU0sR0FBRyxDQUFDLEVBQUUsTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztnQkFFMUQsS0FBSyxJQUFJLE1BQU0sR0FBRyxDQUFDLEVBQUUsTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLEVBQUUsTUFBTSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO29CQUVqRixNQUFNLEtBQUssR0FBRyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUM7b0JBQ2xGLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQzlELENBQUM7WUFDTCxDQUFDO1lBRUQsT0FBTyxNQUFNLENBQUM7UUFDbEIsQ0FBQztRQUVrQixtQkFBbUIsQ0FBQyxLQUFpRCxFQUFFLEtBQVUsRUFBRSxLQUFZO1lBQzlHLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUM5RSxDQUFDO1FBRWtCLG1CQUFtQixDQUFDLEtBQWlELEVBQUUsS0FBVTtZQUNoRyxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO1FBQzlDLENBQUM7UUFFZSxRQUFRLENBQUMsQ0FBTSxFQUFFLENBQU07WUFFbkMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7WUFDdEMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7WUFDdEMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLEdBQUcsQ0FBQyxDQUFDO1lBQzFDLE1BQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQztZQUUxQyxNQUFNLFVBQVUsR0FBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUM7WUFDeEYsTUFBTSxXQUFXLEdBQUcsVUFBVSxHQUFHLENBQUMsU0FBQSxJQUFJLENBQUMsYUFBYSxFQUFJLENBQUMsQ0FBQSxDQUFDLENBQUM7WUFDM0QsTUFBTSxVQUFVLEdBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDO1lBQ3pELE1BQU0sV0FBVyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxxQkFBcUI7WUFFekUsT0FBTyxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsV0FBVyxDQUFDO1FBQzVFLENBQUM7S0FDSjtJQWhHRCxnRUFnR0M7SUFFRCxrQkFBZSwwQkFBMEIsQ0FBQzs7Ozs7SUM5RjFDLDhCQXlDQztJQXpDRCxTQUFnQixTQUFTLENBQ3JCLEtBQWEsRUFDYixLQUFhLEVBQ2IsU0FBaUIsRUFDakIsYUFBcUIsRUFDckIsZ0JBQTJCO1FBRzNCLElBQUksT0FBTyxJQUFJLEtBQUssV0FBVyxFQUFFLENBQUM7WUFDOUIsT0FBTyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQ2pDLE1BQU0sSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUN0QixDQUFDO1FBRUQsTUFBTSxTQUFTLEdBQU0sSUFBQSxpREFBdUIsRUFBQyxTQUFTLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDdkUsTUFBTSxVQUFVLEdBQUssQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6RCxNQUFNLFVBQVUsR0FBSyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3pELE1BQU0sWUFBWSxHQUFHLFNBQUEsU0FBUyxFQUFJLENBQUMsQ0FBQSxDQUFDO1FBQ3BDLE1BQU0sVUFBVSxHQUFLLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFFN0MsSUFBSSxnQkFBZ0IsS0FBSyxNQUFNLEVBQUUsQ0FBQztZQUU5QixNQUFNLG1CQUFtQixHQUFHLGdCQUFnQixLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFOUQsSUFBSSxVQUFVLEdBQUcsbUJBQW1CLEVBQUUsQ0FBQztnQkFDbkMsT0FBTyxDQUFDLEtBQUssQ0FBQyxnRkFBZ0YsRUFBRSxTQUFTLEVBQUUsbUJBQW1CLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0JBQ3ZJLE1BQU0sSUFBSSxLQUFLLEVBQUUsQ0FBQztZQUN0QixDQUFDO1FBQ0wsQ0FBQztRQUVELE1BQU0sR0FBRyxHQUFHLGdCQUFnQixLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsZ0JBQWdCLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDSCxDQUFDLENBQUMsQ0FBQyxVQUFVO1FBRXJELE1BQU0sR0FBRyxHQUFHLFlBQVksR0FBRyxVQUFVLENBQUM7UUFDdEMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFFcEMsUUFBUSxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3ZCLEtBQUssSUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUE4QixDQUFDO1lBQzVGLEtBQUssSUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUE4QixDQUFDO1lBQzlGLE9BQU8sQ0FBQyxDQUFHLE9BQU8sSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBOEIsQ0FBQztRQUNuRyxDQUFDO0lBQ0wsQ0FBQzs7Ozs7SUNWRCxDQUFDLEdBQUcsRUFBRTtRQUVGLElBQUksQ0FBRSxNQUFjLENBQUMsa0NBQWtDLEVBQUUsQ0FBQztZQUN0RCxPQUFPO1FBQ1gsQ0FBQztRQUVELGFBQWE7UUFDYixNQUFNLG9CQUFvQixHQUFHLEVBQUUsQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQztRQUV2RSxhQUFhO1FBQ2IsRUFBRSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsWUFBWSxHQUFHLFVBQ3hDLE1BQStCLEVBQy9CLFlBQW1ELEVBQ25ELElBQTJCLEVBQzNCLEtBQWEsRUFDYixNQUFnQjtZQUdoQixJQUFJLElBQUksQ0FBQyxlQUFlLElBQUksTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO2dCQUUxQyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBRSxZQUFZLENBQUMsSUFBWSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDNUUsSUFBSSxNQUFNLEVBQUUsQ0FBQztvQkFDVCxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDdEUsQ0FBQztnQkFFRCxJQUFJLEVBQUUsR0FBRyxLQUFLLENBQUM7Z0JBRWYsS0FBSyxNQUFNLFNBQVMsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7b0JBRWxELElBQUksU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO3dCQUVwQixJQUFJLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQzs0QkFFdkIsS0FBSyxNQUFNLE9BQU8sSUFBSSxTQUFTLENBQUMsVUFBVSxFQUFFLENBQUM7Z0NBQ3pDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7NEJBQzFFLENBQUM7d0JBQ0wsQ0FBQzt3QkFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7d0JBQzlCLEVBQUUsR0FBRyxJQUFJLENBQUM7b0JBQ2QsQ0FBQztnQkFDTCxDQUFDO1lBQ0wsQ0FBQztpQkFDSSxDQUFDO2dCQUVGLG9CQUFvQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQy9FLENBQUM7UUFDTCxDQUFDLENBQUE7SUFFTCxDQUFDLENBQUMsRUFBRSxDQUFDOzs7Ozs7SUN6RkwsTUFBYSxpQkFBaUI7UUFTMUIsSUFBVyxPQUFPLEtBQUssT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUU5QyxZQUFZLGNBQWtDLEVBQUUsS0FBYSxFQUFFLEtBQWEsRUFBRSxNQUFtQjtZQUU3RixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUNwQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUVwQixNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFOUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLGFBQU4sTUFBTSxjQUFOLE1BQU0sR0FBSSxJQUFJLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsbURBQW1EO1lBQ3ZHLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRTtnQkFDM0MsS0FBSyxFQUFFLENBQUM7Z0JBQ1IsTUFBTSxFQUFFLENBQUM7Z0JBQ1QsTUFBTSxFQUFFLEVBQUUsQ0FBQyxrQkFBa0I7Z0JBQzdCLE9BQU8sRUFBRSxLQUFLO2dCQUNkLFNBQVMsRUFBRSxFQUFFLENBQUMsY0FBYztnQkFDNUIsU0FBUyxFQUFFLEVBQUUsQ0FBQyxjQUFjO2dCQUM1QixRQUFRLEVBQUUsRUFBRSxDQUFDLHFCQUFxQjtnQkFDbEMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxxQkFBcUI7Z0JBQ2xDLEtBQUssRUFBRSxjQUFjLENBQUMsUUFBUTtnQkFDOUIsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQzthQUN6QixDQUFDLENBQUM7UUFDUCxDQUFDO1FBRU0sT0FBTzs7WUFDVixNQUFBLElBQUksQ0FBQyxRQUFRLDBDQUFFLE9BQU8sRUFBRSxDQUFDO1FBQzdCLENBQUM7UUFFTSxVQUFVLENBQUMsQ0FBTSxFQUFFLENBQU0sRUFBRSxPQUFZO1lBQzFDLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM1QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3RDLENBQUM7UUFFTSxRQUFRO1lBRVgsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBRWhCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO2dCQUNwQyxNQUFNLGFBQWEsR0FBRyxDQUFDLENBQUM7Z0JBQ3hCLE1BQU0sTUFBTSxHQUFHLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUVqQyxJQUFJLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztvQkFFbEIsTUFBTSxFQUFFLEdBQUksTUFBa0MsQ0FBQyxFQUFFLENBQUM7b0JBQ2xELE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztvQkFDbkQsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO29CQUN0RCxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7b0JBQ25ELE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQztvQkFFcEQsRUFBRSxDQUFDLFdBQVcsQ0FBQyxhQUFhLEVBQUUsYUFBYSxDQUFDLENBQUM7b0JBQzdDLEVBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLENBQUMsRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUM3SCxDQUFDO3FCQUNJLElBQUksTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO29CQUV2QixNQUFNLE1BQU0sR0FBSyxNQUFjLENBQUMsSUFBaUIsQ0FBQztvQkFDbEQsTUFBTSxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQWUsQ0FBQztvQkFFOUQsTUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQ3JCO3dCQUNJLE9BQU8sRUFBRSxPQUFPO3dCQUNoQixNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQzt3QkFDakIsUUFBUSxFQUFFLENBQUM7cUJBQ2QsRUFDRCxNQUFNLEVBQ047d0JBQ0ksTUFBTSxFQUFFLENBQUM7d0JBQ1QsV0FBVyxFQUFFLENBQUMsR0FBRyxhQUFhLEVBQUUsMkJBQTJCO3dCQUMzRCxZQUFZLEVBQUUsYUFBYTtxQkFDOUIsRUFDRDt3QkFDSSxLQUFLLEVBQUUsYUFBYTt3QkFDcEIsTUFBTSxFQUFFLGFBQWE7cUJBQ3hCLENBQ0osQ0FBQztnQkFDTixDQUFDO1lBQ0wsQ0FBQztRQUNMLENBQUM7O0lBdEZMLDhDQXVGQztJQXJGMEIsNEJBQVUsR0FBRyxDQUFDLENBQUM7Ozs7OztJQ0YxQywwQkFhQztJQUVELHNCQUVDO0lBRUQsa0NBRUM7SUFFRCw0Q0FXQztJQUVELGdEQWFDO0lBR0Qsc0JBRUM7SUF0REQsU0FBZ0IsT0FBTyxDQUFDLEdBQVcsRUFBRSxRQUFnQixFQUFFLE1BQWM7UUFFakUsTUFBTSxHQUFHLEdBQUcsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzNCLE1BQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUM7UUFDMUIsTUFBTSxXQUFXLEdBQUcsUUFBUSxHQUFHLE1BQU0sQ0FBQztRQUV0QyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUM7UUFFakIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ25DLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQzdCLENBQUM7UUFFRCxPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBRUQsU0FBZ0IsS0FBSyxDQUFDLEtBQWEsRUFBRSxHQUFXLEVBQUUsR0FBVztRQUM1RCxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVELFNBQWdCLFdBQVc7UUFDdkIsT0FBTyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVELFNBQWdCLGdCQUFnQixDQUFDLEtBQVksRUFBRSxHQUFVO1FBRXJELElBQUksR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ2YsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzVDLENBQUM7UUFFRCxNQUFNLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDO1FBRTFCLE1BQU0sV0FBVyxHQUFHLFdBQVcsRUFBRSxHQUFHLEtBQUssR0FBRyxLQUFLLENBQUM7UUFFbEQsT0FBTyxXQUFXLENBQUM7SUFDdkIsQ0FBQztJQUVELFNBQWdCLGtCQUFrQixDQUFDLENBQU07UUFFckMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBRVosSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDVCxPQUFPLENBQUMsQ0FBQztRQUNiLENBQUM7UUFFRCxPQUFPLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNiLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLENBQUM7UUFFRCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFFRCx1Q0FBdUM7SUFDdkMsU0FBZ0IsS0FBSztRQUNwQixPQUFPLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO0lBQ2xDLENBQUM7SUFFTSxNQUFNLFlBQVksR0FBRyxDQUFDLGNBQWtDLEVBQUUsVUFBa0IsRUFBRSxFQUFFO1FBQ25GLE9BQU8sWUFBWSxHQUFHLGNBQWMsQ0FBQyxTQUFTLEdBQUcsV0FBVyxHQUFHLFVBQVUsQ0FBQztJQUM5RSxDQUFDLENBQUE7SUFGWSxRQUFBLFlBQVksZ0JBRXhCO0lBRVksUUFBQSxZQUFZLEdBQUcsQ0FBQyxHQUFHLEVBQUU7UUFDOUIsTUFBTSxVQUFVLEdBQUksSUFBSSxVQUFVLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNqRCxNQUFNLFdBQVcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkQsT0FBTyxXQUFXLENBQUMsQ0FBQyxDQUFDLEtBQUssTUFBTSxDQUFDO0lBQ3JDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFFRSxNQUFNLHVCQUF1QixHQUFHLENBQUMsY0FBa0MsRUFBRSxFQUFFO1FBRTFFLElBQUksQ0FBQztZQUVELDBCQUEwQjtZQUMxQix5Q0FBeUM7WUFDekMsSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLElBQUk7Z0JBQ3JELFNBQVMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLFNBQVMsQ0FBQyxjQUFjLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQ3ZFLE9BQU8sS0FBSyxDQUFDO1lBQ2pCLENBQUM7WUFFRCxJQUFJLGNBQWMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFFMUIsTUFBTSxFQUFFLEdBQUksY0FBMEMsQ0FBQyxFQUFFLENBQUM7Z0JBRTFELElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsd0JBQXdCLENBQUMsQ0FBQztnQkFDdkQsSUFBSSxNQUFNLEVBQUUsQ0FBQztvQkFDVCxNQUFNLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO2dCQUNsRCxDQUFDO2dCQUVELElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO29CQUNYLE9BQU8sS0FBSyxDQUFDO2dCQUNqQixDQUFDO1lBQ0wsQ0FBQztZQUVELE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFDRCxPQUFPLEVBQUUsRUFBRSxDQUFDO1lBQ1IsT0FBTyxLQUFLLENBQUM7UUFDakIsQ0FBQztJQUNMLENBQUMsQ0FBQTtJQTlCWSxRQUFBLHVCQUF1QiwyQkE4Qm5DOzs7Ozs7SUM4WEQsNERBU0M7SUFFRCx3Q0FTQztJQUVELHdDQVNDO0lBYUQsd0RBNkZDO0lBdG1CWSxRQUFBLG1CQUFtQixHQUFLLGlCQUFpQixDQUFDO0lBQzFDLFFBQUEsb0JBQW9CLEdBQUksZUFBZSxDQUFDO0lBQ3hDLFFBQUEsb0JBQW9CLEdBQUksZUFBZSxDQUFDO0lBRXhDLFFBQUEsNkJBQTZCLEdBQUcsdUJBQXVCLENBQUM7SUFDeEQsUUFBQSx5QkFBeUIsR0FBTywwQkFBMEIsQ0FBQztJQUMzRCxRQUFBLHFCQUFxQixHQUFXLHNCQUFzQixDQUFDO0lBRXZELFFBQUEseUJBQXlCLEdBQUcsbUJBQW1CLENBQUM7SUFDaEQsUUFBQSx5QkFBeUIsR0FBRyxtQkFBbUIsQ0FBQztJQUNoRCxRQUFBLHdCQUF3QixHQUFJLGtCQUFrQixDQUFDO0lBRS9DLFFBQUEsaUJBQWlCLEdBQUcsd0JBQVksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7SUFFcEQsUUFBQSxTQUFTLEdBQ3RCOzs7Ozs7Ozs7Ozs7Ozs7O0NBZ0JDLENBQUM7SUFFVyxRQUFBLGNBQWMsR0FDM0I7c0JBQ3NCLDJCQUFtQjtDQUN4QyxDQUFDO0lBRVcsUUFBQSx1QkFBdUIsR0FDcEM7c0JBQ3NCLDJCQUFtQjtzQkFDbkIscUNBQTZCO0NBQ2xELENBQUM7SUFFVyxRQUFBLG1CQUFtQixHQUNoQztzQkFDc0IsMkJBQW1CO3NCQUNuQixxQ0FBNkI7Q0FDbEQsQ0FBQztJQUVXLFFBQUEsMEJBQTBCLEdBQ3ZDO3NCQUNzQiwyQkFBbUI7c0JBQ25CLHFDQUE2QjtDQUNsRCxDQUFDO0lBRVcsUUFBQSxzQkFBc0IsR0FDbkM7MkNBQzJDLGlDQUF5Qjs7O3NCQUc5QyxpQ0FBeUIsaUNBQWlDLGlDQUF5QixhQUFhLGlDQUF5Qjs7c0JBRXpILGlDQUF5QixJQUFJLGlDQUF5Qjs7Q0FFM0UsQ0FBQztJQUVXLFFBQUEsV0FBVyxHQUN4Qjs7Ozs7MkJBSzJCLGlDQUF5Qjs0QkFDeEIsNkJBQXFCOzs0QkFFckIsaUNBQXlCOzs7O0NBSXBELENBQUM7SUFFVyxRQUFBLGNBQWMsR0FDM0I7Ozs7OztDQU1DLENBQUM7SUFFVyxRQUFBLG9DQUFvQyxHQUNqRDs7c0JBRXNCLDJCQUFtQixNQUFNLHFDQUE2Qjs7Q0FFM0UsQ0FBQztJQUVXLFFBQUEsMkNBQTJDLEdBQ3hEOzs7Ozs7Ozs7Ozs7Ozs7NEJBZTRCLDJCQUFtQjt1QkFDeEIscUNBQTZCOzs4QkFFdEIscUNBQTZCOztDQUUxRCxDQUFDO0lBRVcsUUFBQSx1QkFBdUIsR0FDcEM7O3NCQUVzQiwyQkFBbUIsT0FBTyxpQ0FBeUI7O0NBRXhFLENBQUM7SUFFVyxRQUFBLG9CQUFvQixHQUNqQzs7Ozs7Ozs7Ozs7Ozs7Q0FjQyxDQUFDO0lBRVcsUUFBQSx5QkFBeUIsR0FDdEM7O2dDQUVnQyxpQ0FBeUI7O0NBRXhELENBQUM7SUFFRiwrSEFBK0g7SUFDL0gsK0RBQStEO0lBQy9EOzs7Ozs7OztNQVFFO0lBRVcsUUFBQSwyQkFBMkIsR0FDeEM7O3VCQUV1Qix3QkFBWSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVE7Ozs7Ozs7O3NDQVFkLGlDQUF5Qjs7O0NBRzlELENBQUM7SUFFRixrREFBa0Q7SUFDbEQsdUNBQXVDO0lBQzFCLFFBQUEsNEJBQTRCLEdBQ3pDOzs7Ozs7O3NDQU9zQyxpQ0FBeUI7Ozs7Q0FJOUQsQ0FBQztJQUVGLGtFQUFrRTtJQUNsRSx1Q0FBdUM7SUFDMUIsUUFBQSw2QkFBNkIsR0FDMUM7Ozs7Ozs7c0NBT3NDLGlDQUF5Qjs7OztDQUk5RCxDQUFDO0lBRVcsUUFBQSx5QkFBeUIsR0FDdEM7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBaUJDLENBQUM7SUFFVyxRQUFBLDBCQUEwQixHQUN2Qzs7Ozs7Q0FLQyxDQUFDO0lBRVcsUUFBQSxvQkFBb0IsR0FDakM7O2tEQUVrRCxpQ0FBeUI7Ozs7OztDQU0xRSxDQUFDO0lBRVcsUUFBQSxZQUFZLEdBQUcsRUFBRSxDQUFDO0lBQ2xCLFFBQUEscUJBQXFCLEdBQUcsRUFBRSxDQUFDO0lBQzNCLFFBQUEsZUFBZSxHQUFHLEVBQUUsQ0FBQztJQUVyQixRQUFBLFdBQVcsR0FDeEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkEyQjRCLDZCQUFxQjs7Ozs7O0NBTWhELENBQUM7SUFFVyxRQUFBLEtBQUssR0FDbEI7Q0FDQyxDQUFDO0lBRUYscUNBQXFDO0lBQ3hCLFFBQUEsVUFBVSxHQUN2Qjs7OztDQUlDLENBQUM7SUFFVyxRQUFBLG1CQUFtQixHQUNoQzs7O2lDQUdpQyw2QkFBcUI7Ozs7Ozs7Ozs7Q0FVckQsQ0FBQztJQUVXLFFBQUEsUUFBUSxHQUNyQjs7Ozs7Q0FLQyxDQUFDO0lBRVcsUUFBQSxZQUFZLEdBQ3pCOzs7Ozs7Ozs7Ozs7Ozs7O0NBZ0JDLENBQUM7SUFFVyxRQUFBLE9BQU8sR0FDcEI7Ozs7Ozs7OztDQVNDLENBQUM7SUFFVyxRQUFBLHNCQUFzQixHQUNuQzs7Q0FFQyxDQUFDO0lBRVcsUUFBQSxxQkFBcUIsR0FDbEM7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FnQkMsQ0FBQztJQUVXLFFBQUEsY0FBYyxHQUFHLENBQUMsQ0FBQyxDQUFDLDBCQUEwQjtJQUM5QyxRQUFBLFNBQVMsR0FDdEI7Z0NBQ2dDLGdDQUF3Qjs7Ozt3Q0FJaEIsc0JBQWM7dUNBQ2Ysc0JBQWM7d0NBQ2Isc0JBQWM7Ozs7Ozs7O3lEQVFHLGdDQUF3Qjs7Ozs7OEJBS25ELHNCQUFjOzs7Ozs7Ozs7Ozs7O0NBYTNDLENBQUM7SUFFVyxRQUFBLHNCQUFzQixHQUFHO1FBQ2xDLHlCQUF5QixFQUF6QixpQ0FBeUI7UUFDekIsMkJBQTJCLEVBQTNCLG1DQUEyQjtRQUMzQiw0QkFBNEIsRUFBNUIsb0NBQTRCO1FBQzVCLDZCQUE2QixFQUE3QixxQ0FBNkI7S0FDaEMsQ0FBQTtJQUVZLFFBQUEsTUFBTSxtQ0FFWiw4QkFBc0IsS0FFekIsc0JBQXNCLEVBQXRCLDhCQUFzQjtRQUV0QiwyQ0FBMkMsRUFBM0MsbURBQTJDO1FBQzNDLG9DQUFvQyxFQUFwQyw0Q0FBb0M7UUFDcEMsdUJBQXVCLEVBQXZCLCtCQUF1QjtRQUV2QiwwQkFBMEIsRUFBMUIsa0NBQTBCO1FBRTFCLG9CQUFvQixFQUFwQiw0QkFBb0I7UUFDcEIsb0JBQW9CLEVBQXBCLDRCQUFvQjtRQUNwQix5QkFBeUIsRUFBekIsaUNBQXlCO1FBRXpCLG1CQUFtQixFQUFuQiwyQkFBbUI7UUFFbkIsU0FBUztRQUNULFNBQVMsRUFBVCxpQkFBUztRQUNULDBCQUEwQixFQUExQixrQ0FBMEI7UUFDMUIsbUJBQW1CLEVBQW5CLDJCQUFtQjtRQUNuQixjQUFjLEVBQWQsc0JBQWM7UUFDZCxXQUFXLEVBQVgsbUJBQVc7UUFDWCxjQUFjLEVBQWQsc0JBQWM7UUFFZCxlQUFlLEVBQWYsdUJBQWU7UUFFZixXQUFXLEVBQVgsbUJBQVc7UUFDWCxZQUFZLEVBQVosb0JBQVk7UUFDWixxQkFBcUIsRUFBckIsNkJBQXFCO1FBQ3JCLFFBQVEsRUFBUixnQkFBUTtRQUNSLFlBQVksRUFBWixvQkFBWTtRQUVaLEtBQUssRUFBTCxhQUFLO1FBQ0wsT0FBTyxFQUFQLGVBQU87UUFDUCxVQUFVLEVBQVYsa0JBQVU7UUFFVixXQUFXO1FBQ1gsc0JBQXNCLEVBQXRCLDhCQUFzQjtRQUN0QixxQkFBcUIsRUFBckIsNkJBQXFCO1FBQ3JCLFNBQVMsRUFBVCxpQkFBUyxJQUNaO0lBU0QsU0FBZ0Isd0JBQXdCLENBQUMsTUFBd0IsRUFBRSxXQUF3QztRQUN2RyxRQUFRLE1BQU0sRUFBRSxDQUFDO1lBQ2IsS0FBSyxNQUFNLENBQUMsQ0FBRyxPQUFPLFdBQVcsQ0FBQyx5QkFBeUIsQ0FBQztZQUM1RCxLQUFLLE1BQU0sQ0FBQyxDQUFHLE9BQU8sV0FBVyxDQUFDLDJCQUEyQixDQUFDO1lBQzlELEtBQUssUUFBUSxDQUFDLENBQUMsT0FBTyxXQUFXLENBQUMsNEJBQTRCLENBQUM7WUFDL0QsS0FBSyxRQUFRLENBQUMsQ0FBQyxPQUFPLFdBQVcsQ0FBQyw2QkFBNkIsQ0FBQztZQUNoRSxPQUFPLENBQUMsQ0FBQyxNQUFNO1FBQ25CLENBQUM7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVELFNBQWdCLGNBQWMsQ0FBQyxNQUF3QjtRQUNuRCxRQUFRLE1BQU0sRUFBRSxDQUFDO1lBQ2IsS0FBSyxNQUFNLENBQUMsQ0FBRyxPQUFPLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQztZQUMxQyxLQUFLLE1BQU0sQ0FBQyxDQUFHLE9BQU8sRUFBRSxDQUFDLGtCQUFrQixDQUFDO1lBQzVDLEtBQUssUUFBUSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsaUJBQWlCLENBQUM7WUFDM0MsS0FBSyxRQUFRLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQztZQUM1QyxPQUFPLENBQUMsQ0FBQyxNQUFNO1FBQ25CLENBQUM7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVELFNBQWdCLGNBQWMsQ0FBQyxNQUF3QjtRQUNuRCxRQUFRLE1BQU0sRUFBRSxDQUFDO1lBQ2IsS0FBSyxNQUFNLENBQUMsQ0FBRyxPQUFPLGdCQUFnQixDQUFDO1lBQ3ZDLEtBQUssTUFBTSxDQUFDLENBQUcsT0FBTyxpQkFBaUIsQ0FBQztZQUN4QyxLQUFLLFFBQVEsQ0FBQyxDQUFDLE9BQU8saUJBQWlCLENBQUM7WUFDeEMsS0FBSyxRQUFRLENBQUMsQ0FBQyxPQUFPLGlCQUFpQixDQUFDO1lBQ3hDLE9BQU8sQ0FBQyxDQUFDLE1BQU07UUFDbkIsQ0FBQztRQUNELE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBYUQsU0FBZ0Isc0JBQXNCLENBQUMsRUFDbkMsS0FBSyxFQUNMLEtBQUssRUFDTCxTQUFTLEVBQ1Qsa0JBQWtCLEVBQ2xCLFVBQVUsRUFDVixlQUFlLEVBQ2YsV0FBVyxHQUFHLGNBQU0sRUFDcEIsYUFBYSxHQUFHLElBQUksR0FDQTtRQUVwQixNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsU0FBUzthQUNsQyxPQUFPLENBQUMscUJBQXFCLEVBQUUsTUFBTSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDbEYsT0FBTyxDQUFDLG1CQUFtQixFQUFFLE1BQU0sQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLENBQUMsQ0FBQzthQUM1RCxPQUFPLENBQUMsZUFBZSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN2QyxPQUFPLENBQUMsZUFBZSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN2QyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUM1QyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUM1QyxPQUFPLENBQUMscUJBQXFCLEVBQUUsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTFELE1BQU0scUJBQXFCLEdBQUcsd0JBQXdCLENBQUMsZUFBZSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBRXJGLE1BQU0sV0FBVyxHQUFHLFdBQVcsQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDLHNCQUFzQixDQUFDLFVBQVUsQ0FBQyx3QkFBd0IsRUFBRSxjQUFjLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztRQUV2SixNQUFNLFdBQVcsR0FBRyxVQUFVLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsMEJBQTBCLENBQUMsQ0FBQztZQUNuRSxVQUFVLEtBQUssUUFBUSxDQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUMsQ0FBQztnQkFDakMsV0FBVyxDQUFDLGNBQWMsQ0FBQztRQUUxRSxNQUFNLGtCQUFrQixHQUFHLFVBQVUsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDO1lBQ3BGLFVBQVUsS0FBSyxRQUFRLENBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO2dCQUNsRCxXQUFXLENBQUMsdUJBQXVCLENBQUM7UUFFMUYsSUFBSSxhQUFhLEtBQUssSUFBSSxFQUFFLENBQUM7WUFFekIsTUFBTSxZQUFZLEdBQUcsV0FBVyxDQUFDLG1CQUFtQixHQUFHLFdBQVcsQ0FBQyxZQUFZLENBQUM7WUFDaEYsTUFBTSxXQUFXLEdBQUcsU0FBUztrQkFDdkIsV0FBVztrQkFDWCxXQUFXO2tCQUNYLGtCQUFrQjtrQkFDbEIscUJBQXFCO2tCQUNyQixXQUFXLENBQUMsb0JBQW9CO2tCQUNoQyxXQUFXLENBQUMseUJBQXlCO2tCQUNyQyxXQUFXLENBQUMsMEJBQTBCO2tCQUN0QyxXQUFXLENBQUMsb0JBQW9CO2tCQUNoQyxXQUFXLENBQUMsV0FBVyxDQUFDO1lBRTlCLE1BQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQyxzQkFBc0I7a0JBQ2xDLFdBQVcsQ0FBQyxxQkFBcUI7a0JBQ2pDLFdBQVcsQ0FBQyxTQUFTLENBQUM7WUFFeEMsT0FBTztnQkFFSCxTQUFTO2dCQUNULFlBQVk7Z0JBQ1osV0FBVztnQkFDWCxlQUFlLEVBQUUsRUFBRTtnQkFDbkIscUJBQXFCLEVBQUUsRUFBRTtnQkFFekIsV0FBVztnQkFDWCxTQUFTO2FBQ1osQ0FBQztRQUNOLENBQUM7UUFFRCxNQUFNLE9BQU8sR0FBRyxXQUFXLENBQUMsbUJBQW1CLEdBQUcsV0FBVyxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUMsT0FBTyxDQUFDO1FBQy9GLE1BQU0sTUFBTSxHQUFHLFdBQVcsR0FBRyxXQUFXLEdBQUcsV0FBVyxDQUFDLGNBQWMsQ0FBQztRQUN0RSxNQUFNLFdBQVcsR0FBRyxTQUFTO2NBQ3ZCLGtCQUFrQjtjQUNsQixxQkFBcUI7Y0FDckIsV0FBVyxDQUFDLG9CQUFvQjtjQUNoQyxXQUFXLENBQUMseUJBQXlCO2NBQ3JDLFdBQVcsQ0FBQywwQkFBMEI7Y0FDdEMsV0FBVyxDQUFDLG9CQUFvQjtjQUNoQyxXQUFXLENBQUMsV0FBVyxDQUFDO1FBRTlCLE1BQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQyxzQkFBc0I7Y0FDbEMsV0FBVyxDQUFDLHFCQUFxQjtjQUNqQyxXQUFXLENBQUMsU0FBUyxDQUFDO1FBRXhDLE9BQU87WUFFSCxTQUFTO1lBQ1QsTUFBTTtZQUNOLFdBQVc7WUFDWCxRQUFRLEVBQUUsV0FBVyxDQUFDLFFBQVE7WUFDOUIsS0FBSyxFQUFFLFdBQVcsQ0FBQyxLQUFLO1lBQ3hCLE9BQU87WUFFUCxlQUFlLEVBQUUsV0FBVyxDQUFDLGVBQWU7WUFDNUMsWUFBWSxFQUFFLFdBQVcsQ0FBQyxZQUFZO1lBRXRDLFdBQVc7WUFDWCxTQUFTO1NBQ1osQ0FBQTtJQUNMLENBQUM7Ozs7OztJQ3RIRCxvREErRUM7SUEvakJZLFFBQUEsY0FBYyxHQUFHLGlCQUFpQixDQUFDO0lBQ25DLFFBQUEsY0FBYyxHQUFHLGVBQWUsQ0FBQztJQUNqQyxRQUFBLGFBQWEsR0FBSSxjQUFjLENBQUM7SUFFaEMsUUFBQSxhQUFhLEdBQVksT0FBTyxDQUFDO0lBQ2pDLFFBQUEscUJBQXFCLEdBQUksZUFBZSxDQUFDO0lBQ3pDLFFBQUEscUJBQXFCLEdBQUksZUFBZSxDQUFDO0lBQ3pDLFFBQUEscUJBQXFCLEdBQUksZUFBZSxDQUFDO0lBQ3pDLFFBQUEsZ0JBQWdCLEdBQVMsZUFBZSxDQUFDO0lBQ3pDLFFBQUEsc0JBQXNCLEdBQUcsZ0JBQWdCLENBQUM7SUFFMUMsUUFBQSxZQUFZLEdBQUcsRUFBRSxDQUFDO0lBQ2xCLFFBQUEscUJBQXFCLEdBQUcsRUFBRSxDQUFDO0lBQzNCLFFBQUEsZUFBZSxHQUFHLEVBQUUsQ0FBQztJQUVyQixRQUFBLFNBQVMsR0FDdEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FzQkMsQ0FBQztJQUVXLFFBQUEsY0FBYyxHQUMzQjs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBa0JDLENBQUM7SUFFVyxRQUFBLFlBQVksR0FDekI7Ozs7Ozs7Ozs7Ozs7OztDQWVDLENBQUM7SUFFVyxRQUFBLFdBQVcsR0FDeEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBdUJDLENBQUM7SUFFVyxRQUFBLFFBQVEsR0FDckI7Ozs7O0NBS0MsQ0FBQztJQUVXLFFBQUEsS0FBSyxHQUNsQjs7OztDQUlDLENBQUM7SUFFRixrQkFBa0I7SUFDTCxRQUFBLFVBQVUsR0FDdkI7Ozs7Q0FJQyxDQUFDO0lBRVcsUUFBQSxNQUFNLEdBQ25COzs7Ozs7O29CQU9vQiw2QkFBcUI7b0JBQ3JCLDBEQUF5Qjs7b0JBRXpCLHdCQUFnQjtvQkFDaEIscUJBQWE7b0JBQ2IsOEJBQXNCOzttQkFFdkIsNkJBQXFCO21CQUNyQiw2QkFBcUI7O3NCQUVsQixzQkFBYztxQkFDZixzQkFBYztxQkFDZCxxQkFBYTs7Ozs7Ozs7Ozs7Q0FXakMsQ0FBQztJQUVXLFFBQUEsY0FBYyxHQUMzQjs7OztDQUlDLENBQUM7SUFFVyxRQUFBLGtCQUFrQixHQUMvQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OENBdUI4QywwREFBeUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBNkJ0RSxDQUFDO0lBRVcsUUFBQSxjQUFjLEdBQzNCOzs7dUJBR3VCLHNCQUFjOzs7O21DQUlGLHNCQUFjO21DQUNkLHNCQUFjOzs7Ozs7O3NDQU9YLDZCQUFxQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzQ0FzQnJCLDZCQUFxQjs7Ozs7Q0FLMUQsQ0FBQztJQUVXLFFBQUEsZ0JBQWdCLEdBQzdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d0JBaUN3QixzQkFBYzt3QkFDZCxxQkFBYTs7OzsrQkFJTix3QkFBZ0I7Ozs7a0NBSWIsd0JBQWdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MENBd0JSLHFCQUFhOzs7Ozs7K0JBTXhCLDhCQUFzQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQ0E0QlgsNkJBQXFCOzs7bUZBR29CLDZCQUFxQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkErQjVFLHNCQUFjLFlBQVksc0JBQWMsWUFBWSxzQkFBYzs7Q0FFN0YsQ0FBQztJQUVGLGdGQUFnRjtJQUNuRSxRQUFBLE9BQU8sR0FDcEI7TUFDTSxrQkFBVTs7Ozs7Q0FLZixDQUFDO0lBRVcsUUFBQSxTQUFTLEdBQ3RCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBK0JDLENBQUM7SUFFVyxRQUFBLE1BQU0sbUNBRVosdURBQXNCLEtBRXpCLHNCQUFzQixFQUF0Qix1REFBc0I7UUFFdEIsU0FBUyxFQUFULGlCQUFTO1FBQ1QsY0FBYyxFQUFkLHNCQUFjO1FBQ2QsY0FBYyxFQUFkLHNCQUFjO1FBQ2QsZ0JBQWdCLEVBQWhCLHdCQUFnQjtRQUVoQixrQkFBa0IsRUFBbEIsMEJBQWtCO1FBRWxCLFNBQVM7UUFDVCxNQUFNLEVBQU4sY0FBTTtRQUNOLGNBQWMsRUFBZCxzQkFBYztRQUNkLFdBQVcsRUFBWCxtQkFBVztRQUNYLGVBQWUsRUFBZix1QkFBZTtRQUNmLFlBQVksRUFBWixvQkFBWTtRQUNaLHFCQUFxQixFQUFyQiw2QkFBcUI7UUFDckIsWUFBWSxFQUFaLG9CQUFZO1FBQ1osUUFBUSxFQUFSLGdCQUFRO1FBQ1IsS0FBSyxFQUFMLGFBQUs7UUFDTCxPQUFPLEVBQVAsZUFBTztRQUVQLFdBQVc7UUFDWCxTQUFTLEVBQVQsaUJBQVMsSUFDWjtJQWtCRCxTQUFnQixvQkFBb0IsQ0FBQyxFQUNqQyxLQUFLLEVBQ0wsS0FBSyxFQUNMLGtCQUFrQixFQUNsQixlQUFlLEVBQ2YsY0FBYyxFQUNkLGFBQWEsRUFDYixhQUFhLEVBQ2IsYUFBYSxFQUNiLE1BQU0sRUFDTixhQUFhLEVBQ2IsY0FBYyxFQUNkLFdBQVcsR0FBRyxjQUFNLEVBQ3BCLGFBQWEsR0FBRyxJQUFJLEdBQ0Y7UUFFbEIsTUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFDLFNBQVM7YUFDbEMsT0FBTyxDQUFDLHFCQUFxQixFQUFFLE1BQU0sQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLGtCQUFrQixHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2FBQ2xGLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRSxNQUFNLENBQUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDNUQsT0FBTyxDQUFDLGVBQWUsRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDdkMsT0FBTyxDQUFDLGVBQWUsRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDdkMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDNUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDNUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDM0QsT0FBTyxDQUFDLGdCQUFnQixFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDNUMsT0FBTyxDQUFDLG9CQUFvQixFQUFFLGFBQWEsQ0FBQyxRQUFRLEVBQUUsQ0FBQzthQUN2RCxPQUFPLENBQUMscUJBQXFCLEVBQUUsY0FBYyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFFL0QsTUFBTSxjQUFjLEdBQUcsV0FBVyxDQUFDLGNBQWM7YUFDNUMsT0FBTyxDQUFDLHFCQUFxQixFQUFFLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDeEQsT0FBTyxDQUFDLHFCQUFxQixFQUFFLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDeEQsT0FBTyxDQUFDLHFCQUFxQixFQUFFLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUU5RCxNQUFNLFdBQVcsR0FBRyxXQUFXLENBQUMsTUFBTSxHQUFHLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLENBQUMsd0JBQXdCLEVBQUUsSUFBQSwrQ0FBYyxFQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7UUFDbEosTUFBTSxxQkFBcUIsR0FBRyxJQUFBLHlEQUF3QixFQUFDLGVBQWUsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUVyRixNQUFNLFdBQVcsR0FBRyxxQkFBcUI7Y0FDckIsV0FBVyxDQUFDLGtCQUFrQjtjQUM5QixXQUFXLENBQUMsY0FBYztjQUMxQixXQUFXLENBQUMsZ0JBQWdCO2NBQzVCLFdBQVcsQ0FBQyxXQUFXLENBQUM7UUFFNUMsTUFBTSxTQUFTLEdBQUcsNkJBQTZCO2NBQzdCLFdBQVcsQ0FBQyxTQUFTLENBQUM7UUFFeEMsSUFBSSxhQUFhLEtBQUssSUFBSSxFQUFFLENBQUM7WUFFekIsTUFBTSxZQUFZLEdBQUcsU0FBUyxHQUFHLGNBQWMsR0FBRyxXQUFXLEdBQUcsV0FBVyxDQUFDO1lBRTVFLE9BQU87Z0JBQ0gsU0FBUztnQkFDVCxXQUFXLEVBQUUsWUFBWTtnQkFDekIsZUFBZSxFQUFFLEVBQUU7Z0JBQ25CLHFCQUFxQixFQUFFLEVBQUU7Z0JBQ3pCLFlBQVksRUFBRSxXQUFXLENBQUMsWUFBWTtnQkFFdEMsV0FBVztnQkFDWCxTQUFTLEVBQUUsU0FBUzthQUN2QixDQUFDO1FBQ04sQ0FBQztRQUVELE1BQU0sTUFBTSxHQUFHLFNBQVM7WUFDVCxjQUFjO1lBQ2QsV0FBVztZQUNYLFdBQVcsQ0FBQyxjQUFjLENBQUM7UUFFMUMsT0FBTztZQUNILFNBQVM7WUFDVCxNQUFNO1lBQ04sT0FBTyxFQUFFLFdBQVcsQ0FBQyxPQUFPO1lBQzVCLFdBQVcsRUFBRSxXQUFXO1lBQ3hCLGVBQWUsRUFBRSxXQUFXLENBQUMsZUFBZTtZQUM1QyxZQUFZLEVBQUUsV0FBVyxDQUFDLFlBQVk7WUFDdEMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxRQUFRO1lBQzlCLEtBQUssRUFBRSxXQUFXLENBQUMsS0FBSztZQUV4QixXQUFXO1lBQ1gsU0FBUyxFQUFFLFNBQVM7U0FDdkIsQ0FBQztJQUNOLENBQUM7O0FDbGtCRDs7Ozs7Ozs7Ozs7Ozs7OztHQWdCRzs7OztJQWdGSCwwQkF5REM7SUF2SUQsTUFBTSxJQUFJO1FBTVQsWUFBYSxDQUFTLEVBQUUsQ0FBUyxFQUFFLENBQVM7WUFDM0MsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDVixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUNWLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ1gsQ0FBQztRQUVELElBQUksQ0FBRSxDQUFTLEVBQUUsQ0FBUztZQUN6QixPQUFPLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQy9CLENBQUM7UUFFRCxJQUFJLENBQUUsQ0FBUyxFQUFFLENBQVMsRUFBRSxDQUFTO1lBQ3BDLE9BQU8sSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDNUMsQ0FBQztLQUNEO0lBRUQsTUFBTSxFQUFFLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtJQUNuQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBRWpDLE1BQU0sSUFBSSxHQUFHLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQzNCLE1BQU0sS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBRTVCLE1BQU0sS0FBSyxHQUFHO1FBQ2IsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztRQUN0RSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RFLElBQUksSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7S0FDdEUsQ0FBQTtJQUVELE1BQU0sQ0FBQyxHQUFHO1FBQ1QsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFO1FBQ3BCLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFO1FBQzNFLEdBQUcsRUFBRSxDQUFDLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUU7UUFDM0UsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHO1FBQzNFLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRztRQUMzRSxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUc7UUFDM0UsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUc7UUFDM0UsQ0FBQyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRTtRQUMzRSxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxHQUFHLEVBQUMsQ0FBQztRQUMzRSxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRztRQUMzRSxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRztRQUMzRSxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBQyxHQUFHLEVBQUMsR0FBRztRQUMzRSxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRztLQUN2RSxDQUFBO0lBRUQsNkVBQTZFO0lBQzdFLHdFQUF3RTtJQUN4RSxTQUFTLElBQUksQ0FBRSxJQUFZO1FBQzFCLElBQUksSUFBSSxHQUFHLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDMUIscUJBQXFCO1lBQ3JCLElBQUksSUFBSSxLQUFLLENBQUE7UUFDZCxDQUFDO1FBRUQsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDdkIsSUFBSSxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7WUFDaEIsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLENBQUE7UUFDbEIsQ0FBQztRQUVELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxF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R0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUN0QyxvREFBb0Q7UUFDcEQsSUFBSSxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQTtRQUNoQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNaLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDUCxDQUFDO2FBQU0sQ0FBQztZQUNQLEVBQUUsSUFBSSxFQUFFLENBQUE7WUFDUixFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQSxDQUFFLHNDQUFzQztRQUN4RSxDQUFDO1FBQ0QsSUFBSSxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQTtRQUNoQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNaLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDUCxDQUFDO2FBQU0sQ0FBQztZQUNQLEVBQUUsSUFBSSxFQUFFLENBQUE7WUFDUixFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQTtRQUNoQyxDQUFDO1FBQ0QsSUFBSSxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQTtRQUNoQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNaLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDUCxDQUFDO2FBQU0sQ0FBQztZQUNQLEVBQUUsSUFBSSxFQUFFLENBQUE7WUFDUixFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQTtRQUNo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TUFBTSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQztZQUN6QyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQztZQUV6QyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDMUIsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDMUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFFMUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDMUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDMUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBRTFCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUM5QixDQUFDO1FBRUQsRUFBRSxDQUFDLEdBQUksQ0FBQyxjQUFjLENBQUMsTUFB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QUFDLEVBQUUsQ0FBQztnQ0FDaEQsTUFBTSxHQUFJLElBQUEseUJBQVEsRUFBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0NBQ3hDLE9BQU8sR0FBRyxDQUFDLENBQUM7Z0NBQ1osS0FBSyxHQUFLLEVBQUUsQ0FBQzs0QkFDakIsQ0FBQztpQ0FDSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQ0FDaEQsTUFBTSxHQUFJLElBQUEseUJBQVEsRUFBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0NBQ3hDLE9BQU8sR0FBRyxDQUFDLENBQUM7Z0NBQ1osS0FBSyxHQUFLLENBQUMsQ0FBQzs0QkFDaEIsQ0FBQztpQ0FDSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQ0FDaEQsTUFBTSxHQUFJLElBQUEseUJBQVEsRUFBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0NBQ3hDLE9BQU8sR0FBRyxDQUFDLENBQUM7Z0NBQ1osS0FBSyxHQUFLLEVBQUUsQ0FBQzs0QkFDakIsQ0FBQztpQ0FDSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQ0FDaEQsTUFBTSxHQUFJLElBQUEseUJBQVEsRUFBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0NBQ3hDLE9BQU8sR0FBRyxDQUFDLENBQUM7Z0NBQ1osS0FBSyxHQUFLLEdBQUcsQ0FB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RyxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDaEMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNqQixDQUFDO1lBRUQsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO29CQUM1RCxRQUFRLEVBQUUsRUFBRSxDQUFDLGVBQWU7b0JBQzVCLFVBQVUsRUFBRSxDQUFDO29CQUNiLElBQUksRUFBRSxFQUFFLENBQUMsV0FBVztvQkFDcEIsU0FBUyxFQUFFLEtBQUs7b0JBQ2hCLEtBQUssRUFBRSxJQUFJO2lCQUNkLENBQUMsQ0FBQyxDQUFDO1FBQ1IsQ0FBQztLQUdKO0lBbkNELHNDQW1DQzs7Ozs7O0lDM0JELE1BQWEsQ0FBQztLQUViO0lBRkQsY0FFQztJQUVELE1BQWEsU0FBUztRQUVsQjtRQUdBLENBQUM7UUFFRCxPQUFPLENBQUMsQ0FBUyxFQUFFLENBQVMsRUFBRSxLQUFhLEVBQUUsTUFBYztRQUczRCxDQUFDO1FBRUQsVUFBVSxDQUFDLEtBQWE7UUFHeEIsQ0FBQztLQUNKO0lBaEJELDhCQWdCQzs7QUM1QkQsQ0FBQztBQUFBLENBQUMsR0FBRyxFQUFFO0lBQ0gsSUFBSSxNQUFNLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUNsQyxNQUFNLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztJQUN0QyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIjsoKCkgPT4ge1xyXG5cclxuXHRjb25zdCBkZWZzICAgICA9IHt9O1xyXG5cdGNvbnN0IHJlc29sdmVkID0ge307XHJcblxyXG5cdC8vIHNhdmUgb3JpZ2luYWwgZGVmaW5lIGFuZCByZXF1aXJlXHJcblx0d2luZG93Ll9fX2FtZF9fX09yaWdpbmFsRGVmaW5lICA9IHdpbmRvdy5kZWZpbmU7XHJcblx0d2luZG93Ll9fX2FtZF9fX09yaWdpbmFsUmVxdWlyZSA9IHdpbmRvdy5yZXF1aXJlO1xyXG5cclxuXHRpZiAoIXdpbmRvdy5kZWZpbmUgJiYgIXdpbmRvdy5yZXF1aXJlKSB7XHJcblxyXG5cdFx0Y29uc3QgZGVmaW5lID0gKGlkLCBkZXBzLCBmYWN0b3J5KSA9PiB7XHJcblxyXG5cdFx0XHRpZiAoZGVmc1tpZF0pIHtcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0R1cGxpY2F0ZSBkZWZpbml0aW9uIGZvciAnICsgaWQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkZWZzW2lkXSA9IFtkZXBzLCBmYWN0b3J5XTtcclxuXHRcdH1cclxuXHJcblx0XHRkZWZpbmUuYW1kID0ge1xyXG5cdFx0XHRidW5kbGU6IHRydWUsICAgLy8gdGhpcyBpbXBsZW1lbnRhdGlvbiB3b3JrcyBvbmx5IHdpdGggYnVuZGxlZCBhbWQgbW9kdWxlc1xyXG5cdFx0XHRkeW5hbWljOiBmYWxzZSwgLy8gZG9lcyBub3Qgc3VwcG9ydCBkeW5hbWljIG9yIGFzeW5jIGxvYWRpbmdcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgcmVxdWlyZSA9IChpZCkgPT4ge1xyXG5cclxuXHRcdFx0aWYgKGlkID09PSAncmVxdWlyZScpIHJldHVybiByZXF1aXJlO1xyXG5cdFx0XHRpZiAoaWQgPT09ICdleHBvcnRzJykgcmV0dXJuIHt9O1xyXG5cdFx0XHRpZiAocmVzb2x2ZWRbaWRdKSAgICAgcmV0dXJuIHJlc29sdmVkW2lkXTtcclxuXHJcblx0XHRcdGlmICghZGVmc1tpZF0pIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhkZWZzLCBpZCk7XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdObyBkZWZpbml0aW9uIGZvciAnICsgaWQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBtb2R1bGVFeHBvcnRzID0ge307XHJcblx0XHRcdGNvbnN0IGRlcHMgICAgPSBkZWZzW2lkXVswXTtcclxuXHRcdFx0Y29uc3QgZmFjdG9yeSA9IGRlZnNbaWRdWzFdO1xyXG5cdFx0XHRjb25zdCBhcmdzID0gZGVwcy5tYXAoZGVwID0+IHtcclxuXHJcblx0XHRcdFx0aWYgKGRlcCA9PT0gJ2V4cG9ydHMnKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbW9kdWxlRXhwb3J0cztcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiByZXF1aXJlKGRlcCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0ZmFjdG9yeS5hcHBseShudWxsLCBhcmdzKTtcclxuXHJcblx0XHRcdHJldHVybiByZXNvbHZlZFtpZF0gPSBtb2R1bGVFeHBvcnRzO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHR3aW5kb3cuZGVmaW5lICA9IGRlZmluZTtcclxuXHRcdHdpbmRvdy5yZXF1aXJlID0gcmVxdWlyZTtcclxuXHR9XHJcblxyXG5cdHdpbmRvdy5fX19hbWRfX19yZXF1aXJlUmVzb2x2ZXIgPSAoKSA9PiB7XHJcblxyXG5cdFx0Zm9yIChjb25zdCBpZCBpbiBkZWZzKSB7XHJcblxyXG5cdFx0XHRpZiAoZGVmcy5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcclxuXHJcblx0XHRcdFx0Y29uc3QgZGVwcyA9IGRlZnNbaWRdWzBdO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChkZXBzKSB7XHJcblx0XHRcdFx0XHRkZXBzLm1hcChkZXAgPT4ge1xyXG5cdFxyXG5cdFx0XHRcdFx0XHRpZiAoZGVwICE9PSAncmVxdWlyZScgJiZcclxuXHRcdFx0XHRcdFx0XHRkZXAgIT09ICdleHBvcnRzJykge1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoIXJlc29sdmVkLmhhc093blByb3BlcnR5KGRlcCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVpcmUoZGVwKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmICghZGVmcy5oYXNPd25Qcm9wZXJ0eShkZXApICYmXHJcblx0XHRcdFx0XHRcdFx0XHQhcmVzb2x2ZWQuaGFzT3duUHJvcGVydHkoZGVwKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCBkZWZpbmUgJyR7aWR9JyBkZXAgbm90IGZvdW5kICcke2RlcH0nYCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJlcXVpcmUoaWQpO1xyXG5cclxuXHRcdFx0XHRkZWxldGUgZGVmc1tpZF07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gcmV0dXJuIG9yaWdpbmFsIGRlZmluZSBhbmQgcmVxdWlyZVxyXG5cdFx0d2luZG93LmRlZmluZSAgPSB3aW5kb3cuX19fYW1kX19fT3JpZ2luYWxEZWZpbmU7XHJcblx0XHR3aW5kb3cucmVxdWlyZSA9IHdpbmRvdy5fX19hbWRfX19PcmlnaW5hbFJlcXVpcmU7XHJcblxyXG5cdFx0Ly8gY2xlYXJcclxuXHRcdGRlbGV0ZSB3aW5kb3cuX19fYW1kX19fcmVxdWlyZVJlc29sdmVyO1xyXG5cdFx0ZGVsZXRlIHdpbmRvdy5fX19hbWRfX19PcmlnaW5hbERlZmluZTtcclxuXHRcdGRlbGV0ZSB3aW5kb3cuX19fYW1kX19fT3JpZ2luYWxSZXF1aXJlO1xyXG5cdH07XHJcbn0pKCk7IiwiZXhwb3J0IHR5cGUgaW50ID0gbnVtYmVyO1xyXG5leHBvcnQgdHlwZSB1bnNpZ25lZGludCA9IG51bWJlcjtcclxuZXhwb3J0IHR5cGUgZmxvYXQgPSBudW1iZXI7XHJcbmV4cG9ydCB0eXBlIFJlZk9iamVjdDxUIGV4dGVuZHMgb2JqZWN0PiA9IFQ7XHJcbmV4cG9ydCB0eXBlIElWZWN0b3IyID0geyB4OiBmbG9hdCwgeTogZmxvYXQgfTtcclxuZXhwb3J0IHR5cGUgSVZlY3RvcjMgPSB7IHg6IGZsb2F0LCB5OiBmbG9hdCwgejogZmxvYXQgfTtcclxuZXhwb3J0IHR5cGUgSVZlY3RvcjQgPSB7IHg6IGZsb2F0LCB5OiBmbG9hdCwgejogZmxvYXQsIHc6IGZsb2F0IH07XHJcbmV4cG9ydCB0eXBlIElNYXRyaXg0ID0geyBkYXRhOiBGbG9hdDMyQXJyYXkgfTsiLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElab25lIHtcclxuICAgIG1pblg6IGludDtcclxuICAgIG1heFg6IGludDtcclxuICAgIG1pblo6IGludDtcclxuICAgIG1heFo6IGludDtcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbXByZXNzb3Ige1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIF9jb25jYXRDaHVua3MoY2h1bmtzOiBVaW50OEFycmF5W10sIHRvdGFsTGVuZ3RoOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gMDtcclxuXHJcbiAgICAgICAgLy8gQ29uY2F0ZW5hdGUgYWxsIFVpbnQ4QXJyYXkgY2h1bmtzIGludG8gYSBzaW5nbGUgQXJyYXlCdWZmZXJcclxuICAgICAgICBjb25zdCByZXN1bHRCdWZmZXIgPSBuZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7ICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xyXG4gICAgICAgICAgICByZXN1bHRCdWZmZXIuc2V0KGNodW5rLCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uICs9IGNodW5rLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRCdWZmZXIuYnVmZmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGFzeW5jIF9nZXRSZXN1bHQocmVhZGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXI8YW55Pikge1xyXG5cclxuICAgICAgICBsZXQgdG90YWxMZW5ndGggPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBjaHVua3M6IFVpbnQ4QXJyYXlbXSA9IFtdO1xyXG5cclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xyXG4gICAgICAgICAgICBpZiAoZG9uZSkgYnJlYWs7XHJcbiAgICAgICAgICAgIGNodW5rcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgdG90YWxMZW5ndGggKz0gdmFsdWUubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmNhdENodW5rcyhjaHVua3MsIHRvdGFsTGVuZ3RoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGNvbXByZXNzQnVmZmVyKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIGZvcm1hdDogQ29tcHJlc3Npb25Gb3JtYXQgPSAnZ3ppcCcpIHtcclxuXHJcbiAgICAgICAgY29uc3QgY29tcHJlc3NlZFN0cmVhbSA9IG5ldyBDb21wcmVzc2lvblN0cmVhbShmb3JtYXQpO1xyXG4gICAgICAgIGNvbnN0IHdyaXRlciA9IGNvbXByZXNzZWRTdHJlYW0ud3JpdGFibGUuZ2V0V3JpdGVyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgd3JpdGVyLndyaXRlKG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO1xyXG4gICAgICAgIHdyaXRlci5jbG9zZSgpO1xyXG5cclxuICAgICAgICBjb25zdCByZWFkZXIgPSBjb21wcmVzc2VkU3RyZWFtLnJlYWRhYmxlLmdldFJlYWRlcigpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzdWx0KHJlYWRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBkZWNvbXByZXNzQnVmZmVyKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIGZvcm1hdDogQ29tcHJlc3Npb25Gb3JtYXQgPSAnZ3ppcCcpIHtcclxuXHJcbiAgICAgICAgY29uc3QgZGVjb21wcmVzc2VkU3RyZWFtID0gbmV3IERlY29tcHJlc3Npb25TdHJlYW0oZm9ybWF0KTtcclxuICAgICAgICBjb25zdCByZWFkZXIgPSBkZWNvbXByZXNzZWRTdHJlYW0ucmVhZGFibGUuZ2V0UmVhZGVyKCk7XHJcbiAgICAgICAgY29uc3Qgd3JpdGVyID0gZGVjb21wcmVzc2VkU3RyZWFtLndyaXRhYmxlLmdldFdyaXRlcigpO1xyXG4gICAgXHJcbiAgICAgICAgLy8gV3JpdGUgdGhlIGNvbXByZXNzZWQgYnVmZmVyIHRvIHRoZSB3cml0ZXJcclxuICAgICAgICB3cml0ZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XHJcbiAgICAgICAgd3JpdGVyLmNsb3NlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXN1bHQocmVhZGVyKTtcclxuICAgIH1cclxufSIsImltcG9ydCBDb21wcmVzc29yIGZyb20gXCIuLi9TaGFyZWQvQ29tcHJlc3Nvci5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgQWJzSGVpZ2h0TWFwIGZyb20gXCIuL0Fic0hlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGhlaWdodE1hcFZlcnNpb24gPSA5OTtcclxuZXhwb3J0IGNvbnN0IGZhY3RvclNpemUgPSAzO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJSGVpZ2h0TWFwRmlsZUltcG9ydE9wdGlvbnMge1xyXG4gICAgYWRhcHRpdmVXaWR0aEFuZERlcHRoPzogYm9vbGVhbixcclxuICAgIGFkYXB0aXZlTWF4SGVpZ2h0PzogYm9vbGVhbixcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJSW1wb3J0RmlsZUhlYWRlciB7XHJcbiAgICB3aWR0aDogaW50LFxyXG4gICAgZGVwdGg6IGludCxcclxuICAgIG1heEhlaWdodDogZmxvYXRcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGhlaWdodE1hcEZpbGVDb21wcmVzc2VkRm9ybWF0OiBDb21wcmVzc2lvbkZvcm1hdCA9ICdnemlwJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnNIZWlnaHRNYXBGaWxlSU8ge1xyXG5cclxuICAgIHByaXZhdGUgX19yZWFkSGVpZ2h0RmFjdG9yKHZpZXc6IERhdGFWaWV3LCBoZWFkZXJTaXplOiBpbnQsIHdpZHRoOiBpbnQsIHg6IGludCwgejogaW50KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGluZGV4ID0geiAqIHdpZHRoICsgeDtcclxuICAgICAgICBjb25zdCByID0gdmlldy5nZXRVaW50OChoZWFkZXJTaXplICsgaW5kZXggKiBmYWN0b3JTaXplICsgMCk7XHJcbiAgICAgICAgY29uc3QgZyA9IHZpZXcuZ2V0VWludDgoaGVhZGVyU2l6ZSArIGluZGV4ICogZmFjdG9yU2l6ZSArIDEpO1xyXG4gICAgICAgIGNvbnN0IGIgPSB2aWV3LmdldFVpbnQ4KGhlYWRlclNpemUgKyBpbmRleCAqIGZhY3RvclNpemUgKyAyKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHNjYWxlZCA9IChyIDw8IDE2KSB8IChnIDw8IDgpIHwgYjtcclxuICAgICAgICBjb25zdCBmYWN0b3IgPSBzY2FsZWQgLyAweGZmZmZmZjtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZmFjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX193cml0ZUhlaWdodEZhY3Rvcih2aWV3OiBEYXRhVmlldywgaGVhZGVyU2l6ZTogaW50LCBoZWlnaHRNYXA6IElSZWFkb25seUFic0hlaWdodE1hcCwgeDogaW50LCB6OiBpbnQpIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXggID0geiAqIGhlaWdodE1hcC53aWR0aCArIHg7XHJcbiAgICAgICAgY29uc3QgZmFjdG9yID0gaGVpZ2h0TWFwLmdldEZhY3Rvcih4LCB6KTtcclxuICAgICAgICBjb25zdCBzY2FsZWQgPSBNYXRoLmZsb29yKGZhY3RvciAqIDB4ZmZmZmZmKTtcclxuICAgICAgICBjb25zdCByID0gKHNjYWxlZCA+PiAxNikgJiAweGZmO1xyXG4gICAgICAgIGNvbnN0IGcgPSAoc2NhbGVkID4+IDgpICYgMHhmZjtcclxuICAgICAgICBjb25zdCBiID0gKHNjYWxlZCAmIDB4ZmYpO1xyXG5cclxuICAgICAgICB2aWV3LnNldFVpbnQ4KGhlYWRlclNpemUgKyBpbmRleCAqIGZhY3RvclNpemUgKyAwLCByKTtcclxuICAgICAgICB2aWV3LnNldFVpbnQ4KGhlYWRlclNpemUgKyBpbmRleCAqIGZhY3RvclNpemUgKyAxLCBnKTtcclxuICAgICAgICB2aWV3LnNldFVpbnQ4KGhlYWRlclNpemUgKyBpbmRleCAqIGZhY3RvclNpemUgKyAyLCBiKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgX19pbXBvcnRGcm9tRmlsZShoZWlnaHRNYXA6IEFic0hlaWdodE1hcCwgYnVmZmVyOiBBcnJheUJ1ZmZlciwgb3B0aW9ucz86IElIZWlnaHRNYXBGaWxlSW1wb3J0T3B0aW9ucyk6IFByb21pc2U8SUltcG9ydEZpbGVIZWFkZXIgfCBudWxsPiB7XHJcblxyXG4gICAgICAgIC8vIFRPRE86XHJcbiAgICAgICAgLy8gaGVhZGVyIHZlcnNpb24gOTlcclxuICAgICAgICAvLyBoZWFkZXJCeXRlU2l6ZSwgdmVyc2lvbiwgd2lkdGgsIGRlcHRoLCBtYXhIZWlnaHRcclxuXHJcbiAgICAgICAgY29uc3QgbkJ1ZmZlciA9IGF3YWl0IENvbXByZXNzb3IuZGVjb21wcmVzc0J1ZmZlcihidWZmZXIsIGhlaWdodE1hcEZpbGVDb21wcmVzc2VkRm9ybWF0KTtcclxuICAgICAgICBjb25zdCB2aWV3ICAgID0gbmV3IERhdGFWaWV3KG5CdWZmZXIpO1xyXG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSB2aWV3LmdldFVpbnQzMigxLCB0cnVlKTtcclxuXHJcbiAgICAgICAgaWYgKHZlcnNpb24gIT09IGhlaWdodE1hcFZlcnNpb24pIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdIZWlnaHQgbWFwIHZlcnNpb246ICVmIG5vIHN1cHBvcnQuJywgdmVyc2lvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGhlYWRlclNpemUgPSB2aWV3LmdldFVpbnQ4KDApO1xyXG4gICAgICAgIGNvbnN0IHdpZHRoICAgICAgPSB2aWV3LmdldFVpbnQzMig1LCB0cnVlKTtcclxuICAgICAgICBjb25zdCBkZXB0aCAgICAgID0gdmlldy5nZXRVaW50MzIoOSwgdHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgbWF4SGVpZ2h0ICA9IHZpZXcuZ2V0RmxvYXQzMigxMywgdHJ1ZSk7XHJcbiAgICBcclxuICAgICAgICBjb25zdCBmaW5hbE1heEhlaWdodCA9IG9wdGlvbnM/LmFkYXB0aXZlTWF4SGVpZ2h0ID8gaGVpZ2h0TWFwLm1heEhlaWdodCA6IG1heEhlaWdodDtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoaGVpZ2h0TWFwLndpZHRoICE9PSB3aWR0aCB8fFxyXG4gICAgICAgICAgICBoZWlnaHRNYXAuZGVwdGggIT09IGRlcHRoICYmXHJcbiAgICAgICAgICAgIG9wdGlvbnMgJiZcclxuICAgICAgICAgICAgb3B0aW9ucy5hZGFwdGl2ZVdpZHRoQW5kRGVwdGgpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFRPRE86IGl0cyB3b3JrIGZvciB4Xm4gKyAxLCB6Xm4gKyAxXHJcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvclggPSAod2lkdGggLSAxKSAvIChoZWlnaHRNYXAud2lkdGggLSAxKTtcclxuICAgICAgICAgICAgY29uc3QgZmFjdG9yWiA9IChkZXB0aCAtIDEpIC8gKGhlaWdodE1hcC5kZXB0aCAtIDEpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCBkZXB0aDsgeiArPSBmYWN0b3JaKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCArPSBmYWN0b3JYKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHNtb290aCBmb3IgaGVpZ2h0TWFwIG1vcmUgaW1wb3J0IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWN0b3IgPSB0aGlzLl9fcmVhZEhlaWdodEZhY3Rvcih2aWV3LCBoZWFkZXJTaXplLCB3aWR0aCwgeCB8IDAsIHogfCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBmYWN0b3IgKiBmaW5hbE1heEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0TWFwLnNldCh4IC8gZmFjdG9yWCwgeiAvIGZhY3RvclosIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IHogPSAwOyAoeiA8IGRlcHRoKSAmJiAoeiA8IGhlaWdodE1hcC5kZXB0aCk7IHorKykge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7ICh4IDwgd2lkdGgpICYmICh4IDwgaGVpZ2h0TWFwLndpZHRoKTsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IHRoaXMuX19yZWFkSGVpZ2h0RmFjdG9yKHZpZXcsIGhlYWRlclNpemUsIHdpZHRoLCB4LCB6KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBmYWN0b3IgKiBmaW5hbE1heEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRNYXAuc2V0KHgsIHosIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICBkZXB0aCxcclxuICAgICAgICAgICAgbWF4SGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBfX2V4cG9ydFRvQnVmZmVyKGhlaWdodE1hcDogQWJzSGVpZ2h0TWFwKSB7XHJcbiAgICBcclxuICAgICAgICAvLyBUT0RPOlxyXG4gICAgICAgIC8vIGhlYWRlciB2ZXJzaW9uIDk5XHJcbiAgICAgICAgLy8gaGVhZGVyQnl0ZVNpemUsIHZlcnNpb24sIHdpZHRoLCBkZXB0aCwgbWF4SGVpZ2h0XHJcbiAgICBcclxuICAgICAgICBjb25zdCBoZWFkZXJTaXplID0gMSArIDQgKyA0ICsgNCArIDQ7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyICAgICA9IG5ldyBBcnJheUJ1ZmZlcihoZWFkZXJTaXplICsgZmFjdG9yU2l6ZSAqIGhlaWdodE1hcC53aWR0aCAqIGhlaWdodE1hcC5kZXB0aCk7XHJcbiAgICAgICAgY29uc3QgdmlldyAgICAgICA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xyXG4gICAgXHJcbiAgICAgICAgdmlldy5zZXRVaW50OCAgKDAsIGhlYWRlclNpemUpO1xyXG4gICAgICAgIHZpZXcuc2V0VWludDMyICgxLCBoZWlnaHRNYXBWZXJzaW9uLCB0cnVlKTtcclxuICAgICAgICB2aWV3LnNldFVpbnQzMiAoNSwgaGVpZ2h0TWFwLndpZHRoLCB0cnVlKTtcclxuICAgICAgICB2aWV3LnNldFVpbnQzMiAoOSwgaGVpZ2h0TWFwLmRlcHRoLCB0cnVlKTtcclxuICAgICAgICB2aWV3LnNldEZsb2F0MzIoMTMsIGhlaWdodE1hcC5tYXhIZWlnaHQsIHRydWUpO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCBoZWlnaHRNYXAuZGVwdGg7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBoZWlnaHRNYXAud2lkdGg7IHgrKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuX193cml0ZUhlaWdodEZhY3Rvcih2aWV3LCBoZWFkZXJTaXplLCBoZWlnaHRNYXAsIHgsIHopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gQ29tcHJlc3Nvci5jb21wcmVzc0J1ZmZlcihidWZmZXIsIGhlaWdodE1hcEZpbGVDb21wcmVzc2VkRm9ybWF0KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWJzSGVpZ2h0TWFwRmlsZUlPOyIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBBYnNIZWlnaHRNYXBGaWxlSU8sIHsgSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwRmlsZUlPLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElab25lIH0gZnJvbSBcIi4vSVpvbmUubWpzXCI7XHJcblxyXG4vKipcclxuICogQHZhcmlhbnQgcmdiIC0gZm9ybWF0IGJ5IHVpbnQ4WzNdIHRleHR1cmVcclxuICogQHZhcmlhbnQgcjIzZiAtIGZvcm1hdCBieSBmbG9hdDMyIHRleHR1cmVcclxuICogQHZhcmlhbnQgcmdiYSAtIGZvcmFtdCBieSB1aW50OFs0XSB0ZXh0dXJlXHJcbiAqIEB2YXJpYW50IHJnYmFYMiAtIGZvcm1hdCBjb21wcmVzc2VkIGJ5IDIgcGF0Y2hlcyBieSB4IGNvb3JkaW5hdGVcclxuICogQHZhcmlhbnQgcmdiYVg0IC0gZm9ybWF0IGNvbXByZXNzZWQgYnkgNCBwYXRjaGVzIGJ5IHggY29vcmRpbmF0ZVxyXG4gKiBAc2VlIENvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBUSGVpZ2h0TWFwRm9ybWF0ID0gJ3IzMmYnIHwgJ3JnYmEnIHwgJ3JnYmFYMicgfCAncmdiYVg0JyB8ICdyZ2InO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlBYnNIZWlnaHRNYXAge1xyXG5cclxuICAgIHJlYWRvbmx5IHdpZHRoOiBpbnQ7XHJcbiAgICByZWFkb25seSBkZXB0aDogaW50O1xyXG5cclxuICAgIHJlYWRvbmx5IG1heEhlaWdodDogZmxvYXQ7XHJcblxyXG4gICAgZ2V0KHg6IGludCwgejogaW50KTogZmxvYXQ7XHJcbiAgICBnZXRGYWN0b3IoeDogaW50LCB6OiBpbnQpOiBmbG9hdDtcclxuICAgIGdldEhlaWdodEludGVycG9sYXRlZCh4OiBmbG9hdCwgejogZmxvYXQpOiBmbG9hdDtcclxuICAgIHRvRmlsZSgpOiBQcm9taXNlPEJsb2I+O1xyXG4gICAgdG9DYW52YXMoKTogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICB0b0J1ZmZlcihidWZmZXI6IFVpbnQ4QXJyYXkgfCBVaW50OENsYW1wZWRBcnJheSk6IHZvaWQ7XHJcbiAgICB0b0ltYWdlKHR5cGU/OiBzdHJpbmcgfCB1bmRlZmluZWQsIHF1YWxpdHk/OiBhbnkpOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnNIZWlnaHRNYXAgZXh0ZW5kcyBBYnNIZWlnaHRNYXBGaWxlSU8gaW1wbGVtZW50cyBJUmVhZG9ubHlBYnNIZWlnaHRNYXAsIElab25lIHtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3Qgd2lkdGg6IGludDtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBkZXB0aDogaW50O1xyXG4gICAgcHVibGljIGFic3RyYWN0IG1heEhlaWdodDogZmxvYXQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGdldCh4OiBpbnQsIHo6IGludCk6IGZsb2F0O1xyXG4gICAgcHVibGljIGFic3RyYWN0IHNldCh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0KTogZmxvYXQ7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0RmFjdG9yKHg6IGludCwgejogaW50KTogZmxvYXQ7XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IG1pblggPSAwO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG1pblogPSAwO1xyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0IG1heFgoKSB7IHJldHVybiB0aGlzLndpZHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG1heFooKSB7IHJldHVybiB0aGlzLmRlcHRoOyB9XHJcblxyXG4gICAgcHVibGljIGdldEhlaWdodEludGVycG9sYXRlZCh4OiBmbG9hdCwgejogZmxvYXQpIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW50WCA9IHggfCAwO1xyXG4gICAgICAgIGNvbnN0IGludFogPSB6IHwgMDtcclxuICAgICAgICBjb25zdCB4MHowID0gdGhpcy5nZXQoaW50WCwgaW50Wik7XHJcblxyXG4gICAgICAgIGlmICgoaW50WCArIDEgPj0gdGhpcy53aWR0aCkgfHxcclxuICAgICAgICAgICAgKGludFogKyAxID49IHRoaXMuZGVwdGgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB4MHowO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHgxejAgPSB0aGlzLmdldChpbnRYICsgMSwgaW50Wik7XHJcbiAgICAgICAgY29uc3QgeDB6MSA9IHRoaXMuZ2V0KGludFgsICAgICBpbnRaICsgMSk7XHJcbiAgICAgICAgY29uc3QgeDF6MSA9IHRoaXMuZ2V0KGludFggKyAxLCBpbnRaICsgMSk7XHJcbiAgICBcclxuICAgICAgICBjb25zdCBmYWN0b3JYID0geCAtIGludFg7XHJcbiAgICBcclxuICAgICAgICBjb25zdCBpbnRlcnBvbGF0ZWRCb3R0b20gPSAoeDF6MCAtIHgwejApICogZmFjdG9yWCArIHgwejA7XHJcbiAgICAgICAgY29uc3QgaW50ZXJwb2xhdGVkVG9wICAgID0gKHgxejEgLSB4MHoxKSAqIGZhY3RvclggKyB4MHoxO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgZmFjdG9yWiA9IHogLSBpbnRaO1xyXG5cclxuICAgICAgICBjb25zdCBmaW5hbEhlaWdodCA9IChpbnRlcnBvbGF0ZWRUb3AgLSBpbnRlcnBvbGF0ZWRCb3R0b20pICogZmFjdG9yWiArIGludGVycG9sYXRlZEJvdHRvbTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBmaW5hbEhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgYXBwZW5kKHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpOiBmbG9hdDtcclxuXHJcbiAgICBwdWJsaWMgc3Vic3RyYWN0KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBlbmQoeCwgeiwgLXZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgbXVsdGlwbHkoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCwgaGVpZ2h0SWZaZXJvPzogZmxvYXQpOiBmbG9hdDtcclxuXHJcbiAgICBwdWJsaWMgZGl2aWRlKHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQsIGhlaWdodElmWmVybzogZmxvYXQgPSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbHkoeCwgeiwgMSAvIHZhbHVlLCBoZWlnaHRJZlplcm8pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBmcm9tRmlsZShidWZmZXI6IEFycmF5QnVmZmVyLCBvcHRpb25zPzogSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX19pbXBvcnRGcm9tRmlsZSh0aGlzLCBidWZmZXIsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyB0b0ZpbGUoKSB7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgdGhpcy5fX2V4cG9ydFRvQnVmZmVyKHRoaXMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbYnVmZmVyXSwgeyB0eXBlOiBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0b0J1ZmZlcihidWZmZXI6IFVpbnQ4QXJyYXkgfCBVaW50OENsYW1wZWRBcnJheSk6IHZvaWQge1xyXG5cclxuICAgICAgICBjb25zdCB3aWR0aCAgPSB0aGlzLndpZHRoO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHRoaXMuZGVwdGg7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBoICAgPSB0aGlzLmdldCh4LCB6KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHYgICA9IGggLyB0aGlzLm1heEhlaWdodCAqIDI1NTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9ICh4ICsgeiAqIHdpZHRoKSAqIDQ7XHJcblxyXG4gICAgICAgICAgICAgICAgYnVmZmVyW3Bvc10gICAgID0gdjtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlcltwb3MgKyAxXSA9IHY7XHJcbiAgICAgICAgICAgICAgICBidWZmZXJbcG9zICsgMl0gPSB2O1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyW3BvcyArIDNdID0gMjU1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0b0NhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgIGNvbnN0IHdpZHRoICA9IHRoaXMud2lkdGg7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5kZXB0aDtcclxuXHJcbiAgICAgICAgY2FudmFzLndpZHRoICA9IHdpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICBpZiAoIWN0eCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCBjcmVhdGUgY2FudmFzIDJkIGNvbnRleHQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyICAgID0gaW1hZ2VEYXRhLmRhdGE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy50b0J1ZmZlcihidWZmZXIpO1xyXG4gICAgICAgIGN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhdmUgaGVpZ2h0IG1hcCB0byBpbWFnZSBvZiBiYXNlNjRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRvSW1hZ2UodHlwZT86IHN0cmluZyB8IHVuZGVmaW5lZCwgcXVhbGl0eT86IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy50b0NhbnZhcygpO1xyXG4gICAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKHR5cGUsIHF1YWxpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBoZWlnaHQgbWFwIGZyb20gaW1hZ2VcclxuICAgICAqIEBwYXJhbSBpbWcgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmcm9tSW1hZ2UoaW1nOiBJbWFnZUJpdG1hcCkge1xyXG5cclxuICAgICAgICBjb25zdCBidWZmZXJXaWR0aCAgPSBpbWcud2lkdGg7XHJcbiAgICAgICAgY29uc3QgYnVmZmVySGVpZ2h0ID0gaW1nLmhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKGJ1ZmZlcldpZHRoICUgMiAhPT0gMCB8fCBidWZmZXJIZWlnaHQgJSAyICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hcCBzaXplcyBub3QgZGl2aXNpYmxlIGJ5IDIgYXJlIG5vdCBzdXBwb3J0ZWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjYW52YXMgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSE7XHJcblxyXG4gICAgICAgIGNhbnZhcy53aWR0aCAgPSBidWZmZXJXaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gYnVmZmVySGVpZ2h0O1xyXG4gICAgXHJcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW1hZ2VEYXRhICAgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBidWZmZXJXaWR0aCwgYnVmZmVySGVpZ2h0KTtcclxuICAgICAgICBjb25zdCBpbWFnZUJ1ZmZlciA9IGltYWdlRGF0YS5kYXRhO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhTZWdtZW50WCA9IHRoaXMud2lkdGggLSAxO1xyXG4gICAgICAgIGNvbnN0IG1heFNlZ21lbnRaID0gdGhpcy5kZXB0aCAtIDE7XHJcbiAgICAgICAgY29uc3QgZmFjdG9yWCAgICAgPSBidWZmZXJXaWR0aCAgLyBtYXhTZWdtZW50WDtcclxuICAgICAgICBjb25zdCBmYWN0b3JaICAgICA9IGJ1ZmZlckhlaWdodCAvIG1heFNlZ21lbnRaO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHRoaXMuZGVwdGg7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IG5vcm1hbGl6ZVggPSB4ID09PSBtYXhTZWdtZW50WCA/IHggLSAxIDogeDtcclxuICAgICAgICAgICAgICAgIGxldCBub3JtYWxpemVaID0geiA9PT0gbWF4U2VnbWVudFogPyB6IC0gMSA6IHo7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0TWFwWCA9IChub3JtYWxpemVYICogZmFjdG9yWCkgfCAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0TWFwWiA9IChub3JtYWxpemVaICogZmFjdG9yWikgfCAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9IChoZWlnaHRNYXBYICsgaGVpZ2h0TWFwWiAqIGJ1ZmZlcldpZHRoKSAqIDQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gaW1hZ2VCdWZmZXJbcG9zXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGcgPSBpbWFnZUJ1ZmZlcltwb3MgKyAxXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBpbWFnZUJ1ZmZlcltwb3MgKyAyXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBpbWFnZUJ1ZmZlcltwb3MgKyAzXTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2VmZiAgPSAociArIGcgKyBiKSAvIDMgLyBhO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gY29lZmYgKiB0aGlzLm1heEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh4LCB6LCBoZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgc21vb3RoWm9uZSh6b25lOiBJWm9uZSwgbnA6IGZsb2F0LCByYWRpdXM6IGludCkge1xyXG5cclxuICAgICAgICBpZiAoem9uZS5tYXhYIDwgMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh6b25lLm1heFogPCAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChucCA8IDAgfHwgbnAgPiAxKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHJhZGl1cyA9PT0gMCkgcmFkaXVzID0gMTtcclxuXHJcbiAgICAgICAgY29uc3QgbWluWCA9IE1hdGgubWF4KHpvbmUubWluWCwgMCk7XHJcbiAgICAgICAgY29uc3QgbWluWiA9IE1hdGgubWF4KHpvbmUubWluWiwgMCk7XHJcbiAgICAgICAgY29uc3QgbWF4WCA9IE1hdGgubWluKHpvbmUubWF4WCwgdGhpcy53aWR0aCk7XHJcbiAgICAgICAgY29uc3QgbWF4WiA9IE1hdGgubWluKHpvbmUubWF4WiwgdGhpcy5kZXB0aCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNwID0gMSAtIG5wO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB4ID0gbWluWDsgeCA8IG1heFg7IHgrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeiA9IG1pblo7IHogPCBtYXhaOyB6KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2SGVpZ2h0ID0gdGhpcy5nZXQoeCwgeik7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHVwZHRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmVpZ2hOdW1iZXIgID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBuZWlnaEF2ZXJhZ2UgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHJ4ID0gLXJhZGl1czsgcnggPD0gcmFkaXVzOyByeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHJ6ID0gLXJhZGl1czsgcnogPD0gcmFkaXVzOyByeisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lclggPSAoeCArIHJ4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5uZXJaID0gKHogKyByeik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJYIDwgMCB8fCBpbm5lclggPj0gdGhpcy53aWR0aCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbm5lclogPCAwIHx8IGlubmVyWiA+PSB0aGlzLmRlcHRoKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IChpbm5lclggPT09IHggJiYgaW5uZXJaID09PSB6KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBwcmV2SGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZ2V0KGlubmVyWCwgaW5uZXJaKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoTnVtYmVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoQXZlcmFnZSArPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG5laWdoQXZlcmFnZSAvPSBuZWlnaE51bWJlcjtcclxuICAgICAgICAgICAgICAgIHVwZHRIZWlnaHQgPSBuZWlnaEF2ZXJhZ2UgKiBucCArIHByZXZIZWlnaHQgKiBjcDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh4LCB6LCB1cGR0SGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc21vb3RoKG5wOiBmbG9hdCwgcmFkaXVzOiBpbnQpIHtcclxuICAgICAgICB0aGlzLnNtb290aFpvbmUodGhpcywgbnAsIHJhZGl1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG5vcm1hbGl6ZShtYXhIZWlnaHQ6IGZsb2F0KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCB0aGlzLmRlcHRoOyB6KyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEhlaWdodCAgID0gdGhpcy5nZXQoeCwgeik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVIZWlnaHQgPSAoY3VycmVudEhlaWdodCAvIHRoaXMubWF4SGVpZ2h0KSAqIG1heEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh4LCB6LCBub3JtYWxpemVIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb21iaW5lSGVpZ2h0cyhcclxuICAgICAgICB0eXBlOiAnKycgfCAnLScgfCAnKicgfCAnLycsXHJcbiAgICAgICAgaGVpZ2h0TWFwOiBBYnNIZWlnaHRNYXAsXHJcbiAgICAgICAgdmFsdWU6IGZsb2F0LFxyXG4gICAgICAgIHpvbmU6IElab25lLFxyXG4gICAgICAgIGhlaWdodElmWmVybzogZmxvYXQgPSAwLFxyXG4gICAgICAgIG1pbkhlaWdodDogZmxvYXQgfCBudWxsID0gbnVsbCxcclxuICAgICAgICBtYXhIZWlnaHQ6IGZsb2F0IHwgbnVsbCA9IG51bGxcclxuICAgICkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh6b25lLm1heFggPCAwKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHpvbmUubWF4WiA8IDApIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBsZW5YID0gem9uZS5tYXhYIC0gem9uZS5taW5YO1xyXG4gICAgICAgIGNvbnN0IGxlblogPSB6b25lLm1heFogLSB6b25lLm1pblo7XHJcblxyXG4gICAgICAgIGlmIChsZW5YIDwgMSB8fCBsZW5aIDwgMSB8fCB2YWx1ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmaXhlZE1pblggPSBNYXRoLm1heCh6b25lLm1pblgsIDApO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTWluWiA9IE1hdGgubWF4KHpvbmUubWluWiwgMCk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRNYXhYID0gTWF0aC5taW4oem9uZS5tYXhYLCB0aGlzLndpZHRoKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1heFogPSBNYXRoLm1pbih6b25lLm1heFosIHRoaXMuZGVwdGgpO1xyXG5cclxuICAgICAgICBjb25zdCBjb2VmZkZhY3RvclggPSAoaGVpZ2h0TWFwLndpZHRoIC0gMSkgLyBsZW5YO1xyXG4gICAgICAgIGNvbnN0IGNvZWZmRmFjdG9yWiA9IChoZWlnaHRNYXAuZGVwdGggLSAxKSAvIGxlblo7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSBmaXhlZE1pblo7IHogPCBmaXhlZE1heFo7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IGZpeGVkTWluWDsgeCA8IGZpeGVkTWF4WDsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgeDIgPSAoY29lZmZGYWN0b3JYICogKHggLSB6b25lLm1pblgpKSB8IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB6MiA9IChjb2VmZkZhY3RvclogKiAoeiAtIHpvbmUubWluWikpIHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGhlaWdodE1hcC5nZXQoeDIsIHoyKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNtb290aEFwcGVuZFZhbHVlID0gaGVpZ2h0ICogdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkSGVpZ2h0ID0gdGhpcy5nZXQoeCwgeikgfHwgaGVpZ2h0SWZaZXJvO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBjYW5kaWRhdGUgPSB0eXBlID09PSAnKycgPyBvbGRIZWlnaHQgKyBzbW9vdGhBcHBlbmRWYWx1ZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9PT0gJy0nID8gb2xkSGVpZ2h0IC0gc21vb3RoQXBwZW5kVmFsdWUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPT09ICcqJyA/IG9sZEhlaWdodCAqIHNtb290aEFwcGVuZFZhbHVlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID09PSAnLycgPyBvbGRIZWlnaHQgLyBzbW9vdGhBcHBlbmRWYWx1ZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobWluSGVpZ2h0ICE9PSBudWxsICYmIGNhbmRpZGF0ZSA8IG1pbkhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZSA9IG1pbkhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG1heEhlaWdodCAhPT0gbnVsbCAmJiBjYW5kaWRhdGUgPiBtYXhIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUgPSBtYXhIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoeCwgeiwgY2FuZGlkYXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWJzSGVpZ2h0TWFwOyIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBBYnNIZWlnaHRNYXAsIHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwLCBUSGVpZ2h0TWFwRm9ybWF0IH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgIEhlaWdodE1hcEFyclR5cGUgPSBGbG9hdDMyQXJyYXk7XHJcbmV4cG9ydCBjb25zdCBIZWlnaHRNYXBBcnJUeXBlID0gRmxvYXQzMkFycmF5O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplOiBpbnQgPSAxO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlIZWlnaHRNYXA8VERhdGEgPSBIZWlnaHRNYXBBcnJUeXBlPiBleHRlbmRzIElSZWFkb25seUFic0hlaWdodE1hcCB7XHJcbiAgICByZWFkb25seSBpdGVtU2l6ZTogaW50O1xyXG4gICAgcmVhZG9ubHkgaXRlbUhlaWdodEluZGV4T2Zmc2V0OiBpbnQ7XHJcbiAgICByZWFkb25seSBkYXRhOiBURGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhlaWdodE1hcDxURGF0YSBleHRlbmRzIEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSA9IEhlaWdodE1hcEFyclR5cGU+IGV4dGVuZHMgQWJzSGVpZ2h0TWFwIGltcGxlbWVudHMgSVJlYWRvbmx5SGVpZ2h0TWFwPFREYXRhPiB7XHJcblxyXG4gICAgcHJpdmF0ZSBfd2lkdGg6IGludCA9IDA7XHJcbiAgICBwcml2YXRlIF9kZXB0aDogaW50ID0gMDtcclxuICAgIHByaXZhdGUgX21heEhlaWdodDogZmxvYXQgPSAwO1xyXG4gICAgcHJpdmF0ZSBfZGF0YTogVERhdGE7XHJcbiAgICBcclxuICAgIHByaXZhdGUgX2l0ZW1TaXplOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9pdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludDtcclxuICAgIFxyXG4gICAgcHVibGljIGdldCBzaXplKCkgIHsgcmV0dXJuIHRoaXMuX3dpZHRoICogdGhpcy5fZGVwdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgd2lkdGgoKSB7IHJldHVybiB0aGlzLl93aWR0aDsgfVxyXG4gICAgcHVibGljIGdldCBkZXB0aCgpIHsgcmV0dXJuIHRoaXMuX2RlcHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRhdGEoKSAgeyByZXR1cm4gdGhpcy5fZGF0YTsgfVxyXG4gICAgcHVibGljIGdldCBmb3JtYXQoKTogVEhlaWdodE1hcEZvcm1hdCB7IHJldHVybiAncmdiYSc7IH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGl0ZW1TaXplKCkgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2l0ZW1TaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGl0ZW1IZWlnaHRJbmRleE9mZnNldCgpIHsgcmV0dXJuIHRoaXMuX2l0ZW1IZWlnaHRJbmRleE9mZnNldDsgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0IG1heEhlaWdodCgpICB7IHJldHVybiB0aGlzLl9tYXhIZWlnaHQ7IH1cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyOiBURGF0YSwgaXRlbVNpemU/OiBpbnQsIGl0ZW1IZWlnaHRJbmRleE9mZnNldD86IGludCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyPzogVERhdGEgfCB1bmRlZmluZWQsIGl0ZW1TaXplOiBpbnQgPSBkZWZhdWx0SGVpZ2h0VmVydGV4U2l6ZSwgaXRlbUhlaWdodEluZGV4T2Zmc2V0OiBpbnQgPSAwKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl9pbml0KHdpZHRoLCBkZXB0aCwgbWF4SGVpZ2h0LCBidWZmZXIhLCBpdGVtU2l6ZSwgaXRlbUhlaWdodEluZGV4T2Zmc2V0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2luaXQod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCk6IHZvaWQ7XHJcbiAgICBwcm90ZWN0ZWQgX2luaXQod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyOiBURGF0YSwgaXRlbVNpemU/OiBpbnQsIGl0ZW1IZWlnaHRJbmRleE9mZnNldD86IGludCk6IHZvaWQ7XHJcbiAgICBwcm90ZWN0ZWQgX2luaXQod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyPzogVERhdGEgfCB1bmRlZmluZWQsIGl0ZW1TaXplOiBpbnQgPSBkZWZhdWx0SGVpZ2h0VmVydGV4U2l6ZSwgaXRlbUhlaWdodEluZGV4T2Zmc2V0OiBpbnQgPSAwKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5fZGVwdGggPSBkZXB0aDtcclxuICAgICAgICB0aGlzLl9tYXhIZWlnaHQgPSBtYXhIZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChidWZmZXIpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtU2l6ZSA8IGl0ZW1IZWlnaHRJbmRleE9mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSXRlbVNpemUgY2FuJ3QgbGVzcyBvciBlcSBJdGVtSGVpZ2h0SW5kZXhPZmZzZXRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoIDwgKHdpZHRoICogZGVwdGgpICogaXRlbVNpemUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJ1ZmZlciBoYXMgaW52YWxpZCBsZW5ndGhcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSBidWZmZXI7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1TaXplID0gaXRlbVNpemU7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1IZWlnaHRJbmRleE9mZnNldCA9IGl0ZW1IZWlnaHRJbmRleE9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHR5cGUgY2hlY2tlclxyXG4gICAgICAgICAgICB0aGlzLl9kYXRhID0gbmV3IEhlaWdodE1hcEFyclR5cGUod2lkdGggKiBkZXB0aCAqIGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplKSBhcyB1bmtub3duIGFzIFREYXRhO1xyXG4gICAgICAgICAgICB0aGlzLl9pdGVtU2l6ZSA9IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplO1xyXG4gICAgICAgICAgICB0aGlzLl9pdGVtSGVpZ2h0SW5kZXhPZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2VuY29kZUhlaWdodEZhY3RvcihzdG9yZTogVERhdGEsIGluZGV4OiBpbnQsIHZhbHVlOiBmbG9hdCkge1xyXG4gICAgICAgIHN0b3JlW2luZGV4XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcm90ZWN0ZWQgX2RlY29kZUhlaWdodEZhY3RvcihzdG9yZTogUmVjb3JkPG51bWJlciwgbnVtYmVyPiwgaW5kZXg6IGludCkge1xyXG4gICAgICAgIHJldHVybiBzdG9yZVtpbmRleF07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByb3RlY3RlZCBfZGVjb2RlSGVpZ2h0KHN0b3JlOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+LCBpbmRleDogaW50LCBtYXg6IGZsb2F0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlY29kZUhlaWdodEZhY3RvcihzdG9yZSwgaW5kZXgpICogbWF4O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfZW5jb2RlQW5kU2V0SGVpZ2h0RmFjdG9yKHN0b3JlOiBURGF0YSwgaW5kZXg6IGludCwgcmVhbEhlaWdodDogZmxvYXQsIG1heDogZmxvYXQpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplID0gTWF0aC5tYXgoTWF0aC5taW4ocmVhbEhlaWdodCwgbWF4KSwgMCk7XHJcbiAgICAgICAgY29uc3QgZmFjdG9yICAgID0gbm9ybWFsaXplIC8gbWF4O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgIHRoaXMuX2VuY29kZUhlaWdodEZhY3RvcihzdG9yZSwgaW5kZXgsIGZhY3Rvcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlY29kZUhlaWdodEZhY3RvcihzdG9yZSwgaW5kZXgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0SW5kZXgoeDogaW50LCB6OiBpbnQpIHtcclxuICAgICAgICByZXR1cm4gKHogKiB0aGlzLl93aWR0aCArIHgpICogdGhpcy5faXRlbVNpemUgKyB0aGlzLl9pdGVtSGVpZ2h0SW5kZXhPZmZzZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZhY3Rvcih4OiBpbnQsIHo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRJbmRleCh4LCB6KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVjb2RlSGVpZ2h0RmFjdG9yKHRoaXMuX2RhdGEsIGluZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0KHg6IGludCwgejogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldEluZGV4KHgsIHopO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWNvZGVIZWlnaHQodGhpcy5fZGF0YSwgaW5kZXgsIHRoaXMuX21heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHNldCh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldEluZGV4KHgsIHopO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVBbmRTZXRIZWlnaHRGYWN0b3IodGhpcy5fZGF0YSwgaW5kZXgsIHZhbHVlLCB0aGlzLl9tYXhIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRNYXhIZWlnaHQobWF4SGVpZ2h0OiBmbG9hdCkge1xyXG4gICAgICAgIHRoaXMuX21heEhlaWdodCA9IG1heEhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgYXBwZW5kKHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXggICAgID0gdGhpcy5nZXRJbmRleCh4LCB6KTtcclxuICAgICAgICBjb25zdCBvbGRWYWx1ZSAgPSB0aGlzLl9kZWNvZGVIZWlnaHQodGhpcy5fZGF0YSwgaW5kZXgsIHRoaXMuX21heEhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgY2FuVmFsdWUgID0gb2xkVmFsdWUgKyB2YWx1ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuY29kZUFuZFNldEhlaWdodEZhY3Rvcih0aGlzLl9kYXRhLCBpbmRleCwgY2FuVmFsdWUsIHRoaXMuX21heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIG11bHRpcGx5KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQsIGhlaWdodElmWmVybzogZmxvYXQgPSAwKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGluZGV4ICAgICA9IHRoaXMuZ2V0SW5kZXgoeCwgeik7XHJcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgID0gdGhpcy5fZGVjb2RlSGVpZ2h0KHRoaXMuX2RhdGEsIGluZGV4LCB0aGlzLl9tYXhIZWlnaHQpIHx8IGhlaWdodElmWmVybztcclxuICAgICAgICBjb25zdCBjYW5WYWx1ZSAgPSBvbGRWYWx1ZSAqIHZhbHVlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZW5jb2RlQW5kU2V0SGVpZ2h0RmFjdG9yKHRoaXMuX2RhdGEsIGluZGV4LCBjYW5WYWx1ZSwgdGhpcy5fbWF4SGVpZ2h0KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSGVpZ2h0TWFwOyIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVpvbmUgfSBmcm9tIFwiLi9JWm9uZS5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUmVhZG9ubHlBYnNIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRNYXAsIHsgSGVpZ2h0TWFwQXJyVHlwZSwgZGVmYXVsdEhlaWdodFZlcnRleFNpemUsIElSZWFkb25seUhlaWdodE1hcCB9IGZyb20gXCIuL0hlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlYWRvbmx5QWJzUGF0Y2hlZEhlaWdodE1hcCBleHRlbmRzIElSZWFkb25seUFic0hlaWdodE1hcCB7XHJcblxyXG4gICAgcmVhZG9ubHkgZGF0YUNodW5rU2l6ZTogaW50O1xyXG4gICAgcmVhZG9ubHkgZGF0YU51bUNodW5rc1g6IGludDtcclxuICAgIHJlYWRvbmx5IGRhdGFOdW1DaHVua3NaOiBpbnQ7XHJcbiAgICByZWFkb25seSBkYXRhQ2h1bmtTaXplRmFjdG9yOiBmbG9hdDtcclxuICAgIHJlYWRvbmx5IHBhdGNoU2l6ZTogaW50O1xyXG4gICAgcmVhZG9ubHkgbnVtUGF0Y2hlc1g6IGludDtcclxuICAgIHJlYWRvbmx5IG51bVBhdGNoZXNaOiBpbnQ7XHJcblxyXG4gICAgZ2V0TWluKCk6IGZsb2F0O1xyXG4gICAgZ2V0TWF4KCk6IGZsb2F0O1xyXG4gICAgZ2V0TWluRmFjdG9yKCk6IGZsb2F0O1xyXG4gICAgZ2V0TWF4RmFjdG9yKCk6IGZsb2F0O1xyXG4gICAgZ2V0RW50cmllc1BhdGNoTWluKHg6IGZsb2F0LCB6OiBmbG9hdCk6IGZsb2F0O1xyXG4gICAgZ2V0RW50cmllc1BhdGNoTWF4KHg6IGZsb2F0LCB6OiBmbG9hdCk6IGZsb2F0O1xyXG4gICAgZ2V0RW50cmllc1BhdGNoTWluRmFjdG9yKHg6IGZsb2F0LCB6OiBmbG9hdCk6IGZsb2F0O1xyXG4gICAgZ2V0RW50cmllc1BhdGNoTWF4RmFjdG9yKHg6IGZsb2F0LCB6OiBmbG9hdCk6IGZsb2F0O1xyXG4gICAgZ2V0UGF0Y2hNaW4ocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpOiBmbG9hdDtcclxuICAgIGdldFBhdGNoTWF4KHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KTogZmxvYXQ7XHJcbiAgICBnZXRQYXRjaE1pbkZhY3RvcihwYXRjaEJhc2VYOiBpbnQsIHBhdGNoQmFzZVo6IGludCk6IGZsb2F0O1xyXG4gICAgZ2V0UGF0Y2hNYXhGYWN0b3IocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpOiBmbG9hdDtcclxuXHJcbiAgICBnZXRDaHVua0luZGV4KGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IGludDtcclxuICAgIGdldENodW5rQnVmZmVyKHR5cGU6IEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBGbG9hdDMyQXJyYXk7XHJcbiAgICBnZXRDaHVua0J1ZmZlcih0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBVaW50MTZBcnJheTtcclxuICAgIGdldENodW5rQnVmZmVyKHR5cGU6IFVpbnQ4QXJyYXlDb25zdHJ1Y3RvciwgY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogVWludDhBcnJheTtcclxuICAgIGdldENodW5rc0J1ZmZlcnModHlwZTogRmxvYXQzMkFycmF5Q29uc3RydWN0b3IpOiBGbG9hdDMyQXJyYXlbXTtcclxuICAgIGdldENodW5rc0J1ZmZlcnModHlwZTogVWludDE2QXJyYXlDb25zdHJ1Y3Rvcik6IFVpbnQxNkFycmF5W107XHJcbiAgICBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IFVpbnQ4QXJyYXlDb25zdHJ1Y3Rvcik6IFVpbnQ4QXJyYXlbXTtcclxuXHJcbiAgICBnZXRDaHVua0J1ZmZlcjxUIGV4dGVuZHMgRmxvYXQzMkFycmF5Q29uc3RydWN0b3IgfCBVaW50MTZBcnJheUNvbnN0cnVjdG9yIHwgVWludDhBcnJheUNvbnN0cnVjdG9yPih0eXBlOiBULCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBhbnk7XHJcbiAgICBnZXRDaHVua3NCdWZmZXJzPFQgZXh0ZW5kcyBGbG9hdDMyQXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQxNkFycmF5Q29uc3RydWN0b3IgfCBVaW50OEFycmF5Q29uc3RydWN0b3I+KHR5cGU6IFQpOiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlYWRvbmx5QWJzUGF0Y2hlZEhlaWdodE1hcFR5cHBlZDxURGF0YSBleHRlbmRzIEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSA9IEhlaWdodE1hcEFyclR5cGU+IGV4dGVuZHMgSVJlYWRvbmx5QWJzUGF0Y2hlZEhlaWdodE1hcCwgSVJlYWRvbmx5SGVpZ2h0TWFwPFREYXRhPiB7XHJcblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbWluTWF4U3RhY2tTaXplID0gMjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRPclRocm93RGF0YUNodW5rU2l6ZShwYXRjaFNpemU6IGludCwgZGF0YUNodW5rU2l6ZTogaW50KSB7XHJcblxyXG4gICAgaWYgKChkYXRhQ2h1bmtTaXplIC0gMSkgJSAocGF0Y2hTaXplIC0gMSkgIT09IDApIHtcclxuICAgICAgICBjb25zdCByZWNvbW1lbmRlZFdpZHRoID0gKChkYXRhQ2h1bmtTaXplIC0gMSArIHBhdGNoU2l6ZSAtIDEpIC8gKGRhdGFDaHVua1NpemUgLSAxKSkgKiAocGF0Y2hTaXplIC0gMSkgKyAxO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhQ2h1bmtTaXplIG1pbnVzIDEgKCVkKSBtdXN0IGJlIGRpdmlzaWJsZSBieSBwYXRjaFNpemUgbWludXMgMSAoJWQpXFxuXCIsIGRhdGFDaHVua1NpemUsIHBhdGNoU2l6ZSk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlRyeSB1c2luZyBEYXRhQ2h1bmtTaXplID0gJWRcXG5cIiwgcmVjb21tZW5kZWRXaWR0aCk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGFDaHVua1NpemU7XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnNQYXRjaGVkSGVpZ2h0TWFwPFREYXRhIGV4dGVuZHMgRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50OEFycmF5ID0gSGVpZ2h0TWFwQXJyVHlwZT4gZXh0ZW5kcyBIZWlnaHRNYXA8VERhdGE+IGltcGxlbWVudHMgSVJlYWRvbmx5QWJzUGF0Y2hlZEhlaWdodE1hcFR5cHBlZDxURGF0YT4ge1xyXG5cclxuICAgIHByb3RlY3RlZCBfcGF0Y2hTaXplOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX251bVBhdGNoZXNYOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX251bVBhdGNoZXNaOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX3BhdGNoZXNTZWdtZW50U2l6ZTogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9taW5NYXhIZWlnaHRDb29yZHM6IGludFtdO1xyXG4gICAgcHJvdGVjdGVkIF9taW5IZWlnaHRDb29yZDogaW50W107XHJcbiAgICBwcm90ZWN0ZWQgX21heEhlaWdodENvb3JkOiBpbnRbXTtcclxuICAgIHByb3RlY3RlZCBfZGF0YUNodW5rU2l6ZTogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9kYXRhTnVtQ2h1bmtzWDogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9kYXRhTnVtQ2h1bmtzWjogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9kYXRhQ2h1bmtTaXplRmFjdG9yOiBmbG9hdDtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoU2l6ZSgpICAgICAgICAgICB7IHJldHVybiB0aGlzLl9wYXRjaFNpemU7IH1cclxuICAgIHB1YmxpYyBnZXQgbnVtUGF0Y2hlc1goKSAgICAgICAgIHsgcmV0dXJuIHRoaXMuX251bVBhdGNoZXNYOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNaKCkgICAgICAgICB7IHJldHVybiB0aGlzLl9udW1QYXRjaGVzWjsgfVxyXG4gICAgcHVibGljIGdldCBkYXRhQ2h1bmtTaXplKCkgICAgICAgeyByZXR1cm4gdGhpcy5fZGF0YUNodW5rU2l6ZTsgfVxyXG4gICAgcHVibGljIGdldCBkYXRhTnVtQ2h1bmtzWCgpICAgICAgeyByZXR1cm4gdGhpcy5fZGF0YU51bUNodW5rc1g7IH1cclxuICAgIHB1YmxpYyBnZXQgZGF0YU51bUNodW5rc1ooKSAgICAgIHsgcmV0dXJuIHRoaXMuX2RhdGFOdW1DaHVua3NaOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRhdGFDaHVua1NpemVGYWN0b3IoKSB7IHJldHVybiB0aGlzLl9kYXRhQ2h1bmtTaXplRmFjdG9yOyB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIHBhdGNoU2l6ZTogaW50LCBkYXRhQ2h1bmtTaXplOiBpbnQsIG1heEhlaWdodDogZmxvYXQpO1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIHBhdGNoU2l6ZTogaW50LCBkYXRhQ2h1bmtTaXplOiBpbnQsIG1heEhlaWdodDogZmxvYXQsIGJ1ZmZlcjogVERhdGEsIGl0ZW1TaXplPzogaW50LCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ/OiBpbnQpO1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIHBhdGNoU2l6ZTogaW50LCBkYXRhQ2h1bmtTaXplOiBpbnQsIG1heEhlaWdodDogZmxvYXQsIGJ1ZmZlcj86IFREYXRhIHwgdW5kZWZpbmVkLCBpdGVtU2l6ZTogaW50ID0gZGVmYXVsdEhlaWdodFZlcnRleFNpemUsIGl0ZW1IZWlnaHRJbmRleE9mZnNldDogaW50ID0gMCkge1xyXG4gICAgICAgIHN1cGVyKHdpZHRoLCBkZXB0aCwgbWF4SGVpZ2h0LCBidWZmZXIhIC8qKiBUUyBodWNrICovLCBpdGVtU2l6ZSwgaXRlbUhlaWdodEluZGV4T2Zmc2V0KTtcclxuICAgICAgICB0aGlzLl9taW5IZWlnaHRDb29yZCA9IFswLCAwXTtcclxuICAgICAgICB0aGlzLl9tYXhIZWlnaHRDb29yZCA9IFswLCAwXTtcclxuICAgICAgICB0aGlzLl9zZXRQYXRjaFNpemUocGF0Y2hTaXplKTtcclxuICAgICAgICB0aGlzLl9zZXREYXRhQ2h1bmtTaXplKGRhdGFDaHVua1NpemUpO1xyXG4gICAgICAgIHRoaXMuX2NsZWFyTWluTWF4SGVpZ2h0Q29vcmRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9zZXRQYXRjaFNpemUocGF0Y2hTaXplOiBpbnQpIHtcclxuICAgICAgICB0aGlzLl9wYXRjaFNpemUgICA9IHBhdGNoU2l6ZTtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWCA9ICgodGhpcy53aWR0aCAtIDEpIC8gKHRoaXMuX3BhdGNoU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgdGhpcy5fbnVtUGF0Y2hlc1ogPSAoKHRoaXMuZGVwdGggLSAxKSAvICh0aGlzLl9wYXRjaFNpemUgLSAxKSkgfCAwO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoZXNTZWdtZW50U2l6ZSA9IHRoaXMuX251bVBhdGNoZXNYICogdGhpcy5fbnVtUGF0Y2hlc1ogKiBtaW5NYXhTdGFja1NpemU7XHJcbiAgICAgICAgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzID0gbmV3IEFycmF5PGludD4odGhpcy5fcGF0Y2hlc1NlZ21lbnRTaXplICogMik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9zZXREYXRhQ2h1bmtTaXplKHZhbHVlOiBpbnQpIHtcclxuICAgICAgICB0aGlzLl9kYXRhQ2h1bmtTaXplICA9IGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplKHRoaXMuX3BhdGNoU2l6ZSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuX2RhdGFOdW1DaHVua3NYID0gKCh0aGlzLndpZHRoIC0gMSkgLyAodGhpcy5fZGF0YUNodW5rU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgdGhpcy5fZGF0YU51bUNodW5rc1ogPSAoKHRoaXMuZGVwdGggLSAxKSAvICh0aGlzLl9kYXRhQ2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICB0aGlzLl9kYXRhQ2h1bmtTaXplRmFjdG9yID0gdGhpcy5fcGF0Y2hTaXplID09PSB0aGlzLl9kYXRhQ2h1bmtTaXplXHJcbiAgICAgICAgICAgID8gMS4wXHJcbiAgICAgICAgICAgIDogdGhpcy5fcGF0Y2hTaXplIC8gKHRoaXMuX2RhdGFDaHVua1NpemUgKyB0aGlzLl9wYXRjaFNpemUgLSAodGhpcy5fZGF0YUNodW5rU2l6ZSAlIHRoaXMuX3BhdGNoU2l6ZSkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0SW5kZXgoeDogaW50LCB6OiBpbnQpOiBpbnQge1xyXG5cclxuICAgICAgICBjb25zdCBsb2NhbFggPSB4ICUgdGhpcy5fZGF0YUNodW5rU2l6ZTtcclxuICAgICAgICBjb25zdCBsb2NhbFogPSB6ICUgdGhpcy5fZGF0YUNodW5rU2l6ZTtcclxuICAgICAgICBjb25zdCBjaHVua1ggPSB4IC8gdGhpcy5fZGF0YUNodW5rU2l6ZSB8IDA7XHJcbiAgICAgICAgY29uc3QgY2h1bmtaID0geiAvIHRoaXMuX2RhdGFDaHVua1NpemUgfCAwO1xyXG5cclxuICAgICAgICBjb25zdCBjaHVua09mZnNldCA9IChjaHVua1ogKiB0aGlzLl9kYXRhTnVtQ2h1bmtzWCArIGNodW5rWCkgKiAodGhpcy5fZGF0YUNodW5rU2l6ZSAqKiAyKTtcclxuICAgICAgICBjb25zdCBsb2NhbEluZGV4ICA9IChsb2NhbFogKiB0aGlzLl9kYXRhQ2h1bmtTaXplICsgbG9jYWxYKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNodW5rT2Zmc2V0ICsgbG9jYWxJbmRleDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGdldENodW5rSW5kZXgoY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogaW50IHtcclxuICAgICAgICByZXR1cm4gY2h1bmtaICogdGhpcy5fZGF0YU51bUNodW5rc1ggKyBjaHVua1g7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENodW5rQnVmZmVyKHR5cGU6IEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBGbG9hdDMyQXJyYXk7XHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtCdWZmZXIodHlwZTogVWludDE2QXJyYXlDb25zdHJ1Y3RvciwgY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogVWludDE2QXJyYXk7XHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtCdWZmZXIodHlwZTogVWludDhBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBVaW50OEFycmF5O1xyXG4gICAgcHVibGljIGdldENodW5rQnVmZmVyKHR5cGU6IGFueSwgY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KSB7XHJcbiAgICAgICAgY29uc3Qgc2l6ZSAgICAgICAgPSB0aGlzLmRhdGFDaHVua1NpemUgKiogMjtcclxuICAgICAgICBjb25zdCBjaHVua0xldmVsICA9IGNodW5rWiAqIHRoaXMuZGF0YU51bUNodW5rc1ggKyBjaHVua1g7XHJcbiAgICAgICAgY29uc3QgY2h1bmtPZmZzZXQgPSBjaHVua0xldmVsICogc2l6ZSAqIHRoaXMuZGF0YS5CWVRFU19QRVJfRUxFTUVOVDtcclxuICAgICAgICBjb25zdCBjb3VudCAgICAgICA9IHNpemUgKiAodGhpcy5kYXRhLkJZVEVTX1BFUl9FTEVNRU5UIC8gdHlwZS5CWVRFU19QRVJfRUxFTUVOVCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyB0eXBlKHRoaXMuZGF0YS5idWZmZXIsIHRoaXMuZGF0YS5ieXRlT2Zmc2V0ICsgY2h1bmtPZmZzZXQsIGNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcik6IEZsb2F0MzJBcnJheVtdO1xyXG4gICAgcHVibGljIGdldENodW5rc0J1ZmZlcnModHlwZTogVWludDE2QXJyYXlDb25zdHJ1Y3Rvcik6IFVpbnQxNkFycmF5W107XHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBVaW50OEFycmF5Q29uc3RydWN0b3IpOiBVaW50OEFycmF5W107XHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBhbnkpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMuX2RhdGFOdW1DaHVua3NYICogdGhpcy5fZGF0YU51bUNodW5rc1opO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjaHVua1ogPSAwOyBjaHVua1ogPCB0aGlzLl9kYXRhTnVtQ2h1bmtzWjsgY2h1bmtaKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNodW5rWCA9IDA7IGNodW5rWCA8IHRoaXMuX2RhdGFOdW1DaHVua3NYOyBjaHVua1grKykge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNodW5rWiAqIHRoaXMuX2RhdGFOdW1DaHVua3NYICsgY2h1bmtYO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IHRoaXMuZ2V0Q2h1bmtCdWZmZXIodHlwZSwgY2h1bmtYLCBjaHVua1opO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEVudHJpZXNQYXRjaE1pbih4OiBpbnQsIHo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWCA9IHggLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWiA9IHogLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFBhdGNoTWluKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RW50cmllc1BhdGNoTWF4KHg6IGludCwgejogaW50KSB7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hYID0geCAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgY29uc3QgcGF0Y2haID0geiAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGF0Y2hNYXgocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRFbnRyaWVzUGF0Y2hNaW5GYWN0b3IoeDogaW50LCB6OiBpbnQpIHtcclxuICAgICAgICBjb25zdCBwYXRjaFggPSB4IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBwYXRjaFogPSB6IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRQYXRjaE1pbkZhY3RvcihwYXRjaFgsIHBhdGNoWik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEVudHJpZXNQYXRjaE1heEZhY3Rvcih4OiBpbnQsIHo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWCA9IHggLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWiA9IHogLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFBhdGNoTWF4RmFjdG9yKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TWluKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLl9taW5IZWlnaHRDb29yZFswXSwgdGhpcy5fbWluSGVpZ2h0Q29vcmRbMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNYXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMuX21heEhlaWdodENvb3JkWzBdLCB0aGlzLl9tYXhIZWlnaHRDb29yZFsxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE1pbkZhY3RvcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRGYWN0b3IodGhpcy5fbWluSGVpZ2h0Q29vcmRbMF0sIHRoaXMuX21pbkhlaWdodENvb3JkWzFdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TWF4RmFjdG9yKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhY3Rvcih0aGlzLl9tYXhIZWlnaHRDb29yZFswXSwgdGhpcy5fbWF4SGVpZ2h0Q29vcmRbMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQYXRjaE1pbihwYXRjaEJhc2VYOiBpbnQsIHBhdGNoQmFzZVo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gKHBhdGNoQmFzZVogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoQmFzZVgpICogbWluTWF4U3RhY2tTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXhdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXggKyAxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBhdGNoTWF4KHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSAocGF0Y2hCYXNlWiAqIHRoaXMuX251bVBhdGNoZXNYICsgcGF0Y2hCYXNlWCkgKiBtaW5NYXhTdGFja1NpemUgKyB0aGlzLl9wYXRjaGVzU2VnbWVudFNpemU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1tpbmRleF0sIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1tpbmRleCArIDFdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGF0Y2hNaW5GYWN0b3IocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IChwYXRjaEJhc2VaICogdGhpcy5fbnVtUGF0Y2hlc1ggKyBwYXRjaEJhc2VYKSAqIG1pbk1heFN0YWNrU2l6ZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRGYWN0b3IodGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW2luZGV4XSwgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW2luZGV4ICsgMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQYXRjaE1heEZhY3RvcihwYXRjaEJhc2VYOiBpbnQsIHBhdGNoQmFzZVo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gKHBhdGNoQmFzZVogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoQmFzZVgpICogbWluTWF4U3RhY2tTaXplICsgdGhpcy5fcGF0Y2hlc1NlZ21lbnRTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXhdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXggKyAxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9jbGVhck1pbk1heEhlaWdodENvb3JkcygpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fbWluSGVpZ2h0Q29vcmRbMF0gPSAwO1xyXG4gICAgICAgIHRoaXMuX21pbkhlaWdodENvb3JkWzFdID0gMDtcclxuICAgICAgICB0aGlzLl9tYXhIZWlnaHRDb29yZFswXSA9IDA7XHJcbiAgICAgICAgdGhpcy5fbWF4SGVpZ2h0Q29vcmRbMV0gPSAwO1xyXG4gICAgICAgIHRoaXMuX21pbk1heEhlaWdodENvb3Jkcy5maWxsKDApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWNhbGN1bGF0ZUFBQkIoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX21pbkhlaWdodENvb3JkWzBdID0gMDtcclxuICAgICAgICB0aGlzLl9taW5IZWlnaHRDb29yZFsxXSA9IDA7XHJcbiAgICAgICAgdGhpcy5fbWF4SGVpZ2h0Q29vcmRbMF0gPSAwO1xyXG4gICAgICAgIHRoaXMuX21heEhlaWdodENvb3JkWzFdID0gMDtcclxuXHJcbiAgICAgICAgbGV0IG1pbkZhY3RvciA9IDE7XHJcbiAgICAgICAgbGV0IG1heEZhY3RvciA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgcGF0Y2haID0gMDsgcGF0Y2haIDwgdGhpcy5fbnVtUGF0Y2hlc1o7IHBhdGNoWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBwYXRjaFggPSAwOyBwYXRjaFggPCB0aGlzLl9udW1QYXRjaGVzWDsgcGF0Y2hYKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5JbmRleCA9IChwYXRjaFogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoWCkgKiBtaW5NYXhTdGFja1NpemU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhJbmRleCA9IG1pbkluZGV4ICsgdGhpcy5fcGF0Y2hlc1NlZ21lbnRTaXplO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoTWluRmFjdG9yID0gdGhpcy5nZXRGYWN0b3IodGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW21pbkluZGV4XSwgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW21pbkluZGV4ICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hNYXhmYWN0b3IgPSB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXhdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXggKyAxXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1pbkZhY3RvciA+IHBhdGNoTWluRmFjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluRmFjdG9yID0gcGF0Y2hNaW5GYWN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWluSGVpZ2h0Q29vcmRbMF0gPSB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWluSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21pbkhlaWdodENvb3JkWzFdID0gdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW21pbkluZGV4ICsgMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1heEZhY3RvciA8IHBhdGNoTWF4ZmFjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4RmFjdG9yID0gcGF0Y2hNYXhmYWN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWF4SGVpZ2h0Q29vcmRbMF0gPSB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21heEhlaWdodENvb3JkWzFdID0gdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW21heEluZGV4ICsgMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY2FsY3VsYXRlTWluTWF4KHpvbmU6IElab25lKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHpvbmUubWF4WCA8IDApIHJldHVybjtcclxuICAgICAgICBpZiAoem9uZS5tYXhaIDwgMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBmaXhlZE1pblggPSBNYXRoLm1heCh6b25lLm1pblgsIDApO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTWluWiA9IE1hdGgubWF4KHpvbmUubWluWiwgMCk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRNYXhYID0gTWF0aC5taW4oem9uZS5tYXhYLCB0aGlzLndpZHRoKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1heFogPSBNYXRoLm1pbih6b25lLm1heFosIHRoaXMuZGVwdGgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gZml4ZWRNaW5aOyB6IDwgZml4ZWRNYXhaOyB6ICs9IHRoaXMuX3BhdGNoU2l6ZSkge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IGZpeGVkTWluWDsgeCA8IGZpeGVkTWF4WDsgeCArPSB0aGlzLl9wYXRjaFNpemUpIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hYICAgPSB4IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoWiAgID0geiAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaEkgICA9IHBhdGNoWiAqIHRoaXMuX251bVBhdGNoZXNYICsgcGF0Y2hYO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluSW5kZXggPSBwYXRjaEkgKiBtaW5NYXhTdGFja1NpemU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhJbmRleCA9IG1pbkluZGV4ICsgdGhpcy5fcGF0Y2hlc1NlZ21lbnRTaXplO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFBhdGNoWCA9IHBhdGNoWCAqIHRoaXMuX3BhdGNoU2l6ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0UGF0Y2haID0gcGF0Y2haICogdGhpcy5fcGF0Y2hTaXplO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFBhdGNoWCAgPSBmaXJzdFBhdGNoWCArIHRoaXMuX3BhdGNoU2l6ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQYXRjaFogID0gZmlyc3RQYXRjaFogKyB0aGlzLl9wYXRjaFNpemU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG1pbiA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1heCA9IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1pblggPSBmaXJzdFBhdGNoWDtcclxuICAgICAgICAgICAgICAgIGxldCBtaW5aID0gZmlyc3RQYXRjaFo7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4WCA9IGZpcnN0UGF0Y2hYO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1heFogPSBmaXJzdFBhdGNoWjtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbm5lclogPSBmaXJzdFBhdGNoWiArIDE7IGlubmVyWiA8IGxhc3RQYXRjaFo7IGlubmVyWisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGlubmVyWCA9IGZpcnN0UGF0Y2hYICsgMTsgaW5uZXJYIDwgbGFzdFBhdGNoWDsgaW5uZXJYKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IHRoaXMuZ2V0RmFjdG9yKGlubmVyWCwgaW5uZXJaKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPiBmYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IGZhY3RvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblggPSBpbm5lclg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5aID0gaW5uZXJaO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4IDwgZmFjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXggPSBmYWN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhYID0gaW5uZXJYO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WiA9IGlubmVyWjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWluSW5kZXhdICAgICA9IG1pblg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWluSW5kZXggKyAxXSA9IG1pblo7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXhdICAgICA9IG1heFg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXggKyAxXSA9IG1heFo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFic1BhdGNoZWRIZWlnaHRNYXA7IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IEFic1BhdGNoZWRIZWlnaHRNYXAsIHsgZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUsIElSZWFkb25seUFic1BhdGNoZWRIZWlnaHRNYXBUeXBwZWQgfSBmcm9tIFwiLi9BYnNQYXRjaGVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBkZWZhdWx0SGVpZ2h0VmVydGV4U2l6ZSB9IGZyb20gXCIuL0hlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFRDb21wcmVzc0FsZ29yaXRtID0gXCJ4MlwiIHwgXCJ4NFwiO1xyXG5leHBvcnQgdHlwZSBUSGVpZ2h0TWFwQXJyYXlUeXBlQmFnPFQgZXh0ZW5kcyBUQ29tcHJlc3NBbGdvcml0bT4gPSBUIGV4dGVuZHMgXCJ4MlwiID8gVWludDE2QXJyYXkgOiBVaW50OEFycmF5O1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwPFRUQ29tcHJlc3NBbGdvcml0bSBleHRlbmRzIFRDb21wcmVzc0FsZ29yaXRtPlxyXG4gICAgIGV4dGVuZHMgQWJzUGF0Y2hlZEhlaWdodE1hcDxUSGVpZ2h0TWFwQXJyYXlUeXBlQmFnPFRUQ29tcHJlc3NBbGdvcml0bT4+XHJcbiAgaW1wbGVtZW50cyBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwVHlwcGVkPFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRDb21wcmVzc0FsZ29yaXRtPj4ge1xyXG4gICAgXHJcbiAgICBwcml2YXRlIF9jb21wcmVzc0FsZ29yaXRtOiBUVENvbXByZXNzQWxnb3JpdG07XHJcbiAgICBwcml2YXRlIF9wYXRjaFhCYXRjaFNpemU6IGludDtcclxuICAgIHByaXZhdGUgX21heFNhZmVGYWN0b3I6IGludDtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGNvbXByZXNzQWxnb3JpdG0oKSB7IHJldHVybiB0aGlzLl9jb21wcmVzc0FsZ29yaXRtOyB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVCdWZmZXI8VENvbXByZXNzIGV4dGVuZHMgVENvbXByZXNzQWxnb3JpdG0+KHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIGNodW5rU2l6ZTogaW50LCBhbGdvcml0bTogVENvbXByZXNzKTogVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUQ29tcHJlc3M+IHtcclxuXHJcbiAgICAgICAgY29uc3QgbnVtQ2h1bmtzWCAgID0gKCh3aWR0aCAtIDEpIC8gKGNodW5rU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgY29uc3QgbnVtQ2h1bmtzWiAgID0gKChkZXB0aCAtIDEpIC8gKGNodW5rU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgY29uc3QgY2h1bmtBcnJTaXplID0gY2h1bmtTaXplICoqIDI7XHJcbiAgICAgICAgY29uc3QgY2h1bmtDb3VudCAgID0gbnVtQ2h1bmtzWCAqIG51bUNodW5rc1o7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hYQmF0Y2hpbmdDb3VudCA9IGFsZ29yaXRtID09PSBcIng0XCIgPyA0IDogMjtcclxuXHJcbiAgICAgICAgaWYgKG51bUNodW5rc1ggPCBwYXRjaFhCYXRjaGluZ0NvdW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGUgY2h1bmtTaXplICglZCkgc2hvdWxkIGJlIGF0IGxlYXN0ICglZCkgdGltZXMgc21hbGxlciB0aGFuIHRoZSB3aWR0aCAoJWQpXFxuXCIsIGNodW5rU2l6ZSwgcGF0Y2hYQmF0Y2hpbmdDb3VudCwgd2lkdGgpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoYWxnb3JpdG0gPT09IFwieDJcIlxyXG4gICAgICAgICAgICA/IG5ldyBVaW50MTZBcnJheShjaHVua0FyclNpemUgKiBjaHVua0NvdW50KVxyXG4gICAgICAgICAgICA6IG5ldyBVaW50OEFycmF5KGNodW5rQXJyU2l6ZSAqIGNodW5rQ291bnQpXHJcbiAgICAgICAgKSBhcyB1bmtub3duIGFzIFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VENvbXByZXNzPjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYWxnb3JpdG06IFRUQ29tcHJlc3NBbGdvcml0bSk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYWxnb3JpdG06IFRUQ29tcHJlc3NBbGdvcml0bSwgYnVmZmVyOiBUSGVpZ2h0TWFwQXJyYXlUeXBlQmFnPFRUQ29tcHJlc3NBbGdvcml0bT4sIGl0ZW1TaXplPzogaW50LCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ/OiBpbnQpO1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIHBhdGNoU2l6ZTogaW50LCBkYXRhQ2h1bmtTaXplOiBpbnQsIG1heEhlaWdodDogZmxvYXQsIGFsZ29yaXRtOiBUVENvbXByZXNzQWxnb3JpdG0sIGJ1ZmZlcj86IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRDb21wcmVzc0FsZ29yaXRtPiwgaXRlbVNpemU6IGludCA9IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludCA9IDApIHtcclxuICAgICAgICBjb25zdCB2YWxpZERhdGFDaHVua1NpemUgPSBnZXRPclRocm93RGF0YUNodW5rU2l6ZShwYXRjaFNpemUsIGRhdGFDaHVua1NpemUpO1xyXG4gICAgICAgIGNvbnN0IHRtcEJ1ZmZlciA9IGJ1ZmZlciA/PyBDb21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcC5jcmVhdGVCdWZmZXIod2lkdGgsIGRlcHRoLCB2YWxpZERhdGFDaHVua1NpemUsIGFsZ29yaXRtKTtcclxuICAgICAgICBzdXBlcih3aWR0aCwgZGVwdGgsIHBhdGNoU2l6ZSwgZGF0YUNodW5rU2l6ZSwgbWF4SGVpZ2h0LCB0bXBCdWZmZXIsIGl0ZW1TaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQpO1xyXG4gICAgICAgIHRoaXMuX2NvbXByZXNzQWxnb3JpdG0gPSBhbGdvcml0bTtcclxuICAgICAgICB0aGlzLl9wYXRjaFhCYXRjaFNpemUgID0gYWxnb3JpdG0gPT09IFwieDRcIiA/IDQgOiAyO1xyXG4gICAgICAgIHRoaXMuX21heFNhZmVGYWN0b3IgICAgPSBhbGdvcml0bSA9PT0gXCJ4NFwiID8gMHhmZiA6IDB4ZmZmZjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0Q2h1bmtJbmRleChjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBpbnQge1xyXG4gICAgICAgIHJldHVybiAoY2h1bmtaICogdGhpcy5kYXRhTnVtQ2h1bmtzWCArIGNodW5rWCkgLyB0aGlzLl9wYXRjaFhCYXRjaFNpemUgfCAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRDaHVua0J1ZmZlcih0eXBlOiBGbG9hdDMyQXJyYXlDb25zdHJ1Y3RvciwgY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogRmxvYXQzMkFycmF5O1xyXG4gICAgcHVibGljIG92ZXJyaWRlIGdldENodW5rQnVmZmVyKHR5cGU6IFVpbnQxNkFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IFVpbnQxNkFycmF5O1xyXG4gICAgcHVibGljIG92ZXJyaWRlIGdldENodW5rQnVmZmVyKHR5cGU6IFVpbnQ4QXJyYXlDb25zdHJ1Y3RvciwgY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogVWludDhBcnJheTtcclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRDaHVua0J1ZmZlcih0eXBlOiBhbnksIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IGFueSB7XHJcbiAgICAgICAgY29uc3Qgc2l6ZSAgICAgICAgPSB0aGlzLmRhdGFDaHVua1NpemUgKiogMjtcclxuICAgICAgICBjb25zdCBjaHVua0xldmVsICA9IChjaHVua1ogKiB0aGlzLmRhdGFOdW1DaHVua3NYICsgY2h1bmtYKSAvIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgY29uc3QgY2h1bmtPZmZzZXQgPSBjaHVua0xldmVsICogc2l6ZSAqIHRoaXMuZGF0YS5CWVRFU19QRVJfRUxFTUVOVCAqIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZTtcclxuICAgICAgICBjb25zdCBjb3VudCAgICAgICA9IHNpemUgKiB0aGlzLl9wYXRjaFhCYXRjaFNpemUgKiAodGhpcy5kYXRhLkJZVEVTX1BFUl9FTEVNRU5UIC8gdHlwZS5CWVRFU19QRVJfRUxFTUVOVCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyB0eXBlKHRoaXMuZGF0YS5idWZmZXIsIHRoaXMuZGF0YS5ieXRlT2Zmc2V0ICsgY2h1bmtPZmZzZXQsIGNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcik6IEZsb2F0MzJBcnJheVtdO1xyXG4gICAgcHVibGljIG92ZXJyaWRlIGdldENodW5rc0J1ZmZlcnModHlwZTogVWludDE2QXJyYXlDb25zdHJ1Y3Rvcik6IFVpbnQxNkFycmF5W107XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBVaW50OEFycmF5Q29uc3RydWN0b3IpOiBVaW50OEFycmF5W107XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBhbnkpOiBhbnkge1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXkoKHRoaXMuZGF0YU51bUNodW5rc1ggLyB0aGlzLl9wYXRjaFhCYXRjaFNpemUpICogdGhpcy5kYXRhTnVtQ2h1bmtzWik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgY2h1bmtaID0gMDsgY2h1bmtaIDwgdGhpcy5kYXRhTnVtQ2h1bmtzWjsgY2h1bmtaKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNodW5rWCA9IDA7IGNodW5rWCA8IHRoaXMuZGF0YU51bUNodW5rc1g7IGNodW5rWCArPSB0aGlzLl9wYXRjaFhCYXRjaFNpemUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IChjaHVua1ogKiB0aGlzLmRhdGFOdW1DaHVua3NYICsgY2h1bmtYKSAvIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaW5kZXhdID0gdGhpcy5nZXRDaHVua0J1ZmZlcih0eXBlLCBjaHVua1gsIGNodW5rWik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG92ZXJyaWRlIF9lbmNvZGVIZWlnaHRGYWN0b3Ioc3RvcmU6IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRDb21wcmVzc0FsZ29yaXRtPiwgaW5kZXg6IGludCwgdmFsdWU6IGZsb2F0KSB7XHJcbiAgICAgICAgc3RvcmVbaW5kZXhdID0gTWF0aC5taW4odmFsdWUgKiB0aGlzLl9tYXhTYWZlRmFjdG9yLCB0aGlzLl9tYXhTYWZlRmFjdG9yKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIG92ZXJyaWRlIF9kZWNvZGVIZWlnaHRGYWN0b3Ioc3RvcmU6IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRDb21wcmVzc0FsZ29yaXRtPiwgaW5kZXg6IGludCkge1xyXG4gICAgICAgIHJldHVybiBzdG9yZVtpbmRleF0gLyB0aGlzLl9tYXhTYWZlRmFjdG9yO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0SW5kZXgoeDogaW50LCB6OiBpbnQpOiBpbnQge1xyXG5cclxuICAgICAgICBjb25zdCBsb2NhbFggPSB4ICUgdGhpcy5kYXRhQ2h1bmtTaXplO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsWiA9IHogJSB0aGlzLmRhdGFDaHVua1NpemU7XHJcbiAgICAgICAgY29uc3QgY2h1bmtYID0geCAvIHRoaXMuZGF0YUNodW5rU2l6ZSB8IDA7XHJcbiAgICAgICAgY29uc3QgY2h1bmtaID0geiAvIHRoaXMuZGF0YUNodW5rU2l6ZSB8IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGNodW5rTGV2ZWwgID0gKGNodW5rWiAqIHRoaXMuZGF0YU51bUNodW5rc1ggKyBjaHVua1gpIC8gdGhpcy5fcGF0Y2hYQmF0Y2hTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBjaHVua09mZnNldCA9IGNodW5rTGV2ZWwgKiAodGhpcy5kYXRhQ2h1bmtTaXplICoqIDIpO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsSW5kZXggID0gbG9jYWxaICogdGhpcy5kYXRhQ2h1bmtTaXplICsgbG9jYWxYO1xyXG4gICAgICAgIGNvbnN0IG51bUNvbXByZXNzID0gY2h1bmtYICUgdGhpcy5fcGF0Y2hYQmF0Y2hTaXplOyAvLyBjb21wcmVzcyBieSB4IGF4aXNcclxuXHJcbiAgICAgICAgcmV0dXJuIChjaHVua09mZnNldCArIGxvY2FsSW5kZXgpICogdGhpcy5fcGF0Y2hYQmF0Y2hTaXplICsgbnVtQ29tcHJlc3M7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwOyIsImltcG9ydCB7IGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vQWJzUGF0Y2hlZEhlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IHsgVENvbXByZXNzQWxnb3JpdG0sIFRIZWlnaHRNYXBBcnJheVR5cGVCYWcgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9Db21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IHsgSGVpZ2h0TWFwQXJyVHlwZSB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0hlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFRDb21wcmVzc0FsZ29yaXRtT3JOb25lID0gVENvbXByZXNzQWxnb3JpdG0gfCAnbm9uZSc7XHJcbmV4cG9ydCB0eXBlIFRUVDxUIGV4dGVuZHMgVENvbXByZXNzQWxnb3JpdG1Pck5vbmU+ID1cclxuICAgIFQgZXh0ZW5kcyAnbm9uZScgPyBIZWlnaHRNYXBBcnJUeXBlIDpcclxuICAgIFQgZXh0ZW5kcyAneDQnICAgPyBUSGVpZ2h0TWFwQXJyYXlUeXBlQmFnPFQ+IDpcclxuICAgIFQgZXh0ZW5kcyAneDInICAgPyBUSGVpZ2h0TWFwQXJyYXlUeXBlQmFnPFQ+IDpcclxuICAgIG5ldmVyO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJ1ZmZlcjxUQ29tcHJlc3MgZXh0ZW5kcyBUQ29tcHJlc3NBbGdvcml0bU9yTm9uZT4oXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgZGVwdGg6IG51bWJlcixcclxuICAgIHBhdGNoU2l6ZTogbnVtYmVyLFxyXG4gICAgZGF0YUNodW5rU2l6ZTogbnVtYmVyLFxyXG4gICAgY29tcHJlc3NBbGdvcml0bTogVENvbXByZXNzXHJcbik6IFRUVDxUQ29tcHJlc3M+IHtcclxuXHJcbiAgICBpZiAodHlwZW9mIEFtbW8gPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkFtbW8gbm90IGV4aXN0c1wiKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjaHVua1NpemUgICAgPSBnZXRPclRocm93RGF0YUNodW5rU2l6ZShwYXRjaFNpemUsIGRhdGFDaHVua1NpemUpO1xyXG4gICAgY29uc3QgbnVtQ2h1bmtzWCAgID0gKCh3aWR0aCAtIDEpIC8gKGNodW5rU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICBjb25zdCBudW1DaHVua3NaICAgPSAoKGRlcHRoIC0gMSkgLyAoY2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgIGNvbnN0IGNodW5rQXJyU2l6ZSA9IGNodW5rU2l6ZSAqKiAyO1xyXG4gICAgY29uc3QgY2h1bmtDb3VudCAgID0gbnVtQ2h1bmtzWCAqIG51bUNodW5rc1o7XHJcblxyXG4gICAgaWYgKGNvbXByZXNzQWxnb3JpdG0gIT09IFwibm9uZVwiKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoWEJhdGNoaW5nQ291bnQgPSBjb21wcmVzc0FsZ29yaXRtID09PSBcIng0XCIgPyA0IDogMjtcclxuXHJcbiAgICAgICAgaWYgKG51bUNodW5rc1ggPCBwYXRjaFhCYXRjaGluZ0NvdW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGUgY2h1bmtTaXplICglZCkgc2hvdWxkIGJlIGF0IGxlYXN0ICglZCkgdGltZXMgc21hbGxlciB0aGFuIHRoZSB3aWR0aCAoJWQpXFxuXCIsIGNodW5rU2l6ZSwgcGF0Y2hYQmF0Y2hpbmdDb3VudCwgd2lkdGgpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGJzeiA9IGNvbXByZXNzQWxnb3JpdG0gPT09IFwieDJcIiA/IDIgOlxyXG4gICAgICAgICAgICAgICAgY29tcHJlc3NBbGdvcml0bSA9PT0gXCJ4NFwiID8gMSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNDsgLy8gZmxvYXQzMlxyXG4gICAgXHJcbiAgICBjb25zdCBsZW4gPSBjaHVua0FyclNpemUgKiBjaHVua0NvdW50O1xyXG4gICAgY29uc3QgcHRyID0gQW1tby5fbWFsbG9jKGJzeiAqIGxlbik7XHJcbiAgICBcclxuICAgIHN3aXRjaCAoY29tcHJlc3NBbGdvcml0bSkge1xyXG4gICAgICAgIGNhc2UgXCJ4NFwiOiByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoQW1tby5IRUFQVTguYnVmZmVyLCBwdHIsIGxlbikgYXMgdW5rbm93biBhcyBUVFQ8VENvbXByZXNzPjtcclxuICAgICAgICBjYXNlIFwieDJcIjogcmV0dXJuIG5ldyBVaW50MTZBcnJheShBbW1vLkhFQVBVMTYuYnVmZmVyLCBwdHIsIGxlbikgYXMgdW5rbm93biBhcyBUVFQ8VENvbXByZXNzPjtcclxuICAgICAgICBkZWZhdWx0OiAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KEFtbW8uSEVBUEYzMi5idWZmZXIsIHB0ciwgbGVuKSBhcyB1bmtub3duIGFzIFRUVDxUQ29tcHJlc3M+O1xyXG4gICAgfVxyXG59IiwiXHJcbi8qKlxyXG4gKiBQcmltaXRpdmUgb2JqZWN0IGRlc2NyaWJpbmcgaG93IHRvIHN1Ym1pdCBjdXJyZW50IHZlcnRleC9pbmRleCBidWZmZXJzLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJUHJpbWl0aXZlPFRNYXAgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gUmVjb3JkPHN0cmluZywgYW55Pj4ge1xyXG5cclxuICAgIC8qKiBUcnVlIGlmIGVuYWJsZWQgKi9cclxuICAgIGVuYWJsZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdHlwZSBvZiBwcmltaXRpdmUgdG8gcmVuZGVyLiBDYW4gYmU6XHJcbiAgICAgKiBcclxuICAgICAqIC0ge0BsaW5rIHBjeC5QUklNSVRJVkVfUE9JTlRTfVxyXG4gICAgICogLSB7QGxpbmsgcGN4LlBSSU1JVElWRV9MSU5FU31cclxuICAgICAqIC0ge0BsaW5rIHBjeC5QUklNSVRJVkVfTElORUxPT1B9XHJcbiAgICAgKiAtIHtAbGluayBwY3guUFJJTUlUSVZFX0xJTkVTVFJJUH1cclxuICAgICAqIC0ge0BsaW5rIHBjeC5QUklNSVRJVkVfVFJJQU5HTEVTfVxyXG4gICAgICogLSB7QGxpbmsgcGN4LlBSSU1JVElWRV9UUklTVFJJUH1cclxuICAgICAqIC0ge0BsaW5rIHBjeC5QUklNSVRJVkVfVFJJRkFOfVxyXG4gICAgICovXHJcbiAgICB0eXBlOiBudW1iZXI7XHJcbiBcclxuICAgIC8qKiBUaGUgb2Zmc2V0IG9mIHRoZSBmaXJzdCBpbmRleCBvciB2ZXJ0ZXggdG8gZGlzcGF0Y2ggaW4gdGhlIGRyYXcgY2FsbC4gKi9cclxuICAgIGJhc2U6IG51bWJlcjtcclxuXHJcbiAgICAvKiogVGhlIG51bWJlciBvZiBpbmRpY2VzIG9yIHZlcnRpY2VzIHRvIGRpc3BhdGNoIGluIHRoZSBkcmF3IGNhbGwuICovXHJcbiAgICBjb3VudDogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBUcnVlIHRvIGludGVycHJldCB0aGUgcHJpbWl0aXZlIGFzIGluZGV4ZWQsIHRoZXJlYnkgdXNpbmcgdGhlIGN1cnJlbnRseSBzZXQgaW5kZXggYnVmZmVyIGFuZCBmYWxzZSBvdGhlcndpc2UuICovXHJcbiAgICBpbmRleGVkOiBib29sZWFuO1xyXG5cclxuICAgIGF0dHJpYnV0ZXM6IFRNYXA7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ3VzdG9tTWVzaDxUTWFwIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55PiA9IFJlY29yZDxzdHJpbmcsIGFueT4+IHtcclxuICAgIHByaW1pdGl2ZUNodW5rczogSVByaW1pdGl2ZTxUTWFwPltdW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ3VzdG9tTWVzaEluc3RhbmNlPFRNYXAgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gUmVjb3JkPHN0cmluZywgYW55Pj4ge1xyXG4gICAgbWVzaDogcGN4Lk1lc2ggJiBDdXN0b21NZXNoPFRNYXA+O1xyXG59XHJcblxyXG4oKCkgPT4ge1xyXG5cclxuICAgIGlmICghKHdpbmRvdyBhcyBhbnkpLkVYUEVSSU1FTlRBTF9URVJSQUlOX0NVU1RPTV9SRU5ERVIpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgY29uc3Qgb3JpZ2luYWxEcmF3SW5zdGFuY2UgPSBwYy5Gb3J3YXJkUmVuZGVyZXIucHJvdG90eXBlLmRyYXdJbnN0YW5jZTtcclxuXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBwYy5Gb3J3YXJkUmVuZGVyZXIucHJvdG90eXBlLmRyYXdJbnN0YW5jZSA9IGZ1bmN0aW9uKFxyXG4gICAgICAgIGRldmljZTogcGN4LldlYmdsR3JhcGhpY3NEZXZpY2UsXHJcbiAgICAgICAgbWVzaEluc3RhbmNlOiBwY3guTWVzaEluc3RhbmNlICYgQ3VzdG9tTWVzaEluc3RhbmNlLFxyXG4gICAgICAgIG1lc2g6IHBjeC5NZXNoICYgQ3VzdG9tTWVzaCxcclxuICAgICAgICBzdHlsZTogbnVtYmVyLFxyXG4gICAgICAgIG5vcm1hbD86IGJvb2xlYW5cclxuICAgICkge1xyXG5cclxuICAgICAgICBpZiAobWVzaC5wcmltaXRpdmVDaHVua3MgJiYgZGV2aWNlLmlzV2ViR0wyKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1vZGVsTWF0cml4SWQuc2V0VmFsdWUoKG1lc2hJbnN0YW5jZS5ub2RlIGFzIGFueSkud29ybGRUcmFuc2Zvcm0uZGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChub3JtYWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9ybWFsTWF0cml4SWQuc2V0VmFsdWUobWVzaEluc3RhbmNlLm5vZGUubm9ybWFsTWF0cml4LmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQga2IgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJpbWl0aXZlIG9mIG1lc2gucHJpbWl0aXZlQ2h1bmtzW3N0eWxlXSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcmltaXRpdmUuZW5hYmxlZCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJpbWl0aXZlLmF0dHJpYnV0ZXMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2NvcGVJZCBpbiBwcmltaXRpdmUuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWNlLnNjb3BlLnJlc29sdmUoc2NvcGVJZCkuc2V0VmFsdWUocHJpbWl0aXZlLmF0dHJpYnV0ZXNbc2NvcGVJZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZXZpY2UuZHJhdyhwcmltaXRpdmUsIDAsIGtiKTtcclxuICAgICAgICAgICAgICAgICAgICBrYiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvcmlnaW5hbERyYXdJbnN0YW5jZS5jYWxsKHRoaXMsIGRldmljZSwgbWVzaEluc3RhbmNlLCBtZXNoLCBzdHlsZSwgbm9ybWFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KSgpOyIsImltcG9ydCB7IGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR3Jhc3NGaWVsZFRleHR1cmUge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTUFYX0NIQU5FTCA9IDg7XHJcblxyXG4gICAgcHJpdmF0ZSBfdGV4dHVyZTogcGN4LlRleHR1cmU7XHJcbiAgICBwcml2YXRlIF9idWZmZXI6IFVpbnQ4QXJyYXk7XHJcbiAgICBwcml2YXRlIF93aWR0aDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfZGVwdGg6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRleHR1cmUoKSB7IHJldHVybiB0aGlzLl90ZXh0dXJlOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgd2lkdGg6IG51bWJlciwgZGVwdGg6IG51bWJlciwgYnVmZmVyPzogVWludDhBcnJheSkge1xyXG5cclxuICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuX2RlcHRoID0gZGVwdGg7XHJcblxyXG4gICAgICAgIGNvbnN0IHcgPSAod2lkdGggLSAxKSAvIDQgKyAxO1xyXG4gICAgICAgIGNvbnN0IGQgPSAoZGVwdGggLSAxKSAvIDQgKyAxO1xyXG5cclxuICAgICAgICB0aGlzLl9idWZmZXIgPSBidWZmZXIgPz8gbmV3IFVpbnQ4QXJyYXkodyAqIGQgKiA0KTsgLy8gPT4gMSBieXRlID0gOCBiaXRzID0+IDggLyAyID0gNCBiaXQgZm9yIDggbGV2ZWxzXHJcbiAgICAgICAgdGhpcy5fdGV4dHVyZSA9IG5ldyBwYy5UZXh0dXJlKGdyYXBoaWNzRGV2aWNlLCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiB3LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGQsXHJcbiAgICAgICAgICAgIGZvcm1hdDogcGMuUElYRUxGT1JNQVRfUkdCQThVLFxyXG4gICAgICAgICAgICBtaXBtYXBzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWluRmlsdGVyOiBwYy5GSUxURVJfTkVBUkVTVCxcclxuICAgICAgICAgICAgbWFnRmlsdGVyOiBwYy5GSUxURVJfTkVBUkVTVCxcclxuICAgICAgICAgICAgYWRkcmVzc1U6IHBjLkFERFJFU1NfQ0xBTVBfVE9fRURHRSxcclxuICAgICAgICAgICAgYWRkcmVzc1Y6IHBjLkFERFJFU1NfQ0xBTVBfVE9fRURHRSxcclxuICAgICAgICAgICAgZmxpcFk6IGdyYXBoaWNzRGV2aWNlLmlzV2ViR1BVLFxyXG4gICAgICAgICAgICBsZXZlbHM6IFt0aGlzLl9idWZmZXJdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fdGV4dHVyZT8uZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRDaGFubmVsKHg6IGludCwgejogaW50LCBjaGFubmVsOiBpbnQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9ICh4ICsgeiAqIHRoaXMuX3dpZHRoKSAvIDQgfCAwO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fYnVmZmVyW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UGl4ZWwoKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl90ZXh0dXJlKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLl90ZXh0dXJlLmRldmljZTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUNodW5rU2l6ZSA9IDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRldmljZS5pc1dlYkdMMikge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsID0gKGRldmljZSBhcyBwY3guV2ViZ2xHcmFwaGljc0RldmljZSkuZ2w7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlRm9ybWF0ID0gdGhpcy5fdGV4dHVyZS5pbXBsLl9nbEZvcm1hdDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmVQaXhlbFQgPSB0aGlzLl90ZXh0dXJlLmltcGwuX2dsUGl4ZWxUeXBlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZVRhcmdldCA9IHRoaXMuX3RleHR1cmUuaW1wbC5fZ2xUYXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlT2JqZWN0ID0gdGhpcy5fdGV4dHVyZS5pbXBsLl9nbFRleHR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUodGV4dHVyZVRhcmdldCwgdGV4dHVyZU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBnbC50ZXhTdWJJbWFnZTNEKGdsLlRFWFRVUkVfMkRfQVJSQVksIDAsIDAsIDAsIDAsIGRhdGFDaHVua1NpemUsIGRhdGFDaHVua1NpemUsIDEsIHRleHR1cmVGb3JtYXQsIHRleHR1cmVQaXhlbFQsIGJ1ZmZlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGV2aWNlLmlzV2ViR1BVKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2ViZ3B1ICA9IChkZXZpY2UgYXMgYW55KS53Z3B1IGFzIEdQVURldmljZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSAodGhpcy5fdGV4dHVyZS5pbXBsLmdwdVRleHR1cmUpIGFzIEdQVVRleHR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgd2ViZ3B1LnF1ZXVlLndyaXRlVGV4dHVyZShcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogWzAsIDAsIDBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaXBMZXZlbDogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlc1BlclJvdzogNCAqIGRhdGFDaHVua1NpemUsIC8vIGFsd2F5cyA0IGZvciByZ2JhIGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzUGVySW1hZ2U6IGRhdGFDaHVua1NpemVcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGRhdGFDaHVua1NpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogZGF0YUNodW5rU2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4vVHlwZXMubWpzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGV4dCh2YWw6IG51bWJlciwgbWluV2lkdGg6IG51bWJlciwgcHJlZml4OiBzdHJpbmcpIHtcclxuXHJcbiAgICBjb25zdCBzdHIgPSB2YWwudG9TdHJpbmcoKTtcclxuICAgIGNvbnN0IHN0ckxlbiA9IHN0ci5sZW5ndGg7XHJcbiAgICBjb25zdCBhcHBlbmRDb3VudCA9IG1pbldpZHRoIC0gc3RyTGVuO1xyXG5cclxuICAgIGxldCByZXN1bHQgPSBzdHI7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBlbmRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gcHJlZml4ICsgcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcclxuXHRyZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHZhbHVlKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByYW5kb21GbG9hdCgpIHtcclxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tRmxvYXRSYW5nZShzdGFydDogZmxvYXQsIGVuZDogZmxvYXQpIHtcclxuXHJcbiAgICBpZiAoZW5kID09IHN0YXJ0KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByYW5kb20gcmFuZ2VcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVsdGEgPSBlbmQgLSBzdGFydDtcclxuXHJcbiAgICBjb25zdCByYW5kb21WYWx1ZSA9IHJhbmRvbUZsb2F0KCkgKiBkZWx0YSArIHN0YXJ0O1xyXG5cclxuICAgIHJldHVybiByYW5kb21WYWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNOZXh0UG93ZXJPZlR3byh4OiBpbnQpOiBpbnQge1xyXG4gICAgXHJcbiAgICBsZXQgcmV0ID0gMTtcclxuXHJcbiAgICBpZiAoeCA9PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIDI7XHJcbiAgICB9XHJcblxyXG4gICAgd2hpbGUgKHJldCA8IHgpIHtcclxuICAgICAgICByZXQgPSByZXQgKiAyO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXQ7XHJcbn1cclxuXHJcbi8qKiBBIHJhbmRvbSBudW1iZXIgZnJvbSAtMS4wIHRvIDEuMCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbnJhbmQoKSB7XHJcblx0cmV0dXJuIE1hdGgucmFuZG9tKCkgKiAyLjAgLSAxLjA7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzZXRQcmVjaXNpb24gPSAoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgc2hhZGVyQ29kZTogc3RyaW5nKSA9PiB7XHJcbiAgICByZXR1cm4gXCJwcmVjaXNpb24gXCIgKyBncmFwaGljc0RldmljZS5wcmVjaXNpb24gKyBcIiBmbG9hdDtcXG5cIiArIHNoYWRlckNvZGU7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBsaXR0bGVFbmRpYW4gPSAoKCkgPT4ge1xyXG4gICAgY29uc3QgdWludDhBcnJheSAgPSBuZXcgVWludDhBcnJheShbMHhBQSwgMHhCQl0pO1xyXG4gICAgY29uc3QgdWludDE2YXJyYXkgPSBuZXcgVWludDE2QXJyYXkodWludDhBcnJheS5idWZmZXIpO1xyXG4gICAgcmV0dXJuIHVpbnQxNmFycmF5WzBdID09PSAweEJCQUE7XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tTdXBwb3J0UjMyRlRleHR1cmUgPSAoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkgPT4ge1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRPRE86IG5lZWQgbW9yZSB0ZXN0Li4uXHJcbiAgICAgICAgLy8gVE9ETzogb24gaXBob25lIG5vdCB3b3JrIHIzMmYgdGV4dHVyZXNcclxuICAgICAgICBpZiAobmF2aWdhdG9yLnBsYXRmb3JtLm1hdGNoKC9pUGhvbmV8aVBvZHxpUGFkLykgIT09IG51bGwgfHxcclxuICAgICAgICAgICAgbmF2aWdhdG9yLnBsYXRmb3JtLnN0YXJ0c1dpdGgoXCJNYWNcIikgJiYgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZ3JhcGhpY3NEZXZpY2UuaXNXZWJHTDIpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdsID0gKGdyYXBoaWNzRGV2aWNlIGFzIHBjeC5XZWJnbEdyYXBoaWNzRGV2aWNlKS5nbDtcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2wuZ2V0RXh0ZW5zaW9uKFwiRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdFwiKTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZ2wuZ2V0RXh0ZW5zaW9uKFwiT0VTX3RleHR1cmVfZmxvYXRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghIXJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChleCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFRIZWlnaHRNYXBGb3JtYXQgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9BYnNIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB7IGxpdHRsZUVuZGlhbiB9IGZyb20gXCIuLi9TaGFyZWQvVXRpbHMubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgdmVydGV4Q29vcmRBdHRyTmFtZSAgID0gXCJ2ZXJ0ZXhfcG9zaXRpb25cIjtcclxuZXhwb3J0IGNvbnN0IHZlcnRleEhlaWdodEF0dHJOYW1lICA9IFwidmVydGV4X2hlaWdodFwiO1xyXG5leHBvcnQgY29uc3QgdmVydGV4Tm9ybWFsQXR0ck5hbWUgID0gXCJ2ZXJ0ZXhfbm9ybWFsXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGF0Y2hJbnN0Q29vcmRPZmZzZXRQYXJhbU5hbWUgPSBcInZlcnRleF9wb3N0aW9uX29mZnNldFwiO1xyXG5leHBvcnQgY29uc3QgcGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSAgICAgPSBcInVUZXJyYWluUGF0Y2hDb29yZE9mZnNldFwiO1xyXG5leHBvcnQgY29uc3QgcGF0Y2hMb2RDb3JlUGFyYW1OYW1lICAgICAgICAgPSBcInVUZXJyYWluUGF0Y2hMb2RDb3JlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgdGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZSA9IFwidVRlcnJhaW5IZWlnaHRNYXBcIjtcclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5NYXhIZWlnaHRQYXJhbU5hbWUgPSBcInVUZXJyYWluTWF4SGVpZ2h0XCI7XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluU3BsYXRNYXBQYXJhbU5hbWUgID0gXCJ1VGVycmFpblNwbGF0TWFwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgbGl0dGxlRW5kaWFuVmFsdWUgPSBsaXR0bGVFbmRpYW4gPyAndHJ1ZScgOiAnZmFsc2UnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmluZXNWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICNkZWZpbmUgSE1fTlVNX0NIVU5LU19YICAgICAoJSVITV9OVU1fQ0hVTktTX1glJSlcclxuICAgICNkZWZpbmUgSE1fTlVNX0NIVU5LU19YX1UgICAodWludChITV9OVU1fQ0hVTktTX1gpKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFICAgICAgICglJUhNX0NIVU5LX1NJWkUlJSlcclxuICAgICNkZWZpbmUgSE1fQ0hVTktfU0laRV9VICAgICAodWludChITV9DSFVOS19TSVpFKSlcclxuICAgICNkZWZpbmUgSE1fQ0hVTktfU0laRV9NMV9VICAoSE1fQ0hVTktfU0laRV9VIC0gMXUpXHJcbiAgICAjZGVmaW5lIEhNX0NIVU5LX1NJWkVfRiAgICAgKGZsb2F0KEhNX0NIVU5LX1NJWkUpKVxyXG4gICAgI2RlZmluZSBUUl9TSVpFICAgICAgICAgICAgIChpdmVjMiglJVRSX1NJWkVfWCUlLCAlJVRSX1NJWkVfWiUlKSlcclxuICAgICNkZWZpbmUgVFJfU0laRV9GICAgICAgICAgICAodmVjMiglJVRSX1NJWkVfWF9GJSUsICUlVFJfU0laRV9aX0YlJSkpXHJcbiAgICAjZGVmaW5lIFRSX1NJWkVfVSAgICAgICAgICAgKHV2ZWMyKFRSX1NJWkUpKVxyXG4gICAgI2RlZmluZSBUUl9TSVpFX0hfRiAgICAgICAgIChUUl9TSVpFX0YgLyAyLjApXHJcbiAgICAjZGVmaW5lIFRSX1NJWkVfSF9OX0YgICAgICAgKC1UUl9TSVpFX0hfRilcclxuICAgICNkZWZpbmUgVFJfUEFUQ0hfU0laRV9YICAgICAoJSVUUl9QQVRDSF9TSVpFX1glJSlcclxuICAgICNkZWZpbmUgVFJfUEFUQ0hfU0laRV9NMSAgICAoVFJfUEFUQ0hfU0laRV9YIC0gMS4wKVxyXG4gICAgI2RlZmluZSBUUl9QQVRDSF9TSVpFX00xX0ggIChUUl9QQVRDSF9TSVpFX00xIC8gMi4wKVxyXG4gICAgI2RlZmluZSBUUl9QQVRDSF9TSVpFX00xX0YgICh2ZWMyKFRSX1BBVENIX1NJWkVfTTFfSCwgVFJfUEFUQ0hfU0laRV9NMV9IKSlcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlT3JpZ2luYWxWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIGF0dHJpYnV0ZSB1dmVjMiAke3ZlcnRleENvb3JkQXR0ck5hbWV9O1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IE9MRF9iYXNlRm9ySW5zdGFuY2luZ1ZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgYXR0cmlidXRlIHV2ZWMyICR7dmVydGV4Q29vcmRBdHRyTmFtZX07XHJcbiAgICBhdHRyaWJ1dGUgdXZlYzIgJHtwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZX07XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZUZvckluc3RhbmNpbmdWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIGF0dHJpYnV0ZSB1dmVjMiAke3ZlcnRleENvb3JkQXR0ck5hbWV9O1xyXG4gICAgYXR0cmlidXRlIHV2ZWMyICR7cGF0Y2hJbnN0Q29vcmRPZmZzZXRQYXJhbU5hbWV9O1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJhc2VGb3JDb21iaW5lSW5zdGFuY2luZ1ZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgYXR0cmlidXRlIHV2ZWMyICR7dmVydGV4Q29vcmRBdHRyTmFtZX07XHJcbiAgICBhdHRyaWJ1dGUgdXZlYzQgJHtwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZX07XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgaGVpZ2h0TWFwU2FtcGxlckJ1Z0ZpeCA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHVuaWZvcm0gaGlnaHAgJSVIRUlHSFRfTUFQX1NBTVBMRVIlJSAke3RlcnJhaW5IZWlnaHRNYXBQYXJhbU5hbWV9O1xyXG4gICAgXHJcbiAgICAjaWYgZGVmaW5lZCAoV0VCR1BVKVxyXG4gICAgICAgICNkZWZpbmUgZml4XyR7dGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZX0gaGlnaHAgJSVIRUlHSFRfTUFQX1NBTVBMRVIlJSgke3RlcnJhaW5IZWlnaHRNYXBQYXJhbU5hbWV9X3RleHR1cmUsICR7dGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZX1fc2FtcGxlcilcclxuICAgICNlbHNlXHJcbiAgICAgICAgI2RlZmluZSBmaXhfJHt0ZXJyYWluSGVpZ2h0TWFwUGFyYW1OYW1lfSAke3RlcnJhaW5IZWlnaHRNYXBQYXJhbU5hbWV9XHJcbiAgICAjZW5kaWZcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlQ2xlYXJWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHVuaWZvcm0gbWF0NCBtYXRyaXhfdmlld1Byb2plY3Rpb247XHJcbiAgICB1bmlmb3JtIG1hdDQgbWF0cml4X21vZGVsO1xyXG4gICAgdW5pZm9ybSBtYXQzIG1hdHJpeF9ub3JtYWw7XHJcblxyXG4gICAgdW5pZm9ybSBtZWRpdW1wIHZlYzIgJHtwYXRjaENvb3JkT2Zmc2V0UGFyYW1OYW1lfTtcclxuICAgIHVuaWZvcm0gbWVkaXVtcCBmbG9hdCAke3BhdGNoTG9kQ29yZVBhcmFtTmFtZX07XHJcblxyXG4gICAgdW5pZm9ybSBtZWRpdW1wIGZsb2F0ICR7dGVycmFpbk1heEhlaWdodFBhcmFtTmFtZX07XHJcblxyXG4gICAgdmVjMiBkQ3VycmVudFRlcnJhaW5YWjtcclxuICAgIGZsb2F0IGRDdXJyZW50VGVycmFpbkhlaWdodDtcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlQ2xlYXJTdWJWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzMgZFBvc2l0aW9uVztcclxuICAgIG1hdDQgZE1vZGVsTWF0cml4O1xyXG4gICAgbWF0MyBkTm9ybWFsTWF0cml4O1xyXG5cclxuICAgIHZlYzMgZEN1cnJlbnRUZXJyYWluTm9ybWFsO1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGN1cnJlbnRUZXJyYWluWFpGb3JJbnN0YW5jaW5nQ2h1bmtWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzIgZ2V0Q3VycmVudFRlcnJhaW5YWigpIHtcclxuICAgICAgICByZXR1cm4gdmVjMigke3ZlcnRleENvb3JkQXR0ck5hbWV9ICsgJHtwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZX0pO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGN1cnJlbnRUZXJyYWluWFpGb3JDb21iaW5lSW5zdGFuY2luZ0NodW5rVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWM0IHJvdGF0ZVBhdGNoWFpDb2ZmWzRdID0gdmVjNFs0XShcclxuICAgICAgICB2ZWM0KCAxLjAsICAwLjAsICAwLjAsICAxLjApLFxyXG4gICAgICAgIHZlYzQoIDAuMCwgIDEuMCwgLTEuMCwgIDAuMCksXHJcbiAgICAgICAgdmVjNCgtMS4wLCAgMC4wLCAgMC4wLCAtMS4wKSxcclxuICAgICAgICB2ZWM0KCAwLjAsIC0xLjAsICAxLjAsICAwLjApXHJcbiAgICApO1xyXG5cclxuICAgIHZlYzIgcm90YXRlUGF0Y2hYWih2ZWMyIGNvb3JkLCB1aW50IGFuZ2xlKSB7XHJcbiAgICAgICAgdmVjMiBvZmZzZXQgPSBjb29yZCAtIFRSX1BBVENIX1NJWkVfTTFfSDtcclxuICAgICAgICB2ZWM0IHRyYW5zZiA9IHJvdGF0ZVBhdGNoWFpDb2ZmW2FuZ2xlXTtcclxuICAgICAgICByZXR1cm4gVFJfUEFUQ0hfU0laRV9NMV9IICsgb2Zmc2V0Lnh4ICogdHJhbnNmLnh6ICsgb2Zmc2V0Lnl5ICogdHJhbnNmLnl3O1xyXG4gICAgfVxyXG5cclxuICAgIHZlYzIgZ2V0Q3VycmVudFRlcnJhaW5YWigpIHtcclxuICAgICAgICB2ZWMyIG9yZ1haID0gdmVjMigke3ZlcnRleENvb3JkQXR0ck5hbWV9KTtcclxuICAgICAgICB1aW50IGFuZ2xlID0gJHtwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZX0uejtcclxuICAgICAgICB2ZWMyIHJvdFhaID0gcm90YXRlUGF0Y2hYWihvcmdYWiwgYW5nbGUpO1xyXG4gICAgICAgIHJldHVybiByb3RYWiArIHZlYzIoJHtwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZX0ueHkpICogVFJfUEFUQ0hfU0laRV9NMTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBjdXJyZW50VGVycmFpblhaQ2h1bmtWUyA9IFxyXG5gXHJcbiAgICB2ZWMyIGdldEN1cnJlbnRUZXJyYWluWFooKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlYzIoJHt2ZXJ0ZXhDb29yZEF0dHJOYW1lfSkgKyAke3BhdGNoQ29vcmRPZmZzZXRQYXJhbU5hbWV9O1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5Db29yZHNDaHVua1ZTID1cclxuYFxyXG4gICAgdmVjMiBnZXRDdXJyZW50VGVycmFpblV2Q29vcmQoKSB7XHJcbiAgICAgICAgdmVjMiB4eiA9IGRDdXJyZW50VGVycmFpblhaO1xyXG4gICAgICAgIHZlYzIgdXYgPSAoeHogKyAwLjUpIC8gVFJfU0laRV9GO1xyXG4gICAgICAgIHJldHVybiB1djtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdXZlYzIgY2xhbXBUZXJyYWluWFoodmVjMiB4eikge1xyXG4gICAgICAgIHJldHVybiB1dmVjMihjbGFtcCh4eiwgdmVjMigwLjApLCBUUl9TSVpFX0YpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmVjMiBnZXRUZXJyYWluWFooaXZlYzIgb2Zmc2V0KSB7XHJcbiAgICAgICAgcmV0dXJuIGRDdXJyZW50VGVycmFpblhaICsgdmVjMihvZmZzZXQpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRGYWN0b3JSMzJGVlMgPSBcclxuYFxyXG4gICAgZmxvYXQgZ2V0VGVycmFpbkhlaWdodEZhY3RvckZyb21UZXh0dXJlKHV2ZWMzIGNvb3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRleGVsRmV0Y2goZml4XyR7dGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZX0sIGl2ZWMzKGNvb3JkKSwgMCkucjtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzYzODI3ODM2L2lzLWl0LXBvc3NpYmxlLXRvLWRvLWEtcmdiYS10by1mbG9hdC1hbmQtYmFjay1yb3VuZC10cmlwLWFuZC1yZWFkLXRoZS1waXhlbHMtaW5cclxuLy8gbm90ZTogdGhlIDAuMXMgaGVyZSBhbiB0aGVyZSBhcmUgdm9vZG9vIHJlbGF0ZWQgdG8gcHJlY2lzaW9uXHJcbi8qXHJcbiAgICBmbG9hdCByZ2JhOHVUb0Zsb2F0MCh1dmVjNCB2KSB7XHJcbiAgICAgICAgdmVjNCBiaXRzICA9IHZlYzQoJHtsaXR0bGVFbmRpYW4gPyAndicgOiAndi5hYmdyJ30pO1xyXG4gICAgICAgIGZsb2F0IHNpZ24gPSBtaXgoLTEuMCwgMS4wLCBzdGVwKGJpdHNbM10sIDEyOC4wKSk7XHJcbiAgICAgICAgZmxvYXQgZXhwbyA9IGZsb29yKG1vZChiaXRzWzNdICsgMC4xLCAxMjguMCkpICogMi4wICsgZmxvb3IoKGJpdHNbMl0gKyAwLjEpIC8gMTI4LjApIC0gMTI3LjA7XHJcbiAgICAgICAgZmxvYXQgc2lnICA9IGJpdHNbMF0gKyBiaXRzWzFdICogMjU2LjAgKyBmbG9vcihtb2QoYml0c1syXSArIDAuMSwgMTI4LjApKSAqIDI1Ni4wICogMjU2LjA7XHJcbiAgICAgICAgcmV0dXJuIHNpZ24gKiAoMS4wICsgc2lnIC8gODM4ODYwNy4wKSAqIHBvdygyLjAsIGV4cG8pO1xyXG4gICAgfVxyXG4qL1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRGYWN0b3JSR0JBOFVWUyA9XHJcbmAgICAgXHJcbiAgICBmbG9hdCByZ2JhOHVUb0Zsb2F0KHV2ZWM0IHYpIHtcclxuICAgICAgICB1dmVjNCBiaXRzID0gJHtsaXR0bGVFbmRpYW4gPyAndicgOiAndi5hYmdyJ307XHJcbiAgICAgICAgZmxvYXQgc2lnbiA9IDIuMCAqIHN0ZXAoZmxvYXQoYml0c1szXSksIDEyOC4wKSAtIDEuMDtcclxuICAgICAgICBmbG9hdCBleHBvID0gZmxvYXQoKGJpdHNbM10gJiAxMjd1KSAqIDJ1ICsgYml0c1syXSAvIDEyOHUpIC0gMTI3LjA7XHJcbiAgICAgICAgZmxvYXQgc2lnICA9IGZsb2F0KGJpdHNbMF0gKyBiaXRzWzFdICogMjU2dSArIChiaXRzWzJdICYgMTI3dSkgKiA2NTUzNnUpO1xyXG4gICAgICAgIHJldHVybiBzaWduICogKDEuMCArIHNpZyAvIDgzODg2MDcuMCkgKiBwb3coMi4wLCBleHBvKTtcclxuICAgIH1cclxuXHJcbiAgICBmbG9hdCBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yRnJvbVRleHR1cmUodXZlYzMgY29vcmQpIHtcclxuICAgICAgICB1dmVjNCByZ2JhID0gdGV4ZWxGZXRjaChmaXhfJHt0ZXJyYWluSGVpZ2h0TWFwUGFyYW1OYW1lfSwgaXZlYzMoY29vcmQpLCAwKTtcclxuICAgICAgICByZXR1cm4gcmdiYTh1VG9GbG9hdChyZ2JhKTtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIENvbXByZXNzIGhlaWdodCBieSB4IGNvb3JkIFtwYXRjaDAsIHBhdGNoMV0gLi4uXHJcbi8vIHNlZTogQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXAgZmlsZVxyXG5leHBvcnQgY29uc3QgdGVycmFpbkhlaWdodEZhY3RvclJHMTZVWDJWUyA9XHJcbmBcclxuICAgIGZsb2F0IGdldFRlcnJhaW5IZWlnaHRGYWN0b3JGcm9tVGV4dHVyZSh1dmVjMyBjb29yZCkge1xyXG5cclxuICAgICAgICB1aW50IGxldmVsICAgID0gY29vcmQuYjtcclxuICAgICAgICB1aW50IG5ld0xldmVsID0gbGV2ZWwgLyAydTtcclxuICAgICAgICB1aW50IHNoaWZ0ICAgID0gbGV2ZWwgJiAxdTtcclxuXHJcbiAgICAgICAgdXZlYzQgcmdiYSA9IHRleGVsRmV0Y2goZml4XyR7dGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZX0sIGl2ZWMzKGNvb3JkLnh5LCBuZXdMZXZlbCksIDApO1xyXG5cclxuICAgICAgICByZXR1cm4gZmxvYXQocmdiYVtzaGlmdF0pIC8gNjU1MzUuMDtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIENvbXByZXNzIGhlaWdodCBieSB4IGNvb3JkIFtwYXRjaDAsIHBhdGNoMSwgcGF0Y2gyLCBwYXRjaDNdIC4uLlxyXG4vLyBzZWU6IENvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwIGZpbGVcclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRGYWN0b3JSR0JBOFVYNFZTID1cclxuYFxyXG4gICAgZmxvYXQgZ2V0VGVycmFpbkhlaWdodEZhY3RvckZyb21UZXh0dXJlKHV2ZWMzIGNvb3JkKSB7XHJcblxyXG4gICAgICAgIHVpbnQgbGV2ZWwgICAgPSBjb29yZC5iO1xyXG4gICAgICAgIHVpbnQgbmV3TGV2ZWwgPSBsZXZlbCAvIDR1O1xyXG4gICAgICAgIHVpbnQgc2hpZnQgICAgPSBsZXZlbCAmIDN1O1xyXG5cclxuICAgICAgICB1dmVjNCByZ2JhID0gdGV4ZWxGZXRjaChmaXhfJHt0ZXJyYWluSGVpZ2h0TWFwUGFyYW1OYW1lfSwgaXZlYzMoY29vcmQueHksIG5ld0xldmVsKSwgMCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmbG9hdChyZ2JhW3NoaWZ0XSkgLyAyNTUuMDtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluQ2h1bmtCdWZmZXJDb29yZFZTID1cclxuYFxyXG4gICAgdXZlYzMgZ2V0VGVycmFpbkNodW5rQnVmZmVyQ29vcmQodXZlYzIgeHopIHtcclxuXHJcbiAgICAgICAgdXZlYzIgY2sgPSB4eiAvIEhNX0NIVU5LX1NJWkVfVTtcclxuXHJcbiAgICAgICAgdWludCBsb2NhbFggPSB4elswXSAlIEhNX0NIVU5LX1NJWkVfVTtcclxuICAgICAgICB1aW50IGxvY2FsWiA9IHh6WzFdICUgSE1fQ0hVTktfU0laRV9VO1xyXG4gICAgICAgIHVpbnQgbGV2ZWwgID0gY2tbMV0gKiBITV9OVU1fQ0hVTktTX1hfVSArIGNrWzBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdXZlYzMobG9jYWxYLCBsb2NhbFosIGxldmVsKTtcclxuICAgIH1cclxuXHJcbiAgICB1dmVjMyBnZXRUZXJyYWluQ2h1bmtCdWZmZXJSZWxhdGl2ZUNvb3JkKGl2ZWMyIG9mZnNldCkge1xyXG4gICAgICAgIHZlYzIgIG9jID0gZ2V0VGVycmFpblhaKG9mZnNldCk7XHJcbiAgICAgICAgdXZlYzIgeHogPSBjbGFtcFRlcnJhaW5YWihvYyk7XHJcbiAgICAgICAgcmV0dXJuIGdldFRlcnJhaW5DaHVua0J1ZmZlckNvb3JkKHh6KTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluSGVpZ2h0RmFjdG9yQ2h1bmtWUyA9IFxyXG5gXHJcbiAgICBmbG9hdCBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yKGl2ZWMyIG9mZnNldCkge1xyXG4gICAgICAgIHV2ZWMzIGNvb3JkID0gZ2V0VGVycmFpbkNodW5rQnVmZmVyUmVsYXRpdmVDb29yZChvZmZzZXQpO1xyXG4gICAgICAgIHJldHVybiBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yRnJvbVRleHR1cmUoY29vcmQpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRDaHVua1ZTID1cclxuYFxyXG4gICAgZmxvYXQgZ2V0VGVycmFpbkhlaWdodChpdmVjMiBvZmZzZXQpIHtcclxuICAgICAgICByZXR1cm4gZ2V0VGVycmFpbkhlaWdodEZhY3RvcihvZmZzZXQpICogJHt0ZXJyYWluTWF4SGVpZ2h0UGFyYW1OYW1lfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZmxvYXQgZ2V0Q3VycmVudFRlcnJhaW5IZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldFRlcnJhaW5IZWlnaHQoaXZlYzIoMCwgMCkpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluc3RhbmNpbmdWUyA9IGBgO1xyXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtSW5zdGFuY2luZ1ZTID0gYGA7XHJcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1EZWNsVlMgPSBgYDtcclxuXHJcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1WUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIC8vdmFyeWluZyBmbG9hdCB2UGF0Y2hMb2Q7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2Q29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdkdyaWRQb3NpdGlvbjtcclxuXHJcbiAgICBtYXQ0IGdldE1vZGVsTWF0cml4KCkge1xyXG4gICAgICAgIHJldHVybiBtYXRyaXhfbW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgdmVjMyBnZXRXb3JsZFBvc2l0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBkUG9zaXRpb25XO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2ZWM0IGdldFBvc2l0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgZE1vZGVsTWF0cml4ID0gZ2V0TW9kZWxNYXRyaXgoKTtcclxuICAgICAgICBkQ3VycmVudFRlcnJhaW5YWiA9IGdldEN1cnJlbnRUZXJyYWluWFooKTtcclxuICAgICAgICBkQ3VycmVudFRlcnJhaW5IZWlnaHQgPSBnZXRDdXJyZW50VGVycmFpbkhlaWdodCgpO1xyXG5cclxuICAgICAgICB2ZWMyIGNlbnRlcmVkWFogPSBUUl9TSVpFX0hfTl9GICsgZEN1cnJlbnRUZXJyYWluWFo7XHJcbiAgICAgICAgdmVjNCBsb2NhbFBvcyAgID0gdmVjNChjZW50ZXJlZFhaLnIsIGRDdXJyZW50VGVycmFpbkhlaWdodCwgY2VudGVyZWRYWi5nLCAxLjApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZlYzQgcG9zVyAgICAgID0gZE1vZGVsTWF0cml4ICogbG9jYWxQb3M7XHJcbiAgICAgICAgdmVjNCBzY3JlZW5Qb3MgPSBtYXRyaXhfdmlld1Byb2plY3Rpb24gKiBwb3NXO1xyXG5cclxuICAgICAgICBkUG9zaXRpb25XID0gcG9zVy54eXo7XHJcblxyXG4gICAgICAgIC8vdlBhdGNoTG9kICAgICA9ICR7cGF0Y2hMb2RDb3JlUGFyYW1OYW1lfTtcclxuICAgICAgICB2R3JpZFBvc2l0aW9uID0gZEN1cnJlbnRUZXJyYWluWFo7XHJcbiAgICAgICAgdlV2Q29vcmQgICAgICA9IGdldEN1cnJlbnRUZXJyYWluVXZDb29yZCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gc2NyZWVuUG9zO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHV2MFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG5gO1xyXG5cclxuLy8gRklYOiBidWcgd2l0aCBnZXRVdjAgZm9yIFYxIEVuZ2luZVxyXG5leHBvcnQgY29uc3Qgc3RhcnRVdjBWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmAgXHJcbiAgICB2ZWMyIGdldFV2MCgpIHtcclxuICAgICAgICByZXR1cm4gdmVjMigwLjApO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbEJ5SGVpZ2h0TWFwVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGdldEN1cnJlbnRUZXJyYWluTm9ybWFsKCkge1xyXG5cclxuICAgICAgICBmbG9hdCBzdGVwICA9IHBvdygyLjAsICR7cGF0Y2hMb2RDb3JlUGFyYW1OYW1lfSArIDEuMCkgLyAyLjA7XHJcbiAgICAgICAgZmxvYXQgbGVmdCAgPSBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yKGl2ZWMyKCBzdGVwLCAgMCkpO1xyXG4gICAgICAgIGZsb2F0IHJpZ2h0ID0gZ2V0VGVycmFpbkhlaWdodEZhY3RvcihpdmVjMigtc3RlcCwgIDApKTtcclxuICAgICAgICBmbG9hdCB1cCAgICA9IGdldFRlcnJhaW5IZWlnaHRGYWN0b3IoaXZlYzIoIDAsICAgICBzdGVwKSk7XHJcbiAgICAgICAgZmxvYXQgZG93biAgPSBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yKGl2ZWMyKCAwLCAgICAtc3RlcCkpO1xyXG5cclxuICAgICAgICB2ZWMzIG5vcm1hbCA9IHZlYzMobGVmdCwgc3RlcCAqIDAuMDIsIGRvd24pIC0gdmVjMyhyaWdodCwgMCwgdXApO1xyXG5cclxuICAgICAgICByZXR1cm4gbm9ybWFsaXplKG5vcm1hbCk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3Qgbm9ybWFsVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGdldE5vcm1hbCgpIHtcclxuICAgICAgICBkTm9ybWFsTWF0cml4ID0gbWF0cml4X25vcm1hbDtcclxuICAgICAgICByZXR1cm4gbm9ybWFsaXplKGROb3JtYWxNYXRyaXggKiBkQ3VycmVudFRlcnJhaW5Ob3JtYWwpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbENvcmVWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIC8vIEZJWDogdmVydGV4X25vcm1hbCB1bmRlY2xhcmF0aW9uXHJcbiAgICB2ZWMzIHZlcnRleF9ub3JtYWw7XHJcbiAgICB2ZWMzIGRDdXJyZW50VGVycmFpbk5vcm1hbDtcclxuXHJcbiAgICB2ZWMzIGdldExvY2FsTm9ybWFsKHZlYzMgdmVydGV4Tm9ybWFsKSB7XHJcblxyXG4gICAgICAgIGRDdXJyZW50VGVycmFpbk5vcm1hbCA9IGdldEN1cnJlbnRUZXJyYWluTm9ybWFsKCk7XHJcbiAgICAgICAgdmVydGV4X25vcm1hbCA9IGRDdXJyZW50VGVycmFpbk5vcm1hbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRDdXJyZW50VGVycmFpbk5vcm1hbDtcclxuICAgIH1cclxuXHJcbiAgICBtYXQzIGdldE5vcm1hbE1hdHJpeChtYXQ0IG1vZGVsTWF0cml4KSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeF9ub3JtYWw7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3Qgc3RhcnRWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcblxyXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcclxuXHJcbiAgICAjaWYgZGVmaW5lZChTSEFET1dfUEFTUylcclxuICAgICNlbHNlXHJcbiAgICAgICAgZEN1cnJlbnRUZXJyYWluTm9ybWFsID0gZ2V0Q3VycmVudFRlcnJhaW5Ob3JtYWwoKTtcclxuICAgICNlbmRpZlxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdhbW1hTm9ybWFsaXplSGVhZGVyUFMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICAjZGVmaW5lIEdBTU1BX05PUk1BTElaRVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdhbW1hTm9ybWFsaXplQ2h1bmtQUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzMgYXV0b0dhbW1hQ29ycmVjdElucHV0KHZlYzMgdikge1xyXG4gICAgICAgICNpZiBkZWZpbmVkKEdBTU1BX05PUk1BTElaRSlcclxuICAgICAgICAgICAgcmV0dXJuIGdhbW1hQ29ycmVjdElucHV0KHYpO1xyXG4gICAgICAgICNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICNlbmRpZlxyXG4gICAgfVxyXG5cclxuICAgIHZlYzQgYXV0b0dhbW1hQ29ycmVjdElucHV0KHZlYzQgdikge1xyXG4gICAgICAgICNpZiBkZWZpbmVkKEdBTU1BX05PUk1BTElaRSlcclxuICAgICAgICAgICAgcmV0dXJuIGdhbW1hQ29ycmVjdElucHV0KHYpO1xyXG4gICAgICAgICNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICNlbmRpZlxyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG1heExheWVyc0NvdW50ID0gNTsgLy8gRGVmYXVsdCArIFIgKyBHICsgQiArIEFcclxuZXhwb3J0IGNvbnN0IGRpZmZ1c2VQUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkQgJHt0ZXJyYWluU3BsYXRNYXBQYXJhbU5hbWV9O1xyXG4gICAgdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyREFycmF5IHVUZXJyYWluTGF5ZXJzRGlmZnVzZTtcclxuICAgIC8vdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyREFycmF5IHVUZXJyYWluTGF5ZXJzTm9ybWFsTWFwO1xyXG4gICAgdW5pZm9ybSBmbG9hdCB1VGVycmFpbkxheWVyc0NvdW50O1xyXG4gICAgdW5pZm9ybSBmbG9hdCB1VGVycmFpbkxheWVyc0ZsYWdzWyR7bWF4TGF5ZXJzQ291bnR9XTtcclxuICAgIHVuaWZvcm0gdmVjMiB1VGVycmFpbkxheWVyc1NjYWxlWyR7bWF4TGF5ZXJzQ291bnR9XTtcclxuICAgIHVuaWZvcm0gdmVjMiB1VGVycmFpbkxheWVyc09mZnNldFske21heExheWVyc0NvdW50fV07XHJcblxyXG4gICAgLy92YXJ5aW5nIGZsb2F0IHZQYXRjaExvZDtcclxuICAgIHZhcnlpbmcgdmVjMiB2VXZDb29yZDtcclxuICAgIHZhcnlpbmcgdmVjMiB2R3JpZFBvc2l0aW9uO1xyXG5cclxuICAgIHZvaWQgZ2V0QWxiZWRvKCkge1xyXG5cclxuICAgICAgICB2ZWM0IHNwbGF0ICAgICA9IGF1dG9HYW1tYUNvcnJlY3RJbnB1dCh0ZXh0dXJlKCR7dGVycmFpblNwbGF0TWFwUGFyYW1OYW1lfSwgdlV2Q29vcmQpKTtcclxuICAgICAgICB2ZWMyIHV2VGV4WmVybyA9IHVUZXJyYWluTGF5ZXJzT2Zmc2V0WzBdICsgdlV2Q29vcmQgKiB1VGVycmFpbkxheWVyc1NjYWxlWzBdOyAvLyAvICh2UGF0Y2hMb2QgKyAxLjApO1xyXG4gICAgICAgIHZlYzQgdGV4WmVybyAgID0gdGV4dHVyZSh1VGVycmFpbkxheWVyc0RpZmZ1c2UsIHZlYzModXZUZXhaZXJvLCAwKSk7XHJcbiAgICAgICAgdmVjMyBhbGJlZG8gICAgPSB0ZXhaZXJvLnJnYjtcclxuXHJcbiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCAke21heExheWVyc0NvdW50fTsgKytpKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodVRlcnJhaW5MYXllcnNGbGFnc1tpXSA+IDAuMCAmJiBzcGxhdFtpIC0gMV0gPiAwLjApIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWMyIHV2ICA9IHVUZXJyYWluTGF5ZXJzT2Zmc2V0W2ldICsgdlV2Q29vcmQgKiB1VGVycmFpbkxheWVyc1NjYWxlW2ldO1xyXG4gICAgICAgICAgICAgICAgdmVjNCB0ZXggPSB0ZXh0dXJlKHVUZXJyYWluTGF5ZXJzRGlmZnVzZSwgdmVjMyh1diwgaSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGFsYmVkbyA9IG1peChhbGJlZG8sIHRleC5yZ2IsIHNwbGF0W2kgLSAxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRBbGJlZG8gPSBhdXRvR2FtbWFDb3JyZWN0SW5wdXQoYWxiZWRvKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBoZWlnaHRNYXBGYWN0b3JzQ2h1bmtzID0ge1xyXG4gICAgdGVycmFpbkhlaWdodEZhY3RvclIzMkZWUyxcclxuICAgIHRlcnJhaW5IZWlnaHRGYWN0b3JSR0JBOFVWUyxcclxuICAgIHRlcnJhaW5IZWlnaHRGYWN0b3JSRzE2VVgyVlMsXHJcbiAgICB0ZXJyYWluSGVpZ2h0RmFjdG9yUkdCQThVWDRWUyxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNodW5rcyA9IHtcclxuXHJcbiAgICAuLi5oZWlnaHRNYXBGYWN0b3JzQ2h1bmtzLFxyXG5cclxuICAgIGhlaWdodE1hcFNhbXBsZXJCdWdGaXgsXHJcblxyXG4gICAgY3VycmVudFRlcnJhaW5YWkZvckNvbWJpbmVJbnN0YW5jaW5nQ2h1bmtWUyxcclxuICAgIGN1cnJlbnRUZXJyYWluWFpGb3JJbnN0YW5jaW5nQ2h1bmtWUyxcclxuICAgIGN1cnJlbnRUZXJyYWluWFpDaHVua1ZTLFxyXG5cclxuICAgIHRlcnJhaW5IZWlnaHRGYWN0b3JDaHVua1ZTLFxyXG5cclxuICAgIHRlcnJhaW5IZWlnaHRDaHVua1ZTLFxyXG4gICAgdGVycmFpbkNvb3Jkc0NodW5rVlMsXHJcbiAgICB0ZXJyYWluQ2h1bmtCdWZmZXJDb29yZFZTLFxyXG5cclxuICAgIG5vcm1hbEJ5SGVpZ2h0TWFwVlMsXHJcblxyXG4gICAgLy8gVmVydGV4XHJcbiAgICBkZWZpbmVzVlMsXHJcbiAgICBiYXNlRm9yQ29tYmluZUluc3RhbmNpbmdWUyxcclxuICAgIGJhc2VGb3JJbnN0YW5jaW5nVlMsXHJcbiAgICBiYXNlT3JpZ2luYWxWUyxcclxuICAgIGJhc2VDbGVhclZTLFxyXG4gICAgYmFzZUNsZWFyU3ViVlMsXHJcblxyXG4gICAgdHJhbnNmb3JtRGVjbFZTLFxyXG4gICAgXHJcbiAgICB0cmFuc2Zvcm1WUyxcclxuICAgIGluc3RhbmNpbmdWUyxcclxuICAgIHRyYW5zZm9ybUluc3RhbmNpbmdWUyxcclxuICAgIG5vcm1hbFZTLFxyXG4gICAgbm9ybWFsQ29yZVZTLFxyXG5cclxuICAgIHV2MFZTLFxyXG4gICAgc3RhcnRWUyxcclxuICAgIHN0YXJ0VXYwVlMsXHJcblxyXG4gICAgLy8gRnJhZ21lbnRcclxuICAgIGdhbW1hTm9ybWFsaXplSGVhZGVyUFMsXHJcbiAgICBnYW1tYU5vcm1hbGl6ZUNodW5rUFMsXHJcbiAgICBkaWZmdXNlUFMsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRlcnJhaW5IZWlnaHRGYWN0b3JWU1N0b3JlIHtcclxuICAgIHRlcnJhaW5IZWlnaHRGYWN0b3JSMzJGVlM6IHN0cmluZyxcclxuICAgIHRlcnJhaW5IZWlnaHRGYWN0b3JSR0JBOFVWUzogc3RyaW5nLFxyXG4gICAgdGVycmFpbkhlaWdodEZhY3RvclJHMTZVWDJWUzogc3RyaW5nLFxyXG4gICAgdGVycmFpbkhlaWdodEZhY3RvclJHQkE4VVg0VlM6IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRlcnJhaW5IZWlnaHRGYWN0b3JWUyhmb3JtYXQ6IFRIZWlnaHRNYXBGb3JtYXQsIGNodW5rc1N0b3JlOiBJVGVycmFpbkhlaWdodEZhY3RvclZTU3RvcmUpIHtcclxuICAgIHN3aXRjaCAoZm9ybWF0KSB7XHJcbiAgICAgICAgY2FzZSAncjMyZic6ICAgcmV0dXJuIGNodW5rc1N0b3JlLnRlcnJhaW5IZWlnaHRGYWN0b3JSMzJGVlM7XHJcbiAgICAgICAgY2FzZSAncmdiYSc6ICAgcmV0dXJuIGNodW5rc1N0b3JlLnRlcnJhaW5IZWlnaHRGYWN0b3JSR0JBOFVWUztcclxuICAgICAgICBjYXNlICdyZ2JhWDInOiByZXR1cm4gY2h1bmtzU3RvcmUudGVycmFpbkhlaWdodEZhY3RvclJHMTZVWDJWUztcclxuICAgICAgICBjYXNlICdyZ2JhWDQnOiByZXR1cm4gY2h1bmtzU3RvcmUudGVycmFpbkhlaWdodEZhY3RvclJHQkE4VVg0VlM7XHJcbiAgICAgICAgZGVmYXVsdDogYnJlYWs7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1hdCBub3Qgc3VwcG9ydGVkJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0dXJlVHlwZShmb3JtYXQ6IFRIZWlnaHRNYXBGb3JtYXQpIHtcclxuICAgIHN3aXRjaCAoZm9ybWF0KSB7XHJcbiAgICAgICAgY2FzZSAncjMyZic6ICAgcmV0dXJuIHBjLlBJWEVMRk9STUFUX1IzMkY7XHJcbiAgICAgICAgY2FzZSAncmdiYSc6ICAgcmV0dXJuIHBjLlBJWEVMRk9STUFUX1JHQkE4VTtcclxuICAgICAgICBjYXNlICdyZ2JhWDInOiByZXR1cm4gcGMuUElYRUxGT1JNQVRfUkcxNlU7XHJcbiAgICAgICAgY2FzZSAncmdiYVg0JzogcmV0dXJuIHBjLlBJWEVMRk9STUFUX1JHQkE4VTtcclxuICAgICAgICBkZWZhdWx0OiBicmVhaztcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignRm9ybWF0IG5vdCBzdXBwb3J0ZWQnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNhbXBsZXJUeXBlKGZvcm1hdDogVEhlaWdodE1hcEZvcm1hdCkge1xyXG4gICAgc3dpdGNoIChmb3JtYXQpIHtcclxuICAgICAgICBjYXNlICdyMzJmJzogICByZXR1cm4gJ3NhbXBsZXIyREFycmF5JztcclxuICAgICAgICBjYXNlICdyZ2JhJzogICByZXR1cm4gJ3VzYW1wbGVyMkRBcnJheSc7XHJcbiAgICAgICAgY2FzZSAncmdiYVgyJzogcmV0dXJuICd1c2FtcGxlcjJEQXJyYXknO1xyXG4gICAgICAgIGNhc2UgJ3JnYmFYNCc6IHJldHVybiAndXNhbXBsZXIyREFycmF5JztcclxuICAgICAgICBkZWZhdWx0OiBicmVhaztcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignRm9ybWF0IG5vdCBzdXBwb3J0ZWQnKTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVGVycmFpblNoYWRlck9wdGlvbnMge1xyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGRlcHRoOiBudW1iZXIsXHJcbiAgICBwYXRjaFNpemU6IG51bWJlcixcclxuICAgIGhlaWdodE1hcENodW5rU2l6ZTogbnVtYmVyLFxyXG4gICAgaW5zdGFuY2luZzogJ3NpbXBsZScgfCAnY29tYmluZScgfCBmYWxzZSxcclxuICAgIGhlaWdodE1hcEZvcm1hdDogVEhlaWdodE1hcEZvcm1hdCxcclxuICAgIGNodW5rc1N0b3JlPzogdHlwZW9mIGNodW5rcyxcclxuICAgIGVuZ2luZVZlcnNpb246ICd2MScgfCAndjInXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXJyYWluU2hhZGVyQ2h1bmtzKHtcclxuICAgIHdpZHRoLFxyXG4gICAgZGVwdGgsXHJcbiAgICBwYXRjaFNpemUsXHJcbiAgICBoZWlnaHRNYXBDaHVua1NpemUsXHJcbiAgICBpbnN0YW5jaW5nLFxyXG4gICAgaGVpZ2h0TWFwRm9ybWF0LFxyXG4gICAgY2h1bmtzU3RvcmUgPSBjaHVua3MsXHJcbiAgICBlbmdpbmVWZXJzaW9uID0gJ3YxJyxcclxufTogSVRlcnJhaW5TaGFkZXJPcHRpb25zKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XHJcblxyXG4gICAgY29uc3QgZGVmaW5lc1ZTID0gY2h1bmtzU3RvcmUuZGVmaW5lc1ZTXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlSE1fTlVNX0NIVU5LU19YJSUnLCBTdHJpbmcoKHdpZHRoIC0gMSkgLyAoaGVpZ2h0TWFwQ2h1bmtTaXplIC0gMSkgfCAwKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVITV9DSFVOS19TSVpFJSUnLCBTdHJpbmcoaGVpZ2h0TWFwQ2h1bmtTaXplIHwgMCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlVFJfU0laRV9YJSUnLCBTdHJpbmcod2lkdGgpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJVRSX1NJWkVfWiUlJywgU3RyaW5nKGRlcHRoKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUl9TSVpFX1hfRiUlJywgd2lkdGgudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUl9TSVpFX1pfRiUlJywgZGVwdGgudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUl9QQVRDSF9TSVpFX1glJScsIHBhdGNoU2l6ZS50b0ZpeGVkKDEpKTtcclxuXHJcbiAgICBjb25zdCB0ZXJyYWluSGVpZ2h0RmFjdG9yVlMgPSBnZXRUZXJyYWluSGVpZ2h0RmFjdG9yVlMoaGVpZ2h0TWFwRm9ybWF0LCBjaHVua3NTdG9yZSk7XHJcblxyXG4gICAgY29uc3QgYmFzZUNsZWFyVlMgPSBjaHVua3NTdG9yZS5iYXNlQ2xlYXJWUyArIGNodW5rc1N0b3JlLmhlaWdodE1hcFNhbXBsZXJCdWdGaXgucmVwbGFjZUFsbCgnJSVIRUlHSFRfTUFQX1NBTVBMRVIlJScsIGdldFNhbXBsZXJUeXBlKGhlaWdodE1hcEZvcm1hdCkpO1xyXG5cclxuICAgIGNvbnN0IGJhc2VDb29yZFZTID0gaW5zdGFuY2luZyA9PT0gJ2NvbWJpbmUnID8gY2h1bmtzU3RvcmUuYmFzZUZvckNvbWJpbmVJbnN0YW5jaW5nVlMgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jaW5nID09PSAnc2ltcGxlJyAgPyBjaHVua3NTdG9yZS5iYXNlRm9ySW5zdGFuY2luZ1ZTIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzU3RvcmUuYmFzZU9yaWdpbmFsVlM7XHJcblxyXG4gICAgY29uc3QgY3VycmVudFRlcnJhaW5YWlZTID0gaW5zdGFuY2luZyA9PT0gJ2NvbWJpbmUnID8gY2h1bmtzU3RvcmUuY3VycmVudFRlcnJhaW5YWkZvckNvbWJpbmVJbnN0YW5jaW5nQ2h1bmtWUyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jaW5nID09PSAnc2ltcGxlJyAgPyBjaHVua3NTdG9yZS5jdXJyZW50VGVycmFpblhaRm9ySW5zdGFuY2luZ0NodW5rVlMgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzU3RvcmUuY3VycmVudFRlcnJhaW5YWkNodW5rVlM7XHJcbiAgICBcclxuICAgIGlmIChlbmdpbmVWZXJzaW9uID09PSAndjInKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vcm1hbENvcmVWUyA9IGNodW5rc1N0b3JlLm5vcm1hbEJ5SGVpZ2h0TWFwVlMgKyBjaHVua3NTdG9yZS5ub3JtYWxDb3JlVlM7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtVlMgPSBkZWZpbmVzVlNcclxuICAgICAgICAgICAgKyBiYXNlQ29vcmRWU1xyXG4gICAgICAgICAgICArIGJhc2VDbGVhclZTXHJcbiAgICAgICAgICAgICsgY3VycmVudFRlcnJhaW5YWlZTXHJcbiAgICAgICAgICAgICsgdGVycmFpbkhlaWdodEZhY3RvclZTXHJcbiAgICAgICAgICAgICsgY2h1bmtzU3RvcmUudGVycmFpbkNvb3Jkc0NodW5rVlNcclxuICAgICAgICAgICAgKyBjaHVua3NTdG9yZS50ZXJyYWluQ2h1bmtCdWZmZXJDb29yZFZTXHJcbiAgICAgICAgICAgICsgY2h1bmtzU3RvcmUudGVycmFpbkhlaWdodEZhY3RvckNodW5rVlNcclxuICAgICAgICAgICAgKyBjaHVua3NTdG9yZS50ZXJyYWluSGVpZ2h0Q2h1bmtWU1xyXG4gICAgICAgICAgICArIGNodW5rc1N0b3JlLnRyYW5zZm9ybVZTO1xyXG5cclxuICAgICAgICBjb25zdCBkaWZmdXNlUFMgPSBjaHVua3NTdG9yZS5nYW1tYU5vcm1hbGl6ZUhlYWRlclBTXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgY2h1bmtzU3RvcmUuZ2FtbWFOb3JtYWxpemVDaHVua1BTXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgY2h1bmtzU3RvcmUuZGlmZnVzZVBTO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVmVydGV4XHJcbiAgICAgICAgICAgIG5vcm1hbENvcmVWUyxcclxuICAgICAgICAgICAgdHJhbnNmb3JtVlMsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybUNvcmVWUzogXCJcIixcclxuICAgICAgICAgICAgdHJhbnNmb3JtSW5zdGFuY2luZ1ZTOiBcIlwiLFxyXG5cclxuICAgICAgICAgICAgLy8gRnJhZ21lbnRcclxuICAgICAgICAgICAgZGlmZnVzZVBTLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RhcnRWUyA9IGNodW5rc1N0b3JlLm5vcm1hbEJ5SGVpZ2h0TWFwVlMgKyBjaHVua3NTdG9yZS5zdGFydFV2MFZTICsgY2h1bmtzU3RvcmUuc3RhcnRWUztcclxuICAgIGNvbnN0IGJhc2VWUyA9IGJhc2VDb29yZFZTICsgYmFzZUNsZWFyVlMgKyBjaHVua3NTdG9yZS5iYXNlQ2xlYXJTdWJWUztcclxuICAgIGNvbnN0IHRyYW5zZm9ybVZTID0gZGVmaW5lc1ZTXHJcbiAgICAgICAgKyBjdXJyZW50VGVycmFpblhaVlNcclxuICAgICAgICArIHRlcnJhaW5IZWlnaHRGYWN0b3JWU1xyXG4gICAgICAgICsgY2h1bmtzU3RvcmUudGVycmFpbkNvb3Jkc0NodW5rVlNcclxuICAgICAgICArIGNodW5rc1N0b3JlLnRlcnJhaW5DaHVua0J1ZmZlckNvb3JkVlNcclxuICAgICAgICArIGNodW5rc1N0b3JlLnRlcnJhaW5IZWlnaHRGYWN0b3JDaHVua1ZTXHJcbiAgICAgICAgKyBjaHVua3NTdG9yZS50ZXJyYWluSGVpZ2h0Q2h1bmtWU1xyXG4gICAgICAgICsgY2h1bmtzU3RvcmUudHJhbnNmb3JtVlM7XHJcblxyXG4gICAgY29uc3QgZGlmZnVzZVBTID0gY2h1bmtzU3RvcmUuZ2FtbWFOb3JtYWxpemVIZWFkZXJQU1xyXG4gICAgICAgICAgICAgICAgICAgICsgY2h1bmtzU3RvcmUuZ2FtbWFOb3JtYWxpemVDaHVua1BTXHJcbiAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5kaWZmdXNlUFM7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgLy8gVmVydGV4XHJcbiAgICAgICAgYmFzZVZTLFxyXG4gICAgICAgIHRyYW5zZm9ybVZTLFxyXG4gICAgICAgIG5vcm1hbFZTOiBjaHVua3NTdG9yZS5ub3JtYWxWUyxcclxuICAgICAgICB1djBWUzogY2h1bmtzU3RvcmUudXYwVlMsXHJcbiAgICAgICAgc3RhcnRWUyxcclxuXHJcbiAgICAgICAgdHJhbnNmb3JtRGVjbFZTOiBjaHVua3NTdG9yZS50cmFuc2Zvcm1EZWNsVlMsXHJcbiAgICAgICAgaW5zdGFuY2luZ1ZTOiBjaHVua3NTdG9yZS5pbnN0YW5jaW5nVlMsXHJcblxyXG4gICAgICAgIC8vIEZyYWdtZW50XHJcbiAgICAgICAgZGlmZnVzZVBTLFxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgZ2V0U2FtcGxlclR5cGUsIGdldFRlcnJhaW5IZWlnaHRGYWN0b3JWUywgaGVpZ2h0TWFwRmFjdG9yc0NodW5rcywgaGVpZ2h0TWFwU2FtcGxlckJ1Z0ZpeCwgdGVycmFpbk1heEhlaWdodFBhcmFtTmFtZSB9IGZyb20gXCIuLi9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlc1NoYWRlckNodW5rcy5tanNcIjtcclxuaW1wb3J0IHsgVEhlaWdodE1hcEZvcm1hdCB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0Fic0hlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCB2aW5kZXhBdHRyTmFtZSA9IFwidmVydGV4X3Bvc2l0aW9uXCI7XHJcbmV4cG9ydCBjb25zdCBvZmZzZXRBdHRyTmFtZSA9IFwidmVydGV4X29mZnNldFwiO1xyXG5leHBvcnQgY29uc3Qgc2hhcGVBdHRyTmFtZSAgPSBcInZlcnRleF9zaGFwZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRpbWVQYXJhbU5hbWUgICAgICAgICAgPSBcInVUaW1lXCI7XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluU2NhbGVQYXJhbU5hbWUgID0gXCJ1VGVycmFpblNjYWxlXCI7XHJcbmV4cG9ydCBjb25zdCBsb2QxT2Zmc2V0WFpQYXJhbU5hbWUgID0gXCJ1TG9kMU9mZnNldFhaXCI7XHJcbmV4cG9ydCBjb25zdCBsb2QyT2Zmc2V0WFpQYXJhbU5hbWUgID0gXCJ1TG9kMk9mZnNldFhaXCI7XHJcbmV4cG9ydCBjb25zdCBkcmF3UG9zUGFyYW1OYW1lICAgICAgID0gXCJ1RHJhd1Bvc2l0aW9uXCI7XHJcbmV4cG9ydCBjb25zdCB3aW5kSW50ZW5zaXR5UGFyYW1OYW1lID0gXCJ1V2luZEludGVuc2l0eVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluc3RhbmNpbmdWUyA9IGBgO1xyXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtSW5zdGFuY2luZ1ZTID0gYGA7XHJcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1EZWNsVlMgPSBgYDtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWZpbmVzVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICAjZGVmaW5lIEhNX05VTV9DSFVOS1NfWCAgICAoJSVITV9OVU1fQ0hVTktTX1glJSlcclxuICAgICNkZWZpbmUgSE1fTlVNX0NIVU5LU19YX1UgICh1aW50KEhNX05VTV9DSFVOS1NfWCkpXHJcbiAgICAjZGVmaW5lIEhNX0NIVU5LX1NJWkUgICAgICAoJSVITV9DSFVOS19TSVpFJSUpXHJcbiAgICAjZGVmaW5lIEhNX0NIVU5LX1NJWkVfRiAgICAoZmxvYXQoSE1fQ0hVTktfU0laRSkpXHJcbiAgICAjZGVmaW5lIEhNX0NIVU5LX1NJWkVfVSAgICAodWludChITV9DSFVOS19TSVpFKSlcclxuICAgICNkZWZpbmUgVFJfU0laRSAgICAgICAgICAgIChpdmVjMiglJVRSX1NJWkVfWCUlLCAlJVRSX1NJWkVfWiUlKSlcclxuICAgICNkZWZpbmUgVFJfU0laRV9GICAgICAgICAgICh2ZWMyKCUlVFJfU0laRV9YX0YlJSwgJSVUUl9TSVpFX1pfRiUlKSlcclxuICAgICNkZWZpbmUgVFJfU0laRV9CT1VORF9GICAgIChUUl9TSVpFX0YgLSAyLjApICAgICAgXHJcbiAgICAjZGVmaW5lIFRSX1NJWkVfSF9GICAgICAgICAoVFJfU0laRV9GIC8gMi4wKVxyXG4gICAgI2RlZmluZSBUUl9TSVpFX0hfTl9GICAgICAgKC1UUl9TSVpFX0hfRilcclxuXHJcbiAgICAjZGVmaW5lIFBBVENIX1NJWkUgICAgICAgICAoJSVQQVRDSF9TSVpFJSUpXHJcbiAgICAjZGVmaW5lIEhBTEZfUEFUQ0hfU0laRSAgICAoUEFUQ0hfU0laRSAvIDIuMClcclxuXHJcbiAgICAjZGVmaW5lIEJMQURFX0hFSUdIVF9UQUxMICAoJSVCTEFERV9IRUlHSFRfVEFMTCUlKSAvLyBoZWlnaHQgb2YgYSB0YWxsIGJsYWRlXHJcblxyXG4gICAgI2RlZmluZSBUUkFOU0lUSU9OX0xPVyAgICAgKCUlVFJBTlNJVElPTl9MT1clJSkgICAvLyBlbGV2YXRpb24gb2YgYmVhY2gtZ3Jhc3MgdHJhbnNpdGlvbiAoc3RhcnQpXHJcbiAgICAjZGVmaW5lIFRSQU5TSVRJT05fSElHSCAgICAoJSVUUkFOU0lUSU9OX0hJR0glJSkgIC8vIChlbmQpXHJcbiAgICAjZGVmaW5lIFRSQU5TSVRJT05fTk9JU0UgICAoMC4wNikgICAgICAgICAgICAgICAgIC8vIHRyYW5zaXRpb24gbm9pc2Ugc2NhbGVcclxuICAgICNkZWZpbmUgQ0lSQ0xFX1JBRElVUyAgICAgIChQQVRDSF9TSVpFICogMi45KVxyXG4gICAgI2RlZmluZSBNQVhfWklOSVRfRElTVEFOQ0UgKDMwMC4wKVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmluZXNCbGFkZVZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgI2RlZmluZSBMT0QwX0JMQURFX1NFR1MgICAgICAgICglJUxPRDBfQkxBREVfU0VHUyUlKSAvLyAjIG9mIGJsYWRlIHNlZ21lbnRzIGxvZCAwXHJcbiAgICAjZGVmaW5lIExPRDFfQkxBREVfU0VHUyAgICAgICAgKCUlTE9EMV9CTEFERV9TRUdTJSUpIC8vICMgb2YgYmxhZGUgc2VnbWVudHMgbG9kIDFcclxuICAgICNkZWZpbmUgTE9EMl9CTEFERV9TRUdTICAgICAgICAoJSVMT0QyX0JMQURFX1NFR1MlJSkgLy8gIyBvZiBibGFkZSBzZWdtZW50cyBsb2QgMlxyXG5cclxuICAgICNkZWZpbmUgTE9EMF9CTEFERV9ESVZTICAgICAgICAoTE9EMF9CTEFERV9TRUdTICsgMS4wKSAgLy8gIyBvZiBkaXZpc2lvbnNcclxuICAgICNkZWZpbmUgTE9EMF9CTEFERV9WRVJUUyAgICAgICAoTE9EMF9CTEFERV9ESVZTICogMi4wKSAgLy8gIyBvZiB2ZXJ0aWNlcyAocGVyIHNpZGUsIHNvIDEvMiB0b3RhbClcclxuICAgICNkZWZpbmUgTE9EMF9CTEFERV9WRVJUU19DT1VOVCAoTE9EMF9CTEFERV9WRVJUUyAqIDIuMCkgLy8gIyBvZiB2ZXJ0aWNlc1xyXG5cclxuICAgICNkZWZpbmUgTE9EMV9CTEFERV9ESVZTICAgICAgICAoTE9EMV9CTEFERV9TRUdTICsgMS4wKSAgLy8gIyBvZiBkaXZpc2lvbnNcclxuICAgICNkZWZpbmUgTE9EMV9CTEFERV9WRVJUUyAgICAgICAoTE9EMV9CTEFERV9ESVZTICogMi4wKSAgLy8gIyBvZiB2ZXJ0aWNlcyAocGVyIHNpZGUsIHNvIDEvMiB0b3RhbClcclxuICAgICNkZWZpbmUgTE9EMV9CTEFERV9WRVJUU19DT1VOVCAoTE9EMV9CTEFERV9WRVJUUyAqIDIuMCkgLy8gIyBvZiB2ZXJ0aWNlc1xyXG5cclxuICAgICNkZWZpbmUgTE9EMl9CTEFERV9ESVZTICAgICAgICAoTE9EMl9CTEFERV9TRUdTICsgMS4wKSAgLy8gIyBvZiBkaXZpc2lvbnNcclxuICAgICNkZWZpbmUgTE9EMl9CTEFERV9WRVJUUyAgICAgICAoTE9EMl9CTEFERV9ESVZTICogMi4wKSAgLy8gIyBvZiB2ZXJ0aWNlcyAocGVyIHNpZGUsIHNvIDEvMiB0b3RhbClcclxuICAgICNkZWZpbmUgTE9EMl9CTEFERV9WRVJUU19DT1VOVCAoTE9EMl9CTEFERV9WRVJUUyAqIDIuMCkgLy8gIyBvZiB2ZXJ0aWNlc1xyXG4gICAgXHJcbiAgICAjZGVmaW5lIExPRDJfQkxBREVfVkVSVFNfQUxMX0NPVU5UIChMT0QyX0JMQURFX1ZFUlRTX0NPVU5UICogMTYuMCkgLy8gIyBvZiB2ZXJ0aWNlcyBhbGwgZnJhZ21lbnRzXHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3Qgbm9ybWFsQ29yZVZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgLy8gRklYOiB2ZXJ0ZXhfbm9ybWFsIHVuZGVjbGFyYXRpb25cclxuICAgIHZlYzMgdmVydGV4X25vcm1hbDtcclxuXHJcbiAgICB2ZWMzIGdldExvY2FsTm9ybWFsKHZlYzMgdmVydGV4Tm9ybWFsKSB7XHJcblxyXG4gICAgICAgIC8vIFNldCBkZWZhdWx0IHNoYWRlciBub3JtYWxcclxuICAgICAgICB2ZXJ0ZXhfbm9ybWFsID0gZFZlcnRleE5vcm1hbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRWZXJ0ZXhOb3JtYWw7XHJcbiAgICB9XHJcblxyXG4gICAgbWF0MyBnZXROb3JtYWxNYXRyaXgobWF0NCBtb2RlbE1hdHJpeCkge1xyXG4gICAgICAgIHJldHVybiBtYXRyaXhfbm9ybWFsO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRyYW5zZm9ybVZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdmVjMyBnZXRXb3JsZFBvc2l0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBkUG9zaXRpb25XO1xyXG4gICAgfVxyXG5cclxuICAgIG1hdDQgZ2V0TW9kZWxNYXRyaXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeF9tb2RlbDtcclxuICAgIH1cclxuXHJcbiAgICB2ZWM0IGdldFBvc2l0aW9uKCkge1xyXG5cclxuICAgICAgICBkZWNvZGVCbGFkZSgpO1xyXG4gICAgICAgIGNhbGN1bGF0ZUJsYWRlVmVydGV4KCk7XHJcblxyXG4gICAgICAgIGRNb2RlbE1hdHJpeCA9IGdldE1vZGVsTWF0cml4KCk7XHJcblxyXG4gICAgICAgIHZlYzQgcG9zVyAgICAgID0gZE1vZGVsTWF0cml4ICogdmVjNChkVmVydGV4UG9zaXRpb24sIDEuMCk7XHJcbiAgICAgICAgdmVjNCBzY3JlZW5Qb3MgPSBtYXRyaXhfdmlld1Byb2plY3Rpb24gKiBwb3NXO1xyXG5cclxuICAgICAgICBkUG9zaXRpb25XID0gcG9zVy54eXo7XHJcblxyXG4gICAgICAgIHJldHVybiBzY3JlZW5Qb3M7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3Qgbm9ybWFsVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGdldE5vcm1hbCgpIHtcclxuICAgICAgICBkTm9ybWFsTWF0cml4ID0gbWF0cml4X25vcm1hbDtcclxuICAgICAgICByZXR1cm4gbm9ybWFsaXplKGROb3JtYWxNYXRyaXggKiBkVmVydGV4Tm9ybWFsKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCB1djBWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzIgZ2V0VXYwKCkge1xyXG4gICAgICAgIHJldHVybiB2ZWMyKGRFZGdlT2ZCbGFkZSwgZERpdlZlcnRleEluZGV4ICogMi4wKTtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIGJ1ZyB3aXRoIGdldFV2MFxyXG5leHBvcnQgY29uc3Qgc3RhcnRVdjBWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmAgICAgXHJcbiAgICB2ZWMyIGdldFV2MCgpIHtcclxuICAgICAgICByZXR1cm4gdmVjMihkRWRnZU9mQmxhZGUsIGREaXZWZXJ0ZXhJbmRleCAqIDIuMCk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZVZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdW5pZm9ybSBtYXQ0IG1hdHJpeF92aWV3UHJvamVjdGlvbjtcclxuICAgIHVuaWZvcm0gbWF0NCBtYXRyaXhfbW9kZWw7XHJcbiAgICB1bmlmb3JtIG1hdDMgbWF0cml4X25vcm1hbDtcclxuXHJcbiAgICB1bmlmb3JtIG1lZGl1bXAgdXNhbXBsZXIyRCB1RGF0YU1hcDtcclxuXHJcbiAgICB1bmlmb3JtIHZlYzMgICR7dGVycmFpblNjYWxlUGFyYW1OYW1lfTtcclxuICAgIHVuaWZvcm0gZmxvYXQgJHt0ZXJyYWluTWF4SGVpZ2h0UGFyYW1OYW1lfTtcclxuICAgIFxyXG4gICAgdW5pZm9ybSB2ZWMzICAke2RyYXdQb3NQYXJhbU5hbWV9OyAgICAgICAvLyBjZW50cmUgb2Ygd2hlcmUgd2Ugd2FudCB0byBkcmF3XHJcbiAgICB1bmlmb3JtIGZsb2F0ICR7dGltZVBhcmFtTmFtZX07ICAgICAgICAgIC8vIHVzZWQgdG8gYW5pbWF0ZSBibGFkZXNcclxuICAgIHVuaWZvcm0gZmxvYXQgJHt3aW5kSW50ZW5zaXR5UGFyYW1OYW1lfTtcclxuXHJcbiAgICB1bmlmb3JtIHZlYzIgJHtsb2QxT2Zmc2V0WFpQYXJhbU5hbWV9WzhdOyAgLy8gY2VudGVyIG9mZnNldCBmcm9tIGRyYXcgcG9zIGxvZCAxXHJcbiAgICB1bmlmb3JtIHZlYzIgJHtsb2QyT2Zmc2V0WFpQYXJhbU5hbWV9WzE2XTsgLy8gY2VudGVyIG9mZnNldCBmcm9tIGRyYXcgcG9zIGxvZCAyXHJcblxyXG4gICAgYXR0cmlidXRlIGZsb2F0ICR7dmluZGV4QXR0ck5hbWV9O1xyXG4gICAgYXR0cmlidXRlIHZlYzQgJHtvZmZzZXRBdHRyTmFtZX07XHJcbiAgICBhdHRyaWJ1dGUgdmVjNCAke3NoYXBlQXR0ck5hbWV9O1xyXG5cclxuICAgIGZsb2F0IGRWZXJ0ZXhJbmRleDsgICAgICAgICAgIC8vIHZlcnRleCBpbmRleCBmb3IgdGhpcyBzaWRlIG9mIHRoZSBibGFkZVxyXG4gICAgZmxvYXQgZERpdlZlcnRleEluZGV4OyAgICAgICAgLy8gZGl2IGluZGV4ICgwIC4uIEJMQURFX0RJVlMpXHJcbiAgICBmbG9hdCBkUGVyY2VudE9mQmxhZGVIZWlnaHQ7ICAvLyBwZXJjZW50IG9mIGhlaWdodCBvZiBibGFkZSB0aGlzIHZlcnRleCBpcyBhdFxyXG4gICAgZmxvYXQgZFNpZGVPZkJsYWRlOyAgICAgICAgICAgLy8gZnJvbnQvYmFjayBzaWRlIG9mIGJsYWRlXHJcbiAgICBmbG9hdCBkRWRnZU9mQmxhZGU7ICAgICAgICAgICAvLyBsZWZ0L3JpZ2h0IGVkZ2UgKHg9MCBvciB4PTEpXHJcbiAgICB2ZWMyIGRCbGFkZVRlcnJhaW5YWlBvczsgICAgICAvLyBibGFkZSB4eiBwb3NpdGlvbiBvbiB0ZXJyYWluXHJcbiAgICB2ZWMzIGRWZXJ0ZXhQb3NpdGlvbjsgICAgICAgICAvLyBWZXJ0ZXggcG9zaXRpb24gLSBzdGFydCB3aXRoIDJEIHNoYXBlLCBubyBiZW5kIGFwcGxpZWRcclxuICAgIHZlYzMgZFZlcnRleE5vcm1hbDsgICAgICAgICAgIC8vIFZlcnRleCBub3JtYWxcclxuICAgIHZlYzIgZFRlcnJhaW5QYXRjaE9mZnNldFhaOyAgIC8vIFRlcnJhaW4gcGF0Y2ggb2Zmc2V0IGZyb20gY2VudGVyXHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZUNsZWFyU3ViVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGRQb3NpdGlvblc7XHJcbiAgICBtYXQ0IGRNb2RlbE1hdHJpeDtcclxuICAgIG1hdDMgZE5vcm1hbE1hdHJpeDtcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluSGVpZ2h0TWFwVlMgPSBcclxuYFxyXG4gICAgdXZlYzIgY2xhbXBUZXJyYWluWFoodmVjMiB4eikge1xyXG4gICAgICAgIHJldHVybiB1dmVjMihjbGFtcCh4eiwgdmVjMigwLjApLCBUUl9TSVpFX0YpKTtcclxuICAgIH1cclxuXHJcbiAgICB1dmVjMyBnZXRUZXJyYWluQ2h1bmtCdWZmZXJDb29yZCh2ZWMyIG9yaWdYWikge1xyXG5cclxuICAgICAgICB1dmVjMiB4eiA9IGNsYW1wVGVycmFpblhaKG9yaWdYWik7XHJcbiAgICAgICAgdXZlYzIgY2sgPSB4eiAvIEhNX0NIVU5LX1NJWkVfVTtcclxuXHJcbiAgICAgICAgdWludCBsb2NhbFggPSB4elswXSAlIEhNX0NIVU5LX1NJWkVfVTtcclxuICAgICAgICB1aW50IGxvY2FsWiA9IHh6WzFdICUgSE1fQ0hVTktfU0laRV9VO1xyXG4gICAgICAgIHVpbnQgbGV2ZWwgID0gY2tbMV0gKiBITV9OVU1fQ0hVTktTX1hfVSArIGNrWzBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdXZlYzMobG9jYWxYLCBsb2NhbFosIGxldmVsKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZmxvYXQgZ2V0VGVycmFpbkhlaWdodEZhY3Rvcih2ZWMyIHh6KSB7XHJcbiAgICAgICAgdXZlYzMgY29vcmQgPSBnZXRUZXJyYWluQ2h1bmtCdWZmZXJDb29yZCh4eik7XHJcbiAgICAgICAgcmV0dXJuIGdldFRlcnJhaW5IZWlnaHRGYWN0b3JGcm9tVGV4dHVyZShjb29yZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmxvYXQgZ2V0VGVycmFpbkhlaWdodCh2ZWMyIHh6KSB7XHJcbiAgICAgICAgcmV0dXJuIGdldFRlcnJhaW5IZWlnaHRGYWN0b3IoeHopICogJHt0ZXJyYWluTWF4SGVpZ2h0UGFyYW1OYW1lfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZmxvYXQgZ2V0VGVycmFpbkhlaWdodEludGVycG9sYXRlZCh2ZWMyIHh6KSB7XHJcblxyXG4gICAgICAgIC8vIGhlcmUgd2UgY2FuIGNhbGN1bGF0ZSBub3JtYWxcclxuXHJcbiAgICAgICAgdmVjMiBmbG9vclhaID0gZmxvb3IoeHopO1xyXG5cclxuICAgICAgICBmbG9hdCB4MHowID0gZ2V0VGVycmFpbkhlaWdodChmbG9vclhaKTtcclxuXHJcbiAgICAgICAgaWYgKChmbG9vclhaWzBdICsgMS4wID49IFRSX1NJWkVfRlswXSkgfHxcclxuICAgICAgICAgICAgKGZsb29yWFpbMV0gKyAxLjAgPj0gVFJfU0laRV9GWzFdKSkge1xyXG4gICAgICAgICAgICByZXR1cm4geDB6MDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZsb2F0IHgxejAgPSBnZXRUZXJyYWluSGVpZ2h0KGZsb29yWFogKyB2ZWMyKDEuMCwgMC4wKSk7XHJcbiAgICAgICAgZmxvYXQgeDB6MSA9IGdldFRlcnJhaW5IZWlnaHQoZmxvb3JYWiArIHZlYzIoMC4wLCAxLjApKTtcclxuICAgICAgICBmbG9hdCB4MXoxID0gZ2V0VGVycmFpbkhlaWdodChmbG9vclhaICsgdmVjMigxLjAsIDEuMCkpO1xyXG5cclxuICAgICAgICBmbG9hdCBmYWN0b3JYID0geHpbMF0gLSBmbG9vclhaWzBdO1xyXG4gICAgICAgIGZsb2F0IGZhY3RvclogPSB4elsxXSAtIGZsb29yWFpbMV07XHJcblxyXG4gICAgICAgIGZsb2F0IGludGVycG9sYXRlZEJvdHRvbSA9ICh4MXowIC0geDB6MCkgKiBmYWN0b3JYICsgeDB6MDtcclxuICAgICAgICBmbG9hdCBpbnRlcnBvbGF0ZWRUb3AgICAgPSAoeDF6MSAtIHgwejEpICogZmFjdG9yWCArIHgwejE7XHJcbiAgICAgICAgZmxvYXQgZmluYWxIZWlnaHQgICAgICAgID0gKGludGVycG9sYXRlZFRvcCAtIGludGVycG9sYXRlZEJvdHRvbSkgKiBmYWN0b3JaICsgaW50ZXJwb2xhdGVkQm90dG9tO1xyXG5cclxuICAgICAgICByZXR1cm4gZmluYWxIZWlnaHQ7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmxhZGVEZWNvZGVyVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2b2lkIGRlY29kZUJsYWRlKCkge1xyXG5cclxuICAgICAgICBmbG9hdCBublZpID0gJHt2aW5kZXhBdHRyTmFtZX0gLSBMT0QyX0JMQURFX1ZFUlRTX0FMTF9DT1VOVDtcclxuXHJcbiAgICAgICAgaWYgKG5uVmkgPCAwLjApIHtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0IGxvZDJuVmkgID0gbW9kKCR7dmluZGV4QXR0ck5hbWV9LCBMT0QyX0JMQURFX1ZFUlRTX0NPVU5UKTtcclxuICAgICAgICAgICAgaW50IHBhdGNoSW5kZXggPSBpbnQoJHt2aW5kZXhBdHRyTmFtZX0gLyBMT0QyX0JMQURFX1ZFUlRTX0NPVU5UKTtcclxuXHJcbiAgICAgICAgICAgIGRWZXJ0ZXhJbmRleCAgICAgICAgICA9IG1vZChsb2QyblZpLCBMT0QyX0JMQURFX1ZFUlRTKTtcclxuICAgICAgICAgICAgZERpdlZlcnRleEluZGV4ICAgICAgID0gZmxvb3IoZFZlcnRleEluZGV4IC8gMi4wKTtcclxuICAgICAgICAgICAgZFBlcmNlbnRPZkJsYWRlSGVpZ2h0ID0gZERpdlZlcnRleEluZGV4IC8gTE9EMl9CTEFERV9TRUdTO1xyXG4gICAgICAgICAgICBkU2lkZU9mQmxhZGUgICAgICAgICAgPSBmbG9vcihsb2QyblZpIC8gTE9EMl9CTEFERV9WRVJUUyk7XHJcblxyXG4gICAgICAgICAgICBkVGVycmFpblBhdGNoT2Zmc2V0WFogPSAke2xvZDJPZmZzZXRYWlBhcmFtTmFtZX1bcGF0Y2hJbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG5uVmkgPCBMT0QwX0JMQURFX1ZFUlRTX0NPVU5UKSB7XHJcblxyXG4gICAgICAgICAgICBkVmVydGV4SW5kZXggICAgICAgICAgPSBtb2Qobm5WaSwgTE9EMF9CTEFERV9WRVJUUyk7XHJcbiAgICAgICAgICAgIGREaXZWZXJ0ZXhJbmRleCAgICAgICA9IGZsb29yKGRWZXJ0ZXhJbmRleCAvIDIuMCk7XHJcbiAgICAgICAgICAgIGRQZXJjZW50T2ZCbGFkZUhlaWdodCA9IGREaXZWZXJ0ZXhJbmRleCAvIExPRDBfQkxBREVfU0VHUztcclxuICAgICAgICAgICAgZFNpZGVPZkJsYWRlICAgICAgICAgID0gZmxvb3Iobm5WaSAvIExPRDBfQkxBREVfVkVSVFMpO1xyXG5cclxuICAgICAgICAgICAgZFRlcnJhaW5QYXRjaE9mZnNldFhaID0gdmVjMigwLjApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0IGxvZDFublZpID0gbm5WaSAtIExPRDBfQkxBREVfVkVSVFNfQ09VTlQ7XHJcbiAgICAgICAgICAgIGZsb2F0IGxvZDFuVmkgID0gbW9kKGxvZDFublZpLCBMT0QxX0JMQURFX1ZFUlRTX0NPVU5UKTtcclxuICAgICAgICAgICAgaW50IHBhdGNoSW5kZXggPSBpbnQobG9kMW5uVmkgLyBMT0QxX0JMQURFX1ZFUlRTX0NPVU5UKTtcclxuXHJcbiAgICAgICAgICAgIGRWZXJ0ZXhJbmRleCAgICAgICAgICA9IG1vZChsb2QxblZpLCBMT0QxX0JMQURFX1ZFUlRTKTtcclxuICAgICAgICAgICAgZERpdlZlcnRleEluZGV4ICAgICAgID0gZmxvb3IoZFZlcnRleEluZGV4IC8gMi4wKTtcclxuICAgICAgICAgICAgZFBlcmNlbnRPZkJsYWRlSGVpZ2h0ID0gZERpdlZlcnRleEluZGV4IC8gTE9EMV9CTEFERV9TRUdTO1xyXG4gICAgICAgICAgICBkU2lkZU9mQmxhZGUgICAgICAgICAgPSBmbG9vcihsb2QxblZpIC8gTE9EMV9CTEFERV9WRVJUUyk7XHJcblxyXG4gICAgICAgICAgICBkVGVycmFpblBhdGNoT2Zmc2V0WFogPSAke2xvZDFPZmZzZXRYWlBhcmFtTmFtZX1bcGF0Y2hJbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGRFZGdlT2ZCbGFkZSA9IG1vZChkVmVydGV4SW5kZXgsIDIuMCk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgY2FsY3VsYXRlTG9jYWxWUyA9ICAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICAvLyBSb3RhdGUgYnkgYW4gYW5nbGVcclxuICAgIHZlYzIgcm90YXRlKGZsb2F0IHgsIGZsb2F0IHksIGZsb2F0IHIpIHtcclxuICAgICAgICBmbG9hdCBjID0gY29zKHIpO1xyXG4gICAgICAgIGZsb2F0IHMgPSBzaW4ocik7XHJcbiAgICAgICAgcmV0dXJuIHZlYzIoeCAqIGMgLSB5ICogcywgeCAqIHMgKyB5ICogYyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUm90YXRlIGJ5IGEgdmVjdG9yXHJcbiAgICB2ZWMyIHJvdGF0ZShmbG9hdCB4LCBmbG9hdCB5LCB2ZWMyIHIpIHtcclxuICAgICAgICByZXR1cm4gdmVjMih4ICogci54IC0geSAqIHIueSwgeCAqIHIueSArIHkgKiByLngpO1xyXG4gICAgfVxyXG5cclxuICAgIGZsb2F0IGdldEdyYXNzRmFjdG9yKHZlYzIgb3h6KSB7XHJcbiAgICBcclxuICAgICAgICB2ZWMyIHh6ID0gZmxvb3Iob3h6KTtcclxuXHJcbiAgICAgICAgaWYgKHh6WzBdIDwgMC4wIHx8XHJcbiAgICAgICAgICAgIHh6WzFdIDwgMC4wIHx8XHJcbiAgICAgICAgICAgIHh6WzBdID4gVFJfU0laRV9CT1VORF9GWzBdIHx8XHJcbiAgICAgICAgICAgIHh6WzFdID4gVFJfU0laRV9CT1VORF9GWzFdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwLjA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gMS4wO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2VGVycmFpbkNvb3JkO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZVdkNvb3JkO1xyXG4gICAgdmFyeWluZyB2ZWMzIHZDb2xvcjtcclxuXHJcbiAgICB2b2lkIGNhbGN1bGF0ZUJsYWRlVmVydGV4KCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZlYzQgb2Zmc2V0ID0gJHtvZmZzZXRBdHRyTmFtZX07XHJcbiAgICAgICAgdmVjNCBzaGFwZSAgPSAke3NoYXBlQXR0ck5hbWV9O1xyXG5cclxuICAgICAgICAvLyBCYXNlZCBvbiBjZW50cmUgb2YgdmlldyBjb25lIHBvc2l0aW9uLCB3aGF0IGdyaWQgdGlsZSBzaG91bGRcclxuICAgICAgICAvLyB0aGlzIHBpZWNlIG9mIGdyYXNzIGJlIGRyYXduIGF0P1xyXG4gICAgICAgIHZlYzIgcXVhZENlbnRlclBvcyA9ICR7ZHJhd1Bvc1BhcmFtTmFtZX0ueHo7XHJcbiAgICAgICAgdmVjMiBibGFkZU9mZnNldCAgID0gb2Zmc2V0Lnh5O1xyXG4gICAgICAgIHZlYzIgcGF0Y2hDZW50ZXIgICA9IGZsb29yKChxdWFkQ2VudGVyUG9zIC0gYmxhZGVPZmZzZXQpIC8gUEFUQ0hfU0laRSkgKiBQQVRDSF9TSVpFICsgSEFMRl9QQVRDSF9TSVpFICsgZFRlcnJhaW5QYXRjaE9mZnNldFhaO1xyXG5cclxuICAgICAgICBmbG9hdCBkcmF3UG9zQWx0aXR1ZGUgPSAke2RyYXdQb3NQYXJhbU5hbWV9Lnk7XHJcblxyXG4gICAgICAgIC8vIEZpbmQgdGhlIGJsYWRlIG1lc2ggeCx5IHBvc2l0aW9uXHJcbiAgICAgICAgdmVjMiBibGFkZVBvcyA9IHBhdGNoQ2VudGVyICsgYmxhZGVPZmZzZXQ7XHJcblxyXG4gICAgICAgIC8vIExvY2FsIHF1YWQgY2VudGVyIHBvc2l0aW9uIGluIHRlcnJhaW5cclxuICAgICAgICAvLyBiZWNhdXNlIHRoZSBwb3NpdGlvbnMgYXJlIHNoaWZ0ZWQgYnkgaGFsZiB0aGUgc2l6ZSBvZiB0aGUgdGVycmFpblxyXG4gICAgICAgIC8vIHZlYzIgbG9jYWxRdWFkQ2VudGVyUG9zID0gcXVhZENlbnRlclBvcyArIFRSX1NJWkVfSF9GO1xyXG5cclxuICAgICAgICBmbG9hdCBkaXN0YW5jZUZyb21CbGFkZVRvUXVhZENlbnRlciA9IGRpc3RhbmNlKGJsYWRlUG9zLCBxdWFkQ2VudGVyUG9zKTtcclxuICAgICAgICBmbG9hdCBkZWdlbmVyYXRlQnlEaXN0YW5jZUZyb21CbGFkZVRvUXVhZENlbnRlciA9IHNtb290aHN0ZXAoMC45MiwgMS4wLCBDSVJDTEVfUkFESVVTIC8gZGlzdGFuY2VGcm9tQmxhZGVUb1F1YWRDZW50ZXIpO1xyXG5cclxuICAgICAgICAvLyBWZXJ0ZXggcG9zaXRpb24gLSBzdGFydCB3aXRoIDJEIHNoYXBlLCBubyBiZW5kIGFwcGxpZWRcclxuICAgICAgICBkVmVydGV4UG9zaXRpb24gPSB2ZWMzKFxyXG4gICAgICAgICAgICBzaGFwZS54ICogKGRFZGdlT2ZCbGFkZSAtIDAuNSkgKiAoMS4wIC0gcG93KGRQZXJjZW50T2ZCbGFkZUhlaWdodCwgMy4wKSksIC8vIHRhcGVyIGJsYWRlIGVkZ2VzIGFzIGFwcHJvYWNoIHRpcFxyXG4gICAgICAgICAgICAwLjAsIC8vIGZsYXQgeSwgdW5iZW50XHJcbiAgICAgICAgICAgIHNoYXBlLnkgKiBkUGVyY2VudE9mQmxhZGVIZWlnaHQgLy8gaGVpZ2h0IG9mIHZ0eCwgdW5iZW50XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gQXBwbHkgYmxhZGUncyBuYXR1cmFsIGN1cnZlIGFtb3VudFxyXG4gICAgICAgIGZsb2F0IGN1cnZlID0gc2hhcGUudztcclxuXHJcbiAgICAgICAgLy8gVGhlbiBhZGQgYW5pbWF0ZWQgY3VydmUgYW1vdW50IGJ5IHRpbWUgdXNpbmcgdGhpcyBibGFkZSdzXHJcbiAgICAgICAgLy8gdW5pcXVlIHByb3BlcnRpZXMgdG8gcmFuZG9taXplIGl0cyBvc2NpbGxhdGlvblxyXG4gICAgICAgIGN1cnZlICs9IHNoYXBlLncgKyAwLjEyNSAqIChzaW4oJHt0aW1lUGFyYW1OYW1lfSAqIDQuMCArIG9mZnNldC53ICogMC4yICogc2hhcGUueSArIG9mZnNldC54ICsgb2Zmc2V0LnkpKTtcclxuXHJcbiAgICAgICAgLy8gVE9ET1xyXG4gICAgICAgIGZsb2F0IHdpbmQgPSAwLjU7XHJcblxyXG4gICAgICAgIHdpbmQgPSAoY2xhbXAod2luZCwgMC4yNSwgMS4wKSAtIDAuMjUpICogKDEuMCAvIDAuNzUpO1xyXG4gICAgICAgIHdpbmQgPSB3aW5kICogd2luZCAqICR7d2luZEludGVuc2l0eVBhcmFtTmFtZX07XHJcbiAgICAgICAgd2luZCAqPSBkUGVyY2VudE9mQmxhZGVIZWlnaHQ7IC8vIHNjYWxlIHdpbmQgYnkgaGVpZ2h0IG9mIGJsYWRlXHJcbiAgICAgICAgd2luZCA9IC13aW5kO1xyXG5cclxuICAgICAgICAvLyBTdGFydCBjb21wdXRpbmcgYSBub3JtYWwgZm9yIHRoaXMgdmVydGV4XHJcbiAgICAgICAgZFZlcnRleE5vcm1hbCA9IHZlYzMoMC4wLCBkU2lkZU9mQmxhZGUgKiAtMi4wICsgMS4wLCAwLjApO1xyXG5cclxuICAgICAgICAvLyBwdXQgbGVhbiBhbmQgY3VydmUgdG9nZXRoZXJcclxuICAgICAgICBmbG9hdCByb3QgPSBzaGFwZS56ICsgY3VydmUgKiBkUGVyY2VudE9mQmxhZGVIZWlnaHQ7XHJcbiAgICAgICAgdmVjMiByb3R2ID0gdmVjMihjb3Mocm90KSwgc2luKHJvdCkpO1xyXG5cclxuICAgICAgICBkVmVydGV4UG9zaXRpb24ueXogPSByb3RhdGUoZFZlcnRleFBvc2l0aW9uLnksIGRWZXJ0ZXhQb3NpdGlvbi56LCByb3R2KTtcclxuICAgICAgICBkVmVydGV4Tm9ybWFsLnl6ICAgPSByb3RhdGUoZFZlcnRleE5vcm1hbC55LCBkVmVydGV4Tm9ybWFsLnosIHJvdHYpO1xyXG5cclxuICAgICAgICAvLyByb3RhdGlvbiBvZiB0aGlzIGJsYWRlIGFzIGEgdmVjdG9yXHJcbiAgICAgICAgcm90diA9IHZlYzIoY29zKG9mZnNldC53KSwgc2luKG9mZnNldC53KSk7XHJcblxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi54eSA9IHJvdGF0ZShkVmVydGV4UG9zaXRpb24ueCwgZFZlcnRleFBvc2l0aW9uLnksIHJvdHYpO1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwueHkgICA9IHJvdGF0ZShkVmVydGV4Tm9ybWFsLngsIGRWZXJ0ZXhOb3JtYWwueSwgcm90dik7XHJcblxyXG4gICAgICAgIHJvdHYgPSB2ZWMyKGNvcyh3aW5kKSwgc2luKHdpbmQpKTtcclxuXHJcbiAgICAgICAgLy8gV2luZCBibG93cyBpbiBheGlzLWFsaWduZWQgZGlyZWN0aW9uIHRvIG1ha2UgdGhpbmdzIHNpbXBsZXJcclxuICAgICAgICBkVmVydGV4UG9zaXRpb24ueXogPSByb3RhdGUoZFZlcnRleFBvc2l0aW9uLnksIGRWZXJ0ZXhQb3NpdGlvbi56LCByb3R2KTtcclxuICAgICAgICBkVmVydGV4Tm9ybWFsLnl6ICAgPSByb3RhdGUoZFZlcnRleE5vcm1hbC55LCBkVmVydGV4Tm9ybWFsLnosIHJvdHYpO1xyXG5cclxuICAgICAgICAvLyBMb2NhbCBibGFkZSBwb3NpdGlvbiBpbiB0ZXJyYWluXHJcbiAgICAgICAgLy8gYmVjYXVzZSB0aGUgcG9zaXRpb25zIGFyZSBzaGlmdGVkIGJ5IGhhbGYgdGhlIHNpemUgb2YgdGhlIHRlcnJhaW5cclxuICAgICAgICBkQmxhZGVUZXJyYWluWFpQb3MgPSBibGFkZVBvcyAvICR7dGVycmFpblNjYWxlUGFyYW1OYW1lfS54eiArIFRSX1NJWkVfSF9GO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNhbXBsZSB0aGUgaGVpZ2h0ZmllbGQgZGF0YSB0ZXh0dXJlIHRvIGdldCBhbHRpdHVkZSBmb3IgdGhpcyBibGFkZSBwb3NpdGlvblxyXG4gICAgICAgIGZsb2F0IGJsYWRlQWx0aXR1ZGUgPSBnZXRUZXJyYWluSGVpZ2h0SW50ZXJwb2xhdGVkKGRCbGFkZVRlcnJhaW5YWlBvcykgKiAke3RlcnJhaW5TY2FsZVBhcmFtTmFtZX0ueTtcclxuICAgICAgICBmbG9hdCBncmFzc0ZhY3RvciAgID0gZ2V0R3Jhc3NGYWN0b3IoZEJsYWRlVGVycmFpblhaUG9zKTtcclxuXHJcbiAgICAgICAgZmxvYXQgZGlzdGFuY2VRdWFkQ2VudGVyVG9EcmF3ID0gZGlzdGFuY2UoYmxhZGVBbHRpdHVkZSwgZHJhd1Bvc0FsdGl0dWRlKTtcclxuICAgICAgICBmbG9hdCBkZWdlbmVyYXRlQnlEaXN0YW5jZUZyb21CbGFkZVRvRHJhdyA9IHNtb290aHN0ZXAoMC44MSwgMS4wLCBNQVhfWklOSVRfRElTVEFOQ0UgLyBkaXN0YW5jZVF1YWRDZW50ZXJUb0RyYXcpO1xyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgaWYgd2Ugd2FudCB0aGUgZ3Jhc3MgdG8gYXBwZWFyIG9yIG5vdFxyXG4gICAgICAgIC8vIFVzZSB0aGUgbm9pc2UgY2hhbm5lbCB0byBwZXJ0dXJiIHRoZSBibGFkZSBhbHRpdHVkZSBncmFzcyBzdGFydHMgZ3Jvd2luZyBhdC5cclxuICAgICAgICAvLyBmbG9hdCBub2lzeUFsdGl0dWRlID0gZ3Jhc3NGYWN0b3IgKiBUUkFOU0lUSU9OX05PSVNFIC0gKFRSQU5TSVRJT05fTk9JU0UgLyAyLjApO1xyXG4gICAgICAgIC8vIGZsb2F0IGRlZ2VuZXJhdGVCeU5vaXNlID0gKGNsYW1wKG5vaXN5QWx0aXR1ZGUsIFRSQU5TSVRJT05fTE9XLCBUUkFOU0lUSU9OX0hJR0gpIC0gVFJBTlNJVElPTl9MT1cpICogKDEuMCAvIChUUkFOU0lUSU9OX0hJR0ggLSBUUkFOU0lUSU9OX0xPVykpO1xyXG5cclxuICAgICAgICAvLyBUcmFuc2l0aW9uIGdlb21ldHJ5IHRvd2FyZCBkZWdlbmVyYXRlIGFzIHdlIGFwcHJvYWNoIHRlcnJhaW4gYWx0aXR1ZGVcclxuICAgICAgICBkVmVydGV4UG9zaXRpb24gKj0gZ3Jhc3NGYWN0b3IgKiBkZWdlbmVyYXRlQnlEaXN0YW5jZUZyb21CbGFkZVRvRHJhdyAqIGRlZ2VuZXJhdGVCeURpc3RhbmNlRnJvbUJsYWRlVG9RdWFkQ2VudGVyOyAvLyBkZWdlbmVyYXRlQnlOb2lzZVxyXG5cclxuICAgICAgICAvLyBUcmFuc2xhdGUgdG8gd29ybGQgY29vcmRpbmF0ZXNcclxuICAgICAgICBkVmVydGV4UG9zaXRpb24ueCArPSBibGFkZVBvcy54O1xyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi55ICs9IGJsYWRlUG9zLnk7XHJcbiAgICAgICAgZFZlcnRleFBvc2l0aW9uLnogKz0gYmxhZGVBbHRpdHVkZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUcmFuc2xhdGUgdG8geHogcGxhbmVcclxuICAgICAgICBkVmVydGV4UG9zaXRpb24gPSBkVmVydGV4UG9zaXRpb24ueHp5O1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwgICA9IGRWZXJ0ZXhOb3JtYWwueHp5O1xyXG5cclxuICAgICAgICAvLyBncmFzcyB0ZXh0dXJlIGNvb3JkaW5hdGUgZm9yIHRoaXMgdmVydGV4XHJcbiAgICAgICAgdlV2Q29vcmQgPSB2ZWMyKGRFZGdlT2ZCbGFkZSwgZERpdlZlcnRleEluZGV4ICogMi4wKTtcclxuXHJcbiAgICAgICAgLy8gdGVycmFpbiB0ZXh0dXJlIGNvb3JkaW5hdGUgZm9yIHRoaXMgdmVydGV4XHJcbiAgICAgICAgdlV2VGVycmFpbkNvb3JkID0gZEJsYWRlVGVycmFpblhaUG9zIC8gVFJfU0laRV9GO1xyXG5cclxuICAgICAgICAvLyBWZXJ0ZXggY29sb3IgbXVzdCBiZSBicmlnaHRlciBiZWNhdXNlIGl0IGlzIG11bHRpcGxpZWQgd2l0aCBibGFkZSB0ZXh0dXJlXHJcbiAgICAgICAgLy8gRWFjaCBibGFkZSBpcyByYW5kb21seSBjb2xvdXJpemVkIGEgYml0IGJ5IGl0cyBwb3NpdGlvblxyXG4gICAgICAgIHZDb2xvciA9IHZlYzMoY29zKCR7b2Zmc2V0QXR0ck5hbWV9LngpLCBzaW4oJHtvZmZzZXRBdHRyTmFtZX0ueSksIHNpbigke29mZnNldEF0dHJOYW1lfS54KSk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG4vLyBodHRwczovL2NvbW11bml0eS5raHJvbm9zLm9yZy90L2Rpc2NhcmRpbmctcG9seWdvbnMtaW4tdmVydGV4LXNoYWRlci8xMDM4MzkvOVxyXG5leHBvcnQgY29uc3Qgc3RhcnRWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICR7c3RhcnRVdjBWU31cclxuXHJcbiAgICB2b2lkIG1haW4odm9pZCkge1xyXG5cclxuICAgICAgICBnbF9Qb3NpdGlvbiA9IGdldFBvc2l0aW9uKCk7XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgZGlmZnVzZVBTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdURpZmZ1c2VUZXg7XHJcbiAgICB1bmlmb3JtIHZlYzMgdURpZmZ1c2VDb2xvcjtcclxuICAgIHVuaWZvcm0gdmVjMyB1RGlmZnVzZUNvbG9yUmFuZG9tO1xyXG5cclxuICAgIHZhcnlpbmcgdmVjMiB2VXZUZXJyYWluQ29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2Q29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzMgdkNvbG9yO1xyXG5cclxuICAgIHZlYzMgYXV0b0dhbW1hQ29ycmVjdElucHV0KHZlYzMgdikge1xyXG4gICAgICAgICNpZiBkZWZpbmVkKEdBTU1BX05PUk1BTElaRSlcclxuICAgICAgICAgICAgcmV0dXJuIGdhbW1hQ29ycmVjdElucHV0KHYpO1xyXG4gICAgICAgICNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICNlbmRpZlxyXG4gICAgfVxyXG5cclxuICAgIHZlYzQgYXV0b0dhbW1hQ29ycmVjdElucHV0KHZlYzQgdikge1xyXG4gICAgICAgICNpZiBkZWZpbmVkKEdBTU1BX05PUk1BTElaRSlcclxuICAgICAgICAgICAgcmV0dXJuIGdhbW1hQ29ycmVjdElucHV0KHYpO1xyXG4gICAgICAgICNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICNlbmRpZlxyXG4gICAgfVxyXG5cclxuICAgIHZvaWQgZ2V0QWxiZWRvKCkge1xyXG5cclxuICAgICAgICB2ZWMzIHRleCA9IGF1dG9HYW1tYUNvcnJlY3RJbnB1dCh0ZXh0dXJlMkQodURpZmZ1c2VUZXgsIHZVdkNvb3JkKS5yZ2IpO1xyXG5cclxuICAgICAgICBkQWxiZWRvID0gdGV4ICogdURpZmZ1c2VDb2xvciArIHZDb2xvciAqIHVEaWZmdXNlQ29sb3JSYW5kb207XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgY2h1bmtzID0ge1xyXG5cclxuICAgIC4uLmhlaWdodE1hcEZhY3RvcnNDaHVua3MsXHJcblxyXG4gICAgaGVpZ2h0TWFwU2FtcGxlckJ1Z0ZpeCxcclxuXHJcbiAgICBkZWZpbmVzVlMsXHJcbiAgICBkZWZpbmVzQmxhZGVWUyxcclxuICAgIGJsYWRlRGVjb2RlclZTLFxyXG4gICAgY2FsY3VsYXRlTG9jYWxWUyxcclxuXHJcbiAgICB0ZXJyYWluSGVpZ2h0TWFwVlMsXHJcblxyXG4gICAgLy8gVmVydGV4XHJcbiAgICBiYXNlVlMsXHJcbiAgICBiYXNlQ2xlYXJTdWJWUyxcclxuICAgIHRyYW5zZm9ybVZTLFxyXG4gICAgdHJhbnNmb3JtRGVjbFZTLFxyXG4gICAgaW5zdGFuY2luZ1ZTLFxyXG4gICAgdHJhbnNmb3JtSW5zdGFuY2luZ1ZTLFxyXG4gICAgbm9ybWFsQ29yZVZTLFxyXG4gICAgbm9ybWFsVlMsXHJcbiAgICB1djBWUyxcclxuICAgIHN0YXJ0VlMsXHJcblxyXG4gICAgLy8gRnJhZ21lbnRcclxuICAgIGRpZmZ1c2VQUyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR3Jhc3NTaGFkZXJPcHRpb25zIHtcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBkZXB0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0TWFwQ2h1bmtTaXplOiBudW1iZXIsXHJcbiAgICBoZWlnaHRNYXBGb3JtYXQ6IFRIZWlnaHRNYXBGb3JtYXQsXHJcbiAgICBibGFkZU1heEhlaWdodDogbnVtYmVyLFxyXG4gICAgbG9kMEJsYWRlU2VnczogbnVtYmVyLFxyXG4gICAgbG9kMUJsYWRlU2VnczogbnVtYmVyLFxyXG4gICAgbG9kMkJsYWRlU2VnczogbnVtYmVyLFxyXG4gICAgcmFkaXVzOiBudW1iZXIsXHJcbiAgICB0cmFuc2l0aW9uTG93OiBudW1iZXIsXHJcbiAgICB0cmFuc2l0aW9uSGlnaDogbnVtYmVyLFxyXG4gICAgY2h1bmtzU3RvcmU/OiB0eXBlb2YgY2h1bmtzLFxyXG4gICAgZW5naW5lVmVyc2lvbj86ICd2MScgfCAndjInXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRHcmFzc1NoYWRlckNodW5rcyh7XHJcbiAgICB3aWR0aCxcclxuICAgIGRlcHRoLFxyXG4gICAgaGVpZ2h0TWFwQ2h1bmtTaXplLFxyXG4gICAgaGVpZ2h0TWFwRm9ybWF0LFxyXG4gICAgYmxhZGVNYXhIZWlnaHQsXHJcbiAgICBsb2QwQmxhZGVTZWdzLFxyXG4gICAgbG9kMUJsYWRlU2VncyxcclxuICAgIGxvZDJCbGFkZVNlZ3MsXHJcbiAgICByYWRpdXMsXHJcbiAgICB0cmFuc2l0aW9uTG93LFxyXG4gICAgdHJhbnNpdGlvbkhpZ2gsXHJcbiAgICBjaHVua3NTdG9yZSA9IGNodW5rcyxcclxuICAgIGVuZ2luZVZlcnNpb24gPSAndjEnLFxyXG59OiBJR3Jhc3NTaGFkZXJPcHRpb25zKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XHJcblxyXG4gICAgY29uc3QgZGVmaW5lc1ZTID0gY2h1bmtzU3RvcmUuZGVmaW5lc1ZTXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlSE1fTlVNX0NIVU5LU19YJSUnLCBTdHJpbmcoKHdpZHRoIC0gMSkgLyAoaGVpZ2h0TWFwQ2h1bmtTaXplIC0gMSkgfCAwKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVITV9DSFVOS19TSVpFJSUnLCBTdHJpbmcoaGVpZ2h0TWFwQ2h1bmtTaXplIHwgMCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlVFJfU0laRV9YJSUnLCBTdHJpbmcod2lkdGgpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJVRSX1NJWkVfWiUlJywgU3RyaW5nKGRlcHRoKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUl9TSVpFX1hfRiUlJywgd2lkdGgudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUl9TSVpFX1pfRiUlJywgZGVwdGgudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVCTEFERV9IRUlHSFRfVEFMTCUlJywgYmxhZGVNYXhIZWlnaHQudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVQQVRDSF9TSVpFJSUnLCByYWRpdXMudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUkFOU0lUSU9OX0xPVyUlJywgdHJhbnNpdGlvbkxvdy50b1N0cmluZygpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJVRSQU5TSVRJT05fSElHSCUlJywgdHJhbnNpdGlvbkhpZ2gudG9TdHJpbmcoKSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGRlZmluZXNCbGFkZVZTID0gY2h1bmtzU3RvcmUuZGVmaW5lc0JsYWRlVlNcclxuICAgICAgICAucmVwbGFjZSgnJSVMT0QwX0JMQURFX1NFR1MlJScsIGxvZDBCbGFkZVNlZ3MudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVMT0QxX0JMQURFX1NFR1MlJScsIGxvZDFCbGFkZVNlZ3MudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVMT0QyX0JMQURFX1NFR1MlJScsIGxvZDJCbGFkZVNlZ3MudG9GaXhlZCgxKSk7XHJcblxyXG4gICAgY29uc3QgYmFzZUNsZWFyVlMgPSBjaHVua3NTdG9yZS5iYXNlVlMgKyBjaHVua3NTdG9yZS5oZWlnaHRNYXBTYW1wbGVyQnVnRml4LnJlcGxhY2VBbGwoJyUlSEVJR0hUX01BUF9TQU1QTEVSJSUnLCBnZXRTYW1wbGVyVHlwZShoZWlnaHRNYXBGb3JtYXQpKTtcclxuICAgIGNvbnN0IHRlcnJhaW5IZWlnaHRGYWN0b3JWUyA9IGdldFRlcnJhaW5IZWlnaHRGYWN0b3JWUyhoZWlnaHRNYXBGb3JtYXQsIGNodW5rc1N0b3JlKTtcclxuXHJcbiAgICBjb25zdCB0cmFuc2Zvcm1WUyA9IHRlcnJhaW5IZWlnaHRGYWN0b3JWU1xyXG4gICAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS50ZXJyYWluSGVpZ2h0TWFwVlNcclxuICAgICAgICAgICAgICAgICAgICAgICsgY2h1bmtzU3RvcmUuYmxhZGVEZWNvZGVyVlNcclxuICAgICAgICAgICAgICAgICAgICAgICsgY2h1bmtzU3RvcmUuY2FsY3VsYXRlTG9jYWxWU1xyXG4gICAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS50cmFuc2Zvcm1WUztcclxuXHJcbiAgICBjb25zdCBkaWZmdXNlUFMgPSAnI2RlZmluZSBHQU1NQV9OT1JNQUxJWkVcXHJcXG4nXHJcbiAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5kaWZmdXNlUFM7XHJcblxyXG4gICAgaWYgKGVuZ2luZVZlcnNpb24gPT09ICd2MicpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm0yVlMgPSBkZWZpbmVzVlMgKyBkZWZpbmVzQmxhZGVWUyArIGJhc2VDbGVhclZTICsgdHJhbnNmb3JtVlM7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC8vIFZlcnRleFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1WUzogdHJhbnNmb3JtMlZTLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1Db3JlVlM6IFwiXCIsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybUluc3RhbmNpbmdWUzogXCJcIixcclxuICAgICAgICAgICAgbm9ybWFsQ29yZVZTOiBjaHVua3NTdG9yZS5ub3JtYWxDb3JlVlMsXHJcblxyXG4gICAgICAgICAgICAvLyBGcmFnbWVudFxyXG4gICAgICAgICAgICBkaWZmdXNlUFM6IGRpZmZ1c2VQUyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBiYXNlVlMgPSBkZWZpbmVzVlMgK1xyXG4gICAgICAgICAgICAgICAgICAgZGVmaW5lc0JsYWRlVlMgK1xyXG4gICAgICAgICAgICAgICAgICAgYmFzZUNsZWFyVlMgK1xyXG4gICAgICAgICAgICAgICAgICAgY2h1bmtzU3RvcmUuYmFzZUNsZWFyU3ViVlM7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICAvLyBWZXJ0ZXhcclxuICAgICAgICBiYXNlVlMsXHJcbiAgICAgICAgc3RhcnRWUzogY2h1bmtzU3RvcmUuc3RhcnRWUyxcclxuICAgICAgICB0cmFuc2Zvcm1WUzogdHJhbnNmb3JtVlMsXHJcbiAgICAgICAgdHJhbnNmb3JtRGVjbFZTOiBjaHVua3NTdG9yZS50cmFuc2Zvcm1EZWNsVlMsXHJcbiAgICAgICAgaW5zdGFuY2luZ1ZTOiBjaHVua3NTdG9yZS5pbnN0YW5jaW5nVlMsXHJcbiAgICAgICAgbm9ybWFsVlM6IGNodW5rc1N0b3JlLm5vcm1hbFZTLFxyXG4gICAgICAgIHV2MFZTOiBjaHVua3NTdG9yZS51djBWUyxcclxuXHJcbiAgICAgICAgLy8gRnJhZ21lbnRcclxuICAgICAgICBkaWZmdXNlUFM6IGRpZmZ1c2VQUyxcclxuICAgIH07XHJcbn0iLCIvKlxyXG4gKiBBIHNwZWVkLWltcHJvdmVkIHBlcmxpbiBhbmQgc2ltcGxleCBub2lzZSBhbGdvcml0aG1zIGZvciAyRC5cclxuICpcclxuICogQmFzZWQgb24gZXhhbXBsZSBjb2RlIGJ5IFN0ZWZhbiBHdXN0YXZzb24gKHN0ZWd1QGl0bi5saXUuc2UpLlxyXG4gKiBPcHRpbWlzYXRpb25zIGJ5IFBldGVyIEVhc3RtYW4gKHBlYXN0bWFuQGRyaXp6bGUuc3RhbmZvcmQuZWR1KS5cclxuICogQmV0dGVyIHJhbmsgb3JkZXJpbmcgbWV0aG9kIGJ5IFN0ZWZhbiBHdXN0YXZzb24gaW4gMjAxMi5cclxuICogQ29udmVydGVkIHRvIEphdmFzY3JpcHQgYnkgSm9zZXBoIEdlbnRsZS5cclxuICpcclxuICogVmVyc2lvbiAyMDEyLTAzLTA5XHJcbiAqXHJcbiAqIFRoaXMgY29kZSB3YXMgcGxhY2VkIGluIHRoZSBwdWJsaWMgZG9tYWluIGJ5IGl0cyBvcmlnaW5hbCBhdXRob3IsXHJcbiAqIFN0ZWZhbiBHdXN0YXZzb24uIFlvdSBtYXkgdXNlIGl0IGFzIHlvdSBzZWUgZml0LCBidXRcclxuICogYXR0cmlidXRpb24gaXMgYXBwcmVjaWF0ZWQuXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqIFR5cGVTY3JpcHRpZmllZCAyMDE2XHJcbiAqL1xyXG5cclxuY2xhc3MgR3JhZCB7XHJcblx0XHJcblx0eDogbnVtYmVyXHJcblx0eTogbnVtYmVyXHJcblx0ejogbnVtYmVyXHJcblxyXG5cdGNvbnN0cnVjdG9yICh4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSB7XHJcblx0XHR0aGlzLnggPSB4XHJcblx0XHR0aGlzLnkgPSB5XHJcblx0XHR0aGlzLnogPSB6XHJcblx0fVxyXG5cclxuXHRkb3QyICh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG5cdFx0cmV0dXJuIHRoaXMueCAqIHggKyB0aGlzLnkgKiB5XHJcblx0fVxyXG5cclxuXHRkb3QzICh4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSB7XHJcblx0XHRyZXR1cm4gdGhpcy54ICogeCArIHRoaXMueSAqIHkgKyB0aGlzLnogKiB6XHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBGMiA9IDAuNSAqIChNYXRoLnNxcnQoMykgLSAxKVxyXG5jb25zdCBHMiA9ICgzIC0gTWF0aC5zcXJ0KDMpKSAvIDZcclxuXHJcbmNvbnN0IHBlcm0gPSBuZXcgQXJyYXkoNTEyKVxyXG5jb25zdCBncmFkUCA9IG5ldyBBcnJheSg1MTIpXHJcblxyXG5jb25zdCBncmFkMyA9IFtcclxuXHRuZXcgR3JhZCgxLDEsMCksIG5ldyBHcmFkKC0xLDEsMCksIG5ldyBHcmFkKDEsLTEsMCksIG5ldyBHcmFkKC0xLC0xLDApLFxyXG5cdG5ldyBHcmFkKDEsMCwxKSwgbmV3IEdyYWQoLTEsMCwxKSwgbmV3IEdyYWQoMSwwLC0xKSwgbmV3IEdyYWQoLTEsMCwtMSksXHJcblx0bmV3IEdyYWQoMCwxLDEpLCBuZXcgR3JhZCgwLC0xLDEpLCBuZXcgR3JhZCgwLDEsLTEpLCBuZXcgR3JhZCgwLC0xLC0xKVxyXG5dXHJcblxyXG5jb25zdCBwID0gW1xyXG5cdDE1MSwxNjAsMTM3LDkxLDkwLDE1LFxyXG5cdDEzMSwxMywyMDEsOTUsOTYsNTMsMTk0LDIzMyw3LDIyNSwxNDAsMzYsMTAzLDMwLDY5LDE0Miw4LDk5LDM3LDI0MCwyMSwxMCwyMyxcclxuXHQxOTAsIDYsMTQ4LDI0NywxMjAsMjM0LDc1LDAsMjYsMTk3LDYyLDk0LDI1MiwyMTksMjAzLDExNywzNSwxMSwzMiw1NywxNzcsMzMsXHJcblx0ODgsMjM3LDE0OSw1Niw4NywxNzQsMjAsMTI1LDEzNiwxNzEsMTY4LCA2OCwxNzUsNzQsMTY1LDcxLDEzNCwxMzksNDgsMjcsMTY2LFxyXG5cdDc3LDE0NiwxNTgsMjMxLDgzLDExMSwyMjksMTIyLDYwLDIxMSwxMzMsMjMwLDIyMCwxMDUsOTIsNDEsNTUsNDYsMjQ1LDQwLDI0NCxcclxuXHQxMDIsMTQzLDU0LCA2NSwyNSw2MywxNjEsIDEsMjE2LDgwLDczLDIwOSw3NiwxMzIsMTg3LDIwOCwgODksMTgsMTY5LDIwMCwxOTYsXHJcblx0MTM1LDEzMCwxMTYsMTg4LDE1OSw4NiwxNjQsMTAwLDEwOSwxOTgsMTczLDE4NiwgMyw2NCw1MiwyMTcsMjI2LDI1MCwxMjQsMTIzLFxyXG5cdDUsMjAyLDM4LDE0NywxMTgsMTI2LDI1NSw4Miw4NSwyMTIsMjA3LDIwNiw1OSwyMjcsNDcsMTYsNTgsMTcsMTgyLDE4OSwyOCw0MixcclxuXHQyMjMsMTgzLDE3MCwyMTMsMTE5LDI0OCwxNTIsIDIsNDQsMTU0LDE2MywgNzAsMjIxLDE1MywxMDEsMTU1LDE2NywgNDMsMTcyLDksXHJcblx0MTI5LDIyLDM5LDI1MywgMTksOTgsMTA4LDExMCw3OSwxMTMsMjI0LDIzMiwxNzgsMTg1LCAxMTIsMTA0LDIxOCwyNDYsOTcsMjI4LFxyXG5cdDI1MSwzNCwyNDIsMTkzLDIzOCwyMTAsMTQ0LDEyLDE5MSwxNzksMTYyLDI0MSwgODEsNTEsMTQ1LDIzNSwyNDksMTQsMjM5LDEwNyxcclxuXHQ0OSwxOTIsMjE0LCAzMSwxODEsMTk5LDEwNiwxNTcsMTg0LCA4NCwyMDQsMTc2LDExNSwxMjEsNTAsNDUsMTI3LCA0LDE1MCwyNTQsXHJcblx0MTM4LDIzNiwyMDUsOTMsMjIyLDExNCw2NywyOSwyNCw3MiwyNDMsMTQxLDEyOCwxOTUsNzgsNjYsMjE1LDYxLDE1NiwxODBcclxuXVxyXG5cclxuLy8gVGhpcyBpc24ndCBhIHZlcnkgZ29vZCBzZWVkaW5nIGZ1bmN0aW9uLCBidXQgaXQgd29ya3Mgb2suIEl0IHN1cHBvcnRzIDJeMTZcclxuLy8gZGlmZmVyZW50IHNlZWQgdmFsdWVzLiBXcml0ZSBzb21ldGhpbmcgYmV0dGVyIGlmIHlvdSBuZWVkIG1vcmUgc2VlZHMuXHJcbmZ1bmN0aW9uIHNlZWQgKHNlZWQ6IG51bWJlcikge1xyXG5cdGlmIChzZWVkID4gMCAmJiBzZWVkIDwgMSkge1xyXG5cdFx0Ly8gU2NhbGUgdGhlIHNlZWQgb3V0XHJcblx0XHRzZWVkICo9IDY1NTM2XHJcblx0fVxyXG5cclxuXHRzZWVkID0gTWF0aC5mbG9vcihzZWVkKVxyXG5cdGlmIChzZWVkIDwgMjU2KSB7XHJcblx0XHRzZWVkIHw9IHNlZWQgPDwgOFxyXG5cdH1cclxuXHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xyXG5cdFx0bGV0IHY6IG51bWJlclxyXG5cdFx0aWYgKGkgJiAxKSB7XHJcblx0XHRcdHYgPSBwW2ldIF4gKHNlZWQgJiAyNTUpXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR2ID0gcFtpXSBeICgoc2VlZCA+PiA4KSAmIDI1NSlcclxuXHRcdH1cclxuXHJcblx0XHRwZXJtW2ldID0gcGVybVtpICsgMjU2XSA9IHZcclxuXHRcdGdyYWRQW2ldID0gZ3JhZFBbaSArIDI1Nl0gPSBncmFkM1t2ICUgMTJdXHJcblx0fVxyXG59XHJcblxyXG5zZWVkKDApXHJcblxyXG4vLyAyRCBzaW1wbGV4IG5vaXNlXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNpbXBsZXgoeGluOiBudW1iZXIsIHlpbjogbnVtYmVyKSB7XHJcblx0bGV0IG4wOiBudW1iZXIsIG4xOiBudW1iZXIsIG4yOiBudW1iZXIgLy8gTm9pc2UgY29udHJpYnV0aW9ucyBmcm9tIHRoZSB0aHJlZSBjb3JuZXJzXHJcblx0Ly8gU2tldyB0aGUgaW5wdXQgc3BhY2UgdG8gZGV0ZXJtaW5lIHdoaWNoIHNpbXBsZXggY2VsbCB3ZSdyZSBpblxyXG5cdGNvbnN0IHMgPSAoeGluICsgeWluKSAqIEYyIC8vIEhhaXJ5IGZhY3RvciBmb3IgMkRcclxuXHRsZXQgaSA9IE1hdGguZmxvb3IoeGluICsgcylcclxuXHRsZXQgaiA9IE1hdGguZmxvb3IoeWluICsgcylcclxuXHRjb25zdCB0ID0gKGkgKyBqKSAqIEcyXHJcblx0Y29uc3QgeDAgPSB4aW4gLSBpICsgdCAvLyBUaGUgeCx5IGRpc3RhbmNlcyBmcm9tIHRoZSBjZWxsIG9yaWdpbiwgdW5za2V3ZWQuXHJcblx0Y29uc3QgeTAgPSB5aW4gLSBqICsgdFxyXG5cdC8vIEZvciB0aGUgMkQgY2FzZSwgdGhlIHNpbXBsZXggc2hhcGUgaXMgYW4gZXF1aWxhdGVyYWwgdHJpYW5nbGUuXHJcblx0Ly8gRGV0ZXJtaW5lIHdoaWNoIHNpbXBsZXggd2UgYXJlIGluLlxyXG5cdGxldCBpMTogbnVtYmVyLCBqMTogbnVtYmVyIC8vIE9mZnNldHMgZm9yIHNlY29uZCAobWlkZGxlKSBjb3JuZXIgb2Ygc2ltcGxleCBpbiAoaSxqKSBjb29yZHNcclxuXHRpZiAoeDAgPiB5MCkgeyAvLyBsb3dlciB0cmlhbmdsZSwgWFkgb3JkZXI6ICgwLDApLT4oMSwwKS0+KDEsMSlcclxuXHRcdGkxID0gMVxyXG5cdFx0ajEgPSAwXHJcblx0fSBlbHNlIHsgICAgLy8gdXBwZXIgdHJpYW5nbGUsIFlYIG9yZGVyOiAoMCwwKS0+KDAsMSktPigxLDEpXHJcblx0XHRpMSA9IDBcclxuXHRcdGoxID0gMVxyXG5cdH1cclxuXHQvLyBBIHN0ZXAgb2YgKDEsMCkgaW4gKGksaikgbWVhbnMgYSBzdGVwIG9mICgxLWMsLWMpIGluICh4LHkpLCBhbmRcclxuXHQvLyBhIHN0ZXAgb2YgKDAsMSkgaW4gKGksaikgbWVhbnMgYSBzdGVwIG9mICgtYywxLWMpIGluICh4LHkpLCB3aGVyZVxyXG5cdC8vIGMgPSAoMy1zcXJ0KDMpKS82XHJcblx0Y29uc3QgeDEgPSB4MCAtIGkxICsgRzIgLy8gT2Zmc2V0cyBmb3IgbWlkZGxlIGNvcm5lciBpbiAoeCx5KSB1bnNrZXdlZCBjb29yZHNcclxuXHRjb25zdCB5MSA9IHkwIC0gajEgKyBHMlxyXG5cdGNvbnN0IHgyID0geDAgLSAxICsgMiAqIEcyIC8vIE9mZnNldHMgZm9yIGxhc3QgY29ybmVyIGluICh4LHkpIHVuc2tld2VkIGNvb3Jkc1xyXG5cdGNvbnN0IHkyID0geTAgLSAxICsgMiAqIEcyXHJcblx0Ly8gV29yayBvdXQgdGhlIGhhc2hlZCBncmFkaWVudCBpbmRpY2VzIG9mIHRoZSB0aHJlZSBzaW1wbGV4IGNvcm5lcnNcclxuXHRpICY9IDI1NVxyXG5cdGogJj0gMjU1XHJcblx0Y29uc3QgZ2kwID0gZ3JhZFBbaSArIHBlcm1bal1dXHJcblx0Y29uc3QgZ2kxID0gZ3JhZFBbaSArIGkxICsgcGVybVtqICsgajFdXVxyXG5cdGNvbnN0IGdpMiA9IGdyYWRQW2kgKyAxICsgcGVybVtqICsgMV1dXHJcblx0Ly8gQ2FsY3VsYXRlIHRoZSBjb250cmlidXRpb24gZnJvbSB0aGUgdGhyZWUgY29ybmVyc1xyXG5cdGxldCB0MCA9IDAuNSAtIHgwICogeDAgLSB5MCAqIHkwXHJcblx0aWYgKHQwIDwgMCkge1xyXG5cdFx0bjAgPSAwXHJcblx0fSBlbHNlIHtcclxuXHRcdHQwICo9IHQwXHJcblx0XHRuMCA9IHQwICogdDAgKiBnaTAuZG90Mih4MCwgeTApICAvLyAoeCx5KSBvZiBncmFkMyB1c2VkIGZvciAyRCBncmFkaWVudFxyXG5cdH1cclxuXHRsZXQgdDEgPSAwLjUgLSB4MSAqIHgxIC0geTEgKiB5MVxyXG5cdGlmICh0MSA8IDApIHtcclxuXHRcdG4xID0gMFxyXG5cdH0gZWxzZSB7XHJcblx0XHR0MSAqPSB0MVxyXG5cdFx0bjEgPSB0MSAqIHQxICogZ2kxLmRvdDIoeDEsIHkxKVxyXG5cdH1cclxuXHRsZXQgdDIgPSAwLjUgLSB4MiAqIHgyIC0geTIgKiB5MlxyXG5cdGlmICh0MiA8IDApIHtcclxuXHRcdG4yID0gMFxyXG5cdH0gZWxzZSB7XHJcblx0XHR0MiAqPSB0MlxyXG5cdFx0bjIgPSB0MiAqIHQyICogZ2kyLmRvdDIoeDIsIHkyKVxyXG5cdH1cclxuXHQvLyBBZGQgY29udHJpYnV0aW9ucyBmcm9tIGVhY2ggY29ybmVyIHRvIGdldCB0aGUgZmluYWwgbm9pc2UgdmFsdWUuXHJcblx0Ly8gVGhlIHJlc3VsdCBpcyBzY2FsZWQgdG8gcmV0dXJuIHZhbHVlcyBpbiB0aGUgaW50ZXJ2YWwgWy0xLDFdLlxyXG5cdHJldHVybiA3MCAqIChuMCArIG4xICsgbjIpXHJcbn0iLCJleHBvcnQgY2xhc3MgRmx5Q2FtZXJhIGV4dGVuZHMgcGMuU2NyaXB0VHlwZSB7XHJcblxyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgbW9kZTogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgc3BlZWQ6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHNsb3dTcGVlZDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgZmFzdFNwZWVkOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBzZW5zaXRpdml0eTogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgbW9iaWxlQ29udHJvbHM6IHBjeC5FbnRpdHkgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgcHJpdmF0ZSBleDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBleTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGVMb2M6IHBjeC5WZWMzO1xyXG4gICAgcHJpdmF0ZSBtb3ZlZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgbWlkZGxlRG93bjogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgcmlnaHREb3duOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBtb2JpbGVDb250cm9sOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgIC8vIENhbWVyYSBldWxlciBhbmdsZSByb3RhdGlvbiBhcm91bmQgeCBhbmQgeSBheGVzXHJcbiAgICAgICAgY29uc3QgZXVsZXJzID0gdGhpcy5lbnRpdHkuZ2V0TG9jYWxFdWxlckFuZ2xlcygpO1xyXG5cclxuICAgICAgICB0aGlzLmV4ID0gKGV1bGVycy56IC0gZXVsZXJzLngpO1xyXG4gICAgICAgIHRoaXMuZXkgPSAoZXVsZXJzLnogLSBldWxlcnMueSk7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGVMb2MgPSBwYy5WZWMzLlpFUk8uY2xvbmUoKTtcclxuICAgICAgICB0aGlzLm1vdmVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yaWdodERvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1pZGRsZURvd24gPSBmYWxzZTtcclxuICAgIFxyXG4gICAgICAgIC8vIERpc2FibGluZyB0aGUgY29udGV4dCBtZW51IHN0b3BzIHRoZSBicm93c2VyIGRpc3BsYXlpbmcgYSBtZW51IHdoZW5cclxuICAgICAgICAvLyB5b3UgcmlnaHQtY2xpY2sgdGhlIHBhZ2VcclxuICAgICAgICBpZiAodGhpcy5hcHAubW91c2UpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2UuZGlzYWJsZUNvbnRleHRNZW51KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLm1vdXNlLm9uKHBjLkVWRU5UX01PVVNFTU9WRSwgdGhpcy5vbk1vdXNlTW92ZSwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLm1vdXNlLm9uKHBjLkVWRU5UX01PVVNFRE9XTiwgdGhpcy5vbk1vdXNlRG93biwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLm1vdXNlLm9uKHBjLkVWRU5UX01PVVNFVVAsICAgdGhpcy5vbk1vdXNlVXAsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXBwZW5kKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5leCArPSB4O1xyXG4gICAgICAgIHRoaXMuZXkgKz0geTtcclxuICAgICAgICB0aGlzLmV4ID0gcGMubWF0aC5jbGFtcCh0aGlzLmV4LCAtOTAsIDkwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdHJhbnNsYXRlKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZUxvYy54ICs9IHg7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGVMb2MueSArPSB5O1xyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlTG9jLnogKz0gejtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgY29uc3QgYXBwID0gdGhpcy5hcHA7XHJcblxyXG4gICAgICAgIGxldCBzcGVlZCA9IHRoaXMuc3BlZWQ7XHJcblxyXG4gICAgICAgIGlmIChhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfU1BBQ0UpKSB7XHJcbiAgICAgICAgICAgIHNwZWVkID0gdGhpcy5zbG93U3BlZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfU0hJRlQpKSB7XHJcbiAgICAgICAgICAgIHNwZWVkID0gdGhpcy5mYXN0U3BlZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBKb3lwYWQgY29udHJvbFxyXG4gICAgICAgIGNvbnN0IGpveXN0aWNrTW92ZXIgPSB0b3VjaEpveXBhZD8uc3RpY2tzWydqb3lzdGljazAnXTtcclxuICAgICAgICBjb25zdCBqb3lzdGlja1JvdGVyID0gdG91Y2hKb3lwYWQ/LnN0aWNrc1snam95c3RpY2sxJ107XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMubW9iaWxlQ29udHJvbHMgJiYgdG91Y2hKb3lwYWQ/LmJ1dHRvbnMud2FzUHJlc3NlZCgnYnV0dG9uMicpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9iaWxlQ29udHJvbCA9ICF0aGlzLm1vYmlsZUNvbnRyb2w7XHJcbiAgICAgICAgICAgIHRoaXMubW9iaWxlQ29udHJvbHMuZW5hYmxlZCA9IHRoaXMubW9iaWxlQ29udHJvbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChqb3lzdGlja1JvdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kKGpveXN0aWNrUm90ZXIueSwgLWpveXN0aWNrUm90ZXIueCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoam95c3RpY2tNb3Zlcikge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZShzcGVlZCAqIGpveXN0aWNrTW92ZXIueCAqIGR0LCAwLCAtc3BlZWQgKiBqb3lzdGlja01vdmVyLnkgKiBkdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIGNhbWVyYSdzIHBvc2l0aW9uXHJcbiAgICAgICAgaWYgKGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9VUCkgfHwgYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX1cpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKDAsIDAsIC1zcGVlZCAqIGR0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9ET1dOKSB8fCBhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfUykpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoMCwgMCwgc3BlZWQgKiBkdCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9MRUZUKSB8fCBhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfQSkpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoLXNwZWVkICogZHQsIDAsIDApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX1JJR0hUKSB8fCBhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfRCkpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoc3BlZWQgKiBkdCwgMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgY2FtZXJhJ3MgVFJTXHJcbiAgICAgICAgdGhpcy5lbnRpdHkuc2V0TG9jYWxFdWxlckFuZ2xlcyh0aGlzLmV4LCB0aGlzLmV5LCAwKTtcclxuICAgICAgICB0aGlzLmVudGl0eS50cmFuc2xhdGVMb2NhbCh0aGlzLnRyYW5zbGF0ZUxvYyk7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGVMb2Muc2V0KDAsIDAsIDApO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgZnJ1c3R1bSBieSBhY3R1YWwgbWF0cml4XHJcbiAgICAgICAgdGhpcy5hcHAucmVuZGVyZXIudXBkYXRlQ2FtZXJhRnJ1c3R1bSh0aGlzLmVudGl0eS5jYW1lcmE/LmNhbWVyYSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbk1vdXNlTW92ZShldmVudDogcGN4Lk1vdXNlRXZlbnQpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLm1vZGUgJiYgIXBjLk1vdXNlLmlzUG9pbnRlckxvY2tlZCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5yaWdodERvd24gJiZcclxuICAgICAgICAgICAgIXRoaXMubWlkZGxlRG93bilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgRXVsZXIgYW5nbGVzLCBjbGFtcCB0aGUgcGl0Y2guXHJcbiAgICAgICAgaWYgKCF0aGlzLm1vdmVkKSB7XHJcbiAgICAgICAgICAgIC8vIGZpcnN0IG1vdmUgZXZlbnQgY2FuIGJlIHZlcnkgbGFyZ2VcclxuICAgICAgICAgICAgdGhpcy5tb3ZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJpZ2h0RG93bikge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgIC1ldmVudC5keSAvIHRoaXMuc2Vuc2l0aXZpdHksXHJcbiAgICAgICAgICAgICAgICAtZXZlbnQuZHggLyB0aGlzLnNlbnNpdGl2aXR5XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5taWRkbGVEb3duKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgc3BlZWQgPSB0aGlzLnNwZWVkO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hcHAua2V5Ym9hcmQhLmlzUHJlc3NlZChwYy5LRVlfU0hJRlQpKSB7XHJcbiAgICAgICAgICAgICAgICBzcGVlZCA9IHRoaXMuZmFzdFNwZWVkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZSgtKGV2ZW50LmR4IC8gNSkgKiBzcGVlZCwgKGV2ZW50LmR5IC8gNSkgKiBzcGVlZCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Nb3VzZURvd24oZXZlbnQ6IHBjeC5Nb3VzZUV2ZW50KSB7XHJcblxyXG4gICAgICAgIC8vIFdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyBjbGlja2VkIHRyeSBhbmQgY2FwdHVyZSB0aGUgcG9pbnRlclxyXG4gICAgICAgIGlmICghdGhpcy5tb2RlICYmICFwYy5Nb3VzZS5pc1BvaW50ZXJMb2NrZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZSEuZW5hYmxlUG9pbnRlckxvY2soKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IHBjLk1PVVNFQlVUVE9OX1JJR0hUKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmlnaHREb3duID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gcGMuTU9VU0VCVVRUT05fTUlERExFKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWlkZGxlRG93biA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIG9uTW91c2VVcChldmVudDogcGN4Lk1vdXNlRXZlbnQpIHtcclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gcGMuTU9VU0VCVVRUT05fUklHSFQpIHtcclxuICAgICAgICAgICAgdGhpcy5yaWdodERvd24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IHBjLk1PVVNFQlVUVE9OX01JRERMRSkge1xyXG4gICAgICAgICAgICB0aGlzLm1pZGRsZURvd24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZseUNhbWVyYTtcclxuZXhwb3J0IGNvbnN0IGZseUNhbWVyYVNjcmlwdE5hbWUgPSAnZmx5Q2FtZXJhJztcclxuXHJcbnBjLnJlZ2lzdGVyU2NyaXB0KEZseUNhbWVyYSwgZmx5Q2FtZXJhU2NyaXB0TmFtZSk7XHJcblxyXG5GbHlDYW1lcmEuYXR0cmlidXRlcy5hZGQoJ21vYmlsZUNvbnRyb2xzJywge1xyXG4gICAgdHlwZTogJ2VudGl0eScsXHJcbn0pO1xyXG5cclxuRmx5Q2FtZXJhLmF0dHJpYnV0ZXMuYWRkKCdzcGVlZCcsIHtcclxuICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgZGVmYXVsdDogMTBcclxufSk7XHJcblxyXG5GbHlDYW1lcmEuYXR0cmlidXRlcy5hZGQoJ3Nsb3dTcGVlZCcsIHtcclxuICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgZGVmYXVsdDogMVxyXG59KTtcclxuXHJcbkZseUNhbWVyYS5hdHRyaWJ1dGVzLmFkZCgnZmFzdFNwZWVkJywge1xyXG4gICAgdHlwZTogJ251bWJlcicsXHJcbiAgICBkZWZhdWx0OiAyMFxyXG59KTtcclxuXHJcbkZseUNhbWVyYS5hdHRyaWJ1dGVzLmFkZCgnc2Vuc2l0aXZpdHknLCB7XHJcbiAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgIG1pbjogMSxcclxuICAgIGRlZmF1bHQ6IDVcclxufSk7XHJcblxyXG5GbHlDYW1lcmEuYXR0cmlidXRlcy5hZGQoJ21vZGUnLCB7XHJcbiAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgIGRlZmF1bHQ6IDAsXHJcbiAgICBlbnVtOiBbe1xyXG4gICAgICAgIFwiTG9ja1wiOiAwXHJcbiAgICB9LCB7XHJcbiAgICAgICAgXCJEcmFnXCI6IDFcclxuICAgIH1dXHJcbn0pOyIsImNsYXNzIEZwc0NvdW50ZXIgZXh0ZW5kcyBwYy5TY3JpcHRUeXBlIHtcclxuXHJcbiAgICBmcHM6IHsgdGljaygpOiB2b2lkIH0gfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb25zdHIgPSAod2luZG93IGFzIGFueSkuRlBTTWV0ZXI7XHJcblxyXG4gICAgICAgIGlmIChjb25zdHIpIHtcclxuICAgICAgICAgICAgdGhpcy5mcHMgPSBuZXcgY29uc3RyKHtcclxuICAgICAgICAgICAgICAgIGhlYXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBncmFwaDogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZwcz8udGljaygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGcHNDb3VudGVyO1xyXG5leHBvcnQgY29uc3QgZnBzQ291bnRlclNjcmlwdE5hbWUgPSAnRnBzQ291bnRlcic7XHJcblxyXG5wYy5yZWdpc3RlclNjcmlwdChGcHNDb3VudGVyLCBmcHNDb3VudGVyU2NyaXB0TmFtZSk7IiwiY29uc3QgdG1wVmVjID0gbmV3IHBjLlZlYzMoKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3RGlyZWN0aW9uVmVjdG9yKHBvc2l0aW9uOiBwY3guVmVjMywgZGlyOiBwY3guVmVjMywgY29sb3IgPSBwYy5Db2xvci5SRUQpIHtcclxuXHJcbiAgICAvLyBEcmF3IHRoZSB2ZWN0b3JcclxuICAgIGNvbnN0IHN0YXJ0ID0gcG9zaXRpb247XHJcbiAgICBjb25zdCBlbmQgPSB0bXBWZWMuYWRkMihwb3NpdGlvbiwgZGlyKTtcclxuICAgIFxyXG4gICAgcGMuYXBwIS5kcmF3TGluZShzdGFydCwgZW5kLCBjb2xvciwgZmFsc2UpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd1BvaW50KFxyXG4gICAge2NlbnRlciwgcmFkaXVzID0gMC4xLCBudW1TZWdtZW50cyA9IDQsIGNvbG9yID0gcGMuQ29sb3IuUkVELCBsYXllciwgZGVwdGhUZXN0ID0gZmFsc2UgfTpcclxuICAgIHtjZW50ZXI6IHBjeC5WZWMzLCByYWRpdXM/OiBudW1iZXIsIG51bVNlZ21lbnRzPzogbnVtYmVyLCBjb2xvcj86IHBjeC5Db2xvciwgZGVwdGhUZXN0PzogYm9vbGVhbiwgbGF5ZXI/OiBwY3guTGF5ZXJ9XHJcbikge1xyXG4gICAgY29uc3QgYmxvY2sgID0gNiAqIDM7XHJcbiAgICBjb25zdCBwb2ludHMgPSBuZXcgQXJyYXkobnVtU2VnbWVudHMgKiBibG9jayk7XHJcbiAgICBjb25zdCBzdGVwID0gMiAqIE1hdGguUEkgLyBudW1TZWdtZW50cztcclxuXHJcbiAgICBsZXQgYW5nbGUgPSAwO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtU2VnbWVudHM7IGkrKykge1xyXG5cclxuICAgICAgICBjb25zdCBzaW4wID0gTWF0aC5zaW4oYW5nbGUpO1xyXG4gICAgICAgIGNvbnN0IGNvczAgPSBNYXRoLmNvcyhhbmdsZSk7XHJcblxyXG4gICAgICAgIGFuZ2xlICs9IHN0ZXA7XHJcblxyXG4gICAgICAgIGNvbnN0IHNpbjEgPSBNYXRoLnNpbihhbmdsZSk7XHJcbiAgICAgICAgY29uc3QgY29zMSA9IE1hdGguY29zKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgY29uc3QgaiA9IGkgKiBibG9jaztcclxuXHJcbiAgICAgICAgcG9pbnRzW2ogKyAwXSA9IGNlbnRlci54ICsgcmFkaXVzICogc2luMDtcclxuICAgICAgICBwb2ludHNbaiArIDFdID0gY2VudGVyLnk7XHJcbiAgICAgICAgcG9pbnRzW2ogKyAyXSA9IGNlbnRlci56ICsgcmFkaXVzICogY29zMDtcclxuXHJcbiAgICAgICAgcG9pbnRzW2ogKyAzXSA9IGNlbnRlci54ICsgcmFkaXVzICogc2luMTtcclxuICAgICAgICBwb2ludHNbaiArIDRdID0gY2VudGVyLnk7XHJcbiAgICAgICAgcG9pbnRzW2ogKyA1XSA9IGNlbnRlci56ICsgcmFkaXVzICogY29zMTtcclxuXHJcbiAgICAgICAgcG9pbnRzW2ogKyA2XSA9IGNlbnRlci54O1xyXG4gICAgICAgIHBvaW50c1tqICsgN10gPSBjZW50ZXIueSArIHJhZGl1cyAqIHNpbjA7XHJcbiAgICAgICAgcG9pbnRzW2ogKyA4XSA9IGNlbnRlci56ICsgcmFkaXVzICogY29zMDtcclxuXHJcbiAgICAgICAgcG9pbnRzW2ogKyA5XSAgPSBjZW50ZXIueDtcclxuICAgICAgICBwb2ludHNbaiArIDEwXSA9IGNlbnRlci55ICsgcmFkaXVzICogc2luMTtcclxuICAgICAgICBwb2ludHNbaiArIDExXSA9IGNlbnRlci56ICsgcmFkaXVzICogY29zMTtcclxuXHJcbiAgICAgICAgcG9pbnRzW2ogKyAxMl0gPSBjZW50ZXIueCArIHJhZGl1cyAqIGNvczA7XHJcbiAgICAgICAgcG9pbnRzW2ogKyAxM10gPSBjZW50ZXIueSArIHJhZGl1cyAqIHNpbjA7XHJcbiAgICAgICAgcG9pbnRzW2ogKyAxNF0gPSBjZW50ZXIuejtcclxuXHJcbiAgICAgICAgcG9pbnRzW2ogKyAxNV0gPSBjZW50ZXIueCArIHJhZGl1cyAqIGNvczE7XHJcbiAgICAgICAgcG9pbnRzW2ogKyAxNl0gPSBjZW50ZXIueSArIHJhZGl1cyAqIHNpbjE7XHJcbiAgICAgICAgcG9pbnRzW2ogKyAxN10gPSBjZW50ZXIuejtcclxuICAgIH1cclxuXHJcbiAgICBwYy5hcHAhLmRyYXdMaW5lQXJyYXlzKHBvaW50cywgY29sb3IsIGRlcHRoVGVzdCwgbGF5ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd0JveChcclxuICAgIHttaW4sIG1heCwgY29sb3IgPSBwYy5Db2xvci5SRUQsIGxheWVyLCBkZXB0aFRlc3QgPSBmYWxzZX06XHJcbiAgICB7bWluOiBwY3guVmVjMywgbWF4OiBwY3guVmVjMywgY29sb3I/OiBwY3guQ29sb3IsIGRlcHRoVGVzdD86IGJvb2xlYW4sIGxheWVyPzogcGN4LkxheWVyfVxyXG4pIHtcclxuICAgIHBjLmFwcD8uZHJhd1dpcmVBbGlnbmVkQm94KG1pbiwgbWF4LCBjb2xvciwgZGVwdGhUZXN0LCBsYXllcik7XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBSYW5kb20ge1xyXG5cclxuICAgIHByaXZhdGUgX3RtcDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfdGljazogbnVtYmVyO1xyXG5cclxuICAgIHJlYWRvbmx5IHNlZWQ6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZWVkOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnNlZWQgPSBzZWVkO1xyXG4gICAgICAgIHRoaXMuX3RtcCAgPSBzZWVkO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuX3RtcCA9IHRoaXMuc2VlZDtcclxuICAgIH1cclxuXHJcbiAgICBuZXh0KCk6IG51bWJlciB7XHJcbiAgICAgICAgdGhpcy5fdG1wID0gKHRoaXMuX3RtcCAqIDQ4MjcxKSAlIDIxNDc0ODM2NDc7XHJcbiAgICAgICAgdGhpcy5fdGljayA9IHRoaXMuX3RtcCAvIDIxNDc0ODM2NDc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpY2s7XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dEZsb2F0KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCgpICogKG1heCAtIG1pbikgKyBtaW47XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dEludChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5leHRGbG9hdChtaW4sIG1heCkgfCAwO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByYW5kb20oKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgbnJhbmQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0RmxvYXQoLTEsIDEpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi9UeXBlcy5tanNcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnNTdG9yZTJEPFQgZXh0ZW5kcyBzdHJpbmcgfCBudW1iZXIgfCBvYmplY3Q+IHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgX3A6IFRbXTtcclxuICAgIHByb3RlY3RlZCBfY29scyA9IDA7XHJcbiAgICBwcm90ZWN0ZWQgX3Jvd3MgPSAwO1xyXG5cclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBfaW5pdEFycmF5VHlwZShzaXplOiBpbnQpOiBUW107XHJcblxyXG4gICAgcHVibGljIGluaXQoY29sczogaW50LCByb3dzOiBpbnQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5fY29scyA9IGNvbHM7XHJcbiAgICAgICAgdGhpcy5fcm93cyA9IHJvd3M7XHJcblxyXG4gICAgICAgIGNvbnN0IHNpemUgPSBjb2xzICogcm93cztcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9wID0gdGhpcy5faW5pdEFycmF5VHlwZShzaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdEJ5VmFsKGNvbHM6IGludCwgcm93czogaW50LCB2YWw6IFQgfCAoKCkgPT4gVCkpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0KGNvbHMsIHJvd3MpO1xyXG5cclxuICAgICAgICBjb25zdCBzaXplID0gY29scyAqIHJvd3M7XHJcbiAgICAgICAgY29uc3QgdmFsSXNGdW5jID0gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BbaV0gPSB2YWxJc0Z1bmMgPyB2YWwoKSA6IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGluaXRCeVN0b3JlKGNvbHM6IGludCwgcm93czogaW50LCB2YWw6IFJlY29yZDxpbnQsIFQ+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fY29scyA9IGNvbHM7XHJcbiAgICAgICAgdGhpcy5fcm93cyA9IHJvd3M7XHJcbiAgICAgICAgdGhpcy5fcCA9IHZhbCBhcyBUW107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZHIoKTogUmVjb3JkPG51bWJlciwgVD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaXplKCk6IGludCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jvd3MgKiB0aGlzLl9jb2xzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQoY29sOiBpbnQsIHJvdzogaW50KTogVCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bbcm93ICogdGhpcy5fY29scyArIGNvbF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldChjb2w6IGludCwgcm93OiBpbnQsIHZhbHVlOiBUKSB7XHJcbiAgICAgICAgdGhpcy5fcFtyb3cgKiB0aGlzLl9jb2xzICsgY29sXSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRCeUluZGV4KGluZGV4OiBpbnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcFtpbmRleF07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBzZXRCeUluZGV4KGluZGV4OiBpbnQsIHZhbHVlOiBUKSB7XHJcbiAgICAgICAgdGhpcy5fcFtpbmRleF0gPSB2YWx1ZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9ialN0b3JlMkQ8VCBleHRlbmRzIG9iamVjdD4gZXh0ZW5kcyBBYnNTdG9yZTJEPFQ+IHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX2luaXRBcnJheVR5cGUoc2l6ZTogbnVtYmVyKTogVFtdIHtcclxuICAgICAgICByZXR1cm4gbmV3IEFycmF5PFQ+KHNpemUpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSVZlY3RvcjMsIGZsb2F0IH0gZnJvbSBcIi4vVHlwZXMubWpzXCI7XHJcblxyXG4vKipcclxuICogU2V0cyB0aGUgc3BlY2lmaWVkIDMtZGltZW5zaW9uYWwgdmVjdG9yIHRvIHRoZSBzdXBwbGllZCBudW1lcmljYWwgdmFsdWVzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldDxUIGV4dGVuZHMgSVZlY3RvcjM+KHRvOiBULCB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKTogVCB7XHJcbiAgICB0by54ID0geDtcclxuICAgIHRvLnkgPSB5O1xyXG4gICAgdG8ueiA9IHo7XHJcbiAgICByZXR1cm4gdG87XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiB0aGUgdHdvIGdpdmVuIHBvaW50cy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZSh2YWx1ZTE6IFJlYWRvbmx5PElWZWN0b3IzPiwgdmFsdWUyOiBSZWFkb25seTxJVmVjdG9yMz4pIHtcclxuICAgIGNvbnN0IGR4ID0gdmFsdWUxLnggLSB2YWx1ZTIueDtcclxuICAgIGNvbnN0IGR5ID0gdmFsdWUxLnkgLSB2YWx1ZTIueTtcclxuICAgIGNvbnN0IGR6ID0gdmFsdWUxLnogLSB2YWx1ZTIuejtcclxuICAgIGNvbnN0IGxzID0gZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6O1xyXG4gICAgcmV0dXJuIE1hdGguc3FydChscyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiB0aGUgdHdvIGdpdmVuIHBvaW50cy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZVYzWFlaKHZhbHVlMTogUmVhZG9ubHk8SVZlY3RvcjM+LCB4OiBmbG9hdCwgeTogZmxvYXQsIHo6IGZsb2F0KSB7XHJcbiAgICBjb25zdCBkeCA9IHZhbHVlMS54IC0geDtcclxuICAgIGNvbnN0IGR5ID0gdmFsdWUxLnkgLSB5O1xyXG4gICAgY29uc3QgZHogPSB2YWx1ZTEueiAtIHo7XHJcbiAgICBjb25zdCBscyA9IGR4ICogZHggKyBkeSAqIGR5ICsgZHogKiBkejtcclxuICAgIHJldHVybiBNYXRoLnNxcnQobHMpO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gdGhlIHR3byBnaXZlbiBwb2ludHMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2VYMVkxWjFYMlkyWjIoeDE6IGZsb2F0LCB5MTogZmxvYXQsIHoxOiBmbG9hdCwgeDI6IGZsb2F0LCB5MjogZmxvYXQsIHoyOiBmbG9hdCkge1xyXG4gICAgY29uc3QgZHggPSB4MSAtIHgyO1xyXG4gICAgY29uc3QgZHkgPSB5MSAtIHkyO1xyXG4gICAgY29uc3QgZHogPSB6MSAtIHoyO1xyXG4gICAgY29uc3QgbHMgPSBkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHo7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGxzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2ZWN0b3Igd2l0aCB0aGUgc2FtZSBkaXJlY3Rpb24gYXMgdGhlIGdpdmVuIHZlY3RvciwgYnV0IHdpdGggYSBsZW5ndGggb2YgMS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemU8VE91dCBleHRlbmRzIElWZWN0b3IzPih2YWx1ZTogUmVhZG9ubHk8SVZlY3RvcjM+LCBvdXQ6IFRPdXQpOiBUT3V0IHtcclxuXHJcbiAgICBjb25zdCBscyA9IHZhbHVlLnggKiB2YWx1ZS54ICsgdmFsdWUueSAqIHZhbHVlLnkgKyB2YWx1ZS56ICogdmFsdWUuejtcclxuICAgIGNvbnN0IGxlbmd0aCA9IE1hdGguc3FydChscyk7XHJcblxyXG4gICAgcmV0dXJuIHNldChcclxuICAgICAgICBvdXQsXHJcbiAgICAgICAgdmFsdWUueCAvIGxlbmd0aCxcclxuICAgICAgICB2YWx1ZS55IC8gbGVuZ3RoLFxyXG4gICAgICAgIHZhbHVlLnogLyBsZW5ndGhcclxuICAgICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIHZlY3RvciB3aXRoIHRoZSBzYW1lIGRpcmVjdGlvbiBhcyB0aGUgZ2l2ZW4gdmVjdG9yLCBidXQgd2l0aCBhIGxlbmd0aCBvZiAxLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVJlZjxUIGV4dGVuZHMgSVZlY3RvcjM+KHJlZlZhbHVlOiBUKTogVCB7XHJcblxyXG4gICAgY29uc3QgbHMgPSByZWZWYWx1ZS54ICogcmVmVmFsdWUueCArIHJlZlZhbHVlLnkgKiByZWZWYWx1ZS55ICsgcmVmVmFsdWUueiAqIHJlZlZhbHVlLno7XHJcbiAgICBjb25zdCBsZW5ndGggPSBNYXRoLnNxcnQobHMpO1xyXG4gICAgXHJcbiAgICByZWZWYWx1ZS54IC89IGxlbmd0aDtcclxuICAgIHJlZlZhbHVlLnkgLz0gbGVuZ3RoO1xyXG4gICAgcmVmVmFsdWUueiAvPSBsZW5ndGg7XHJcbiAgICByZXR1cm4gcmVmVmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGRzIHR3byB2ZWN0b3JzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZDxUT3V0IGV4dGVuZHMgSVZlY3RvcjM+KGxlZnQ6IFJlYWRvbmx5PElWZWN0b3IzPiwgcmlnaHQ6IFJlYWRvbmx5PElWZWN0b3IzPiwgb3V0OiBUT3V0KTogVE91dCB7XHJcbiAgICByZXR1cm4gc2V0KFxyXG4gICAgICAgIG91dCxcclxuICAgICAgICBsZWZ0LnggKyByaWdodC54LFxyXG4gICAgICAgIGxlZnQueSArIHJpZ2h0LnksXHJcbiAgICAgICAgbGVmdC56ICsgcmlnaHQuelxyXG4gICAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZHMgdHdvIHZlY3RvcnMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkUmVmKHJlZkxlZnQ6IElWZWN0b3IzLCByaWdodDogUmVhZG9ubHk8SVZlY3RvcjM+KSB7XHJcbiAgICByZXR1cm4gYWRkKHJlZkxlZnQsIHJpZ2h0LCByZWZMZWZ0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN1YnRyYWN0cyB0aGUgc2Vjb25kIHZlY3RvciBmcm9tIHRoZSBmaXJzdC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdDxUT3V0IGV4dGVuZHMgSVZlY3RvcjM+KGxlZnQ6IFJlYWRvbmx5PElWZWN0b3IzPiwgcmlnaHQ6IFJlYWRvbmx5PElWZWN0b3IzPiwgb3V0OiBUT3V0KTogVE91dCB7XHJcbiAgICByZXR1cm4gc2V0KFxyXG4gICAgICAgIG91dCxcclxuICAgICAgICBsZWZ0LnggLSByaWdodC54LFxyXG4gICAgICAgIGxlZnQueSAtIHJpZ2h0LnksXHJcbiAgICAgICAgbGVmdC56IC0gcmlnaHQuelxyXG4gICAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbXB1dGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byB2ZWN0b3JzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyb3NzPFRPdXQgZXh0ZW5kcyBJVmVjdG9yMz4odmVjdG9yMTogUmVhZG9ubHk8SVZlY3RvcjM+LCB2ZWN0b3IyOiBSZWFkb25seTxJVmVjdG9yMz4sIG91dDogVE91dCk6IFRPdXQge1xyXG4gICAgcmV0dXJuIHNldChcclxuICAgICAgICBvdXQsXHJcbiAgICAgICAgdmVjdG9yMS55ICogdmVjdG9yMi56IC0gdmVjdG9yMS56ICogdmVjdG9yMi55LFxyXG4gICAgICAgIHZlY3RvcjEueiAqIHZlY3RvcjIueCAtIHZlY3RvcjEueCAqIHZlY3RvcjIueixcclxuICAgICAgICB2ZWN0b3IxLnggKiB2ZWN0b3IyLnkgLSB2ZWN0b3IxLnkgKiB2ZWN0b3IyLnhcclxuICAgICk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIHNldCxcclxuICAgIG5vcm1hbGl6ZSxcclxuICAgIG5vcm1hbGl6ZVJlZixcclxuICAgIGFkZCxcclxuICAgIHN1YnRyYWN0LFxyXG4gICAgYWRkUmVmLFxyXG4gICAgZGlzdGFuY2UsXHJcbiAgICBkaXN0YW5jZVYzWFlaLFxyXG4gICAgZGlzdGFuY2VYMVkxWjFYMlkyWjIsXHJcbiAgICBjcm9zc1xyXG59IiwiaW1wb3J0IHsgZmxvYXQgfSBmcm9tIFwiLi9UeXBlcy5tanNcIjtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiB0aGUgdHdvIGdpdmVuIHBvaW50cy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZVgxWjFYMloyKHgxOiBmbG9hdCwgejE6IGZsb2F0LCB4MjogZmxvYXQsIHoyOiBmbG9hdCkge1xyXG4gICAgY29uc3QgZHggPSB4MSAtIHgyO1xyXG4gICAgY29uc3QgZHogPSB6MSAtIHoyO1xyXG4gICAgY29uc3QgbHMgPSBkeCAqIGR4ICsgZHogKiBkejtcclxuICAgIHJldHVybiBNYXRoLnNxcnQobHMpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBkaXN0YW5jZVgxWjFYMloyLFxyXG59OyIsImltcG9ydCB0eXBlIHsgUmVmT2JqZWN0LCBJVmVjdG9yMywgZmxvYXQsIGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB7IE9ialN0b3JlMkQgfSBmcm9tIFwiLi4vU2hhcmVkL1N0b3JlMkQubWpzXCI7XHJcbmltcG9ydCB7IGdldFRleHQgfSBmcm9tIFwiLi4vU2hhcmVkL1V0aWxzLm1qc1wiO1xyXG5pbXBvcnQgVmVjdG9yM01hdGggZnJvbSBcIi4uL1NoYXJlZC9WZWN0b3IzTWF0aC5tanNcIjtcclxuaW1wb3J0IFZlY3RvcjJNYXRoIGZyb20gXCIuLi9TaGFyZWQvVmVjdG9yMk1hdGgubWpzXCI7XHJcbmltcG9ydCB7IElSZWFkb25seUFic0hlaWdodE1hcCB9IGZyb20gXCIuL0Fic0hlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVBhdGNoTG9kQmFzZSB7XHJcbiAgICBjb3JlOiBpbnQ7XHJcbiAgICBsZWZ0OiBpbnQ7XHJcbiAgICByaWdodDogaW50O1xyXG4gICAgdG9wOiBpbnQ7XHJcbiAgICBib3R0b206IGludDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGF0Y2hMb2QgZXh0ZW5kcyBJUGF0Y2hMb2RCYXNlIHtcclxuXHJcbiAgICAvKiogRGlzdGFuY2UgdG8gcGF0Y2ggY2VudGVyIHh6IGFuZCB5IHBvcyBmcm9tIGhlaWdodG1hcCBhbHRpdHVkZSBieSBjYW1lcmEgeHogdG8gKi9cclxuICAgIGRpc3RhbmNlOiBmbG9hdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExvZElkKGM6IGludCwgbDogaW50LCByOiBpbnQsIHQ6IGludCwgYjogaW50KSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgY29uc3QgbG9kQ29yZSA9IGMgKyAxO1xyXG4gICAgY29uc3QgbG9kQmluYXJ5VmFsdWUgPSAobCA8PCAzKSB8IChyIDw8IDIpIHwgKHQgPDwgMSkgfCBiO1xyXG4gICAgXHJcbiAgICByZXR1cm4gbG9kQ29yZSAqIDB4MTExMSAtIGxvZEJpbmFyeVZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGVmYXVsdFBhdGNoTG9kOiBSZWFkb25seTxJUGF0Y2hMb2Q+ID0ge1xyXG4gICAgZGlzdGFuY2U6IDAsXHJcbiAgICBjb3JlOiAgICAgMCxcclxuICAgIGxlZnQ6ICAgICAwLFxyXG4gICAgcmlnaHQ6ICAgIDAsXHJcbiAgICB0b3A6ICAgICAgMCxcclxuICAgIGJvdHRvbTogICAwLFxyXG59XHJcblxyXG5jb25zdCBnZXRaZXJvUGF0Y2hMb2QgPSAoKTogSVBhdGNoTG9kID0+ICh7XHJcbiAgICBkaXN0YW5jZTogMCxcclxuICAgIGNvcmU6ICAgICAwLFxyXG4gICAgbGVmdDogICAgIDAsXHJcbiAgICByaWdodDogICAgMCxcclxuICAgIHRvcDogICAgICAwLFxyXG4gICAgYm90dG9tOiAgIDAsXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNsYXNzIExvZE1hbmFnZXIge1xyXG5cclxuICAgIHByaXZhdGUgX3pGYXI6IGludDtcclxuICAgIHByaXZhdGUgX21hcDogT2JqU3RvcmUyRDxJUGF0Y2hMb2Q+O1xyXG4gICAgcHJpdmF0ZSBfcmVnaW9uczogZmxvYXRbXTtcclxuXHJcbiAgICBwcml2YXRlIF9wYXRjaFNpemU6IGludDtcclxuICAgIHByaXZhdGUgX251bVBhdGNoZXNYOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9udW1QYXRjaGVzWjogaW50O1xyXG5cclxuICAgIHByaXZhdGUgX21heExPRDogaW50O1xyXG5cclxuICAgIHB1YmxpYyBnZXQgekZhcigpIHsgcmV0dXJuIHRoaXMuX3pGYXI7IH1cclxuICAgIHB1YmxpYyBnZXQgbWF4TE9EKCkgeyByZXR1cm4gdGhpcy5fbWF4TE9EOyB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHpGYXI6IGludCwgcGF0Y2hTaXplOiBpbnQsIG51bVBhdGNoZXNYOiBpbnQsIG51bVBhdGNoZXNaOiBpbnQpIHtcclxuICAgICAgICB0aGlzLnNldFBhcmFtcyh6RmFyLCBwYXRjaFNpemUsIG51bVBhdGNoZXNYLCBudW1QYXRjaGVzWik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFpGYXIoekZhcjogaW50KSB7XHJcbiAgICAgICAgdGhpcy5fekZhciA9IHpGYXI7XHJcbiAgICAgICAgdGhpcy5fY2FsY0xvZFJlZ2lvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UGFyYW1zKHpGYXI6IGludCwgcGF0Y2hTaXplOiBpbnQsIG51bVBhdGNoZXNYOiBpbnQsIG51bVBhdGNoZXNaOiBpbnQpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fcGF0Y2hTaXplICAgPSBwYXRjaFNpemU7XHJcbiAgICAgICAgdGhpcy5fbnVtUGF0Y2hlc1ggPSBudW1QYXRjaGVzWDtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWiA9IG51bVBhdGNoZXNaO1xyXG5cclxuICAgICAgICB0aGlzLl9jYWxjTWF4TE9EKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBPYmpTdG9yZTJEPElQYXRjaExvZD4oKTtcclxuICAgICAgICB0aGlzLl9tYXAuaW5pdEJ5VmFsKG51bVBhdGNoZXNYLCBudW1QYXRjaGVzWiwgZ2V0WmVyb1BhdGNoTG9kKTtcclxuICAgICAgICB0aGlzLl9yZWdpb25zID0gbmV3IEFycmF5PG51bWJlcj4odGhpcy5fbWF4TE9EICsgMSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0WkZhcih6RmFyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jYWxjTWF4TE9EKCkge1xyXG5cclxuICAgICAgICBjb25zdCBudW1TZWdtZW50cyAgICAgICAgICA9IHRoaXMuX3BhdGNoU2l6ZSAtIDE7XHJcbiAgICAgICAgY29uc3QgbnVtU2VnbWVudHNMb2cyICAgICAgPSBNYXRoLmxvZzIobnVtU2VnbWVudHMpO1xyXG4gICAgICAgIGNvbnN0IG51bVNlZ21lbnRzTG9nMkNlaWwgID0gTWF0aC5jZWlsKG51bVNlZ21lbnRzTG9nMik7XHJcbiAgICAgICAgY29uc3QgbnVtU2VnbWVudHNMb2cyRmxvb3IgPSBNYXRoLmZsb29yKG51bVNlZ21lbnRzTG9nMik7XHJcblxyXG4gICAgICAgIGlmIChudW1TZWdtZW50c0xvZzJDZWlsICE9PSBudW1TZWdtZW50c0xvZzJGbG9vcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgbnVtYmVyIG9mIHZlcnRpY2VzIGluIHRoZSBwYXRjaCBtaW51cyBvbmUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3b1xcblwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX21heExPRCA9IG51bVNlZ21lbnRzTG9nMkZsb29yIC0gMTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jYWxjTG9kUmVnaW9ucygpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoZSByaW5nIHN5c3RlbSB0byBkZXRlcm1pbmUgdGhlIExPRC5cclxuICAgICAgICAvLyBUT0RPOiBCYXNlZCBvbiB0aGUgaGVpZ2h0cyB3ZSBjYW4gY2FsY3VsYXRlIHRoZSBvcHRpbWFsIGxvZHNcclxuXHJcbiAgICAgICAgbGV0IHN1bSA9IDA7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSB0aGlzLl9tYXhMT0Q7IGkrKykge1xyXG4gICAgICAgICAgICBzdW0gKz0gaSArIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgeCA9IHRoaXMuX3pGYXIgLyBzdW07XHJcbiAgICAgICAgbGV0IHRlbXAgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdGhpcy5fbWF4TE9EOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY3VyUmFuZ2UgPSAoeCAqIChpICsgMSkpIHwgMDtcclxuICAgICAgICAgICAgdGhpcy5fcmVnaW9uc1tpXSA9IHRlbXAgKyBjdXJSYW5nZTtcclxuICAgICAgICAgICAgdGVtcCArPSBjdXJSYW5nZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByaW50TG9kTWFwKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBzdHIgPSAnJztcclxuXHJcbiAgICAgICAgY29uc3QgbWF4TG9kTWF4WiAgPSB0aGlzLl9udW1QYXRjaGVzWiAtIDE7XHJcbiAgICAgICAgY29uc3QgbWF4TG9kTWF4WCAgPSB0aGlzLl9udW1QYXRjaGVzWDtcclxuXHJcbiAgICAgICAgbGV0IG1heENvcmUgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsb2RNYXBaID0gbWF4TG9kTWF4WjsgbG9kTWFwWiA+PSAwOyBsb2RNYXBaLS0pIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGxvZE1hcFggPSAwIDsgbG9kTWFwWCA8IG1heExvZE1heFg7IGxvZE1hcFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fbWFwLmdldChsb2RNYXBYLCBsb2RNYXBaKS5jb3JlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXhDb3JlIDwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhDb3JlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGxvZE1heE51bWJlckNvdW50ICA9IG1heExvZE1heFoudG9TdHJpbmcoKS5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgY29yZU1heE51bWJlckNvdW50ID0gbWF4Q29yZS50b1N0cmluZygpLmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBsb2RNYXBaID0gbWF4TG9kTWF4WjsgbG9kTWFwWiA+PSAwOyBsb2RNYXBaLS0pIHtcclxuICAgICAgICAgICAgc3RyICs9IGdldFRleHQobG9kTWFwWiwgbG9kTWF4TnVtYmVyQ291bnQsICcgJykgKyAnOiAnO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsb2RNYXBYID0gMCA7IGxvZE1hcFggPCBtYXhMb2RNYXhYOyBsb2RNYXBYKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fbWFwLmdldChsb2RNYXBYLCBsb2RNYXBaKS5jb3JlO1xyXG4gICAgICAgICAgICAgICAgc3RyICs9IGdldFRleHQodmFsdWUsIGNvcmVNYXhOdW1iZXJDb3VudCwgJyAnKSArICcgJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdHIgKz0gJ1xcbic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhzdHIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkaXN0YW5jZVRvTG9kKGRpc3RhbmNlOiBmbG9hdCkge1xyXG5cclxuICAgICAgICBsZXQgbG9kID0gdGhpcy5fbWF4TE9EO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX21heExPRDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCB0aGlzLl9yZWdpb25zW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxvZCA9IGk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBsb2Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBhdGNoTG9kKHBhdGNoWDogaW50LCBwYXRjaFo6IGludCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0KHBhdGNoWCwgcGF0Y2haKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGF0Y2hMb2RCeUluZGV4KGluZGV4OiBpbnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmdldEJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoY2FtZXJhUG9zOiBSZWZPYmplY3Q8SVZlY3RvcjM+LCBoZWlnaHRNYXA6IElSZWFkb25seUFic0hlaWdodE1hcCwgdXNlWVBvczogYm9vbGVhbiA9IHRydWUsIGNlbnRlcjogYm9vbGVhbiA9IHRydWUpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBhID0gdGhpcy51cGRhdGVMb2RNYXBQYXNzMShjYW1lcmFQb3MsIGhlaWdodE1hcCwgdXNlWVBvcywgY2VudGVyKTtcclxuICAgICAgICBjb25zdCBiID0gdGhpcy51cGRhdGVMb2RNYXBQYXNzMigpO1xyXG4gICAgICAgIHJldHVybiBhIHx8IGI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHVwZGF0ZUxvZE1hcFBhc3MxKGNhbWVyYVBvczogUmVmT2JqZWN0PElWZWN0b3IzPiwgaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNIZWlnaHRNYXAsIHVzZVlQb3M6IGJvb2xlYW4sIGNlbnRlcjogYm9vbGVhbikge1xyXG5cclxuICAgICAgICBsZXQgaGFzQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGRpc3RhbmNlVG9DYW1lcmE7XHJcblxyXG4gICAgICAgIGNvbnN0IGNlbnRlclN0ZXAgPSB0aGlzLl9wYXRjaFNpemUgLyAyIHwgMDtcclxuICAgICAgICBjb25zdCBoYWxmV2lkdGggID0gaGVpZ2h0TWFwLndpZHRoIC8gMjtcclxuICAgICAgICBjb25zdCBoYWxmRGVwdGggID0gaGVpZ2h0TWFwLmRlcHRoIC8gMjtcclxuXHJcbiAgICAgICAgbGV0IGNhbWVyYVBvc1RlcnJhaW5BbHRpdHVkZSA9IDA7XHJcblxyXG4gICAgICAgIGlmICh1c2VZUG9zKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVDYW1lcmFYID0gTWF0aC5taW4oTWF0aC5tYXgoY2VudGVyID8gY2FtZXJhUG9zLnggKyBoYWxmV2lkdGggOiBjYW1lcmFQb3MueCwgMCksIGhlaWdodE1hcC53aWR0aCAtIDEpO1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVDYW1lcmFaID0gTWF0aC5taW4oTWF0aC5tYXgoY2VudGVyID8gY2FtZXJhUG9zLnogKyBoYWxmRGVwdGggOiBjYW1lcmFQb3MueiwgMCksIGhlaWdodE1hcC5kZXB0aCAtIDEpO1xyXG5cclxuICAgICAgICAgICAgY2FtZXJhUG9zVGVycmFpbkFsdGl0dWRlID0gaGVpZ2h0TWFwLmdldChub3JtYWxpemVDYW1lcmFYIHwgMCwgbm9ybWFsaXplQ2FtZXJhWiB8IDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kTWFwWiA9IDA7IGxvZE1hcFogPCB0aGlzLl9udW1QYXRjaGVzWjsgbG9kTWFwWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBsb2RNYXBYID0gMDsgbG9kTWFwWCA8IHRoaXMuX251bVBhdGNoZXNYOyBsb2RNYXBYKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB4ID0gbG9kTWFwWCAqICh0aGlzLl9wYXRjaFNpemUgLSAxKSArIGNlbnRlclN0ZXA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB6ID0gbG9kTWFwWiAqICh0aGlzLl9wYXRjaFNpemUgLSAxKSArIGNlbnRlclN0ZXA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hDZW50ZXJYID0gY2VudGVyID8gLWhhbGZXaWR0aCArIHggOiB4O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hDZW50ZXJaID0gY2VudGVyID8gLWhhbGZEZXB0aCArIHogOiB6O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh1c2VZUG9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VUb0NhbWVyYSA9IFZlY3RvcjNNYXRoLmRpc3RhbmNlVjNYWVooY2FtZXJhUG9zLCBwYXRjaENlbnRlclgsIGNhbWVyYVBvc1RlcnJhaW5BbHRpdHVkZSwgcGF0Y2hDZW50ZXJaKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlVG9DYW1lcmEgPSBWZWN0b3IyTWF0aC5kaXN0YW5jZVgxWjFYMloyKGNhbWVyYVBvcy54LCBjYW1lcmFQb3MueiwgcGF0Y2hDZW50ZXJYLCBwYXRjaENlbnRlclopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvcmVMb2QgICA9IHRoaXMuZGlzdGFuY2VUb0xvZChkaXN0YW5jZVRvQ2FtZXJhKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBQYXRjaExPRCA9IHRoaXMuX21hcC5nZXQobG9kTWFwWCwgbG9kTWFwWik7XHJcblxyXG4gICAgICAgICAgICAgICAgcFBhdGNoTE9ELmRpc3RhbmNlID0gZGlzdGFuY2VUb0NhbWVyYTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocFBhdGNoTE9ELmNvcmUgIT09IGNvcmVMb2QpIHtcclxuICAgICAgICAgICAgICAgICAgICBwUGF0Y2hMT0QuY29yZSA9IGNvcmVMb2Q7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlTG9kTWFwUGFzczIoKSB7XHJcblxyXG4gICAgICAgIGxldCBoYXNDaGFuZ2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kTWFwWiA9IDA7IGxvZE1hcFogPCB0aGlzLl9udW1QYXRjaGVzWiA7IGxvZE1hcForKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgbG9kTWFwWCA9IDA7IGxvZE1hcFggPCB0aGlzLl9udW1QYXRjaGVzWCA7IGxvZE1hcFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gICAgPSB0aGlzLl9tYXAuZ2V0KGxvZE1hcFgsIGxvZE1hcFopO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29yZUxvZCA9IGl0ZW0uY29yZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4TGVmdCAgID0gbG9kTWFwWDtcclxuICAgICAgICAgICAgICAgIGxldCBpbmRleFJpZ2h0ICA9IGxvZE1hcFg7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXhUb3AgICAgPSBsb2RNYXBaO1xyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4Qm90dG9tID0gbG9kTWFwWjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGxvZE1hcFggPiAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4TGVmdC0tO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2ID0gaXRlbS5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLl9tYXAuZ2V0KGluZGV4TGVmdCwgbG9kTWFwWikuY29yZSA+IGNvcmVMb2QgPyAxIDogMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5sZWZ0ID0gbmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChsb2RNYXBYIDwgdGhpcy5fbnVtUGF0Y2hlc1ggLSAxKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4UmlnaHQrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldiA9IGl0ZW0ucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuX21hcC5nZXQoaW5kZXhSaWdodCwgbG9kTWFwWikuY29yZSA+IGNvcmVMb2QgPyAxIDogMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5yaWdodCA9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobG9kTWFwWiA+IDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhCb3R0b20tLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldiA9IGl0ZW0uYm90dG9tO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLl9tYXAuZ2V0KGxvZE1hcFgsIGluZGV4Qm90dG9tKS5jb3JlID4gY29yZUxvZCA/IDEgOiAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmJvdHRvbSA9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobG9kTWFwWiA8IHRoaXMuX251bVBhdGNoZXNaIC0gMSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbmRleFRvcCsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2ID0gaXRlbS50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuX21hcC5nZXQobG9kTWFwWCwgaW5kZXhUb3ApLmNvcmUgPiBjb3JlTG9kID8gMSA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2ICE9PSBuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udG9wID0gbmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoYXNDaGFuZ2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvZE1hbmFnZXI7IiwiaW1wb3J0IHsgSVZlY3RvcjIsIElWZWN0b3IzLCBSZWZPYmplY3QsIGZsb2F0LCBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgQWJzSGVpZ2h0TWFwLCB7IElSZWFkb25seUFic0hlaWdodE1hcCB9IGZyb20gXCIuL0Fic0hlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZlcnRleEhlaWdodHNJbmZvIHtcclxuICAgIG1heEhlaWdodDogZmxvYXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvb3Jkc1JlYWRlciB7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgZ2V0UG9zaXRpb24oaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjM+KTogYm9vbGVhbjtcclxuICAgIGdldFBvc2l0aW9uV2l0aEhlaWdodEJ5RmFjdG9yKGluZGV4OiBpbnQsIGJ1ZjogUmVmT2JqZWN0PElWZWN0b3IzPik6IGJvb2xlYW47XHJcbiAgICBnZXRDb29yZHMoaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjI+KTogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlDb29yZHNCdWZmZXIgZXh0ZW5kcyBJQ29vcmRzUmVhZGVyIHtcclxuXHJcbiAgICByZWFkb25seSBoZWlnaHRNYXA6IElSZWFkb25seUFic0hlaWdodE1hcDtcclxuICAgIHJlYWRvbmx5IHBhdGNoVmVydGV4QnVmZmVyTGVuZ3RoOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBwYXRjaFZlcnRleEJ1ZmZlclR5cGVkOiBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXk7XHJcbiAgICByZWFkb25seSBwYXRjaFZlcnRleEJ1ZmZlckRhdGE6IFJlYWRvbmx5PEFycmF5QnVmZmVyPjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvb3Jkc1ZlcnRleFNpemUgPSAyO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvb3Jkc0J1ZmZlciBpbXBsZW1lbnRzIElSZWFkb25seUNvb3Jkc0J1ZmZlciB7XHJcbiAgICBcclxuICAgIHByaXZhdGUgX3dpZHRoOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9kZXB0aDogaW50O1xyXG4gICAgcHJpdmF0ZSBfcGF0Y2hTaXplOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9kYXRhOiBBcnJheUJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX2RhdGFUeXBlZDogVWludDE2QXJyYXk7XHJcbiAgICBwcml2YXRlIF9sZW5ndGg6IG51bWJlcjtcclxuXHJcbiAgICByZWFkb25seSBoZWlnaHRNYXA6IEFic0hlaWdodE1hcDtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoVmVydGV4QnVmZmVyTGVuZ3RoKCkgeyByZXR1cm4gdGhpcy5fbGVuZ3RoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoVmVydGV4QnVmZmVyRGF0YSgpICAgeyByZXR1cm4gdGhpcy5fZGF0YTsgfVxyXG4gICAgcHVibGljIGdldCBwYXRjaFZlcnRleEJ1ZmZlclR5cGVkKCkgIHsgcmV0dXJuIHRoaXMuX2RhdGFUeXBlZDsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgd2lkdGgoKSAgICAgICB7IHJldHVybiB0aGlzLl93aWR0aDsgfVxyXG4gICAgcHVibGljIGdldCBkZXB0aCgpICAgICAgIHsgcmV0dXJuIHRoaXMuX2RlcHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoU2l6ZSgpICAgeyByZXR1cm4gdGhpcy5fcGF0Y2hTaXplOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoaGVpZ2h0TWFwOiBBYnNIZWlnaHRNYXAsIHBhdGNoU2l6ZTogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuaGVpZ2h0TWFwICA9IGhlaWdodE1hcDtcclxuXHJcbiAgICAgICAgLy8gV2UgY2FuIHVzZSB1aW50OCBmb3IgcGF0Y2hlcyBzbWFsbGVyIHRoYW4gMjU1LCBidXQgd2Ugb25seSB1c2UgMiBieXRlcyxcclxuICAgICAgICAvLyBmb3Igb3B0aW1hbCBwZXJmb3JtYW5jZSBuZWVkIDQgYnl0ZXMgZm9yIHRoZSBidWZmZXIuXHJcblxyXG4gICAgICAgIHRoaXMuX3BhdGNoU2l6ZSA9IHBhdGNoU2l6ZTtcclxuICAgICAgICB0aGlzLl93aWR0aCA9IGhlaWdodE1hcC53aWR0aDtcclxuICAgICAgICB0aGlzLl9kZXB0aCA9IGhlaWdodE1hcC5kZXB0aDtcclxuICAgICAgICB0aGlzLl9sZW5ndGggPSB0aGlzLl9wYXRjaFNpemUgKiB0aGlzLl9wYXRjaFNpemU7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvb3Jkc0Fyckxlbmd0aCAgPSB0aGlzLl9sZW5ndGggKiBjb29yZHNWZXJ0ZXhTaXplO1xyXG4gICAgICAgIGNvbnN0IGNvb3Jkc0J5dGVMZW5ndGggPSBjb29yZHNBcnJMZW5ndGggKiBVaW50MTZBcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcclxuXHJcbiAgICAgICAgdGhpcy5fZGF0YSAgICAgID0gbmV3IEFycmF5QnVmZmVyKGNvb3Jkc0J5dGVMZW5ndGgpO1xyXG4gICAgICAgIHRoaXMuX2RhdGFUeXBlZCA9IG5ldyBVaW50MTZBcnJheSh0aGlzLl9kYXRhLCAwLCBjb29yZHNBcnJMZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgaW5pdCgpIHtcclxuXHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCB0aGlzLl9wYXRjaFNpemU7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLl9wYXRjaFNpemU7IHgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFUeXBlZFtpbmRleCsrXSA9IHg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhVHlwZWRbaW5kZXgrK10gPSB6O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24oaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjM+KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIHRoaXMuX3dpZHRoIHwgMDtcclxuICAgICAgICBjb25zdCB6ID0gaW5kZXggLyB0aGlzLl93aWR0aCB8IDA7XHJcblxyXG4gICAgICAgIGJ1Zi54ID0geDtcclxuICAgICAgICBidWYueSA9IHRoaXMuaGVpZ2h0TWFwLmdldCh4LCB6KTtcclxuICAgICAgICBidWYueiA9IHo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBvc2l0aW9uV2l0aEhlaWdodEJ5RmFjdG9yKGluZGV4OiBpbnQsIGJ1ZjogUmVmT2JqZWN0PElWZWN0b3IzPikge1xyXG5cclxuICAgICAgICBjb25zdCB4ID0gaW5kZXggJSB0aGlzLl93aWR0aCB8IDA7XHJcbiAgICAgICAgY29uc3QgeiA9IGluZGV4IC8gdGhpcy5fd2lkdGggfCAwO1xyXG5cclxuICAgICAgICBidWYueCA9IHg7XHJcbiAgICAgICAgYnVmLnkgPSB0aGlzLmhlaWdodE1hcC5nZXRGYWN0b3IoeCwgeik7XHJcbiAgICAgICAgYnVmLnogPSB6O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDb29yZHMoaW5kZXg6IG51bWJlciwgYnVmOiBJVmVjdG9yMyk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICBjb25zdCB4ID0gaW5kZXggJSB0aGlzLl93aWR0aCB8IDA7XHJcbiAgICAgICAgY29uc3QgeiA9IGluZGV4IC8gdGhpcy5fd2lkdGggfCAwO1xyXG5cclxuICAgICAgICBidWYueCA9IHg7XHJcbiAgICAgICAgYnVmLnogPSB6O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDb29yZHNCdWZmZXI7IiwiaW1wb3J0IHsgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBMRUZUICAgPSAyO1xyXG5leHBvcnQgY29uc3QgUklHSFQgID0gMjtcclxuZXhwb3J0IGNvbnN0IFRPUCAgICA9IDI7XHJcbmV4cG9ydCBjb25zdCBCT1RUT00gPSAyO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU2luZ2xlTG9kSW5mbyB7XHJcbiAgICBzdGFydDogaW50O1xyXG4gICAgY291bnQ6IGludDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRJbmZvKCk6IElTaW5nbGVMb2RJbmZvW11bXVtdW10ge1xyXG5cclxuICAgIGNvbnN0IGFycjogSVNpbmdsZUxvZEluZm9bXVtdW11bXSA9IFtdO1xyXG5cclxuICAgIGZvciAobGV0IGwgPSAwIDsgbCA8IExFRlQgOyBsKyspIHtcclxuXHJcbiAgICAgICAgYXJyW2xdID0gbmV3IEFycmF5PElTaW5nbGVMb2RJbmZvW11bXT4oUklHSFQpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCByID0gMCA7IHIgPCBSSUdIVCA7IHIrKykge1xyXG5cclxuICAgICAgICAgICAgYXJyW2xdW3JdID0gbmV3IEFycmF5PElTaW5nbGVMb2RJbmZvW10+KFRPUCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMCA7IHQgPCBUT1AgOyB0KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBhcnJbbF1bcl1bdF0gPSBuZXcgQXJyYXk8SVNpbmdsZUxvZEluZm8+KEJPVFRPTSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwIDsgYiA8IEJPVFRPTSA7IGIrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhcnJbbF1bcl1bdF1bYl0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogMFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFycjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExvZEluZm8ge1xyXG5cclxuICAgIC8vaW5mb1tMRUZUXVtSSUdIVF1bVE9QXVtCT1RUT01dO1xyXG4gICAgcHVibGljIGluZm86IElTaW5nbGVMb2RJbmZvW11bXVtdW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5pbmZvID0gaW5pdEluZm8oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYXIoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgbCA9IDAgOyBsIDwgTEVGVCA7IGwrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCByID0gMCA7IHIgPCBSSUdIVCA7IHIrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDAgOyB0IDwgVE9QIDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDAgOyBiIDwgQk9UVE9NIDsgYisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpbmdsZSA9IHRoaXMuaW5mb1tsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlLnN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlLmNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvZEluZm87IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50LCBSZWZPYmplY3QsIHVuc2lnbmVkaW50IGFzIHVuc2lnbmVkX2ludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB7IEJPVFRPTSwgTEVGVCwgTG9kSW5mbywgUklHSFQsIFRPUCB9IGZyb20gXCIuL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCBMb2RNYW5hZ2VyIGZyb20gXCIuL0xvZE1hbmFnZXIubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHcmlkIHtcclxuICAgIHJlYWRvbmx5IHdpZHRoOiBpbnQ7XHJcbiAgICByZWFkb25seSBkZXB0aDogaW50O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHcmlkUGF0Y2hlZCBleHRlbmRzIElHcmlkIHtcclxuICAgIHJlYWRvbmx5IHBhdGNoU2l6ZTogaW50O1xyXG4gICAgcmVhZG9ubHkgbnVtUGF0Y2hlc1g6IGludDtcclxuICAgIHJlYWRvbmx5IG51bVBhdGNoZXNaOiBpbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHcmlkQnVpbGRlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBfbG9kSW5mbzogTG9kSW5mb1tdO1xyXG4gICAgcHJpdmF0ZSBfbG9kTWFuYWdlcjogTG9kTWFuYWdlcjtcclxuICAgIHByaXZhdGUgX2luZGljZXM6IFVpbnQzMkFycmF5O1xyXG4gICAgcHJpdmF0ZSBfZ3JpZDogSUdyaWRQYXRjaGVkO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgekZhcigpIHsgcmV0dXJuIHRoaXMuX2xvZE1hbmFnZXIuekZhcjsgfVxyXG4gICAgcHVibGljIGdldCB3aWR0aCgpIHsgcmV0dXJuIHRoaXMuX2dyaWQud2lkdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgZGVwdGgoKSB7IHJldHVybiB0aGlzLl9ncmlkLmRlcHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoU2l6ZSgpIHsgcmV0dXJuIHRoaXMuX2dyaWQucGF0Y2hTaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNYKCkgeyByZXR1cm4gdGhpcy5fZ3JpZC5udW1QYXRjaGVzWDsgfVxyXG4gICAgcHVibGljIGdldCBudW1QYXRjaGVzWigpIHsgcmV0dXJuIHRoaXMuX2dyaWQubnVtUGF0Y2hlc1o7IH1cclxuICAgIHB1YmxpYyBnZXQgbWF4TE9EKCkgeyByZXR1cm4gdGhpcy5sb2RNYW5hZ2VyLm1heExPRDsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hJbmRpY2VzKCk6IFJlYWRvbmx5PFVpbnQzMkFycmF5PiB7IHJldHVybiB0aGlzLl9pbmRpY2VzIGFzIGFueTsgfVxyXG4gICAgcHVibGljIGdldCBsb2RNYW5hZ2VyKCk6IExvZE1hbmFnZXIgeyByZXR1cm4gdGhpcy5fbG9kTWFuYWdlcjsgfVxyXG4gICAgcHVibGljIGdldCBsb2RJbmZvKCk6IFJlYWRvbmx5PFJlYWRvbmx5PExvZEluZm8+PltdIHsgcmV0dXJuIHRoaXMuX2xvZEluZm87IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihncmlkOiBSZWZPYmplY3Q8SUdyaWRQYXRjaGVkPiwgekZhcjogZmxvYXQpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fZ3JpZCA9IGdyaWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgd2lkdGggICAgICAgPSBncmlkLndpZHRoO1xyXG4gICAgICAgIGNvbnN0IGRlcHRoICAgICAgID0gZ3JpZC5kZXB0aDtcclxuICAgICAgICBjb25zdCBwYXRjaFNpemUgICA9IGdyaWQucGF0Y2hTaXplO1xyXG4gICAgICAgIGNvbnN0IG51bVBhdGNoZXNYID0gZ3JpZC5udW1QYXRjaGVzWDtcclxuICAgICAgICBjb25zdCBudW1QYXRjaGVzWiA9IGdyaWQubnVtUGF0Y2hlc1o7XHJcblxyXG4gICAgICAgIGlmICh3aWR0aCA+PSAweGZmZmYpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk1heCB3aWR0aCA9ICVkXFxuXCIsIDB4ZmZmZiAtMSk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRlcHRoID49IDB4ZmZmZikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTWF4IGRlcHRoID0gJWRcXG5cIiwgMHhmZmZmIC0xKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKHdpZHRoIC0gMSkgJSAocGF0Y2hTaXplIC0gMSkgIT09IDApIHtcclxuICAgICAgICAgICAgY29uc3QgcmVjb21tZW5kZWRXaWR0aCA9ICgod2lkdGggLSAxICsgcGF0Y2hTaXplIC0gMSkgLyAocGF0Y2hTaXplIC0gMSkpICogKHBhdGNoU2l6ZSAtIDEpICsgMTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIldpZHRoIG1pbnVzIDEgKCVkKSBtdXN0IGJlIGRpdmlzaWJsZSBieSBwYXRjaFNpemUgbWludXMgMSAoJWQpXFxuXCIsIHdpZHRoLCBwYXRjaFNpemUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVHJ5IHVzaW5nIFdpZHRoID0gJWRcXG5cIiwgcmVjb21tZW5kZWRXaWR0aCk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKChkZXB0aCAtIDEpICUgKHBhdGNoU2l6ZSAtIDEpICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlY29tbWVuZGVkRGVwdGggPSAoKGRlcHRoIC0gMSArIHBhdGNoU2l6ZSAtIDEpIC8gKHBhdGNoU2l6ZSAtIDEpKSAqIChwYXRjaFNpemUgLSAxKSArIDE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEZXB0aCBtaW51cyAxICglZCkgbXVzdCBiZSBkaXZpc2libGUgYnkgcGF0Y2hTaXplIG1pbnVzIDEgKCVkKVxcblwiLCBkZXB0aCwgcGF0Y2hTaXplKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRyeSB1c2luZyBXaWR0aCA9ICVkXFxuXCIsIHJlY29tbWVuZGVkRGVwdGgpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYXRjaFNpemUgPCAzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGUgbWluaW11bSBwYXRjaCBzaXplIGlzIDMgKCVkKVxcblwiLCBwYXRjaFNpemUpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAocGF0Y2hTaXplICUgMiA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUGF0Y2ggc2l6ZSBtdXN0IGJlIGFuIG9kZCBudW1iZXIgKCVkKVxcblwiLCBwYXRjaFNpemUpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2J1aWxkTG9kc0FuZEluZGljZXMoekZhciwgcGF0Y2hTaXplLCBudW1QYXRjaGVzWCwgbnVtUGF0Y2hlc1opO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRaRmFyKHpGYXI6IGludCkge1xyXG4gICAgICAgIHRoaXMuX2xvZE1hbmFnZXIuc2V0WkZhcih6RmFyKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfYnVpbGRMb2RzQW5kSW5kaWNlcyh6RmFyOiBpbnQsIHBhdGNoU2l6ZTogaW50LCBudW1QYXRjaGVzWDogaW50LCBudW1QYXRjaGVzWjogaW50KSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2xvZE1hbmFnZXIgPSBuZXcgTG9kTWFuYWdlcih6RmFyLCBwYXRjaFNpemUsIG51bVBhdGNoZXNYLCBudW1QYXRjaGVzWik7XHJcbiAgICAgICAgdGhpcy5fbG9kSW5mbyA9IG5ldyBBcnJheSh0aGlzLl9sb2RNYW5hZ2VyLm1heExPRCArIDEpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xvZEluZm8ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5fbG9kSW5mb1tpXSA9IG5ldyBMb2RJbmZvKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbnVtSW5kaWNlcyA9IHRoaXMuX2NhbGNOdW1JbmRpY2VzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2luZGljZXMgPSBuZXcgVWludDMyQXJyYXkobnVtSW5kaWNlcyk7XHJcblxyXG4gICAgICAgIG51bUluZGljZXMgPSB0aGlzLl9pbml0SW5kaWNlcyh0aGlzLl9pbmRpY2VzKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiRmluYWwgbnVtYmVyIG9mIGluZGljZXMgJWRcXG5cIiwgbnVtSW5kaWNlcyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgX2NhbGNOdW1JbmRpY2VzKCk6IGludCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IG51bVF1YWRzID0gKHRoaXMucGF0Y2hTaXplIC0gMSkgKiAodGhpcy5wYXRjaFNpemUgLSAxKTtcclxuICAgICAgICBsZXQgbnVtSW5kaWNlcyA9IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heFBlcm11dGF0aW9uc1BlckxldmVsID0gMTY7IC8vIHRydWUvZmFsc2UgZm9yIGVhY2ggb2YgdGhlIGZvdXIgc2lkZXNcclxuICAgICAgICBjb25zdCBpbmRpY2VzUGVyUXVhZCA9IDY7ICAgICAgICAgICAvLyB0d28gdHJpYW5nbGVzXHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZCA9IDA7IGxvZCA8PSB0aGlzLm1heExPRDsgbG9kKyspIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxPRCAlZDogbnVtIHF1YWRzICVkXFxuXCIsIGxvZCwgbnVtUXVhZHMpO1xyXG4gICAgICAgICAgICBudW1JbmRpY2VzICs9IG51bVF1YWRzICogaW5kaWNlc1BlclF1YWQgKiBtYXhQZXJtdXRhdGlvbnNQZXJMZXZlbDtcclxuICAgICAgICAgICAgbnVtUXVhZHMgLz0gNDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJJbml0aWFsIG51bWJlciBvZiBpbmRpY2VzICVkXFxuXCIsIG51bUluZGljZXMpO1xyXG4gICAgICAgIHJldHVybiBudW1JbmRpY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRJbmRpY2VzKGluZGljZXM6IFVpbnQzMkFycmF5KTogaW50IHtcclxuXHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kID0gMDsgbG9kIDw9IHRoaXMubWF4TE9EOyBsb2QrKykge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiKioqIEluaXQgaW5kaWNlcyBsb2QgJWQgKioqXFxuXCIsIGxvZCk7XHJcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5faW5pdEluZGljZXNMT0QoaW5kZXgsIGluZGljZXMsIGxvZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEluZGljZXNMT0QoaW5kZXg6IGludCwgaW5kaWNlczogVWludDMyQXJyYXksIGxvZDogaW50KTogaW50IHtcclxuXHJcbiAgICAgICAgbGV0IHRvdGFsSW5kaWNlc0ZvckxPRCA9IDA7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5fbG9kSW5mb1tsb2RdLmluZm9bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uc3RhcnQgPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9pbml0SW5kaWNlc0xPRFNpbmdsZShpbmRleCwgaW5kaWNlcywgbG9kLCBsb2QgKyBsLCBsb2QgKyByLCBsb2QgKyB0LCBsb2QgKyBiKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmNvdW50ID0gaW5kZXggLSBpbmZvLnN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEluZGljZXNGb3JMT0QgKz0gaW5mby5jb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiVG90YWwgaW5kaWNlcyBmb3IgTE9EOiAlZFxcblwiLCB0b3RhbEluZGljZXNGb3JMT0QpO1xyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0SW5kaWNlc0xPRFNpbmdsZShpbmRleDogaW50LCBpbmRpY2VzOiBVaW50MzJBcnJheSwgbG9kQ29yZTogaW50LCBsb2RMZWZ0OiBpbnQsIGxvZFJpZ2h0OiBpbnQsIGxvZFRvcDogaW50LCBsb2RCb3R0b206IGludCk6IGludCB7XHJcblxyXG4gICAgICAgIGNvbnN0IHdpZHRoICAgPSB0aGlzLnBhdGNoU2l6ZTtcclxuICAgICAgICBjb25zdCBmYW5TdGVwID0gTWF0aC5wb3coMiwgbG9kQ29yZSArIDEpOyAgICAgIC8vIGxvZCA9IDAgLS0+IDIsIGxvZCA9IDEgLS0+IDQsIGxvZCA9IDIgLS0+IDgsIGV0Y1xyXG4gICAgICAgIGNvbnN0IGVuZFBvcyAgPSB0aGlzLnBhdGNoU2l6ZSAtIDEgLSBmYW5TdGVwOyAgLy8gcGF0Y2ggc2l6ZSA1LCBmYW4gc3RlcCAyIC0tPiBFbmRQb3MgPSAyOyBwYXRjaCBzaXplIDksIGZhbiBzdGVwIDIgLS0+IEVuZFBvcyA9IDZcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDAgOyB6IDw9IGVuZFBvcyA7IHogKz0gZmFuU3RlcCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMCA7IHggPD0gZW5kUG9zIDsgeCArPSBmYW5TdGVwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsTGVmdCAgID0geCA9PSAwICAgICAgPyBsb2RMZWZ0ICAgOiBsb2RDb3JlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbFJpZ2h0ICA9IHggPT0gZW5kUG9zID8gbG9kUmlnaHQgIDogbG9kQ29yZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxCb3R0b20gPSB6ID09IDAgICAgICA/IGxvZEJvdHRvbSA6IGxvZENvcmU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsVG9wICAgID0geiA9PSBlbmRQb3MgPyBsb2RUb3AgICAgOiBsb2RDb3JlO1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9jcmVhdGVUcmlhbmdsZUZhbihpbmRleCwgaW5kaWNlcywgbG9kQ29yZSwgbExlZnQsIGxSaWdodCwgbFRvcCwgbEJvdHRvbSwgeCwgeiwgd2lkdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jcmVhdGVUcmlhbmdsZUZhbihpbmRleDogaW50LCBpbmRpY2VzOiBVaW50MzJBcnJheSwgbG9kQ29yZTogaW50LCBsb2RMZWZ0OiBpbnQsIGxvZFJpZ2h0OiBpbnQsIGxvZFRvcDogaW50LCBsb2RCb3R0b206IGludCwgeDogaW50LCB6OiBpbnQsIHdpZHRoOiBpbnQpOiB1bnNpZ25lZF9pbnQge1xyXG5cclxuICAgICAgICBjb25zdCBzdGVwTGVmdCAgID0gTWF0aC5wb3coMiwgbG9kTGVmdCk7IC8vIGJlY2F1c2UgTE9EIHN0YXJ0cyBhdCB6ZXJvLi4uXHJcbiAgICAgICAgY29uc3Qgc3RlcFJpZ2h0ICA9IE1hdGgucG93KDIsIGxvZFJpZ2h0KTtcclxuICAgICAgICBjb25zdCBzdGVwVG9wICAgID0gTWF0aC5wb3coMiwgbG9kVG9wKTtcclxuICAgICAgICBjb25zdCBzdGVwQm90dG9tID0gTWF0aC5wb3coMiwgbG9kQm90dG9tKTtcclxuICAgICAgICBjb25zdCBzdGVwQ2VudGVyID0gTWF0aC5wb3coMiwgbG9kQ29yZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGluZGV4Q2VudGVyID0gKHogKyBzdGVwQ2VudGVyKSAqIHdpZHRoICsgeCArIHN0ZXBDZW50ZXI7XHJcblxyXG4gICAgICAgIC8vIGZpcnN0IHVwXHJcbiAgICAgICAgbGV0IGluZGV4VGVtcDEgPSB6ICogd2lkdGggKyB4O1xyXG4gICAgICAgIGxldCBpbmRleFRlbXAyID0gKHogKyBzdGVwTGVmdCkgKiB3aWR0aCArIHg7XHJcblxyXG4gICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuXHJcbiAgICAgICAgLy8gc2Vjb25kIHVwXHJcbiAgICAgICAgaWYgKGxvZExlZnQgPT0gbG9kQ29yZSkge1xyXG4gICAgICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMiArPSBzdGVwTGVmdCAqIHdpZHRoO1xyXG5cclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlyc3QgcmlnaHRcclxuICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICBpbmRleFRlbXAyICs9IHN0ZXBUb3A7XHJcblxyXG4gICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuXHJcbiAgICAgICAgLy8gc2Vjb25kIHJpZ2h0XHJcbiAgICAgICAgaWYgKGxvZFRvcCA9PT0gbG9kQ29yZSkge1xyXG4gICAgICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMiArPSBzdGVwVG9wO1xyXG5cclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlyc3QgZG93blxyXG4gICAgICAgIGluZGV4VGVtcDEgPSBpbmRleFRlbXAyO1xyXG4gICAgICAgIGluZGV4VGVtcDIgLT0gc3RlcFJpZ2h0ICogd2lkdGg7XHJcblxyXG4gICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuXHJcbiAgICAgICAgLy8gc2Vjb25kIGRvd25cclxuICAgICAgICBpZiAobG9kUmlnaHQgPT09IGxvZENvcmUpIHtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMSA9IGluZGV4VGVtcDI7XHJcbiAgICAgICAgICAgIGluZGV4VGVtcDIgLT0gc3RlcFJpZ2h0ICogd2lkdGg7XHJcblxyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2FkZFRyaWFuZ2xlKGluZGV4LCBpbmRpY2VzLCBpbmRleENlbnRlciwgaW5kZXhUZW1wMSwgaW5kZXhUZW1wMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaXJzdCBsZWZ0XHJcbiAgICAgICAgaW5kZXhUZW1wMSA9IGluZGV4VGVtcDI7XHJcbiAgICAgICAgaW5kZXhUZW1wMiAtPSBzdGVwQm90dG9tO1xyXG5cclxuICAgICAgICBpbmRleCA9IHRoaXMuX2FkZFRyaWFuZ2xlKGluZGV4LCBpbmRpY2VzLCBpbmRleENlbnRlciwgaW5kZXhUZW1wMSwgaW5kZXhUZW1wMik7XHJcblxyXG4gICAgICAgIC8vIHNlY29uZCBsZWZ0XHJcbiAgICAgICAgaWYgKGxvZEJvdHRvbSA9PT0gbG9kQ29yZSkge1xyXG4gICAgICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMiAtPSBzdGVwQm90dG9tO1xyXG5cclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2FkZFRyaWFuZ2xlKGluZGV4OiB1bnNpZ25lZF9pbnQsIGluZGljZXM6IFVpbnQzMkFycmF5LCB2MTogdW5zaWduZWRfaW50LCB2MjogdW5zaWduZWRfaW50LCB2MzogdW5zaWduZWRfaW50KSB7XHJcbiAgICAgICAgaW5kaWNlc1tpbmRleCsrXSA9IHYxO1xyXG4gICAgICAgIGluZGljZXNbaW5kZXgrK10gPSB2MjtcclxuICAgICAgICBpbmRpY2VzW2luZGV4KytdID0gdjM7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KCkge1xyXG4gICAgICAgIC8vIFRPRE9cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR3JpZEJ1aWxkZXI7IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgUmVmT2JqZWN0IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgSVJlYWRvbmx5Q29vcmRzQnVmZmVyLCBDb29yZHNCdWZmZXIgfSBmcm9tIFwiLi9Db29yZHNCdWZmZXIubWpzXCI7XHJcbmltcG9ydCBBYnNQYXRjaGVkSGVpZ2h0TWFwLCB7IHR5cGUgSVJlYWRvbmx5QWJzUGF0Y2hlZEhlaWdodE1hcCB9IGZyb20gXCIuL0Fic1BhdGNoZWRIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCBHcmlkQnVpbGRlciwgeyBJR3JpZFBhdGNoZWQgfSBmcm9tIFwiLi9HcmlkQnVpbGRlci5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyb21pcEdyaWRXaXRoSGVpZ2h0IGV4dGVuZHMgSUdyaWRQYXRjaGVkIHtcclxuICAgIHJlYWRvbmx5IG1heEhlaWdodDogZmxvYXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9taXBHcmlkQnVpbGRlciBleHRlbmRzIEdyaWRCdWlsZGVyIHtcclxuXHJcbiAgICBwcml2YXRlIF92ZXJ0aWNlczogQ29vcmRzQnVmZmVyO1xyXG5cclxuICAgIHByb3RlY3RlZCBfaGVpZ2h0TWFwOiBBYnNQYXRjaGVkSGVpZ2h0TWFwPGFueT47XHJcblxyXG4gICAgcHVibGljIGdldCBwYXRjaFZlcnRpY2VzKCk6IElSZWFkb25seUNvb3Jkc0J1ZmZlciB7IHJldHVybiB0aGlzLl92ZXJ0aWNlczsgfVxyXG4gICAgcHVibGljIGdldCBoZWlnaHRNYXAoKTogSVJlYWRvbmx5QWJzUGF0Y2hlZEhlaWdodE1hcCB7IHJldHVybiB0aGlzLl9oZWlnaHRNYXA7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihoZWlnaHRNYXA6IFJlZk9iamVjdDxBYnNQYXRjaGVkSGVpZ2h0TWFwPGFueT4+LCB6RmFyOiBmbG9hdCkge1xyXG5cclxuICAgICAgICBzdXBlcihoZWlnaHRNYXAsIHpGYXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcCA9IGhlaWdodE1hcDtcclxuICAgICAgICB0aGlzLl92ZXJ0aWNlcyAgPSBuZXcgQ29vcmRzQnVmZmVyKHRoaXMuX2hlaWdodE1hcCwgdGhpcy5faGVpZ2h0TWFwLnBhdGNoU2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fdmVydGljZXMuaW5pdCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHZW9taXBHcmlkQnVpbGRlcjsiLCJpbXBvcnQgdHlwZSB7IElWZWN0b3IzLCBSZWZPYmplY3QsIGZsb2F0LCBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgR2VvbWlwR3JpZEJ1aWxkZXIgZnJvbSBcIi4vR2VvbWlwR3JpZEJ1aWxkZXIubWpzXCI7XHJcbmltcG9ydCB7IElQYXRjaExvZCwgZGVmYXVsdFBhdGNoTG9kIH0gZnJvbSBcIi4vTG9kTWFuYWdlci5tanNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFBhdGNoSW5pdEZ1bmN0aW9uID0gKGJhc2VJbmRleDogaW50LCBiYXNlVmVydGV4OiBpbnQsIGNvdW50OiBpbnQsIHBhdGNoWDogaW50LCBwYXRjaFo6IGludCwgbWluWDogaW50LCBtaW5aOiBpbnQsIHNpemU6IGludCwgbG9kSW5mbzogUmVhZG9ubHk8SVBhdGNoTG9kPikgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgUmVuZGVyUHJlcGFyZXJQYXRjaEZ1bmN0aW9uID0gKHZpc2libGU6IGJvb2xlYW4sIGJhc2VJbmRleDogaW50LCBiYXNlVmVydGV4OiBpbnQsIGNvdW50OiBpbnQsIHBhdGNoWDogaW50LCBwYXRjaFo6IGludCwgbWluWDogaW50LCBtaW5aOiBpbnQsIHNpemU6IGludCwgbG9kSW5mbzogUmVhZG9ubHk8SVBhdGNoTG9kPikgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgRnJ1c3R1bVNwaGVyZVRlc3RGdW5jdGlvbiA9IChsb2NhbFg6IGZsb2F0LCBsb2NhbFk6IGZsb2F0LCBsb2NhbFo6IGZsb2F0LCByYWRpdXM6IGZsb2F0KSA9PiBib29sZWFuO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR3JpZFBhdGNoSW5pdGlhbGl6ZXIge1xyXG4gICAgaW5pdFBhdGNoOiBQYXRjaEluaXRGdW5jdGlvbixcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR3JpZFBhdGNoUmVuZGVyUHJlcGFyZXIge1xyXG4gICAgcHJlcGFyZVBhdGNoOiBSZW5kZXJQcmVwYXJlclBhdGNoRnVuY3Rpb24sXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUZydXN0dW0ge1xyXG4gICAgY29udGFpbnNTcGhlcmU6IEZydXN0dW1TcGhlcmVUZXN0RnVuY3Rpb24sXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9taXBHcmlkUmVuZGVyUHJlcGFyZXIgZXh0ZW5kcyBHZW9taXBHcmlkQnVpbGRlciB7XHJcblxyXG4gICAgcHVibGljIGluaXRQYXRjaGVzKGluaXRpYWxpemVyOiBJR3JpZFBhdGNoSW5pdGlhbGl6ZXIpIHtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBwYXRjaFogPSAwOyBwYXRjaFogPCB0aGlzLm51bVBhdGNoZXNaOyBwYXRjaForKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcGF0Y2hYID0gMDsgcGF0Y2hYIDwgdGhpcy5udW1QYXRjaGVzWDsgcGF0Y2hYKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5YID0gcGF0Y2hYICogKHRoaXMucGF0Y2hTaXplIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5aID0gcGF0Y2haICogKHRoaXMucGF0Y2hTaXplIC0gMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5mbyAgICAgICA9IHRoaXMubG9kSW5mb1swXS5pbmZvWzBdWzBdWzBdWzBdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUluZGV4ICA9IGluZm8uc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlVmVydGV4ID0gbWluWiAqIHRoaXMud2lkdGggKyBtaW5YO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplci5pbml0UGF0Y2goYmFzZUluZGV4LCBiYXNlVmVydGV4LCBpbmZvLmNvdW50LCBwYXRjaFgsIHBhdGNoWiwgbWluWCwgbWluWiwgdGhpcy5wYXRjaFNpemUsIGRlZmF1bHRQYXRjaExvZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBwcmludExvZE1hcCgpIHtcclxuICAgICAgICB0aGlzLmxvZE1hbmFnZXIucHJpbnRMb2RNYXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlTG9kcyhsb2NhbENhbWVyYVBvczogUmVmT2JqZWN0PElWZWN0b3IzPiwgdXNlWVBvczogYm9vbGVhbiA9IHRydWUsIGNlbnRlcjogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmxvZE1hbmFnZXIudXBkYXRlKGxvY2FsQ2FtZXJhUG9zLCB0aGlzLmhlaWdodE1hcCwgdXNlWVBvcywgY2VudGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZWFjaFBhdGNoZXMocmVuZGVyUHJlcGFyZXI6IElHcmlkUGF0Y2hSZW5kZXJQcmVwYXJlciwgZnJ1c3R1bT86IElGcnVzdHVtKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoU2l6ZU5vcm0gPSB0aGlzLnBhdGNoU2l6ZSAtIDE7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHBhdGNoWiA9IDA7IHBhdGNoWiA8IHRoaXMubnVtUGF0Y2hlc1o7IHBhdGNoWisrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtaW5aID0gcGF0Y2haICogcGF0Y2hTaXplTm9ybTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHBhdGNoWCA9IDA7IHBhdGNoWCA8IHRoaXMubnVtUGF0Y2hlc1g7IHBhdGNoWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluWCA9IHBhdGNoWCAqIHBhdGNoU2l6ZU5vcm07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlzaWJsZSA9ICEhZnJ1c3R1bSAmJiB0aGlzLmlzUGF0Y2hJbnNpZGVWaWV3RnJ1c3R1bUJ5U3BoZXJlKHBhdGNoWCwgcGF0Y2haLCBmcnVzdHVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbG9kID0gdGhpcy5sb2RNYW5hZ2VyLmdldFBhdGNoTG9kKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSB0aGlzLmxvZEluZm9bcGxvZC5jb3JlXS5pbmZvW3Bsb2QubGVmdF1bcGxvZC5yaWdodF1bcGxvZC50b3BdW3Bsb2QuYm90dG9tXTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlSW5kZXggID0gaW5mby5zdGFydDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VWZXJ0ZXggPSBtaW5aICogdGhpcy53aWR0aCArIG1pblg7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJlbmRlclByZXBhcmVyLnByZXBhcmVQYXRjaCh2aXNpYmxlLCBiYXNlSW5kZXgsIGJhc2VWZXJ0ZXgsIGluZm8uY291bnQsIHBhdGNoWCwgcGF0Y2haLCBtaW5YLCBtaW5aLCB0aGlzLnBhdGNoU2l6ZSwgcGxvZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzUGF0Y2hJbnNpZGVWaWV3RnJ1c3R1bUJ5U3BoZXJlKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50LCBmcnVzdHVtOiBJRnJ1c3R1bSk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaE1pbkhlaWdodCA9IHRoaXMuaGVpZ2h0TWFwLmdldFBhdGNoTWluKHBhdGNoQmFzZVgsIHBhdGNoQmFzZVopO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoTWF4SGVpZ2h0ID0gdGhpcy5oZWlnaHRNYXAuZ2V0UGF0Y2hNYXgocGF0Y2hCYXNlWCwgcGF0Y2hCYXNlWik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcGF0Y2hSYWRpdXNCeVNpemUgICA9IHRoaXMucGF0Y2hTaXplIC8gMjtcclxuICAgICAgICBjb25zdCBwYXRjaFJlZGl1c0J5SGVpZ2h0ID0gKHBhdGNoTWF4SGVpZ2h0IC0gcGF0Y2hNaW5IZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hDZW50ZXJYICAgPSAocGF0Y2hCYXNlWCAqIHRoaXMucGF0Y2hTaXplKSArIHBhdGNoUmFkaXVzQnlTaXplO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoQ2VudGVyWSAgID0gKHBhdGNoTWF4SGVpZ2h0ICsgcGF0Y2hNaW5IZWlnaHQpIC8gMjtcclxuICAgICAgICBjb25zdCBwYXRjaENlbnRlclogICA9IChwYXRjaEJhc2VaICogdGhpcy5wYXRjaFNpemUpICsgcGF0Y2hSYWRpdXNCeVNpemU7XHJcbiAgICAgICAgY29uc3QgcmFkaXVzICAgICAgICAgPSAocGF0Y2hSYWRpdXNCeVNpemUgPiBwYXRjaFJlZGl1c0J5SGVpZ2h0ID8gcGF0Y2hSYWRpdXNCeVNpemUgOiBwYXRjaFJlZGl1c0J5SGVpZ2h0KSAqIE1hdGguU1FSVDI7XHJcblxyXG4gICAgICAgIC8vIGNlbnRlciB0aGUgcGF0Y2hlcyByZWxhdGl2ZSB0byB0aGUgZW50aXR5IGNlbnRlclxyXG4gICAgICAgIGNvbnN0IHBhdGNoQ2VudGVyZWRYID0gKC10aGlzLndpZHRoIC8gMikgKyBwYXRjaENlbnRlclg7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hDZW50ZXJlZFogPSAoLXRoaXMuZGVwdGggLyAyKSArIHBhdGNoQ2VudGVyWjtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZydXN0dW0uY29udGFpbnNTcGhlcmUocGF0Y2hDZW50ZXJlZFgsIHBhdGNoQ2VudGVyWSwgcGF0Y2hDZW50ZXJlZFosIHJhZGl1cyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdlb21pcEdyaWRSZW5kZXJQcmVwYXJlciIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwRmlsZUlPLm1qc1wiO1xyXG5pbXBvcnQgR2VvbWlwR3JpZFJlbmRlclByZXBhcmVyIGZyb20gXCIuL0dlb21pcEdyaWRSZW5kZXJQcmVwYXJlci5tanNcIjtcclxuaW1wb3J0IEhlaWdodE1hcCBmcm9tIFwiLi9IZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB7IElab25lIH0gZnJvbSBcIi4vSVpvbmUubWpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2VvbWlwR3JpZCBleHRlbmRzIEdlb21pcEdyaWRSZW5kZXJQcmVwYXJlciB7XHJcblxyXG4gICAgcHVibGljIHNldEhlaWdodCh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnNldCh4LCB6LCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFwcGVuZFRvSGVpZ2h0KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAuYXBwZW5kKHgsIHosIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbXVsdGlwbHlUb0hlaWdodCh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0LCBkZWZhdWx0SGVpZ2h0OiBmbG9hdCA9IDApIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAubXVsdGlwbHkoeCwgeiwgdmFsdWUsIGRlZmF1bHRIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzbW9vdGhIZWlnaHRzWm9uZSh6b25lOiBJWm9uZSwgbnA6IGZsb2F0LCByYWRpdXM6IGZsb2F0KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnNtb290aFpvbmUoem9uZSwgbnAsIHJhZGl1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWRIZWlnaHRNYXBGcm9tRmlsZShidWZmZXI6IEFycmF5QnVmZmVyLCBvcHRpb25zPzogSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zLCBucDogZmxvYXQgPSAtMSwgcmFkaXVzOiBpbnQgPSAwKSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gYXdhaXQgdGhpcy5faGVpZ2h0TWFwLmZyb21GaWxlKGJ1ZmZlciwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnNtb290aChucCwgcmFkaXVzKTtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAucmVjYWxjdWxhdGVNaW5NYXgodGhpcy5faGVpZ2h0TWFwKTtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAucmVjYWxjdWxhdGVBQUJCKCk7XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9hZEhlaWdodE1hcEZyb21JbWcoaW1nOiBJbWFnZUJpdG1hcCwgbnA6IGZsb2F0ID0gLTEsIHJhZGl1czogaW50ID0gMCkge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5mcm9tSW1hZ2UoaW1nKTtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAuc21vb3RoKG5wLCByYWRpdXMpO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5yZWNhbGN1bGF0ZU1pbk1heCh0aGlzLl9oZWlnaHRNYXApO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5yZWNhbGN1bGF0ZUFBQkIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbm9ybWFsaXplSGVpZ2h0TWFwKG1heEhlaWdodD86IGZsb2F0KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWF4SGVpZ2h0ID8/PSB0aGlzLl9oZWlnaHRNYXAubWF4SGVpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAubm9ybWFsaXplKG1heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldE1heEhlaWdodChtYXhIZWlnaHQ6IGZsb2F0KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnNldE1heEhlaWdodChtYXhIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhcHBlbmRIZWlnaHRNYXAoXHJcbiAgICAgICAgaGVpZ2h0TWFwOiBIZWlnaHRNYXAsXHJcbiAgICAgICAgdmFsdWU6IGZsb2F0LFxyXG4gICAgICAgIHpvbmU6IElab25lLFxyXG4gICAgICAgIG1pbkhlaWdodDogZmxvYXQgfCBudWxsID0gbnVsbCxcclxuICAgICAgICBtYXhIZWlnaHQ6IGZsb2F0IHwgbnVsbCA9IG51bGxcclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5jb21iaW5lSGVpZ2h0cygnKycsIGhlaWdodE1hcCwgdmFsdWUsIHpvbmUsIDAsIG1pbkhlaWdodCwgbWF4SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjYWxjdWxhdGVNaW5NYXgoem9uZTogSVpvbmUsIGFhYmI6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5yZWNhbGN1bGF0ZU1pbk1heCh6b25lKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYWFiYikge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWlnaHRNYXAucmVjYWxjdWxhdGVBQUJCKCk7XHJcbiAgICAgICAgfSBcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR2VvbWlwR3JpZCIsImltcG9ydCBHZW9taXBHcmlkIGZyb20gXCIuL0dlb21pcEdyaWQubWpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzZVRlcnJhaW4gZXh0ZW5kcyBHZW9taXBHcmlkIHtcclxuICAgIHB1YmxpYyBnZXQgbWF4SGVpZ2h0KCkgeyByZXR1cm4gdGhpcy5oZWlnaHRNYXAubWF4SGVpZ2h0OyB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJhc2VUZXJyYWluOyIsImV4cG9ydCBpbnRlcmZhY2UgSVBhdGNoIHtcclxuICAgIHJlYWRvbmx5IGluZGV4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtaW5YOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtaW5aOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBzaXplOiBudW1iZXI7XHJcbiAgICByZWFkb25seSB4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSB6OiBudW1iZXI7XHJcbn0iLCJpbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBJUGF0Y2ggfSBmcm9tIFwiLi9JUGF0Y2gubWpzXCI7XHJcbmltcG9ydCB7IElTaW5nbGVMb2RJbmZvIH0gZnJvbSBcIi4vTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoTG9kQmFzZSB9IGZyb20gXCIuL0xvZE1hbmFnZXIubWpzXCI7XHJcbmltcG9ydCBCYXNlVGVycmFpbiBmcm9tIFwiLi9UZXJyYWluLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJSW5zdGFuY2luZ09iamVjdCB7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFRPYmplY3QgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdCwgVERhdGEgZXh0ZW5kcyBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXk+IHtcclxuICAgIHZlcnRleEJhc2VJbmRleDogaW50O1xyXG4gICAgdmVydGV4Q291bnQ6IGludDtcclxuICAgIGRhdGE6IFREYXRhO1xyXG4gICAgY291bnQ6IGludDtcclxuICAgIG9iamVjdDogVE9iamVjdCB8IG51bGw7XHJcbiAgICBoYXNDaGFuZ2VzOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBUQnVsZGVyPFRPYmplY3QgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdCwgVERhdGEgZXh0ZW5kcyBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXk+ID0gKGxvZEluZm86IElQYXRjaExvZEJhc2UsIHByaW1pdGl2ZUluZm86IElTaW5nbGVMb2RJbmZvLCBpbnN0YW5jaW5nRGF0YTogVERhdGEsIG1heEluc3RhbmNpbmdDb3VudDogaW50KSA9PiBUT2JqZWN0IHwgbnVsbDtcclxuZXhwb3J0IHR5cGUgVERlc3RydWN0b3I8VE9iamVjdCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0PiA9IChvYmplY3Q6IFRPYmplY3QpID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIFRTZWxlY3RvcjxUT2JqZWN0IGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3QsIFREYXRhIGV4dGVuZHMgVWludDE2QXJyYXkgfCBVaW50OEFycmF5PiA9IChpdGVtOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VE9iamVjdCwgVERhdGE+KSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGF0Y2hlc0luc3RhbmNpbmc8VE9iamVjdCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0LCBURGF0YSBleHRlbmRzIFVpbnQxNkFycmF5IHwgVWludDhBcnJheT4ge1xyXG5cclxuICAgIGJ1aWxkRnJvbVRlcnJhaW4odGVycmFpbjogQmFzZVRlcnJhaW4sIG9iamVjdEJ1aWxkZXI/OiBUQnVsZGVyPFRPYmplY3QsIFREYXRhPik6IHZvaWQ7XHJcblxyXG4gICAgZm9yRWFjaChmbjogVFNlbGVjdG9yPFRPYmplY3QsIFREYXRhPik6IHZvaWQ7XHJcblxyXG4gICAgZGVzdHJveShkZXN0cnVjdG9yOiBURGVzdHJ1Y3RvcjxUT2JqZWN0Pik6IHZvaWQ7XHJcblxyXG4gICAgZ2V0KGxvZDogSVBhdGNoTG9kQmFzZSk6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxUT2JqZWN0LCBURGF0YT47XHJcblxyXG4gICAgaW5jcmVtZW50KGxvZDogSVBhdGNoTG9kQmFzZSwgcGF0Y2g6IElQYXRjaCk6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxUT2JqZWN0LCBURGF0YT47XHJcblxyXG4gICAgemVyb0FsbCgpOiB2b2lkO1xyXG59IiwiaW1wb3J0IHsgSVBhdGNoZXNJbnN0YW5jaW5nIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vSVBhdGNoZXNJbnN0YW5jaW5nLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nPFREYXRhIGV4dGVuZHMgVWludDE2QXJyYXkgfCBVaW50OEFycmF5PiBleHRlbmRzIElQYXRjaGVzSW5zdGFuY2luZzxwY3guTWVzaEluc3RhbmNlLCBURGF0YT4ge1xyXG5cclxuICAgIGJ1ZmZlclR5cGU6IFVpbnQxNkFycmF5Q29uc3RydWN0b3IgfCBVaW50OEFycmF5Q29uc3RydWN0b3I7XHJcblxyXG4gICAgaXRlbUJ1ZmZlclNpemU6IG51bWJlcjtcclxuICAgIG1lc2hJbnN0YW5jZUNvdW50OiBudW1iZXI7XHJcbiAgICBcclxuICAgIGFwcGVuZE1lc2hJbnN0YW5jZXMoYXJyOiBwY3guTWVzaEluc3RhbmNlW10sIG9mZnNldD86IG51bWJlcik6IG51bWJlcjtcclxuXHJcbiAgICBiZWdpbihjYXN0U2hhZG93PzogYm9vbGVhbiwgcmVjZWl2ZVNoYWRvdz86IGJvb2xlYW4pOiB2b2lkO1xyXG5cclxuICAgIGVuZCgpOiB2b2lkO1xyXG59IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBkZWZhdWx0UGF0Y2hMb2QsIElQYXRjaExvZCwgSVBhdGNoTG9kQmFzZSB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0xvZE1hbmFnZXIubWpzXCI7XHJcbmltcG9ydCBCYXNlVGVycmFpbiBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9UZXJyYWluLm1qc1wiO1xyXG5pbXBvcnQgeyBJU2luZ2xlTG9kSW5mbyB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCB7IElHcmlkUGF0Y2hJbml0aWFsaXplciB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0dlb21pcEdyaWRSZW5kZXJQcmVwYXJlci5tanNcIjtcclxuaW1wb3J0IHsgSVpvbmUgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9JWm9uZS5tanNcIjtcclxuaW1wb3J0IHsgQ3VzdG9tTWVzaEluc3RhbmNlIH0gZnJvbSBcIi4uL0VuZ2luZUV4dGVuc2lvbnMvUmVuZGVyZXIubWpzXCI7XHJcbmltcG9ydCB7IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcgfSBmcm9tIFwiLi9JVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nLm1qc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgVEZvckVhY2hQYXRjaENhbGxiYWNrID0gKHBhdGNoSW5kZXg6IGludCwgeDogaW50LCB6OiBpbnQpID0+IHZvaWQgfCBib29sZWFuO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRlcnJhaW5QYXRjaEJ1ZmZlckJhc2ljIHtcclxuXHJcbiAgICByZWFkb25seSBpbmRleDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgeDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgejogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbWluWDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbWluWjogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyB2aXNpYmxlOiBib29sZWFuO1xyXG5cclxuICAgIHB1YmxpYyBoYXNoOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgbG9kOiBJUGF0Y2hMb2Q7XHJcbiAgICBwdWJsaWMgaW5kaWNlc0Jhc2VJbmRleDogbnVtYmVyO1xyXG4gICAgcHVibGljIGluZGljZXNCYXNlVmVydGV4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgaW5kaWNlc0NvdW50OiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGRlcGVuZGVuY2VzVXBkYXRlZDogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBoZWlnaHRzVXBkYXRlZDogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBoZWlnaHRzVXBkYXRlZFRoaXNGcmFtZTogYm9vbGVhbjtcclxuXHJcbiAgICBwdWJsaWMgbGFzdENoYW5nZVRpbWU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBsYXN0Q2hhbmdlQXR0YWNoVGltZTogbnVtYmVyO1xyXG4gICAgcHVibGljIGxhc3RDaGFuZ2VIZWlnaHRzVGltZTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGluZGV4OiBudW1iZXIsIHg6IG51bWJlciwgejogbnVtYmVyLCBtaW5YOiBudW1iZXIsIG1pblo6IG51bWJlciwgc2l6ZTogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLnggICAgID0geDtcclxuICAgICAgICB0aGlzLnogICAgID0gejtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLm1pblggID0gbWluWDtcclxuICAgICAgICB0aGlzLm1pblogID0gbWluWjtcclxuICAgICAgICB0aGlzLnNpemUgID0gc2l6ZTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmhhc2ggID0gMDtcclxuICAgICAgICB0aGlzLmxvZCA9IGRlZmF1bHRQYXRjaExvZDtcclxuICAgICAgICB0aGlzLmluZGljZXNCYXNlSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMuaW5kaWNlc0Jhc2VWZXJ0ZXggPSAwO1xyXG4gICAgICAgIHRoaXMuaW5kaWNlc0NvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmRlcGVuZGVuY2VzVXBkYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0c1VwZGF0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmhlaWdodHNVcGRhdGVkVGhpc0ZyYW1lID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sYXN0Q2hhbmdlVGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0Q2hhbmdlQXR0YWNoVGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0Q2hhbmdlSGVpZ2h0c1RpbWUgPSAwO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBUZXJyYWluUGF0Y2hlc0Jhc2ljPFxyXG4gICAgVFBhdGNoQnVmZmVyIGV4dGVuZHMgVGVycmFpblBhdGNoQnVmZmVyQmFzaWMgPSBUZXJyYWluUGF0Y2hCdWZmZXJCYXNpYyxcclxuICAgIFRQYXRjaFByaW1pdGl2ZSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4gPSBSZWNvcmQ8c3RyaW5nLCBhbnk+XHJcbj4ge1xyXG4gICAgcHJpdmF0ZSBfaW5pdDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX2FhYmI6IHBjeC5Cb3VuZGluZ0JveDtcclxuICAgIHByaXZhdGUgX3BhdGNoQXZhbGFibGVDb3VudDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfY2hhbmdlc0lkczogbnVtYmVyW107XHJcbiAgICBwcml2YXRlIF91c2VNYXNoZXNCYWc6IGJvb2xlYW47XHJcblxyXG4gICAgcHJvdGVjdGVkIF9lbnRpdHk6IHBjeC5FbnRpdHk7XHJcbiAgICBwcm90ZWN0ZWQgX2FwcDogcGN4LkFwcEJhc2U7XHJcbiAgICBwcm90ZWN0ZWQgX21hdGVyaWFsOiBwY3guU3RhbmRhcmRNYXRlcmlhbDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgX2xhc3RDaGFuZ2VUaW1lOiBudW1iZXI7XHJcbiAgICBwcm90ZWN0ZWQgX2xhc3RDaGFuZ2VBdHRhY2hUaW1lOiBudW1iZXI7XHJcbiAgICBwcm90ZWN0ZWQgX2xhc3RDaGFuZ2VIZWlnaHRzVGltZTogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgX2J1ZmZlckFycmF5OiBUUGF0Y2hCdWZmZXJbXTtcclxuICAgIHByaXZhdGUgX21lc2hJbnN0YW5jZUFycmF5OiBBcnJheTxwY3guTWVzaEluc3RhbmNlIHwgdW5kZWZpbmVkPjtcclxuICAgIHByaXZhdGUgX2N1c3RvbU1lc2hJbnN0YW5jZTogKHBjeC5NZXNoSW5zdGFuY2UgJiBDdXN0b21NZXNoSW5zdGFuY2U8VFBhdGNoUHJpbWl0aXZlPikgfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIF9pbnN0YW5jaW5nOiBJVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nPGFueT4gfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgcHVibGljIGN1c3RvbUZvcndhcmRSZW5kZXJlcjogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHB1YmxpYyByZWFkb25seSB0ZXJyYWluOiBCYXNlVGVycmFpbjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGluc3RhbmNpbmcoKSB7IHJldHVybiB0aGlzLl9pbnN0YW5jaW5nOyB9XHJcblxyXG4gICAgcHVibGljIGdldCBidWZmZXJBcnJheSgpOiBSZWFkb25seTx0eXBlb2YgdGhpcy5fYnVmZmVyQXJyYXk+IHsgcmV0dXJuIHRoaXMuX2J1ZmZlckFycmF5OyB9XHJcbiAgICBwdWJsaWMgZ2V0IG1lc2hJbnN0YW5jZUFycmF5KCk6IFJlYWRvbmx5PHR5cGVvZiB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheT4geyByZXR1cm4gdGhpcy5fbWVzaEluc3RhbmNlQXJyYXk7IH1cclxuICAgIHB1YmxpYyBnZXQgYWFiYigpIHsgcmV0dXJuIHRoaXMuX2FhYmI7IH1cclxuICAgIHB1YmxpYyBnZXQgY3VzdG9tTWVzaEluc3RhbmNlKCkgeyByZXR1cm4gdGhpcy5fY3VzdG9tTWVzaEluc3RhbmNlOyB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGhlaWdodE1hcFRleHR1cmU6IHBjeC5UZXh0dXJlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRlcnJhaW46IEJhc2VUZXJyYWluLCBpbnN0YW5jZXI/OiBJVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nPGFueT4pIHtcclxuICAgICAgICB0aGlzLnRlcnJhaW4gPSB0ZXJyYWluO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRm9yd2FyZFJlbmRlcmVyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fdXNlTWFzaGVzQmFnID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fYnVmZmVyQXJyYXkgPSBuZXcgQXJyYXkodGhpcy50ZXJyYWluLm51bVBhdGNoZXNYICogdGhpcy50ZXJyYWluLm51bVBhdGNoZXNaKTtcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheSA9IG5ldyBBcnJheSh0aGlzLnRlcnJhaW4ubnVtUGF0Y2hlc1ggKiB0aGlzLnRlcnJhaW4ubnVtUGF0Y2hlc1opO1xyXG4gICAgICAgIHRoaXMuX2N1c3RvbU1lc2hJbnN0YW5jZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9wYXRjaEF2YWxhYmxlQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZXNJZHMgPSBbXTtcclxuICAgICAgICB0aGlzLl9hYWJiID0gbmV3IHBjLkJvdW5kaW5nQm94KCk7XHJcbiAgICAgICAgdGhpcy5faW5pdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2luc3RhbmNpbmcgPSBpbnN0YW5jZXI7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBYWJiKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldE1hdGVyaWFsKG1hdGVyaWFsOiBwY3guU3RhbmRhcmRNYXRlcmlhbCkge1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsID0gbWF0ZXJpYWw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEluc3RhbmNpbmcodmFsdWU6IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmc8YW55PiB8IHVuZGVmaW5lZCwgdXBkYXRlTWVzaGVzOiBib29sZWFuID0gdHJ1ZSkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5faW5zdGFuY2luZyA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZGVzdHJveU1lc2hlcygpO1xyXG4gICAgICAgIHRoaXMuX2luc3RhbmNpbmcgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZU1lc2hlcykge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1lc2hlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlQWFiYigpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBoYWxmV2lkdGggPSB0aGlzLnRlcnJhaW4ud2lkdGggLyAyO1xyXG4gICAgICAgIGNvbnN0IGhhbGZEZXB0aCA9IHRoaXMudGVycmFpbi5kZXB0aCAvIDI7XHJcblxyXG4gICAgICAgIHRoaXMuX2FhYmIuc2V0TWluTWF4KFxyXG4gICAgICAgICAgICBuZXcgcGMuVmVjMygtaGFsZldpZHRoLCAwLCAgICAgICAgICAgICAgICAgICAgICAtaGFsZkRlcHRoKSxcclxuICAgICAgICAgICAgbmV3IHBjLlZlYzMoK2hhbGZXaWR0aCwgdGhpcy50ZXJyYWluLm1heEhlaWdodCwgK2hhbGZEZXB0aClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY3VzdG9tTWVzaEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1c3RvbU1lc2hJbnN0YW5jZS5zZXRDdXN0b21BYWJiKHRoaXMuX2FhYmIpO1xyXG4gICAgICAgICAgICB0aGlzLl9jdXN0b21NZXNoSW5zdGFuY2UubWVzaC5hYWJiID0gdGhpcy5fYWFiYjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgbWVzaEluc3RhbmNlIG9mIHRoaXMuX21lc2hJbnN0YW5jZUFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmIChtZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5zZXRDdXN0b21BYWJiKHRoaXMuX2FhYmIpO1xyXG4gICAgICAgICAgICAgICAgbWVzaEluc3RhbmNlLm1lc2guYWFiYiA9IHRoaXMuX2FhYmI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2luZykge1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNpbmcuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLm9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ub2JqZWN0LnNldEN1c3RvbUFhYmIodGhpcy5fYWFiYik7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5vYmplY3QubWVzaC5hYWJiID0gdGhpcy5fYWFiYjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydFVwZGF0ZSgpIHtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9mb3JjZVVwZGF0ZVJlbmRlckNvbXBvbmVudChlbnRpdHk6IHBjeC5FbnRpdHkpIHtcclxuXHJcbiAgICAgICAgbGV0IGFwcGVuZCA9IGZhbHNlOyAvLyBkZXN0cm95IHByZXYgbWVzaEluc3RhbmNlcyBieSBkZWZhdWx0XHJcbiAgICAgICAgbGV0IG1lc2hJbnN0YW5jZXM6IEFycmF5PHBjeC5NZXNoSW5zdGFuY2U+O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3J3YXJkUmVuZGVyZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5fY3VzdG9tTWVzaEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VzZU1hc2hlc0JhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZXMgPSBbdGhpcy5fY3VzdG9tTWVzaEluc3RhbmNlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMuaW5zdGFuY2luZ1xyXG4gICAgICAgICAgICAgICAgPyB0aGlzLmluc3RhbmNpbmcubWVzaEluc3RhbmNlQ291bnRcclxuICAgICAgICAgICAgICAgIDogdGhpcy5fcGF0Y2hBdmFsYWJsZUNvdW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlcyA9IG5ldyBBcnJheTxwY3guTWVzaEluc3RhbmNlPihjb3VudCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2luZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jaW5nLmFwcGVuZE1lc2hJbnN0YW5jZXMobWVzaEluc3RhbmNlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gaWYgaW5zdGFuY2luZyB3YXMgdXNlZCwgdGhlbiB3ZSBkZWxldGUgYWxsIHByZXZpb3VzIGluc3RhbmNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb3IgdXNlIGN1c3RvbSByZW5kZXJlclxyXG4gICAgICAgICAgICAgICAgYXBwZW5kID0gIXRoaXMuX3VzZU1hc2hlc0JhZztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcGF0Y2hJbmRleCA9IDA7IHBhdGNoSW5kZXggPCB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheS5sZW5ndGg7IHBhdGNoSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoTWVzaEluc3RhbmNlID0gdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGNoTWVzaEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZXNbaSsrXSA9IHBhdGNoTWVzaEluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGFuZ2VzSWRzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3VzZU1hc2hlc0JhZyA9ICEhdGhpcy5pbnN0YW5jaW5nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGVudGl0eS5yZW5kZXIpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IGh0dHBzOi8vZ2l0aHViLmNvbS9wbGF5Y2FudmFzL2VuZ2luZS9pc3N1ZXMvNjY4MFxyXG4gICAgICAgICAgICBpZiAoYXBwZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBlbnRpdHkucmVuZGVyLl9tZXNoSW5zdGFuY2VzID0gW107XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVudGl0eS5yZW5kZXIubWVzaEluc3RhbmNlcyA9IG1lc2hJbnN0YW5jZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlbnRpdHkuYWRkQ29tcG9uZW50KCdyZW5kZXInLCB7XHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2VzOiBtZXNoSW5zdGFuY2VzLFxyXG4gICAgICAgICAgICAgICAgY3VsbDogZmFsc2UsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHNoYWRvd3NcclxuICAgICAgICBmb3IgKGNvbnN0IG1lc2hJbnN0YW5jZSBvZiBtZXNoSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5jdWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5yZWNlaXZlU2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIF91cGRhdGVSZW5kZXJDb21wb25lbnQoZW50aXR5OiBwY3guRW50aXR5KSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcndhcmRSZW5kZXJlciB8fFxyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNpbmcgfHxcclxuICAgICAgICAgICAgdGhpcy5fY2hhbmdlc0lkcy5sZW5ndGggPT09IDAgfHxcclxuICAgICAgICAgICAgIWVudGl0eS5lbmFibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2ZvcmNlVXBkYXRlUmVuZGVyQ29tcG9uZW50KGVudGl0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHVwZGF0ZUluZGV4QnVmZmVyKCk6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZUxvZHMoKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVJbmRleEJ1ZmZlcigpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTWVzaGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9mb3JFYWNoKHpvbmU6IElab25lLCBxdWFkOiBpbnQsIG51bVF1YWRYOiBpbnQsIG51bVF1YWRaOiBpbnQsIGNhbGxiYWNrOiBURm9yRWFjaFBhdGNoQ2FsbGJhY2spIHtcclxuXHJcbiAgICAgICAgaWYgKHpvbmUubWF4WCA8IDApIHJldHVybjtcclxuICAgICAgICBpZiAoem9uZS5tYXhaIDwgMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBtaW5YID0gTWF0aC5tYXgoem9uZS5taW5YLCAwKTtcclxuICAgICAgICBjb25zdCBtaW5aID0gTWF0aC5tYXgoem9uZS5taW5aLCAwKTtcclxuICAgICAgICBjb25zdCBtYXhYID0gTWF0aC5taW4oem9uZS5tYXhYLCB0aGlzLnRlcnJhaW4ud2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IG1heFogPSBNYXRoLm1pbih6b25lLm1heFosIHRoaXMudGVycmFpbi5kZXB0aCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1pblBhdGNoWCA9IG1pblggLyBxdWFkIHwgMDtcclxuICAgICAgICBjb25zdCBtaW5QYXRjaFogPSBtaW5aIC8gcXVhZCB8IDA7XHJcbiAgICAgICAgY29uc3QgbWF4UGF0Y2hYID0gbWF4WCAvIHF1YWQgfCAwO1xyXG4gICAgICAgIGNvbnN0IG1heFBhdGNoWiA9IG1heFogLyBxdWFkIHwgMDtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplTWluWCA9IE1hdGgubWF4KG1pblBhdGNoWCwgMCk7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplTWluWiA9IE1hdGgubWF4KG1pblBhdGNoWiwgMCk7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplTWF4WCA9IE1hdGgubWluKG1heFBhdGNoWCArIDEsIG51bVF1YWRYKTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVNYXhaID0gTWF0aC5taW4obWF4UGF0Y2haICsgMSwgbnVtUXVhZFopO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gbm9ybWFsaXplTWluWjsgeiA8IG5vcm1hbGl6ZU1heFo7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IG5vcm1hbGl6ZU1pblg7IHggPCBub3JtYWxpemVNYXhYOyB4KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaEluZGV4ID0geiAqIG51bVF1YWRYICsgeDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2socGF0Y2hJbmRleCwgeCwgeikgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmb3JFYWNoKHpvbmU6IElab25lLCBjYWxsYmFjazogVEZvckVhY2hQYXRjaENhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2ZvckVhY2goXHJcbiAgICAgICAgICAgIHpvbmUsXHJcbiAgICAgICAgICAgIHRoaXMudGVycmFpbi5wYXRjaFNpemUsXHJcbiAgICAgICAgICAgIHRoaXMudGVycmFpbi5udW1QYXRjaGVzWCxcclxuICAgICAgICAgICAgdGhpcy50ZXJyYWluLm51bVBhdGNoZXNaLFxyXG4gICAgICAgICAgICBjYWxsYmFja1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZURlcGVuZGVuY2llcyh6b25lOiBJWm9uZSkge1xyXG5cclxuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKHpvbmUsIChwYXRjaEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBwYXRjaEJ1ZmZlciA9IHRoaXMuX2J1ZmZlckFycmF5W3BhdGNoSW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgcGF0Y2hCdWZmZXIubGFzdENoYW5nZVRpbWUgPSBub3c7XHJcbiAgICAgICAgICAgIHBhdGNoQnVmZmVyLmxhc3RDaGFuZ2VBdHRhY2hUaW1lID0gbm93O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9sYXN0Q2hhbmdlVGltZSA9IG5vdztcclxuICAgICAgICB0aGlzLl9sYXN0Q2hhbmdlQXR0YWNoVGltZSA9IG5vdztcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIHVwZGF0ZUhlaWdodHMoem9uZTogSVpvbmUpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG4gICAgICAgIHRoaXMuZm9yRWFjaCh6b25lLCAocGF0Y2hJbmRleCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcGF0Y2hCdWZmZXIgPSB0aGlzLl9idWZmZXJBcnJheVtwYXRjaEluZGV4XTtcclxuXHJcbiAgICAgICAgICAgIHBhdGNoQnVmZmVyLmxhc3RDaGFuZ2VUaW1lID0gbm93O1xyXG4gICAgICAgICAgICBwYXRjaEJ1ZmZlci5sYXN0Q2hhbmdlSGVpZ2h0c1RpbWUgPSBub3c7XHJcbiAgICAgICAgICAgIHBhdGNoQnVmZmVyLmhlaWdodHNVcGRhdGVkID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fbGFzdENoYW5nZVRpbWUgPSBub3c7XHJcbiAgICAgICAgdGhpcy5fbGFzdENoYW5nZUhlaWdodHNUaW1lID0gbm93O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2FkZFBhdGNoQnVmZmVyKHBhdGNoSW5kZXg6IG51bWJlciwgYnVmZmVyOiBUUGF0Y2hCdWZmZXIpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2J1ZmZlckFycmF5W3BhdGNoSW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQnVmZmVyIGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2J1ZmZlckFycmF5W3BhdGNoSW5kZXhdID0gYnVmZmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2FkZFBhdGNoTWVzaEluc3RhbmNlKHBhdGNoSW5kZXg6IG51bWJlciwgbWVzaEluc3RhbmNlOiBwY3guTWVzaEluc3RhbmNlKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9tZXNoSW5zdGFuY2VBcnJheVtwYXRjaEluZGV4XSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01lc2ggaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiBhZGRlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF0gPSBtZXNoSW5zdGFuY2U7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlc0lkcy5wdXNoKHBhdGNoSW5kZXgpO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoQXZhbGFibGVDb3VudCsrO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBfY3JlYXRlQ3VzdG9tQmFnTWVzaChhcHA6IHBjeC5BcHBCYXNlLCBlbnRpdHk6IHBjeC5FbnRpdHksIG1hdGVyaWFsOiBwY3guTWF0ZXJpYWwsIHRlcnJhaW46IEJhc2VUZXJyYWluKTogcGN4Lk1lc2hJbnN0YW5jZSAmIEN1c3RvbU1lc2hJbnN0YW5jZTxUUGF0Y2hQcmltaXRpdmU+O1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IF9jcmVhdGVJbnN0YW5jaW5nTWVzaChhcHA6IHBjeC5BcHBCYXNlLCBlbnRpdHk6IHBjeC5FbnRpdHksIG1hdGVyaWFsOiBwY3guTWF0ZXJpYWwsIGxvZEluZm86IElQYXRjaExvZEJhc2UsIHByaW1pdGl2ZUluZm86IElTaW5nbGVMb2RJbmZvLCBpbnN0YW5jZXI6IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmc8YW55PiwgZGF0YTogVWludDE2QXJyYXkgfCBVaW50OEFycmF5KTogcGN4Lk1lc2hJbnN0YW5jZTtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBfY3JlYXRlUGF0Y2hCdWZmZXIocGF0Y2hJbmRleDogbnVtYmVyLCBiYXNlSW5kZXg6IG51bWJlciwgYmFzZVZlcnRleDogbnVtYmVyLCBjb3VudDogbnVtYmVyLCBwYXRjaFg6IG51bWJlciwgcGF0Y2haOiBudW1iZXIsIG1pblg6IG51bWJlciwgbWluWjogbnVtYmVyLCBzaXplOiBudW1iZXIsIGxvZDogSVBhdGNoTG9kKTogVFBhdGNoQnVmZmVyO1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IF9jcmVhdGVQYXRjaE1lc2gocGF0Y2hJbmRleDogbnVtYmVyLCBhcHA6IHBjeC5BcHBCYXNlLCBlbnRpdHk6IHBjeC5FbnRpdHksIG1hdGVyaWFsOiBwY3guTWF0ZXJpYWwpOiBwY3guTWVzaEluc3RhbmNlO1xyXG4gICAgXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgX2Rlc3Ryb3lDdXN0b21CYWdNZXNoKG1lc2g6IHBjeC5NZXNoSW5zdGFuY2UpOiB2b2lkO1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IF9kZXN0cm95SW5zdGFuY2luZ01lc2gobWVzaDogcGN4Lk1lc2hJbnN0YW5jZSk6IHZvaWQ7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgX2Rlc3Ryb3lQYXRjaE1lc2gocGF0Y2hJbmRleDogbnVtYmVyKTogdm9pZDtcclxuXHJcbiAgICBwdWJsaWMgZW5kVXBkYXRlKGhhc1VwZGF0ZUhlaWdodHM6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl91cGRhdGVSZW5kZXJDb21wb25lbnQodGhpcy5fZW50aXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0T3JDcmVhdGVQYXRjaE1lc2gocGF0Y2hJbmRleDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGxldCBwYXRjaCA9IHRoaXMuX21lc2hJbnN0YW5jZUFycmF5W3BhdGNoSW5kZXhdO1xyXG4gICAgICAgIGlmICghcGF0Y2gpIHtcclxuICAgICAgICAgICAgcGF0Y2ggPSB0aGlzLl9jcmVhdGVQYXRjaE1lc2gocGF0Y2hJbmRleCwgdGhpcy5fYXBwLCB0aGlzLl9lbnRpdHksIHRoaXMuX21hdGVyaWFsKTtcclxuICAgICAgICAgICAgdGhpcy5fYWRkUGF0Y2hNZXNoSW5zdGFuY2UocGF0Y2hJbmRleCwgcGF0Y2gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhdGNoO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95UGF0Y2hNZXNoKHBhdGNoSW5kZXg6IG51bWJlcikge1xyXG5cclxuICAgICAgICB0aGlzLl9kZXN0cm95UGF0Y2hNZXNoKHBhdGNoSW5kZXgpO1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaE1lc2hJbnN0YW5jZSA9IHRoaXMuX21lc2hJbnN0YW5jZUFycmF5W3BhdGNoSW5kZXhdO1xyXG5cclxuICAgICAgICBpZiAocGF0Y2hNZXNoSW5zdGFuY2UpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3BhdGNoQXZhbGFibGVDb3VudC0tO1xyXG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VzSWRzLnB1c2gocGF0Y2hJbmRleCk7XHJcblxyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95UGF0Y2hlc01lc2goKSB7XHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCB0aGlzLnRlcnJhaW4ubnVtUGF0Y2hlc1o7IHorKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMudGVycmFpbi5udW1QYXRjaGVzWDsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHogKiB0aGlzLnRlcnJhaW4ubnVtUGF0Y2hlc1ggKyB4O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95UGF0Y2hNZXNoKGluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlUGF0Y2hlc01lc2hNYXRlcmlhbCgpIHtcclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHRoaXMudGVycmFpbi5udW1QYXRjaGVzWjsgeisrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy50ZXJyYWluLm51bVBhdGNoZXNYOyB4KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHogKiB0aGlzLnRlcnJhaW4ubnVtUGF0Y2hlc1ggKyB4O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlID0gdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UubWF0ZXJpYWwgPSB0aGlzLl9tYXRlcmlhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9kZXN0cm95TWVzaGVzKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY3VzdG9tTWVzaEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rlc3Ryb3lDdXN0b21CYWdNZXNoKHRoaXMuX2N1c3RvbU1lc2hJbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1c3RvbU1lc2hJbnN0YW5jZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2luZz8uZGVzdHJveSgobWVzaCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9kZXN0cm95SW5zdGFuY2luZ01lc2gobWVzaCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcndhcmRSZW5kZXJlciB8fCB0aGlzLmluc3RhbmNpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95UGF0Y2hlc01lc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZU1lc2hlcygpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9pbml0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lNZXNoZXMoKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3J3YXJkUmVuZGVyZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VzdG9tTWVzaEluc3RhbmNlID0gdGhpcy5fY3JlYXRlQ3VzdG9tQmFnTWVzaCh0aGlzLl9hcHAsIHRoaXMuX2VudGl0eSwgdGhpcy5fbWF0ZXJpYWwsIHRoaXMudGVycmFpbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaW5zdGFuY2luZykge1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNpbmcuYnVpbGRGcm9tVGVycmFpbih0aGlzLnRlcnJhaW4sIChsb2RJbmZvLCBwcmltaXRpdmVJbmZvLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlSW5zdGFuY2luZ01lc2godGhpcy5fYXBwLCB0aGlzLl9lbnRpdHksIHRoaXMuX21hdGVyaWFsLCBsb2RJbmZvLCBwcmltaXRpdmVJbmZvLCB0aGlzLmluc3RhbmNpbmchLCBkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhdGNoZXNNZXNoTWF0ZXJpYWwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2ZvcmNlVXBkYXRlUmVuZGVyQ29tcG9uZW50KHRoaXMuX2VudGl0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGluaXQoYXBwOiBwY3guQXBwQmFzZSwgZW50aXR5OiBwY3guRW50aXR5LCBtYXRlcmlhbDogcGN4LlN0YW5kYXJkTWF0ZXJpYWwpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2luaXQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgdGVycmFpbiBwYXRjaGVzIHdhcyBpbml0aWFsaXplZCBlYXJsaWVyJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9pbml0ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5fZW50aXR5ID0gZW50aXR5O1xyXG5cclxuICAgICAgICAvLyBmb3Igb3RoZXIgbGFuZ3VhZ2UgdXNlIGludGVybmFsIGNsYXNzXHJcbiAgICAgICAgY29uc3QgaW5pdGlhbGl6ZXI6IElHcmlkUGF0Y2hJbml0aWFsaXplciA9IHtcclxuICAgICAgICAgICAgaW5pdFBhdGNoOiAoYmFzZUluZGV4OiBpbnQsIGJhc2VWZXJ0ZXg6IGludCwgY291bnQ6IGludCwgcGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50LCBtaW5YOiBpbnQsIG1pblo6IGludCwgc2l6ZTogaW50LCBsb2RJbmZvOiBSZWFkb25seTxJUGF0Y2hMb2Q+KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaEluZGV4ID0gcGF0Y2haICogdGhpcy50ZXJyYWluLm51bVBhdGNoZXNYICsgcGF0Y2hYO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5fY3JlYXRlUGF0Y2hCdWZmZXIocGF0Y2hJbmRleCwgYmFzZUluZGV4LCBiYXNlVmVydGV4LCBjb3VudCwgcGF0Y2hYLCBwYXRjaFosIG1pblgsIG1pblosIHNpemUsIGxvZEluZm8pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkUGF0Y2hCdWZmZXIocGF0Y2hJbmRleCwgYnVmZmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRNYXRlcmlhbChtYXRlcmlhbCk7XHJcbiAgICAgICAgdGhpcy50ZXJyYWluLmluaXRQYXRjaGVzKGluaXRpYWxpemVyKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZU1lc2hlcygpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoIH0gZnJvbSBcIi4vSVBhdGNoLm1qc1wiO1xyXG5pbXBvcnQgeyBJSW5zdGFuY2luZ09iamVjdCwgSVBhdGNoZXNJbnN0YW5jaW5nLCBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmcsIFRCdWxkZXIsIFREZXN0cnVjdG9yLCBUU2VsZWN0b3IgfSBmcm9tIFwiLi9JUGF0Y2hlc0luc3RhbmNpbmcubWpzXCI7XHJcbmltcG9ydCB7IEJPVFRPTSwgTEVGVCwgTG9kSW5mbywgUklHSFQsIFRPUCB9IGZyb20gXCIuL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCB7IGdldExvZElkLCBJUGF0Y2hMb2QsIElQYXRjaExvZEJhc2UgfSBmcm9tIFwiLi9Mb2RNYW5hZ2VyLm1qc1wiO1xyXG5pbXBvcnQgQmFzZVRlcnJhaW4gZnJvbSBcIi4vVGVycmFpbi5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBjb21JbnN0RGF0YVNpemUgPSA0O1xyXG5leHBvcnQgY29uc3QgY29tYmluZUdyb3VwTGVuID0gNjtcclxuXHJcbmV4cG9ydCB0eXBlICBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGUgPSBVaW50OEFycmF5O1xyXG5leHBvcnQgY29uc3QgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlID0gVWludDhBcnJheTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbWJpbmVJdGVtIHtcclxuICAgIG1haW5JZDogaW50LFxyXG4gICAgZ3JvdXBJZDogaW50LFxyXG4gICAgYW5nbGU6IGludCxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTG9kQ29tYmluZURhdGE8VCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0PiB7XHJcbiAgICBncm91cHM6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+W10sXHJcbiAgICBpdGVtczogSUNvbWJpbmVJdGVtW11bXVtdW11cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhdGNoQ29tYmluZUluc3RhbmNpbmc8VCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0PiBpbXBsZW1lbnRzIElQYXRjaGVzSW5zdGFuY2luZzxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+IHtcclxuXHJcbiAgICBwcml2YXRlIF9wYXRjaENvdW50OiBpbnQ7XHJcblxyXG4gICAgcHVibGljIGRhdGE6IElMb2RDb21iaW5lRGF0YTxUPltdO1xyXG4gICAgcHVibGljIGdldCBwYXRjaENvdW50KCkgeyByZXR1cm4gdGhpcy5fcGF0Y2hDb3VudDsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoQ291bnQgPSAwO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZm9yRWFjaChmbjogVFNlbGVjdG9yPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4pIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmRhdGEubGVuZ3RoOyBjKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tYmluZUdyb3VwTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuZGF0YVtjXS5ncm91cHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgZm4oc2VnbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3lTZWdtZW50T2JqZWN0cyhpbmRleDogaW50LCBkZXN0cnVjdG9yOiBURGVzdHJ1Y3RvcjxUPikge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbWJpbmVHcm91cExlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBzZWdtZW50ID0gdGhpcy5kYXRhW2luZGV4XS5ncm91cHNbaV07XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VnbWVudC5vYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGRlc3RydWN0b3Ioc2VnbWVudC5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgc2VnbWVudC5vYmplY3QgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KGRlc3RydWN0b3I6IFREZXN0cnVjdG9yPFQ+KSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95U2VnbWVudE9iamVjdHMoaSwgZGVzdHJ1Y3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGF0YS5sZW5ndGggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBidWlsZEZyb21UZXJyYWluKHRlcnJhaW46IEJhc2VUZXJyYWluLCBvYmplY3RCdWlsZGVyPzogVEJ1bGRlcjxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+KSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhdGNoQ291bnQgPSB0ZXJyYWluLm51bVBhdGNoZXNYICogdGVycmFpbi5udW1QYXRjaGVzWjtcclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgQXJyYXkodGVycmFpbi5sb2RJbmZvLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZENvcmUgPSAwOyBsb2RDb3JlIDwgdGhpcy5kYXRhLmxlbmd0aDsgbG9kQ29yZSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtsb2RDb3JlXSA9IHRoaXMuX2J1aWxkSW5mbyhsb2RDb3JlLCB0ZXJyYWluLmxvZEluZm9bbG9kQ29yZV0sIHRoaXMuX3BhdGNoQ291bnQsIG9iamVjdEJ1aWxkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9idWlsZEluZm88VCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0Pihsb2RDb3JlOiBpbnQsIGxvZEluZm86IFJlYWRvbmx5PFJlYWRvbmx5PExvZEluZm8+PiwgcGF0Y2hDb3VudDogaW50LCBvYmplY3RCdWlsZGVyPzogVEJ1bGRlcjxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+KTogSUxvZENvbWJpbmVEYXRhPFQ+IHtcclxuXHJcbiAgICAgICAgY29uc3QgZ3JvdXBzID0gbmV3IEFycmF5PElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+Pihjb21iaW5lR3JvdXBMZW4pO1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zICA9IG5ldyBBcnJheTxJQ29tYmluZUl0ZW1bXVtdW10+KExFRlQpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsID0gMCA7IGwgPCBMRUZUIDsgbCsrKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGl0ZW1zW2xdID0gbmV3IEFycmF5PElDb21iaW5lSXRlbVtdW10+KFJJR0hUKTtcclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCByID0gMCA7IHIgPCBSSUdIVCA7IHIrKykge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpdGVtc1tsXVtyXSA9IG5ldyBBcnJheTxJQ29tYmluZUl0ZW1bXT4oVE9QKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDAgOyB0IDwgVE9QIDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNbbF1bcl1bdF0gPSBuZXcgQXJyYXk8SUNvbWJpbmVJdGVtPihCT1RUT00pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDAgOyBiIDwgQk9UVE9NIDsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGdldExvZElkKGxvZENvcmUsIGwsIHIsIHQsIGIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1haW5JZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdyb3VwSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmdsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsID09PSAwICYmIHIgPT09IDAgJiYgdCA9PT0gMCAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlICAgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMCAmJiB0ID09PSAwICYmIGIgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA9PT0gMCAmJiByID09PSAwICYmIHQgPT09IDEgJiYgYiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAgID0gOTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA9PT0gMCAmJiByID09PSAxICYmIHQgPT09IDAgJiYgYiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAgID0gMTgwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDAgJiYgciA9PT0gMCAmJiB0ID09PSAwICYmIGIgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDI3MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDAgJiYgdCA9PT0gMSAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlICAgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDAgJiYgciA9PT0gMSAmJiB0ID09PSAxICYmIGIgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAxLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDkwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDAgJiYgciA9PT0gMSAmJiB0ID09PSAwICYmIGIgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAxLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDE4MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDAgJiYgdCA9PT0gMCAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlICAgPSAyNzA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA9PT0gMSAmJiByID09PSAxICYmIHQgPT09IDAgJiYgYiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDEsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAgID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsID09PSAwICYmIHIgPT09IDAgJiYgdCA9PT0gMSAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMSwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkID0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlICAgPSA5MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDAgJiYgdCA9PT0gMSAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkID0gNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlICAgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMSAmJiB0ID09PSAxICYmIGIgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAxLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDkwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGwgPT09IDAgJiYgciA9PT0gMSAmJiB0ID09PSAxICYmIGIgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAxLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgICA9IDE4MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDEgJiYgdCA9PT0gMCAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkID0gNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlICAgPSAyNzA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA9PT0gMSAmJiByID09PSAxICYmIHQgPT09IDEgJiYgYiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDEsIDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSAgID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuXFwndCBjb21iaW5lICR7bH0sJHtyfSwke3R9LCR7Yn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbbF1bcl1bdF1bYl0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGU6IGFuZ2xlIC8gOTAsIC8vIHNhdmUgZm9yIHVpbnQ4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT09IG1haW5JZCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBsb2RJbmZvLmluZm9bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2Q6IElQYXRjaExvZEJhc2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZTogbG9kQ29yZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiByLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IGJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgICA9IG5ldyBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGUocGF0Y2hDb3VudCAqIGNvbUluc3REYXRhU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmplY3QgPSBvYmplY3RCdWlsZGVyID8gb2JqZWN0QnVpbGRlcihsb2QsIGluZm8sIGRhdGEsIHBhdGNoQ291bnQpIDogbnVsbDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW2dyb3VwSWRdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleEJhc2VJbmRleDogaW5mby5zdGFydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhDb3VudDogaW5mby5jb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogb2JqZWN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ3JvdXBzLFxyXG4gICAgICAgICAgICBpdGVtc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldChsb2Q6IElQYXRjaExvZCk6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhW2xvZC5jb3JlXTtcclxuICAgICAgICBjb25zdCBncm91cElkID0gZGF0YS5pdGVtc1tsb2QubGVmdF1bbG9kLnJpZ2h0XVtsb2QudG9wXVtsb2QuYm90dG9tXS5ncm91cElkO1xyXG4gICAgICAgIHJldHVybiBkYXRhLmdyb3Vwc1tncm91cElkXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5jcmVtZW50KGxvZDogSVBhdGNoTG9kLCBwYXRjaDogSVBhdGNoKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGRhdGEgICA9IHRoaXMuZGF0YVtsb2QuY29yZV07XHJcbiAgICAgICAgY29uc3QgaXRlbSAgID0gZGF0YS5pdGVtc1tsb2QubGVmdF1bbG9kLnJpZ2h0XVtsb2QudG9wXVtsb2QuYm90dG9tXTtcclxuICAgICAgICBjb25zdCBzaW5nbGUgPSBkYXRhLmdyb3Vwc1tpdGVtLmdyb3VwSWRdO1xyXG5cclxuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBzaW5nbGUuY291bnQ7XHJcbiAgICAgICAgY29uc3QgaW5kZXggICAgID0gcHJldkluZGV4ICogY29tSW5zdERhdGFTaXplO1xyXG5cclxuICAgICAgICBpZiAoc2luZ2xlLmRhdGFbaW5kZXggKyAwXSAhPT0gcGF0Y2gueCB8fFxyXG4gICAgICAgICAgICBzaW5nbGUuZGF0YVtpbmRleCArIDFdICE9PSBwYXRjaC56IHx8XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMl0gIT09IGl0ZW0uYW5nbGUpIHtcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAwXSA9IHBhdGNoLng7XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMV0gPSBwYXRjaC56O1xyXG4gICAgICAgICAgICBzaW5nbGUuZGF0YVtpbmRleCArIDJdID0gaXRlbS5hbmdsZTtcclxuICAgICAgICAgICAgc2luZ2xlLmhhc0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2luZ2xlLmNvdW50Kys7XHJcbiAgICAgICAgcmV0dXJuIHNpbmdsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgemVyb0FsbCgpIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kQ29yZSA9IDA7IGxvZENvcmUgPCB0aGlzLmRhdGEubGVuZ3RoOyBsb2RDb3JlKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tYmluZUdyb3VwTGVuOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaW5nbGUgPSB0aGlzLmRhdGFbbG9kQ29yZV0uZ3JvdXBzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIHNpbmdsZS5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBjb21iaW5lR3JvdXBMZW4sIGNvbUluc3REYXRhU2l6ZSwgUGF0Y2hDb21iaW5lSW5zdGFuY2luZywgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vUGF0Y2hlc0NvbWJpbmVJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgeyBJVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nIH0gZnJvbSBcIi4vSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZy5tanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXJyYWluUGF0aGNlc0NvbWJpbmVJbnN0YW5jaW5nIGV4dGVuZHMgUGF0Y2hDb21iaW5lSW5zdGFuY2luZzxwY3guTWVzaEluc3RhbmNlPiBpbXBsZW1lbnRzIElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmc8VENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcblxyXG4gICAgYnVmZmVyVHlwZSA9IFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZTtcclxuICAgIGl0ZW1CdWZmZXJTaXplID0gNDtcclxuICAgIFxyXG4gICAgcHVibGljIGdldCBtZXNoSW5zdGFuY2VDb3VudCgpIHsgcmV0dXJuIHRoaXMuZGF0YS5sZW5ndGggKiBjb21iaW5lR3JvdXBMZW47IH1cclxuXHJcbiAgICBwdWJsaWMgYXBwZW5kTWVzaEluc3RhbmNlcyhhcnI6IHBjeC5NZXNoSW5zdGFuY2VbXSwgb2Zmc2V0OiBpbnQgPSAwKSB7XHJcblxyXG4gICAgICAgIGxldCBtZXNoSW5kZXggPSAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbWJpbmVHcm91cExlbjsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRhdGFbY10uZ3JvdXBzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaHVuay5vYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJbbWVzaEluZGV4KysgKyBvZmZzZXRdID0gY2h1bmsub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbWVzaEluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiZWdpbihjYXN0U2hhZG93OiBib29sZWFuID0gZmFsc2UsIHJlY2VpdmVTaGFkb3c6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21iaW5lR3JvdXBMZW47IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5kYXRhW2NdLmdyb3Vwc1tpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rT2JqZWN0ID0gY2h1bmsub2JqZWN0O1xyXG5cclxuICAgICAgICAgICAgICAgIGNodW5rLmNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIGNodW5rLmhhc0NoYW5nZXMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2h1bmtPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QudmlzaWJsZVRoaXNGcmFtZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0LmNhc3RTaGFkb3cgPSBjYXN0U2hhZG93O1xyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0LnJlY2VpdmVTaGFkb3cgPSByZWNlaXZlU2hhZG93O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbmQoKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbWJpbmVHcm91cExlbjsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRhdGFbY10uZ3JvdXBzW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmtPYmplY3QgPSBjaHVuay5vYmplY3Q7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChjaHVua09iamVjdCAmJiBjaHVuay5jb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC5pbnN0YW5jaW5nQ291bnQgPSBjaHVuay5jb3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rLmhhc0NoYW5nZXMgJiYgY2h1bmtPYmplY3QuaW5zdGFuY2luZ0RhdGEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHBlcmZvcm1hbmNlIGltcHJvdmVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY2h1bmtPYmplY3QuaW5zdGFuY2luZ0RhdGEudmVydGV4QnVmZmVyPy51bmxvY2soKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IGNodW5rLmNvdW50ICogY29tSW5zdERhdGFTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZXJ0ZXhCdWZmZXIgPSBjaHVua09iamVjdC5pbnN0YW5jaW5nRGF0YS52ZXJ0ZXhCdWZmZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVCdWZmZXIodmVydGV4QnVmZmVyLCBjaHVuay5kYXRhLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVCdWZmZXIodmVydGV4QnVmZmVyOiBwY3guVmVydGV4QnVmZmVyIHwgbnVsbCwgZGF0YTogVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlLCBsZW5ndGg6IGludCkge1xyXG5cclxuICAgICAgICBpZiAodmVydGV4QnVmZmVyKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBkZXZpY2UgPSB2ZXJ0ZXhCdWZmZXIuZGV2aWNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRldmljZS5pc1dlYkdMMikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2wgPSAoZGV2aWNlIGFzIHBjeC5XZWJnbEdyYXBoaWNzRGV2aWNlKS5nbDtcclxuICAgICAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhCdWZmZXIuaW1wbC5idWZmZXJJZCk7XHJcbiAgICAgICAgICAgICAgICBnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgZGF0YSwgMCwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkZXZpY2UuaXNXZWJHUFUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdncHUgICA9IChkZXZpY2UgYXMgYW55KS53Z3B1IGFzIEdQVURldmljZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IHZlcnRleEJ1ZmZlci5pbXBsLmJ1ZmZlciBhcyBHUFVCdWZmZXI7XHJcbiAgICAgICAgICAgICAgICB3Z3B1LnF1ZXVlLndyaXRlQnVmZmVyKGJ1ZmZlciwgMCwgZGF0YSwgMCwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Vuc3VwcG9ydGVkIGRldmljZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoIH0gZnJvbSBcIi4vSVBhdGNoLm1qc1wiO1xyXG5pbXBvcnQgeyBJSW5zdGFuY2luZ09iamVjdCwgSVBhdGNoZXNJbnN0YW5jaW5nLCBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmcsIFRCdWxkZXIsIFREZXN0cnVjdG9yLCBUU2VsZWN0b3IgfSBmcm9tIFwiLi9JUGF0Y2hlc0luc3RhbmNpbmcubWpzXCI7XHJcbmltcG9ydCB7IEJPVFRPTSwgTEVGVCwgTG9kSW5mbywgUklHSFQsIFRPUCB9IGZyb20gXCIuL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCB7IElQYXRjaExvZEJhc2UgfSBmcm9tIFwiLi9Mb2RNYW5hZ2VyLm1qc1wiO1xyXG5pbXBvcnQgQmFzZVRlcnJhaW4gZnJvbSBcIi4vVGVycmFpbi5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnN0RGF0YVNpemUgPSAyO1xyXG5cclxuZXhwb3J0IHR5cGUgIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZSA9IFVpbnQxNkFycmF5O1xyXG5leHBvcnQgY29uc3QgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlID0gVWludDE2QXJyYXk7XHJcblxyXG5leHBvcnQgY2xhc3MgUGF0Y2hJbnN0YW5jaW5nPFQgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdD4gaW1wbGVtZW50cyBJUGF0Y2hlc0luc3RhbmNpbmc8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcblxyXG4gICAgcHJpdmF0ZSBfcGF0Y2hDb3VudDogaW50O1xyXG5cclxuICAgIHB1YmxpYyBkYXRhOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPltdW11bXVtdW107XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoQ291bnQoKSB7IHJldHVybiB0aGlzLl9wYXRjaENvdW50OyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gW107XHJcbiAgICAgICAgdGhpcy5fcGF0Y2hDb3VudCA9IDA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBmb3JFYWNoKGZuOiBUU2VsZWN0b3I8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPikge1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnQgPSB0aGlzLmRhdGFbY11bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbihzZWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveVNlZ21lbnRPYmplY3RzKGluZGV4OiBpbnQsIGRlc3RydWN0b3I6IFREZXN0cnVjdG9yPFQ+KSB7XHJcbiAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuZGF0YVtpbmRleF1bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VnbWVudC5vYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RydWN0b3Ioc2VnbWVudC5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudC5vYmplY3QgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KGRlc3RydWN0b3I6IFREZXN0cnVjdG9yPFQ+KSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95U2VnbWVudE9iamVjdHMoaSwgZGVzdHJ1Y3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGF0YS5sZW5ndGggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBidWlsZEZyb21UZXJyYWluKHRlcnJhaW46IEJhc2VUZXJyYWluLCBvYmplY3RCdWlsZGVyPzogVEJ1bGRlcjxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+KSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhdGNoQ291bnQgPSB0ZXJyYWluLm51bVBhdGNoZXNYICogdGVycmFpbi5udW1QYXRjaGVzWjtcclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgQXJyYXkodGVycmFpbi5sb2RJbmZvLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZENvcmUgPSAwOyBsb2RDb3JlIDwgdGhpcy5kYXRhLmxlbmd0aDsgbG9kQ29yZSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtsb2RDb3JlXSA9IHRoaXMuX2J1aWxkSW5mbyhsb2RDb3JlLCB0ZXJyYWluLmxvZEluZm9bbG9kQ29yZV0sIHRoaXMuX3BhdGNoQ291bnQsIG9iamVjdEJ1aWxkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9idWlsZEluZm88VCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0Pihsb2RDb3JlOiBpbnQsIGxvZEluZm86IFJlYWRvbmx5PFJlYWRvbmx5PExvZEluZm8+PiwgcGF0Y2hDb3VudDogaW50LCBvYmplY3RCdWlsZGVyPzogVEJ1bGRlcjxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+KTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT5bXVtdW11bXSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGFycjogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT5bXVtdW11bXSA9IG5ldyBBcnJheShMRUZUKTtcclxuICAgIFxyXG4gICAgICAgIGZvciAobGV0IGwgPSAwIDsgbCA8IExFRlQgOyBsKyspIHtcclxuICAgIFxyXG4gICAgICAgICAgICBhcnJbbF0gPSBuZXcgQXJyYXkoUklHSFQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwIDsgciA8IFJJR0hUIDsgcisrKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGFycltsXVtyXSA9IG5ldyBBcnJheShUT1ApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMCA7IHQgPCBUT1AgOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBhcnJbbF1bcl1bdF0gPSBuZXcgQXJyYXkoQk9UVE9NKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwIDsgYiA8IEJPVFRPTSA7IGIrKykge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBsb2RJbmZvLmluZm9bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZDogSVBhdGNoTG9kQmFzZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmU6IGxvZENvcmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IHIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IGJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgICA9IG5ldyBUSW5zdENvb3Jkc09mZnNldEFyclR5cGUocGF0Y2hDb3VudCAqIGluc3REYXRhU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdCA9IG9iamVjdEJ1aWxkZXIgPyBvYmplY3RCdWlsZGVyKGxvZCwgaW5mbywgZGF0YSwgcGF0Y2hDb3VudCkgOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyW2xdW3JdW3RdW2JdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4QmFzZUluZGV4OiBpbmZvLnN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4Q291bnQ6IGluZm8uY291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG9iamVjdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldChsb2Q6IElQYXRjaExvZEJhc2UpOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtsb2QuY29yZV1bbG9kLmxlZnRdW2xvZC5yaWdodF1bbG9kLnRvcF1bbG9kLmJvdHRvbV07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBpbmNyZW1lbnQobG9kOiBJUGF0Y2hMb2RCYXNlLCBwYXRjaDogSVBhdGNoKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHNpbmdsZSAgICA9IHRoaXMuZ2V0KGxvZCk7XHJcbiAgICAgICAgY29uc3QgcHJldkluZGV4ID0gc2luZ2xlLmNvdW50O1xyXG4gICAgICAgIGNvbnN0IGluZGV4ICAgICA9IHByZXZJbmRleCAqIGluc3REYXRhU2l6ZTtcclxuXHJcbiAgICAgICAgaWYgKHNpbmdsZS5kYXRhW2luZGV4ICsgMF0gIT09IHBhdGNoLm1pblggfHxcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAxXSAhPT0gcGF0Y2gubWluWikge1xyXG4gICAgICAgICAgICBzaW5nbGUuZGF0YVtpbmRleCArIDBdID0gcGF0Y2gubWluWDtcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAxXSA9IHBhdGNoLm1pblo7XHJcbiAgICAgICAgICAgIHNpbmdsZS5oYXNDaGFuZ2VzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNpbmdsZS5jb3VudCsrO1xyXG4gICAgICAgIHJldHVybiBzaW5nbGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHplcm9BbGwoKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZENvcmUgPSAwOyBsb2RDb3JlIDwgdGhpcy5kYXRhLmxlbmd0aDsgbG9kQ29yZSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaW5nbGUgPSB0aGlzLmRhdGFbbG9kQ29yZV1bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGUuY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgQk9UVE9NLCBMRUZULCBSSUdIVCwgVE9QIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IHsgaW5zdERhdGFTaXplLCBQYXRjaEluc3RhbmNpbmcsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZSB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL1BhdGNoZXNJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgeyBJVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nIH0gZnJvbSBcIi4vSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZy5tanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXJyYWluUGF0aGNlc0luc3RhbmNpbmcgZXh0ZW5kcyBQYXRjaEluc3RhbmNpbmc8cGN4Lk1lc2hJbnN0YW5jZT4gaW1wbGVtZW50cyBJVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nPFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4ge1xyXG5cclxuICAgIGJ1ZmZlclR5cGUgPSBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU7XHJcbiAgICBpdGVtQnVmZmVyU2l6ZSA9IDI7XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXQgbWVzaEluc3RhbmNlQ291bnQoKSB7IHJldHVybiB0aGlzLmRhdGEubGVuZ3RoICogTEVGVCAqIFJJR0hUICogVE9QICogQk9UVE9NOyB9XHJcblxyXG4gICAgcHVibGljIGFwcGVuZE1lc2hJbnN0YW5jZXMoYXJyOiBwY3guTWVzaEluc3RhbmNlW10sIG9mZnNldDogaW50ID0gMCkge1xyXG5cclxuICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmRhdGEubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgUklHSFQ7IHIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5kYXRhW2NdW2xdW3JdW3RdW2JdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay5vYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJbaSsrICsgb2Zmc2V0XSA9IGNodW5rLm9iamVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJlZ2luKGNhc3RTaGFkb3c6IGJvb2xlYW4gPSBmYWxzZSwgcmVjZWl2ZVNoYWRvdzogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmRhdGEubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgUklHSFQ7IHIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5kYXRhW2NdW2xdW3JdW3RdW2JdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmtPYmplY3QgPSBjaHVuay5vYmplY3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuaGFzQ2hhbmdlcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVua09iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC52aXNpYmxlVGhpc0ZyYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QuY2FzdFNoYWRvdyA9IGNhc3RTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QucmVjZWl2ZVNoYWRvdyA9IHJlY2VpdmVTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVuZCgpIHtcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRhdGFbY11bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua09iamVjdCA9IGNodW5rLm9iamVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rT2JqZWN0ICYmIGNodW5rLmNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0Lmluc3RhbmNpbmdDb3VudCA9IGNodW5rLmNvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsuaGFzQ2hhbmdlcyAmJiBjaHVua09iamVjdC5pbnN0YW5jaW5nRGF0YSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jaHVua09iamVjdC5pbnN0YW5jaW5nRGF0YS52ZXJ0ZXhCdWZmZXI/LnVubG9jaygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gY2h1bmsuY291bnQgKiBpbnN0RGF0YVNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRleEJ1ZmZlciA9IGNodW5rT2JqZWN0Lmluc3RhbmNpbmdEYXRhLnZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUJ1ZmZlcih2ZXJ0ZXhCdWZmZXIsIGNodW5rLmRhdGEsIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZUJ1ZmZlcih2ZXJ0ZXhCdWZmZXI6IHBjeC5WZXJ0ZXhCdWZmZXIgfCBudWxsLCBkYXRhOiBUSW5zdENvb3Jkc09mZnNldEFyclR5cGUsIGxlbmd0aDogaW50KSB7XHJcblxyXG4gICAgICAgIGlmICh2ZXJ0ZXhCdWZmZXIpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRldmljZSA9IHZlcnRleEJ1ZmZlci5kZXZpY2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGV2aWNlLmlzV2ViR0wyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnbCA9IChkZXZpY2UgYXMgcGN4LldlYmdsR3JhcGhpY3NEZXZpY2UpLmdsO1xyXG4gICAgICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHZlcnRleEJ1ZmZlci5pbXBsLmJ1ZmZlcklkKTtcclxuICAgICAgICAgICAgICAgIGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCBkYXRhLCAwLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRldmljZS5pc1dlYkdQVSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2dwdSAgID0gKGRldmljZSBhcyBhbnkpLndncHUgYXMgR1BVRGV2aWNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gdmVydGV4QnVmZmVyLmltcGwuYnVmZmVyIGFzIEdQVUJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgIHdncHUucXVldWUud3JpdGVCdWZmZXIoYnVmZmVyLCAwLCBkYXRhLCAwLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5zdXBwb3J0ZWQgZGV2aWNlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBJUGF0Y2hMb2QsIElQYXRjaExvZEJhc2UgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9Mb2RNYW5hZ2VyLm1qc1wiO1xyXG5pbXBvcnQgeyBjb29yZHNWZXJ0ZXhTaXplLCBJUmVhZG9ubHlDb29yZHNCdWZmZXIgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9Db29yZHNCdWZmZXIubWpzXCI7XHJcbmltcG9ydCBUZXJyYWluUGF0Y2hlc0Jhc2ljLCB7IFRlcnJhaW5QYXRjaEJ1ZmZlckJhc2ljIH0gZnJvbSBcIi4vVGVycmFpblBhdGNoZXNCYXNpYy5tanNcIjtcclxuaW1wb3J0IHsgcGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSwgdGVycmFpbkhlaWdodE1hcFBhcmFtTmFtZSwgZ2V0VGVycmFpblNoYWRlckNodW5rcywgdmVydGV4Q29vcmRBdHRyTmFtZSwgcGF0Y2hMb2RDb3JlUGFyYW1OYW1lLCBwYXRjaEluc3RDb29yZE9mZnNldFBhcmFtTmFtZSwgZ2V0VGV4dHVyZVR5cGUgfSBmcm9tIFwiLi9UZXJyYWluUGF0Y2hlc1NoYWRlckNodW5rcy5tanNcIjtcclxuaW1wb3J0IHsgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgSVNpbmdsZUxvZEluZm8gfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9Mb2RJbmZvLm1qc1wiO1xyXG5pbXBvcnQgeyBJWm9uZSB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0lab25lLm1qc1wiO1xyXG5pbXBvcnQgeyBJUmVhZG9ubHlBYnNIZWlnaHRNYXAsIFRIZWlnaHRNYXBGb3JtYXQgfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9BYnNIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCBDb21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcCBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9Db21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IEJhc2VUZXJyYWluIGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL1RlcnJhaW4ubWpzXCI7XHJcbmltcG9ydCB7IEN1c3RvbU1lc2gsIEN1c3RvbU1lc2hJbnN0YW5jZSwgSVByaW1pdGl2ZSB9IGZyb20gXCIuLi9FbmdpbmVFeHRlbnNpb25zL1JlbmRlcmVyLm1qc1wiO1xyXG5pbXBvcnQgeyBjaGVja1N1cHBvcnRSMzJGVGV4dHVyZSB9IGZyb20gXCIuLi9TaGFyZWQvVXRpbHMubWpzXCI7XHJcbmltcG9ydCB7IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmcgfSBmcm9tIFwiLi9JVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgeyBUZXJyYWluUGF0aGNlc0NvbWJpbmVJbnN0YW5jaW5nIH0gZnJvbSBcIi4vVGVycmFpblBhdGNoZXNDb21iaW5lSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IHsgVGVycmFpblBhdGhjZXNJbnN0YW5jaW5nIH0gZnJvbSBcIi4vVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGF0Y2hQcmltaXRpdmUge1xyXG4gICAgW3BhdGNoQ29vcmRPZmZzZXRQYXJhbU5hbWVdOiBbbnVtYmVyLCBudW1iZXJdIHwgRmxvYXQzMkFycmF5LFxyXG4gICAgW3BhdGNoTG9kQ29yZVBhcmFtTmFtZV06IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEhlaWdodE1hcEZvcm1hdChncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlLCBoZWlnaHRNYXA6IElSZWFkb25seUFic0hlaWdodE1hcCkge1xyXG4gICAgXHJcbiAgICBsZXQgaG1Gb3JtYXQ6IFRIZWlnaHRNYXBGb3JtYXQgPSBjaGVja1N1cHBvcnRSMzJGVGV4dHVyZShncmFwaGljc0RldmljZSkgPyAncjMyZicgOiAncmdiYSc7XHJcblxyXG4gICAgaWYgKGhlaWdodE1hcCBpbnN0YW5jZW9mIENvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwKSB7XHJcbiAgICAgICAgaG1Gb3JtYXQgPSBoZWlnaHRNYXAuY29tcHJlc3NBbGdvcml0bSA9PT0gJ3g0JyA/ICdyZ2JhWDQnIDogJ3JnYmFYMic7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhtRm9ybWF0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGVpZ2h0TWFwQ2h1bmtCdWZmZXJUeXBlKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIGZvcm1hdDogbnVtYmVyKSB7XHJcblxyXG4gICAgaWYgKGZvcm1hdCA9PT0gcGMuUElYRUxGT1JNQVRfUjMyRikge1xyXG4gICAgICAgIHJldHVybiBGbG9hdDMyQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZvcm1hdCA9PT0gcGMuUElYRUxGT1JNQVRfUkcxNlUpIHtcclxuICAgICAgICByZXR1cm4gVWludDE2QXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZvcm1hdCA9PT0gcGMuUElYRUxGT1JNQVRfUkdCQThVKSB7XHJcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBmb3JtYXQnKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVycmFpblBhdGNoZXMgZXh0ZW5kcyBUZXJyYWluUGF0Y2hlc0Jhc2ljPFRlcnJhaW5QYXRjaEJ1ZmZlckJhc2ljLCBJUGF0Y2hQcmltaXRpdmU+IHtcclxuXHJcbiAgICBwcml2YXRlIF9oZWlnaHRNYXA6IHBjeC5UZXh0dXJlO1xyXG4gICAgcHJpdmF0ZSBfaGVpZ2h0TWFwTGV2ZWxzVHlwZTogRmxvYXQzMkFycmF5Q29uc3RydWN0b3IgfCBVaW50MTZBcnJheUNvbnN0cnVjdG9yIHwgVWludDhBcnJheUNvbnN0cnVjdG9yO1xyXG4gICAgcHJpdmF0ZSBfc2hhcmVkSW5kZXhCdWZmZXI6IHBjeC5JbmRleEJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX3NoYXJlZFZlcnRleEJ1ZmZlcjogcGN4LlZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodE1hcFRleHR1cmUoKSB7IHJldHVybiB0aGlzLl9oZWlnaHRNYXA7IH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVQYXRjaEhlaWdodHNPbkdQVShkYXRhQ2h1bmtYOiBpbnQsIGRhdGFDaHVua1o6IGludCkge1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBhIGJhdGNoIHVwZGF0ZSBtYXkgYmUgcmVxdWlyZWQuXHJcbiAgICAgICAgLy8gVE9ETzogdHJhbnNmb3JtIGluIGhlaWdodG1hcCBjbGFzc1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhQ2h1bmtTaXplID0gdGhpcy50ZXJyYWluLmhlaWdodE1hcC5kYXRhQ2h1bmtTaXplO1xyXG4gICAgICAgIGNvbnN0IGxldmVsICA9IHRoaXMudGVycmFpbi5oZWlnaHRNYXAuZ2V0Q2h1bmtJbmRleChkYXRhQ2h1bmtYLCBkYXRhQ2h1bmtaKTtcclxuICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLnRlcnJhaW4uaGVpZ2h0TWFwLmdldENodW5rQnVmZmVyKHRoaXMuX2hlaWdodE1hcExldmVsc1R5cGUsIGRhdGFDaHVua1gsIGRhdGFDaHVua1opO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlLmlzV2ViR0wyKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBnbCA9ICh0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UgYXMgcGN4LldlYmdsR3JhcGhpY3NEZXZpY2UpLmdsO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlRm9ybWF0ID0gdGhpcy5faGVpZ2h0TWFwLmltcGwuX2dsRm9ybWF0O1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlUGl4ZWxUID0gdGhpcy5faGVpZ2h0TWFwLmltcGwuX2dsUGl4ZWxUeXBlO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlVGFyZ2V0ID0gdGhpcy5faGVpZ2h0TWFwLmltcGwuX2dsVGFyZ2V0O1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlT2JqZWN0ID0gdGhpcy5faGVpZ2h0TWFwLmltcGwuX2dsVGV4dHVyZTtcclxuXHJcbiAgICAgICAgICAgIGdsLmJpbmRUZXh0dXJlKHRleHR1cmVUYXJnZXQsIHRleHR1cmVPYmplY3QpO1xyXG4gICAgICAgICAgICBnbC50ZXhTdWJJbWFnZTNEKGdsLlRFWFRVUkVfMkRfQVJSQVksIDAsIDAsIDAsIGxldmVsLCBkYXRhQ2h1bmtTaXplLCBkYXRhQ2h1bmtTaXplLCAxLCB0ZXh0dXJlRm9ybWF0LCB0ZXh0dXJlUGl4ZWxULCBidWZmZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UuaXNXZWJHUFUpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdlYmdwdSAgPSAodGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlIGFzIGFueSkud2dwdSBhcyBHUFVEZXZpY2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSAodGhpcy5faGVpZ2h0TWFwLmltcGwuZ3B1VGV4dHVyZSkgYXMgR1BVVGV4dHVyZTtcclxuXHJcbiAgICAgICAgICAgIHdlYmdwdS5xdWV1ZS53cml0ZVRleHR1cmUoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZSxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFswLCAwLCBsZXZlbF0sXHJcbiAgICAgICAgICAgICAgICAgICAgbWlwTGV2ZWw6IDBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidWZmZXIsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzUGVyUm93OiBkYXRhQ2h1bmtTaXplICogNCwgLy8gYWx3YXlzIDQgZm9yIHJnYmEgZm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgcm93c1BlckltYWdlOiBkYXRhQ2h1bmtTaXplXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBkYXRhQ2h1bmtTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogZGF0YUNodW5rU2l6ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVIZWlnaHRNYXAoem9uZTogSVpvbmUpIHtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9mb3JFYWNoKFxyXG4gICAgICAgICAgICB6b25lLFxyXG4gICAgICAgICAgICB0aGlzLnRlcnJhaW4uaGVpZ2h0TWFwLmRhdGFDaHVua1NpemUsXHJcbiAgICAgICAgICAgIHRoaXMudGVycmFpbi5oZWlnaHRNYXAuZGF0YU51bUNodW5rc1gsXHJcbiAgICAgICAgICAgIHRoaXMudGVycmFpbi5oZWlnaHRNYXAuZGF0YU51bUNodW5rc1osXHJcbiAgICAgICAgICAgIChwYXRjaEluZGV4LCB4LCB6KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVQYXRjaEhlaWdodHNPbkdQVSh4LCB6KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9jcmVhdGVQYXRjaEJ1ZmZlcihwYXRjaEluZGV4OiBpbnQsIGJhc2VJbmRleDogaW50LCBiYXNlVmVydGV4OiBpbnQsIGNvdW50OiBpbnQsIHBhdGNoWDogaW50LCBwYXRjaFo6IGludCwgbWluWDogaW50LCBtaW5aOiBpbnQsIHNpemU6IGludCwgbG9kOiBJUGF0Y2hMb2QpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hCdWYgPSBuZXcgVGVycmFpblBhdGNoQnVmZmVyQmFzaWMocGF0Y2hJbmRleCwgcGF0Y2hYLCBwYXRjaFosIG1pblgsIG1pblosIHNpemUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHBhdGNoQnVmLmxvZCA9IGxvZDtcclxuICAgICAgICBwYXRjaEJ1Zi5pbmRpY2VzQmFzZUluZGV4ID0gYmFzZUluZGV4O1xyXG4gICAgICAgIHBhdGNoQnVmLmluZGljZXNCYXNlVmVydGV4ID0gYmFzZVZlcnRleDtcclxuICAgICAgICBwYXRjaEJ1Zi5pbmRpY2VzQ291bnQgPSBjb3VudDtcclxuICAgICAgICBwYXRjaEJ1Zi5kZXBlbmRlbmNlc1VwZGF0ZWQgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaEJ1Zi5oZWlnaHRzVXBkYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBwYXRjaEJ1ZjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfYnVpbGRWZXJ0ZXhGb3JtYXQoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgdmVydGV4QnVmZmVyOiBJUmVhZG9ubHlDb29yZHNCdWZmZXIpIHtcclxuXHJcbiAgICAgICAgY29uc3QgY29vcmRzRm9ybWF0ID0gKHZlcnRleEJ1ZmZlci5wYXRjaFZlcnRleEJ1ZmZlclR5cGVkIGluc3RhbmNlb2YgVWludDhBcnJheSkgPyBwYy5UWVBFX1VJTlQ4IDogcGMuVFlQRV9VSU5UMTY7XHJcbiAgICAgICAgY29uc3QgdmVydGV4RGVzYyA9IFt7XHJcbiAgICAgICAgICAgIHNlbWFudGljOiBwYy5TRU1BTlRJQ19QT1NJVElPTixcclxuICAgICAgICAgICAgY29tcG9uZW50czogY29vcmRzVmVydGV4U2l6ZSxcclxuICAgICAgICAgICAgdHlwZTogY29vcmRzRm9ybWF0LFxyXG4gICAgICAgICAgICBub3JtYWxpemU6IGZhbHNlLFxyXG4gICAgICAgICAgICBhc0ludDogdHJ1ZVxyXG4gICAgICAgIH1dO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IHBjLlZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSwgdmVydGV4RGVzYywgdmVydGV4QnVmZmVyLnBhdGNoVmVydGV4QnVmZmVyTGVuZ3RoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2J1aWxkSW5zdGFuY2luZ1ZlcnRleEZvcm1hdChncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlLCBpbnN0YW5jZXI6IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmc8YW55Pikge1xyXG5cclxuICAgICAgICBjb25zdCB0eXBlID0gaW5zdGFuY2VyLmJ1ZmZlclR5cGUgPT09IFVpbnQxNkFycmF5ID8gcGMuVFlQRV9VSU5UMTYgOlxyXG4gICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZXIuYnVmZmVyVHlwZSA9PT0gVWludDhBcnJheSA/ICBwYy5UWVBFX1VJTlQ4IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuVFlQRV9GTE9BVDMyO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IHBjLlZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSwgW3tcclxuICAgICAgICAgICAgc2VtYW50aWM6IHBjLlNFTUFOVElDX0FUVFIxMCxcclxuICAgICAgICAgICAgY29tcG9uZW50czogaW5zdGFuY2VyLml0ZW1CdWZmZXJTaXplLFxyXG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICBub3JtYWxpemU6IGZhbHNlLFxyXG4gICAgICAgICAgICBhc0ludDogdHJ1ZVxyXG4gICAgICAgIH1dKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2J1aWxkSW5zdGFuY2luZ1ZlcnRleEJ1ZmZlcihncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlLCBpbnN0YW5jZXI6IElUZXJyYWluUGF0Y2hlc0luc3RhbmNpbmc8YW55PiwgZGF0YTogVWludDE2QXJyYXkgfCBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBwYy5WZXJ0ZXhCdWZmZXIoZ3JhcGhpY3NEZXZpY2UsIHRoaXMuX2J1aWxkSW5zdGFuY2luZ1ZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSwgaW5zdGFuY2VyKSwgZGF0YS5sZW5ndGggLyBpbnN0YW5jZXIuaXRlbUJ1ZmZlclNpemUsIHtcclxuICAgICAgICAgICAgdXNhZ2U6IHBjLkJVRkZFUl9HUFVEWU5BTUlDLFxyXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICBzdG9yYWdlOiBmYWxzZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3NldEN1c3RvbVByaW1pdGl2ZUNodW5rcyh0ZXJyYWluOiBCYXNlVGVycmFpbiwgbWVzaDogcGN4Lk1lc2ggJiBDdXN0b21NZXNoPElQYXRjaFByaW1pdGl2ZT4pIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hlcyA9IG5ldyBBcnJheTxJUHJpbWl0aXZlPElQYXRjaFByaW1pdGl2ZT4+KHRlcnJhaW4ubnVtUGF0Y2hlc1ggKiB0ZXJyYWluLm51bVBhdGNoZXNaKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcGF0Y2haID0gMDsgcGF0Y2haIDwgdGVycmFpbi5udW1QYXRjaGVzWjsgcGF0Y2haKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHBhdGNoWCA9IDA7IHBhdGNoWCA8IHRlcnJhaW4ubnVtUGF0Y2hlc1g7IHBhdGNoWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hJbmRleCA9IHBhdGNoWiAqIHRlcnJhaW4ubnVtUGF0Y2hlc1ggKyBwYXRjaFg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaEJ1ZiAgID0gdGhpcy5idWZmZXJBcnJheVtwYXRjaEluZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICBwYXRjaGVzW3BhdGNoSW5kZXhdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBjLlBSSU1JVElWRV9UUklBTkdMRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGNoQ29vcmRPZmZzZXRQYXJhbU5hbWVdOiBbcGF0Y2hCdWYubWluWCwgcGF0Y2hCdWYubWluWl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRjaExvZENvcmVQYXJhbU5hbWVdOiBwYXRjaEJ1Zi5sb2QuY29yZSxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZXNoLnByaW1pdGl2ZUNodW5rcyA9IFtwYXRjaGVzXTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX2NyZWF0ZUN1c3RvbUJhZ01lc2goYXBwOiBwY3guQXBwQmFzZSwgZW50aXR5OiBwY3guRW50aXR5LCBtYXRlcmlhbDogcGN4Lk1hdGVyaWFsLCB0ZXJyYWluOiBCYXNlVGVycmFpbik6IHBjeC5NZXNoSW5zdGFuY2UgJiBDdXN0b21NZXNoSW5zdGFuY2U8SVBhdGNoUHJpbWl0aXZlPiB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVzaCA9IG5ldyBwYy5NZXNoKGFwcC5ncmFwaGljc0RldmljZSkgYXMgcGN4Lk1lc2ggJiBDdXN0b21NZXNoPElQYXRjaFByaW1pdGl2ZT47XHJcbiAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gcGF0Y2hNZXNoLnByaW1pdGl2ZVswXTtcclxuXHJcbiAgICAgICAgcGF0Y2hNZXNoLmFhYmIgPSB0aGlzLmFhYmI7XHJcbiAgICAgICAgcGF0Y2hNZXNoLmluZGV4QnVmZmVyWzBdID0gdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXI7XHJcbiAgICAgICAgcGF0Y2hNZXNoLnZlcnRleEJ1ZmZlciAgID0gdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyO1xyXG5cclxuICAgICAgICB0aGlzLl9zZXRDdXN0b21QcmltaXRpdmVDaHVua3ModGVycmFpbiwgcGF0Y2hNZXNoKTtcclxuXHJcbiAgICAgICAgcHJpbWl0aXZlLnR5cGUgPSBwYy5QUklNSVRJVkVfVFJJQU5HTEVTO1xyXG4gICAgICAgIHByaW1pdGl2ZS5iYXNlID0gMDtcclxuICAgICAgICBwcmltaXRpdmUuY291bnQgPSAwO1xyXG4gICAgICAgIHByaW1pdGl2ZS5pbmRleGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hNZXNoSW5zdGFuY2UgPSBuZXcgcGMuTWVzaEluc3RhbmNlKHBhdGNoTWVzaCwgbWF0ZXJpYWwsIGVudGl0eSkgYXMgcGN4Lk1lc2hJbnN0YW5jZSAmIEN1c3RvbU1lc2hJbnN0YW5jZTxJUGF0Y2hQcmltaXRpdmU+O1xyXG5cclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5jdWxsID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnZpc2libGVUaGlzRnJhbWUgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRQYXJhbWV0ZXIocGF0Y2hMb2RDb3JlUGFyYW1OYW1lLCAwLCAweGZmZmZmZmZmKTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRQYXJhbWV0ZXIocGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSwgWzAsIDBdLCAweGZmZmZmZmZmKTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRJbnN0YW5jaW5nKG51bGwpO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnNldEN1c3RvbUFhYmIodGhpcy5hYWJiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhdGNoTWVzaEluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfY3JlYXRlSW5zdGFuY2luZ01lc2goYXBwOiBwY3guQXBwQmFzZSwgZW50aXR5OiBwY3guRW50aXR5LCBtYXRlcmlhbDogcGN4Lk1hdGVyaWFsLCBsb2RJbmZvOiBJUGF0Y2hMb2RCYXNlLCBwcmltaXRpdmVJbmZvOiBJU2luZ2xlTG9kSW5mbywgaW5zdGFuY2VyOiBJVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nPGFueT4sIGRhdGE6IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSk6IHBjeC5NZXNoSW5zdGFuY2Uge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVzaCA9IG5ldyBwYy5NZXNoKGFwcC5ncmFwaGljc0RldmljZSk7XHJcbiAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gcGF0Y2hNZXNoLnByaW1pdGl2ZVswXTtcclxuICAgICAgICBjb25zdCBpbnN0YW5jaW5nQnVmID0gdGhpcy5fYnVpbGRJbnN0YW5jaW5nVmVydGV4QnVmZmVyKGFwcC5ncmFwaGljc0RldmljZSwgaW5zdGFuY2VyLCBkYXRhKTtcclxuXHJcbiAgICAgICAgcGF0Y2hNZXNoLmFhYmIgPSB0aGlzLmFhYmI7XHJcbiAgICAgICAgcGF0Y2hNZXNoLmluZGV4QnVmZmVyWzBdID0gdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXI7XHJcbiAgICAgICAgcGF0Y2hNZXNoLnZlcnRleEJ1ZmZlciAgID0gdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyO1xyXG5cclxuICAgICAgICBwcmltaXRpdmUudHlwZSA9IHBjLlBSSU1JVElWRV9UUklBTkdMRVM7XHJcbiAgICAgICAgcHJpbWl0aXZlLmJhc2UgPSBwcmltaXRpdmVJbmZvLnN0YXJ0O1xyXG4gICAgICAgIHByaW1pdGl2ZS5jb3VudCA9IHByaW1pdGl2ZUluZm8uY291bnQ7XHJcbiAgICAgICAgcHJpbWl0aXZlLmluZGV4ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaE1lc2hJbnN0YW5jZSA9IG5ldyBwYy5NZXNoSW5zdGFuY2UocGF0Y2hNZXNoLCBtYXRlcmlhbCwgZW50aXR5KTtcclxuXHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UuY3VsbCA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS52aXNpYmxlVGhpc0ZyYW1lID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnJlY2VpdmVTaGFkb3cgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2Uuc2V0UGFyYW1ldGVyKHBhdGNoTG9kQ29yZVBhcmFtTmFtZSwgbG9kSW5mby5jb3JlLCAweGZmZmZmZmZmKTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRJbnN0YW5jaW5nKGluc3RhbmNpbmdCdWYsIGZhbHNlKTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRDdXN0b21BYWJiKHRoaXMuYWFiYik7XHJcblxyXG4gICAgICAgIHJldHVybiBwYXRjaE1lc2hJbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX2NyZWF0ZVBhdGNoTWVzaChwYXRjaEluZGV4OiBudW1iZXIsIGFwcDogcGN4LkFwcEJhc2UsIGVudGl0eTogcGN4LkVudGl0eSwgbWF0ZXJpYWw6IHBjeC5NYXRlcmlhbCk6IHBjeC5NZXNoSW5zdGFuY2Uge1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaEJ1ZiAgPSB0aGlzLmJ1ZmZlckFycmF5W3BhdGNoSW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVzaCA9IG5ldyBwYy5NZXNoKGFwcC5ncmFwaGljc0RldmljZSk7XHJcbiAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gcGF0Y2hNZXNoLnByaW1pdGl2ZVswXTtcclxuXHJcbiAgICAgICAgcGF0Y2hNZXNoLmFhYmIgPSB0aGlzLmFhYmI7XHJcbiAgICAgICAgcGF0Y2hNZXNoLmluZGV4QnVmZmVyWzBdID0gdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXI7XHJcbiAgICAgICAgcGF0Y2hNZXNoLnZlcnRleEJ1ZmZlciAgID0gdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyO1xyXG5cclxuICAgICAgICBwcmltaXRpdmUudHlwZSA9IHBjLlBSSU1JVElWRV9UUklBTkdMRVM7XHJcbiAgICAgICAgcHJpbWl0aXZlLmJhc2UgPSAwO1xyXG4gICAgICAgIHByaW1pdGl2ZS5jb3VudCA9IDA7XHJcbiAgICAgICAgcHJpbWl0aXZlLmluZGV4ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaE1lc2hJbnN0YW5jZSA9IG5ldyBwYy5NZXNoSW5zdGFuY2UocGF0Y2hNZXNoLCBtYXRlcmlhbCwgZW50aXR5KTtcclxuXHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UuY3VsbCA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS52aXNpYmxlVGhpc0ZyYW1lID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnJlY2VpdmVTaGFkb3cgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2Uuc2V0UGFyYW1ldGVyKHBhdGNoQ29vcmRPZmZzZXRQYXJhbU5hbWUsIFtwYXRjaEJ1Zi5taW5YLCBwYXRjaEJ1Zi5taW5aXSwgMHhmZmZmZmZmZik7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2Uuc2V0SW5zdGFuY2luZyhudWxsKTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRDdXN0b21BYWJiKHRoaXMuYWFiYik7XHJcblxyXG4gICAgICAgIHJldHVybiBwYXRjaE1lc2hJbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9kZXN0cm95TWVzaChtZXNoSW5zdGFuY2U6IHBjeC5NZXNoSW5zdGFuY2UpIHtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogZG9udCBkZXN0cm95IHNoYXJlZCBpbmRleCBhbmQgdmVydGV4IGJ1ZmZlcnNcclxuICAgICAgICBpZiAobWVzaEluc3RhbmNlLm1lc2gpIHtcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLm1lc2guaW5kZXhCdWZmZXIgPSBbbnVsbF0gYXMgdW5rbm93biBhcyBwY3guSW5kZXhCdWZmZXJbXTtcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLm1lc2gudmVydGV4QnVmZmVyID0gbnVsbCBhcyB1bmtub3duIGFzIHBjeC5WZXJ0ZXhCdWZmZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZXNoSW5zdGFuY2UuZGVzdHJveSgpO1xyXG5cclxuICAgICAgICBpZiAobWVzaEluc3RhbmNlLm1lc2gpIHtcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLm1lc2guZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1lc2hJbnN0YW5jZS5pbnN0YW5jaW5nRGF0YSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgaWYgKG1lc2hJbnN0YW5jZS5pbnN0YW5jaW5nRGF0YS5kZXN0cm95KSB7IC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5pbnN0YW5jaW5nRGF0YS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5pbnN0YW5jaW5nRGF0YS52ZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG92ZXJyaWRlIF9kZXN0cm95SW5zdGFuY2luZ01lc2gobWVzaDogcGN4Lk1lc2hJbnN0YW5jZSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lNZXNoKG1lc2gpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfZGVzdHJveVBhdGNoTWVzaChwYXRjaEluZGV4OiBudW1iZXIpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hNZXNoSW5zdGFuY2UgPSB0aGlzLm1lc2hJbnN0YW5jZUFycmF5W3BhdGNoSW5kZXhdO1xyXG5cclxuICAgICAgICBpZiAocGF0Y2hNZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVzdHJveU1lc2gocGF0Y2hNZXNoSW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX2Rlc3Ryb3lDdXN0b21CYWdNZXNoKG1lc2g6IHBjeC5NZXNoSW5zdGFuY2UgJiBDdXN0b21NZXNoSW5zdGFuY2UpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9kZXN0cm95TWVzaChtZXNoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVJbmRleEJ1ZmZlcihncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlKSB7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlciA9IG5ldyBwYy5JbmRleEJ1ZmZlcihcclxuICAgICAgICAgICAgZ3JhcGhpY3NEZXZpY2UsXHJcbiAgICAgICAgICAgIHBjLklOREVYRk9STUFUX1VJTlQzMixcclxuICAgICAgICAgICAgdGhpcy50ZXJyYWluLnBhdGNoSW5kaWNlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHBjLkJVRkZFUl9TVEFUSUMsXHJcbiAgICAgICAgICAgIHRoaXMudGVycmFpbi5wYXRjaEluZGljZXMsXHJcbiAgICAgICAgICAgIHsgc3RvcmFnZTogZmFsc2UgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlVmVydGV4QnVmZmVyKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UpIHtcclxuICAgICAgICBjb25zdCBmb3JtYXQgPSB0aGlzLl9idWlsZFZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSwgdGhpcy50ZXJyYWluLnBhdGNoVmVydGljZXMpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlciA9IG5ldyBwYy5WZXJ0ZXhCdWZmZXIoZ3JhcGhpY3NEZXZpY2UsIGZvcm1hdCwgZm9ybWF0LnZlcnRleENvdW50LCB7XHJcbiAgICAgICAgICAgIHVzYWdlOiBwYy5CVUZGRVJfU1RBVElDLFxyXG4gICAgICAgICAgICBzdG9yYWdlOiBmYWxzZSxcclxuICAgICAgICAgICAgZGF0YTogdGhpcy50ZXJyYWluLnBhdGNoVmVydGljZXMucGF0Y2hWZXJ0ZXhCdWZmZXJEYXRhLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRIZWlnaHRNYXBUZXh0dXJlKGFwcDogcGN4LkFwcEJhc2UpIHtcclxuXHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwPy5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGhlaWdodEZvcm1hdCAgPSBnZXRIZWlnaHRNYXBGb3JtYXQoYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnRlcnJhaW4uaGVpZ2h0TWFwKTtcclxuICAgICAgICBjb25zdCBmb3JtYXQgICAgICAgID0gZ2V0VGV4dHVyZVR5cGUoaGVpZ2h0Rm9ybWF0KTtcclxuICAgICAgICBjb25zdCBidWZGb3JtYXQgICAgID0gZ2V0SGVpZ2h0TWFwQ2h1bmtCdWZmZXJUeXBlKGFwcC5ncmFwaGljc0RldmljZSwgZm9ybWF0KTtcclxuICAgICAgICBjb25zdCBkYXRhQ2h1bmtTaXplID0gdGhpcy50ZXJyYWluLmhlaWdodE1hcC5kYXRhQ2h1bmtTaXplO1xyXG4gICAgICAgIGNvbnN0IGNodW5rcyAgICAgICAgPSB0aGlzLnRlcnJhaW4uaGVpZ2h0TWFwLmdldENodW5rc0J1ZmZlcnMoYnVmRm9ybWF0KTtcclxuXHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwTGV2ZWxzVHlwZSA9IGJ1ZkZvcm1hdDtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAgPSBuZXcgcGMuVGV4dHVyZShhcHAuZ3JhcGhpY3NEZXZpY2UsIHtcclxuICAgICAgICAgICAgd2lkdGg6IGRhdGFDaHVua1NpemUsXHJcbiAgICAgICAgICAgIGhlaWdodDogZGF0YUNodW5rU2l6ZSxcclxuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXQsXHJcbiAgICAgICAgICAgIG1pcG1hcHM6IGZhbHNlLFxyXG4gICAgICAgICAgICBtaW5GaWx0ZXI6IHBjLkZJTFRFUl9ORUFSRVNULFxyXG4gICAgICAgICAgICBtYWdGaWx0ZXI6IHBjLkZJTFRFUl9ORUFSRVNULFxyXG4gICAgICAgICAgICBhZGRyZXNzVTogcGMuQUREUkVTU19DTEFNUF9UT19FREdFLFxyXG4gICAgICAgICAgICBhZGRyZXNzVjogcGMuQUREUkVTU19DTEFNUF9UT19FREdFLFxyXG4gICAgICAgICAgICBhZGRyZXNzVzogcGMuQUREUkVTU19DTEFNUF9UT19FREdFLFxyXG4gICAgICAgICAgICBmbGlwWTogYXBwLmdyYXBoaWNzRGV2aWNlLmlzV2ViR1BVLFxyXG4gICAgICAgICAgICBhcnJheUxlbmd0aDogY2h1bmtzLmxlbmd0aCxcclxuICAgICAgICAgICAgbGV2ZWxzOiBbY2h1bmtzXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSB1cGRhdGVJbmRleEJ1ZmZlcigpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlSW5kZXhCdWZmZXIodGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9yd2FyZFJlbmRlcmVyIHx8IHRoaXMuaW5zdGFuY2luZykge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1lc2hlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1lc2hJbnN0YW5jZUFycmF5KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLm1lc2guaW5kZXhCdWZmZXJbMF0gPSB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZU1hdGVyaWFsKCk6IHBjeC5TdGFuZGFyZE1hdGVyaWFsIHtcclxuXHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgcGMuU3RhbmRhcmRNYXRlcmlhbCgpO1xyXG4gICAgICAgICAgICAgIG1hdGVyaWFsLm5hbWUgPSAnVGVycmFpbk1hdGVyaWFsJztcclxuXHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHBhdGNoSW5zdENvb3JkT2Zmc2V0UGFyYW1OYW1lLCBwYy5TRU1BTlRJQ19BVFRSMTApO1xyXG4gICAgICAgIG1hdGVyaWFsLnNldEF0dHJpYnV0ZSh2ZXJ0ZXhDb29yZEF0dHJOYW1lLCBwYy5TRU1BTlRJQ19QT1NJVElPTik7XHJcblxyXG4gICAgICAgIHJldHVybiBtYXRlcmlhbDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9iaW5kRGVwZW5kZW5jaWVzVG9NYXRlcmlhbChtYXRlcmlhbDogcGN4LlN0YW5kYXJkTWF0ZXJpYWwpIHtcclxuXHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHBhdGNoSW5zdENvb3JkT2Zmc2V0UGFyYW1OYW1lLCBwYy5TRU1BTlRJQ19BVFRSMTApO1xyXG4gICAgICAgIG1hdGVyaWFsLnNldEF0dHJpYnV0ZSh2ZXJ0ZXhDb29yZEF0dHJOYW1lLCBwYy5TRU1BTlRJQ19QT1NJVElPTik7XHJcblxyXG4gICAgICAgIG1hdGVyaWFsLnNldFBhcmFtZXRlcihwYXRjaExvZENvcmVQYXJhbU5hbWUsIDApO1xyXG4gICAgICAgIG1hdGVyaWFsLnNldFBhcmFtZXRlcihwYXRjaENvb3JkT2Zmc2V0UGFyYW1OYW1lLCBbMCwgMF0pO1xyXG4gICAgICAgIG1hdGVyaWFsLnNldFBhcmFtZXRlcih0ZXJyYWluSGVpZ2h0TWFwUGFyYW1OYW1lLCB0aGlzLl9oZWlnaHRNYXApO1xyXG5cclxuICAgICAgICBjb25zdCBmb3JtYXQgPSBnZXRIZWlnaHRNYXBGb3JtYXQodGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnRlcnJhaW4uaGVpZ2h0TWFwKTtcclxuICAgICAgICBjb25zdCBpbnN0YW5jaW5nID0gdGhpcy5pbnN0YW5jaW5nIGluc3RhbmNlb2YgVGVycmFpblBhdGhjZXNDb21iaW5lSW5zdGFuY2luZyA/ICdjb21iaW5lJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2luZyBpbnN0YW5jZW9mIFRlcnJhaW5QYXRoY2VzSW5zdGFuY2luZyA/ICdzaW1wbGUnIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHBjVmVyc2lvbiA9IGB2JHtwYy52ZXJzaW9uWzBdfWAgYXMgdW5rbm93biBhcyBhbnk7XHJcbiAgICAgICAgY29uc3QgY2h1bmtzU3RvcmUgPSBnZXRUZXJyYWluU2hhZGVyQ2h1bmtzKHtcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMudGVycmFpbi53aWR0aCxcclxuICAgICAgICAgICAgZGVwdGg6IHRoaXMudGVycmFpbi5kZXB0aCxcclxuICAgICAgICAgICAgcGF0Y2hTaXplOiB0aGlzLnRlcnJhaW4ucGF0Y2hTaXplLFxyXG4gICAgICAgICAgICBoZWlnaHRNYXBDaHVua1NpemU6IHRoaXMudGVycmFpbi5oZWlnaHRNYXAuZGF0YUNodW5rU2l6ZSwgXHJcbiAgICAgICAgICAgIGluc3RhbmNpbmc6IGluc3RhbmNpbmcsXHJcbiAgICAgICAgICAgIGhlaWdodE1hcEZvcm1hdDogZm9ybWF0LFxyXG4gICAgICAgICAgICBlbmdpbmVWZXJzaW9uOiBwY1ZlcnNpb24sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2h1bmtOYW1lcyA9IE9iamVjdC5rZXlzKGNodW5rc1N0b3JlKTtcclxuXHJcbiAgICAgICAgaWYgKHBjVmVyc2lvbiA9PT0gJ3YxJykge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2h1bmtzID0gbWF0ZXJpYWwuY2h1bmtzIGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcclxuXHJcbiAgICAgICAgICAgIGNodW5rcy5BUElWZXJzaW9uID0gcGMuQ0hVTktBUElfMV83MDtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNodW5rTmFtZSBvZiBjaHVua05hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBjaHVua3NbY2h1bmtOYW1lXSA9IGNodW5rc1N0b3JlW2NodW5rTmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaGFkZXJDaHVua3MgPSBtYXRlcmlhbC5nZXRTaGFkZXJDaHVua3MocGMuU0hBREVSTEFOR1VBR0VfR0xTTCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGNodW5rTmFtZSBvZiBjaHVua05hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBzaGFkZXJDaHVua3Muc2V0KGNodW5rTmFtZSwgY2h1bmtzU3RvcmVbY2h1bmtOYW1lXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWF0ZXJpYWwuc2hhZGVyQ2h1bmtzVmVyc2lvbiA9IHBjLkNIVU5LQVBJXzFfNzA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtYXRlcmlhbC51cGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgc2V0SW5zdGFuY2luZyh2YWx1ZTogSVRlcnJhaW5QYXRjaGVzSW5zdGFuY2luZzxhbnk+IHwgdW5kZWZpbmVkLCB1cGRhdGVNZXNoZXM6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzLmluc3RhbmNpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3VwZXIuc2V0SW5zdGFuY2luZyh2YWx1ZSwgZmFsc2UpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWF0ZXJpYWwpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2JpbmREZXBlbmRlbmNpZXNUb01hdGVyaWFsKHRoaXMuX21hdGVyaWFsKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh1cGRhdGVNZXNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWVzaGVzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHNldE1hdGVyaWFsKG1hdGVyaWFsOiBwY3guU3RhbmRhcmRNYXRlcmlhbCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2JpbmREZXBlbmRlbmNpZXNUb01hdGVyaWFsKG1hdGVyaWFsKTtcclxuICAgICAgICBzdXBlci5zZXRNYXRlcmlhbChtYXRlcmlhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHVwZGF0ZUhlaWdodHMoem9uZTogSVpvbmUpIHtcclxuICAgICAgICBzdXBlci51cGRhdGVIZWlnaHRzKHpvbmUpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUhlaWdodE1hcCh6b25lKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdChhcHA6IHBjeC5BcHBCYXNlLCBlbnRpdHk6IHBjeC5FbnRpdHksIG1hdGVyaWFsOiBwY3guU3RhbmRhcmRNYXRlcmlhbCkge1xyXG4gICAgICAgIHRoaXMuX2luaXRIZWlnaHRNYXBUZXh0dXJlKGFwcCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlSW5kZXhCdWZmZXIoYXBwLmdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVWZXJ0ZXhCdWZmZXIoYXBwLmdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICBzdXBlci5pbml0KGFwcCwgZW50aXR5LCBtYXRlcmlhbCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBjYWxjTmV4dFBvd2VyT2ZUd28sIHJhbmRvbUZsb2F0UmFuZ2UgfSBmcm9tIFwiLi4vU2hhcmVkL1V0aWxzLm1qc1wiO1xyXG5pbXBvcnQgeyBpbnQsIGZsb2F0IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IEJhc2VUZXJyYWluIGZyb20gXCIuL1RlcnJhaW4ubWpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWlkcG9pbnREaXNwVGVycmFpbiBleHRlbmRzIEJhc2VUZXJyYWluIHtcclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlTWlkcG9pbnREaXNwbGFjZW1lbnQocm91Z2huZXNzOiBmbG9hdCk6IHZvaWQge1xyXG5cclxuICAgICAgICBpZiAocm91Z2huZXNzIDwgMC4wKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwicm91Z2huZXNzIG11c3QgYmUgcG9zaXRpdmVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jcmVhdGVNaWRwb2ludERpc3BsYWNlbWVudEYzMihyb3VnaG5lc3MpO1xyXG4gICAgICAgIHRoaXMubm9ybWFsaXplSGVpZ2h0TWFwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY3JlYXRlTWlkcG9pbnREaXNwbGFjZW1lbnRGMzIocm91Z2huZXNzOiBmbG9hdCk6IHZvaWQge1xyXG5cclxuICAgICAgICBsZXQgcmVjdFNpemUgID0gY2FsY05leHRQb3dlck9mVHdvKHRoaXMud2lkdGgpO1xyXG4gICAgICAgIGxldCBjdXJIZWlnaHQgPSByZWN0U2l6ZSAvIDIuMDtcclxuXHJcbiAgICAgICAgY29uc3QgaGVpZ2h0UmVkdWNlID0gTWF0aC5wb3coMi4wLCAtcm91Z2huZXNzKTtcclxuICAgIFxyXG4gICAgICAgIHdoaWxlIChyZWN0U2l6ZSA+IDApIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RpYW1vbmRTdGVwKHJlY3RTaXplLCBjdXJIZWlnaHQpO1xyXG4gICAgICAgICAgICB0aGlzLl9zcXVhcmVTdGVwKHJlY3RTaXplLCBjdXJIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgcmVjdFNpemUgPSAocmVjdFNpemUgLyAyKSB8IDA7XHJcbiAgICAgICAgICAgIGN1ckhlaWdodCAqPSBoZWlnaHRSZWR1Y2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2RpYW1vbmRTdGVwKHJlY3RTaXplOiBpbnQsIGN1ckhlaWdodDogZmxvYXQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY29uc3QgSGFsZlJlY3RTaXplID0gTWF0aC5mbG9vcihyZWN0U2l6ZSAvIDIpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuZGVwdGg7IHkgKz0gcmVjdFNpemUpIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCArPSByZWN0U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgbmV4dFggPSAoeCArIHJlY3RTaXplKSAlIHRoaXMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV4dFkgPSAoeSArIHJlY3RTaXplKSAlIHRoaXMuZGVwdGg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0WCA8IHgpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0WCA9IHRoaXMud2lkdGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFkgPCB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFkgPSB0aGlzLmRlcHRoIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdG9wTGVmdCAgICAgPSB0aGlzLmhlaWdodE1hcC5nZXQoeCwgeSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b3BSaWdodCAgICA9IHRoaXMuaGVpZ2h0TWFwLmdldChuZXh0WCwgeSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib3R0b21MZWZ0ICA9IHRoaXMuaGVpZ2h0TWFwLmdldCh4LCBuZXh0WSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IHRoaXMuaGVpZ2h0TWFwLmdldChuZXh0WCwgbmV4dFkpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaWRYID0gKHggKyBIYWxmUmVjdFNpemUpICUgdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pZFkgPSAoeSArIEhhbGZSZWN0U2l6ZSkgJSB0aGlzLmRlcHRoO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByYW5kVmFsdWUgPSByYW5kb21GbG9hdFJhbmdlKGN1ckhlaWdodCwgLWN1ckhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaWRQb2ludCA9ICh0b3BMZWZ0ICsgdG9wUmlnaHQgKyBib3R0b21MZWZ0ICsgYm90dG9tUmlnaHQpIC8gNC4wO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhlaWdodChtaWRYLCBtaWRZLCBtaWRQb2ludCArIHJhbmRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc3F1YXJlU3RlcChyZWN0U2l6ZTogaW50LCBjdXJIZWlnaHQ6IGZsb2F0KTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGhhbGZSZWN0U2l6ZSA9IChyZWN0U2l6ZSAvIDIpIHwgMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmRlcHRoOyB5ICs9IHJlY3RTaXplKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHggKz0gcmVjdFNpemUpIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IG5leHRYID0gKHggKyByZWN0U2l6ZSkgJSB0aGlzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5leHRZID0gKHkgKyByZWN0U2l6ZSkgJSB0aGlzLmRlcHRoO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFggPCB4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFggPSB0aGlzLndpZHRoIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRZIDwgeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRZID0gdGhpcy5kZXB0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pZFggPSAoeCArIGhhbGZSZWN0U2l6ZSkgJSB0aGlzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWlkWSA9ICh5ICsgaGFsZlJlY3RTaXplKSAlIHRoaXMuZGVwdGg7XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldk1pZFggPSAoeCAtIGhhbGZSZWN0U2l6ZSArIHRoaXMud2lkdGgpICUgdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZNaWRZID0gKHkgLSBoYWxmUmVjdFNpemUgKyB0aGlzLmRlcHRoKSAlIHRoaXMuZGVwdGg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1clRvcExlZnQgID0gdGhpcy5oZWlnaHRNYXAuZ2V0KHgsIHkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VyVG9wUmlnaHQgPSB0aGlzLmhlaWdodE1hcC5nZXQobmV4dFgsIHkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VyQ2VudGVyICAgPSB0aGlzLmhlaWdodE1hcC5nZXQobWlkWCwgbWlkWSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2WUNlbnRlciA9IHRoaXMuaGVpZ2h0TWFwLmdldChtaWRYLCBwcmV2TWlkWSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJCb3RMZWZ0ICA9IHRoaXMuaGVpZ2h0TWFwLmdldCh4LCBuZXh0WSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2WENlbnRlciA9IHRoaXMuaGVpZ2h0TWFwLmdldChwcmV2TWlkWCwgbWlkWSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1ckxlZnRNaWQgPSAoY3VyVG9wTGVmdCArIGN1ckNlbnRlciArIGN1ckJvdExlZnQgKyBwcmV2WENlbnRlcikgLyA0LjAgKyByYW5kb21GbG9hdFJhbmdlKC1jdXJIZWlnaHQsIGN1ckhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJUb3BNaWQgID0gKGN1clRvcExlZnQgKyBjdXJDZW50ZXIgKyBjdXJUb3BSaWdodCArIHByZXZZQ2VudGVyKSAvIDQuMCArIHJhbmRvbUZsb2F0UmFuZ2UoLWN1ckhlaWdodCwgY3VySGVpZ2h0KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIZWlnaHQobWlkWCwgeSwgY3VyVG9wTWlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KHgsIG1pZFksIGN1ckxlZnRNaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFRlcnJhaW5SYXljYXN0UmVzdWx0IHtcclxuXHJcbiAgICBwdWJsaWMgdmVydGV4SW5kZXggPSAwO1xyXG4gICAgcHVibGljIGRpc3RhbmNlICAgID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgIHB1YmxpYyBsb2NhbE5vcm1hbCA9IG5ldyBwYy5WZWMzKDAsIDEsIDApO1xyXG4gICAgcHVibGljIG5vcm1hbCAgICAgID0gbmV3IHBjLlZlYzMoMCwgMSwgMCk7XHJcbiAgICBwdWJsaWMgbG9jYWxQb2ludCAgPSBuZXcgcGMuVmVjMyhOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcclxuICAgIHB1YmxpYyBwb2ludCAgICAgICA9IG5ldyBwYy5WZWMzKE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpO1xyXG5cclxuICAgIHB1YmxpYyBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLnZlcnRleEluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICB0aGlzLmxvY2FsTm9ybWFsLnNldCgwLCAxLCAwKTtcclxuICAgICAgICB0aGlzLm5vcm1hbC5zZXQoMCwgMSwgMCk7XHJcbiAgICAgICAgdGhpcy5sb2NhbFBvaW50LnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcclxuICAgICAgICB0aGlzLnBvaW50LnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGVycmFpblJheWNhc3RSZXN1bHQ7IiwiaW1wb3J0IHsgaW50IH0gZnJvbSBcIi4uL1NoYXJlZC9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgSUZydXN0dW0sIElHcmlkUGF0Y2hSZW5kZXJQcmVwYXJlciB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0dlb21pcEdyaWRSZW5kZXJQcmVwYXJlci5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoTG9kIH0gZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vTG9kTWFuYWdlci5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoUHJpbWl0aXZlIH0gZnJvbSBcIi4vVGVycmFpblBhdGNoZXMubWpzXCI7XHJcbmltcG9ydCBUZXJyYWluUGF0Y2hlc0Jhc2ljLCB7IFRlcnJhaW5QYXRjaEJ1ZmZlckJhc2ljIH0gZnJvbSBcIi4vVGVycmFpblBhdGNoZXNCYXNpYy5tanNcIjtcclxuaW1wb3J0IHsgcGF0Y2hMb2RDb3JlUGFyYW1OYW1lIH0gZnJvbSBcIi4vVGVycmFpblBhdGNoZXNTaGFkZXJDaHVua3MubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZW5kZXJPcHRpb25zIHtcclxuICAgIHdpcmVmcmFtZT86IGJvb2xlYW4sXHJcbiAgICBjYXN0U2hhZG93PzogYm9vbGVhbixcclxuICAgIHJlY2VpdmVTaGFkb3c/OiBib29sZWFuLFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXJyYWluUmVuZGVyUHJlcGFyZXIgaW1wbGVtZW50cyBJR3JpZFBhdGNoUmVuZGVyUHJlcGFyZXIge1xyXG5cclxuICAgIHByaXZhdGUgX3dpcmVmcmFtZTogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX2Nhc3RTaGFkb3c6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9yZWNlaXZlU2hhZG93OiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBfaGFzVXBkYXRlZEhlaWdodHM6IGJvb2xlYW47XHJcblxyXG4gICAgcHVibGljIGdldCB3aXJlZnJhbWUoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl93aXJlZnJhbWU7IH1cclxuICAgIHB1YmxpYyBzZXQgd2lyZWZyYW1lKHY6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl93aXJlZnJhbWUgPSB2O1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgY2FzdFNoYWRvdygpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMuX2Nhc3RTaGFkb3c7IH1cclxuICAgIHB1YmxpYyBzZXQgY2FzdFNoYWRvdyh2OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fY2FzdFNoYWRvdyA9IHY7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCByZWNlaXZlU2hhZG93KCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fcmVjZWl2ZVNoYWRvdzsgfVxyXG4gICAgcHVibGljIHNldCByZWNlaXZlU2hhZG93KHY6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9yZWNlaXZlU2hhZG93ID0gdjtcclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkb25seSBwYXRjaGVzU3RvcmU6IFRlcnJhaW5QYXRjaGVzQmFzaWM8VGVycmFpblBhdGNoQnVmZmVyQmFzaWMsIElQYXRjaFByaW1pdGl2ZT47XHJcblxyXG4gICAgY29uc3RydWN0b3IocGF0Y2hlc1N0b3JlOiBUZXJyYWluUGF0Y2hlc0Jhc2ljPFRlcnJhaW5QYXRjaEJ1ZmZlckJhc2ljLCBJUGF0Y2hQcmltaXRpdmU+LCBvcHRpb25zOiBJUmVuZGVyT3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMucGF0Y2hlc1N0b3JlID0gcGF0Y2hlc1N0b3JlO1xyXG4gICAgICAgIHRoaXMuX3dpcmVmcmFtZSA9IG9wdGlvbnMud2lyZWZyYW1lID8/IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2Nhc3RTaGFkb3cgPSBvcHRpb25zLmNhc3RTaGFkb3cgPz8gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcmVjZWl2ZVNoYWRvdyA9IG9wdGlvbnMucmVjZWl2ZVNoYWRvdyA/PyBmYWxzZTtcclxuICAgICAgICB0aGlzLl9oYXNVcGRhdGVkSGVpZ2h0cyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdXBkYXRlTWVzaGVzKCkge1xyXG5cclxuICAgICAgICBjb25zdCBjdXN0b21NZXNoSW5zdGFuY2UgPSB0aGlzLnBhdGNoZXNTdG9yZS5jdXN0b21NZXNoSW5zdGFuY2U7XHJcbiAgICAgICAgaWYgKGN1c3RvbU1lc2hJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoKGN1c3RvbU1lc2hJbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IG1lc2hJbnN0YW5jZSBvZiB0aGlzLnBhdGNoZXNTdG9yZS5tZXNoSW5zdGFuY2VBcnJheSkge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoKG1lc2hJbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBhdGNoZXNTdG9yZS5pbnN0YW5jaW5nPy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoKGl0ZW0ub2JqZWN0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZU1lc2gobWVzaEluc3RhbmNlPzogcGN4Lk1lc2hJbnN0YW5jZSB8IG51bGwpIHtcclxuICAgICAgICBpZiAobWVzaEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tZXNoLnByaW1pdGl2ZVswXS50eXBlID0gdGhpcy5fd2lyZWZyYW1lID8gcGMuUFJJTUlUSVZFX0xJTkVTIDogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLmNhc3RTaGFkb3cgPSB0aGlzLl9jYXN0U2hhZG93O1xyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IHRoaXMuX3JlY2VpdmVTaGFkb3c7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgcHJlcGFyZVBhdGNoKHZpc2libGU6IGJvb2xlYW4sIGJhc2VJbmRleDogaW50LCBiYXNlVmVydGV4OiBpbnQsIGNvdW50OiBpbnQsIHBhdGNoWDogaW50LCBwYXRjaFo6IGludCwgbWluWDogaW50LCBtaW5aOiBpbnQsIHNpemU6IGludCwgbG9kSW5mbzogUmVhZG9ubHk8SVBhdGNoTG9kPikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRlcnJhaW4gICAgPSB0aGlzLnBhdGNoZXNTdG9yZS50ZXJyYWluO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoSW5kZXggPSBwYXRjaFogKiB0ZXJyYWluLm51bVBhdGNoZXNYICsgcGF0Y2hYO1xyXG4gICAgICAgIGNvbnN0IGJ1ZmZlciAgICAgPSB0aGlzLnBhdGNoZXNTdG9yZS5idWZmZXJBcnJheVtwYXRjaEluZGV4XTtcclxuICAgICAgICBjb25zdCBjdXJySGFzaCAgID0gYmFzZUluZGV4IC8gY291bnQ7XHJcblxyXG4gICAgICAgIGJ1ZmZlci5oYXNoICAgICAgICAgICAgICA9IGN1cnJIYXNoO1xyXG4gICAgICAgIGJ1ZmZlci52aXNpYmxlICAgICAgICAgICA9IHZpc2libGU7XHJcbiAgICAgICAgYnVmZmVyLmluZGljZXNCYXNlSW5kZXggID0gYmFzZUluZGV4O1xyXG4gICAgICAgIGJ1ZmZlci5pbmRpY2VzQmFzZVZlcnRleCA9IGJhc2VWZXJ0ZXg7XHJcbiAgICAgICAgYnVmZmVyLmluZGljZXNDb3VudCAgICAgID0gY291bnQ7XHJcbiAgICAgICAgYnVmZmVyLmxvZCAgICAgICAgICAgICAgID0gbG9kSW5mbztcclxuXHJcbiAgICAgICAgaWYgKGJ1ZmZlci5oZWlnaHRzVXBkYXRlZCkge1xyXG4gICAgICAgICAgICBidWZmZXIuaGVpZ2h0c1VwZGF0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgYnVmZmVyLmhlaWdodHNVcGRhdGVkVGhpc0ZyYW1lID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgdGhpcy5faGFzVXBkYXRlZEhlaWdodHMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGF0Y2hlc1N0b3JlLmN1c3RvbUZvcndhcmRSZW5kZXJlcikge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gdGhpcy5wYXRjaGVzU3RvcmUuY3VzdG9tTWVzaEluc3RhbmNlIS5tZXNoLnByaW1pdGl2ZUNodW5rc1swXVtwYXRjaEluZGV4XTtcclxuXHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5lbmFibGVkID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgcHJpbWl0aXZlLmJhc2UgICAgPSBiYXNlSW5kZXg7XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5jb3VudCAgID0gY291bnQ7XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS50eXBlICAgID0gdGhpcy5fd2lyZWZyYW1lID8gcGMuUFJJTUlUSVZFX0xJTkVTIDogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuXHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5hdHRyaWJ1dGVzW3BhdGNoTG9kQ29yZVBhcmFtTmFtZV0gPSBsb2RJbmZvLmNvcmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMucGF0Y2hlc1N0b3JlLmluc3RhbmNpbmcpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2aXNpYmxlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdCA9IHRoaXMucGF0Y2hlc1N0b3JlLmluc3RhbmNpbmcuaW5jcmVtZW50KGxvZEluZm8sIGJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChpbnN0LmNvdW50ID09PSAxICYmIGluc3Qub2JqZWN0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc2hJbnN0YW5jZSA9IGluc3Qub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IG1lc2hJbnN0YW5jZS5tZXNoLnByaW1pdGl2ZVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaEluc3RhbmNlLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS52aXNpYmxlVGhpc0ZyYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyA9IHRoaXMuX2Nhc3RTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaEluc3RhbmNlLnJlY2VpdmVTaGFkb3cgPSB0aGlzLl9yZWNlaXZlU2hhZG93O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcmltaXRpdmUudHlwZSA9IHRoaXMuX3dpcmVmcmFtZSA/IHBjLlBSSU1JVElWRV9MSU5FUyA6IHBjLlBSSU1JVElWRV9UUklBTkdMRVM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2UgPSB0aGlzLnBhdGNoZXNTdG9yZS5nZXRPckNyZWF0ZVBhdGNoTWVzaChwYXRjaEluZGV4KTtcclxuICAgICAgICAgICAgY29uc3QgbWVzaCA9IG1lc2hJbnN0YW5jZS5tZXNoO1xyXG4gICAgICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBtZXNoLnByaW1pdGl2ZVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS52aXNpYmxlVGhpc0ZyYW1lID0gdmlzaWJsZTtcclxuXHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyAgICA9IHRoaXMuX2Nhc3RTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IHRoaXMuX3JlY2VpdmVTaGFkb3c7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5iYXNlICA9IGJhc2VJbmRleDtcclxuICAgICAgICAgICAgcHJpbWl0aXZlLmNvdW50ID0gY291bnQ7XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS50eXBlICA9IHRoaXMuX3dpcmVmcmFtZSA/IHBjLlBSSU1JVElWRV9MSU5FUyA6IHBjLlBSSU1JVElWRV9UUklBTkdMRVM7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2Uuc2V0UGFyYW1ldGVyKHBhdGNoTG9kQ29yZVBhcmFtTmFtZSwgbG9kSW5mby5jb3JlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShmcnVzdHVtPzogSUZydXN0dW0pIHtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogSW4gdGhlb3J5IHdlIGNhbiBjb250cm9sIHRoZSBxdWFsaXR5IG9mIHRoZSBtb2RlbCBmb3Igc2hhZG93c1xyXG4gICAgICAgIC8vIFRPRE86IEFkZCBzdXBwb3J0IGZvciBPY2NsdXNpb24gY3VsbGluZ1xyXG5cclxuICAgICAgICB0aGlzLl9oYXNVcGRhdGVkSGVpZ2h0cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYXRjaGVzU3RvcmUuY3VzdG9tRm9yd2FyZFJlbmRlcmVyKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21NZXNoSW5zdGFuY2UgPSB0aGlzLnBhdGNoZXNTdG9yZS5jdXN0b21NZXNoSW5zdGFuY2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VzdG9tTWVzaEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21NZXNoSW5zdGFuY2UudmlzaWJsZSAgICAgICA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21NZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyAgICA9IHRoaXMuX2Nhc3RTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21NZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IHRoaXMuX3JlY2VpdmVTaGFkb3c7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IGN1c3RvbU1lc2hJbnN0YW5jZS5tZXNoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gbWVzaC5wcmltaXRpdmVbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgcHJpbWl0aXZlLnR5cGUgID0gdGhpcy5fd2lyZWZyYW1lID8gcGMuUFJJTUlUSVZFX0xJTkVTIDogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnBhdGNoZXNTdG9yZS5pbnN0YW5jaW5nPy5iZWdpbihmYWxzZSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLnBhdGNoZXNTdG9yZS5zdGFydFVwZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMucGF0Y2hlc1N0b3JlLnRlcnJhaW4uZWFjaFBhdGNoZXModGhpcywgZnJ1c3R1bSk7XHJcbiAgICAgICAgdGhpcy5wYXRjaGVzU3RvcmUuZW5kVXBkYXRlKHRoaXMuX2hhc1VwZGF0ZWRIZWlnaHRzKTtcclxuXHJcbiAgICAgICAgdGhpcy5wYXRjaGVzU3RvcmUuaW5zdGFuY2luZz8uZW5kKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgaW50ZXJmYWNlIElCcnVzaFNldHRpbmdzIHtcclxuICAgIHJlYWRvbmx5IGFjdGl2ZTogbnVtYmVyLFxyXG4gICAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyLFxyXG4gICAgcmVhZG9ubHkgb3BhY2l0eTogbnVtYmVyLFxyXG4gICAgcmVhZG9ubHkgdGV4dHVyZXM6IHBjeC5Bc3NldFtdO1xyXG59IiwiZXhwb3J0IGNvbnN0IHZlcnRleFNoYWRlciA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIGF0dHJpYnV0ZSB2ZWMzIGFQb3NpdGlvbjtcclxuICAgIGF0dHJpYnV0ZSB2ZWMyIGFVdjA7XHJcblxyXG4gICAgdW5pZm9ybSBtYXQ0IG1hdHJpeF9tb2RlbDtcclxuICAgIHVuaWZvcm0gbWF0NCBtYXRyaXhfdmlld1Byb2plY3Rpb247XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZVdjA7XHJcblxyXG4gICAgdm9pZCBtYWluKHZvaWQpXHJcbiAgICB7XHJcbiAgICAgICAgdlV2MCA9IGFVdjA7XHJcbiAgICAgICAgZ2xfUG9zaXRpb24gPSBtYXRyaXhfdmlld1Byb2plY3Rpb24gKiBtYXRyaXhfbW9kZWwgKiB2ZWM0KGFQb3NpdGlvbiwgMS4wKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBmYWN0b3JNZXRob2QgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2MDtcclxuXHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1SGVpZ2h0TWFwO1xyXG4gICAgdW5pZm9ybSBmbG9hdCB1QnJ1c2hPcGFjaXR5O1xyXG4gICAgdW5pZm9ybSB2ZWM0IHVCcnVzaE1hc2s7XHJcblxyXG4gICAgZmxvYXQgZ2V0RmFjdG9yKCkge1xyXG4gICAgICAgIHZlYzQgaGVpZ2h0TWFwID0gdGV4dHVyZTJEKHVIZWlnaHRNYXAsIHZVdjApO1xyXG4gICAgICAgIGZsb2F0IGhlaWdodCAgID0gKGhlaWdodE1hcC5yICsgaGVpZ2h0TWFwLmcgKyBoZWlnaHRNYXAuYikgLyAzLjAgLyBoZWlnaHRNYXAuYTtcclxuICAgICAgICBmbG9hdCBmYWN0b3IgICA9IGhlaWdodCAqIHVCcnVzaE9wYWNpdHk7XHJcbiAgICAgICAgcmV0dXJuIGZhY3RvcjtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBmcmFnbWVudFNoYWRlciA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICR7ZmFjdG9yTWV0aG9kfVxyXG5cclxuICAgIHZvaWQgbWFpbih2b2lkKVxyXG4gICAge1xyXG4gICAgICAgIGZsb2F0IGZhY3RvciA9IGdldEZhY3RvcigpO1xyXG4gICAgICAgIHZlYzQgY29sb3IgPSB2ZWM0KHVCcnVzaE1hc2sgKiBmYWN0b3IpO1xyXG5cclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSBjb2xvcjtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBmcmFnbWVudEludmVydFNoYWRlciA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICR7ZmFjdG9yTWV0aG9kfVxyXG5cclxuICAgIHZvaWQgbWFpbih2b2lkKVxyXG4gICAge1xyXG4gICAgICAgIGZsb2F0IGxldmVscyA9IDQuMDtcclxuICAgICAgICBmbG9hdCBmYWN0b3IgPSBnZXRGYWN0b3IoKTtcclxuICAgICAgICB2ZWM0IGNvbG9yICAgPSB2ZWM0KGZhY3Rvcik7XHJcblxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLnIgPiAwLjApIHsgY29sb3IuciA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLmcgPiAwLjApIHsgY29sb3IuZyA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLmIgPiAwLjApIHsgY29sb3IuYiA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLmEgPiAwLjApIHsgY29sb3IuYSA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG5cclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSBjb2xvciAvIGxldmVscztcclxuICAgIH1cclxuYDsiLCJpbXBvcnQgeyBJQnJ1c2hTZXR0aW5ncyB9IGZyb20gXCIuL0JydXNoLm1qc1wiO1xyXG5pbXBvcnQgeyBmcmFnbWVudEludmVydFNoYWRlciwgZnJhZ21lbnRTaGFkZXIsIHZlcnRleFNoYWRlciB9IGZyb20gXCIuL0NvbG9yUGFpbnRlclNoYWRlcnMubWpzXCI7XHJcbmltcG9ydCB7IHNldFByZWNpc2lvbiB9IGZyb20gXCIuLi9TaGFyZWQvVXRpbHMubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGFpbnRlckNhbWVyYUZhciA9IDEwO1xyXG5leHBvcnQgY29uc3QgcGFpbnRlckxheWVyTmFtZSA9ICdUZXJyYWluRWRpdG9yJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbG9yUGFpbnRlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBfcGFpbnRpbmc6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9wYWludGVyTWFzazogRmxvYXQzMkFycmF5O1xyXG4gICAgcHJpdmF0ZSBfYnJ1c2hTZXR0aW5nczogSUJydXNoU2V0dGluZ3M7XHJcblxyXG4gICAgcHJpdmF0ZSBfYXBwOiBwY3guQXBwQmFzZTtcclxuICAgIHByaXZhdGUgX2J1ZmZlcjogcGN4LlRleHR1cmU7XHJcbiAgICBwcml2YXRlIF9wYWludGVyUmVuZGVyVGFyZ2V0OiBwY3guUmVuZGVyVGFyZ2V0O1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRlckNhbWVyYUVudGl0eTogcGN4LkVudGl0eTtcclxuXHJcbiAgICBwcml2YXRlIF9wYWludGVyU2hhZGVyOiBwY3guU2hhZGVyO1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRlck1hdGVyaWFsOiBwY3guTWF0ZXJpYWw7XHJcbiAgICBwcml2YXRlIF9wYWludGVyRW50aXR5OiBwY3guRW50aXR5O1xyXG5cclxuICAgIHByaXZhdGUgX3BhaW50ZXJJbnZlcnRTaGFkZXI6IHBjeC5TaGFkZXI7XHJcbiAgICBwcml2YXRlIF9wYWludGVySW52ZXJ0TWF0ZXJpYWw6IHBjeC5NYXRlcmlhbDtcclxuICAgIHByaXZhdGUgX3BhaW50ZXJJbnZlcnRFbnRpdHk6IHBjeC5FbnRpdHk7XHJcblxyXG4gICAgcHVibGljIGdldCBwYWludGluZygpICAgeyByZXR1cm4gdGhpcy5fcGFpbnRpbmc7IH1cclxuICAgIHB1YmxpYyBnZXQgY2FtZXJhRmFyKCkgIHsgcmV0dXJuIHBhaW50ZXJDYW1lcmFGYXI7IH1cclxuICAgIHB1YmxpYyBnZXQgYmFja2dyb3VuZCgpIHsgcmV0dXJuIHRoaXMuX2J1ZmZlcjsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogcGN4LkFwcEJhc2UsIGJ1ZmZlcjogcGN4LlRleHR1cmUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wYWludGVyTWFzayA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XHJcbiAgICAgICAgdGhpcy5fYnVmZmVyID0gYnVmZmVyO1xyXG4gICAgICAgIHRoaXMuX2FwcCA9IGFwcDtcclxuXHJcbiAgICAgICAgdGhpcy5faW5pdENhbWVyYSgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRTaGFkZXJzKCk7XHJcbiAgICAgICAgdGhpcy5faW5pdE1hdGVyaWFscygpO1xyXG4gICAgICAgIHRoaXMuX2luaXRFbnRpdGllcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRDYW1lcmEoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhaW50ZXJMYXllciA9IHRoaXMuX2FwcC5zY2VuZS5sYXllcnMuZ2V0TGF5ZXJCeU5hbWUocGFpbnRlckxheWVyTmFtZSkhO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVyUmVuZGVyVGFyZ2V0ID0gbmV3IHBjLlJlbmRlclRhcmdldCh7XHJcbiAgICAgICAgICAgIGNvbG9yQnVmZmVyOiB0aGlzLl9idWZmZXIsXHJcbiAgICAgICAgICAgIGZsaXBZOiB0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UuaXNXZWJHUFUsXHJcbiAgICAgICAgICAgIGRlcHRoOiBmYWxzZSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eSA9IG5ldyBwYy5FbnRpdHkoJ1RlcnJhaW5QYWludGVyQ2FtZXJhJyk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5zZXRMb2NhbFBvc2l0aW9uKDAsIDAsIHBhaW50ZXJDYW1lcmFGYXIpO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkubG9va0F0KDAsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuYWRkQ29tcG9uZW50KCdjYW1lcmEnLCB7XHJcbiAgICAgICAgICAgIHByb2plY3Rpb246IHBjLlBST0pFQ1RJT05fT1JUSE9HUkFQSElDLFxyXG4gICAgICAgICAgICBjbGVhckNvbG9yQnVmZmVyOiBmYWxzZSxcclxuICAgICAgICAgICAgY2xlYXJEZXB0aEJ1ZmZlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIHByaW9yaXR5OiAtMSxcclxuICAgICAgICAgICAgbGF5ZXJzOiBbcGFpbnRlckxheWVyLmlkXSxcclxuICAgICAgICAgICAgbmVhckNsaXA6IDAuMSxcclxuICAgICAgICAgICAgZmFyQ2xpcDogcGFpbnRlckNhbWVyYUZhciAqIDIsXHJcbiAgICAgICAgICAgIHJlbmRlclRhcmdldDogdGhpcy5fcGFpbnRlclJlbmRlclRhcmdldCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fYXBwLnJvb3QuYWRkQ2hpbGQodGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuY2FtZXJhIS5mcnVzdHVtQ3VsbGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuY2FtZXJhIS5vcnRob0hlaWdodCA9IHBhaW50ZXJDYW1lcmFGYXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEVudGl0aWVzKCkge1xyXG5cclxuICAgICAgICBjb25zdCBwYWludGVyTGF5ZXIgPSB0aGlzLl9hcHAuc2NlbmUubGF5ZXJzLmdldExheWVyQnlOYW1lKHBhaW50ZXJMYXllck5hbWUpITtcclxuXHJcbiAgICAgICAgcGFpbnRlckxheWVyLnRyYW5zcGFyZW50U29ydE1vZGUgPSBwYy5TT1JUTU9ERV9NQU5VQUw7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkgID0gbmV3IHBjLkVudGl0eSgnVGVycmFpbkJydXNoUGFpbnRlcicpO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkuYWRkQ29tcG9uZW50KCdyZW5kZXInLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdwbGFuZScsXHJcbiAgICAgICAgICAgIGxheWVyczogW3BhaW50ZXJMYXllci5pZF0sXHJcbiAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLl9wYWludGVyTWF0ZXJpYWwsXHJcbiAgICAgICAgICAgIGNhc3RTaGFkb3dzOiBmYWxzZSxcclxuICAgICAgICAgICAgY2FzdFNoYWRvd3NMaWdodG1hcDogZmFsc2UsXHJcbiAgICAgICAgICAgIHJlY2VpdmVTaGFkb3dzOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5ICA9IG5ldyBwYy5FbnRpdHkoJ1RlcnJhaW5CcnVzaFBhaW50ZXJJbnZlcnQnKTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5LmFkZENvbXBvbmVudCgncmVuZGVyJywge1xyXG4gICAgICAgICAgICB0eXBlOiAncGxhbmUnLFxyXG4gICAgICAgICAgICBsYXllcnM6IFtwYWludGVyTGF5ZXIuaWRdLFxyXG4gICAgICAgICAgICBtYXRlcmlhbDogdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLFxyXG4gICAgICAgICAgICBjYXN0U2hhZG93czogZmFsc2UsXHJcbiAgICAgICAgICAgIGNhc3RTaGFkb3dzTGlnaHRtYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICByZWNlaXZlU2hhZG93czogZmFsc2UsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkucmVuZGVyIS5tZXNoSW5zdGFuY2VzWzBdLmRyYXdPcmRlciA9IDE7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5yZW5kZXIhLm1lc2hJbnN0YW5jZXNbMF0uZHJhd09yZGVyID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5fYXBwLnJvb3QuYWRkQ2hpbGQodGhpcy5fcGFpbnRlckludmVydEVudGl0eSk7XHJcbiAgICAgICAgdGhpcy5fYXBwLnJvb3QuYWRkQ2hpbGQodGhpcy5fcGFpbnRlckVudGl0eSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkuc2V0TG9jYWxFdWxlckFuZ2xlcyg5MCwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5zZXRMb2NhbEV1bGVyQW5nbGVzKDkwLCAwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdFNoYWRlcnMoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZlcnRleCA9IHZlcnRleFNoYWRlcjtcclxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IHNldFByZWNpc2lvbih0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UsIGZyYWdtZW50U2hhZGVyKTtcclxuICAgICAgICBjb25zdCBmcmFnbWVudEludmVydCA9IHNldFByZWNpc2lvbih0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UsIGZyYWdtZW50SW52ZXJ0U2hhZGVyKTtcclxuXHJcbiAgICAgICAgaWYgKHBjLlNoYWRlck1hdGVyaWFsKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwgPSBuZXcgcGMuU2hhZGVyTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICAgICAgdW5pcXVlTmFtZTogJ1BhaW50ZXJGcmFnbWVudFNoYWRlcicsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhHTFNMOiB2ZXJ0ZXgsXHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudEdMU0w6IGZyYWdtZW50LFxyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGFQb3NpdGlvbjogcGMuU0VNQU5USUNfUE9TSVRJT04sXHJcbiAgICAgICAgICAgICAgICAgICAgYVV2MDogcGMuU0VNQU5USUNfVEVYQ09PUkQwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsID0gbmV3IHBjLlNoYWRlck1hdGVyaWFsKHtcclxuICAgICAgICAgICAgICAgIHVuaXF1ZU5hbWU6ICdQYWludGVySW52ZXJ0RnJhZ21lbnRTaGFkZXInLFxyXG4gICAgICAgICAgICAgICAgdmVydGV4R0xTTDogdmVydGV4LFxyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRHTFNMOiBmcmFnbWVudEludmVydCxcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhUG9zaXRpb246IHBjLlNFTUFOVElDX1BPU0lUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIGFVdjA6IHBjLlNFTUFOVElDX1RFWENPT1JEMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJTaGFkZXIgPSBwYy5jcmVhdGVTaGFkZXJGcm9tQ29kZSh0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UsIHZlcnRleCwgZnJhZ21lbnQsICdQYWludGVyRnJhZ21lbnRTaGFkZXInLCB7XHJcbiAgICAgICAgICAgIGFQb3NpdGlvbjogcGMuU0VNQU5USUNfUE9TSVRJT04sXHJcbiAgICAgICAgICAgIGFVdjA6IHBjLlNFTUFOVElDX1RFWENPT1JEMFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0U2hhZGVyID0gcGMuY3JlYXRlU2hhZGVyRnJvbUNvZGUodGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlLCB2ZXJ0ZXgsIGZyYWdtZW50SW52ZXJ0LCAnUGFpbnRlckludmVydEZyYWdtZW50U2hhZGVyJywge1xyXG4gICAgICAgICAgICBhUG9zaXRpb246IHBjLlNFTUFOVElDX1BPU0lUSU9OLFxyXG4gICAgICAgICAgICBhVXYwOiBwYy5TRU1BTlRJQ19URVhDT09SRDBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0TWF0ZXJpYWxzKCkge1xyXG5cclxuICAgICAgICBpZiAoIXBjLlNoYWRlck1hdGVyaWFsKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwgPSBuZXcgcGMuTWF0ZXJpYWwoKTtcclxuICAgICAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsID0gbmV3IHBjLk1hdGVyaWFsKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvKiBAdHMtaWdub3JlICovXHJcbiAgICAgICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbC5zaGFkZXIgPSB0aGlzLl9wYWludGVyU2hhZGVyO1xyXG4gICAgICAgICAgICAvKiBAdHMtaWdub3JlICovXHJcbiAgICAgICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC5zaGFkZXIgPSB0aGlzLl9wYWludGVySW52ZXJ0U2hhZGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsLm5hbWUgPSAnQnJ1c2hQYWludGVyTWF0ZXJpYWwnO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbC5ibGVuZFR5cGUgPSBwYy5CTEVORF9BRERJVElWRTtcclxuICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwudXBkYXRlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC5uYW1lID0gJ0JydXNoUGFpbnRlckludmVydE1hdGVyaWFsJztcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwuYmxlbmRUeXBlID0gcGMuQkxFTkRfU1VCVFJBQ1RJVkU7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZVJ1bnRpbWVTZXR0aW5ncyhkdDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxPcGFjaXR5ID0gdGhpcy5fYnJ1c2hTZXR0aW5ncy5vcGFjaXR5O1xyXG4gICAgICAgIGNvbnN0IG9wYWNpdHkgPSBvcmlnaW5hbE9wYWNpdHk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsLnNldFBhcmFtZXRlcigndUJydXNoT3BhY2l0eScsIG9wYWNpdHkpO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VCcnVzaE9wYWNpdHknLCBvcGFjaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVQb3NpdGlvbkFuZFNjYWxlKHg6IG51bWJlciwgeTogbnVtYmVyLCBzY2FsZVdpZHRoOiBudW1iZXIsIHNjYWxlSGVpZ2h0OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgY29uc3QgZmFyICAgID0gdGhpcy5jYW1lcmFGYXIgKiAyO1xyXG4gICAgICAgIGNvbnN0IHJhdGlvbiA9IHRoaXMuYmFja2dyb3VuZC53aWR0aCAvIHRoaXMuYmFja2dyb3VuZC5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHggPSB4ICogZmFyICogcmF0aW9uIC0gdGhpcy5jYW1lcmFGYXIgKiByYXRpb247XHJcbiAgICAgICAgeSA9IHkgKiBmYXIgLSB0aGlzLmNhbWVyYUZhcjtcclxuXHJcbiAgICAgICAgc2NhbGVXaWR0aCAgPSBzY2FsZVdpZHRoICAqIHRoaXMuYmFja2dyb3VuZC53aWR0aCAgLyBmYXIgLyAyLjU7XHJcbiAgICAgICAgc2NhbGVIZWlnaHQgPSBzY2FsZUhlaWdodCAqIHRoaXMuYmFja2dyb3VuZC5oZWlnaHQgLyBmYXIgLyAyLjU7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldFNjYWxlKHNjYWxlV2lkdGgsIHNjYWxlSGVpZ2h0KTtcclxuICAgICAgICB0aGlzLl9zZXRQb3NpdGlvbih4LCB5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRQYWludChkdDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlciwgc2NhbGVXaWR0aDogbnVtYmVyLCBzY2FsZUhlaWdodDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVJ1bnRpbWVTZXR0aW5ncyhkdCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlUG9zaXRpb25BbmRTY2FsZSh4LCB5LCBzY2FsZVdpZHRoLCBzY2FsZUhlaWdodCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5LmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5lbmFibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RvcFBhaW50KCkge1xyXG4gICAgICAgIHRoaXMuX3BhaW50aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc2V0U2NhbGUoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9wYWludGVyRW50aXR5LnNldExvY2FsU2NhbGUoeCwgMSwgeSk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5zZXRMb2NhbFNjYWxlKHgsIDEsIHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NldFBvc2l0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5zZXRMb2NhbFBvc2l0aW9uKHgsIHksIDApO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkuc2V0TG9jYWxQb3NpdGlvbih4LCB5LCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlU2V0dGluZ3MoYnJ1c2hTZXR0aW5nczogSUJydXNoU2V0dGluZ3MsIGFjdGl2ZUxheWVyOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hc2suZmlsbCgwKTtcclxuXHJcbiAgICAgICAgaWYgKGFjdGl2ZUxheWVyID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVyTWFza1thY3RpdmVMYXllciAtIDFdID0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJydXNoVGV4dHVyZSA9IGJydXNoU2V0dGluZ3MudGV4dHVyZXNbYnJ1c2hTZXR0aW5ncy5hY3RpdmVdLnJlc291cmNlIGFzIHBjeC5UZXh0dXJlO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1QnJ1c2hNYXNrJywgdGhpcy5fcGFpbnRlck1hc2spO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VIZWlnaHRNYXAnLCBicnVzaFRleHR1cmUpO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1QnJ1c2hNYXNrJywgdGhpcy5fcGFpbnRlck1hc2spO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VIZWlnaHRNYXAnLCBicnVzaFRleHR1cmUpO1xyXG5cclxuICAgICAgICB0aGlzLl9icnVzaFNldHRpbmdzID0gYnJ1c2hTZXR0aW5ncztcclxuICAgIH1cclxufSIsImV4cG9ydCBmdW5jdGlvbiBpc051bWVyaWModmFsdWU6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIC9eLT9cXGQrJC8udGVzdCh2YWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXBUaXRsZUVudW08VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+Pihzb21lRW51bTogVCkge1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG5cclxuICAgIGZvciAobGV0IHZhbHVlIGluIHNvbWVFbnVtKSB7XHJcblxyXG4gICAgICAgIGlmICghc29tZUVudW0uaGFzT3duUHJvcGVydHkodmFsdWUpIHx8XHJcbiAgICAgICAgICAgIGlzTnVtZXJpYyh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBlbnVtRW50cnk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XHJcbiAgICAgICAgZW51bUVudHJ5W3ZhbHVlXSA9IHNvbWVFbnVtW3ZhbHVlXTtcclxuICAgICAgICByZXN1bHQucHVzaChlbnVtRW50cnkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFwRW51bTxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KHNvbWVFbnVtOiBUKSB7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gW107XHJcblxyXG4gICAgZm9yIChsZXQgdmFsdWUgaW4gc29tZUVudW0pIHtcclxuXHJcbiAgICAgICAgaWYgKCFzb21lRW51bS5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBlbnVtRW50cnk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XHJcbiAgICAgICAgZW51bUVudHJ5W3ZhbHVlXSA9IHNvbWVFbnVtW3ZhbHVlXTtcclxuICAgICAgICByZXN1bHQucHVzaChlbnVtRW50cnkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59IiwiaW1wb3J0IHsgbWFwRW51bSB9IGZyb20gXCIuLi9TaGFyZWQvRW51bUNvbnZlcnRlci5tanNcIlxyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5TaXplRW51bURlZmF1bHQgPSA1MTM7XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluU2l6ZUVudW0gPSBtYXBFbnVtKHtcclxuICAgICcxMjgnOiAgIDEyOSxcclxuICAgICcyNTYnOiAgIDI1NyxcclxuICAgICc1MTInOiAgIDUxMyxcclxuICAgICcxMDI0JzogIDEwMjUsXHJcbiAgICAnMjA0OCc6ICAyMDQ5LFxyXG4gICAgJzQwOTYnOiAgNDA5NyxcclxuICAgICc4MTkyJzogIDgxOTMsXHJcbiAgICAnMTYzODQnOiAxNjM4NSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgdGVycmFpblBhdGNoU2l6ZUVudW1EZWZhdWx0ID0gMzM7XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluUGF0Y2hTaXplRW51bSA9IG1hcEVudW0oe1xyXG4gICAgJzE2JzogICAgMTcsXHJcbiAgICAnMzInOiAgICAzMyxcclxuICAgICc2NCc6ICAgIDY1LFxyXG4gICAgJzEyOCc6ICAgMTI5LFxyXG4gICAgJzI1Nic6ICAgMjU3LFxyXG4gICAgJzUxMic6ICAgNTEzLFxyXG4gICAgJzEwMjQnOiAgMTAyNSxcclxuICAgICcyMDQ4JzogIDIwNDksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5IZWlnaHRzQ29tcHJlc3NBbGdvcml0bURlZmF1bHQgPSAnbm9uZSc7XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluSGVpZ2h0c0NvbXByZXNzQWxnb3JpdG0gPSBtYXBFbnVtKHtcclxuICAgICdOb25lJzogJ25vbmUnLFxyXG4gICAgJ1gyJzogJ3gyJyxcclxuICAgICdYNCc6ICd4NCdcclxufSk7IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vU2hhcmVkL1R5cGVzLm1qc1wiO1xyXG5cclxuY29uc3QgdG1wVHJpVmVjQSA9IG5ldyBwYy5WZWMzKCk7XHJcbmNvbnN0IHRtcFRyaVZlY0IgPSBuZXcgcGMuVmVjMygpO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRyaWFuZ2xlIGV4dGVuZHMgcGMuVHJpIHtcclxuXHJcbiAgICBpbmRleDA6IGludDtcclxuICAgIGluZGV4MTogaW50O1xyXG4gICAgaW5kZXgyOiBpbnQ7XHJcblxyXG4gICAgZ2V0Tm9ybWFsKHJzaDogcGN4LlZlYzMpIHtcclxuICAgICAgICB0bXBUcmlWZWNBLnN1YjIodGhpcy52MSwgdGhpcy52MCk7XHJcbiAgICAgICAgdG1wVHJpVmVjQi5zdWIyKHRoaXMudjIsIHRoaXMudjApO1xyXG4gICAgICAgIHJzaC5jcm9zcyh0bXBUcmlWZWNBLCB0bXBUcmlWZWNCKS5ub3JtYWxpemUoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVHJpYW5nbGU7IiwiaW1wb3J0IHsgZmxvYXQsIGludCwgSVZlY3RvcjMsIFJlZk9iamVjdCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB7IElSZWFkb25seUFic1BhdGNoZWRIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNQYXRjaGVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBJWm9uZSB9IGZyb20gXCIuL0lab25lLm1qc1wiO1xyXG5pbXBvcnQgVGVycmFpblJheWNhc3RSZXN1bHQgZnJvbSBcIi4vVGVycmFpblJheWNhc3RSZXN1bHQubWpzXCI7XHJcbmltcG9ydCBUcmlhbmdsZSBmcm9tIFwiLi9UcmlhbmdsZS5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvb3JkWFoge1xyXG4gICAgeDogaW50LFxyXG4gICAgejogaW50LFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHcmlkUmF5Y2FzdFN0YXRlIHtcclxuICAgIHg6IGludCxcclxuICAgIHo6IGludCxcclxuICAgIHBhcmFtOiBpbnQsXHJcbiAgICBwcmV2WDogaW50LFxyXG4gICAgcHJldlo6IGludCxcclxuICAgIHByZXZQYXJhbTogaW50LFxyXG4gICAgbWF4RGlzdGFuY2VGbGF0OiBmbG9hdCxcclxufVxyXG5cclxuY29uc3QgaW5maW5pdGUgICAgICAgID0gOTk5OTk5OTtcclxuY29uc3QgbW9kZWxUcmFuc2Zvcm0gID0gbmV3IHBjLk1hdDQoKTtcclxuY29uc3QgdG1wUmF5ICAgICAgICAgID0gbmV3IHBjLlJheSgpO1xyXG5jb25zdCB0bXBSYXljYXN0VmVjICAgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCB0bXBQb3MxICAgICAgICAgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCB0bXBQb3MyICAgICAgICAgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCB0bXBQb3MzICAgICAgICAgPSBuZXcgcGMuVmVjMygpO1xyXG5cclxuY29uc3QgdHJpYW5nbGUgICAgICAgPSBuZXcgVHJpYW5nbGUoKTtcclxuY29uc3QgZGVidWdUbXBWZWMgICAgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCBkZWJ1Z1RyYW5zZm9ybSA9IG5ldyBwYy5NYXQ0KCk7XHJcbmNvbnN0IGRlYnVnUG9zaXRpb25zID0gbmV3IEFycmF5KDE2KTtcclxuXHJcbmxldCBkZWJ1Z1RyYW5zZm9ybUlzSWRlbnRpdHkgPSB0cnVlO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQUFCQiBleHRlbmRzIElab25lIHtcclxuICAgIG1pblk6IGZsb2F0LFxyXG4gICAgbWF4WTogZmxvYXQsXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlYnVnRHJhd1RyaWFuZ2xlTGluZXModHJpOiBwY3guVHJpLCBjb2xvciA9IHBjLkNvbG9yLllFTExPVykge1xyXG4gICAgLypcclxuICAgIFtcclxuICAgICAgICB0cmkudjAueCwgdHJpLnYwLnksIHRyaS52MC56LCB0cmkudjEueCwgdHJpLnYxLnksIHRyaS52MS56LFxyXG4gICAgICAgIHRyaS52MS54LCB0cmkudjEueSwgdHJpLnYxLnosIHRyaS52Mi54LCB0cmkudjIueSwgdHJpLnYyLnosXHJcbiAgICAgICAgdHJpLnYyLngsIHRyaS52Mi55LCB0cmkudjIueiwgdHJpLnYwLngsIHRyaS52MC55LCB0cmkudjAueixcclxuICAgIF0sIGNvbG9yLCBmYWxzZSk7XHJcbiAgICBdXHJcbiAgICAqL1xyXG4gICAgZGVidWdUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnQodHJpLnYwLCBkZWJ1Z1RtcFZlYyk7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1swXSA9IGRlYnVnUG9zaXRpb25zWzE1XSA9IGRlYnVnVG1wVmVjLng7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1sxXSA9IGRlYnVnUG9zaXRpb25zWzE2XSA9IGRlYnVnVG1wVmVjLnk7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1syXSA9IGRlYnVnUG9zaXRpb25zWzE3XSA9IGRlYnVnVG1wVmVjLno7XHJcbiAgICBkZWJ1Z1RyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludCh0cmkudjEsIGRlYnVnVG1wVmVjKTtcclxuICAgIGRlYnVnUG9zaXRpb25zWzNdID0gZGVidWdQb3NpdGlvbnNbNl0gPSBkZWJ1Z1RtcFZlYy54O1xyXG4gICAgZGVidWdQb3NpdGlvbnNbNF0gPSBkZWJ1Z1Bvc2l0aW9uc1s3XSA9IGRlYnVnVG1wVmVjLnk7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1s1XSA9IGRlYnVnUG9zaXRpb25zWzhdID0gZGVidWdUbXBWZWMuejtcclxuICAgIGRlYnVnVHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50KHRyaS52MiwgZGVidWdUbXBWZWMpO1xyXG4gICAgZGVidWdQb3NpdGlvbnNbOV0gID0gZGVidWdQb3NpdGlvbnNbMTJdID0gZGVidWdUbXBWZWMueDtcclxuICAgIGRlYnVnUG9zaXRpb25zWzEwXSA9IGRlYnVnUG9zaXRpb25zWzEzXSA9IGRlYnVnVG1wVmVjLnk7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1sxMV0gPSBkZWJ1Z1Bvc2l0aW9uc1sxNF0gPSBkZWJ1Z1RtcFZlYy56O1xyXG4gICAgcGMuYXBwPy5kcmF3TGluZUFycmF5cyhkZWJ1Z1Bvc2l0aW9ucywgY29sb3IsIGZhbHNlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNSYXlCb3goYWFiYjogSUFBQkIsIHJheTogcGN4LlJheSkge1xyXG5cclxuICAgIGNvbnN0IHJheU9yaWdpbiAgICA9IHJheS5vcmlnaW47XHJcbiAgICBjb25zdCByYXlEaXJlY3Rpb24gPSByYXkuZGlyZWN0aW9uO1xyXG5cclxuICAgIGNvbnN0IG1pblggPSBhYWJiLm1pblg7XHJcbiAgICBjb25zdCBtYXhYID0gYWFiYi5tYXhYO1xyXG4gICAgY29uc3QgbWluWSA9IGFhYmIubWluWTtcclxuICAgIGNvbnN0IG1heFkgPSBhYWJiLm1heFk7XHJcbiAgICBjb25zdCBtaW5aID0gYWFiYi5taW5aO1xyXG4gICAgY29uc3QgbWF4WiA9IGFhYmIubWF4WjtcclxuXHJcbiAgICBsZXQgdG1pbiA9IChtaW5YIC0gcmF5T3JpZ2luLngpIC8gcmF5RGlyZWN0aW9uLng7XHJcbiAgICBsZXQgdG1heCA9IChtYXhYIC0gcmF5T3JpZ2luLngpIC8gcmF5RGlyZWN0aW9uLng7XHJcblxyXG4gICAgaWYgKHRtaW4gPiB0bWF4KSB7XHJcbiAgICAgICAgbGV0IHRlbXAgPSB0bWluO1xyXG4gICAgICAgIHRtaW4gPSB0bWF4O1xyXG4gICAgICAgIHRtYXggPSB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0eW1pbiA9IChtaW5ZIC0gcmF5T3JpZ2luLnkpIC8gcmF5RGlyZWN0aW9uLnk7XHJcbiAgICBsZXQgdHltYXggPSAobWF4WSAtIHJheU9yaWdpbi55KSAvIHJheURpcmVjdGlvbi55O1xyXG5cclxuICAgIGlmICh0eW1pbiA+IHR5bWF4KSB7XHJcbiAgICAgICAgbGV0IHRlbXAgPSB0eW1pbjtcclxuICAgICAgICB0eW1pbiA9IHR5bWF4O1xyXG4gICAgICAgIHR5bWF4ID0gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoKHRtaW4gPiB0eW1heCkgfHwgKHR5bWluID4gdG1heCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5bWluID4gdG1pbikge1xyXG4gICAgICAgIHRtaW4gPSB0eW1pbjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHltYXggPCB0bWF4KSB7XHJcbiAgICAgICAgdG1heCA9IHR5bWF4O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0em1pbiA9IChtaW5aIC0gcmF5T3JpZ2luLnopIC8gcmF5RGlyZWN0aW9uLno7XHJcbiAgICBsZXQgdHptYXggPSAobWF4WiAtIHJheU9yaWdpbi56KSAvIHJheURpcmVjdGlvbi56O1xyXG5cclxuICAgIGlmICh0em1pbiA+IHR6bWF4KSB7XHJcbiAgICAgICAgbGV0IHRlbXAgPSB0em1pbjtcclxuICAgICAgICB0em1pbiA9IHR6bWF4O1xyXG4gICAgICAgIHR6bWF4ID0gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoKHRtaW4gPiB0em1heCkgfHwgKHR6bWluID4gdG1heCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlaWdodGZpZWxkU2hhcGUge1xyXG5cclxuICAgIHByaXZhdGUgX2hlaWdodE1hcDogSVJlYWRvbmx5QWJzUGF0Y2hlZEhlaWdodE1hcDtcclxuICAgIHByaXZhdGUgX2JlZ2luUG9zOiBwY3guVmVjMztcclxuICAgIHByaXZhdGUgX2VuZFBvczogcGN4LlZlYzM7XHJcbiAgICBwcml2YXRlIF9ib3VuZGluZ0JveDogSUFBQkI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwKSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwID0gaGVpZ2h0TWFwO1xyXG4gICAgICAgIHRoaXMuX2JlZ2luUG9zID0gbmV3IHBjLlZlYzMoKTtcclxuICAgICAgICB0aGlzLl9lbmRQb3MgPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlQm91bmRpbmdCb3goKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaGFsZldpZHRoID0gdGhpcy5faGVpZ2h0TWFwLndpZHRoIC8gMjtcclxuICAgICAgICBjb25zdCBoYWxmRGVwdGggPSB0aGlzLl9oZWlnaHRNYXAuZGVwdGggLyAyO1xyXG5cclxuICAgICAgICB0aGlzLl9ib3VuZGluZ0JveCA9IHtcclxuICAgICAgICAgICAgbWluWDogLWhhbGZXaWR0aCxcclxuICAgICAgICAgICAgbWluWTogMCxcclxuICAgICAgICAgICAgbWluWjogLWhhbGZEZXB0aCxcclxuICAgICAgICAgICAgbWF4WDogaGFsZldpZHRoLFxyXG4gICAgICAgICAgICBtYXhZOiB0aGlzLl9oZWlnaHRNYXAubWF4SGVpZ2h0LFxyXG4gICAgICAgICAgICBtYXhaOiBoYWxmRGVwdGgsXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdHJpYW5nbGVJbnRlcnNlY3RzUmF5KHRyaTogVHJpYW5nbGUsIHJheTogcGN4LlJheSwgYmVzdFJlc3VsdDogVGVycmFpblJheWNhc3RSZXN1bHQpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgaWYgKHRyaS5pbnRlcnNlY3RzUmF5KHJheSwgdG1wUmF5Y2FzdFZlYykpIHtcclxuICAgIFxyXG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHRtcFJheWNhc3RWZWMuZGlzdGFuY2UocmF5Lm9yaWdpbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoYmVzdFJlc3VsdC5kaXN0YW5jZSA+IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LmRpc3RhbmNlID0gZGlzdGFuY2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRyaS5nZXROb3JtYWwoYmVzdFJlc3VsdC5sb2NhbE5vcm1hbCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJlc3RSZXN1bHQubm9ybWFsLmNvcHkoYmVzdFJlc3VsdC5sb2NhbE5vcm1hbCk7XHJcbiAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LmxvY2FsUG9pbnQuY29weSh0bXBSYXljYXN0VmVjKTtcclxuICAgICAgICAgICAgICAgIGJlc3RSZXN1bHQucG9pbnQuY29weSh0bXBSYXljYXN0VmVjKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZGVidWdEcmF3VHJpYW5nbGVMaW5lcyh0cmksIHBjLkNvbG9yLlJFRCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlUDAgPSBiZXN0UmVzdWx0LnBvaW50LmRpc3RhbmNlKHRyaS52MCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZVAxID0gYmVzdFJlc3VsdC5wb2ludC5kaXN0YW5jZSh0cmkudjEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VQMiA9IGJlc3RSZXN1bHQucG9pbnQuZGlzdGFuY2UodHJpLnYyKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlUDAgPiBkaXN0YW5jZVAxKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VQMSA+IGRpc3RhbmNlUDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFJlc3VsdC52ZXJ0ZXhJbmRleCA9IHRyaS5pbmRleDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LnZlcnRleEluZGV4ID0gdHJpLmluZGV4MTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VQMCA+IGRpc3RhbmNlUDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFJlc3VsdC52ZXJ0ZXhJbmRleCA9IHRyaS5pbmRleDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LnZlcnRleEluZGV4ID0gdHJpLmluZGV4MDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy9kZWJ1Z0RyYXdUcmlhbmdsZUxpbmVzKHRyaSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfYXNzaWduUG9zaXRpb24oaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjM+KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIHRoaXMuX2hlaWdodE1hcC53aWR0aCB8IDA7XHJcbiAgICAgICAgY29uc3QgeiA9IGluZGV4IC8gdGhpcy5faGVpZ2h0TWFwLndpZHRoIHwgMDtcclxuXHJcbiAgICAgICAgYnVmLnggPSAoLXRoaXMuX2hlaWdodE1hcC53aWR0aCAvIDIpICsgeDtcclxuICAgICAgICBidWYueSA9IHRoaXMuX2hlaWdodE1hcC5nZXQoeCwgeik7XHJcbiAgICAgICAgYnVmLnogPSAoLXRoaXMuX2hlaWdodE1hcC5kZXB0aCAvIDIpICsgejtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3F1YWRBY3Rpb24ocnM6IElHcmlkUmF5Y2FzdFN0YXRlLCByYXk6IHBjeC5SYXksIHJlc3VsdDogVGVycmFpblJheWNhc3RSZXN1bHQpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgY29uc3QgeCA9IHJzLnByZXZYO1xyXG4gICAgICAgIGNvbnN0IHogPSBycy5wcmV2WjtcclxuXHJcbiAgICAgICAgaWYgKHggPCAwIHx8IHogPCAwIHx8IHggPj0gdGhpcy5faGVpZ2h0TWFwLndpZHRoIC0gMSB8fCB6ID49IHRoaXMuX2hlaWdodE1hcC5kZXB0aCAtIDEpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBjb25zdCB4RmFuMiA9IHggJSAyID09PSAwO1xyXG4gICAgICAgIGNvbnN0IHpGYW4yID0geiAlIDIgPT09IDA7XHJcblxyXG4gICAgICAgIGxldCBpbmRleDAsIGluZGV4MSwgaW5kZXgyO1xyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh4RmFuMiAhPT0gekZhbjIpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4MCA9ICh6ICsgMCkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDApO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgxID0gKHogKyAxKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMCk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDIgPSAoeiArIDApICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluZGV4MCA9ICh6ICsgMCkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDApO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgxID0gKHogKyAxKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDIgPSAoeiArIDApICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgwLCB0bXBQb3MxKTtcclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgxLCB0bXBQb3MyKTtcclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgyLCB0bXBQb3MzKTtcclxuXHJcbiAgICAgICAgICAgIHRyaWFuZ2xlLmluZGV4MCA9IGluZGV4MDtcclxuICAgICAgICAgICAgdHJpYW5nbGUuaW5kZXgxID0gaW5kZXgxO1xyXG4gICAgICAgICAgICB0cmlhbmdsZS5pbmRleDIgPSBpbmRleDI7XHJcblxyXG4gICAgICAgICAgICB0cmlhbmdsZS5zZXQodG1wUG9zMSwgdG1wUG9zMiwgdG1wUG9zMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fdHJpYW5nbGVJbnRlcnNlY3RzUmF5KHRyaWFuZ2xlLCByYXksIHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh4RmFuMiAhPT0gekZhbjIpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4MCA9ICh6ICsgMCkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDEpO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgxID0gKHogKyAxKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMCk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDIgPSAoeiArIDEpICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluZGV4MCA9ICh6ICsgMCkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDApO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgxID0gKHogKyAxKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMCk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDIgPSAoeiArIDEpICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgwLCB0bXBQb3MxKTtcclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgxLCB0bXBQb3MyKTtcclxuICAgICAgICAgICAgdGhpcy5fYXNzaWduUG9zaXRpb24oaW5kZXgyLCB0bXBQb3MzKTtcclxuXHJcbiAgICAgICAgICAgIHRyaWFuZ2xlLmluZGV4MCA9IGluZGV4MDtcclxuICAgICAgICAgICAgdHJpYW5nbGUuaW5kZXgxID0gaW5kZXgxO1xyXG4gICAgICAgICAgICB0cmlhbmdsZS5pbmRleDIgPSBpbmRleDI7XHJcblxyXG4gICAgICAgICAgICB0cmlhbmdsZS5zZXQodG1wUG9zMSwgdG1wUG9zMiwgdG1wUG9zMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fdHJpYW5nbGVJbnRlcnNlY3RzUmF5KHRyaWFuZ2xlLCByYXksIHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW50ZXJzZWN0c1JheShsb2NhbFJheTogcGN4LlJheSwgcmVzdWx0OiBUZXJyYWluUmF5Y2FzdFJlc3VsdCA9IG5ldyBUZXJyYWluUmF5Y2FzdFJlc3VsdCgpKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGlmICghaW50ZXJzZWN0c1JheUJveCh0aGlzLl9ib3VuZGluZ0JveCwgbG9jYWxSYXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2JlZ2luUG9zLmNvcHkobG9jYWxSYXkub3JpZ2luKTtcclxuICAgICAgICB0aGlzLl9iZWdpblBvcy54ICs9IHRoaXMuX2JvdW5kaW5nQm94Lm1heFg7XHJcbiAgICAgICAgdGhpcy5fYmVnaW5Qb3MueiArPSB0aGlzLl9ib3VuZGluZ0JveC5tYXhaO1xyXG5cclxuICAgICAgICB0aGlzLl9lbmRQb3MuY29weShsb2NhbFJheS5kaXJlY3Rpb24pLmFkZCh0aGlzLl9iZWdpblBvcyk7XHJcblxyXG4gICAgICAgIGxldCByYXlEaXJlY3Rpb25GbGF0WCA9IHRoaXMuX2VuZFBvcy54IC0gdGhpcy5fYmVnaW5Qb3MueDtcclxuICAgICAgICBsZXQgcmF5RGlyZWN0aW9uRmxhdFogPSB0aGlzLl9lbmRQb3MueiAtIHRoaXMuX2JlZ2luUG9zLno7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heERpc3RhbmNlRmxhdCA9IE1hdGguc3FydChyYXlEaXJlY3Rpb25GbGF0WCAqKiAyICsgcmF5RGlyZWN0aW9uRmxhdFogKiogMik7XHJcblxyXG4gICAgICAgIGlmIChtYXhEaXN0YW5jZUZsYXQgPCAwLjAwMDEpIHtcclxuICAgICAgICAgICAgLy8gQ29uc2lkZXIgdGhlIHJheSB2ZXJ0aWNhbFxyXG4gICAgICAgICAgICByYXlEaXJlY3Rpb25GbGF0WCA9IDA7XHJcbiAgICAgICAgICAgIHJheURpcmVjdGlvbkZsYXRaID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJheURpcmVjdGlvbkZsYXRYIC89IG1heERpc3RhbmNlRmxhdDtcclxuICAgICAgICAgICAgcmF5RGlyZWN0aW9uRmxhdFogLz0gbWF4RGlzdGFuY2VGbGF0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeGlTdGVwID0gcmF5RGlyZWN0aW9uRmxhdFggPiAwID8gMSA6IHJheURpcmVjdGlvbkZsYXRYIDwgMCA/IC0xIDogMDtcclxuICAgICAgICBjb25zdCB6aVN0ZXAgPSByYXlEaXJlY3Rpb25GbGF0WiA+IDAgPyAxIDogcmF5RGlyZWN0aW9uRmxhdFogPCAwID8gLTEgOiAwO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJhbURlbHRhWCA9IHhpU3RlcCAhPT0gMCA/IDEgLyBNYXRoLmFicyhyYXlEaXJlY3Rpb25GbGF0WCkgOiBpbmZpbml0ZTtcclxuICAgICAgICBjb25zdCBwYXJhbURlbHRhWiA9IHppU3RlcCAhPT0gMCA/IDEgLyBNYXRoLmFicyhyYXlEaXJlY3Rpb25GbGF0WikgOiBpbmZpbml0ZTtcclxuXHJcbiAgICAgICAgbGV0IHBhcmFtQ3Jvc3NYO1xyXG4gICAgICAgIGxldCBwYXJhbUNyb3NzWjtcclxuXHJcbiAgICAgICAgaWYgKHhpU3RlcCAhPT0gMCkge1xyXG4gICAgICAgICAgICBwYXJhbUNyb3NzWCA9IHhpU3RlcCA9PT0gMVxyXG4gICAgICAgICAgICAgICAgPyAoTWF0aC5jZWlsKHRoaXMuX2JlZ2luUG9zLngpIC0gdGhpcy5fYmVnaW5Qb3MueCkgKiBwYXJhbURlbHRhWFxyXG4gICAgICAgICAgICAgICAgOiAodGhpcy5fYmVnaW5Qb3MueCAtIE1hdGguZmxvb3IodGhpcy5fYmVnaW5Qb3MueCkpICogcGFyYW1EZWx0YVg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbUNyb3NzWCA9IGluZmluaXRlOyAgLy8gV2lsbCBuZXZlciBjcm9zcyBvbiBYXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoemlTdGVwICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHBhcmFtQ3Jvc3NaID0gemlTdGVwID09PSAxXHJcbiAgICAgICAgICAgICAgICA/IChNYXRoLmNlaWwodGhpcy5fYmVnaW5Qb3MueikgLSB0aGlzLl9iZWdpblBvcy56KSAqIHBhcmFtRGVsdGFaXHJcbiAgICAgICAgICAgICAgICA6ICh0aGlzLl9iZWdpblBvcy56IC0gTWF0aC5mbG9vcih0aGlzLl9iZWdpblBvcy56KSkgKiBwYXJhbURlbHRhWjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtQ3Jvc3NaID0gaW5maW5pdGU7ICAvLyBXaWxsIG5ldmVyIGNyb3NzIG9uIFpcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJzOiBJR3JpZFJheWNhc3RTdGF0ZSA9IHtcclxuICAgICAgICAgICAgeDogdGhpcy5fYmVnaW5Qb3MueCB8IDAsXHJcbiAgICAgICAgICAgIHo6IHRoaXMuX2JlZ2luUG9zLnogfCAwLFxyXG4gICAgICAgICAgICBwYXJhbTogMCxcclxuICAgICAgICAgICAgcHJldlg6IDAsXHJcbiAgICAgICAgICAgIHByZXZaOiAwLFxyXG4gICAgICAgICAgICBwcmV2UGFyYW06IDAsXHJcbiAgICAgICAgICAgIG1heERpc3RhbmNlRmxhdDogbWF4RGlzdGFuY2VGbGF0LFxyXG4gICAgICAgIH07XHJcblxyXG5cdCAgICAvLyBXb3JrYXJvdW5kIGNhc2VzIHdoZXJlIHRoZSByYXkgc3RhcnRzIGF0IGFuIGludGVnZXIgcG9zaXRpb25cclxuXHQgICAgaWYgKHBhcmFtQ3Jvc3NYID09PSAwLjApIHtcclxuICAgICAgICAgICAgcGFyYW1Dcm9zc1ggKz0gcGFyYW1EZWx0YVg7XHJcbiAgICAgICAgICAgIC8vIElmIGdvaW5nIGJhY2t3YXJkcywgd2Ugc2hvdWxkIGlnbm9yZSB0aGUgcG9zaXRpb24gd2Ugd291bGQgZ2V0IGJ5IHRoZSBhYm92ZSBmbG9vcmluZyxcclxuICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGUgcmF5IGlzIG5vdCBoZWFkaW5nIGluIHRoYXQgZGlyZWN0aW9uXHJcbiAgICAgICAgICAgIGlmICh4aVN0ZXAgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBycy54IC09IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYXJhbUNyb3NzWiA9PT0gMC4wKSB7XHJcbiAgICAgICAgICAgIHBhcmFtQ3Jvc3NaICs9IHBhcmFtRGVsdGFaO1xyXG4gICAgICAgICAgICBpZiAoemlTdGVwID09PSAtMSlcclxuICAgICAgICAgICAgICAgIHJzLnogLT0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoYXNIaXQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgd2hpbGUgKCFoYXNIaXQpIHtcclxuXHJcbiAgICAgICAgICAgIHJzLnByZXZYID0gcnMueDtcclxuICAgICAgICAgICAgcnMucHJldlogPSBycy56O1xyXG4gICAgICAgICAgICBycy5wcmV2UGFyYW0gPSBycy5wYXJhbTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAocGFyYW1Dcm9zc1ggPCBwYXJhbUNyb3NzWikge1xyXG4gICAgICAgICAgICAgICAgLy8gWCBsYW5lXHJcbiAgICAgICAgICAgICAgICBycy54ICs9IHhpU3RlcDtcclxuICAgICAgICAgICAgICAgIC8vIEFzc2lnbiBiZWZvcmUgYWR2YW5jaW5nIHRoZSBwYXJhbSxcclxuICAgICAgICAgICAgICAgIC8vIHRvIGJlIGluIHN5bmMgd2l0aCB0aGUgaW5pdGlhbGl6YXRpb24gc3RlcFxyXG4gICAgICAgICAgICAgICAgcnMucGFyYW0gPSBwYXJhbUNyb3NzWDtcclxuICAgICAgICAgICAgICAgIHBhcmFtQ3Jvc3NYICs9IHBhcmFtRGVsdGFYO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gWiBsYW5lXHJcbiAgICAgICAgICAgICAgICBycy56ICs9IHppU3RlcDtcclxuICAgICAgICAgICAgICAgIHJzLnBhcmFtID0gcGFyYW1Dcm9zc1o7XHJcbiAgICAgICAgICAgICAgICBwYXJhbUNyb3NzWiArPSBwYXJhbURlbHRhWjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9xdWFkQWN0aW9uKHJzLCBsb2NhbFJheSwgcmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgaGFzSGl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJzLnBhcmFtID4gcnMubWF4RGlzdGFuY2VGbGF0KSB7XHJcbiAgICAgICAgICAgICAgICBycy5wYXJhbSA9IHJzLm1heERpc3RhbmNlRmxhdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGFzSGl0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbnRlcnNlY3RzUmF5KHdvcmxkVHJhbmZvcm06IHBjeC5NYXQ0IHwgbnVsbCB8IHVuZGVmaW5lZCwgcmF5OiBwY3guUmF5LCByZXN1bHQ6IFRlcnJhaW5SYXljYXN0UmVzdWx0ID0gbmV3IFRlcnJhaW5SYXljYXN0UmVzdWx0KCkpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgaWYgKHdvcmxkVHJhbmZvcm0pIHtcclxuICAgICAgICAgICAgbW9kZWxUcmFuc2Zvcm0uY29weSh3b3JsZFRyYW5mb3JtKS5pbnZlcnQoKTtcclxuICAgICAgICAgICAgbW9kZWxUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnQocmF5Lm9yaWdpbiwgdG1wUmF5Lm9yaWdpbik7XHJcbiAgICAgICAgICAgIG1vZGVsVHJhbnNmb3JtLnRyYW5zZm9ybVZlY3RvcihyYXkuZGlyZWN0aW9uLCB0bXBSYXkuZGlyZWN0aW9uKTtcclxuICAgIFxyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybS5jb3B5KHdvcmxkVHJhbmZvcm0pO1xyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybUlzSWRlbnRpdHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIWRlYnVnVHJhbnNmb3JtSXNJZGVudGl0eSkge1xyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybS5zZXRJZGVudGl0eSgpO1xyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybUlzSWRlbnRpdHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGhpdCA9IHRoaXMuX2ludGVyc2VjdHNSYXkod29ybGRUcmFuZm9ybSA/IHRtcFJheSA6IHJheSwgcmVzdWx0KTtcclxuICAgIFxyXG4gICAgICAgIGlmIChoaXQgJiYgd29ybGRUcmFuZm9ybSkge1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgd29ybGQgcG9pbnQgYW5kIG5vcm1hbCwgYnV0IHNhdmUgbG9jYWxcclxuICAgICAgICAgICAgd29ybGRUcmFuZm9ybS50cmFuc2Zvcm1Qb2ludChyZXN1bHQucG9pbnQsIHJlc3VsdC5wb2ludCk7XHJcbiAgICAgICAgICAgIHdvcmxkVHJhbmZvcm0udHJhbnNmb3JtVmVjdG9yKHJlc3VsdC5ub3JtYWwsIHJlc3VsdC5ub3JtYWwpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiAhIWhpdDtcclxuICAgIH1cclxufSIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9TaGFyZWQvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBBYnNQYXRjaGVkSGVpZ2h0TWFwLCB7IGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplLCBJUmVhZG9ubHlBYnNQYXRjaGVkSGVpZ2h0TWFwVHlwcGVkIH0gZnJvbSBcIi4vQWJzUGF0Y2hlZEhlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlYWRvbmx5UGF0Y2hlZEhlaWdodE1hcCBleHRlbmRzIElSZWFkb25seUFic1BhdGNoZWRIZWlnaHRNYXBUeXBwZWQ8RmxvYXQzMkFycmF5PiB7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQYXRjaGVkSGVpZ2h0TWFwIGV4dGVuZHMgQWJzUGF0Y2hlZEhlaWdodE1hcDxGbG9hdDMyQXJyYXk+IGltcGxlbWVudHMgSVJlYWRvbmx5UGF0Y2hlZEhlaWdodE1hcCB7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlQnVmZmVyKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIGNodW5rU2l6ZTogaW50KTogRmxvYXQzMkFycmF5IHtcclxuXHJcbiAgICAgICAgY29uc3QgbnVtQ2h1bmtzWCAgID0gKCh3aWR0aCAtIDEpIC8gKGNodW5rU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgY29uc3QgbnVtQ2h1bmtzWiAgID0gKChkZXB0aCAtIDEpIC8gKGNodW5rU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgY29uc3QgY2h1bmtBcnJTaXplID0gY2h1bmtTaXplICoqIDI7XHJcbiAgICAgICAgY29uc3QgY2h1bmtDb3VudCAgID0gbnVtQ2h1bmtzWCAqIG51bUNodW5rc1o7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShjaHVua0FyclNpemUgKiBjaHVua0NvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgZGF0YUNodW5rU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI/OiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICBjb25zdCB2YWxpZERhdGFDaHVua1NpemUgPSBnZXRPclRocm93RGF0YUNodW5rU2l6ZShwYXRjaFNpemUsIGRhdGFDaHVua1NpemUpO1xyXG4gICAgICAgIGNvbnN0IHRtcEJ1ZmZlciA9IGJ1ZmZlciA/PyBQYXRjaGVkSGVpZ2h0TWFwLmNyZWF0ZUJ1ZmZlcih3aWR0aCwgZGVwdGgsIHZhbGlkRGF0YUNodW5rU2l6ZSk7XHJcbiAgICAgICAgc3VwZXIod2lkdGgsIGRlcHRoLCBwYXRjaFNpemUsIGRhdGFDaHVua1NpemUsIG1heEhlaWdodCwgdG1wQnVmZmVyLCAxLCAwKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGF0Y2hlZEhlaWdodE1hcDsiLCJpbXBvcnQgeyBmbG9hdCB9IGZyb20gXCIuL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBJRnJ1c3R1bSB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0dlb21pcEdyaWRSZW5kZXJQcmVwYXJlci5tanNcIjtcclxuaW1wb3J0IHsgZHJhd1BvaW50IH0gZnJvbSBcIi4vRGVidWcubWpzXCI7XHJcblxyXG5jb25zdCB0bXBWZWMgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCB0bXBSYWQgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCB0bXBTcGhlcmUgPSBuZXcgcGMuQm91bmRpbmdTcGhlcmUoKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBGcnVzdHVtIGltcGxlbWVudHMgSUZydXN0dW0ge1xyXG5cclxuICAgIHByaXZhdGUgX21hcmdpbjogZmxvYXQ7XHJcbiAgICBwcml2YXRlIF9tYXQ6IHBjeC5NYXQ0O1xyXG4gICAgcHJpdmF0ZSBfc2NhbGU6IHBjeC5WZWMzO1xyXG4gICAgcHJpdmF0ZSBfZnJ1c3R1bTogcGN4LkZydXN0dW07XHJcblxyXG4gICAgcHVibGljIGdldCBtYXJnaW4oKSAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9tYXJnaW47IH1cclxuICAgIHB1YmxpYyBzZXQgbWFyZ2luKHZhbHVlOiBmbG9hdCkgeyB0aGlzLl9tYXJnaW4gPSB2YWx1ZTsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZnJ1c3R1bSgpICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2ZydXN0dW07IH1cclxuICAgIHB1YmxpYyBzZXQgZnJ1c3R1bSh2YWx1ZTogcGN4LkZydXN0dW0pIHsgdGhpcy5fZnJ1c3R1bSA9IHZhbHVlOyB9XHJcblxyXG4gICAgcHVibGljIGdldCB0cmFuc2Zvcm0oKSAgICAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9tYXQ7IH1cclxuICAgIHB1YmxpYyBzZXQgdHJhbnNmb3JtKHZhbHVlOiBwY3guTWF0NCkge1xyXG4gICAgICAgIHRoaXMuX21hdC5jb3B5KHZhbHVlKTtcclxuICAgICAgICB0aGlzLl9tYXQuZ2V0U2NhbGUodGhpcy5fc2NhbGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9tYXJnaW4gPSAxO1xyXG4gICAgICAgIHRoaXMuX21hdCAgICA9IG5ldyBwYy5NYXQ0KCk7XHJcbiAgICAgICAgdGhpcy5fc2NhbGUgID0gbmV3IHBjLlZlYzMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29udGFpbnNTcGhlcmUobG9jYWxYOiBmbG9hdCwgbG9jYWxZOiBmbG9hdCwgbG9jYWxaOiBmbG9hdCwgcmFkaXVzOiBmbG9hdCkge1xyXG5cclxuICAgICAgICB0bXBWZWMuc2V0KGxvY2FsWCwgbG9jYWxZLCBsb2NhbFopO1xyXG4gICAgICAgIHRtcFJhZC5jb3B5KHRoaXMuX3NjYWxlKS5tdWxTY2FsYXIocmFkaXVzKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWF0LnRyYW5zZm9ybVBvaW50KHRtcFZlYywgdG1wVmVjKTtcclxuXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBbUExBWUNBTlZBUzpET0NdOiBjZW50ZXIgcHJpdmF0ZSBpbiB2MlxyXG4gICAgICAgIHRtcFNwaGVyZS5jZW50ZXIgPSB0bXBWZWM7XHJcbiAgICAgICAgdG1wU3BoZXJlLnJhZGl1cyA9IHRtcFJhZC5kaXN0YW5jZShwYy5WZWMzLlpFUk8pICogdGhpcy5fbWFyZ2luO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZnJ1c3R1bS5jb250YWluc1NwaGVyZSh0bXBTcGhlcmUpID4gMDtcclxuICAgIH1cclxufSIsImltcG9ydCB7IGRyYXdEaXJlY3Rpb25WZWN0b3IsIGRyYXdQb2ludCB9IGZyb20gXCIuLi9TaGFyZWQvRGVidWcubWpzXCI7XHJcbmltcG9ydCB7IE1pZHBvaW50RGlzcFRlcnJhaW4gfSBmcm9tIFwiLi4vVGVycmFpblN5c3RlbS9NaWRwb2ludERpc3BUZXJyYWluLm1qc1wiO1xyXG5pbXBvcnQgVGVycmFpblJheWNhc3RSZXN1bHQgZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vVGVycmFpblJheWNhc3RSZXN1bHQubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRNYXAgZnJvbSBcIi4uL1RlcnJhaW5TeXN0ZW0vSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgVGVycmFpblJlbmRlclByZXBhcmVyIGZyb20gXCIuLi9UZXJyYWluSGVscGVycy9UZXJyYWluUmVuZGVyUHJlcGFyZXIubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUJydXNoU2V0dGluZ3MgfSBmcm9tIFwiLi4vVGVycmFpbkhlbHBlcnMvQnJ1c2gubWpzXCI7XHJcbmltcG9ydCBDb2xvclBhaW50ZXIgZnJvbSBcIi4uL1RlcnJhaW5IZWxwZXJzL0NvbG9yUGFpbnRlci5tanNcIjtcclxuaW1wb3J0IFRlcnJhaW5QYXRjaGVzIGZyb20gXCIuLi9UZXJyYWluSGVscGVycy9UZXJyYWluUGF0Y2hlcy5tanNcIjtcclxuaW1wb3J0IHsgdGVycmFpbkhlaWdodHNDb21wcmVzc0FsZ29yaXRtLCB0ZXJyYWluSGVpZ2h0c0NvbXByZXNzQWxnb3JpdG1EZWZhdWx0LCB0ZXJyYWluUGF0Y2hTaXplRW51bSwgdGVycmFpblBhdGNoU2l6ZUVudW1EZWZhdWx0LCB0ZXJyYWluU2l6ZUVudW0sIHRlcnJhaW5TaXplRW51bURlZmF1bHQgfSBmcm9tIFwiLi4vVGVycmFpbkhlbHBlcnMvRW51bXMubWpzXCI7XHJcbmltcG9ydCB7IHRlcnJhaW5NYXhIZWlnaHRQYXJhbU5hbWUsIHRlcnJhaW5TcGxhdE1hcFBhcmFtTmFtZSwgfSBmcm9tIFwiLi4vVGVycmFpbkhlbHBlcnMvVGVycmFpblBhdGNoZXNTaGFkZXJDaHVua3MubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRmaWVsZFNoYXBlIGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0hlaWdodGZpZWxkU2hhcGUubWpzXCI7XHJcbmltcG9ydCBQYXRjaGVkSGVpZ2h0TWFwIGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL1BhdGNoZWRIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCBDb21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcCwgeyBUQ29tcHJlc3NBbGdvcml0bSB9IGZyb20gXCIuLi9UZXJyYWluU3lzdGVtL0NvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBGcnVzdHVtIH0gZnJvbSBcIi4uL1NoYXJlZC9GcnVzdHVtLm1qc1wiO1xyXG5pbXBvcnQgeyBtYXBUaXRsZUVudW0gfSBmcm9tIFwiLi4vU2hhcmVkL0VudW1Db252ZXJ0ZXIubWpzXCI7XHJcbmltcG9ydCB7IGdldEJ1ZmZlciB9IGZyb20gXCIuLi9BbW1vSW50ZWdyYXRpb24vQW1tb0ludGVncmF0aW9uLm1qc1wiO1xyXG5pbXBvcnQgeyBUZXJyYWluUGF0aGNlc0luc3RhbmNpbmcgfSBmcm9tIFwiLi4vVGVycmFpbkhlbHBlcnMvVGVycmFpblBhdGNoZXNJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgeyBUZXJyYWluUGF0aGNlc0NvbWJpbmVJbnN0YW5jaW5nIH0gZnJvbSBcIi4uL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5QYXRjaGVzQ29tYmluZUluc3RhbmNpbmcubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElUZXJyYWluSGVpZ2h0TWFwQXR0cmlidXRlIHtcclxuICAgIHJlYWRvbmx5IGZpbGU6IHBjeC5Bc3NldDtcclxuICAgIHJlYWRvbmx5IHRleHR1cmU6IHBjeC5Bc3NldDtcclxuICAgIHJlYWRvbmx5IHNtb290aEZhY3RvcjogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgc21vb3RoUmFkaXVzOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRlcnJhaW5CcnVzaEF0dHJpYnV0ZSBleHRlbmRzIElCcnVzaFNldHRpbmdzIHtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVGVycmFpbkxheWVyQXR0cmlidXRlIHtcclxuICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcclxuICAgIHJlYWRvbmx5IGRpZmZ1c2U6IHBjeC5Bc3NldDtcclxuICAgIHJlYWRvbmx5IG5vcm1hbE1hcDogcGN4LkFzc2V0O1xyXG4gICAgcmVhZG9ubHkgc2l6ZTogcGN4LlZlYzI7XHJcbiAgICByZWFkb25seSBvZmZzZXQ6IHBjeC5WZWMyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElUZXJyYWluUGFpbnRlclNldHRpbmdzQXR0cmlidXRlIHtcclxuICAgIHJlYWRvbmx5IHNwbGF0TWFwOiBwY3guQXNzZXQ7XHJcbn1cclxuXHJcbmNvbnN0IGJydXNoTWluU2l6ZSA9IDI7XHJcbmNvbnN0IGJydXNoTWF4U2l6ZSA9IDI1MDtcclxuY29uc3QgdG1wTWF0ID0gbmV3IHBjLk1hdDQoKTtcclxuY29uc3QgdGVycmFpbkxvY2FsVmVydGV4UG9zID0gbmV3IHBjLlZlYzMoKTtcclxuY29uc3QgaGVpZ2h0TWFwRXh0ID0gJy5obSc7XHJcblxyXG5leHBvcnQgZW51bSBSZW5kZXJNb2RlIHtcclxuICAgIFN0YW5kYXJkID0gMSxcclxuICAgIEluc3RhbmNpbmdBY2NlbGVyYXRvciA9IDIsXHJcbiAgICBDb21iaW5lSW5zdGFuY2luZ0FjY2VsZXJhdG9yID0gMyxcclxuICAgIEN1c3RvbUZvcndhcmRSZW5kZXJlciA9IDQsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUZXJyYWluIGV4dGVuZHMgcGMuU2NyaXB0VHlwZSB7XHJcblxyXG4gICAgZGVjbGFyZSByZWFkb25seSByZW5kZXJNb2RlOiBSZW5kZXJNb2RlO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBsb2RCeVlQb3M6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IHpGYXI6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgd2lkdGg6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgZGVwdGg6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGNvbXByZXNzQWxnb3JpdG06IFRDb21wcmVzc0FsZ29yaXRtIHwgJ25vbmUnO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBwYXRjaFNpemU6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgY2FzdFNoYWRvdzogYm9vbGVhbjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgcmVjZWl2ZVNoYWRvdzogYm9vbGVhbjtcclxuXHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGxheWVyOiBzdHJpbmc7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGxheWVyMjogc3RyaW5nO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBhdXRvUmVuZGVyOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSB3aXJlZnJhbWU6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IHBhaW50aW5nOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBjYW1lcmFFbnRpdHk6IHBjeC5FbnRpdHkgfCB1bmRlZmluZWQ7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGhlaWdodE1hcDogSVRlcnJhaW5IZWlnaHRNYXBBdHRyaWJ1dGU7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGJydXNoOiBJVGVycmFpbkJydXNoQXR0cmlidXRlO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBhY3RpdmVMYXllcjogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBsYXllcnM6IElUZXJyYWluTGF5ZXJBdHRyaWJ1dGVbXTtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgcGFpbnRlclNldHRpbmdzOiBJVGVycmFpblBhaW50ZXJTZXR0aW5nc0F0dHJpYnV0ZTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHNoYXBlKCkgeyByZXR1cm4gdGhpcy5faGVpZ2h0RmllbGRTaGFwZTsgfVxyXG4gICAgcHVibGljIGdldCBvYmplY3QoKSB7IHJldHVybiB0aGlzLl90ZXJyYWluOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoZXMoKSB7IHJldHVybiB0aGlzLl9wYXRjaGVzU3RvcmU7IH1cclxuICAgIHB1YmxpYyBnZXQgcmVuZGVyUHJlcGFyZXIoKSB7IHJldHVybiB0aGlzLl9yZW5kZXJQcmVwYXJlcjsgfVxyXG5cclxuICAgIHByaXZhdGUgX2xvY2sgPSAwO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgbG9jaygpIHsgcmV0dXJuIHRoaXMuX2xvY2s7IH1cclxuXHJcbiAgICBwcml2YXRlIF9sb2NhbENhbWVyYVBvc2l0aW9uID0gbmV3IHBjLlZlYzMoKTtcclxuICAgIHByaXZhdGUgX3RlcnJhaW46IE1pZHBvaW50RGlzcFRlcnJhaW47XHJcbiAgICBwcml2YXRlIF9wYXRjaGVzU3RvcmU6IFRlcnJhaW5QYXRjaGVzO1xyXG4gICAgcHJpdmF0ZSBfcm91Z2huZXNzID0gMS4wO1xyXG5cclxuICAgIHByaXZhdGUgX2hlaWdodEZpZWxkU2hhcGU6IEhlaWdodGZpZWxkU2hhcGU7XHJcbiAgICBwcml2YXRlIF9yYXljYXN0UmVzdWx0OiBUZXJyYWluUmF5Y2FzdFJlc3VsdDtcclxuICAgIHByaXZhdGUgX3JheVN0YXJ0ID0gbmV3IHBjLlZlYzMoKTtcclxuICAgIHByaXZhdGUgX3JheUVuZCA9IG5ldyBwYy5WZWMzKCk7XHJcbiAgICBwcml2YXRlIF9yYXlEaXJlY3Rpb24gPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgcHJpdmF0ZSBfcmF5ID0gbmV3IHBjLlJheSgpO1xyXG5cclxuICAgIHByaXZhdGUgX2xhc3RNb3VzZU1vdmVFdmVudDogcGN4Lk1vdXNlRXZlbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBfbGFzdExvZEdyaWRVcGRhdGU6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIF9hY3RpdmVCcnVzaDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfYnJ1c2hIZWlnaHRNYXA6IEhlaWdodE1hcDtcclxuICAgIHByaXZhdGUgX2NvbG9yUGFpbnRlcjogQ29sb3JQYWludGVyO1xyXG4gICAgcHJpdmF0ZSBfYnJ1c2hTaXplOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9icnVzaFNpemVTdGVwOiBudW1iZXIgPSAxO1xyXG4gICAgcHJpdmF0ZSBfYnJ1c2hPcGFjaXR5OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9icnVzaE9wYWNpdHlTdGVwOiBudW1iZXIgPSAwLjAxO1xyXG4gICAgcHJpdmF0ZSBfaW50ZXJzZWN0c1JheVJlc3VsdDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfbWF0ZXJpYWw6IHBjeC5TdGFuZGFyZE1hdGVyaWFsO1xyXG4gICAgcHJpdmF0ZSBfbGF5ZXJzRGlmZnVzZTogcGN4LlRleHR1cmUgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgcHJpdmF0ZSBfcmVuZGVyUHJlcGFyZXI6IFRlcnJhaW5SZW5kZXJQcmVwYXJlcjtcclxuICAgIHByaXZhdGUgX2ZydXN0dW06IEZydXN0dW07XHJcblxyXG4gICAgcHVibGljIGFkZExvY2soKSB7XHJcbiAgICAgICAgdGhpcy5fbG9jaysrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmcmVlTG9jaygpIHtcclxuICAgICAgICB0aGlzLl9sb2NrLS07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBvc3RJbml0aWFsaXplKCk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVNb3VzZSgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVLZXlib2FyZCgpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbml0QnJ1c2goKTtcclxuICAgICAgICB0aGlzLl9pbml0VGVycmFpbigpO1xyXG5cclxuICAgICAgICB0aGlzLl9jcmVhdGVUZXJyYWluTWF0ZXJpYWwoKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVUZXJyYWluTWF0ZXJpYWxQYXJhbWV0ZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUxheWVycygpO1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVIZWlnaHRNYXBGcm9tQXR0cigpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUJydXNoKCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlUGFpbnRlck1hdGVyaWFsKCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaCgpO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOnJlbmRlck1vZGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclByZXBhcmVyLnBhdGNoZXNTdG9yZS5jdXN0b21Gb3J3YXJkUmVuZGVyZXIgPSB0aGlzLnJlbmRlck1vZGUgPT09IFJlbmRlck1vZGUuQ3VzdG9tRm9yd2FyZFJlbmRlcmVyO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJQcmVwYXJlci5wYXRjaGVzU3RvcmUuc2V0TWF0ZXJpYWwodGhpcy5fbWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJQcmVwYXJlci5wYXRjaGVzU3RvcmUuc2V0SW5zdGFuY2luZyhcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kZSA9PT0gUmVuZGVyTW9kZS5JbnN0YW5jaW5nQWNjZWxlcmF0b3IgPyBuZXcgVGVycmFpblBhdGhjZXNJbnN0YW5jaW5nKCkgOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkNvbWJpbmVJbnN0YW5jaW5nQWNjZWxlcmF0b3IgPyBuZXcgVGVycmFpblBhdGhjZXNDb21iaW5lSW5zdGFuY2luZygpIDpcclxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOndpcmVmcmFtZScsICgpID0+IHsgdGhpcy5fcmVuZGVyUHJlcGFyZXIud2lyZWZyYW1lID0gdGhpcy53aXJlZnJhbWU7IH0pO1xyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6Y2FzdFNoYWRvdycsICgpID0+IHsgdGhpcy5fcmVuZGVyUHJlcGFyZXIuY2FzdFNoYWRvdyA9IHRoaXMuY2FzdFNoYWRvdzsgfSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpyZWNlaXZlU2hhZG93JywgKCkgPT4geyB0aGlzLl9yZW5kZXJQcmVwYXJlci5yZWNlaXZlU2hhZG93ID0gdGhpcy5yZWNlaXZlU2hhZG93OyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjphY3RpdmVMYXllcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGFpbnRlck1hdGVyaWFsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6bGF5ZXJzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVMYXllcnMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpicnVzaCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQnJ1c2goKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGFpbnRlck1hdGVyaWFsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6aGVpZ2h0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLnNldE1heEhlaWdodCh0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRlcnJhaW5NYXRlcmlhbFBhcmFtZXRlcnMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjp6RmFyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLnNldFpGYXIodGhpcy56RmFyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0QnJ1c2goKSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRNYXAgPSB0aGlzLnBhaW50ZXJTZXR0aW5ncy5zcGxhdE1hcC5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICB0aGlzLl9icnVzaEhlaWdodE1hcCA9IG5ldyBIZWlnaHRNYXAoMjU2LCAyNTYsIDEwMCk7XHJcbiAgICAgICAgdGhpcy5fY29sb3JQYWludGVyID0gbmV3IENvbG9yUGFpbnRlcih0aGlzLmFwcCwgc3BsYXRNYXApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZVBhaW50ZXJNYXRlcmlhbCgpIHtcclxuICAgICAgICB0aGlzLl9jb2xvclBhaW50ZXIudXBkYXRlU2V0dGluZ3ModGhpcy5icnVzaCwgdGhpcy5hY3RpdmVMYXllcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlQnJ1c2goKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2JydXNoU2l6ZSA9IHRoaXMuYnJ1c2guc2l6ZSB8IDA7XHJcbiAgICAgICAgdGhpcy5fYnJ1c2hPcGFjaXR5ID0gdGhpcy5icnVzaC5vcGFjaXR5O1xyXG5cclxuICAgICAgICBjb25zdCBhY3RpdmVCcnVzaCA9IHRoaXMuYnJ1c2guYWN0aXZlIHwgMDtcclxuXHJcbiAgICAgICAgaWYgKGFjdGl2ZUJydXNoID09PSB0aGlzLl9hY3RpdmVCcnVzaCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYnJ1c2gudGV4dHVyZXNbYWN0aXZlQnJ1c2hdKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JydXNoIGltYWdlIHVuc2V0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBicnVzaFRleHR1cmUgPSB0aGlzLmJydXNoLnRleHR1cmVzW2FjdGl2ZUJydXNoXS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICBjb25zdCBicnVzaEltZyA9IGJydXNoVGV4dHVyZS5nZXRTb3VyY2UoKSBhcyB1bmtub3duIGFzIEltYWdlQml0bWFwO1xyXG5cclxuICAgICAgICBpZiAoIWJydXNoSW1nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JydXNoIGltYWdlIHVuc2V0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9hY3RpdmVCcnVzaCA9IGFjdGl2ZUJydXNoO1xyXG4gICAgICAgIHRoaXMuX2JydXNoSGVpZ2h0TWFwLmZyb21JbWFnZShicnVzaEltZyk7XHJcbiAgICAgICAgdGhpcy5fYnJ1c2hIZWlnaHRNYXAuc21vb3RoKDEsIDEpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9icnVzaEhlaWdodE1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEhlaWdodE1hcEJ1ZmZlcihjaHVua1NpemU6IG51bWJlcikge1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBNb3ZlIHRvIHRlcnJhaW4gY29sbGlkZXJcclxuICAgICAgICAvLyBUT0RPOiBBbW1vIGpzIGludGVncmF0aW9uXHJcblxyXG4gICAgICAgIGxldCBidWZmZXI6IGFueSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBBbW1vICE9PSAndW5kZWZpbmVkJykge1xyXG5cclxuICAgICAgICAgICAgYnVmZmVyID0gZ2V0QnVmZmVyKHRoaXMud2lkdGgsIHRoaXMuZGVwdGgsIHRoaXMucGF0Y2hTaXplLCBjaHVua1NpemUsIHRoaXMuY29tcHJlc3NBbGdvcml0bSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBodCA9IHRoaXMuY29tcHJlc3NBbGdvcml0bSA9PT0gJ25vbmUnID8gMCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc0FsZ29yaXRtID09PSAneDInICAgPyAxIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaG0gPSBuZXcgQW1tby5idEFsZXhUZXJyYWluUGF0Y2hlZEhlaWdodE1hcCh0aGlzLndpZHRoLCB0aGlzLmRlcHRoLCB0aGlzLnBhdGNoU2l6ZSwgY2h1bmtTaXplLCAwLCB0aGlzLmhlaWdodCwgaHQsIGJ1ZmZlci5ieXRlT2Zmc2V0KTtcclxuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBuZXcgQW1tby5idEFsZXhIZWlnaHRmaWVsZFRlcnJhaW5TaGFwZShobSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZ3JvdW5kVHJhbnNmb3JtID0gbmV3IEFtbW8uYnRUcmFuc2Zvcm0oKTtcclxuXHJcbiAgICAgICAgICAgIGdyb3VuZFRyYW5zZm9ybS5zZXRJZGVudGl0eSgpO1xyXG4gICAgICAgICAgICBncm91bmRUcmFuc2Zvcm0uc2V0T3JpZ2luKG5ldyBBbW1vLmJ0VmVjdG9yMygwLCB0aGlzLmhlaWdodCAvIDIsIDApKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VuZE1hc3MgPSAwO1xyXG4gICAgICAgICAgICBjb25zdCBncm91bmRMb2NhbEluZXJ0aWEgPSBuZXcgQW1tby5idFZlY3RvcjMoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VuZE1vdGlvblN0YXRlID0gbmV3IEFtbW8uYnREZWZhdWx0TW90aW9uU3RhdGUoZ3JvdW5kVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdW5kQm9keSA9IG5ldyBBbW1vLmJ0UmlnaWRCb2R5KG5ldyBBbW1vLmJ0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mbyhncm91bmRNYXNzLCBncm91bmRNb3Rpb25TdGF0ZSwgc2hhcGUsIGdyb3VuZExvY2FsSW5lcnRpYSkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5yaWdpZGJvZHkhLmR5bmFtaWNzV29ybGQuYWRkUmlnaWRCb2R5KGdyb3VuZEJvZHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0VGVycmFpbigpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0bXBDaHVua1NpemUgPSB0aGlzLnBhdGNoU2l6ZSAqIDIgLSAxOyAvLyAyNTcsIDUxMywgLi4uXHJcbiAgICAgICAgY29uc3QgY2h1bmtTaXplID0gTWF0aC5taW4odGhpcy53aWR0aCwgdGhpcy5kZXB0aCwgdG1wQ2h1bmtTaXplKTtcclxuICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9pbml0SGVpZ2h0TWFwQnVmZmVyKGNodW5rU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0TWFwID0gdGhpcy5jb21wcmVzc0FsZ29yaXRtICE9PSAnbm9uZSdcclxuICAgICAgICA/IG5ldyBDb21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcCh0aGlzLndpZHRoLCB0aGlzLmRlcHRoLCB0aGlzLnBhdGNoU2l6ZSwgY2h1bmtTaXplLCB0aGlzLmhlaWdodCwgdGhpcy5jb21wcmVzc0FsZ29yaXRtLCBidWZmZXIpXHJcbiAgICAgICAgOiBuZXcgUGF0Y2hlZEhlaWdodE1hcCh0aGlzLndpZHRoLCB0aGlzLmRlcHRoLCB0aGlzLnBhdGNoU2l6ZSwgY2h1bmtTaXplLCB0aGlzLmhlaWdodCwgYnVmZmVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdGVycmFpbiA9IG5ldyBNaWRwb2ludERpc3BUZXJyYWluKGhlaWdodE1hcCwgdGhpcy56RmFyKTtcclxuICAgICAgICB0aGlzLl9oZWlnaHRGaWVsZFNoYXBlID0gbmV3IEhlaWdodGZpZWxkU2hhcGUoaGVpZ2h0TWFwKTtcclxuICAgICAgICB0aGlzLl9yYXljYXN0UmVzdWx0ID0gbmV3IFRlcnJhaW5SYXljYXN0UmVzdWx0KCk7XHJcbiAgICAgICAgdGhpcy5fZnJ1c3R1bSA9IG5ldyBGcnVzdHVtKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhdGNoZXNTdG9yZSA9IG5ldyBUZXJyYWluUGF0Y2hlcyh0aGlzLl90ZXJyYWluKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJQcmVwYXJlciA9IG5ldyBUZXJyYWluUmVuZGVyUHJlcGFyZXIodGhpcy5fcGF0Y2hlc1N0b3JlLCB7XHJcbiAgICAgICAgICAgIHdpcmVmcmFtZTogdGhpcy53aXJlZnJhbWUsXHJcbiAgICAgICAgICAgIGNhc3RTaGFkb3c6IHRoaXMuY2FzdFNoYWRvdyxcclxuICAgICAgICAgICAgcmVjZWl2ZVNoYWRvdzogdGhpcy5yZWNlaXZlU2hhZG93LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX3RlcnJhaW4sIHRoaXMuX2hlaWdodEZpZWxkU2hhcGUsIHRoaXMuX3JlbmRlclByZXBhcmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jcmVhdGVUZXJyYWluTWF0ZXJpYWwoKSB7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwgPSBUZXJyYWluUGF0Y2hlcy5jcmVhdGVNYXRlcmlhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZVRlcnJhaW5NYXRlcmlhbFBhcmFtZXRlcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHRlcnJhaW5TcGxhdE1hcFBhcmFtTmFtZSwgdGhpcy5fY29sb3JQYWludGVyLmJhY2tncm91bmQpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih0ZXJyYWluTWF4SGVpZ2h0UGFyYW1OYW1lLCB0aGlzLl90ZXJyYWluLm1heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTGF5ZXJzKCkge1xyXG5cclxuICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgY29uc3QgbWF4Q291bnQgPSA1O1xyXG4gICAgICAgIGNvbnN0IHdpZHRoICA9IDEwMjQ7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gMTAyNDtcclxuXHJcbiAgICAgICAgbGV0IGxlbmd0aCAgID0gMDtcclxuICAgICAgICBsZXQgZmxhZ3MgICAgPSBbXTtcclxuICAgICAgICBsZXQgc2NhbGVzICAgPSBbXTtcclxuICAgICAgICBsZXQgb2Zmc2V0cyAgPSBbXTtcclxuICAgICAgICBsZXQgZGlmZnVzZXMgPSBbXTtcclxuICAgICAgICBsZXQgbm9ybWFscyAgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhDb3VudDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZmxhZyA9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoaSA8IHRoaXMubGF5ZXJzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyICAgICA9IHRoaXMubGF5ZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZnVzZSAgID0gbGF5ZXIuZGlmZnVzZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbE1hcCA9IGxheWVyLm5vcm1hbE1hcDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlmZnVzZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gZGlmZnVzZS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZysrO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpZmZ1c2VzLnB1c2godGV4dHVyZS5nZXRTb3VyY2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVzLnB1c2gobGF5ZXIuc2l6ZS54LCBsYXllci5zaXplLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldHMucHVzaChsYXllci5vZmZzZXQueCwgbGF5ZXIub2Zmc2V0LnkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobm9ybWFsTWFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFscy5wdXNoKChub3JtYWxNYXAucmVzb3VyY2UgYXMgcGN4LlRleHR1cmUpLmdldFNvdXJjZSgpKTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmxhZ3MucHVzaChmbGFnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2xheWVyc0RpZmZ1c2U/LmRlc3Ryb3koKTtcclxuICAgICAgICAvL3RoaXMuX2xheWVyc0RpZmZ1c2UgPSB0aGlzLmxheWVyc1swXS5kaWZmdXNlLnJlc291cmNlIGFzIHBjeC5UZXh0dXJlO1xyXG4gICAgICAgIHRoaXMuX2xheWVyc0RpZmZ1c2UgPSBuZXcgcGMuVGV4dHVyZSh0aGlzLmFwcC5ncmFwaGljc0RldmljZSwge1xyXG4gICAgICAgICAgICBuYW1lOiAndGVycmFpbkxheWVyc0RpZmZ1c2UnLFxyXG4gICAgICAgICAgICBmb3JtYXQ6IHBjLlBJWEVMRk9STUFUX1JHQkE4LFxyXG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxyXG4gICAgICAgICAgICBhcnJheUxlbmd0aDogbGVuZ3RoLFxyXG4gICAgICAgICAgICBmbGlwWTogdGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UuaXNXZWJHUFUsXHJcbiAgICAgICAgICAgIC8vbWFnRmlsdGVyOiBwYy5GSUxURVJfTElORUFSLFxyXG4gICAgICAgICAgICAvL21pbkZpbHRlcjogcGMuRklMVEVSX0xJTkVBUl9NSVBNQVBfTElORUFSLFxyXG4gICAgICAgICAgICBtaXBtYXBzOiB0cnVlLFxyXG4gICAgICAgICAgICBhZGRyZXNzVTogcGMuQUREUkVTU19SRVBFQVQsXHJcbiAgICAgICAgICAgIGFkZHJlc3NWOiBwYy5BRERSRVNTX1JFUEVBVCxcclxuICAgICAgICAgICAgYWRkcmVzc1c6IHBjLkFERFJFU1NfQ0xBTVBfVE9fRURHRSxcclxuICAgICAgICAgICAgbGV2ZWxzOiBbIGRpZmZ1c2VzIGFzIGFueSBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fbGF5ZXJzRGlmZnVzZS51cGxvYWQoKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5fbGF5ZXJzRGlmZnVzZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihgdVRlcnJhaW5MYXllcnNDb3VudGAsIGxlbmd0aCk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGB1VGVycmFpbkxheWVyc0RpZmZ1c2VgLCB0aGlzLl9sYXllcnNEaWZmdXNlKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoYHVUZXJyYWluTGF5ZXJzRmxhZ3NbMF1gLCBmbGFncyk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGB1VGVycmFpbkxheWVyc1NjYWxlWzBdYCwgc2NhbGVzKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoYHVUZXJyYWluTGF5ZXJzT2Zmc2V0WzBdYCwgb2Zmc2V0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTWVzaCgpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJQcmVwYXJlci5wYXRjaGVzU3RvcmUuY3VzdG9tRm9yd2FyZFJlbmRlcmVyID0gdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkN1c3RvbUZvcndhcmRSZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9yZW5kZXJQcmVwYXJlci5wYXRjaGVzU3RvcmUuc2V0SW5zdGFuY2luZyhcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkluc3RhbmNpbmdBY2NlbGVyYXRvciA/IG5ldyBUZXJyYWluUGF0aGNlc0luc3RhbmNpbmcoKSA6XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kZSA9PT0gUmVuZGVyTW9kZS5Db21iaW5lSW5zdGFuY2luZ0FjY2VsZXJhdG9yID8gbmV3IFRlcnJhaW5QYXRoY2VzQ29tYmluZUluc3RhbmNpbmcoKSA6XHJcbiAgICAgICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyUHJlcGFyZXIucGF0Y2hlc1N0b3JlLmluaXQodGhpcy5hcHAsIHRoaXMuZW50aXR5LCB0aGlzLl9tYXRlcmlhbCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgX2luaXRpYWxpemVNb3VzZSgpIHtcclxuICAgICAgICB0aGlzLmFwcC5tb3VzZT8ub24ocGMuRVZFTlRfTU9VU0VNT1ZFLCB0aGlzLl9vbk1vdXNlTW92ZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9uKHBjLkVWRU5UX01PVVNFV0hFRUwsIHRoaXMuX29uTW91c2VXaGVlbCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbignZGVzdHJveScsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9mZihwYy5FVkVOVF9NT1VTRU1PVkUsIHRoaXMuX29uTW91c2VNb3ZlLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9mZihwYy5FVkVOVF9NT1VTRVdIRUVMLCB0aGlzLl9vbk1vdXNlV2hlZWwsIHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uTW91c2VNb3ZlKGV2ZW50OiBwY3guTW91c2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMuX2xhc3RNb3VzZU1vdmVFdmVudCA9IGV2ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uTW91c2VXaGVlbChldmVudDogcGN4Lk1vdXNlRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSB0aGlzLl9icnVzaFNpemUgKyBldmVudC53aGVlbERlbHRhICogdGhpcy5fYnJ1c2hTaXplU3RlcDtcclxuICAgICAgICB0aGlzLl9icnVzaFNpemUgPSBNYXRoLm1pbihNYXRoLm1heChjYW5kaWRhdGUsIGJydXNoTWluU2l6ZSksIGJydXNoTWF4U2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZUtleWJvYXJkKCkge1xyXG4gICAgICAgIHRoaXMuYXBwLmtleWJvYXJkPy5vbihwYy5FVkVOVF9LRVlET1dOLCB0aGlzLl9vbktleWJvYXJkRG93biwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5hcHAua2V5Ym9hcmQ/Lm9uKHBjLkVWRU5UX0tFWVVQLCB0aGlzLl9vbktleWJvYXJkVXAsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMub24oJ2Rlc3Ryb3knLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLm1vdXNlPy5vZmYocGMuRVZFTlRfS0VZRE9XTiwgdGhpcy5fb25LZXlib2FyZERvd24sIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZT8ub2ZmKHBjLkVWRU5UX0tFWVVQLCB0aGlzLl9vbktleWJvYXJkVXAsIHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2tleUFkZExvY2sgPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfa2V5U3ViTG9jayA9IHRydWU7XHJcbiAgICBwcml2YXRlIF9vbktleWJvYXJkRG93bihldmVudDogcGN4LktleWJvYXJkRXZlbnQpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2tleUFkZExvY2sgPT09IGZhbHNlICYmIGV2ZW50LmtleSA9PT0gcGMuS0VZX0FERCkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXlBZGRMb2NrID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fYnJ1c2hPcGFjaXR5ID0gTWF0aC5tYXgodGhpcy5fYnJ1c2hPcGFjaXR5ICsgdGhpcy5fYnJ1c2hPcGFjaXR5U3RlcCwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fa2V5U3ViTG9jayA9PT0gZmFsc2UgJiYgZXZlbnQua2V5ID09PSBwYy5LRVlfU1VCVFJBQ1QpIHtcclxuICAgICAgICAgICAgdGhpcy5fa2V5U3ViTG9jayA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2JydXNoT3BhY2l0eSA9IE1hdGgubWluKHRoaXMuX2JydXNoT3BhY2l0eSAtIHRoaXMuX2JydXNoT3BhY2l0eVN0ZXAsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vbktleWJvYXJkVXAoZXZlbnQ6IHBjeC5LZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gcGMuS0VZX0FERCkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXlBZGRMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gcGMuS0VZX1NVQlRSQUNUKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tleVN1YkxvY2sgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBfdXBkYXRlSGVpZ2h0TWFwRnJvbUF0dHIoKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmhlaWdodE1hcC5maWxlKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVpZ2h0TWFwLmZpbGUucmVzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignSGVpZ2h0IG1hcCBmaWxlIHVuc2V0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5oZWlnaHRNYXAuZmlsZS5yZXNvdXJjZSBhcyBBcnJheUJ1ZmZlcjtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdGVycmFpbi5sb2FkSGVpZ2h0TWFwRnJvbUZpbGUoZGF0YSwge1xyXG4gICAgICAgICAgICAgICAgYWRhcHRpdmVNYXhIZWlnaHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhZGFwdGl2ZVdpZHRoQW5kRGVwdGg6IHRydWUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSB0aGlzLmhlaWdodE1hcC50ZXh0dXJlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0hlaWdodCBtYXAgaW1hZ2UgdW5zZXQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc291cmNlID0gdGV4dHVyZS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICAgICAgY29uc3QgaW1nID0gcmVzb3VyY2UuZ2V0U291cmNlKCkgYXMgYW55O1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpbWcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignSGVpZ2h0IG1hcCBpbWFnZSB1bnNldC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5sb2FkSGVpZ2h0TWFwRnJvbUltZyhpbWcsIHRoaXMuaGVpZ2h0TWFwLnNtb290aEZhY3RvciwgdGhpcy5oZWlnaHRNYXAuc21vb3RoUmFkaXVzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IGNsZWFyIGhlaWdodG1hcFxyXG4gICAgICAgICAgICByZXNvdXJjZS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9yZW5kZXJQcmVwYXJlci5wYXRjaGVzU3RvcmUudXBkYXRlQWFiYigpO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlclByZXBhcmVyLnBhdGNoZXNTdG9yZS51cGRhdGVIZWlnaHRzKHtcclxuICAgICAgICAgICAgbWluWDogMCxcclxuICAgICAgICAgICAgbWluWjogMCxcclxuICAgICAgICAgICAgbWF4WDogdGhpcy53aWR0aCxcclxuICAgICAgICAgICAgbWF4WjogdGhpcy5kZXB0aFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NhdmVIZWlnaHRNYXBUb0ltZygpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBiYXNlNjQgPSB0aGlzLl90ZXJyYWluLmhlaWdodE1hcC50b0ltYWdlKCk7XHJcbiAgICAgICAgY29uc3QgaW1hZ2UgID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaW1hZ2Uuc3JjID0gYmFzZTY0O1xyXG5cclxuICAgICAgICBjb25zdCB3ID0gd2luZG93Lm9wZW4odW5kZWZpbmVkLCAnX2JsYW5rJykhO1xyXG4gICAgICAgIHcuZG9jdW1lbnQud3JpdGUoaW1hZ2Uub3V0ZXJIVE1MKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIF9zYXZlSGVpZ2h0TWFwVG9GaWxlKCkge1xyXG5cclxuICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgdGhpcy5fdGVycmFpbi5oZWlnaHRNYXAudG9GaWxlKCk7XHJcbiAgICAgICAgY29uc3QgYmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XHJcblxyXG4gICAgICAgIGEuaHJlZiAgICAgPSBibG9iVXJsO1xyXG4gICAgICAgIGEuZG93bmxvYWQgPSBgaG1fJHsrdGltZXN0YW1wfSR7aGVpZ2h0TWFwRXh0fWA7XHJcbiAgICAgICAgYS5jbGljaygpO1xyXG5cclxuICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVcmwpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcikge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY29sb3JQYWludGVyLnBhaW50aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbG9yUGFpbnRlci5zdG9wUGFpbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmF1dG9SZW5kZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFFbnRpdHkgJiZcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFFbnRpdHkuY2FtZXJhKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjYW1lcmEgPSB0aGlzLmNhbWVyYUVudGl0eS5jYW1lcmE7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdCAgICA9IHRoaXMuZW50aXR5LmdldFdvcmxkVHJhbnNmb3JtKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlICA9IG1hdC5nZXRTY2FsZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xhc3RNb3VzZU1vdmVFdmVudCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5zY3JlZW5Ub1dvcmxkKHRoaXMuX2xhc3RNb3VzZU1vdmVFdmVudC54LCB0aGlzLl9sYXN0TW91c2VNb3ZlRXZlbnQueSwgY2FtZXJhLm5lYXJDbGlwLCB0aGlzLl9yYXlTdGFydCk7XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuc2NyZWVuVG9Xb3JsZCh0aGlzLl9sYXN0TW91c2VNb3ZlRXZlbnQueCwgdGhpcy5fbGFzdE1vdXNlTW92ZUV2ZW50LnksIGNhbWVyYS5mYXJDbGlwLCB0aGlzLl9yYXlFbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3JheURpcmVjdGlvbi5zdWIyKHRoaXMuX3JheUVuZCwgdGhpcy5fcmF5U3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VSYXkgPSAhdGhpcy5fcmF5Lm9yaWdpbi5lcXVhbHModGhpcy5fcmF5U3RhcnQpIHx8ICF0aGlzLl9yYXkuZGlyZWN0aW9uLmVxdWFscyh0aGlzLl9yYXlEaXJlY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VSYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yYXkuc2V0KHRoaXMuX3JheVN0YXJ0LCB0aGlzLl9yYXlEaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JheWNhc3RSZXN1bHQuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnRlcnNlY3RzUmF5UmVzdWx0ID0gdGhpcy5faGVpZ2h0RmllbGRTaGFwZS5pbnRlcnNlY3RzUmF5KG1hdCwgdGhpcy5fcmF5LCB0aGlzLl9yYXljYXN0UmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faW50ZXJzZWN0c1JheVJlc3VsdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBicnVzaFNpemVYID0gdGhpcy5fYnJ1c2hTaXplIC8gc2NhbGUueCB8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnJ1c2hTaXplWiA9IHRoaXMuX2JydXNoU2l6ZSAvIHNjYWxlLnogfCAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZXJyYWluLnBhdGNoVmVydGljZXMuZ2V0UG9zaXRpb24odGhpcy5fcmF5Y2FzdFJlc3VsdC52ZXJ0ZXhJbmRleCwgdGVycmFpbkxvY2FsVmVydGV4UG9zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkPy53YXNQcmVzc2VkKHBjLktFWV9JKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9yYXljYXN0UmVzdWx0LCB0aGlzLl9sb2NhbENhbWVyYVBvc2l0aW9uLCB0ZXJyYWluTG9jYWxWZXJ0ZXhQb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZHJhd1BvaW50KHsgY2VudGVyOiB0aGlzLl9yYXljYXN0UmVzdWx0LnBvaW50LCByYWRpdXM6IHRoaXMuX2JydXNoU2l6ZSwgbnVtU2VnbWVudHM6IDEwLCBkZXB0aFRlc3Q6IHRydWUsIGNvbG9yOiBwYy5Db2xvci5HUkFZIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRyYXdEaXJlY3Rpb25WZWN0b3IodGhpcy5fcmF5Y2FzdFJlc3VsdC5wb2ludCwgdGhpcy5fcmF5Y2FzdFJlc3VsdC5ub3JtYWwsIHBjLkNvbG9yLk1BR0VOVEEpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9sb2NrIDwgMSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC5tb3VzZT8uaXNQcmVzc2VkKHBjLk1PVVNFQlVUVE9OX0xFRlQpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYWludGluZykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZHRoICAgPSB0aGlzLl90ZXJyYWluLndpZHRoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlcHRoICAgPSB0aGlzLl90ZXJyYWluLmRlcHRoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHggICAgICAgPSB0ZXJyYWluTG9jYWxWZXJ0ZXhQb3MueCAvIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeSAgICAgICA9IHRlcnJhaW5Mb2NhbFZlcnRleFBvcy56IC8gZGVwdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2FsZVcgID0gYnJ1c2hTaXplWCAvIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVIICA9IGJydXNoU2l6ZVogLyBkZXB0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xvclBhaW50ZXIuc3RhcnRQYWludChkdCwgeCwgeSwgc2NhbGVXLCBzY2FsZUgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF2ZXJhZ2UgPSAoYnJ1c2hTaXplWCArIGJydXNoU2l6ZVopIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbnRlclggPSB0ZXJyYWluTG9jYWxWZXJ0ZXhQb3MueCB8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXJaID0gdGVycmFpbkxvY2FsVmVydGV4UG9zLnogfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgem9uZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5YOiBjZW50ZXJYIC0gYnJ1c2hTaXplWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhYOiBjZW50ZXJYICsgYnJ1c2hTaXplWCArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWjogY2VudGVyWiAtIGJydXNoU2l6ZVosXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WjogY2VudGVyWiArIGJydXNoU2l6ZVogKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9BTFQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5zbW9vdGhIZWlnaHRzWm9uZSh6b25lLCBhdmVyYWdlICogdGhpcy5fYnJ1c2hPcGFjaXR5ICogZHQgLyAxMCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZWdhdGl2ZSA9ICEhdGhpcy5hcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfQ09OVFJPTCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXBwZW5kVmFsdWUgPSAobmVnYXRpdmUgPyAtYXZlcmFnZSA6IGF2ZXJhZ2UpICogdGhpcy5fYnJ1c2hPcGFjaXR5ICogZHQgLyAxMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZXJyYWluLmFwcGVuZEhlaWdodE1hcCh0aGlzLl9icnVzaEhlaWdodE1hcCwgYXBwZW5kVmFsdWUsIHpvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8ud2FzUHJlc3NlZChwYy5LRVlfSSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh6b25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZXJyYWluLnJlY2FsY3VsYXRlTWluTWF4KHpvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyUHJlcGFyZXIucGF0Y2hlc1N0b3JlLnVwZGF0ZUhlaWdodHMoem9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdG1wTWF0LmludmVydChtYXQpO1xyXG4gICAgICAgICAgICB0bXBNYXQudHJhbnNmb3JtUG9pbnQoY2FtZXJhLmVudGl0eS5nZXRQb3NpdGlvbigpLCB0aGlzLl9sb2NhbENhbWVyYVBvc2l0aW9uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuX2ZydXN0dW0uZnJ1c3R1bSAgID0gY2FtZXJhLmZydXN0dW07XHJcbiAgICAgICAgICAgIHRoaXMuX2ZydXN0dW0udHJhbnNmb3JtID0gbWF0O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fdGVycmFpbi51cGRhdGVMb2RzKHRoaXMuX2xvY2FsQ2FtZXJhUG9zaXRpb24sIHRoaXMubG9kQnlZUG9zLCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyUHJlcGFyZXIudXBkYXRlKHRoaXMuX2ZydXN0dW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkPy53YXNQcmVzc2VkKHBjLktFWV9MKSkge1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLnByaW50TG9kTWFwKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5hcHAua2V5Ym9hcmQ/Lndhc1ByZXNzZWQocGMuS0VZX1ApKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmVIZWlnaHRNYXBUb0ltZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkPy53YXNQcmVzc2VkKHBjLktFWV9PKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zYXZlSGVpZ2h0TWFwVG9GaWxlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEZWJ1Z1xyXG4gICAgICAgIC8vdGhpcy5hcHAuZHJhd1RleHR1cmUoIDAuNSwgLTAuNiwgMC41LCAwLjMsIHRoaXMucGFpbnRlclNldHRpbmdzLnNwbGF0TWFwLnJlc291cmNlLCB1bmRlZmluZWQgYXMgYW55KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGVycmFpbjtcclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5TY3JpcHROYW1lID0gXCJUZXJyYWluXCI7XHJcbmV4cG9ydCBjb25zdCBiaWdUZXJyYWluRWRpdG9yU2NyaXB0TmFtZSA9IFwiYmlnVGVycmFpbkVkaXRvclwiO1xyXG5cclxucGMucmVnaXN0ZXJTY3JpcHQoVGVycmFpbiwgdGVycmFpblNjcmlwdE5hbWUpO1xyXG5wYy5yZWdpc3RlclNjcmlwdChUZXJyYWluLCBiaWdUZXJyYWluRWRpdG9yU2NyaXB0TmFtZSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicmVuZGVyTW9kZVwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGVudW06IG1hcFRpdGxlRW51bShSZW5kZXJNb2RlKSwgZGVmYXVsdDogUmVuZGVyTW9kZS5TdGFuZGFyZCwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJjYXN0U2hhZG93XCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IHRydWUsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicmVjZWl2ZVNoYWRvd1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImxvZEJ5WVBvc1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcInpGYXJcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA1MDAwLCBtaW46IDEsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJ3aWR0aFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGVudW06IHRlcnJhaW5TaXplRW51bSwgZGVmYXVsdDogdGVycmFpblNpemVFbnVtRGVmYXVsdCwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJkZXB0aFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGVudW06IHRlcnJhaW5TaXplRW51bSwgZGVmYXVsdDogdGVycmFpblNpemVFbnVtRGVmYXVsdCwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJwYXRjaFNpemVcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBlbnVtOiB0ZXJyYWluUGF0Y2hTaXplRW51bSwgZGVmYXVsdDogdGVycmFpblBhdGNoU2l6ZUVudW1EZWZhdWx0LCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImhlaWdodFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDEwLCBtaW46IDEsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiY29tcHJlc3NBbGdvcml0bVwiLCB7IHR5cGU6IFwic3RyaW5nXCIsIGVudW06IHRlcnJhaW5IZWlnaHRzQ29tcHJlc3NBbGdvcml0bSwgZGVmYXVsdDogdGVycmFpbkhlaWdodHNDb21wcmVzc0FsZ29yaXRtRGVmYXVsdCwgfSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwibGF5ZXJcIiwgeyB0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiAnVGVycmFpbkVkaXRvcicsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiY2FtZXJhRW50aXR5XCIsIHsgdHlwZTogXCJlbnRpdHlcIiB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImF1dG9SZW5kZXJcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogdHJ1ZSwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJwYWludGluZ1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiBmYWxzZSwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJ3aXJlZnJhbWVcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogZmFsc2UsIH0pO1xyXG5cclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImhlaWdodE1hcFwiLCB7XHJcbiAgICB0eXBlOiAnanNvbicsXHJcbiAgICBzY2hlbWE6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdmaWxlJyxcclxuICAgICAgICAgICAgdHlwZTogJ2Fzc2V0JyxcclxuICAgICAgICAgICAgYXNzZXRUeXBlOiAnYmluYXJ5JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ3RleHR1cmUnLFxyXG4gICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgIGFzc2V0VHlwZTogJ3RleHR1cmUnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnc21vb3RoRmFjdG9yJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGBcclxuICAgICAgICAgICAgICAgIFRvIHdoYXQgZXh0ZW50IG5laWdoYm9ycyBpbmZsdWVuY2UgdGhlIG5ldyBoZWlnaHQ6XHJcbiAgICAgICAgICAgICAgICBWYWx1ZSBvZiAwIHdpbGwgaWdub3JlIG5laWdoYm9ycyAobm8gc21vb3RoaW5nKS5cclxuICAgICAgICAgICAgICAgIFZhbHVlIG9mIDEgd2lsbCBpZ25vcmUgdGhlIG5vZGUgb2xkIGhlaWdodC5cclxuICAgICAgICAgICAgYCxcclxuICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogMSxcclxuICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICBtYXg6IDEsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdzbW9vdGhSYWRpdXMnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRoZSByYWRpdXMgb2YgZmFjdG9yIHNtb290aC5gLFxyXG4gICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAxLFxyXG4gICAgICAgICAgICBzdGVwOiAxLFxyXG4gICAgICAgICAgICBtaW46IDEsXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59KTtcclxuXHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJicnVzaFwiLCB7XHJcbiAgICB0eXBlOiBcImpzb25cIixcclxuICAgIHNjaGVtYTogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJhY3RpdmVcIixcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGJydXNoIHRleHR1cmUgaW5kZXguXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDAsXHJcbiAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgc3RlcDogMSxcclxuICAgICAgICAgICAgcHJlY2lzaW9uOiAwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcInNpemVcIixcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGJydXNoIHNpemVcIixcclxuICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogMTAsXHJcbiAgICAgICAgICAgIG1pbjogYnJ1c2hNaW5TaXplLFxyXG4gICAgICAgICAgICBtYXg6IGJydXNoTWF4U2l6ZSxcclxuICAgICAgICAgICAgc3RlcDogMSxcclxuICAgICAgICAgICAgcHJlY2lzaW9uOiAwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcIm9wYWNpdHlcIixcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGJydXNoIG9wYWNpdHlcIixcclxuICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogMC41LFxyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIG1heDogMSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJ0ZXh0dXJlc1wiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgYnJ1c2ggdGV4dHVyZXNcIixcclxuICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxyXG4gICAgICAgICAgICBhc3NldFR5cGU6ICd0ZXh0dXJlJyxcclxuICAgICAgICAgICAgYXJyYXk6IHRydWUsXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59KTtcclxuXHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJhY3RpdmVMYXllclwiLCB7IHR5cGU6ICdudW1iZXInLCBkZWZhdWx0OiAwLCBtaW46IDAsIG1heDogMzIsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCwgfSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwibGF5ZXJzXCIsIHtcclxuICAgIHR5cGU6IFwianNvblwiLFxyXG4gICAgYXJyYXk6IHRydWUsXHJcbiAgICBzY2hlbWE6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwibmFtZVwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJOYW1lXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiZGlmZnVzZVwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJEaWZmdXNlXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcclxuICAgICAgICAgICAgYXNzZXRUeXBlOiBcInRleHR1cmVcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJub3JtYWxNYXBcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiTm9ybWFsIE1hcFwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgIGFzc2V0VHlwZTogXCJ0ZXh0dXJlXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwic2l6ZVwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJTaXplXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwidmVjMlwiLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiBbMSwgMV1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJvZmZzZXRcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiT2Zmc2V0XCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwidmVjMlwiLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiBbMCwgMF1cclxuICAgICAgICB9LFxyXG4gICAgXVxyXG59KTtcclxuXHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJwYWludGVyU2V0dGluZ3NcIiwge1xyXG4gICAgdHlwZTogXCJqc29uXCIsXHJcbiAgICBzY2hlbWE6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwic3BsYXRNYXBcIixcclxuICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxyXG4gICAgICAgICAgICBhc3NldFR5cGU6IFwidGV4dHVyZVwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJTcGxhdCBNYXBcIixcclxuICAgICAgICB9LFxyXG4gICAgXVxyXG59KTsiLCJpbXBvcnQgeyBHcmFzc0ZpZWxkVGV4dHVyZSB9IGZyb20gXCIuLi9HcmFzc0ZpZWxkSGVscGVycy9HcmFzc0ZpZWxkVGV4dHVyZS5tanNcIjtcclxuaW1wb3J0IHsgZHJhd1Bvc1BhcmFtTmFtZSwgZ2V0R3Jhc3NTaGFkZXJDaHVua3MsIGxvZDJPZmZzZXRYWlBhcmFtTmFtZSwgb2Zmc2V0QXR0ck5hbWUsIGxvZDFPZmZzZXRYWlBhcmFtTmFtZSwgc2hhcGVBdHRyTmFtZSwgdGltZVBhcmFtTmFtZSwgdmluZGV4QXR0ck5hbWUsIHdpbmRJbnRlbnNpdHlQYXJhbU5hbWUsIHRlcnJhaW5TY2FsZVBhcmFtTmFtZSB9IGZyb20gXCIuLi9HcmFzc0ZpZWxkSGVscGVycy9HcmFzc1NoYWRlckNodW5rLm1qc1wiO1xyXG5pbXBvcnQgeyBkcmF3Qm94IH0gZnJvbSBcIi4uL1NoYXJlZC9EZWJ1Zy5tanNcIjtcclxuaW1wb3J0IFJhbmRvbSBmcm9tIFwiLi4vU2hhcmVkL1JhbmRvbS5tanNcIjtcclxuaW1wb3J0IHsgZ2V0SGVpZ2h0TWFwRm9ybWF0IH0gZnJvbSBcIi4uL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5QYXRjaGVzLm1qc1wiO1xyXG5pbXBvcnQgeyB0ZXJyYWluSGVpZ2h0TWFwUGFyYW1OYW1lLCB0ZXJyYWluTWF4SGVpZ2h0UGFyYW1OYW1lIH0gZnJvbSBcIi4uL1RlcnJhaW5IZWxwZXJzL1RlcnJhaW5QYXRjaGVzU2hhZGVyQ2h1bmtzLm1qc1wiO1xyXG5pbXBvcnQgVGVycmFpbiBmcm9tIFwiLi9UZXJyYWluLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQnVmZmVyU3RvcmUge1xyXG5cclxuICAgIC8vIEluZGljZXMgZm9yIGEgYmxhZGVcclxuICAgIGluZGV4OiBVaW50MTZBcnJheSxcclxuXHJcbiAgICAvLyBUZWxscyB0aGUgc2hhZGVyIHdoaWNoIHZlcnRleCBvZiB0aGUgYmxhZGUgaXRzIHdvcmtpbmcgb24uXHJcbiAgICAvLyBSYXRoZXIgdGhhbiBzdXBwbHlpbmcgcG9zaXRpb25zLCB0aGV5IGFyZSBjb21wdXRlZCBmcm9tIHRoaXMgdmluZGV4LlxyXG4gICAgaW5kZXhWZXJ0czogRmxvYXQzMkFycmF5LFxyXG5cclxuICAgIC8vIFNoYXBlIHByb3BlcnRpZXMgb2YgYWxsIGJsYWRlc1xyXG4gICAgLy8gUG9zaXRvbiAmIHJvdGF0aW9uIG9mIGFsbCBibGFkZXNcclxuICAgIG9mZnNldEFuZFNoYXBlOiBGbG9hdDMyQXJyYXkgfCBVaW50MTZBcnJheSwgLy8gd2ViZ3B1IG5vdCBzdXBwb3J0IGZsb2F0MTYgKFVpbnQxNkFycmF5ID0gRmxvYXQxNkFycmF5KVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcXVhZDFNYXRyaXggPSBbXHJcbiAgICAyLCAyLCAgMSwgMiwgIDAsIDIsXHJcbiAgICAwLCAxLCAgMCwgMCwgIDEsIDAsXHJcbiAgICAyLCAwLCAgMiwgMSwgIDEsIDFcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBxdWFkMk1hdHJpeCA9IFtcclxuICAgIDQsIDQsICAzLCA0LCAgMiwgNCwgIDEsIDQsXHJcbiAgICAwLCA0LCAgMCwgMywgIDAsIDIsICAwLCAxLFxyXG4gICAgMCwgMCwgIDEsIDAsICAyLCAwLCAgMywgMCxcclxuICAgIDQsIDAsICA0LCAxLCAgNCwgMiwgIDQsIDNcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBxdWFkTWF0cml4SW5kZXhlcyA9IFtcclxuICAgIFs0LCAzLCAyXSwgLy8gMFxyXG4gICAgWzUsIDgsIDFdLCAvLyAxXHJcbiAgICBbNiwgNywgMF0sIC8vIDJcclxuXTtcclxuXHJcbmNvbnN0IGxvZDFRdWFkQ291bnQgPSA4O1xyXG5jb25zdCBsb2QyUXVhZENvdW50ID0gMTY7XHJcbmNvbnN0IHRtcE1hdCA9IG5ldyBwYy5NYXQ0KCk7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHcmFzc1RleHR1cmVBdHRyaWJ1dGUge1xyXG4gICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nLFxyXG4gICAgcmVhZG9ubHkgZGlmZnVzZTogcGN4LkFzc2V0O1xyXG4gICAgcmVhZG9ubHkgY29sb3I6IHBjeC5Db2xvcjtcclxuICAgIHJlYWRvbmx5IGNvbG9yUmFuZG9tOiBwY3guVmVjMztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdyYXNzRmllbGQgZXh0ZW5kcyBwYy5TY3JpcHRUeXBlIHtcclxuXHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBncmlkRW50aXR5OiBwY3guRW50aXR5O1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgZnJlZXplRHJhd1BvczogYm9vbGVhbjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGF1dG9SZW5kZXI6IGJvb2xlYW47XHJcblxyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgcGFpbnRpbmc6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSB3aXJlZnJhbWU6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBjYXN0U2hhZG93OiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgcmVjZWl2ZVNoYWRvdzogYm9vbGVhbjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHNlZWQ6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHdpbmRJbnRlbnNpdHk6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IG51bUJsYWRlczogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgcmFkaXVzOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBsb2QwQmxhZGVTZWdzOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBsb2QxQmxhZGVTZWdzOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBsb2QyQmxhZGVTZWdzOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBibGFkZVdpZHRoOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBibGFkZU1pbkhlaWdodDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgYmxhZGVNYXhIZWlnaHQ6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHRleHR1cmVzOiBJR3Jhc3NUZXh0dXJlQXR0cmlidXRlW107XHJcblxyXG4gICAgcHVibGljIHRyYW5zaXRpb25Mb3cgPSAwLjMxO1xyXG4gICAgcHVibGljIHRyYW5zaXRpb25IaWdoID0gMC4zNjtcclxuXHJcbiAgICBwcml2YXRlIF9zaGFyZWRJbmRleEJ1ZmZlcjogcGN4LkluZGV4QnVmZmVyO1xyXG4gICAgcHJpdmF0ZSBfc2hhcmVkVmVydGV4QnVmZmVyOiBwY3guVmVydGV4QnVmZmVyO1xyXG5cclxuICAgIHByaXZhdGUgX2J1ZmZlclN0b3JlOiBJQnVmZmVyU3RvcmUgPSB7fSBhcyBhbnk7XHJcbiAgICBwcml2YXRlIF9zaGFyZWRJbnN0YW5jaW5nQnVmZmVyOiBwY3guVmVydGV4QnVmZmVyO1xyXG4gICAgcHJpdmF0ZSBfbWVzaEluc3Q6IHBjeC5NZXNoSW5zdGFuY2U7XHJcbiAgICBwcml2YXRlIF9tYXRlcmlhbDogcGN4LlN0YW5kYXJkTWF0ZXJpYWw7XHJcblxyXG4gICAgcHJpdmF0ZSBfZGF0YVRleHR1cmU6IEdyYXNzRmllbGRUZXh0dXJlO1xyXG4gICAgcHJpdmF0ZSBfY2FtZXJhRW50aXR5OiBwY3guRW50aXR5O1xyXG4gICAgcHJpdmF0ZSBfdGVycmFpbjogVGVycmFpbjtcclxuICAgIHByaXZhdGUgX3RpbWU6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIF9sYXN0RHJhd1BvczogcGN4LlZlYzMgPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgcHJpdmF0ZSBfbG9kMU1pbk1heFN0b3JlOiBBcnJheTxbcGN4LlZlYzMsIHBjeC5WZWMzLCBib29sZWFuXT4gPSBbXTtcclxuICAgIHByaXZhdGUgX2xvZDJNaW5NYXhTdG9yZTogQXJyYXk8W3BjeC5WZWMzLCBwY3guVmVjMywgYm9vbGVhbl0+ID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBfYWFiYjogcGN4LkJvdW5kaW5nQm94O1xyXG5cclxuICAgIHByaXZhdGUgX29mZnNldExvZDFBcnI6IG51bWJlcltdID0gW1xyXG4gICAgICAgIDAsIDAsICAwLCAwLFxyXG4gICAgICAgIDAsIDAsICAwLCAwLFxyXG4gICAgICAgIDAsIDAsICAwLCAwLFxyXG4gICAgICAgIDAsIDAsICAwLCAwLFxyXG4gICAgXTtcclxuXHJcbiAgICBwcml2YXRlIF9vZmZzZXRMb2QyQXJyOiBudW1iZXJbXSA9IFtcclxuICAgICAgICAwLCAwLCAgMCwgMCwgIDAsIDAsICAwLCAwLFxyXG4gICAgICAgIDAsIDAsICAwLCAwLCAgMCwgMCwgIDAsIDAsXHJcbiAgICAgICAgMCwgMCwgIDAsIDAsICAwLCAwLCAgMCwgMCxcclxuICAgICAgICAwLCAwLCAgMCwgMCwgIDAsIDAsICAwLCAwLFxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGNoZWNrUmFkaXVzKCkgeyByZXR1cm4gdGhpcy5yYWRpdXMgLyAyOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoUmFkaXVzKCkgeyByZXR1cm4gdGhpcy5yYWRpdXMgLyAyOyB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoYXJlZEluZGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5zdGFuY2luZ0J1ZmZlcj8uZGVzdHJveSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWVzaEluc3QpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0Lmluc3RhbmNpbmdEYXRhPy52ZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEluc3QuZGVzdHJveSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX21lc2hJbnN0Lm1lc2gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0Lm1lc2guZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZW50aXR5LnJlbmRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eS5yZW5kZXIubWVzaEluc3RhbmNlcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0QmxhZGVzQW5kRWRpdE1vZGUoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUdyYXNzTWVzaCh0aGlzLmFwcC5ncmFwaGljc0RldmljZSwgdGhpcy5wYXRjaFJhZGl1cyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBhaW50aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RlcnJhaW4uYWRkTG9jaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcG9zdEluaXRpYWxpemUoKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlcnJhaW5FbnRpdHkgPSB0aGlzLmVudGl0eS5yb290LmZpbmRCeU5hbWUoJ1RlcnJhaW4nKSBhcyBwY3guRW50aXR5O1xyXG4gICAgICAgIGNvbnN0IHRlcnJhaW5TY3JpcHQgPSB0ZXJyYWluRW50aXR5LnNjcmlwdD8uZ2V0KFRlcnJhaW4pIGFzIFRlcnJhaW47XHJcblxyXG4gICAgICAgIHRoaXMuX3RlcnJhaW4gICAgICA9IHRlcnJhaW5TY3JpcHQ7XHJcbiAgICAgICAgdGhpcy5fY2FtZXJhRW50aXR5ID0gdGVycmFpblNjcmlwdC5jYW1lcmFFbnRpdHkhO1xyXG4gICAgICAgIHRoaXMuX2RhdGFUZXh0dXJlICA9IG5ldyBHcmFzc0ZpZWxkVGV4dHVyZSh0aGlzLmFwcC5ncmFwaGljc0RldmljZSwgdGhpcy5fdGVycmFpbi53aWR0aCwgdGhpcy5fdGVycmFpbi5kZXB0aCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXRCbGFkZXNBbmRFZGl0TW9kZSgpO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdlbmFibGUnLCAoKSA9PiB0aGlzLl9pbml0QmxhZGVzQW5kRWRpdE1vZGUoKSk7XHJcbiAgICAgICAgdGhpcy5vbignZGlzYWJsZScsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RlcnJhaW4uZnJlZUxvY2soKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpwYWludGluZycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFpbnRpbmcpIHsgdGhpcy5fdGVycmFpbi5hZGRMb2NrKCk7IH1cclxuICAgICAgICAgICAgZWxzZSAgICAgICAgICAgICAgIHsgdGhpcy5fdGVycmFpbi5mcmVlTG9jaygpOyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjp3aXJlZnJhbWUnLCAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcmltaXRpdmUgPSB0aGlzLl9tZXNoSW5zdD8ubWVzaD8ucHJpbWl0aXZlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByaW1pdGl2ZSAmJiBwcmltaXRpdmVbMF0pIHtcclxuICAgICAgICAgICAgICAgIHByaW1pdGl2ZVswXS50eXBlID0gdGhpcy53aXJlZnJhbWUgPyBwYy5QUklNSVRJVkVfTElORVMgOiBwYy5QUklNSVRJVkVfVFJJQU5HTEVTO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6Y2FzdFNoYWRvdycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEluc3QuY2FzdFNoYWRvdyA9IHRoaXMuY2FzdFNoYWRvdztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpyZWNlaXZlU2hhZG93JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9tZXNoSW5zdC5yZWNlaXZlU2hhZG93ID0gdGhpcy5yZWNlaXZlU2hhZG93O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOnNlZWQnLCAgICAgICAgICAgKCkgPT4gdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNpbmcodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucGF0Y2hSYWRpdXMpKTtcclxuICAgICAgICB0aGlzLm9uKCdhdHRyOm51bUJsYWRlcycsICAgICAgKCkgPT4gdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNpbmcodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucGF0Y2hSYWRpdXMpKTtcclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmJsYWRlV2lkdGgnLCAgICAgKCkgPT4gdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNpbmcodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucGF0Y2hSYWRpdXMpKTtcclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmJsYWRlTWluSGVpZ2h0JywgKCkgPT4gdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNpbmcodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucGF0Y2hSYWRpdXMpKTtcclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmJsYWRlTWF4SGVpZ2h0JywgKCkgPT4gdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNpbmcodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucGF0Y2hSYWRpdXMpKTtcclxuICAgICAgICB0aGlzLm9uKCdhdHRyOnJhZGl1cycsICAgICAgICAgKCkgPT4gdGhpcy5fdXBkYXRlR3Jhc3NNZXNoKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpsb2QwQmxhZGVTZWdzJywgICgpID0+IHRoaXMuX3VwZGF0ZUdyYXNzTWVzaCh0aGlzLmFwcC5ncmFwaGljc0RldmljZSwgdGhpcy5wYXRjaFJhZGl1cykpO1xyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6bG9kMUJsYWRlU2VncycsICAoKSA9PiB0aGlzLl91cGRhdGVHcmFzc01lc2godGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucGF0Y2hSYWRpdXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY29uc3QgY2FtZXJhUG9zID0gdGhpcy5fY2FtZXJhRW50aXR5LmdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RzVGV4cyA9ICEhdGhpcy50ZXh0dXJlcyAmJiB0aGlzLnRleHR1cmVzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgY29uc3QgY29sb3IgPSBleGlzdHNUZXhzID8gdGhpcy50ZXh0dXJlc1swXS5jb2xvciA6IHBjLkNvbG9yLldISVRFO1xyXG4gICAgICAgIGNvbnN0IHJhbmQgID0gZXhpc3RzVGV4cyA/IHRoaXMudGV4dHVyZXNbMF0uY29sb3JSYW5kb20gOiBwYy5WZWMzLlpFUk87XHJcbiAgICAgICAgY29uc3QgdGV4ICAgPSBleGlzdHNUZXhzID8gdGhpcy50ZXh0dXJlc1swXS5kaWZmdXNlLnJlc291cmNlIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmZyZWV6ZURyYXdQb3MpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1hdCA9IHRoaXMuZW50aXR5LmdldFdvcmxkVHJhbnNmb3JtKCk7XHJcblxyXG4gICAgICAgICAgICB0bXBNYXQuaW52ZXJ0KG1hdCk7XHJcbiAgICAgICAgICAgIHRtcE1hdC50cmFuc2Zvcm1Qb2ludChjYW1lcmFQb3MsIHRoaXMuX2xhc3REcmF3UG9zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3RpbWUgKz0gZHQ7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHRpbWVQYXJhbU5hbWUsIHRoaXMuX3RpbWUpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih3aW5kSW50ZW5zaXR5UGFyYW1OYW1lLCB0aGlzLndpbmRJbnRlbnNpdHkpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihkcmF3UG9zUGFyYW1OYW1lLCBbdGhpcy5fbGFzdERyYXdQb3MueCwgdGhpcy5fbGFzdERyYXdQb3MueSwgdGhpcy5fbGFzdERyYXdQb3Muel0pO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcigndURpZmZ1c2VDb2xvcicsIFtjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iXSk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1RGlmZnVzZUNvbG9yUmFuZG9tJywgW3JhbmQueCwgcmFuZC55LCByYW5kLnpdKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VEaWZmdXNlVGV4JywgdGV4IGFzIGFueSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2ZydXN0dW0oY2FtZXJhUG9zLCB0aGlzLl9jYW1lcmFFbnRpdHkhLmNhbWVyYSEuY2FtZXJhLCB0aGlzLmZyZWV6ZURyYXdQb3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVBYWJiKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHBhdGNoZXNBYWJiID0gdGhpcy5fdGVycmFpbi5yZW5kZXJQcmVwYXJlci5wYXRjaGVzU3RvcmUuYWFiYjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX21lc2hJbnN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0Lm1lc2guYWFiYiA9IHBhdGNoZXNBYWJiO1xyXG4gICAgICAgICAgICB0aGlzLl9tZXNoSW5zdC5hYWJiID0gcGF0Y2hlc0FhYmI7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0LnNldEN1c3RvbUFhYmIocGF0Y2hlc0FhYmIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9mcnVzdHVtSGVscGVyKFxyXG4gICAgICAgIGNvdW50OiBudW1iZXIsXHJcbiAgICAgICAgcXVhZE1hdHJpeDogbnVtYmVyW10sXHJcbiAgICAgICAgcXVhZE9mZnNldDogbnVtYmVyLFxyXG4gICAgICAgIG1pbk1heFN0b3JlOiBBcnJheTxbcGN4LlZlYzMsIHBjeC5WZWMzLCBib29sZWFuXT4sXHJcbiAgICAgICAgb2Zmc2V0QXJyOiBudW1iZXJbXSxcclxuICAgICAgICBpbnZlcnNlOiBib29sZWFuLFxyXG4gICAgICAgIGNhbWVyYVBvczogcGN4LlZlYzMsXHJcbiAgICAgICAgY2FtZXJhOiBwY3guQ2FtZXJhLFxyXG4gICAgICAgIGZyZWV6ZTogYm9vbGVhbixcclxuICAgICkge1xyXG4gICAgICAgIGNvbnN0IHNjYWxlICAgICAgICA9IHRoaXMuZW50aXR5LmdldFNjYWxlKCk7XHJcbiAgICAgICAgY29uc3QgdGVycmFpblNjYWxlID0gdGhpcy5fdGVycmFpbi5lbnRpdHkuZ2V0U2NhbGUoKTtcclxuICAgICAgICBjb25zdCBjaGVja1JhZGl1cyAgPSB0aGlzLmNoZWNrUmFkaXVzICogTWF0aC5tYXgoc2NhbGUueCwgc2NhbGUueik7XHJcbiAgICAgICAgY29uc3QgbWF4SGVpZ2h0ICAgID0gdGhpcy5fdGVycmFpbi5vYmplY3QubWF4SGVpZ2h0ICogdGVycmFpblNjYWxlLnk7XHJcbiAgICAgICAgY29uc3QgZnJ1c3R1bVBsYW5lcyA9IGNhbWVyYS5mcnVzdHVtLnBsYW5lcztcclxuICAgICAgICBjb25zdCBjaGVja0lzVmlzaWJsZSA9IChtaW46IHBjeC5WZWMzLCBtYXg6IHBjeC5WZWMzKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IDY7IHArKykge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcnVzdHVtUGxhbmUgPSBmcnVzdHVtUGxhbmVzW3BdIGFzIHVua25vd24gYXMgYW55W107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkID0gTWF0aC5tYXgobWluLnggKiBmcnVzdHVtUGxhbmVbMF0sIG1heC54ICogZnJ1c3R1bVBsYW5lWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICArIE1hdGgubWF4KG1pbi55ICogZnJ1c3R1bVBsYW5lWzFdLCBtYXgueSAqIGZydXN0dW1QbGFuZVsxXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyBNYXRoLm1heChtaW4ueiAqIGZydXN0dW1QbGFuZVsyXSwgbWF4LnogKiBmcnVzdHVtUGxhbmVbMl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgZnJ1c3R1bVBsYW5lWzNdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHZpc2libGVDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFtaW5NYXhTdG9yZVtpXSkgbWluTWF4U3RvcmVbaV0gPSBbbmV3IHBjLlZlYzMoKSwgbmV3IHBjLlZlYzMoKSwgZmFsc2VdO1xyXG4gICAgICAgICAgICBpZiAoIWZyZWV6ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1YWRNYXRyaXhYICA9IHF1YWRNYXRyaXhbaSAqIDIgKyAwXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1YWRNYXRyaXhaICA9IHF1YWRNYXRyaXhbaSAqIDIgKyAxXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsQ2VudGVyWCA9IHRoaXMucmFkaXVzICogKHF1YWRNYXRyaXhYIC0gcXVhZE9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbENlbnRlclogPSB0aGlzLnJhZGl1cyAqIChxdWFkTWF0cml4WiAtIHF1YWRPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ybGRDZW50ZXJYID0gY2FtZXJhUG9zLnggKyBsb2NhbENlbnRlclggKiBzY2FsZS54O1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ybGRDZW50ZXJaID0gY2FtZXJhUG9zLnogKyBsb2NhbENlbnRlclogKiBzY2FsZS56O1xyXG5cclxuICAgICAgICAgICAgICAgIG1pbk1heFN0b3JlW2ldWzBdLnNldChcclxuICAgICAgICAgICAgICAgICAgICB3b3JsZENlbnRlclggLSBjaGVja1JhZGl1cyxcclxuICAgICAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmxkQ2VudGVyWiAtIGNoZWNrUmFkaXVzXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIG1pbk1heFN0b3JlW2ldWzFdLnNldChcclxuICAgICAgICAgICAgICAgICAgICB3b3JsZENlbnRlclggKyBjaGVja1JhZGl1cyxcclxuICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ybGRDZW50ZXJaICsgY2hlY2tSYWRpdXNcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlzaWJsZSA9IGNoZWNrSXNWaXNpYmxlKG1pbk1heFN0b3JlW2ldWzBdLCBtaW5NYXhTdG9yZVtpXVsxXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRBcnJbdmlzaWJsZUNvdW50ICogMiArIDBdID0gbG9jYWxDZW50ZXJYO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldEFyclt2aXNpYmxlQ291bnQgKiAyICsgMV0gPSBsb2NhbENlbnRlclo7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbWluTWF4U3RvcmVbaV1bMl0gPSB2aXNpYmxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtaW4gPSBtaW5NYXhTdG9yZVtpXVswXTtcclxuICAgICAgICAgICAgY29uc3QgbWF4ID0gbWluTWF4U3RvcmVbaV1bMV07XHJcbiAgICAgICAgICAgIGNvbnN0IHZpcyA9IG1pbk1heFN0b3JlW2ldWzJdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZyZWV6ZSkge1xyXG4gICAgICAgICAgICAgICAgZHJhd0JveCh7IG1pbiwgbWF4LCBjb2xvcjogdmlzID8gcGMuQ29sb3IuR1JFRU4gOiBwYy5Db2xvci5SRUQgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZpc2libGVDb3VudCArPSBOdW1iZXIodmlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZnJlZXplICYmIGludmVyc2UgJiYgdmlzaWJsZUNvdW50ID4gMCkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaGlkZGVuQ291bnQgPSBjb3VudCAtIHZpc2libGVDb3VudDtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB2aXNpYmxlQ291bnQ7IGkgPiAtMTsgaS0tKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXhJbiA9IChoaWRkZW5Db3VudCArIGkpICogMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4T3IgPSBpICogMjtcclxuXHJcbiAgICAgICAgICAgICAgICBvZmZzZXRBcnJbaW5kZXhJbiArIDBdID0gb2Zmc2V0QXJyW2luZGV4T3IgKyAwXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldEFycltpbmRleEluICsgMV0gPSBvZmZzZXRBcnJbaW5kZXhPciArIDFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmlzaWJsZUNvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2ZydXN0dW0oY2FtZXJhUG9zOiBwY3guVmVjMywgY2FtZXJhOiBwY3guQ2FtZXJhLCBmcmVlemU6IGJvb2xlYW4pIHtcclxuXHJcbiAgICAgICAgY29uc3QgdmlzaWJsZUxvZDFDb3VudCA9IHRoaXMuX2ZydXN0dW1IZWxwZXIobG9kMVF1YWRDb3VudCwgcXVhZDFNYXRyaXgsIDEsIHRoaXMuX2xvZDFNaW5NYXhTdG9yZSwgdGhpcy5fb2Zmc2V0TG9kMUFyciwgZmFsc2UsIGNhbWVyYVBvcywgY2FtZXJhLCBmcmVlemUpO1xyXG4gICAgICAgIGNvbnN0IHZpc2libGVMb2QyQ291bnQgPSB0aGlzLl9mcnVzdHVtSGVscGVyKGxvZDJRdWFkQ291bnQsIHF1YWQyTWF0cml4LCAyLCB0aGlzLl9sb2QyTWluTWF4U3RvcmUsIHRoaXMuX29mZnNldExvZDJBcnIsIHRydWUsIGNhbWVyYVBvcywgY2FtZXJhLCBmcmVlemUpO1xyXG5cclxuICAgICAgICBjb25zdCBtZXNoSW5zdCAgPSB0aGlzLl9tZXNoSW5zdDtcclxuICAgICAgICBjb25zdCBtZXNoICAgICAgPSBtZXNoSW5zdC5tZXNoO1xyXG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IG1lc2gucHJpbWl0aXZlWzBdO1xyXG4gICAgICAgIGNvbnN0IGJhc2UgICAgICA9IHRoaXMubG9kMkJsYWRlU2VncyAqIDEyICogKGxvZDJRdWFkQ291bnQgLSB2aXNpYmxlTG9kMkNvdW50KTtcclxuICAgICAgICBjb25zdCBjb3VudCAgICAgPSB0aGlzLmxvZDBCbGFkZVNlZ3MgKiAxMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICArIHRoaXMubG9kMUJsYWRlU2VncyAqIDEyICogdmlzaWJsZUxvZDFDb3VudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICArIHRoaXMubG9kMkJsYWRlU2VncyAqIDEyICogdmlzaWJsZUxvZDJDb3VudDtcclxuICAgICAgICBcclxuICAgICAgICBtZXNoSW5zdC5zZXRQYXJhbWV0ZXIoYCR7bG9kMU9mZnNldFhaUGFyYW1OYW1lfVswXWAsIHRoaXMuX29mZnNldExvZDFBcnIpO1xyXG4gICAgICAgIG1lc2hJbnN0LnNldFBhcmFtZXRlcihgJHtsb2QyT2Zmc2V0WFpQYXJhbU5hbWV9WzBdYCwgdGhpcy5fb2Zmc2V0TG9kMkFycik7XHJcblxyXG4gICAgICAgIC8vIGFsd2F5cyB0cnVlIGZvciBsb2QgMFxyXG4gICAgICAgIG1lc2hJbnN0LnZpc2libGUgPSB0aGlzLmF1dG9SZW5kZXIgfHwgZnJlZXplO1xyXG4gICAgICAgIG1lc2hJbnN0LnZpc2libGVUaGlzRnJhbWUgPSB0aGlzLmF1dG9SZW5kZXIgfHwgZnJlZXplO1xyXG5cclxuICAgICAgICBwcmltaXRpdmUuYmFzZSAgPSBiYXNlO1xyXG4gICAgICAgIHByaW1pdGl2ZS5jb3VudCA9IGNvdW50O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5hcHAua2V5Ym9hcmQ/Lndhc1JlbGVhc2VkKHBjLktFWV9WKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2aXNpYmxlTG9kMUNvdW50KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codmlzaWJsZUxvZDJDb3VudCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX29mZnNldExvZDFBcnIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9vZmZzZXRMb2QyQXJyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgX3VwZGF0ZUdyYXNzTWVzaChncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlLCByYWRpdXM6IG51bWJlcikge1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoQnVmZmVycyhncmFwaGljc0RldmljZSk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaE1hdGVyaWFsKGdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoSW5zdGFuY2UoZ3JhcGhpY3NEZXZpY2UpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKGdyYXBoaWNzRGV2aWNlLCByYWRpdXMpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQWFiYigpO1xyXG5cclxuICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2VzID0gW3RoaXMuX21lc2hJbnN0XTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZW50aXR5LnJlbmRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eS5yZW5kZXIubWVzaEluc3RhbmNlcyA9IG1lc2hJbnN0YW5jZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eS5hZGRDb21wb25lbnQoJ3JlbmRlcicsIHtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZXM6IG1lc2hJbnN0YW5jZXMsXHJcbiAgICAgICAgICAgICAgICBjYXN0U2hhZG93czogdGhpcy5jYXN0U2hhZG93LFxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZVNoYWRvd3M6IHRoaXMucmVjZWl2ZVNoYWRvdyxcclxuICAgICAgICAgICAgICAgIGN1bGw6IGZhbHNlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0LmNhc3RTaGFkb3cgPSB0aGlzLmNhc3RTaGFkb3c7XHJcbiAgICAgICAgdGhpcy5fbWVzaEluc3QucmVjZWl2ZVNoYWRvdyA9IHRoaXMucmVjZWl2ZVNoYWRvdztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVNZXNoSW5zdGFuY2luZyhncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlLCByYWRpdXM6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9tZXNoSW5zdCkge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVJbnN0YW5jaW5nQnVmZmVyKGdyYXBoaWNzRGV2aWNlLCByYWRpdXMpO1xyXG4gICAgICAgICAgICB0aGlzLl9tZXNoSW5zdD8uaW5zdGFuY2luZ0RhdGE/LnZlcnRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9tZXNoSW5zdC5zZXRJbnN0YW5jaW5nKHRoaXMuX3NoYXJlZEluc3RhbmNpbmdCdWZmZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVNZXNoSW5zdGFuY2UoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkge1xyXG5cclxuICAgICAgICB0aGlzLl9tZXNoSW5zdD8uaW5zdGFuY2luZ0RhdGE/LnZlcnRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0Py5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgcGMuTWVzaChncmFwaGljc0RldmljZSk7XHJcbiAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gbWVzaC5wcmltaXRpdmVbMF07XHJcblxyXG4gICAgICAgIG1lc2guaW5kZXhCdWZmZXJbMF0gPSB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcjtcclxuICAgICAgICBtZXNoLnZlcnRleEJ1ZmZlciAgID0gdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyO1xyXG5cclxuICAgICAgICBwcmltaXRpdmUudHlwZSAgICA9IHRoaXMud2lyZWZyYW1lID8gcGMuUFJJTUlUSVZFX0xJTkVTIDogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICBwcmltaXRpdmUuYmFzZSAgICA9IDA7XHJcbiAgICAgICAgcHJpbWl0aXZlLmNvdW50ICAgPSB0aGlzLl9idWZmZXJTdG9yZS5pbmRleC5sZW5ndGg7XHJcbiAgICAgICAgcHJpbWl0aXZlLmluZGV4ZWQgPSB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0ID0gbmV3IHBjLk1lc2hJbnN0YW5jZShtZXNoLCB0aGlzLl9tYXRlcmlhbCwgdGhpcy5lbnRpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBTZXRzIHVwIGluZGljZXMgZm9yIHNpbmdsZSBibGFkZSBtZXNoLlxyXG4gICAgKiBAcGFyYW0gaWQgYXJyYXkgb2YgaW5kaWNlc1xyXG4gICAgKiBAcGFyYW0gdmMxIHZlcnRleCBzdGFydCBvZmZzZXQgZm9yIGZyb250IHNpZGUgb2YgYmxhZGVcclxuICAgICogQHBhcmFtIHZjMiB2ZXJ0ZXggc3RhcnQgb2Zmc2V0IGZvciBiYWNrIHNpZGUgb2YgYmxhZGVcclxuICAgICogQHBhcmFtIGkgaW5kZXggb2Zmc2V0XHJcbiAgICAqL1xyXG4gICAgcHJpdmF0ZSBfaW5pdEJsYWRlSW5kaWNlcyhpZDogVWludDhBcnJheSB8IFVpbnQxNkFycmF5LCB2YzE6IG51bWJlciwgdmMyOiBudW1iZXIsIGk6IG51bWJlciwgYmxhZGVTZWdzOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgbGV0IHNlZzogbnVtYmVyO1xyXG5cclxuICAgICAgICAvLyBibGFkZSBmcm9udCBzaWRlXHJcbiAgICAgICAgZm9yIChzZWcgPSAwOyBzZWcgPCBibGFkZVNlZ3M7ICsrc2VnKSB7XHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMSArIDA7IC8vIHRyaSAxXHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMSArIDE7XHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMSArIDI7XHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMSArIDI7IC8vIHRyaSAyXHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMSArIDE7XHJcbiAgICAgICAgICAgaWRbaSsrXSA9IHZjMSArIDM7XHJcbiAgICAgICAgICAgdmMxICs9IDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBibGFkZSBiYWNrIHNpZGVcclxuICAgICAgICBmb3IgKHNlZyA9IDA7IHNlZyA8IGJsYWRlU2VnczsgKytzZWcpIHtcclxuICAgICAgICAgICBpZFtpKytdID0gdmMyICsgMjsgLy8gdHJpIDFcclxuICAgICAgICAgICBpZFtpKytdID0gdmMyICsgMTtcclxuICAgICAgICAgICBpZFtpKytdID0gdmMyICsgMDtcclxuICAgICAgICAgICBpZFtpKytdID0gdmMyICsgMzsgLy8gdHJpIDJcclxuICAgICAgICAgICBpZFtpKytdID0gdmMyICsgMTtcclxuICAgICAgICAgICBpZFtpKytdID0gdmMyICsgMjtcclxuICAgICAgICAgICB2YzIgKz0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFNldCB1cCBpbmRpY2VzIGZvciAxIGJsYWRlICovXHJcbiAgICBwcml2YXRlIF9pbml0QmxhZGVJbmRleFZlcnRzKHZpbmRleDogRmxvYXQzMkFycmF5KSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aW5kZXgubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmluZGV4W2ldID0gaTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEJsYWRlT2Zmc2V0U2hhcGVWZXJ0cyhvZmZzZXRTaGFwZTogVWludDE2QXJyYXkgfCBGbG9hdDMyQXJyYXksIHJhZGl1czogbnVtYmVyLCBudW1CbGFkZXM6IG51bWJlcikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZVZhbHVlID0gb2Zmc2V0U2hhcGUgaW5zdGFuY2VvZiBVaW50MTZBcnJheSA/IHBjLkZsb2F0UGFja2luZy5mbG9hdDJIYWxmIDogKHg6IG51bWJlcikgPT4geDtcclxuICAgICAgICBjb25zdCByYW5kb20gPSBuZXcgUmFuZG9tKHRoaXMuc2VlZCk7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0RmFjdG9yID0gdGhpcy5ibGFkZU1heEhlaWdodCAtIHRoaXMuYmxhZGVNaW5IZWlnaHQ7XHJcblxyXG4gICAgICAgIC8vbGV0IG5vaXNlID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUJsYWRlczsgKytpKSB7XHJcblxyXG4gICAgICAgICAgICAvL25vaXNlID0gTWF0aC5hYnMoc2ltcGxleChvZmZzZXRTaGFwZVtpICogOCArIDBdICogMC4wMywgb2Zmc2V0U2hhcGVbaSAqIDggKyAyXSAqIDAuMDMpKTtcclxuICAgICAgICAgICAgLy9ub2lzZSA9IG5vaXNlICogbm9pc2UgKiBub2lzZTtcclxuICAgICAgICAgICAgLy9ub2lzZSAqPSA1LjA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB4ID0gcmFuZG9tLm5yYW5kKCkgKiByYWRpdXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHkgPSByYW5kb20ubnJhbmQoKSAqIHJhZGl1cztcclxuICAgICAgICAgICAgY29uc3QgeiA9IDA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByb3RhdGlvbiA9IE1hdGguUEkgKiAyLjAgKiByYW5kb20ucmFuZG9tKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoICAgID0gdGhpcy5ibGFkZVdpZHRoICsgcmFuZG9tLnJhbmRvbSgpICogdGhpcy5ibGFkZVdpZHRoICogMC41O1xyXG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgICA9IHRoaXMuYmxhZGVNaW5IZWlnaHQgKyBNYXRoLnBvdyhyYW5kb20ucmFuZG9tKCksIDQuMCkgKiBoZWlnaHRGYWN0b3I7XHJcbiAgICAgICAgICAgIGNvbnN0IGxlYW4gICAgID0gMC4wMSArIHJhbmRvbS5yYW5kb20oKSAqIDAuMztcclxuICAgICAgICAgICAgY29uc3QgY3VydmUgICAgPSAwLjA1ICsgcmFuZG9tLnJhbmRvbSgpICogMC4zO1xyXG5cclxuICAgICAgICAgICAgb2Zmc2V0U2hhcGVbaSAqIDggKyAwXSA9IG5vcm1hbGl6ZVZhbHVlKHgpOyAvLyB4XHJcbiAgICAgICAgICAgIG9mZnNldFNoYXBlW2kgKiA4ICsgMV0gPSBub3JtYWxpemVWYWx1ZSh5KTsgLy8geVxyXG4gICAgICAgICAgICBvZmZzZXRTaGFwZVtpICogOCArIDJdID0gbm9ybWFsaXplVmFsdWUoeik7IC8vIHpcclxuICAgICAgICAgICAgb2Zmc2V0U2hhcGVbaSAqIDggKyAzXSA9IG5vcm1hbGl6ZVZhbHVlKHJvdGF0aW9uKTsgLy8gcm90XHJcblxyXG4gICAgICAgICAgICBvZmZzZXRTaGFwZVtpICogOCArIDRdID0gbm9ybWFsaXplVmFsdWUod2lkdGgpOyAgLy8gd2lkdGhcclxuICAgICAgICAgICAgb2Zmc2V0U2hhcGVbaSAqIDggKyA1XSA9IG5vcm1hbGl6ZVZhbHVlKGhlaWdodCk7IC8vKyBub2lzZTsgLy8rIGhlaWdodFxyXG4gICAgICAgICAgICBvZmZzZXRTaGFwZVtpICogOCArIDZdID0gbm9ybWFsaXplVmFsdWUobGVhbik7ICAgLy8gbGVhblxyXG4gICAgICAgICAgICBvZmZzZXRTaGFwZVtpICogOCArIDddID0gbm9ybWFsaXplVmFsdWUoY3VydmUpOyAgLy8gY3VydmVcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgX3VwZGF0ZUluc3RhbmNpbmdCdWZmZXIoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgcmFkaXVzOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5zdGFuY2luZ0J1ZmZlcj8uZGVzdHJveSgpO1xyXG5cclxuICAgICAgICBjb25zdCBsb2QwUGF0Y2hDb3VudCA9IDE7XHJcbiAgICAgICAgY29uc3QgbG9kMVBhdGNoQ291bnQgPSA4O1xyXG4gICAgICAgIGNvbnN0IGxvZDJQYXRjaENvdW50ID0gMTY7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hOdW1CbGFkZXMgPSAodGhpcy5udW1CbGFkZXMgLyAobG9kMFBhdGNoQ291bnQgKyBsb2QxUGF0Y2hDb3VudCArIGxvZDJQYXRjaENvdW50KSkgfCAwO1xyXG4gICAgICAgIGNvbnN0IG9mZnNldEFuZFNoYXBlTGVuZ3RoID0gcGF0Y2hOdW1CbGFkZXMgKiA4O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fYnVmZmVyU3RvcmUub2Zmc2V0QW5kU2hhcGUgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTdG9yZS5vZmZzZXRBbmRTaGFwZS5sZW5ndGggIT09IG9mZnNldEFuZFNoYXBlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLm9mZnNldEFuZFNoYXBlID0gbmV3IEZsb2F0MzJBcnJheShvZmZzZXRBbmRTaGFwZUxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9pbml0QmxhZGVPZmZzZXRTaGFwZVZlcnRzKHRoaXMuX2J1ZmZlclN0b3JlLm9mZnNldEFuZFNoYXBlLCByYWRpdXMsIHBhdGNoTnVtQmxhZGVzKTtcclxuXHJcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuX2J1ZmZlclN0b3JlLm9mZnNldEFuZFNoYXBlIGluc3RhbmNlb2YgVWludDE2QXJyYXkgPyBwYy5UWVBFX0ZMT0FUMTYgOiBwYy5UWVBFX0ZMT0FUMzI7XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2luZ0Zvcm1hdCA9IG5ldyBwYy5WZXJ0ZXhGb3JtYXQoZ3JhcGhpY3NEZXZpY2UsIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VtYW50aWM6IHBjLlNFTUFOVElDX0FUVFIxMCxcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IDQsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGFzSW50OiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZW1hbnRpYzogcGMuU0VNQU5USUNfQVRUUjExLFxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogNCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICBub3JtYWxpemU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgYXNJbnQ6IGZhbHNlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICB0aGlzLl9zaGFyZWRJbnN0YW5jaW5nQnVmZmVyID0gbmV3IHBjLlZlcnRleEJ1ZmZlcihncmFwaGljc0RldmljZSwgaW5zdGFuY2luZ0Zvcm1hdCwgcGF0Y2hOdW1CbGFkZXMsIHtcclxuICAgICAgICAgICAgdXNhZ2U6IHBjLkJVRkZFUl9TVEFUSUMsXHJcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuX2J1ZmZlclN0b3JlLm9mZnNldEFuZFNoYXBlLFxyXG4gICAgICAgICAgICBzdG9yYWdlOiBmYWxzZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXRWZXJ0ZXhGb3JtYXQoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgcGMuVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlLCBbe1xyXG4gICAgICAgICAgICBzZW1hbnRpYzogcGMuU0VNQU5USUNfUE9TSVRJT04sXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IDEsXHJcbiAgICAgICAgICAgIHR5cGU6IHBjLlRZUEVfRkxPQVQzMixcclxuICAgICAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcclxuICAgICAgICAgICAgYXNJbnQ6IGZhbHNlXHJcbiAgICAgICAgfV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZU1lc2hCdWZmZXJzKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9zaGFyZWRWZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgY29uc3QgbG9kMFZDID0gKHRoaXMubG9kMEJsYWRlU2VncyArIDEpICogMjtcclxuICAgICAgICBjb25zdCBsb2QxVkMgPSAodGhpcy5sb2QxQmxhZGVTZWdzICsgMSkgKiAyO1xyXG4gICAgICAgIGNvbnN0IGxvZDJWQyA9ICh0aGlzLmxvZDJCbGFkZVNlZ3MgKyAxKSAqIDI7XHJcbiAgICAgICAgY29uc3QgaW5kZXhMZW5ndGggPSB0aGlzLmxvZDBCbGFkZVNlZ3MgKiAxMiArIHRoaXMubG9kMUJsYWRlU2VncyAqIDEyICogbG9kMVF1YWRDb3VudCArIHRoaXMubG9kMkJsYWRlU2VncyAqIDEyICogbG9kMlF1YWRDb3VudDtcclxuICAgICAgICBjb25zdCBpbmRleFZlcnRzTGVuZ3RoID0gbG9kMFZDICogMiArIGxvZDFWQyAqIDIgKiBsb2QxUXVhZENvdW50ICsgbG9kMlZDICogMiAqIGxvZDJRdWFkQ291bnQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJTdG9yZS5pbmRleCA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4Lmxlbmd0aCAhPT0gaW5kZXhMZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXggPSBuZXcgVWludDE2QXJyYXkoaW5kZXhMZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9kMlF1YWRDb3VudDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9kMlZDMSA9IGkgKiBsb2QyVkMgKiAyO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9kMlZDMiA9IGxvZDJWQzEgKyBsb2QyVkM7XHJcblxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9pbml0QmxhZGVJbmRpY2VzKHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4LCBsb2QyVkMxLCBsb2QyVkMyLCBpbmRleCwgdGhpcy5sb2QyQmxhZGVTZWdzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbG9kMFZDMSA9IGxvZDJRdWFkQ291bnQgKiBsb2QyVkMgKiAyO1xyXG4gICAgICAgICAgICBjb25zdCBsb2QwVkMyID0gbG9kMFZDMSArIGxvZDBWQztcclxuXHJcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5faW5pdEJsYWRlSW5kaWNlcyh0aGlzLl9idWZmZXJTdG9yZS5pbmRleCwgbG9kMFZDMSwgbG9kMFZDMiwgaW5kZXgsIHRoaXMubG9kMEJsYWRlU2Vncyk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvZDFRdWFkQ291bnQ7IGkrKykge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2QxVkMxID0gbG9kMFZDMiArIGxvZDBWQyArIGkgKiBsb2QxVkMgKiAyO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9kMVZDMiA9IGxvZDFWQzEgKyBsb2QxVkM7XHJcblxyXG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9pbml0QmxhZGVJbmRpY2VzKHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4LCBsb2QxVkMxLCBsb2QxVkMyLCBpbmRleCwgdGhpcy5sb2QxQmxhZGVTZWdzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4VmVydHMgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTdG9yZS5pbmRleFZlcnRzLmxlbmd0aCAhPT0gaW5kZXhWZXJ0c0xlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTdG9yZS5pbmRleFZlcnRzID0gbmV3IEZsb2F0MzJBcnJheShpbmRleFZlcnRzTGVuZ3RoKTtcclxuICAgICAgICAgICAgdGhpcy5faW5pdEJsYWRlSW5kZXhWZXJ0cyh0aGlzLl9idWZmZXJTdG9yZS5pbmRleFZlcnRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NoYXJlZEluZGV4QnVmZmVyID0gbmV3IHBjLkluZGV4QnVmZmVyKFxyXG4gICAgICAgICAgICBncmFwaGljc0RldmljZSxcclxuICAgICAgICAgICAgcGMuSU5ERVhGT1JNQVRfVUlOVDE2LFxyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTdG9yZS5pbmRleC5sZW5ndGgsXHJcbiAgICAgICAgICAgIHBjLkJVRkZFUl9TVEFUSUMsXHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4LFxyXG4gICAgICAgICAgICB7IHN0b3JhZ2U6IGZhbHNlIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLl9zaGFyZWRWZXJ0ZXhCdWZmZXIgPSBuZXcgcGMuVmVydGV4QnVmZmVyKGdyYXBoaWNzRGV2aWNlLCB0aGlzLl9nZXRWZXJ0ZXhGb3JtYXQoZ3JhcGhpY3NEZXZpY2UpLCB0aGlzLl9idWZmZXJTdG9yZS5pbmRleFZlcnRzLmxlbmd0aCwge1xyXG4gICAgICAgICAgICB1c2FnZTogcGMuQlVGRkVSX1NUQVRJQyxcclxuICAgICAgICAgICAgZGF0YTogdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXhWZXJ0cyxcclxuICAgICAgICAgICAgc3RvcmFnZTogZmFsc2UsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTWVzaE1hdGVyaWFsKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWw/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbCA9IG5ldyBwYy5TdGFuZGFyZE1hdGVyaWFsKCk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwubmFtZSA9IFwiR3Jhc3NGaWVsZE1hdGVyaWFsXCI7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuZGVwdGhUZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuZGVwdGhXcml0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuYmxlbmRUeXBlID0gcGMuQkxFTkRfTk9ORTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5hbHBoYVRlc3QgPSAwO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmFscGhhV3JpdGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5hbHBoYUZhZGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5hbHBoYVRvQ292ZXJhZ2UgPSBmYWxzZTtcclxuICAgICAgICAqL1xyXG5cclxuICAgICAgICBjb25zdCB0ZXJyYWluICAgPSB0aGlzLl90ZXJyYWluLm9iamVjdDtcclxuICAgICAgICBjb25zdCBwYXRjaGVzICAgPSB0aGlzLl90ZXJyYWluLnJlbmRlclByZXBhcmVyLnBhdGNoZXNTdG9yZTtcclxuICAgICAgICBjb25zdCBoZWlnaHRNYXAgPSBwYXRjaGVzLmhlaWdodE1hcFRleHR1cmU7XHJcbiAgICAgICAgY29uc3QgdGVycmFpblNjYWxlID0gdGhpcy5fdGVycmFpbi5lbnRpdHkuZ2V0U2NhbGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHZpbmRleEF0dHJOYW1lLCBwYy5TRU1BTlRJQ19QT1NJVElPTik7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0QXR0cmlidXRlKG9mZnNldEF0dHJOYW1lLCBwYy5TRU1BTlRJQ19BVFRSMTApO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldEF0dHJpYnV0ZShzaGFwZUF0dHJOYW1lLCBwYy5TRU1BTlRJQ19BVFRSMTEpO1xyXG5cclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VEYXRhTWFwJywgdGhpcy5fZGF0YVRleHR1cmUudGV4dHVyZSk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHRlcnJhaW5IZWlnaHRNYXBQYXJhbU5hbWUsIGhlaWdodE1hcCk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHRlcnJhaW5TY2FsZVBhcmFtTmFtZSwgW3RlcnJhaW5TY2FsZS54LCB0ZXJyYWluU2NhbGUueSwgdGVycmFpblNjYWxlLnpdKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIodGVycmFpbk1heEhlaWdodFBhcmFtTmFtZSwgdGVycmFpbi5tYXhIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihgJHtsb2QxT2Zmc2V0WFpQYXJhbU5hbWV9WzBdYCwgdGhpcy5fb2Zmc2V0TG9kMUFycik7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGAke2xvZDJPZmZzZXRYWlBhcmFtTmFtZX1bMF1gLCB0aGlzLl9vZmZzZXRMb2QyQXJyKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGRyYXdQb3NQYXJhbU5hbWUsIFswLCAwLCAwXSk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHRpbWVQYXJhbU5hbWUsIHRoaXMuX3RpbWUpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih3aW5kSW50ZW5zaXR5UGFyYW1OYW1lLCAwKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBobUZvcm1hdCA9IGdldEhlaWdodE1hcEZvcm1hdChncmFwaGljc0RldmljZSwgdGVycmFpbi5oZWlnaHRNYXApO1xyXG4gICAgICAgIGNvbnN0IHBjVmVyc2lvbiA9IGB2JHtwYy52ZXJzaW9uWzBdfWAgYXMgdW5rbm93biBhcyBhbnk7XHJcbiAgICAgICAgY29uc3QgY2h1bmtzU3RvcmUgPSBnZXRHcmFzc1NoYWRlckNodW5rcyh7XHJcbiAgICAgICAgICAgIHdpZHRoOiB0ZXJyYWluLndpZHRoLFxyXG4gICAgICAgICAgICBkZXB0aDogdGVycmFpbi5kZXB0aCxcclxuICAgICAgICAgICAgaGVpZ2h0TWFwQ2h1bmtTaXplOiB0ZXJyYWluLmhlaWdodE1hcC5kYXRhQ2h1bmtTaXplLFxyXG4gICAgICAgICAgICBoZWlnaHRNYXBGb3JtYXQ6IGhtRm9ybWF0LFxyXG4gICAgICAgICAgICBibGFkZU1heEhlaWdodDogdGhpcy5ibGFkZU1heEhlaWdodCAqIDEuNSxcclxuICAgICAgICAgICAgbG9kMEJsYWRlU2VnczogdGhpcy5sb2QwQmxhZGVTZWdzLFxyXG4gICAgICAgICAgICBsb2QxQmxhZGVTZWdzOiB0aGlzLmxvZDFCbGFkZVNlZ3MsXHJcbiAgICAgICAgICAgIGxvZDJCbGFkZVNlZ3M6IHRoaXMubG9kMkJsYWRlU2VncyxcclxuICAgICAgICAgICAgcmFkaXVzOiB0aGlzLnJhZGl1cyxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbkxvdzogdGhpcy50cmFuc2l0aW9uTG93LFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uSGlnaDogdGhpcy50cmFuc2l0aW9uSGlnaCxcclxuICAgICAgICAgICAgZW5naW5lVmVyc2lvbjogcGNWZXJzaW9uLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjaHVua05hbWVzID0gT2JqZWN0LmtleXMoY2h1bmtzU3RvcmUpO1xyXG5cclxuICAgICAgICBpZiAocGNWZXJzaW9uID09PSAndjEnKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaHVua3MgPSB0aGlzLl9tYXRlcmlhbC5jaHVua3MgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xyXG5cclxuICAgICAgICAgICAgY2h1bmtzLkFQSVZlcnNpb24gPSBwYy5DSFVOS0FQSV8xXzcwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgY2h1bmtOYW1lIG9mIGNodW5rTmFtZXMpIHtcclxuICAgICAgICAgICAgICAgIGNodW5rc1tjaHVua05hbWVdID0gY2h1bmtzU3RvcmVbY2h1bmtOYW1lXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoYWRlckNodW5rcyA9IHRoaXMuX21hdGVyaWFsLmdldFNoYWRlckNodW5rcyhwYy5TSEFERVJMQU5HVUFHRV9HTFNMKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgY2h1bmtOYW1lIG9mIGNodW5rTmFtZXMpIHtcclxuICAgICAgICAgICAgICAgIHNoYWRlckNodW5rcy5zZXQoY2h1bmtOYW1lLCBjaHVua3NTdG9yZVtjaHVua05hbWVdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9tYXRlcmlhbC5zaGFkZXJDaHVua3NWZXJzaW9uID0gcGMuQ0hVTktBUElfMV83MDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHcmFzc0ZpZWxkO1xyXG5leHBvcnQgY29uc3QgZ3Jhc3NGaWVsZFNjcmlwdE5hbWUgPSBcImdyYXNzRmllbGRcIjtcclxuXHJcbnBjLnJlZ2lzdGVyU2NyaXB0KEdyYXNzRmllbGQsIGdyYXNzRmllbGRTY3JpcHROYW1lKTtcclxuXHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJwYWludGluZ1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiBmYWxzZSB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImNhc3RTaGFkb3dcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogdHJ1ZSwgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJyZWNlaXZlU2hhZG93XCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IHRydWUsIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwid2lyZWZyYW1lXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiZnJlZXplRHJhd1Bvc1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiBmYWxzZSB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImF1dG9SZW5kZXJcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogdHJ1ZSB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcInNlZWRcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA1MzQ2NDU0NjQ1NSwgbWluOiAxLCBzdGVwOiAxLCBwcmVjaXNpb246IDAgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJ3aW5kSW50ZW5zaXR5XCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMCwgbWluOiAtMzAsIG1heDogMzAgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJudW1CbGFkZXNcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA0MDAwLCBtaW46IDAsIG1heDogODAwMDAwMCwgc3RlcDogMSwgcHJlY2lzaW9uOiAwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwicmFkaXVzXCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogODAsIG1pbjogMSwgbWF4OiAxMDAwMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImxvZDBCbGFkZVNlZ3NcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAzLCBtaW46IDEsIG1heDogMTAsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImxvZDFCbGFkZVNlZ3NcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAyLCBtaW46IDEsIG1heDogMTAsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImxvZDJCbGFkZVNlZ3NcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAxLCBtaW46IDEsIG1heDogMTAsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImJsYWRlV2lkdGhcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAwLjA0LCBtaW46IDAuMDEsIG1heDogNSB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImJsYWRlTWluSGVpZ2h0XCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMC4yNSwgbWluOiAwLjAxLCBtYXg6IDEwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiYmxhZGVNYXhIZWlnaHRcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAxLCBtaW46IDAuMDEsIG1heDogMTAgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJ0ZXh0dXJlc1wiLCB7XHJcbiAgICB0eXBlOiBcImpzb25cIixcclxuICAgIGFycmF5OiB0cnVlLFxyXG4gICAgc2NoZW1hOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcIm5hbWVcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiTmFtZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcImRpZmZ1c2VcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiRGlmZnVzZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgIGFzc2V0VHlwZTogXCJ0ZXh0dXJlXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiY29sb3JcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiQ29sb3JcIixcclxuICAgICAgICAgICAgdHlwZTogXCJyZ2JcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcImNvbG9yUmFuZG9tXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIkNvbG9yIFJhbmRvbVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInZlYzNcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogWzAuMDEsIDAuMDEsIDAuMDFdXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59KTsiLCJpbXBvcnQgeyB0ZXJyYWluU2NyaXB0TmFtZSB9IGZyb20gXCIuL1RlcnJhaW4ubWpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGVycmFpbkNvbGxpZGVyIGV4dGVuZHMgcGMuU2NyaXB0VHlwZSB7XHJcblxyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICBjb25zdCB0ZXJyYWluID0gdGhpcy5lbnRpdHkuc2NyaXB0Py5nZXQodGVycmFpblNjcmlwdE5hbWUpO1xyXG4gICAgICAgIC8vIFRPRE9cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGVycmFpbkNvbGxpZGVyO1xyXG5leHBvcnQgY29uc3QgdGVycmFpbkNvbGxpZGVyU2NyaXB0TmFtZSA9IFwidGVycmFpbkNvbGxpZGVyXCI7XHJcblxyXG5wYy5yZWdpc3RlclNjcmlwdChUZXJyYWluQ29sbGlkZXIsIHRlcnJhaW5Db2xsaWRlclNjcmlwdE5hbWUpOyIsImV4cG9ydCBjbGFzcyBJbnN0YW5jZWRNZXNoIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEF0dHJpYnV0ZSBzdG9yaW5nIGluZGljZXMgb2YgdGhlIGluc3RhbmNlcyB0byBiZSByZW5kZXJlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGluc3RhbmNlSW5kZXg6IHBjeC5WZXJ0ZXhGb3JtYXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIF9ncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlO1xyXG4gICAgcHJpdmF0ZSBfY291bnQ6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIF9jYXBhY2l0eTogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgX2luaXRJbmRleEF0dHJpYnV0ZSgpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9ncmFwaGljc0RldmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9jb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNhcGFjaXR5ID0gdGhpcy5fY2FwYWNpdHk7XHJcbiAgICAgICAgY29uc3QgYXJyYXkgPSBuZXcgVWludDMyQXJyYXkoY2FwYWNpdHkpO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXBhY2l0eTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFycmF5W2ldID0gaTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICB0aGlzLmluc3RhbmNlSW5kZXggPSBuZXcgcGMuVmVydGV4Rm9ybWF0KHRoaXMuX2dyYXBoaWNzRGV2aWNlLCBbe1xyXG4gICAgICAgICAgICBzZW1hbnRpYzogcGMuU0VNQU5USUNfQVRUUjEwLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiAxLFxyXG4gICAgICAgICAgICB0eXBlOiBwYy5UWVBFX1VJTlQzMixcclxuICAgICAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcclxuICAgICAgICAgICAgYXNJbnQ6IHRydWVcclxuICAgICAgICB9XSk7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbn0iLCJleHBvcnQgaW50ZXJmYWNlIERhdGEge1xyXG4gICAgWzBdOiAgbnVtYmVyLCAvLyBYXHJcbiAgICBbNF06ICBudW1iZXIsIC8vIFlcclxuICAgIFs4XTogIG51bWJlciwgLy8gWlxyXG4gICAgWzEyXTogbnVtYmVyLCAvLyByb3RhdGVcclxuICAgIFsxNl06IG51bWJlciwgLy8gaGVpZ2h0XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBIHtcclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVHJlZUZpZWxkIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgYWRkVHJlZSh4OiBudW1iZXIsIHo6IG51bWJlciwgYW5nbGU6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVRyZWUoaW5kZXg6IG51bWJlcikge1xyXG5cclxuICAgICAgICBcclxuICAgIH1cclxufSIsIjsoKCkgPT4ge1xyXG4gICAgaWYgKHdpbmRvdy5fX19hbWRfX19yZXF1aXJlUmVzb2x2ZXIpIHtcclxuICAgICAgICB3aW5kb3cuX19fYW1kX19fcmVxdWlyZVJlc29sdmVyKCk7XHJcbiAgICB9XHJcbn0pKCk7Il19