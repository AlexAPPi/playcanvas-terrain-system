"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
;
(() => {
    const defs = {};
    const resolved = {};
    // save original define and require
    window.___amd___OriginalDefine = window.define;
    window.___amd___OriginalRequire = window.require;
    if (!window.define && !window.require) {
        const define = (id, deps, factory) => {
            if (defs[id]) {
                throw new Error('Duplicate definition for ' + id);
            }
            defs[id] = [deps, factory];
        };
        define.amd = {
            bundle: true, // this implementation works only with bundled amd modules
            dynamic: false, // does not support dynamic or async loading
        };
        const require = (id) => {
            if (id === 'require')
                return require;
            if (id === 'exports')
                return {};
            if (resolved[id])
                return resolved[id];
            if (!defs[id]) {
                console.log(defs, id);
                throw new Error('No definition for ' + id);
            }
            const moduleExports = {};
            const deps = defs[id][0];
            const factory = defs[id][1];
            const args = deps.map(dep => {
                if (dep === 'exports') {
                    return moduleExports;
                }
                return require(dep);
            });
            factory.apply(null, args);
            return resolved[id] = moduleExports;
        };
        window.define = define;
        window.require = require;
    }
    window.___amd___requireResolver = () => {
        for (const id in defs) {
            if (defs.hasOwnProperty(id)) {
                const deps = defs[id][0];
                if (deps) {
                    deps.map(dep => {
                        if (dep !== 'require' &&
                            dep !== 'exports') {
                            if (!resolved.hasOwnProperty(dep)) {
                                require(dep);
                            }
                            if (!defs.hasOwnProperty(dep) &&
                                !resolved.hasOwnProperty(dep)) {
                                throw new Error(`Failed define '${id}' dep not found '${dep}'`);
                            }
                        }
                    });
                }
                require(id);
                delete defs[id];
            }
        }
        // return original define and require
        window.define = window.___amd___OriginalDefine;
        window.require = window.___amd___OriginalRequire;
        // clear
        delete window.___amd___requireResolver;
        delete window.___amd___OriginalDefine;
        delete window.___amd___OriginalRequire;
    };
})();
define("src/Extras/Types", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Core/IZone", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Extras/Compressor", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class Compressor {
        static _concatChunks(chunks, totalLength) {
            let position = 0;
            // Concatenate all Uint8Array chunks into a single ArrayBuffer
            const resultBuffer = new Uint8Array(totalLength);
            for (const chunk of chunks) {
                resultBuffer.set(chunk, position);
                position += chunk.length;
            }
            return resultBuffer.buffer;
        }
        static _getResult(reader) {
            return __awaiter(this, void 0, void 0, function* () {
                let totalLength = 0;
                const chunks = [];
                while (true) {
                    const { done, value } = yield reader.read();
                    if (done)
                        break;
                    chunks.push(value);
                    totalLength += value.length;
                }
                return this._concatChunks(chunks, totalLength);
            });
        }
        static compressBuffer(buffer_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, format = 'gzip') {
                const compressedStream = new CompressionStream(format);
                const writer = compressedStream.writable.getWriter();
                writer.write(new Uint8Array(buffer));
                writer.close();
                const reader = compressedStream.readable.getReader();
                return this._getResult(reader);
            });
        }
        static decompressBuffer(buffer_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, format = 'gzip') {
                const decompressedStream = new DecompressionStream(format);
                const reader = decompressedStream.readable.getReader();
                const writer = decompressedStream.writable.getWriter();
                // Write the compressed buffer to the writer
                writer.write(new Uint8Array(buffer));
                writer.close();
                return this._getResult(reader);
            });
        }
    }
    exports.default = Compressor;
});
define("src/Core/AbsHeightMapFileIO", ["require", "exports", "src/Extras/Compressor"], function (require, exports, Compressor_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsHeightMapFileIO = exports.heightMapFileCompressedFormat = exports.factorSize = exports.heightMapVersion = void 0;
    Compressor_mjs_1 = __importDefault(Compressor_mjs_1);
    exports.heightMapVersion = 99;
    exports.factorSize = 3;
    exports.heightMapFileCompressedFormat = 'gzip';
    class AbsHeightMapFileIO {
        __readHeightFactor(view, headerSize, width, x, z) {
            const index = z * width + x;
            const r = view.getUint8(headerSize + index * exports.factorSize + 0);
            const g = view.getUint8(headerSize + index * exports.factorSize + 1);
            const b = view.getUint8(headerSize + index * exports.factorSize + 2);
            const scaled = (r << 16) | (g << 8) | b;
            const factor = scaled / 0xffffff;
            return factor;
        }
        __writeHeightFactor(view, headerSize, heightMap, x, z) {
            const index = z * heightMap.width + x;
            const factor = heightMap.getFactor(x, z);
            const scaled = Math.floor(factor * 0xffffff);
            const r = (scaled >> 16) & 0xff;
            const g = (scaled >> 8) & 0xff;
            const b = (scaled & 0xff);
            view.setUint8(headerSize + index * exports.factorSize + 0, r);
            view.setUint8(headerSize + index * exports.factorSize + 1, g);
            view.setUint8(headerSize + index * exports.factorSize + 2, b);
        }
        __importFromFile(heightMap, buffer, options) {
            return __awaiter(this, void 0, void 0, function* () {
                // TODO:
                // header version 99
                // headerByteSize, version, width, depth, maxHeight
                const nBuffer = yield Compressor_mjs_1.default.decompressBuffer(buffer, exports.heightMapFileCompressedFormat);
                const view = new DataView(nBuffer);
                const version = view.getUint32(1, true);
                if (version !== exports.heightMapVersion) {
                    console.warn('Height map version: %f no support.', version);
                    return null;
                }
                const headerSize = view.getUint8(0);
                const width = view.getUint32(5, true);
                const depth = view.getUint32(9, true);
                const maxHeight = view.getFloat32(13, true);
                const finalMaxHeight = (options === null || options === void 0 ? void 0 : options.adaptiveMaxHeight) ? heightMap.maxHeight : maxHeight;
                if ((heightMap.width !== width || heightMap.depth !== depth) && (options === null || options === void 0 ? void 0 : options.adaptiveWidthAndDepth)) {
                    // TODO: its work for x^n + 1, z^n + 1
                    const factorX = (width - 1) / (heightMap.width - 1);
                    const factorZ = (depth - 1) / (heightMap.depth - 1);
                    for (let z = 0; z < depth; z += factorZ) {
                        for (let x = 0; x < width; x += factorX) {
                            // TODO: smooth for heightMap more import data
                            const factor = this.__readHeightFactor(view, headerSize, width, x | 0, z | 0);
                            const height = factor * finalMaxHeight;
                            heightMap.set(x / factorX, z / factorZ, height);
                        }
                    }
                }
                else {
                    for (let z = 0; (z < depth) && (z < heightMap.depth); z++) {
                        for (let x = 0; (x < width) && (x < heightMap.width); x++) {
                            const factor = this.__readHeightFactor(view, headerSize, width, x, z);
                            const height = factor * finalMaxHeight;
                            heightMap.set(x, z, height);
                        }
                    }
                }
                return {
                    width,
                    depth,
                    maxHeight
                };
            });
        }
        __exportToBuffer(heightMap) {
            return __awaiter(this, void 0, void 0, function* () {
                // TODO:
                // header version 99
                // headerByteSize, version, width, depth, maxHeight
                const headerSize = 1 + 4 + 4 + 4 + 4;
                const buffer = new ArrayBuffer(headerSize + exports.factorSize * heightMap.width * heightMap.depth);
                const view = new DataView(buffer);
                view.setUint8(0, headerSize);
                view.setUint32(1, exports.heightMapVersion, true);
                view.setUint32(5, heightMap.width, true);
                view.setUint32(9, heightMap.depth, true);
                view.setFloat32(13, heightMap.maxHeight, true);
                for (let z = 0; z < heightMap.depth; z++) {
                    for (let x = 0; x < heightMap.width; x++) {
                        this.__writeHeightFactor(view, headerSize, heightMap, x, z);
                    }
                }
                return Compressor_mjs_1.default.compressBuffer(buffer, exports.heightMapFileCompressedFormat);
            });
        }
    }
    exports.AbsHeightMapFileIO = AbsHeightMapFileIO;
    exports.default = AbsHeightMapFileIO;
});
define("src/Core/AbsHeightMap", ["require", "exports", "src/Core/AbsHeightMapFileIO"], function (require, exports, AbsHeightMapFileIO_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsHeightMap = void 0;
    AbsHeightMapFileIO_mjs_1 = __importDefault(AbsHeightMapFileIO_mjs_1);
    class AbsHeightMap extends AbsHeightMapFileIO_mjs_1.default {
        constructor() {
            super(...arguments);
            this.minX = 0;
            this.minZ = 0;
        }
        get maxX() { return this.width; }
        get maxZ() { return this.depth; }
        getHeightInterpolated(x, z) {
            const intX = x | 0;
            const intZ = z | 0;
            const x0z0 = this.get(intX, intZ);
            if ((intX + 1 >= this.width) ||
                (intZ + 1 >= this.depth)) {
                return x0z0;
            }
            const x1z0 = this.get(intX + 1, intZ);
            const x0z1 = this.get(intX, intZ + 1);
            const x1z1 = this.get(intX + 1, intZ + 1);
            const factorX = x - intX;
            const interpolatedBottom = (x1z0 - x0z0) * factorX + x0z0;
            const interpolatedTop = (x1z1 - x0z1) * factorX + x0z1;
            const factorZ = z - intZ;
            const finalHeight = (interpolatedTop - interpolatedBottom) * factorZ + interpolatedBottom;
            return finalHeight;
        }
        substract(x, z, value) {
            return this.append(x, z, -value);
        }
        divide(x, z, value, heightIfZero = 0) {
            return this.multiply(x, z, 1 / value, heightIfZero);
        }
        fromFile(buffer, options) {
            return __awaiter(this, void 0, void 0, function* () {
                return yield this.__importFromFile(this, buffer, options);
            });
        }
        toFile() {
            return __awaiter(this, void 0, void 0, function* () {
                const buffer = yield this.__exportToBuffer(this);
                return new Blob([buffer], { type: "application/octet-stream" });
            });
        }
        toBuffer(buffer) {
            const width = this.width;
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    const f = this.getFactor(x, z);
                    const v = f * 255;
                    const pos = (x + z * width) * 4;
                    buffer[pos + 0] = v;
                    buffer[pos + 1] = v;
                    buffer[pos + 2] = v;
                    buffer[pos + 3] = 255;
                }
            }
        }
        toCanvas() {
            const canvas = document.createElement('canvas');
            const width = this.width;
            const height = this.depth;
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');
            if (!ctx) {
                throw new Error('Failed create canvas 2d context');
            }
            const imageData = ctx.getImageData(0, 0, width, height);
            const buffer = imageData.data;
            this.toBuffer(buffer);
            ctx.putImageData(imageData, 0, 0);
            return canvas;
        }
        /**
         * Save height map to image of base64
         */
        toImage(type, quality) {
            const canvas = this.toCanvas();
            return canvas.toDataURL(type, quality);
        }
        /**
         * Load height map from image
         * @param img
         */
        fromImage(img) {
            const bufferWidth = img.width;
            const bufferHeight = img.height;
            if (bufferWidth % 2 !== 0 || bufferHeight % 2 !== 0) {
                throw new Error("Map sizes not divisible by 2 are not supported");
            }
            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            canvas.width = bufferWidth;
            canvas.height = bufferHeight;
            context.drawImage(img, 0, 0);
            const imageData = context.getImageData(0, 0, bufferWidth, bufferHeight);
            const imageBuffer = imageData.data;
            const maxSegmentX = this.width - 1;
            const maxSegmentZ = this.depth - 1;
            const factorX = bufferWidth / maxSegmentX;
            const factorZ = bufferHeight / maxSegmentZ;
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    let normalizeX = x === maxSegmentX ? x - 1 : x;
                    let normalizeZ = z === maxSegmentZ ? z - 1 : z;
                    const heightMapX = (normalizeX * factorX) | 0;
                    const heightMapZ = (normalizeZ * factorZ) | 0;
                    const pos = (heightMapX + heightMapZ * bufferWidth) * 4;
                    const r = imageBuffer[pos];
                    const g = imageBuffer[pos + 1];
                    const b = imageBuffer[pos + 2];
                    const a = imageBuffer[pos + 3];
                    const coeff = (r + g + b) / 3 / a;
                    const height = coeff * this.maxHeight;
                    this.set(x, z, height);
                }
            }
        }
        smoothZone(zone, np, radius) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            if (np < 0 || np > 1)
                return;
            if (radius < 0)
                return;
            const minX = Math.max(zone.minX, 0);
            const minZ = Math.max(zone.minZ, 0);
            const maxX = Math.min(zone.maxX, this.width);
            const maxZ = Math.min(zone.maxZ, this.depth);
            const cp = 1 - np;
            for (let x = minX; x < maxX; x++) {
                for (let z = minZ; z < maxZ; z++) {
                    const prevHeight = this.get(x, z);
                    let updtHeight;
                    let neighNumber = 0;
                    let neighAverage = 0;
                    for (let rx = -radius; rx <= radius; rx++) {
                        for (let rz = -radius; rz <= radius; rz++) {
                            const innerX = (x + rx);
                            const innerZ = (z + rz);
                            if (innerX < 0 || innerX >= this.width)
                                continue;
                            if (innerZ < 0 || innerZ >= this.depth)
                                continue;
                            const height = (innerX === x && innerZ === z)
                                ? prevHeight
                                : this.get(innerX, innerZ);
                            neighNumber++;
                            neighAverage += height;
                        }
                    }
                    neighAverage /= neighNumber;
                    updtHeight = neighAverage * np + prevHeight * cp;
                    this.set(x, z, updtHeight);
                }
            }
        }
        smooth(np, radius) {
            this.smoothZone(this, np, radius);
        }
        normalize(maxHeight) {
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    const currentHeight = this.get(x, z);
                    const normalizeHeight = (currentHeight / this.maxHeight) * maxHeight;
                    this.set(x, z, normalizeHeight);
                }
            }
        }
        combineHeights(type, heightMap, value, zone, heightIfZero = 0, minHeight = null, maxHeight = null) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const lenX = zone.maxX - zone.minX;
            const lenZ = zone.maxZ - zone.minZ;
            if (lenX < 1 || lenZ < 1 || value === 0) {
                return;
            }
            const fixedMinX = Math.max(zone.minX, 0);
            const fixedMinZ = Math.max(zone.minZ, 0);
            const fixedMaxX = Math.min(zone.maxX, this.width);
            const fixedMaxZ = Math.min(zone.maxZ, this.depth);
            const coeffFactorX = (heightMap.width - 1) / lenX;
            const coeffFactorZ = (heightMap.depth - 1) / lenZ;
            for (let z = fixedMinZ; z < fixedMaxZ; z++) {
                for (let x = fixedMinX; x < fixedMaxX; x++) {
                    const x2 = (coeffFactorX * (x - zone.minX)) | 0;
                    const z2 = (coeffFactorZ * (z - zone.minZ)) | 0;
                    const height = heightMap.get(x2, z2);
                    const smoothAppendValue = height * value;
                    const oldHeight = this.get(x, z) || heightIfZero;
                    let candidate = type === '+' ? oldHeight + smoothAppendValue :
                        type === '-' ? oldHeight - smoothAppendValue :
                            type === '*' ? oldHeight * smoothAppendValue :
                                type === '/' ? oldHeight / smoothAppendValue :
                                    oldHeight;
                    if (minHeight !== null && candidate < minHeight) {
                        candidate = minHeight;
                    }
                    if (maxHeight !== null && candidate > maxHeight) {
                        candidate = maxHeight;
                    }
                    this.set(x, z, candidate);
                }
            }
        }
    }
    exports.AbsHeightMap = AbsHeightMap;
    exports.default = AbsHeightMap;
});
define("src/Core/HeightMap", ["require", "exports", "src/Core/AbsHeightMap"], function (require, exports, AbsHeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.HeightMap = exports.defaultHeightVertexSize = exports.HeightMapArrType = void 0;
    AbsHeightMap_mjs_1 = __importDefault(AbsHeightMap_mjs_1);
    exports.HeightMapArrType = Float32Array;
    exports.defaultHeightVertexSize = 1;
    class HeightMap extends AbsHeightMap_mjs_1.default {
        get size() { return this._width * this._depth; }
        get width() { return this._width; }
        get depth() { return this._depth; }
        get data() { return this._data; }
        get format() { return 'rgba'; }
        get itemSize() { return this._itemSize; }
        get itemHeightIndexOffset() { return this._itemHeightIndexOffset; }
        get maxHeight() { return this._maxHeight; }
        constructor(width, depth, maxHeight, buffer, itemSize = exports.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            super();
            this._width = 0;
            this._depth = 0;
            this._maxHeight = 0;
            this._init(width, depth, maxHeight, buffer, itemSize, itemHeightIndexOffset);
        }
        _init(width, depth, maxHeight, buffer, itemSize = exports.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            this._width = width;
            this._depth = depth;
            this._maxHeight = maxHeight;
            if (buffer) {
                if (itemSize < itemHeightIndexOffset) {
                    throw new Error("ItemSize can't less or eq ItemHeightIndexOffset");
                }
                if (buffer.length < (width * depth) * itemSize) {
                    throw new Error("Buffer has invalid length");
                }
                this._data = buffer;
                this._itemSize = itemSize;
                this._itemHeightIndexOffset = itemHeightIndexOffset;
            }
            else {
                // TODO: type checker
                this._data = new exports.HeightMapArrType(width * depth * exports.defaultHeightVertexSize);
                this._itemSize = exports.defaultHeightVertexSize;
                this._itemHeightIndexOffset = 0;
            }
        }
        _encodeHeightFactor(store, index, value) {
            store[index] = value;
        }
        _decodeHeightFactor(store, index) {
            return store[index];
        }
        _decodeHeight(store, index, max) {
            return this._decodeHeightFactor(store, index) * max;
        }
        _encodeAndSetHeightFactor(store, index, realHeight, max) {
            const normalize = Math.max(Math.min(realHeight, max), 0);
            const factor = normalize / max;
            this._encodeHeightFactor(store, index, factor);
            return this._decodeHeightFactor(store, index);
        }
        getIndex(x, z) {
            return (z * this._width + x) * this._itemSize + this._itemHeightIndexOffset;
        }
        getFactor(x, z) {
            const index = this.getIndex(x, z);
            return this._decodeHeightFactor(this._data, index);
        }
        get(x, z) {
            const index = this.getIndex(x, z);
            return this._decodeHeight(this._data, index, this._maxHeight);
        }
        set(x, z, value) {
            const index = this.getIndex(x, z);
            return this._encodeAndSetHeightFactor(this._data, index, value, this._maxHeight);
        }
        setMaxHeight(maxHeight) {
            this._maxHeight = maxHeight;
        }
        append(x, z, value) {
            const index = this.getIndex(x, z);
            const oldValue = this._decodeHeight(this._data, index, this._maxHeight);
            const canValue = oldValue + value;
            return this._encodeAndSetHeightFactor(this._data, index, canValue, this._maxHeight);
        }
        multiply(x, z, value, heightIfZero = 0) {
            const index = this.getIndex(x, z);
            const oldValue = this._decodeHeight(this._data, index, this._maxHeight) || heightIfZero;
            const canValue = oldValue * value;
            return this._encodeAndSetHeightFactor(this._data, index, canValue, this._maxHeight);
        }
    }
    exports.HeightMap = HeightMap;
    exports.default = HeightMap;
});
define("src/Core/AbsShatteredHeightMap", ["require", "exports", "src/Core/HeightMap"], function (require, exports, HeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsShatteredHeightMap = exports.minMaxGlobalSize = exports.minMaxStackSize = void 0;
    HeightMap_mjs_1 = __importStar(HeightMap_mjs_1);
    exports.minMaxStackSize = 2;
    exports.minMaxGlobalSize = 2 * exports.minMaxStackSize;
    class AbsShatteredHeightMap extends HeightMap_mjs_1.default {
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        constructor(width, depth, patchSize, maxHeight, buffer, itemSize = HeightMap_mjs_1.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            super(width, depth, maxHeight, buffer /** TS huck */, itemSize, itemHeightIndexOffset);
            this._setPatchSize(patchSize);
            this._clearMinMaxHeightCoords();
        }
        _setPatchSize(patchSize) {
            this._patchSize = patchSize;
            this._numPatchesX = ((this.width - 1) / (this._patchSize - 1)) | 0;
            this._numPatchesZ = ((this.depth - 1) / (this._patchSize - 1)) | 0;
            this._patchesSegmentSize = this._numPatchesX * this._numPatchesZ * exports.minMaxStackSize;
            this._minMaxHeightCoords = new Array(exports.minMaxGlobalSize + this._patchesSegmentSize * 2);
        }
        _clearMinMaxHeightCoords() {
            this._minMaxHeightCoords.fill(0);
        }
        getEntriesPatchMin(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMin(patchX, patchZ);
        }
        getEntriesPatchMax(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMax(patchX, patchZ);
        }
        getEntriesPatchMinFactor(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMinFactor(patchX, patchZ);
        }
        getEntriesPatchMaxFactor(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMaxFactor(patchX, patchZ);
        }
        getMin() {
            return this.get(this._minMaxHeightCoords[0], this._minMaxHeightCoords[1]);
        }
        getMax() {
            return this.get(this._minMaxHeightCoords[2], this._minMaxHeightCoords[3]);
        }
        getMinFactor() {
            return this.getFactor(this._minMaxHeightCoords[0], this._minMaxHeightCoords[1]);
        }
        getMaxFactor() {
            return this.getFactor(this._minMaxHeightCoords[2], this._minMaxHeightCoords[3]);
        }
        getPatchMin(patchBaseX, patchBaseZ) {
            const index = exports.minMaxGlobalSize + (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize;
            return this.get(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        getPatchMax(patchBaseX, patchBaseZ) {
            const index = exports.minMaxGlobalSize + (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize + this._patchesSegmentSize;
            return this.get(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        getPatchMinFactor(patchBaseX, patchBaseZ) {
            const index = exports.minMaxGlobalSize + (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize;
            return this.getFactor(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        getPatchMaxFactor(patchBaseX, patchBaseZ) {
            const index = exports.minMaxGlobalSize + (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize + this._patchesSegmentSize;
            return this.getFactor(this._minMaxHeightCoords[index], this._minMaxHeightCoords[index + 1]);
        }
        recalculateAABB() {
            this._minMaxHeightCoords[0] = 0;
            this._minMaxHeightCoords[1] = 0;
            this._minMaxHeightCoords[2] = 0;
            this._minMaxHeightCoords[3] = 0;
            let minFactor = Number.MAX_SAFE_INTEGER;
            let maxFactor = Number.MIN_SAFE_INTEGER;
            for (let patchZ = 0; patchZ < this._numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this._numPatchesX; patchX++) {
                    const minIndex = exports.minMaxGlobalSize + (patchZ * this._numPatchesX + patchX) * exports.minMaxStackSize;
                    const maxIndex = minIndex + this._patchesSegmentSize;
                    const patchMinFactor = this.getFactor(this._minMaxHeightCoords[minIndex], this._minMaxHeightCoords[minIndex + 1]);
                    const patchMaxfactor = this.getFactor(this._minMaxHeightCoords[maxIndex], this._minMaxHeightCoords[maxIndex + 1]);
                    if (minFactor > patchMinFactor) {
                        minFactor = patchMinFactor;
                        this._minMaxHeightCoords[0] = this._minMaxHeightCoords[minIndex];
                        this._minMaxHeightCoords[1] = this._minMaxHeightCoords[minIndex + 1];
                    }
                    if (maxFactor < patchMaxfactor) {
                        maxFactor = patchMaxfactor;
                        this._minMaxHeightCoords[2] = this._minMaxHeightCoords[maxIndex];
                        this._minMaxHeightCoords[3] = this._minMaxHeightCoords[maxIndex + 1];
                    }
                }
            }
        }
        recalculateMinMax(zone) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const fixedMinX = Math.max(zone.minX, 0);
            const fixedMinZ = Math.max(zone.minZ, 0);
            const fixedMaxX = Math.min(zone.maxX, this.width);
            const fixedMaxZ = Math.min(zone.maxZ, this.depth);
            let globalMinF = Number.MAX_SAFE_INTEGER;
            let globalMaxF = Number.MIN_SAFE_INTEGER;
            let globalMinX = 0;
            let globalMinZ = 0;
            let globalMaxX = 0;
            let globalMaxZ = 0;
            for (let z = fixedMinZ; z < fixedMaxZ; z += this._patchSize) {
                for (let x = fixedMinX; x < fixedMaxX; x += this._patchSize) {
                    const patchX = x / this._patchSize | 0;
                    const patchZ = z / this._patchSize | 0;
                    const patchI = patchZ * this._numPatchesX + patchX;
                    const minIndex = exports.minMaxGlobalSize + patchI * exports.minMaxStackSize;
                    const maxIndex = minIndex + this._patchesSegmentSize;
                    const firstPatchX = patchX * this._patchSize;
                    const firstPatchZ = patchZ * this._patchSize;
                    const lastPatchX = firstPatchX + this._patchSize;
                    const lastPatchZ = firstPatchZ + this._patchSize;
                    let minF = Number.MAX_SAFE_INTEGER;
                    let maxF = Number.MIN_SAFE_INTEGER;
                    let minX = firstPatchX;
                    let minZ = firstPatchZ;
                    let maxX = firstPatchX;
                    let maxZ = firstPatchZ;
                    for (let innerZ = firstPatchZ + 1; innerZ < lastPatchZ; innerZ++) {
                        for (let innerX = firstPatchX + 1; innerX < lastPatchX; innerX++) {
                            const factor = this.getFactor(innerX, innerZ);
                            if (minF > factor) {
                                minF = factor;
                                minX = innerX;
                                minZ = innerZ;
                            }
                            if (maxF < factor) {
                                maxF = factor;
                                maxX = innerX;
                                maxZ = innerZ;
                            }
                        }
                    }
                    if (globalMinF > minF) {
                        globalMinF = minF;
                        globalMinX = minX;
                        globalMinZ = minZ;
                    }
                    if (globalMaxF < maxF) {
                        globalMaxF = maxF;
                        globalMaxX = maxX;
                        globalMaxZ = maxZ;
                    }
                    this._minMaxHeightCoords[minIndex] = minX;
                    this._minMaxHeightCoords[minIndex + 1] = minZ;
                    this._minMaxHeightCoords[maxIndex] = maxX;
                    this._minMaxHeightCoords[maxIndex + 1] = maxZ;
                }
            }
            if (this.getMinFactor() > globalMinF) {
                this._minMaxHeightCoords[0] = globalMinX;
                this._minMaxHeightCoords[1] = globalMinZ;
            }
            if (this.getMaxFactor() < globalMaxF) {
                this._minMaxHeightCoords[2] = globalMaxX;
                this._minMaxHeightCoords[3] = globalMaxZ;
            }
        }
    }
    exports.AbsShatteredHeightMap = AbsShatteredHeightMap;
});
define("src/Core/AbsChunkedHeightMap", ["require", "exports", "src/Core/HeightMap", "src/Core/AbsShatteredHeightMap"], function (require, exports, HeightMap_mjs_2, AbsShatteredHeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsChunkedHeightMap = exports.minMaxStackSize = void 0;
    exports.getOrThrowDataChunkSize = getOrThrowDataChunkSize;
    exports.minMaxStackSize = 2;
    function getOrThrowDataChunkSize(patchSize, dataChunkSize) {
        if ((dataChunkSize - 1) % (patchSize - 1) !== 0) {
            const recommendedWidth = ((dataChunkSize - 1 + patchSize - 1) / (dataChunkSize - 1)) * (patchSize - 1) + 1;
            console.error("DataChunkSize minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", dataChunkSize, patchSize);
            console.error("Try using DataChunkSize = %d\n", recommendedWidth);
            throw new Error();
        }
        return dataChunkSize;
    }
    class AbsChunkedHeightMap extends AbsShatteredHeightMap_mjs_1.AbsShatteredHeightMap {
        get dataChunkSize() { return this._dataChunkSize; }
        get dataNumChunksX() { return this._dataNumChunksX; }
        get dataNumChunksZ() { return this._dataNumChunksZ; }
        get dataChunkSizeFactor() { return this._dataChunkSizeFactor; }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, buffer, itemSize = HeightMap_mjs_2.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            super(width, depth, patchSize, maxHeight, buffer /** TS huck */, itemSize, itemHeightIndexOffset);
            this._setDataChunkSize(dataChunkSize);
        }
        _setDataChunkSize(value) {
            this._dataChunkSize = getOrThrowDataChunkSize(this._patchSize, value);
            this._dataNumChunksX = ((this.width - 1) / (this._dataChunkSize - 1)) | 0;
            this._dataNumChunksZ = ((this.depth - 1) / (this._dataChunkSize - 1)) | 0;
            this._dataChunkSizeFactor = this._patchSize === this._dataChunkSize
                ? 1.0
                : this._patchSize / (this._dataChunkSize + this._patchSize - (this._dataChunkSize % this._patchSize));
        }
        getIndex(x, z) {
            const localX = x % this._dataChunkSize;
            const localZ = z % this._dataChunkSize;
            const chunkX = x / this._dataChunkSize | 0;
            const chunkZ = z / this._dataChunkSize | 0;
            const chunkOffset = (chunkZ * this._dataNumChunksX + chunkX) * (Math.pow(this._dataChunkSize, 2));
            const localIndex = (localZ * this._dataChunkSize + localX);
            return chunkOffset + localIndex;
        }
        getChunkIndex(chunkX, chunkZ) {
            return chunkZ * this._dataNumChunksX + chunkX;
        }
        getChunkBuffer(type, chunkX, chunkZ) {
            const size = Math.pow(this.dataChunkSize, 2);
            const chunkLevel = chunkZ * this.dataNumChunksX + chunkX;
            const chunkOffset = chunkLevel * size * this.data.BYTES_PER_ELEMENT;
            const count = size * (this.data.BYTES_PER_ELEMENT / type.BYTES_PER_ELEMENT);
            return new type(this.data.buffer, this.data.byteOffset + chunkOffset, count);
        }
        getChunksBuffers(type) {
            const result = new Array(this._dataNumChunksX * this._dataNumChunksZ);
            for (let chunkZ = 0; chunkZ < this._dataNumChunksZ; chunkZ++) {
                for (let chunkX = 0; chunkX < this._dataNumChunksX; chunkX++) {
                    const index = chunkZ * this._dataNumChunksX + chunkX;
                    result[index] = this.getChunkBuffer(type, chunkX, chunkZ);
                }
            }
            return result;
        }
    }
    exports.AbsChunkedHeightMap = AbsChunkedHeightMap;
    exports.default = AbsChunkedHeightMap;
});
define("src/Core/CompressedPatchedHeightMap", ["require", "exports", "src/Core/AbsChunkedHeightMap", "src/Core/HeightMap"], function (require, exports, AbsChunkedHeightMap_mjs_1, HeightMap_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CompressedPatchedHeightMap = void 0;
    AbsChunkedHeightMap_mjs_1 = __importStar(AbsChunkedHeightMap_mjs_1);
    class CompressedPatchedHeightMap extends AbsChunkedHeightMap_mjs_1.default {
        get compressAlgoritm() { return this._compressAlgoritm; }
        static createBuffer(width, depth, chunkSize, algoritm) {
            const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
            const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
            const chunkArrSize = Math.pow(chunkSize, 2);
            const chunkCount = numChunksX * numChunksZ;
            const patchXBatchingCount = algoritm === "x4" ? 4 : 2;
            if (numChunksX < patchXBatchingCount) {
                console.error("The chunkSize (%d) should be at least (%d) times smaller than the width (%d)\n", chunkSize, patchXBatchingCount, width);
                throw new Error();
            }
            return (algoritm === "x2"
                ? new Uint16Array(chunkArrSize * chunkCount)
                : new Uint8Array(chunkArrSize * chunkCount));
        }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, algoritm, buffer, itemSize = HeightMap_mjs_3.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            const validDataChunkSize = (0, AbsChunkedHeightMap_mjs_1.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
            const tmpBuffer = buffer !== null && buffer !== void 0 ? buffer : CompressedPatchedHeightMap.createBuffer(width, depth, validDataChunkSize, algoritm);
            super(width, depth, patchSize, dataChunkSize, maxHeight, tmpBuffer, itemSize, itemHeightIndexOffset);
            this._compressAlgoritm = algoritm;
            this._patchXBatchSize = algoritm === "x4" ? 4 : 2;
            this._maxSafeFactor = algoritm === "x4" ? 0xff : 0xffff;
        }
        getChunkIndex(chunkX, chunkZ) {
            return (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
        }
        getChunkBuffer(type, chunkX, chunkZ) {
            const size = Math.pow(this.dataChunkSize, 2);
            const chunkLevel = (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
            const chunkOffset = chunkLevel * size * this.data.BYTES_PER_ELEMENT * this._patchXBatchSize;
            const count = size * this._patchXBatchSize * (this.data.BYTES_PER_ELEMENT / type.BYTES_PER_ELEMENT);
            return new type(this.data.buffer, this.data.byteOffset + chunkOffset, count);
        }
        getChunksBuffers(type) {
            const result = new Array((this.dataNumChunksX / this._patchXBatchSize) * this.dataNumChunksZ);
            for (let chunkZ = 0; chunkZ < this.dataNumChunksZ; chunkZ++) {
                for (let chunkX = 0; chunkX < this.dataNumChunksX; chunkX += this._patchXBatchSize) {
                    const index = (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
                    result[index] = this.getChunkBuffer(type, chunkX, chunkZ);
                }
            }
            return result;
        }
        _encodeHeightFactor(store, index, value) {
            store[index] = Math.min(value * this._maxSafeFactor, this._maxSafeFactor);
        }
        _decodeHeightFactor(store, index) {
            return store[index] / this._maxSafeFactor;
        }
        getIndex(x, z) {
            const localX = x % this.dataChunkSize;
            const localZ = z % this.dataChunkSize;
            const chunkX = x / this.dataChunkSize | 0;
            const chunkZ = z / this.dataChunkSize | 0;
            const chunkLevel = (chunkZ * this.dataNumChunksX + chunkX) / this._patchXBatchSize | 0;
            const chunkOffset = chunkLevel * (Math.pow(this.dataChunkSize, 2));
            const localIndex = localZ * this.dataChunkSize + localX;
            const numCompress = chunkX % this._patchXBatchSize; // compress by x axis
            return (chunkOffset + localIndex) * this._patchXBatchSize + numCompress;
        }
    }
    exports.CompressedPatchedHeightMap = CompressedPatchedHeightMap;
    exports.default = CompressedPatchedHeightMap;
});
define("src/AmmoIntegration/AmmoIntegration", ["require", "exports", "src/Core/AbsChunkedHeightMap"], function (require, exports, AbsChunkedHeightMap_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getBuffer = getBuffer;
    function getBuffer(width, depth, patchSize, dataChunkSize, compressAlgoritm) {
        if (typeof Ammo === 'undefined') {
            console.error("Ammo not exists");
            throw new Error();
        }
        const chunkSize = (0, AbsChunkedHeightMap_mjs_2.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
        const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
        const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
        const chunkArrSize = Math.pow(chunkSize, 2);
        const chunkCount = numChunksX * numChunksZ;
        if (compressAlgoritm !== "none") {
            const patchXBatchingCount = compressAlgoritm === "x4" ? 4 : 2;
            if (numChunksX < patchXBatchingCount) {
                console.error("The chunkSize (%d) should be at least (%d) times smaller than the width (%d)\n", chunkSize, patchXBatchingCount, width);
                throw new Error();
            }
        }
        const bsz = compressAlgoritm === "x2" ? 2 :
            compressAlgoritm === "x4" ? 1 :
                4; // float32
        const len = chunkArrSize * chunkCount;
        const ptr = Ammo._malloc(bsz * len);
        switch (compressAlgoritm) {
            case "x4": return new Uint8Array(Ammo.HEAPU8.buffer, ptr, len);
            case "x2": return new Uint16Array(Ammo.HEAPU16.buffer, ptr, len);
            default: return new Float32Array(Ammo.HEAPF32.buffer, ptr, len);
        }
    }
});
define("src/Core/CoordsBuffer", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CoordsBuffer = exports.coordsVertexSize = void 0;
    exports.coordsVertexSize = 2;
    class CoordsBuffer {
        get patchVertexBufferLength() { return this._length; }
        get patchVertexBufferData() { return this._data; }
        get patchVertexBufferTyped() { return this._dataTyped; }
        get width() { return this._width; }
        get depth() { return this._depth; }
        get patchSize() { return this._patchSize; }
        constructor(heightMap, patchSize) {
            this.heightMap = heightMap;
            this._patchSize = patchSize;
            this._width = heightMap.width;
            this._depth = heightMap.depth;
            this._length = this._patchSize * this._patchSize;
            const coordsArrLength = this._length * exports.coordsVertexSize;
            const coordsByteLength = coordsArrLength * Uint16Array.BYTES_PER_ELEMENT;
            this._data = new ArrayBuffer(coordsByteLength);
            this._dataTyped = new Uint16Array(this._data, 0, coordsArrLength);
        }
        init() {
            let index = 0;
            for (let z = 0; z < this._patchSize; z++) {
                for (let x = 0; x < this._patchSize; x++) {
                    this._dataTyped[index++] = x;
                    this._dataTyped[index++] = z;
                }
            }
        }
        getPosition(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.y = this.heightMap.get(x, z);
            buf.z = z;
            return true;
        }
        getPositionWithHeightByFactor(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.y = this.heightMap.getFactor(x, z);
            buf.z = z;
            return true;
        }
        getCoords(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.z = z;
            return true;
        }
    }
    exports.CoordsBuffer = CoordsBuffer;
    exports.default = CoordsBuffer;
});
define("src/Core/LodInfo", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.LodInfo = exports.BOTTOM = exports.TOP = exports.RIGHT = exports.LEFT = void 0;
    exports.initInfo = initInfo;
    exports.LEFT = 2;
    exports.RIGHT = 2;
    exports.TOP = 2;
    exports.BOTTOM = 2;
    function initInfo() {
        const arr = new Array(exports.LEFT);
        for (let l = 0; l < exports.LEFT; l++) {
            arr[l] = new Array(exports.RIGHT);
            for (let r = 0; r < exports.RIGHT; r++) {
                arr[l][r] = new Array(exports.TOP);
                for (let t = 0; t < exports.TOP; t++) {
                    arr[l][r][t] = new Array(exports.BOTTOM);
                    for (let b = 0; b < exports.BOTTOM; b++) {
                        arr[l][r][t][b] = {
                            start: 0,
                            count: 0
                        };
                    }
                }
            }
        }
        return arr;
    }
    class LodInfo {
        constructor() {
            this.info = initInfo();
        }
        clear() {
            for (let l = 0; l < exports.LEFT; l++) {
                for (let r = 0; r < exports.RIGHT; r++) {
                    for (let t = 0; t < exports.TOP; t++) {
                        for (let b = 0; b < exports.BOTTOM; b++) {
                            const single = this.info[l][r][t][b];
                            single.start = 0;
                            single.count = 0;
                        }
                    }
                }
            }
        }
    }
    exports.LodInfo = LodInfo;
    exports.default = LodInfo;
});
define("src/Core/IPatchLod", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Core/LodEstimator", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getLodId = getLodId;
    exports.getLodInfoId = getLodInfoId;
    exports.decodeLodId = decodeLodId;
    function getLodId(c, l, r, t, b) {
        const lodCore = c + 1;
        const lodBinaryValue = (l << 3) | (r << 2) | (t << 1) | b;
        return lodCore * 16 - lodBinaryValue;
    }
    function getLodInfoId(lod) {
        return getLodId(lod.core, lod.left, lod.right, lod.top, lod.bottom);
    }
    function decodeLodId(id) {
        const cAdjusted = Math.floor(id / 16);
        const binaryPart = id % 16;
        const left = (binaryPart >> 3) & 1;
        const right = (binaryPart >> 2) & 1;
        const top = (binaryPart >> 1) & 1;
        const bottom = binaryPart & 1;
        const core = cAdjusted - 1;
        return { core, left, right, top, bottom };
    }
    class LodEstimator {
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        get count() { return this._lodCount; }
        get max() { return this._lodCount - 1; }
        constructor(patchSize, numPatchesX, numPatchesZ) {
            this.setParams(patchSize, numPatchesX, numPatchesZ);
        }
        setParams(patchSize, numPatchesX, numPatchesZ) {
            this._patchSize = patchSize;
            this._numPatchesX = numPatchesX;
            this._numPatchesZ = numPatchesZ;
            this._calcMaxLOD();
        }
        _calcMaxLOD() {
            const numSegments = this._patchSize - 1;
            const numSegmentsLog2 = Math.log2(numSegments);
            const numSegmentsLog2Ceil = Math.ceil(numSegmentsLog2);
            const numSegmentsLog2Floor = Math.floor(numSegmentsLog2);
            if (numSegmentsLog2Ceil !== numSegmentsLog2Floor) {
                throw new Error("The number of vertices in the patch minus one must be a power of two\n");
            }
            this._lodCount = numSegmentsLog2Floor;
        }
    }
    exports.default = LodEstimator;
});
define("src/Core/GridBuilder", ["require", "exports", "src/Core/LodInfo", "src/Core/LodEstimator"], function (require, exports, LodInfo_mjs_1, LodEstimator_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GridBuilder = void 0;
    LodEstimator_mjs_1 = __importDefault(LodEstimator_mjs_1);
    class GridBuilder {
        get width() { return this._width; }
        get depth() { return this._depth; }
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        get maxLOD() { return this.lodEstimator.max; }
        get lodCount() { return this.lodEstimator.count; }
        get patchIndices() { return this._indices; }
        get lodEstimator() { return this._lodEstimator; }
        get lodInfo() { return this._lodInfo; }
        constructor(grid) {
            this._width = grid.width;
            this._depth = grid.depth;
            this._patchSize = grid.patchSize;
            this._numPatchesX = ((this._width - 1) / (this._patchSize - 1)) | 0;
            this._numPatchesZ = ((this._depth - 1) / (this._patchSize - 1)) | 0;
            if (this._width >= 0xffff) {
                console.error("Max width = %d\n", 0xffff - 1);
                throw new Error();
            }
            if (this._depth >= 0xffff) {
                console.error("Max depth = %d\n", 0xffff - 1);
                throw new Error();
            }
            if ((this._width - 1) % (this._patchSize - 1) !== 0) {
                const recommendedWidth = ((this._width - 1 + this._patchSize - 1) / (this._patchSize - 1)) * (this._patchSize - 1) + 1;
                console.error("Width minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", this._width, this._patchSize);
                console.error("Try using Width = %d\n", recommendedWidth);
                throw new Error();
            }
            if ((this._depth - 1) % (this._patchSize - 1) !== 0) {
                const recommendedDepth = ((this._depth - 1 + this._patchSize - 1) / (this._patchSize - 1)) * (this._patchSize - 1) + 1;
                console.error("Depth minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", this._depth, this._patchSize);
                console.error("Try using Width = %d\n", recommendedDepth);
                throw new Error();
            }
            if (this._patchSize < 3) {
                console.error("The minimum patch size is 3 (%d)\n", this._patchSize);
                throw new Error();
            }
            if (this._patchSize % 2 === 0) {
                console.error("Patch size must be an odd number (%d)\n", this._patchSize);
                throw new Error();
            }
            this._buildLodsAndIndices();
        }
        _buildLodsAndIndices() {
            this._lodEstimator = new LodEstimator_mjs_1.default(this._patchSize, this._numPatchesX, this._numPatchesZ);
            this._lodInfo = new Array(this._lodEstimator.count);
            for (let i = 0; i < this._lodInfo.length; i++) {
                this._lodInfo[i] = new LodInfo_mjs_1.LodInfo();
            }
            let numIndices = this._calcNumIndices();
            this._indices = new Uint32Array(numIndices);
            numIndices = this._initIndices(this._indices);
            //console.log("Final number of indices %d\n", numIndices);
        }
        _calcNumIndices() {
            let numQuads = Math.pow((this.patchSize - 1), 2);
            let numIndices = 0;
            const maxPermutationsPerLevel = 16; // true/false for each of the four sides
            const indicesPerQuad = 6; // two triangles
            for (let lod = 0; lod < this.lodCount; lod++) {
                //console.log("LOD %d: num quads %d\n", lod, numQuads);
                numIndices += numQuads * indicesPerQuad * maxPermutationsPerLevel;
                numQuads /= 4;
            }
            //console.log("Initial number of indices %d\n", numIndices);
            return numIndices;
        }
        _initIndices(indices) {
            let index = 0;
            for (let lod = 0; lod < this.lodCount; lod++) {
                //console.log("*** Init indices lod %d ***\n", lod);
                index = this._initIndicesLOD(index, indices, lod);
            }
            return index;
        }
        _initIndicesLOD(index, indices, lod) {
            let totalIndicesForLOD = 0;
            for (let l = 0; l < LodInfo_mjs_1.LEFT; l++) {
                for (let r = 0; r < LodInfo_mjs_1.RIGHT; r++) {
                    for (let t = 0; t < LodInfo_mjs_1.TOP; t++) {
                        for (let b = 0; b < LodInfo_mjs_1.BOTTOM; b++) {
                            const info = this._lodInfo[lod].info[l][r][t][b];
                            const start = index;
                            index = this._initIndicesLODSingle(index, indices, lod, lod + l, lod + r, lod + t, lod + b);
                            info.start = start;
                            info.count = index - start;
                            totalIndicesForLOD += info.count;
                        }
                    }
                }
            }
            //console.log("Total indices for LOD: %d\n", totalIndicesForLOD);
            return index;
        }
        _initIndicesLODSingle(index, indices, lodCore, lodLeft, lodRight, lodTop, lodBottom) {
            const width = this.patchSize;
            const fanStep = Math.pow(2, lodCore + 1); // lod = 0 --> 2, lod = 1 --> 4, lod = 2 --> 8, etc
            const endPos = this.patchSize - 1 - fanStep; // patch size 5, fan step 2 --> EndPos = 2; patch size 9, fan step 2 --> EndPos = 6
            for (let z = 0; z <= endPos; z += fanStep) {
                for (let x = 0; x <= endPos; x += fanStep) {
                    const lLeft = x == 0 ? lodLeft : lodCore;
                    const lRight = x == endPos ? lodRight : lodCore;
                    const lBottom = z == 0 ? lodBottom : lodCore;
                    const lTop = z == endPos ? lodTop : lodCore;
                    index = this._createTriangleFan(index, indices, lodCore, lLeft, lRight, lTop, lBottom, x, z, width);
                }
            }
            return index;
        }
        _createTriangleFan(index, indices, lodCore, lodLeft, lodRight, lodTop, lodBottom, x, z, width) {
            const stepLeft = Math.pow(2, lodLeft); // because LOD starts at zero...
            const stepRight = Math.pow(2, lodRight);
            const stepTop = Math.pow(2, lodTop);
            const stepBottom = Math.pow(2, lodBottom);
            const stepCenter = Math.pow(2, lodCore);
            const indexCenter = (z + stepCenter) * width + x + stepCenter;
            // first up
            let indexTemp1 = z * width + x;
            let indexTemp2 = (z + stepLeft) * width + x;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second up
            if (lodLeft == lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 += stepLeft * width;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first right
            indexTemp1 = indexTemp2;
            indexTemp2 += stepTop;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second right
            if (lodTop === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 += stepTop;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first down
            indexTemp1 = indexTemp2;
            indexTemp2 -= stepRight * width;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second down
            if (lodRight === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 -= stepRight * width;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first left
            indexTemp1 = indexTemp2;
            indexTemp2 -= stepBottom;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second left
            if (lodBottom === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 -= stepBottom;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            return index;
        }
        _addTriangle(index, indices, v1, v2, v3) {
            indices[index++] = v1;
            indices[index++] = v2;
            indices[index++] = v3;
            return index;
        }
    }
    exports.GridBuilder = GridBuilder;
    exports.default = GridBuilder;
});
define("src/Core/Heightfield", ["require", "exports", "src/Core/CoordsBuffer", "src/Core/GridBuilder"], function (require, exports, CoordsBuffer_mjs_1, GridBuilder_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    CoordsBuffer_mjs_1 = __importDefault(CoordsBuffer_mjs_1);
    GridBuilder_mjs_1 = __importDefault(GridBuilder_mjs_1);
    class Heightfield extends GridBuilder_mjs_1.default {
        get patchVertices() { return this._vertices; }
        get heightMap() { return this._heightMap; }
        get maxHeight() { return this.heightMap.maxHeight; }
        constructor(heightMap) {
            super(heightMap);
            this._heightMap = heightMap;
            this._vertices = new CoordsBuffer_mjs_1.default(this._heightMap, this._heightMap.patchSize);
            this._vertices.init();
        }
        setHeight(x, z, value) {
            this._heightMap.set(x, z, value);
        }
        appendToHeight(x, z, value) {
            this._heightMap.append(x, z, value);
        }
        multiplyToHeight(x, z, value, defaultHeight = 0) {
            this._heightMap.multiply(x, z, value, defaultHeight);
        }
        smoothHeightsZone(zone, np, radius) {
            this._heightMap.smoothZone(zone, np, radius);
        }
        loadHeightMapFromFile(buffer_1, options_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, options, np = -1, radius = 0) {
                const header = yield this._heightMap.fromFile(buffer, options);
                this._heightMap.smooth(np, radius);
                this._heightMap.recalculateMinMax(this._heightMap);
                this._heightMap.recalculateAABB();
                return header;
            });
        }
        loadHeightMapFromImg(img, np = -1, radius = 0) {
            this._heightMap.fromImage(img);
            this._heightMap.smooth(np, radius);
            this._heightMap.recalculateMinMax(this._heightMap);
            this._heightMap.recalculateAABB();
        }
        normalizeHeightMap(maxHeight) {
            maxHeight !== null && maxHeight !== void 0 ? maxHeight : (maxHeight = this._heightMap.maxHeight);
            this._heightMap.normalize(maxHeight);
        }
        setMaxHeight(maxHeight) {
            this._heightMap.setMaxHeight(maxHeight);
        }
        appendHeightMap(heightMap, value, zone, minHeight = null, maxHeight = null) {
            this._heightMap.combineHeights('+', heightMap, value, zone, 0, minHeight, maxHeight);
        }
        recalculateMinMax(zone, aabb = true) {
            this._heightMap.recalculateMinMax(zone);
            if (aabb) {
                this._heightMap.recalculateAABB();
            }
        }
    }
    exports.default = Heightfield;
});
// Our system is divided into a general part and an engine part,
// for optimization we use the engine part in this file. (playcanvas Vec3)
define("src/Core/HeightfieldRaycastResult", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class HeightfieldRaycastResult {
        constructor() {
            this.vertexIndex = 0;
            this.distance = Number.MAX_VALUE;
            this.localNormal = new pc.Vec3(0, 1, 0);
            this.normal = new pc.Vec3(0, 1, 0);
            this.localPoint = new pc.Vec3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            this.point = new pc.Vec3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
        }
        clear() {
            this.vertexIndex = 0;
            this.distance = Number.MAX_VALUE;
            this.localNormal.set(0, 1, 0);
            this.normal.set(0, 1, 0);
            this.localPoint.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            this.point.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
        }
    }
    exports.default = HeightfieldRaycastResult;
});
define("src/Core/Triangle", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Triangle = void 0;
    const tmpTriVecA = new pc.Vec3();
    const tmpTriVecB = new pc.Vec3();
    class Triangle extends pc.Tri {
        getNormal(rsh) {
            tmpTriVecA.sub2(this.v1, this.v0);
            tmpTriVecB.sub2(this.v2, this.v0);
            rsh.cross(tmpTriVecA, tmpTriVecB).normalize();
        }
    }
    exports.Triangle = Triangle;
    exports.default = Triangle;
});
define("src/Core/HeightfieldShape", ["require", "exports", "src/Core/HeightfieldRaycastResult", "src/Core/Triangle"], function (require, exports, HeightfieldRaycastResult_mjs_1, Triangle_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.intersectsRayBox = intersectsRayBox;
    HeightfieldRaycastResult_mjs_1 = __importDefault(HeightfieldRaycastResult_mjs_1);
    Triangle_mjs_1 = __importDefault(Triangle_mjs_1);
    const infinite = 9999999;
    const modelTransform = new pc.Mat4();
    const tmpRay = new pc.Ray();
    const tmpRaycastVec = new pc.Vec3();
    const tmpPos1 = new pc.Vec3();
    const tmpPos2 = new pc.Vec3();
    const tmpPos3 = new pc.Vec3();
    const triangle = new Triangle_mjs_1.default();
    const debugTmpVec = new pc.Vec3();
    const debugTransform = new pc.Mat4();
    const debugPositions = new Array(16);
    let debugTransformIsIdentity = true;
    function debugDrawTriangleLines(tri, color = pc.Color.YELLOW) {
        var _a;
        /*
        [
            tri.v0.x, tri.v0.y, tri.v0.z, tri.v1.x, tri.v1.y, tri.v1.z,
            tri.v1.x, tri.v1.y, tri.v1.z, tri.v2.x, tri.v2.y, tri.v2.z,
            tri.v2.x, tri.v2.y, tri.v2.z, tri.v0.x, tri.v0.y, tri.v0.z,
        ], color, false);
        ]
        */
        debugTransform.transformPoint(tri.v0, debugTmpVec);
        debugPositions[0] = debugPositions[15] = debugTmpVec.x;
        debugPositions[1] = debugPositions[16] = debugTmpVec.y;
        debugPositions[2] = debugPositions[17] = debugTmpVec.z;
        debugTransform.transformPoint(tri.v1, debugTmpVec);
        debugPositions[3] = debugPositions[6] = debugTmpVec.x;
        debugPositions[4] = debugPositions[7] = debugTmpVec.y;
        debugPositions[5] = debugPositions[8] = debugTmpVec.z;
        debugTransform.transformPoint(tri.v2, debugTmpVec);
        debugPositions[9] = debugPositions[12] = debugTmpVec.x;
        debugPositions[10] = debugPositions[13] = debugTmpVec.y;
        debugPositions[11] = debugPositions[14] = debugTmpVec.z;
        (_a = pc.app) === null || _a === void 0 ? void 0 : _a.drawLineArrays(debugPositions, color, false);
    }
    function intersectsRayBox(aabb, ray) {
        const rayOrigin = ray.origin;
        const rayDirection = ray.direction;
        const minX = aabb.minX;
        const maxX = aabb.maxX;
        const minY = aabb.minY;
        const maxY = aabb.maxY;
        const minZ = aabb.minZ;
        const maxZ = aabb.maxZ;
        let tmin = (minX - rayOrigin.x) / rayDirection.x;
        let tmax = (maxX - rayOrigin.x) / rayDirection.x;
        if (tmin > tmax) {
            let temp = tmin;
            tmin = tmax;
            tmax = temp;
        }
        let tymin = (minY - rayOrigin.y) / rayDirection.y;
        let tymax = (maxY - rayOrigin.y) / rayDirection.y;
        if (tymin > tymax) {
            let temp = tymin;
            tymin = tymax;
            tymax = temp;
        }
        if ((tmin > tymax) || (tymin > tmax)) {
            return false;
        }
        if (tymin > tmin) {
            tmin = tymin;
        }
        if (tymax < tmax) {
            tmax = tymax;
        }
        let tzmin = (minZ - rayOrigin.z) / rayDirection.z;
        let tzmax = (maxZ - rayOrigin.z) / rayDirection.z;
        if (tzmin > tzmax) {
            let temp = tzmin;
            tzmin = tzmax;
            tzmax = temp;
        }
        if ((tmin > tzmax) || (tzmin > tmax)) {
            return false;
        }
        return true;
    }
    class HeightfieldShape {
        constructor(heightMap) {
            this._heightMap = heightMap;
            this._beginPos = new pc.Vec3();
            this._endPos = new pc.Vec3();
            this.updateBoundingBox();
        }
        updateBoundingBox() {
            const halfWidth = this._heightMap.width / 2;
            const halfDepth = this._heightMap.depth / 2;
            this._boundingBox = {
                minX: -halfWidth,
                minY: 0,
                minZ: -halfDepth,
                maxX: halfWidth,
                maxY: this._heightMap.maxHeight,
                maxZ: halfDepth,
            };
        }
        _triangleIntersectsRay(tri, ray, bestResult) {
            if (tri.intersectsRay(ray, tmpRaycastVec)) {
                const distance = tmpRaycastVec.distance(ray.origin);
                if (bestResult.distance > distance) {
                    bestResult.distance = distance;
                    tri.getNormal(bestResult.localNormal);
                    bestResult.normal.copy(bestResult.localNormal);
                    bestResult.localPoint.copy(tmpRaycastVec);
                    bestResult.point.copy(tmpRaycastVec);
                    debugDrawTriangleLines(tri, pc.Color.RED);
                    const distanceP0 = bestResult.point.distance(tri.v0);
                    const distanceP1 = bestResult.point.distance(tri.v1);
                    const distanceP2 = bestResult.point.distance(tri.v2);
                    if (distanceP0 > distanceP1) {
                        if (distanceP1 > distanceP2) {
                            bestResult.vertexIndex = tri.index2;
                        }
                        else {
                            bestResult.vertexIndex = tri.index1;
                        }
                    }
                    else {
                        if (distanceP0 > distanceP2) {
                            bestResult.vertexIndex = tri.index2;
                        }
                        else {
                            bestResult.vertexIndex = tri.index0;
                        }
                    }
                    return true;
                }
            }
            //debugDrawTriangleLines(tri);
            return false;
        }
        _assignPosition(index, buf) {
            const x = index % this._heightMap.width | 0;
            const z = index / this._heightMap.width | 0;
            buf.x = (-this._heightMap.width / 2) + x;
            buf.y = this._heightMap.get(x, z);
            buf.z = (-this._heightMap.depth / 2) + z;
        }
        _quadAction(rs, ray, result) {
            const x = rs.prevX;
            const z = rs.prevZ;
            if (x < 0 || z < 0 || x >= this._heightMap.width - 1 || z >= this._heightMap.depth - 1) {
                return false;
            }
            const xFan2 = x % 2 === 0;
            const zFan2 = z % 2 === 0;
            let index0, index1, index2;
            {
                if (xFan2 !== zFan2) {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 0) * this._heightMap.width + (x + 1);
                }
                else {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 1);
                    index2 = (z + 0) * this._heightMap.width + (x + 1);
                }
                this._assignPosition(index0, tmpPos1);
                this._assignPosition(index1, tmpPos2);
                this._assignPosition(index2, tmpPos3);
                triangle.index0 = index0;
                triangle.index1 = index1;
                triangle.index2 = index2;
                triangle.set(tmpPos1, tmpPos2, tmpPos3);
            }
            if (this._triangleIntersectsRay(triangle, ray, result)) {
                return true;
            }
            {
                if (xFan2 !== zFan2) {
                    index0 = (z + 0) * this._heightMap.width + (x + 1);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 1) * this._heightMap.width + (x + 1);
                }
                else {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 1) * this._heightMap.width + (x + 1);
                }
                this._assignPosition(index0, tmpPos1);
                this._assignPosition(index1, tmpPos2);
                this._assignPosition(index2, tmpPos3);
                triangle.index0 = index0;
                triangle.index1 = index1;
                triangle.index2 = index2;
                triangle.set(tmpPos1, tmpPos2, tmpPos3);
            }
            if (this._triangleIntersectsRay(triangle, ray, result)) {
                return true;
            }
            return false;
        }
        _intersectsRay(localRay, result = new HeightfieldRaycastResult_mjs_1.default()) {
            if (!intersectsRayBox(this._boundingBox, localRay)) {
                return false;
            }
            this._beginPos.copy(localRay.origin);
            this._beginPos.x += this._boundingBox.maxX;
            this._beginPos.z += this._boundingBox.maxZ;
            this._endPos.copy(localRay.direction).add(this._beginPos);
            let rayDirectionFlatX = this._endPos.x - this._beginPos.x;
            let rayDirectionFlatZ = this._endPos.z - this._beginPos.z;
            const maxDistanceFlat = Math.sqrt(Math.pow(rayDirectionFlatX, 2) + Math.pow(rayDirectionFlatZ, 2));
            if (maxDistanceFlat < 0.0001) {
                // Consider the ray vertical
                rayDirectionFlatX = 0;
                rayDirectionFlatZ = 0;
            }
            else {
                rayDirectionFlatX /= maxDistanceFlat;
                rayDirectionFlatZ /= maxDistanceFlat;
            }
            const xiStep = rayDirectionFlatX > 0 ? 1 : rayDirectionFlatX < 0 ? -1 : 0;
            const ziStep = rayDirectionFlatZ > 0 ? 1 : rayDirectionFlatZ < 0 ? -1 : 0;
            const paramDeltaX = xiStep !== 0 ? 1 / Math.abs(rayDirectionFlatX) : infinite;
            const paramDeltaZ = ziStep !== 0 ? 1 / Math.abs(rayDirectionFlatZ) : infinite;
            let paramCrossX;
            let paramCrossZ;
            if (xiStep !== 0) {
                paramCrossX = xiStep === 1
                    ? (Math.ceil(this._beginPos.x) - this._beginPos.x) * paramDeltaX
                    : (this._beginPos.x - Math.floor(this._beginPos.x)) * paramDeltaX;
            }
            else {
                paramCrossX = infinite; // Will never cross on X
            }
            if (ziStep !== 0) {
                paramCrossZ = ziStep === 1
                    ? (Math.ceil(this._beginPos.z) - this._beginPos.z) * paramDeltaZ
                    : (this._beginPos.z - Math.floor(this._beginPos.z)) * paramDeltaZ;
            }
            else {
                paramCrossZ = infinite; // Will never cross on Z
            }
            const rs = {
                x: this._beginPos.x | 0,
                z: this._beginPos.z | 0,
                param: 0,
                prevX: 0,
                prevZ: 0,
                prevParam: 0,
                maxDistanceFlat: maxDistanceFlat,
            };
            // Workaround cases where the ray starts at an integer position
            if (paramCrossX === 0.0) {
                paramCrossX += paramDeltaX;
                // If going backwards, we should ignore the position we would get by the above flooring,
                // because the ray is not heading in that direction
                if (xiStep === -1) {
                    rs.x -= 1;
                }
            }
            if (paramCrossZ === 0.0) {
                paramCrossZ += paramDeltaZ;
                if (ziStep === -1)
                    rs.z -= 1;
            }
            let hasHit = false;
            while (!hasHit) {
                rs.prevX = rs.x;
                rs.prevZ = rs.z;
                rs.prevParam = rs.param;
                if (paramCrossX < paramCrossZ) {
                    // X lane
                    rs.x += xiStep;
                    // Assign before advancing the param,
                    // to be in sync with the initialization step
                    rs.param = paramCrossX;
                    paramCrossX += paramDeltaX;
                }
                else {
                    // Z lane
                    rs.z += ziStep;
                    rs.param = paramCrossZ;
                    paramCrossZ += paramDeltaZ;
                }
                if (this._quadAction(rs, localRay, result)) {
                    hasHit = true;
                }
                if (rs.param > rs.maxDistanceFlat) {
                    rs.param = rs.maxDistanceFlat;
                    break;
                }
            }
            return hasHit;
        }
        intersectsRay(worldTranform, ray, result = new HeightfieldRaycastResult_mjs_1.default()) {
            if (worldTranform) {
                modelTransform.copy(worldTranform).invert();
                modelTransform.transformPoint(ray.origin, tmpRay.origin);
                modelTransform.transformVector(ray.direction, tmpRay.direction);
                debugTransform.copy(worldTranform);
                debugTransformIsIdentity = false;
            }
            else if (!debugTransformIsIdentity) {
                debugTransform.setIdentity();
                debugTransformIsIdentity = true;
            }
            const hit = this._intersectsRay(worldTranform ? tmpRay : ray, result);
            if (hit && worldTranform) {
                // update world point and normal, but save local
                worldTranform.transformPoint(result.point, result.point);
                worldTranform.transformVector(result.normal, result.normal);
            }
            return !!hit;
        }
    }
    exports.default = HeightfieldShape;
});
define("src/Core/IPatch", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Core/IPatchInstancing", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Extras/Utils", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.checkSupportR32FTexture = exports.littleEndian = exports.setPrecision = void 0;
    exports.getText = getText;
    exports.clamp = clamp;
    exports.randomFloat = randomFloat;
    exports.randomFloatRange = randomFloatRange;
    exports.calcNextPowerOfTwo = calcNextPowerOfTwo;
    exports.nrand = nrand;
    function getText(val, minWidth, prefix) {
        const str = val.toString();
        const strLen = str.length;
        const appendCount = minWidth - strLen;
        let result = str;
        for (let i = 0; i < appendCount; i++) {
            result = prefix + result;
        }
        return result;
    }
    function clamp(value, min, max) {
        return Math.max(min, Math.min(max, value));
    }
    function randomFloat() {
        return Math.random();
    }
    function randomFloatRange(start, end) {
        if (end == start) {
            throw new Error("Invalid random range");
        }
        const delta = end - start;
        const randomValue = randomFloat() * delta + start;
        return randomValue;
    }
    function calcNextPowerOfTwo(x) {
        let ret = 1;
        if (x == 1) {
            return 2;
        }
        while (ret < x) {
            ret = ret * 2;
        }
        return ret;
    }
    /** A random number from -1.0 to 1.0 */
    function nrand() {
        return Math.random() * 2.0 - 1.0;
    }
    const setPrecision = (graphicsDevice, shaderCode) => {
        return "precision " + graphicsDevice.precision + " float;\n" + shaderCode;
    };
    exports.setPrecision = setPrecision;
    exports.littleEndian = (() => {
        const uint8Array = new Uint8Array([0xAA, 0xBB]);
        const uint16array = new Uint16Array(uint8Array.buffer);
        return uint16array[0] === 0xBBAA;
    })();
    const checkSupportR32FTexture = (graphicsDevice) => {
        try {
            // TODO: need more test...
            // TODO: on iphone not work r32f textures
            if (navigator.platform.match(/iPhone|iPod|iPad/) !== null ||
                navigator.platform.startsWith("Mac") && navigator.maxTouchPoints > 4) {
                return false;
            }
            if (graphicsDevice.isWebGL2) {
                const gl = graphicsDevice.gl;
                let result = gl.getExtension("EXT_color_buffer_float");
                if (result) {
                    result = gl.getExtension("OES_texture_float");
                }
                if (!!result) {
                    return false;
                }
            }
            return true;
        }
        catch (ex) {
            return false;
        }
    };
    exports.checkSupportR32FTexture = checkSupportR32FTexture;
});
define("src/Extras/Store2D", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ObjStore2D = exports.AbsStore2D = void 0;
    class AbsStore2D {
        constructor() {
            this._cols = 0;
            this._rows = 0;
        }
        init(cols, rows) {
            this._cols = cols;
            this._rows = rows;
            const size = cols * rows;
            this._p = this._initArrayType(size);
        }
        initByVal(cols, rows, val) {
            this.init(cols, rows);
            const size = cols * rows;
            const valIsFunc = typeof val === 'function';
            for (let i = 0; i < size; i++) {
                this._p[i] = valIsFunc ? val() : val;
            }
        }
        initByStore(cols, rows, val) {
            this._cols = cols;
            this._rows = rows;
            this._p = val;
        }
        addr() {
            return this._p;
        }
        size() {
            return this._rows * this._cols;
        }
        get(col, row) {
            return this._p[row * this._cols + col];
        }
        set(col, row, value) {
            this._p[row * this._cols + col] = value;
        }
        getByIndex(index) {
            return this._p[index];
        }
        setByIndex(index, value) {
            this._p[index] = value;
        }
    }
    exports.AbsStore2D = AbsStore2D;
    class ObjStore2D extends AbsStore2D {
        _initArrayType(size) {
            return new Array(size);
        }
    }
    exports.ObjStore2D = ObjStore2D;
});
define("src/Core/LodState", ["require", "exports", "src/Extras/Utils", "src/Extras/Store2D"], function (require, exports, Utils_mjs_1, Store2D_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.defaultPatchLod = void 0;
    exports.defaultPatchLod = {
        distance: 0,
        core: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
    };
    const getZeroPatchLod = () => ({
        distance: 0,
        core: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
    });
    class LodState {
        get lodManager() { return this._lodManager; }
        get zFar() { return this._zFar; }
        get regions() { return this._regions; }
        get map() { return this._map; }
        constructor(lodManager, zFar) {
            this.setLodManager(lodManager);
            this.setZFar(zFar);
        }
        setLodManager(lodManager, removeFromPrev = true) {
            if (this._lodManager && removeFromPrev) {
                this._lodManager.removeState(this);
            }
            this._lodManager = lodManager;
            this._lodManager.addState(this);
            this._regions = new Array(this._lodManager.count);
            this._map = new Store2D_mjs_1.ObjStore2D();
            this._map.initByVal(this._lodManager.numPatchesX, this._lodManager.numPatchesZ, getZeroPatchLod);
        }
        setZFar(zFar) {
            this._zFar = zFar;
            this._calcLodRegions();
        }
        _calcLodRegions() {
            // TODO: We can use the ring system to determine the LOD.
            // TODO: Based on the heights we can calculate the optimal lods
            let sum = 0;
            for (let i = 0; i < this._regions.length; i++) {
                sum += i + 1;
            }
            let x = this._zFar / sum;
            let temp = 0;
            for (let i = 0; i < this._regions.length; i++) {
                const curRange = (x * (i + 1)) | 0;
                this._regions[i] = temp + curRange;
                temp += curRange;
            }
        }
        getPatchLod(patchX, patchZ) {
            return this._map.get(patchX, patchZ);
        }
        getPatchLodByIndex(index) {
            return this._map.getByIndex(index);
        }
        getLodForDistance(distance) {
            let lod = this._regions.length - 1;
            for (let i = 0; i < this._regions.length; i++) {
                if (distance < this._regions[i]) {
                    lod = i;
                    break;
                }
            }
            return lod;
        }
        updatePatchLod(patchX, patchZ) {
            const item = this._map.get(patchX, patchZ);
            const coreLod = item.core;
            let hasChange = false;
            let indexLeft = patchX;
            let indexRight = patchX;
            let indexTop = patchZ;
            let indexBottom = patchZ;
            if (patchX > 0) {
                indexLeft--;
                const prev = item.left;
                const next = this._map.get(indexLeft, patchZ).core > coreLod ? 1 : 0;
                if (prev !== next) {
                    item.left = next;
                    hasChange = true;
                }
            }
            if (patchX < this._lodManager.numPatchesX - 1) {
                indexRight++;
                const prev = item.right;
                const next = this._map.get(indexRight, patchZ).core > coreLod ? 1 : 0;
                if (prev !== next) {
                    item.right = next;
                    hasChange = true;
                }
            }
            if (patchZ > 0) {
                indexBottom--;
                const prev = item.bottom;
                const next = this._map.get(patchX, indexBottom).core > coreLod ? 1 : 0;
                if (prev !== next) {
                    item.bottom = next;
                    hasChange = true;
                }
            }
            if (patchZ < this._lodManager.numPatchesZ - 1) {
                indexTop++;
                const prev = item.top;
                const next = this._map.get(patchX, indexTop).core > coreLod ? 1 : 0;
                if (prev !== next) {
                    item.top = next;
                    hasChange = true;
                }
            }
            return hasChange;
        }
        printLodMap() {
            const maxLodMaxZ = this._lodManager.numPatchesZ - 1;
            const maxLodMaxX = this._lodManager.numPatchesX;
            let maxCore = 0;
            let str = '';
            for (let lodMapZ = maxLodMaxZ; lodMapZ > -1; lodMapZ--) {
                for (let lodMapX = 0; lodMapX < maxLodMaxX; lodMapX++) {
                    const value = this._map.get(lodMapX, lodMapZ).core;
                    if (maxCore < value) {
                        maxCore = value;
                    }
                }
            }
            const lodMaxNumberCount = maxLodMaxZ.toString().length;
            const coreMaxNumberCount = maxCore.toString().length;
            for (let lodMapZ = maxLodMaxZ; lodMapZ > -1; lodMapZ--) {
                str += (0, Utils_mjs_1.getText)(lodMapZ, lodMaxNumberCount, ' ') + ': ';
                for (let lodMapX = 0; lodMapX < maxLodMaxX; lodMapX++) {
                    const value = this._map.get(lodMapX, lodMapZ).core;
                    str += (0, Utils_mjs_1.getText)(value, coreMaxNumberCount, ' ') + ' ';
                }
                str += '\n';
            }
            console.log(str);
        }
    }
    exports.default = LodState;
});
define("src/Core/LodManager", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class LodManager {
        get states() { return this._states; }
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        get count() { return this._lodCount; }
        get max() { return this._lodCount - 1; }
        constructor(lodEstimator) {
            this._states = [];
            this._patchSize = lodEstimator.patchSize;
            this._numPatchesX = lodEstimator.numPatchesX;
            this._numPatchesZ = lodEstimator.numPatchesZ;
            this._lodCount = lodEstimator.count;
        }
        hasState(state) {
            return this._states.indexOf(state) !== -1;
        }
        addState(state) {
            if (this._states.indexOf(state) === -1) {
                this._states.push(state);
            }
        }
        removeState(state) {
            const idx = this._states.indexOf(state);
            if (idx !== -1) {
                this._states.splice(idx, 1);
            }
        }
        update(localViewPos, heightMap, useYPos = true) {
            const a = this._updateLodMapPass1(localViewPos, heightMap, useYPos);
            const b = this._updateLodMapPass2();
            return a || b;
        }
        _updateLodMapPass1(localViewPos, heightMap, useYPos) {
            const halfWidth = heightMap.width / 2;
            const halfDepth = heightMap.depth / 2;
            const centerStep = this.patchSize / 2 | 0;
            const patchSizeM1 = this.patchSize - 1;
            let proxyPatchCenterY = 0;
            let hasChange = false;
            if (useYPos) {
                const normalizeCameraX = Math.min(Math.max(localViewPos.x + halfWidth, 0), heightMap.width - 1);
                const normalizeCameraZ = Math.min(Math.max(localViewPos.z + halfDepth, 0), heightMap.depth - 1);
                const cameraPosAltitude = heightMap.get(normalizeCameraX | 0, normalizeCameraZ | 0);
                proxyPatchCenterY = Math.pow((localViewPos.y - cameraPosAltitude), 2);
            }
            for (let lodMapZ = 0; lodMapZ < this.numPatchesZ; lodMapZ++) {
                for (let lodMapX = 0; lodMapX < this.numPatchesX; lodMapX++) {
                    const x = lodMapX * patchSizeM1 + centerStep;
                    const z = lodMapZ * patchSizeM1 + centerStep;
                    const patchCenterX = -halfWidth + x;
                    const patchCenterZ = -halfDepth + z;
                    const distanceToCamera = Math.sqrt(Math.pow((localViewPos.x - patchCenterX), 2) +
                        Math.pow((localViewPos.z - patchCenterZ), 2) +
                        proxyPatchCenterY);
                    for (const state of this._states) {
                        const coreLod = state.getLodForDistance(distanceToCamera);
                        const patchLod = state.getPatchLod(lodMapX, lodMapZ);
                        patchLod.distance = distanceToCamera;
                        if (patchLod.core !== coreLod) {
                            patchLod.core = coreLod;
                            hasChange = true;
                        }
                    }
                }
            }
            return hasChange;
        }
        _updateLodMapPass2() {
            let hasChange = false;
            for (let lodMapZ = 0; lodMapZ < this.numPatchesZ; lodMapZ++) {
                for (let lodMapX = 0; lodMapX < this.numPatchesX; lodMapX++) {
                    for (const state of this._states) {
                        if (state.updatePatchLod(lodMapX, lodMapZ)) {
                            hasChange = true;
                        }
                    }
                }
            }
            return hasChange;
        }
    }
    exports.default = LodManager;
});
define("src/Core/MidpointDispHeightfield", ["require", "exports", "src/Extras/Utils", "src/Core/Heightfield"], function (require, exports, Utils_mjs_2, Heightfield_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    Heightfield_mjs_1 = __importDefault(Heightfield_mjs_1);
    class MidpointDispHeightfield extends Heightfield_mjs_1.default {
        createMidpointDisplacement(roughness) {
            if (roughness < 0.0) {
                throw Error("roughness must be positive");
            }
            this._createMidpointDisplacementF32(roughness);
            this.normalizeHeightMap();
        }
        _createMidpointDisplacementF32(roughness) {
            let rectSize = (0, Utils_mjs_2.calcNextPowerOfTwo)(this.width);
            let curHeight = rectSize / 2.0;
            const heightReduce = Math.pow(2.0, -roughness);
            while (rectSize > 0) {
                this._diamondStep(rectSize, curHeight);
                this._squareStep(rectSize, curHeight);
                rectSize = (rectSize / 2) | 0;
                curHeight *= heightReduce;
            }
        }
        _diamondStep(rectSize, curHeight) {
            const HalfRectSize = Math.floor(rectSize / 2);
            for (let y = 0; y < this.depth; y += rectSize) {
                for (let x = 0; x < this.width; x += rectSize) {
                    let nextX = (x + rectSize) % this.width;
                    let nextY = (y + rectSize) % this.depth;
                    if (nextX < x) {
                        nextX = this.width - 1;
                    }
                    if (nextY < y) {
                        nextY = this.depth - 1;
                    }
                    const topLeft = this.heightMap.get(x, y);
                    const topRight = this.heightMap.get(nextX, y);
                    const bottomLeft = this.heightMap.get(x, nextY);
                    const bottomRight = this.heightMap.get(nextX, nextY);
                    const midX = (x + HalfRectSize) % this.width;
                    const midY = (y + HalfRectSize) % this.depth;
                    const randValue = (0, Utils_mjs_2.randomFloatRange)(curHeight, -curHeight);
                    const midPoint = (topLeft + topRight + bottomLeft + bottomRight) / 4.0;
                    this.setHeight(midX, midY, midPoint + randValue);
                }
            }
        }
        _squareStep(rectSize, curHeight) {
            const halfRectSize = (rectSize / 2) | 0;
            for (let y = 0; y < this.depth; y += rectSize) {
                for (let x = 0; x < this.width; x += rectSize) {
                    let nextX = (x + rectSize) % this.width;
                    let nextY = (y + rectSize) % this.depth;
                    if (nextX < x) {
                        nextX = this.width - 1;
                    }
                    if (nextY < y) {
                        nextY = this.depth - 1;
                    }
                    const midX = (x + halfRectSize) % this.width;
                    const midY = (y + halfRectSize) % this.depth;
                    const prevMidX = (x - halfRectSize + this.width) % this.width;
                    const prevMidY = (y - halfRectSize + this.depth) % this.depth;
                    const curTopLeft = this.heightMap.get(x, y);
                    const curTopRight = this.heightMap.get(nextX, y);
                    const curCenter = this.heightMap.get(midX, midY);
                    const prevYCenter = this.heightMap.get(midX, prevMidY);
                    const curBotLeft = this.heightMap.get(x, nextY);
                    const prevXCenter = this.heightMap.get(prevMidX, midY);
                    const curLeftMid = (curTopLeft + curCenter + curBotLeft + prevXCenter) / 4.0 + (0, Utils_mjs_2.randomFloatRange)(-curHeight, curHeight);
                    const curTopMid = (curTopLeft + curCenter + curTopRight + prevYCenter) / 4.0 + (0, Utils_mjs_2.randomFloatRange)(-curHeight, curHeight);
                    this.setHeight(midX, y, curTopMid);
                    this.setHeight(x, midY, curLeftMid);
                }
            }
        }
    }
    exports.default = MidpointDispHeightfield;
});
define("src/Core/PatchCombineInstancing", ["require", "exports", "src/Core/LodEstimator", "src/Core/LodInfo"], function (require, exports, LodEstimator_mjs_2, LodInfo_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TComInstCoordsOffsetArrType = exports.combineGroupLen = exports.comInstDataSize = void 0;
    exports.getLodCombineData = getLodCombineData;
    exports.comInstDataSize = 4;
    exports.combineGroupLen = 6;
    exports.TComInstCoordsOffsetArrType = Uint8Array;
    class PatchCombineInstancing {
        get patchCount() { return this._patchCount; }
        constructor() {
            this.data = [];
            this._patchCount = 0;
        }
        forEach(fn) {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < exports.combineGroupLen; i++) {
                    const segment = this.data[c].groups[i];
                    fn(segment);
                }
            }
        }
        destroySegmentObjects(index, destructor) {
            for (let i = 0; i < exports.combineGroupLen; i++) {
                const segment = this.data[index].groups[i];
                if (segment.object) {
                    destructor(segment.object);
                    segment.object = null;
                }
            }
        }
        destroy(destructor) {
            for (let i = 0; i < this.data.length; i++) {
                this.destroySegmentObjects(i, destructor);
            }
            this.data.length = 0;
        }
        build(grid, objectBuilder) {
            this._patchCount = grid.numPatchesX * grid.numPatchesZ;
            this.data = new Array(grid.lodInfo.length);
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                this.data[lodCore] = this._buildInfo(lodCore, grid.lodInfo[lodCore], this._patchCount, objectBuilder);
            }
        }
        _buildInfo(lodCore, lodInfo, patchCount, objectBuilder) {
            const groups = new Array(exports.combineGroupLen);
            const items = new Array(LodInfo_mjs_2.LEFT);
            for (let l = 0; l < LodInfo_mjs_2.LEFT; l++) {
                items[l] = new Array(LodInfo_mjs_2.RIGHT);
                for (let r = 0; r < LodInfo_mjs_2.RIGHT; r++) {
                    items[l][r] = new Array(LodInfo_mjs_2.TOP);
                    for (let t = 0; t < LodInfo_mjs_2.TOP; t++) {
                        items[l][r][t] = new Array(LodInfo_mjs_2.BOTTOM);
                        for (let b = 0; b < LodInfo_mjs_2.BOTTOM; b++) {
                            const id = (0, LodEstimator_mjs_2.getLodId)(lodCore, l, r, t, b);
                            const vl = getLodCombineData(lodCore, l, r, t, b);
                            const { mainId, groupId } = vl;
                            items[l][r][t][b] = vl;
                            // build data for main case
                            if (id === mainId) {
                                const info = lodInfo.info[l][r][t][b];
                                const lod = {
                                    core: lodCore,
                                    left: l,
                                    right: r,
                                    top: t,
                                    bottom: b
                                };
                                const data = new exports.TComInstCoordsOffsetArrType(patchCount * exports.comInstDataSize);
                                const object = objectBuilder ? objectBuilder(lod, info, data, patchCount) : null;
                                groups[groupId] = {
                                    vertexBaseIndex: info.start,
                                    vertexCount: info.count,
                                    count: 0,
                                    lod: lod,
                                    data: data,
                                    object: object,
                                    hasChanges: false,
                                };
                            }
                        }
                    }
                }
            }
            return {
                groups,
                items
            };
        }
        get(lod) {
            const data = this.data[lod.core];
            const groupId = data.items[lod.left][lod.right][lod.top][lod.bottom].groupId;
            return data.groups[groupId];
        }
        increment(lod, patch) {
            const data = this.data[lod.core];
            const item = data.items[lod.left][lod.right][lod.top][lod.bottom];
            const single = data.groups[item.groupId];
            const prevIndex = single.count;
            const index = prevIndex * exports.comInstDataSize;
            if (single.data[index + 0] !== patch.x ||
                single.data[index + 1] !== patch.z ||
                single.data[index + 2] !== item.angle) {
                single.data[index + 0] = patch.x;
                single.data[index + 1] = patch.z;
                single.data[index + 2] = item.angle;
                single.hasChanges = true;
            }
            single.count++;
            return single;
        }
        zeroAll() {
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                for (let i = 0; i < exports.combineGroupLen; i++) {
                    const single = this.data[lodCore].groups[i];
                    single.count = 0;
                }
            }
        }
    }
    exports.default = PatchCombineInstancing;
    function getLodCombineData(lodCore, l, r, t, b) {
        // We are looking for which shape can be replaced by rotation.
        // Angle 1 = 90, 2 = 180, 3 = 270
        // |\|/|/                   |\|/|\|
        // |\|/|\  => rotate(90) => |/|\|/|
        // |/|\|/                    \ / \
        let mainId;
        let groupId;
        let angle;
        if (l === 0 && r === 0 && t === 0 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 0, 0, 0, 0);
            groupId = 0;
            angle = 0;
        }
        else if (l === 1 && r === 0 && t === 0 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 0, 0);
            groupId = 1;
            angle = 0;
        }
        else if (l === 0 && r === 0 && t === 1 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 0, 0);
            groupId = 1;
            angle = 90;
        }
        else if (l === 0 && r === 1 && t === 0 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 0, 0);
            groupId = 1;
            angle = 180;
        }
        else if (l === 0 && r === 0 && t === 0 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 0, 0);
            groupId = 1;
            angle = 270;
        }
        else if (l === 1 && r === 0 && t === 1 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 0);
            groupId = 2;
            angle = 0;
        }
        else if (l === 0 && r === 1 && t === 1 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 0);
            groupId = 2;
            angle = 90;
        }
        else if (l === 0 && r === 1 && t === 0 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 0);
            groupId = 2;
            angle = 180;
        }
        else if (l === 1 && r === 0 && t === 0 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 0);
            groupId = 2;
            angle = 270;
        }
        else if (l === 1 && r === 1 && t === 0 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 1, 0, 0);
            groupId = 3;
            angle = 0;
        }
        else if (l === 0 && r === 0 && t === 1 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 1, 0, 0);
            groupId = 3;
            angle = 90;
        }
        else if (l === 1 && r === 0 && t === 1 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 1);
            groupId = 4;
            angle = 0;
        }
        else if (l === 1 && r === 1 && t === 1 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 1);
            groupId = 4;
            angle = 90;
        }
        else if (l === 0 && r === 1 && t === 1 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 1);
            groupId = 4;
            angle = 180;
        }
        else if (l === 1 && r === 1 && t === 0 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 1);
            groupId = 4;
            angle = 270;
        }
        else if (l === 1 && r === 1 && t === 1 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 1, 1, 1);
            groupId = 5;
            angle = 0;
        }
        else {
            throw new Error(`Can\'t combine ${lodCore},${l},${r},${t},${b}`);
        }
        return {
            mainId,
            groupId,
            angle: angle / 90, // save for uint8
        };
    }
});
define("src/Core/PatchInstancing", ["require", "exports", "src/Core/LodInfo"], function (require, exports, LodInfo_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchInstancing = exports.TInstCoordsOffsetArrType = exports.instDataSize = void 0;
    exports.instDataSize = 2;
    exports.TInstCoordsOffsetArrType = Uint16Array;
    class PatchInstancing {
        get patchCount() { return this._patchCount; }
        constructor() {
            this.data = [];
            this._patchCount = 0;
        }
        forEach(fn) {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                                const segment = this.data[c][l][r][t][b];
                                fn(segment);
                            }
                        }
                    }
                }
            }
        }
        destroySegmentObjects(index, destructor) {
            for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                    for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                        for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                            const segment = this.data[index][l][r][t][b];
                            if (segment.object) {
                                destructor(segment.object);
                                segment.object = null;
                            }
                        }
                    }
                }
            }
        }
        destroy(destructor) {
            for (let i = 0; i < this.data.length; i++) {
                this.destroySegmentObjects(i, destructor);
            }
            this.data.length = 0;
        }
        build(grid, objectBuilder) {
            this._patchCount = grid.numPatchesX * grid.numPatchesZ;
            this.data = new Array(grid.lodInfo.length);
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                this.data[lodCore] = this._buildInfo(lodCore, grid.lodInfo[lodCore], this._patchCount, objectBuilder);
            }
        }
        _buildInfo(lodCore, lodInfo, patchCount, objectBuilder) {
            const arr = new Array(LodInfo_mjs_3.LEFT);
            for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                arr[l] = new Array(LodInfo_mjs_3.RIGHT);
                for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                    arr[l][r] = new Array(LodInfo_mjs_3.TOP);
                    for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                        arr[l][r][t] = new Array(LodInfo_mjs_3.BOTTOM);
                        for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                            const info = lodInfo.info[l][r][t][b];
                            const lod = {
                                core: lodCore,
                                left: l,
                                right: r,
                                top: t,
                                bottom: b
                            };
                            const data = new exports.TInstCoordsOffsetArrType(patchCount * exports.instDataSize);
                            const object = objectBuilder ? objectBuilder(lod, info, data, patchCount) : null;
                            arr[l][r][t][b] = {
                                vertexBaseIndex: info.start,
                                vertexCount: info.count,
                                count: 0,
                                lod: lod,
                                data: data,
                                object: object,
                                hasChanges: false,
                            };
                        }
                    }
                }
            }
            return arr;
        }
        get(lod) {
            return this.data[lod.core][lod.left][lod.right][lod.top][lod.bottom];
        }
        increment(lod, patch) {
            const single = this.get(lod);
            const prevIndex = single.count;
            const index = prevIndex * exports.instDataSize;
            if (single.data[index + 0] !== patch.minX ||
                single.data[index + 1] !== patch.minZ) {
                single.data[index + 0] = patch.minX;
                single.data[index + 1] = patch.minZ;
                single.hasChanges = true;
            }
            single.count++;
            return single;
        }
        zeroAll() {
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                                const single = this.data[lodCore][l][r][t][b];
                                single.count = 0;
                            }
                        }
                    }
                }
            }
        }
    }
    exports.PatchInstancing = PatchInstancing;
});
define("src/Core/PatchedHeightMap", ["require", "exports", "src/Core/AbsChunkedHeightMap"], function (require, exports, AbsChunkedHeightMap_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchedHeightMap = void 0;
    AbsChunkedHeightMap_mjs_3 = __importStar(AbsChunkedHeightMap_mjs_3);
    class PatchedHeightMap extends AbsChunkedHeightMap_mjs_3.default {
        static createBuffer(width, depth, chunkSize) {
            const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
            const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
            const chunkArrSize = Math.pow(chunkSize, 2);
            const chunkCount = numChunksX * numChunksZ;
            return new Float32Array(chunkArrSize * chunkCount);
        }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, buffer) {
            const validDataChunkSize = (0, AbsChunkedHeightMap_mjs_3.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
            const tmpBuffer = buffer !== null && buffer !== void 0 ? buffer : PatchedHeightMap.createBuffer(width, depth, validDataChunkSize);
            super(width, depth, patchSize, dataChunkSize, maxHeight, tmpBuffer, 1, 0);
        }
    }
    exports.PatchedHeightMap = PatchedHeightMap;
    exports.default = PatchedHeightMap;
});
define("src/Core/PatchesSphereBuffer", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.bufferItemSize = void 0;
    exports.bufferItemSize = 4; // (x, y, z, radius)
    // Our system is divided into a general part and an engine part,
    // for optimization we use the engine part in this file. (playcanvas Vec3, Mat4, BoundingSphere)
    class PatchesSphereBuffer {
        get heightMap() { return this._heightMap; }
        get buffer() { return this._localBuffer; }
        get spheres() { return this._worldSpheres; }
        constructor(heightMap, matrix) {
            this._heightMap = heightMap;
            this._localBuffer = new Array(this._heightMap.numPatchesX * this._heightMap.numPatchesZ * exports.bufferItemSize);
            this._localBuffer.fill(0);
            this._scale = new pc.Vec3();
            this._matrix = new pc.Mat4();
            this._initWorldSpheres();
            this.setMatrix(matrix !== null && matrix !== void 0 ? matrix : pc.Mat4.IDENTITY, false);
        }
        _initWorldSpheres() {
            this._worldSpheres = new Array(this._heightMap.numPatchesX * this._heightMap.numPatchesZ);
            for (let patchZ = 0; patchZ < this._heightMap.numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this._heightMap.numPatchesX; patchX++) {
                    const index = patchX + patchZ * this._heightMap.numPatchesX;
                    this._worldSpheres[index] = new pc.BoundingSphere();
                }
            }
        }
        setMatrix(matrix, recalculate = true) {
            this._matrix.copy(matrix);
            this._matrix.getScale(this._scale);
            if (recalculate) {
                this._recalculateWorldBoundingSpheres();
            }
        }
        patchVisible(patchX, patchZ, margin, frustum) {
            const sphereIdx = patchX + patchZ * this._heightMap.numPatchesX;
            const sphere = this._worldSpheres[sphereIdx];
            const prevRadius = sphere.radius;
            sphere.radius *= margin;
            const result = frustum.containsSphere(sphere);
            sphere.radius = prevRadius;
            return result > 0;
        }
        recalculate() {
            for (let patchZ = 0; patchZ < this._heightMap.numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this._heightMap.numPatchesX; patchX++) {
                    this.recalculateBoundingSphere(patchX, patchZ);
                }
            }
        }
        recalculateZone(zone) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const fixedMinX = Math.max(zone.minX, 0);
            const fixedMinZ = Math.max(zone.minZ, 0);
            const fixedMaxX = Math.min(zone.maxX, this._heightMap.width);
            const fixedMaxZ = Math.min(zone.maxZ, this._heightMap.depth);
            for (let z = fixedMinZ; z < fixedMaxZ; z += this._heightMap.patchSize) {
                for (let x = fixedMinX; x < fixedMaxX; x += this._heightMap.patchSize) {
                    const patchX = x / this._heightMap.patchSize | 0;
                    const patchZ = z / this._heightMap.patchSize | 0;
                    this.recalculateBoundingSphere(patchX, patchZ);
                }
            }
        }
        recalculateBoundingSphere(patchX, patchZ) {
            const index = (patchX + patchZ * this._heightMap.numPatchesX) * exports.bufferItemSize;
            const patchMinHeight = this._heightMap.getPatchMin(patchX, patchZ);
            const patchMaxHeight = this._heightMap.getPatchMax(patchX, patchZ);
            const patchRadiusBySize = this._heightMap.patchSize / 2;
            const patchRediusByHeight = (patchMaxHeight - patchMinHeight) / 2;
            const patchCenterX = (patchX * this._heightMap.patchSize) + patchRadiusBySize;
            const patchCenterY = (patchMaxHeight + patchMinHeight) / 2;
            const patchCenterZ = (patchZ * this._heightMap.patchSize) + patchRadiusBySize;
            const radius = (patchRadiusBySize > patchRediusByHeight ? patchRadiusBySize : patchRediusByHeight) * Math.SQRT2;
            // We construct coordinates relative to the center of the height map
            this._localBuffer[index + 0] = patchCenterX + this._heightMap.width / -2;
            this._localBuffer[index + 1] = patchCenterY;
            this._localBuffer[index + 2] = patchCenterZ + this._heightMap.depth / -2;
            this._localBuffer[index + 3] = radius;
            this._recalculateWorldBoundingSphere(patchX, patchZ);
        }
        _recalculateWorldBoundingSpheres() {
            for (let patchZ = 0; patchZ < this._heightMap.numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this._heightMap.numPatchesX; patchX++) {
                    this._recalculateWorldBoundingSphere(patchX, patchZ);
                }
            }
        }
        _recalculateWorldBoundingSphere(patchX, patchZ) {
            const sphereIdx = patchX + patchZ * this._heightMap.numPatchesX;
            const bufferIdx = sphereIdx * exports.bufferItemSize;
            const locRadius = this._localBuffer[bufferIdx + 3];
            const wrlSphere = this._worldSpheres[sphereIdx];
            wrlSphere.center.set(this._localBuffer[bufferIdx + 0], this._localBuffer[bufferIdx + 1], this._localBuffer[bufferIdx + 2]);
            wrlSphere.radius = Math.sqrt(Math.pow((this._scale.x * locRadius), 2) +
                Math.pow((this._scale.y * locRadius), 2) +
                Math.pow((this._scale.z * locRadius), 2));
            this._matrix.transformPoint(wrlSphere.center, wrlSphere.center);
        }
    }
    exports.default = PatchesSphereBuffer;
});
define("src/Core/PatchesManager", ["require", "exports", "src/Core/LodState", "src/Core/LodManager"], function (require, exports, LodState_mjs_1, LodManager_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    LodManager_mjs_1 = __importDefault(LodManager_mjs_1);
    class PatchesManager {
        get grid() { return this._grid; }
        get spheres() { return this._spheres; }
        get lodManager() { return this._lodManager; }
        get states() { return this._states; }
        constructor(grid, spheres) {
            this._grid = grid;
            this._spheres = spheres;
            this._lodManager = new LodManager_mjs_1.default(grid.lodEstimator);
            this._states = [];
        }
        hasState(state) {
            return this._states.indexOf(state) !== -1;
        }
        addState(state) {
            if (!this._lodManager.hasState(state.lodState)) {
                console.warn("Lod state has different lod manager with patches manager");
                return;
            }
            if (this._states.indexOf(state) === -1) {
                this._states.push(state);
            }
            this._initSingleState(state);
        }
        removeState(state) {
            const idx = this._states.indexOf(state);
            if (idx !== -1) {
                this._states.splice(idx, 1);
            }
        }
        _initSingleState(state) {
            const numPatchesX = this._grid.numPatchesX;
            const numPatchesZ = this._grid.numPatchesZ;
            const patchSize = this._grid.patchSize;
            for (let patchZ = 0; patchZ < numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < numPatchesX; patchX++) {
                    const minX = patchX * (patchSize - 1);
                    const minZ = patchZ * (patchSize - 1);
                    const info = this._grid.lodInfo[0].info[0][0][0][0];
                    state.initPatch(patchX, patchZ, patchSize, minX, minZ, info, LodState_mjs_1.defaultPatchLod);
                }
            }
        }
        update(frustum, frustumMargin = 1) {
            const numStates = this._states.length;
            const numPatchesX = this._grid.numPatchesX;
            const numPatchesZ = this._grid.numPatchesZ;
            for (let i = 0; i < numStates; i++) {
                this._states[i].beforeUpdate();
            }
            for (let patchZ = 0; patchZ < numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < numPatchesX; patchX++) {
                    const visible = !!frustum && this._spheres.patchVisible(patchX, patchZ, frustumMargin, frustum);
                    for (let i = 0; i < numStates; i++) {
                        const state = this._states[i];
                        const plod = state.lodState.getPatchLod(patchX, patchZ);
                        const info = this._grid.lodInfo[plod.core].info[plod.left][plod.right][plod.top][plod.bottom];
                        state.updatePatch(patchX, patchZ, visible, info, plod);
                    }
                }
            }
            for (let i = 0; i < numStates; i++) {
                this._states[i].afterUpdate();
            }
        }
        updateLods(localViewPos, useYPos = true) {
            this.lodManager.update(localViewPos, this._spheres.heightMap, useYPos);
        }
    }
    exports.default = PatchesManager;
});
define("src/Core/SquareIterator", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class SquareIterator {
        get field() { return this._field; }
        constructor(field) {
            this._field = field;
        }
        _forEach(zone, squareSize, numSquareX, numSquareZ, callback) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const minX = Math.max(zone.minX, 0);
            const minZ = Math.max(zone.minZ, 0);
            const maxX = Math.min(zone.maxX, this.field.width);
            const maxZ = Math.min(zone.maxZ, this.field.depth);
            const minPatchX = minX / squareSize | 0;
            const minPatchZ = minZ / squareSize | 0;
            const maxPatchX = maxX / squareSize | 0;
            const maxPatchZ = maxZ / squareSize | 0;
            const normalizeMinX = Math.max(minPatchX, 0);
            const normalizeMinZ = Math.max(minPatchZ, 0);
            const normalizeMaxX = Math.min(maxPatchX + 1, numSquareX);
            const normalizeMaxZ = Math.min(maxPatchZ + 1, numSquareZ);
            for (let z = normalizeMinZ; z < normalizeMaxZ; z++) {
                for (let x = normalizeMinX; x < normalizeMaxX; x++) {
                    const patchIndex = z * numSquareX + x;
                    if (callback(patchIndex, x, z) === false) {
                        return;
                    }
                }
            }
        }
    }
    exports.default = SquareIterator;
});
define("src/Extras/Debug", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.drawDirectionVector = drawDirectionVector;
    exports.drawPoint = drawPoint;
    exports.drawBox = drawBox;
    const tmpVec = new pc.Vec3();
    function drawDirectionVector(position, dir, color = pc.Color.RED) {
        // Draw the vector
        const start = position;
        const end = tmpVec.add2(position, dir);
        pc.app.drawLine(start, end, color, false);
    }
    function drawPoint({ center, radius = 0.1, numSegments = 4, color = pc.Color.RED, layer, depthTest = false }) {
        const block = 6 * 3;
        const points = new Array(numSegments * block);
        const step = 2 * Math.PI / numSegments;
        let angle = 0;
        for (let i = 0; i < numSegments; i++) {
            const sin0 = Math.sin(angle);
            const cos0 = Math.cos(angle);
            angle += step;
            const sin1 = Math.sin(angle);
            const cos1 = Math.cos(angle);
            const j = i * block;
            points[j + 0] = center.x + radius * sin0;
            points[j + 1] = center.y;
            points[j + 2] = center.z + radius * cos0;
            points[j + 3] = center.x + radius * sin1;
            points[j + 4] = center.y;
            points[j + 5] = center.z + radius * cos1;
            points[j + 6] = center.x;
            points[j + 7] = center.y + radius * sin0;
            points[j + 8] = center.z + radius * cos0;
            points[j + 9] = center.x;
            points[j + 10] = center.y + radius * sin1;
            points[j + 11] = center.z + radius * cos1;
            points[j + 12] = center.x + radius * cos0;
            points[j + 13] = center.y + radius * sin0;
            points[j + 14] = center.z;
            points[j + 15] = center.x + radius * cos1;
            points[j + 16] = center.y + radius * sin1;
            points[j + 17] = center.z;
        }
        pc.app.drawLineArrays(points, color, depthTest, layer);
    }
    function drawBox({ min, max, color = pc.Color.RED, layer, depthTest = false }) {
        var _a;
        (_a = pc.app) === null || _a === void 0 ? void 0 : _a.drawWireAlignedBox(min, max, color, depthTest, layer);
    }
});
define("src/Extras/EnumConverter", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.isNumeric = isNumeric;
    exports.mapTitleEnum = mapTitleEnum;
    exports.mapEnum = mapEnum;
    function isNumeric(value) {
        return /^-?\d+$/.test(value);
    }
    function mapTitleEnum(someEnum) {
        const result = [];
        for (let value in someEnum) {
            if (!someEnum.hasOwnProperty(value) ||
                isNumeric(value)) {
                continue;
            }
            const enumEntry = {};
            enumEntry[value] = someEnum[value];
            result.push(enumEntry);
        }
        return result;
    }
    function mapEnum(someEnum) {
        const result = [];
        for (let value in someEnum) {
            if (!someEnum.hasOwnProperty(value)) {
                continue;
            }
            const enumEntry = {};
            enumEntry[value] = someEnum[value];
            result.push(enumEntry);
        }
        return result;
    }
});
define("src/Extras/Random", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class Random {
        constructor(seed) {
            this.seed = seed;
            this._tmp = seed;
        }
        reset() {
            this._tmp = this.seed;
        }
        next() {
            this._tmp = (this._tmp * 48271) % 2147483647;
            this._tick = this._tmp / 2147483647;
            return this._tick;
        }
        nextFloat(min, max) {
            return this.next() * (max - min) + min;
        }
        nextInt(min, max) {
            return this.nextFloat(min, max) | 0;
        }
        random() {
            return this.next();
        }
        nrand() {
            return this.nextFloat(-1, 1);
        }
    }
    exports.default = Random;
});
define("src/GrassField/GrassFieldTexture", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GrassFieldTexture = void 0;
    class GrassFieldTexture {
        get texture() { return this._texture; }
        constructor(graphicsDevice, width, depth, buffer) {
            this._width = width;
            this._depth = depth;
            const w = (width - 1) / 4 + 1;
            const d = (depth - 1) / 4 + 1;
            this._buffer = buffer !== null && buffer !== void 0 ? buffer : new Uint8Array(w * d * 4); // => 1 byte = 8 bits => 8 / 2 = 4 bit for 8 levels
            this._texture = new pc.Texture(graphicsDevice, {
                width: w,
                height: d,
                format: pc.PIXELFORMAT_RGBA8U,
                mipmaps: false,
                minFilter: pc.FILTER_NEAREST,
                magFilter: pc.FILTER_NEAREST,
                addressU: pc.ADDRESS_CLAMP_TO_EDGE,
                addressV: pc.ADDRESS_CLAMP_TO_EDGE,
                flipY: graphicsDevice.isWebGPU,
                levels: [this._buffer]
            });
        }
        destroy() {
            var _a;
            (_a = this._texture) === null || _a === void 0 ? void 0 : _a.destroy();
        }
        setChannel(x, z, channel) {
            const index = (x + z * this._width) / 4 | 0;
            const value = this._buffer[index];
        }
        setPixel() {
            if (this._texture) {
                const device = this._texture.device;
                const dataChunkSize = 1;
                const buffer = new Uint8Array(4);
                if (device.isWebGL2) {
                    const gl = device.gl;
                    const textureFormat = this._texture.impl._glFormat;
                    const texturePixelT = this._texture.impl._glPixelType;
                    const textureTarget = this._texture.impl._glTarget;
                    const textureObject = this._texture.impl._glTexture;
                    gl.bindTexture(textureTarget, textureObject);
                    gl.texSubImage3D(gl.TEXTURE_2D_ARRAY, 0, 0, 0, 0, dataChunkSize, dataChunkSize, 1, textureFormat, texturePixelT, buffer);
                }
                else if (device.isWebGPU) {
                    const webgpu = device.wgpu;
                    const texture = (this._texture.impl.gpuTexture);
                    webgpu.queue.writeTexture({
                        texture: texture,
                        origin: [0, 0, 0],
                        mipLevel: 0
                    }, buffer, {
                        offset: 0,
                        bytesPerRow: 4 * dataChunkSize, // always 4 for rgba format
                        rowsPerImage: dataChunkSize
                    }, {
                        width: dataChunkSize,
                        height: dataChunkSize
                    });
                }
            }
        }
    }
    exports.GrassFieldTexture = GrassFieldTexture;
    GrassFieldTexture.MAX_CHANEL = 8;
});
define("src/Heightfield/ShaderChunks", ["require", "exports", "src/Extras/Utils"], function (require, exports, Utils_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.chunks = exports.heightMapFactorsChunks = exports.diffusePS = exports.layersOffsetParamName = exports.layersScaleParamName = exports.layersFlagsParamName = exports.layersNormalsParamName = exports.layersDiffuseParamName = exports.maxLayersCount = exports.gammaNormalizeChunkPS = exports.gammaNormalizeHeaderPS = exports.startVS = exports.normalCoreVS = exports.normalVS = exports.normalByHeightMapVS = exports.startUv0VS = exports.uv0VS = exports.transformVS = exports.transformDeclVS = exports.transformInstancingVS = exports.instancingVS = exports.fieldHeightChunkVS = exports.fieldHeightFactorChunkVS = exports.fieldChunkBufferCoordVS = exports.fieldHeightFactorRGBA8UX4VS = exports.fieldHeightFactorRG16UX2VS = exports.fieldHeightFactorRGBA8UVS = exports.fieldHeightFactorR32FVS = exports.fieldCoordsChunkVS = exports.currentFieldXZForCombineInstancingChunkVS = exports.currentFieldXZForInstancingChunkVS = exports.currentFieldXZChunkVS = exports.baseClearSubVS = exports.baseClearVS = exports.heightMapSampler = exports.baseForCombineInstancingVS = exports.baseForInstancingVS = exports.baseOriginalVS = exports.definesVS = exports.littleEndianValue = exports.cameraPositionParamName = exports.splatMapParamName = exports.maxHeightParamName = exports.heightMapParamName = exports.patchLodCoreParamName = exports.patchCoordOffsetParamName = exports.patchInstCoordOffsetAttrName = exports.vertexNormalAttrName = exports.vertexHeightAttrName = exports.vertexCoordAttrName = void 0;
    exports.getFieldHeightFactorVS = getFieldHeightFactorVS;
    exports.getTextureType = getTextureType;
    exports.getSamplerType = getSamplerType;
    exports.getFieldShaderChunks = getFieldShaderChunks;
    exports.vertexCoordAttrName = "vertex_position";
    exports.vertexHeightAttrName = "vertex_height";
    exports.vertexNormalAttrName = "vertex_normal";
    exports.patchInstCoordOffsetAttrName = "vertex_postion_offset";
    exports.patchCoordOffsetParamName = "uPatchCoordOffset";
    exports.patchLodCoreParamName = "uPatchLodCore";
    exports.heightMapParamName = "uHeightMap";
    exports.maxHeightParamName = "uMaxHeight";
    exports.splatMapParamName = "uSplatMap";
    exports.cameraPositionParamName = "uCameraPos";
    exports.littleEndianValue = Utils_mjs_3.littleEndian ? 'true' : 'false';
    exports.definesVS = `
    #define HM_NUM_CHUNKS_X        (%%HM_NUM_CHUNKS_X%%)
    #define HM_NUM_CHUNKS_X_U      (uint(HM_NUM_CHUNKS_X))
    #define HM_CHUNK_SIZE          (%%HM_CHUNK_SIZE%%)
    #define HM_CHUNK_SIZE_U        (uint(HM_CHUNK_SIZE))
    #define HM_CHUNK_SIZE_M1_U     (HM_CHUNK_SIZE_U - 1u)
    #define HM_CHUNK_SIZE_F        (float(HM_CHUNK_SIZE))
    #define FIELD_SIZE             (ivec2(%%FIELD_SIZE_X%%, %%FIELD_SIZE_Z%%))
    #define FIELD_SIZE_F           (vec2(%%FIELD_SIZE_X_F%%, %%FIELD_SIZE_Z_F%%))
    #define FIELD_SIZE_U           (uvec2(FIELD_SIZE))
    #define FIELD_SIZE_H_F         (FIELD_SIZE_F / 2.0)
    #define FIELD_SIZE_H_N_F       (-FIELD_SIZE_H_F)
    #define FIELD_PATCH_SIZE_X     (%%FIELD_PATCH_SIZE_X%%)
    #define FIELD_PATCH_SIZE_M1    (FIELD_PATCH_SIZE_X - 1.0)
    #define FIELD_PATCH_SIZE_M1_H  (FIELD_PATCH_SIZE_M1 / 2.0)
    #define FIELD_PATCH_SIZE_M1_F  (vec2(FIELD_PATCH_SIZE_M1_H, FIELD_PATCH_SIZE_M1_H))
`;
    exports.baseOriginalVS = `
    uniform vec2 ${exports.patchCoordOffsetParamName};

    attribute uvec2 ${exports.vertexCoordAttrName};
`;
    exports.baseForInstancingVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
    attribute uvec2 ${exports.patchInstCoordOffsetAttrName};
`;
    exports.baseForCombineInstancingVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
    attribute uvec4 ${exports.patchInstCoordOffsetAttrName};
`;
    exports.heightMapSampler = `
    uniform highp %%HEIGHT_MAP_SAMPLER%% ${exports.heightMapParamName};
`;
    exports.baseClearVS = `
    uniform mat4 matrix_viewProjection;
    uniform mat4 matrix_model;
    uniform mat3 matrix_normal;

    uniform vec3 ${exports.cameraPositionParamName};
    
    uniform float ${exports.maxHeightParamName};
    uniform float ${exports.patchLodCoreParamName};

    vec2 dCurrentFieldXZ;
    float dCurrentFieldHeight;
`;
    exports.baseClearSubVS = `
    vec3 dPositionW;
    mat4 dModelMatrix;
    mat3 dNormalMatrix;

    vec3 dCurrentFieldNormal;
`;
    exports.currentFieldXZChunkVS = `
    vec2 getCurrentFieldXZ() {
        return vec2(${exports.vertexCoordAttrName}) + ${exports.patchCoordOffsetParamName};
    }
`;
    exports.currentFieldXZForInstancingChunkVS = `
    vec2 getCurrentFieldXZ() {
        return vec2(${exports.vertexCoordAttrName} + ${exports.patchInstCoordOffsetAttrName});
    }
`;
    exports.currentFieldXZForCombineInstancingChunkVS = `
    const vec4 rotatePatchXZCoff[4] = vec4[4](
        vec4( 1.0,  0.0,  0.0,  1.0),
        vec4( 0.0,  1.0, -1.0,  0.0),
        vec4(-1.0,  0.0,  0.0, -1.0),
        vec4( 0.0, -1.0,  1.0,  0.0)
    );

    vec2 rotatePatchXZ(vec2 coord, uint angle) {
        vec2 offset = coord - FIELD_PATCH_SIZE_M1_H;
        vec4 transf = rotatePatchXZCoff[angle];
        return FIELD_PATCH_SIZE_M1_H + offset.xx * transf.xz + offset.yy * transf.yw;
    }

    vec2 getCurrentFieldXZ() {
        uint angle = ${exports.patchInstCoordOffsetAttrName}.z;
        vec2 orgXZ = vec2(${exports.vertexCoordAttrName});
        vec2 rotXZ = rotatePatchXZ(orgXZ, angle);
        return rotXZ + vec2(${exports.patchInstCoordOffsetAttrName}.xy) * FIELD_PATCH_SIZE_M1;
    }
`;
    exports.fieldCoordsChunkVS = `
    vec2 getCurrentFieldUvCoord() {
        vec2 xz = dCurrentFieldXZ;
        vec2 uv = (xz + 0.5) / FIELD_SIZE_F;
        return uv;
    }
    
    uvec2 clampFieldXZ(vec2 xz) {
        return uvec2(clamp(xz, vec2(0.0), FIELD_SIZE_F));
    }
    
    vec2 getFieldXZ(ivec2 offset) {
        return dCurrentFieldXZ + vec2(offset);
    }
`;
    exports.fieldHeightFactorR32FVS = `
    float getFieldHeightFactorFromTexture(uvec3 coord) {
        return texelFetch(${exports.heightMapParamName}, ivec3(coord), 0).r;
    }
`;
    // https://stackoverflow.com/questions/63827836/is-it-possible-to-do-a-rgba-to-float-and-back-round-trip-and-read-the-pixels-in
    // note: the 0.1s here an there are voodoo related to precision
    /*
        float rgba8uToFloat0(uvec4 v) {
            vec4 bits  = vec4(${littleEndian ? 'v' : 'v.abgr'});
            float sign = mix(-1.0, 1.0, step(bits[3], 128.0));
            float expo = floor(mod(bits[3] + 0.1, 128.0)) * 2.0 + floor((bits[2] + 0.1) / 128.0) - 127.0;
            float sig  = bits[0] + bits[1] * 256.0 + floor(mod(bits[2] + 0.1, 128.0)) * 256.0 * 256.0;
            return sign * (1.0 + sig / 8388607.0) * pow(2.0, expo);
        }
    */
    exports.fieldHeightFactorRGBA8UVS = `
    float rgba8uToFloat(uvec4 v) {
        uvec4 bits = ${Utils_mjs_3.littleEndian ? 'v' : 'v.abgr'};
        float sign = 2.0 * step(float(bits[3]), 128.0) - 1.0;
        float expo = float((bits[3] & 127u) * 2u + bits[2] / 128u) - 127.0;
        float sig  = float(bits[0] + bits[1] * 256u + (bits[2] & 127u) * 65536u);
        return sign * (1.0 + sig / 8388607.0) * pow(2.0, expo);
    }

    float getFieldHeightFactorFromTexture(uvec3 coord) {
        uvec4 rgba = texelFetch(${exports.heightMapParamName}, ivec3(coord), 0);
        return rgba8uToFloat(rgba);
    }
`;
    // Compress height by x coord [patch0, patch1] ...
    // see: CompressedPatchedHeightMap file
    exports.fieldHeightFactorRG16UX2VS = `
    float getFieldHeightFactorFromTexture(uvec3 coord) {

        uint level    = coord.b;
        uint newLevel = level / 2u;
        uint shift    = level & 1u;

        uvec4 rgba = texelFetch(${exports.heightMapParamName}, ivec3(coord.xy, newLevel), 0);

        return float(rgba[shift]) / 65535.0;
    }
`;
    // Compress height by x coord [patch0, patch1, patch2, patch3] ...
    // see: CompressedPatchedHeightMap file
    exports.fieldHeightFactorRGBA8UX4VS = `
    float getFieldHeightFactorFromTexture(uvec3 coord) {

        uint level    = coord.b;
        uint newLevel = level / 4u;
        uint shift    = level & 3u;

        uvec4 rgba = texelFetch(${exports.heightMapParamName}, ivec3(coord.xy, newLevel), 0);

        return float(rgba[shift]) / 255.0;
    }
`;
    exports.fieldChunkBufferCoordVS = `
    uvec3 getFieldChunkBufferCoord(uvec2 xz) {

        uvec2 ck = xz / HM_CHUNK_SIZE_U;

        uint localX = xz[0] % HM_CHUNK_SIZE_U;
        uint localZ = xz[1] % HM_CHUNK_SIZE_U;
        uint level  = ck[1] * HM_NUM_CHUNKS_X_U + ck[0];

        return uvec3(localX, localZ, level);
    }

    uvec3 getFieldChunkBufferRelativeCoord(ivec2 offset) {
        vec2  oc = getFieldXZ(offset);
        uvec2 xz = clampFieldXZ(oc);
        return getFieldChunkBufferCoord(xz);
    }
`;
    exports.fieldHeightFactorChunkVS = `
    float getFieldHeightFactor(ivec2 offset) {
        uvec3 coord = getFieldChunkBufferRelativeCoord(offset);
        return getFieldHeightFactorFromTexture(coord);
    }
`;
    exports.fieldHeightChunkVS = `
    float getFieldHeight(ivec2 offset) {
        return getFieldHeightFactor(offset) * ${exports.maxHeightParamName};
    }
    
    float getCurrentFieldHeight() {
        return getFieldHeight(ivec2(0, 0));
    }
`;
    exports.instancingVS = ``;
    exports.transformInstancingVS = ``;
    exports.transformDeclVS = ``;
    exports.transformVS = `
#if defined(SHADOW_PASS)
#else
    varying float vPatchLod;
    varying vec2 vUvCoord;
    varying vec2 vFieldPosition;

    varying float vCloseMask;
    varying float vMiddleMask;
#endif

    mat4 getModelMatrix() {
        return matrix_model;
    }

    vec3 getWorldPosition() {
        return dPositionW;
    }
    
    vec4 getPosition() {

        dModelMatrix = getModelMatrix();
        dCurrentFieldXZ = getCurrentFieldXZ();
        dCurrentFieldHeight = getCurrentFieldHeight();

        vec2 centeredXZ = FIELD_SIZE_H_N_F + dCurrentFieldXZ;
        vec4 localPos   = vec4(centeredXZ.r, dCurrentFieldHeight, centeredXZ.g, 1.0);
        
        vec4 posW      = dModelMatrix * localPos;
        vec4 screenPos = matrix_viewProjection * posW;

        dPositionW = posW.xyz;

#if defined(SHADOW_PASS)
#else
        float dis = length(${exports.cameraPositionParamName} - dPositionW);

        vMiddleMask = smoothstep(600.0 + 100.0, 600.0, dis);
        vCloseMask  = smoothstep(200.0 + 50.0, 200.0, dis);

        vFieldPosition = dCurrentFieldXZ;
        vUvCoord       = getCurrentFieldUvCoord();
        vPatchLod      = ${exports.patchLodCoreParamName};
#endif

        return screenPos;
    }
`;
    exports.uv0VS = `
`;
    // FIX: bug with getUv0 for V1 Engine
    exports.startUv0VS = `
    vec2 getUv0() {
        return vec2(0.0);
    }
`;
    exports.normalByHeightMapVS = `
    vec3 getCurrentFieldNormal() {

        float step  = pow(2.0, ${exports.patchLodCoreParamName} + 1.0) / 2.0;
        float left  = getFieldHeightFactor(ivec2( step,  0));
        float right = getFieldHeightFactor(ivec2(-step,  0));
        float up    = getFieldHeightFactor(ivec2( 0,     step));
        float down  = getFieldHeightFactor(ivec2( 0,    -step));

        vec3 normal = vec3(left, step * 0.02, down) - vec3(right, 0, up);

        return normalize(normal);
    }
`;
    exports.normalVS = `
    vec3 getNormal() {
        dNormalMatrix = matrix_normal;
        return normalize(dNormalMatrix * dCurrentFieldNormal);
    }
`;
    exports.normalCoreVS = `
    // FIX: vertex_normal undeclaration
    vec3 vertex_normal;
    vec3 dCurrentFieldNormal;

    vec3 getLocalNormal(vec3 vertexNormal) {

        dCurrentFieldNormal = getCurrentFieldNormal();
        vertex_normal = dCurrentFieldNormal;

        return dCurrentFieldNormal;
    }

    mat3 getNormalMatrix(mat4 modelMatrix) {
        return matrix_normal;
    }
`;
    exports.startVS = `
    void main(void) {

        gl_Position = getPosition();

    #if defined(SHADOW_PASS)
    #else
        dCurrentFieldNormal = getCurrentFieldNormal();
    #endif
`;
    exports.gammaNormalizeHeaderPS = `
    #define GAMMA_NORMALIZE
`;
    exports.gammaNormalizeChunkPS = `
    vec3 autoGammaCorrectInput(vec3 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    vec4 autoGammaCorrectInput(vec4 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }
`;
    exports.maxLayersCount = 5; // Default + R + G + B + A
    exports.layersDiffuseParamName = "uLayersDiffuse";
    exports.layersNormalsParamName = "uLayersNormals";
    exports.layersFlagsParamName = "uLayersFlags";
    exports.layersScaleParamName = "uLayersScale";
    exports.layersOffsetParamName = "uLayersOffset";
    exports.diffusePS = `
    uniform mediump sampler2D ${exports.splatMapParamName};
    uniform mediump sampler2DArray ${exports.layersDiffuseParamName};
    //uniform mediump sampler2DArray ${exports.layersNormalsParamName};
    uniform float ${exports.layersFlagsParamName}[${exports.maxLayersCount}];
    uniform vec2 ${exports.layersScaleParamName}[${exports.maxLayersCount}];
    uniform vec2 ${exports.layersOffsetParamName}[${exports.maxLayersCount}];

    varying float vPatchLod;
    varying vec2 vUvCoord;
    varying vec2 vFieldPosition;

    varying float vCloseMask;
    varying float vMiddleMask;

    const float closeUvScale  = 1.0;
    const float middleUvScale = 0.6;
    const float farUvScale    = 0.3;

    vec3 distanceDiffuseTexture(vec2 uv, int level) {
        vec3 finalUv = vec3(${exports.layersOffsetParamName}[level] + uv * ${exports.layersScaleParamName}[level], level);
        //vec3 finalTx = texture(${exports.layersDiffuseParamName}, finalUv * vec3(farUvScale, farUvScale, 1.0)).rgb;
        //finalTx = mix(finalTx, texture(${exports.layersDiffuseParamName}, finalUv * vec3(middleUvScale, middleUvScale, 1.0)).rgb, vMiddleMask);
        //finalTx = mix(finalTx, texture(${exports.layersDiffuseParamName}, finalUv * vec3(closeUvScale, closeUvScale, 1.0)).rgb, vCloseMask);
        return texture(${exports.layersDiffuseParamName}, finalUv).rgb;
    }

    void getAlbedo() {

        vec4 splatMap = texture2D(${exports.splatMapParamName}, vUvCoord);
        vec3 albedo   = distanceDiffuseTexture(vUvCoord, 0);

        for (int i = 1; i < ${exports.maxLayersCount}; ++i) {

            float splatFactor = splatMap[i - 1];

#if defined(WEBGPU)
            if (${exports.layersFlagsParamName}[i] > 0.0) {
#else
            if (${exports.layersFlagsParamName}[i] > 0.0 && splatFactor > 0.0) {
#endif
                albedo = mix(albedo, distanceDiffuseTexture(vUvCoord, i), splatFactor);
            }
        }
        
        dAlbedo = autoGammaCorrectInput(albedo);
    }
`;
    exports.heightMapFactorsChunks = {
        fieldHeightFactorR32FVS: exports.fieldHeightFactorR32FVS,
        fieldHeightFactorRGBA8UVS: exports.fieldHeightFactorRGBA8UVS,
        fieldHeightFactorRG16UX2VS: exports.fieldHeightFactorRG16UX2VS,
        fieldHeightFactorRGBA8UX4VS: exports.fieldHeightFactorRGBA8UX4VS,
    };
    exports.chunks = Object.assign(Object.assign({}, exports.heightMapFactorsChunks), { heightMapSampler: exports.heightMapSampler,
        currentFieldXZForCombineInstancingChunkVS: exports.currentFieldXZForCombineInstancingChunkVS,
        currentFieldXZForInstancingChunkVS: exports.currentFieldXZForInstancingChunkVS,
        currentFieldXZChunkVS: exports.currentFieldXZChunkVS,
        fieldHeightFactorChunkVS: exports.fieldHeightFactorChunkVS,
        fieldHeightChunkVS: exports.fieldHeightChunkVS,
        fieldCoordsChunkVS: exports.fieldCoordsChunkVS,
        fieldChunkBufferCoordVS: exports.fieldChunkBufferCoordVS,
        normalByHeightMapVS: exports.normalByHeightMapVS,
        // Vertex
        definesVS: exports.definesVS,
        baseForCombineInstancingVS: exports.baseForCombineInstancingVS,
        baseForInstancingVS: exports.baseForInstancingVS,
        baseOriginalVS: exports.baseOriginalVS,
        baseClearVS: exports.baseClearVS,
        baseClearSubVS: exports.baseClearSubVS,
        transformDeclVS: exports.transformDeclVS,
        transformVS: exports.transformVS,
        instancingVS: exports.instancingVS,
        transformInstancingVS: exports.transformInstancingVS,
        normalVS: exports.normalVS,
        normalCoreVS: exports.normalCoreVS,
        uv0VS: exports.uv0VS,
        startVS: exports.startVS,
        startUv0VS: exports.startUv0VS,
        // Fragment
        gammaNormalizeHeaderPS: exports.gammaNormalizeHeaderPS,
        gammaNormalizeChunkPS: exports.gammaNormalizeChunkPS,
        diffusePS: exports.diffusePS });
    function getFieldHeightFactorVS(format, chunksStore) {
        switch (format) {
            case 'r32f': return chunksStore.fieldHeightFactorR32FVS;
            case 'rgba': return chunksStore.fieldHeightFactorRGBA8UVS;
            case 'rgbaX2': return chunksStore.fieldHeightFactorRG16UX2VS;
            case 'rgbaX4': return chunksStore.fieldHeightFactorRGBA8UX4VS;
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getTextureType(format) {
        switch (format) {
            case 'r32f': return pc.PIXELFORMAT_R32F;
            case 'rgba': return pc.PIXELFORMAT_RGBA8U;
            case 'rgbaX2': return pc.PIXELFORMAT_RG16U;
            case 'rgbaX4': return pc.PIXELFORMAT_RGBA8U;
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getSamplerType(format) {
        switch (format) {
            case 'r32f': return 'sampler2DArray';
            case 'rgba': return 'usampler2DArray';
            case 'rgbaX2': return 'usampler2DArray';
            case 'rgbaX4': return 'usampler2DArray';
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getFieldShaderChunks({ width, depth, patchSize, heightMapChunkSize, instancing, heightMapFormat, chunksStore = exports.chunks, engineVersion = 'v1', }) {
        const definesVS = chunksStore.definesVS
            .replace('%%HM_NUM_CHUNKS_X%%', String((width - 1) / (heightMapChunkSize - 1) | 0))
            .replace('%%HM_CHUNK_SIZE%%', String(heightMapChunkSize | 0))
            .replace('%%FIELD_SIZE_X%%', String(width))
            .replace('%%FIELD_SIZE_Z%%', String(depth))
            .replace('%%FIELD_SIZE_X_F%%', width.toFixed(1))
            .replace('%%FIELD_SIZE_Z_F%%', depth.toFixed(1))
            .replace('%%FIELD_PATCH_SIZE_X%%', patchSize.toFixed(1));
        const fieldHeightFactorVS = getFieldHeightFactorVS(heightMapFormat, chunksStore);
        const hmVS = chunksStore.heightMapSampler.replaceAll('%%HEIGHT_MAP_SAMPLER%%', getSamplerType(heightMapFormat));
        const baseClearVS = chunksStore.baseClearVS + hmVS;
        const baseCoordVS = instancing === 'combine' ? chunksStore.baseForCombineInstancingVS :
            instancing === 'simple' ? chunksStore.baseForInstancingVS :
                chunksStore.baseOriginalVS;
        const currentFieldXZVS = instancing === 'combine' ? chunksStore.currentFieldXZForCombineInstancingChunkVS :
            instancing === 'simple' ? chunksStore.currentFieldXZForInstancingChunkVS :
                chunksStore.currentFieldXZChunkVS;
        if (engineVersion === 'v2') {
            const normalCoreVS = chunksStore.normalByHeightMapVS + chunksStore.normalCoreVS;
            const transformVS = definesVS
                + baseCoordVS
                + baseClearVS
                + currentFieldXZVS
                + fieldHeightFactorVS
                + chunksStore.fieldCoordsChunkVS
                + chunksStore.fieldChunkBufferCoordVS
                + chunksStore.fieldHeightFactorChunkVS
                + chunksStore.fieldHeightChunkVS
                + chunksStore.transformVS;
            const diffusePS = chunksStore.gammaNormalizeChunkPS
                + chunksStore.diffusePS;
            return {
                // Vertex
                normalCoreVS,
                transformVS,
                transformCoreVS: '',
                transformInstancingVS: '',
                // Fragment
                diffusePS,
            };
        }
        const startVS = chunksStore.normalByHeightMapVS + chunksStore.startUv0VS + chunksStore.startVS;
        const baseVS = baseCoordVS + baseClearVS + chunksStore.baseClearSubVS;
        const transformVS = definesVS
            + currentFieldXZVS
            + fieldHeightFactorVS
            + chunksStore.fieldCoordsChunkVS
            + chunksStore.fieldChunkBufferCoordVS
            + chunksStore.fieldHeightFactorChunkVS
            + chunksStore.fieldHeightChunkVS
            + chunksStore.transformVS;
        const diffusePS = chunksStore.gammaNormalizeHeaderPS
            + chunksStore.gammaNormalizeChunkPS
            + chunksStore.diffusePS;
        return {
            // Vertex
            baseVS,
            transformVS,
            normalVS: chunksStore.normalVS,
            uv0VS: chunksStore.uv0VS,
            startVS,
            transformDeclVS: chunksStore.transformDeclVS,
            instancingVS: chunksStore.instancingVS,
            // Fragment
            diffusePS,
        };
    }
});
define("src/GrassField/GrassShaderChunk", ["require", "exports", "src/Heightfield/ShaderChunks"], function (require, exports, ShaderChunks_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.chunks = exports.diffusePS = exports.startVS = exports.calculateLocalVS = exports.bladeDecoderVS = exports.fieldHeightMapVS = exports.baseClearSubVS = exports.baseVS = exports.startUv0VS = exports.uv0VS = exports.normalVS = exports.transformVS = exports.normalCoreVS = exports.definesBladeVS = exports.definesVS = exports.transformDeclVS = exports.transformInstancingVS = exports.instancingVS = exports.windIntensityParamName = exports.drawPosParamName = exports.lod2OffsetXZParamName = exports.lod1OffsetXZParamName = exports.fieldScaleParamName = exports.timeParamName = exports.shapeAttrName = exports.offsetAttrName = exports.vindexAttrName = void 0;
    exports.getGrassShaderChunks = getGrassShaderChunks;
    exports.vindexAttrName = "vertex_position";
    exports.offsetAttrName = "vertex_offset";
    exports.shapeAttrName = "vertex_shape";
    exports.timeParamName = "uTime";
    exports.fieldScaleParamName = "uFieldScale";
    exports.lod1OffsetXZParamName = "uLod1OffsetXZ";
    exports.lod2OffsetXZParamName = "uLod2OffsetXZ";
    exports.drawPosParamName = "uDrawPosition";
    exports.windIntensityParamName = "uWindIntensity";
    exports.instancingVS = ``;
    exports.transformInstancingVS = ``;
    exports.transformDeclVS = ``;
    exports.definesVS = `
    #define HM_NUM_CHUNKS_X       (%%HM_NUM_CHUNKS_X%%)
    #define HM_NUM_CHUNKS_X_U     (uint(HM_NUM_CHUNKS_X))
    #define HM_CHUNK_SIZE         (%%HM_CHUNK_SIZE%%)
    #define HM_CHUNK_SIZE_F       (float(HM_CHUNK_SIZE))
    #define HM_CHUNK_SIZE_U       (uint(HM_CHUNK_SIZE))
    #define FIELD_SIZE            (ivec2(%%FIELD_SIZE_X%%, %%FIELD_SIZE_Z%%))
    #define FIELD_SIZE_F          (vec2(%%FIELD_SIZE_X_F%%, %%FIELD_SIZE_Z_F%%))
    #define FIELD_SIZE_BOUND_F    (FIELD_SIZE_F - 2.0)      
    #define FIELD_SIZE_H_F        (FIELD_SIZE_F / 2.0)
    #define FIELD_SIZE_H_N_F      (-FIELD_SIZE_H_F)

    #define PATCH_SIZE         (%%PATCH_SIZE%%)
    #define HALF_PATCH_SIZE    (PATCH_SIZE / 2.0)

    #define BLADE_HEIGHT_TALL  (%%BLADE_HEIGHT_TALL%%) // height of a tall blade

    #define TRANSITION_LOW     (%%TRANSITION_LOW%%)   // elevation of beach-grass transition (start)
    #define TRANSITION_HIGH    (%%TRANSITION_HIGH%%)  // (end)
    #define TRANSITION_NOISE   (0.06)                 // transition noise scale
    #define CIRCLE_RADIUS      (PATCH_SIZE * 2.9)
    #define MAX_ZINIT_DISTANCE (300.0)
`;
    exports.definesBladeVS = `
    #define LOD0_BLADE_SEGS        (%%LOD0_BLADE_SEGS%%) // # of blade segments lod 0
    #define LOD1_BLADE_SEGS        (%%LOD1_BLADE_SEGS%%) // # of blade segments lod 1
    #define LOD2_BLADE_SEGS        (%%LOD2_BLADE_SEGS%%) // # of blade segments lod 2

    #define LOD0_BLADE_DIVS        (LOD0_BLADE_SEGS + 1.0)  // # of divisions
    #define LOD0_BLADE_VERTS       (LOD0_BLADE_DIVS * 2.0)  // # of vertices (per side, so 1/2 total)
    #define LOD0_BLADE_VERTS_COUNT (LOD0_BLADE_VERTS * 2.0) // # of vertices

    #define LOD1_BLADE_DIVS        (LOD1_BLADE_SEGS + 1.0)  // # of divisions
    #define LOD1_BLADE_VERTS       (LOD1_BLADE_DIVS * 2.0)  // # of vertices (per side, so 1/2 total)
    #define LOD1_BLADE_VERTS_COUNT (LOD1_BLADE_VERTS * 2.0) // # of vertices

    #define LOD2_BLADE_DIVS        (LOD2_BLADE_SEGS + 1.0)  // # of divisions
    #define LOD2_BLADE_VERTS       (LOD2_BLADE_DIVS * 2.0)  // # of vertices (per side, so 1/2 total)
    #define LOD2_BLADE_VERTS_COUNT (LOD2_BLADE_VERTS * 2.0) // # of vertices
    
    #define LOD2_BLADE_VERTS_ALL_COUNT (LOD2_BLADE_VERTS_COUNT * 16.0) // # of vertices all fragments
`;
    exports.normalCoreVS = `
    // FIX: vertex_normal undeclaration
    vec3 vertex_normal;

    vec3 getLocalNormal(vec3 vertexNormal) {

        // Set default shader normal
        vertex_normal = dVertexNormal;

        return dVertexNormal;
    }

    mat3 getNormalMatrix(mat4 modelMatrix) {
        return matrix_normal;
    }
`;
    exports.transformVS = `
    vec3 getWorldPosition() {
        return dPositionW;
    }

    mat4 getModelMatrix() {
        return matrix_model;
    }

    vec4 getPosition() {

        decodeBlade();
        calculateBladeVertex();

        dModelMatrix = getModelMatrix();

        vec4 posW      = dModelMatrix * vec4(dVertexPosition, 1.0);
        vec4 screenPos = matrix_viewProjection * posW;

        dPositionW = posW.xyz;

        return screenPos;
    }
`;
    exports.normalVS = `
    vec3 getNormal() {
        dNormalMatrix = matrix_normal;
        return normalize(dNormalMatrix * dVertexNormal);
    }
`;
    exports.uv0VS = `
    vec2 getUv0() {
        return vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);
    }
`;
    // bug with getUv0
    exports.startUv0VS = `    
    vec2 getUv0() {
        return vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);
    }
`;
    exports.baseVS = `
    uniform mat4 matrix_viewProjection;
    uniform mat4 matrix_model;
    uniform mat3 matrix_normal;

    uniform mediump usampler2D uDataMap;

    uniform vec3  ${exports.fieldScaleParamName};
    uniform float ${ShaderChunks_mjs_1.maxHeightParamName};
    
    uniform vec3  ${exports.drawPosParamName};       // centre of where we want to draw
    uniform float ${exports.timeParamName};          // used to animate blades
    uniform float ${exports.windIntensityParamName};

    uniform vec2 ${exports.lod1OffsetXZParamName}[8];  // center offset from draw pos lod 1
    uniform vec2 ${exports.lod2OffsetXZParamName}[16]; // center offset from draw pos lod 2

    attribute float ${exports.vindexAttrName};
    attribute vec4 ${exports.offsetAttrName};
    attribute vec4 ${exports.shapeAttrName};

    float dVertexIndex;           // vertex index for this side of the blade
    float dDivVertexIndex;        // div index (0 .. BLADE_DIVS)
    float dPercentOfBladeHeight;  // percent of height of blade this vertex is at
    float dSideOfBlade;           // front/back side of blade
    float dEdgeOfBlade;           // left/right edge (x=0 or x=1)
    vec2 dBladeFieldXZPos;        // blade xz position on field
    vec3 dVertexPosition;         // Vertex position - start with 2D shape, no bend applied
    vec3 dVertexNormal;           // Vertex normal
    vec2 dFieldPatchOffsetXZ;     // field patch offset from center
`;
    exports.baseClearSubVS = `
    vec3 dPositionW;
    mat4 dModelMatrix;
    mat3 dNormalMatrix;
`;
    exports.fieldHeightMapVS = `
    uvec2 clampFieldXZ(vec2 xz) {
        return uvec2(clamp(xz, vec2(0.0), FIELD_SIZE_F));
    }

    uvec3 getFieldChunkBufferCoord(vec2 origXZ) {

        uvec2 xz = clampFieldXZ(origXZ);
        uvec2 ck = xz / HM_CHUNK_SIZE_U;

        uint localX = xz[0] % HM_CHUNK_SIZE_U;
        uint localZ = xz[1] % HM_CHUNK_SIZE_U;
        uint level  = ck[1] * HM_NUM_CHUNKS_X_U + ck[0];

        return uvec3(localX, localZ, level);
    }
    
    float getFieldHeightFactor(vec2 xz) {
        uvec3 coord = getFieldChunkBufferCoord(xz);
        return getFieldHeightFactorFromTexture(coord);
    }

    float getFieldHeight(vec2 xz) {
        return getFieldHeightFactor(xz) * ${ShaderChunks_mjs_1.maxHeightParamName};
    }
    
    float getFieldHeightInterpolated(vec2 xz) {

        // here we can calculate normal

        vec2 floorXZ = floor(xz);

        float x0z0 = getFieldHeight(floorXZ);

        if ((floorXZ[0] + 1.0 >= FIELD_SIZE_F[0]) ||
            (floorXZ[1] + 1.0 >= FIELD_SIZE_F[1])) {
            return x0z0;
        }

        float x1z0 = getFieldHeight(floorXZ + vec2(1.0, 0.0));
        float x0z1 = getFieldHeight(floorXZ + vec2(0.0, 1.0));
        float x1z1 = getFieldHeight(floorXZ + vec2(1.0, 1.0));

        float factorX = xz[0] - floorXZ[0];
        float factorZ = xz[1] - floorXZ[1];

        float interpolatedBottom = (x1z0 - x0z0) * factorX + x0z0;
        float interpolatedTop    = (x1z1 - x0z1) * factorX + x0z1;
        float finalHeight        = (interpolatedTop - interpolatedBottom) * factorZ + interpolatedBottom;

        return finalHeight;
    }
`;
    exports.bladeDecoderVS = `
    void decodeBlade() {

        float nnVi = ${exports.vindexAttrName} - LOD2_BLADE_VERTS_ALL_COUNT;

        if (nnVi < 0.0) {

            float lod2nVi  = mod(${exports.vindexAttrName}, LOD2_BLADE_VERTS_COUNT);
            int patchIndex = int(${exports.vindexAttrName} / LOD2_BLADE_VERTS_COUNT);

            dVertexIndex          = mod(lod2nVi, LOD2_BLADE_VERTS);
            dDivVertexIndex       = floor(dVertexIndex / 2.0);
            dPercentOfBladeHeight = dDivVertexIndex / LOD2_BLADE_SEGS;
            dSideOfBlade          = floor(lod2nVi / LOD2_BLADE_VERTS);

            dFieldPatchOffsetXZ = ${exports.lod2OffsetXZParamName}[patchIndex];
        }
        else if (nnVi < LOD0_BLADE_VERTS_COUNT) {

            dVertexIndex          = mod(nnVi, LOD0_BLADE_VERTS);
            dDivVertexIndex       = floor(dVertexIndex / 2.0);
            dPercentOfBladeHeight = dDivVertexIndex / LOD0_BLADE_SEGS;
            dSideOfBlade          = floor(nnVi / LOD0_BLADE_VERTS);

            dFieldPatchOffsetXZ = vec2(0.0);
        }
        else {

            float lod1nnVi = nnVi - LOD0_BLADE_VERTS_COUNT;
            float lod1nVi  = mod(lod1nnVi, LOD1_BLADE_VERTS_COUNT);
            int patchIndex = int(lod1nnVi / LOD1_BLADE_VERTS_COUNT);

            dVertexIndex          = mod(lod1nVi, LOD1_BLADE_VERTS);
            dDivVertexIndex       = floor(dVertexIndex / 2.0);
            dPercentOfBladeHeight = dDivVertexIndex / LOD1_BLADE_SEGS;
            dSideOfBlade          = floor(lod1nVi / LOD1_BLADE_VERTS);

            dFieldPatchOffsetXZ = ${exports.lod1OffsetXZParamName}[patchIndex];
        }
        
        dEdgeOfBlade = mod(dVertexIndex, 2.0);
    }
`;
    exports.calculateLocalVS = `
    // Rotate by an angle
    vec2 rotate(float x, float y, float r) {
        float c = cos(r);
        float s = sin(r);
        return vec2(x * c - y * s, x * s + y * c);
    }

    // Rotate by a vector
    vec2 rotate(float x, float y, vec2 r) {
        return vec2(x * r.x - y * r.y, x * r.y + y * r.x);
    }

    float getGrassFactor(vec2 oxz) {
    
        vec2 xz = floor(oxz);

        if (xz[0] < 0.0 ||
            xz[1] < 0.0 ||
            xz[0] > FIELD_SIZE_BOUND_F[0] ||
            xz[1] > FIELD_SIZE_BOUND_F[1]) {
            return 0.0;
        }

        return 1.0;
    }
    
    varying vec2 vUvFieldCoord;
    varying vec2 vUvCoord;
    varying vec3 vColor;

    void calculateBladeVertex() {
        
        vec4 offset = ${exports.offsetAttrName};
        vec4 shape  = ${exports.shapeAttrName};

        // Based on centre of view cone position, what grid tile should
        // this piece of grass be drawn at?
        vec2 quadCenterPos = ${exports.drawPosParamName}.xz;
        vec2 bladeOffset   = offset.xy;
        vec2 patchCenter   = floor((quadCenterPos - bladeOffset) / PATCH_SIZE) * PATCH_SIZE + HALF_PATCH_SIZE + dFieldPatchOffsetXZ;

        float drawPosAltitude = ${exports.drawPosParamName}.y;

        // Find the blade mesh x,y position
        vec2 bladePos = patchCenter + bladeOffset;

        // Local quad center position in field
        // because the positions are shifted by half the size of the field
        // vec2 localQuadCenterPos = quadCenterPos + FIELD_SIZE_H_F;

        float distanceFromBladeToQuadCenter = distance(bladePos, quadCenterPos);
        float degenerateByDistanceFromBladeToQuadCenter = smoothstep(0.92, 1.0, CIRCLE_RADIUS / distanceFromBladeToQuadCenter);

        // Vertex position - start with 2D shape, no bend applied
        dVertexPosition = vec3(
            shape.x * (dEdgeOfBlade - 0.5) * (1.0 - pow(dPercentOfBladeHeight, 3.0)), // taper blade edges as approach tip
            0.0, // flat y, unbent
            shape.y * dPercentOfBladeHeight // height of vtx, unbent
        );

        // Apply blade's natural curve amount
        float curve = shape.w;

        // Then add animated curve amount by time using this blade's
        // unique properties to randomize its oscillation
        curve += shape.w + 0.125 * (sin(${exports.timeParamName} * 4.0 + offset.w * 0.2 * shape.y + offset.x + offset.y));

        // TODO
        float wind = 0.5;

        wind = (clamp(wind, 0.25, 1.0) - 0.25) * (1.0 / 0.75);
        wind = wind * wind * ${exports.windIntensityParamName};
        wind *= dPercentOfBladeHeight; // scale wind by height of blade
        wind = -wind;

        // Start computing a normal for this vertex
        dVertexNormal = vec3(0.0, dSideOfBlade * -2.0 + 1.0, 0.0);

        // put lean and curve together
        float rot = shape.z + curve * dPercentOfBladeHeight;
        vec2 rotv = vec2(cos(rot), sin(rot));

        dVertexPosition.yz = rotate(dVertexPosition.y, dVertexPosition.z, rotv);
        dVertexNormal.yz   = rotate(dVertexNormal.y, dVertexNormal.z, rotv);

        // rotation of this blade as a vector
        rotv = vec2(cos(offset.w), sin(offset.w));

        dVertexPosition.xy = rotate(dVertexPosition.x, dVertexPosition.y, rotv);
        dVertexNormal.xy   = rotate(dVertexNormal.x, dVertexNormal.y, rotv);

        rotv = vec2(cos(wind), sin(wind));

        // Wind blows in axis-aligned direction to make things simpler
        dVertexPosition.yz = rotate(dVertexPosition.y, dVertexPosition.z, rotv);
        dVertexNormal.yz   = rotate(dVertexNormal.y, dVertexNormal.z, rotv);

        // Local blade position in field
        // because the positions are shifted by half the size of the field
        dBladeFieldXZPos = bladePos / ${exports.fieldScaleParamName}.xz + FIELD_SIZE_H_F;
        
        // Sample the heightfield data texture to get altitude for this blade position
        float bladeAltitude = getFieldHeightInterpolated(dBladeFieldXZPos) * ${exports.fieldScaleParamName}.y;
        float grassFactor   = getGrassFactor(dBladeFieldXZPos);

        float distanceQuadCenterToDraw = distance(bladeAltitude, drawPosAltitude);
        float degenerateByDistanceFromBladeToDraw = smoothstep(0.81, 1.0, MAX_ZINIT_DISTANCE / distanceQuadCenterToDraw);

        // Determine if we want the grass to appear or not
        // Use the noise channel to perturb the blade altitude grass starts growing at.
        // float noisyAltitude = grassFactor * TRANSITION_NOISE - (TRANSITION_NOISE / 2.0);
        // float degenerateByNoise = (clamp(noisyAltitude, TRANSITION_LOW, TRANSITION_HIGH) - TRANSITION_LOW) * (1.0 / (TRANSITION_HIGH - TRANSITION_LOW));

        // Transition geometry toward degenerate as we approach field altitude
        dVertexPosition *= grassFactor * degenerateByDistanceFromBladeToDraw * degenerateByDistanceFromBladeToQuadCenter; // degenerateByNoise

        // Translate to world coordinates
        dVertexPosition.x += bladePos.x;
        dVertexPosition.y += bladePos.y;
        dVertexPosition.z += bladeAltitude;
        
        // Translate to xz plane
        dVertexPosition = dVertexPosition.xzy;
        dVertexNormal   = dVertexNormal.xzy;

        // grass texture coordinate for this vertex
        vUvCoord = vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);

        // field texture coordinate for this vertex
        vUvFieldCoord = dBladeFieldXZPos / FIELD_SIZE_F;

        // Vertex color must be brighter because it is multiplied with blade texture
        // Each blade is randomly colourized a bit by its position
        vColor = vec3(cos(${exports.offsetAttrName}.x), sin(${exports.offsetAttrName}.y), sin(${exports.offsetAttrName}.x));
    }
`;
    // https://community.khronos.org/t/discarding-polygons-in-vertex-shader/103839/9
    exports.startVS = `
    ${exports.startUv0VS}

    void main(void) {

        gl_Position = getPosition();
`;
    exports.diffusePS = `
    uniform sampler2D uDiffuseTex;
    uniform vec3 uDiffuseColor;
    uniform vec3 uDiffuseColorRandom;

    varying vec2 vUvFieldCoord;
    varying vec2 vUvCoord;
    varying vec3 vColor;

    vec3 autoGammaCorrectInput(vec3 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    vec4 autoGammaCorrectInput(vec4 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    void getAlbedo() {

        vec3 tex = autoGammaCorrectInput(texture2D(uDiffuseTex, vUvCoord).rgb);

        dAlbedo = tex * uDiffuseColor + vColor * uDiffuseColorRandom;
    }
`;
    exports.chunks = Object.assign(Object.assign({}, ShaderChunks_mjs_1.heightMapFactorsChunks), { heightMapSampler: ShaderChunks_mjs_1.heightMapSampler,
        definesVS: exports.definesVS,
        definesBladeVS: exports.definesBladeVS,
        bladeDecoderVS: exports.bladeDecoderVS,
        calculateLocalVS: exports.calculateLocalVS,
        fieldHeightMapVS: exports.fieldHeightMapVS,
        // Vertex
        baseVS: exports.baseVS,
        baseClearSubVS: exports.baseClearSubVS,
        transformVS: exports.transformVS,
        transformDeclVS: exports.transformDeclVS,
        instancingVS: exports.instancingVS,
        transformInstancingVS: exports.transformInstancingVS,
        normalCoreVS: exports.normalCoreVS,
        normalVS: exports.normalVS,
        uv0VS: exports.uv0VS,
        startVS: exports.startVS,
        // Fragment
        diffusePS: exports.diffusePS });
    function getGrassShaderChunks({ width, depth, heightMapChunkSize, heightMapFormat, bladeMaxHeight, lod0BladeSegs, lod1BladeSegs, lod2BladeSegs, radius, transitionLow, transitionHigh, chunksStore = exports.chunks, engineVersion = 'v1', }) {
        const definesVS = chunksStore.definesVS
            .replace('%%HM_NUM_CHUNKS_X%%', String((width - 1) / (heightMapChunkSize - 1) | 0))
            .replace('%%HM_CHUNK_SIZE%%', String(heightMapChunkSize | 0))
            .replace('%%FIELD_SIZE_X%%', String(width))
            .replace('%%FIELD_SIZE_Z%%', String(depth))
            .replace('%%FIELD_SIZE_X_F%%', width.toFixed(1))
            .replace('%%FIELD_SIZE_Z_F%%', depth.toFixed(1))
            .replace('%%BLADE_HEIGHT_TALL%%', bladeMaxHeight.toFixed(1))
            .replace('%%PATCH_SIZE%%', radius.toFixed(1))
            .replace('%%TRANSITION_LOW%%', transitionLow.toString())
            .replace('%%TRANSITION_HIGH%%', transitionHigh.toString());
        const definesBladeVS = chunksStore.definesBladeVS
            .replace('%%LOD0_BLADE_SEGS%%', lod0BladeSegs.toFixed(1))
            .replace('%%LOD1_BLADE_SEGS%%', lod1BladeSegs.toFixed(1))
            .replace('%%LOD2_BLADE_SEGS%%', lod2BladeSegs.toFixed(1));
        const heightMapVS = chunksStore.heightMapSampler.replaceAll('%%HEIGHT_MAP_SAMPLER%%', (0, ShaderChunks_mjs_1.getSamplerType)(heightMapFormat));
        const baseClearVS = chunksStore.baseVS + heightMapVS;
        const heightFactorVS = (0, ShaderChunks_mjs_1.getFieldHeightFactorVS)(heightMapFormat, chunksStore);
        const transformVS = heightFactorVS
            + chunksStore.fieldHeightMapVS
            + chunksStore.bladeDecoderVS
            + chunksStore.calculateLocalVS
            + chunksStore.transformVS;
        const diffusePS = '#define GAMMA_NORMALIZE\r\n'
            + chunksStore.diffusePS;
        if (engineVersion === 'v2') {
            const transform2VS = definesVS + definesBladeVS + baseClearVS + transformVS;
            return {
                // Vertex
                transformVS: transform2VS,
                transformCoreVS: "",
                transformInstancingVS: "",
                normalCoreVS: chunksStore.normalCoreVS,
                // Fragment
                diffusePS: diffusePS,
            };
        }
        const baseVS = definesVS +
            definesBladeVS +
            baseClearVS +
            chunksStore.baseClearSubVS;
        return {
            // Vertex
            baseVS,
            startVS: chunksStore.startVS,
            transformVS: transformVS,
            transformDeclVS: chunksStore.transformDeclVS,
            instancingVS: chunksStore.instancingVS,
            normalVS: chunksStore.normalVS,
            uv0VS: chunksStore.uv0VS,
            // Fragment
            diffusePS: diffusePS,
        };
    }
});
/*
 * A speed-improved perlin and simplex noise algorithms for 2D.
 *
 * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
 * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
 * Better rank ordering method by Stefan Gustavson in 2012.
 * Converted to Javascript by Joseph Gentle.
 *
 * Version 2012-03-09
 *
 * This code was placed in the public domain by its original author,
 * Stefan Gustavson. You may use it as you see fit, but
 * attribution is appreciated.
 *
 * --------------------
 * TypeScriptified 2016
 */
define("src/GrassField/simplex", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.default = simplex;
    class Grad {
        constructor(x, y, z) {
            this.x = x;
            this.y = y;
            this.z = z;
        }
        dot2(x, y) {
            return this.x * x + this.y * y;
        }
        dot3(x, y, z) {
            return this.x * x + this.y * y + this.z * z;
        }
    }
    const F2 = 0.5 * (Math.sqrt(3) - 1);
    const G2 = (3 - Math.sqrt(3)) / 6;
    const perm = new Array(512);
    const gradP = new Array(512);
    const grad3 = [
        new Grad(1, 1, 0), new Grad(-1, 1, 0), new Grad(1, -1, 0), new Grad(-1, -1, 0),
        new Grad(1, 0, 1), new Grad(-1, 0, 1), new Grad(1, 0, -1), new Grad(-1, 0, -1),
        new Grad(0, 1, 1), new Grad(0, -1, 1), new Grad(0, 1, -1), new Grad(0, -1, -1)
    ];
    const p = [
        151, 160, 137, 91, 90, 15,
        131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,
        190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,
        88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,
        77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,
        102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,
        135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,
        5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,
        223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,
        129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,
        251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,
        49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,
        138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180
    ];
    // This isn't a very good seeding function, but it works ok. It supports 2^16
    // different seed values. Write something better if you need more seeds.
    function seed(seed) {
        if (seed > 0 && seed < 1) {
            // Scale the seed out
            seed *= 65536;
        }
        seed = Math.floor(seed);
        if (seed < 256) {
            seed |= seed << 8;
        }
        for (let i = 0; i < 256; i++) {
            let v;
            if (i & 1) {
                v = p[i] ^ (seed & 255);
            }
            else {
                v = p[i] ^ ((seed >> 8) & 255);
            }
            perm[i] = perm[i + 256] = v;
            gradP[i] = gradP[i + 256] = grad3[v % 12];
        }
    }
    seed(0);
    // 2D simplex noise
    function simplex(xin, yin) {
        let n0, n1, n2; // Noise contributions from the three corners
        // Skew the input space to determine which simplex cell we're in
        const s = (xin + yin) * F2; // Hairy factor for 2D
        let i = Math.floor(xin + s);
        let j = Math.floor(yin + s);
        const t = (i + j) * G2;
        const x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.
        const y0 = yin - j + t;
        // For the 2D case, the simplex shape is an equilateral triangle.
        // Determine which simplex we are in.
        let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords
        if (x0 > y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)
            i1 = 1;
            j1 = 0;
        }
        else { // upper triangle, YX order: (0,0)->(0,1)->(1,1)
            i1 = 0;
            j1 = 1;
        }
        // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and
        // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where
        // c = (3-sqrt(3))/6
        const x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords
        const y1 = y0 - j1 + G2;
        const x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords
        const y2 = y0 - 1 + 2 * G2;
        // Work out the hashed gradient indices of the three simplex corners
        i &= 255;
        j &= 255;
        const gi0 = gradP[i + perm[j]];
        const gi1 = gradP[i + i1 + perm[j + j1]];
        const gi2 = gradP[i + 1 + perm[j + 1]];
        // Calculate the contribution from the three corners
        let t0 = 0.5 - x0 * x0 - y0 * y0;
        if (t0 < 0) {
            n0 = 0;
        }
        else {
            t0 *= t0;
            n0 = t0 * t0 * gi0.dot2(x0, y0); // (x,y) of grad3 used for 2D gradient
        }
        let t1 = 0.5 - x1 * x1 - y1 * y1;
        if (t1 < 0) {
            n1 = 0;
        }
        else {
            t1 *= t1;
            n1 = t1 * t1 * gi1.dot2(x1, y1);
        }
        let t2 = 0.5 - x2 * x2 - y2 * y2;
        if (t2 < 0) {
            n2 = 0;
        }
        else {
            t2 *= t2;
            n2 = t2 * t2 * gi2.dot2(x2, y2);
        }
        // Add contributions from each corner to get the final noise value.
        // The result is scaled to return values in the interval [-1,1].
        return 70 * (n0 + n1 + n2);
    }
});
define("src/Heightfield/Brush", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Heightfield/ColorPainterShaders", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.fragmentInvertShader = exports.fragmentShader = exports.factorMethod = exports.vertexShader = void 0;
    exports.vertexShader = `
    attribute vec3 aPosition;
    attribute vec2 aUv0;

    uniform mat4 matrix_model;
    uniform mat4 matrix_viewProjection;

    varying vec2 vUv0;

    void main(void)
    {
        vUv0 = aUv0;
        gl_Position = matrix_viewProjection * matrix_model * vec4(aPosition, 1.0);
    }
`;
    exports.factorMethod = `
    varying vec2 vUv0;

    uniform sampler2D uHeightMap;
    uniform float uBrushOpacity;
    uniform vec4 uBrushMask;

    float getFactor() {
        vec4 heightMap = texture2D(uHeightMap, vUv0);
        float height   = (heightMap.r + heightMap.g + heightMap.b) / 3.0 / heightMap.a;
        float factor   = height * uBrushOpacity;
        return factor;
    }
`;
    exports.fragmentShader = `
    ${exports.factorMethod}

    void main(void)
    {
        float factor = getFactor();
        vec4 color = vec4(uBrushMask * factor);

        gl_FragColor = color;
    }
`;
    exports.fragmentInvertShader = `
    ${exports.factorMethod}

    void main(void)
    {
        float levels = 4.0;
        float factor = getFactor();
        vec4 color   = vec4(factor);

        if (uBrushMask.r > 0.0) { color.r = 0.0; levels -= 1.0; }
        if (uBrushMask.g > 0.0) { color.g = 0.0; levels -= 1.0; }
        if (uBrushMask.b > 0.0) { color.b = 0.0; levels -= 1.0; }
        if (uBrushMask.a > 0.0) { color.a = 0.0; levels -= 1.0; }

        gl_FragColor = color / levels;
    }
`;
});
define("src/Heightfield/ColorPainter", ["require", "exports", "src/Heightfield/ColorPainterShaders", "src/Extras/Utils"], function (require, exports, ColorPainterShaders_mjs_1, Utils_mjs_4) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.painterCameraFar = void 0;
    exports.painterCameraFar = 10;
    class ColorPainter {
        get painting() { return this._painting; }
        get cameraFar() { return exports.painterCameraFar; }
        get background() { return this._buffer; }
        constructor(app, buffer, layerName) {
            this._painting = false;
            this._painterMask = new Float32Array(4);
            this._layerName = layerName;
            this._buffer = buffer;
            this._app = app;
            this._initCamera();
            this._initShaders();
            this._initMaterials();
            this._initEntities();
        }
        _initCamera() {
            const painterLayer = this._app.scene.layers.getLayerByName(this._layerName);
            this._painterRenderTarget = new pc.RenderTarget({
                colorBuffer: this._buffer,
                flipY: this._app.graphicsDevice.isWebGPU,
                depth: false,
            });
            this._painterCameraEntity = new pc.Entity('TerrainPainterCamera');
            this._painterCameraEntity.setLocalPosition(0, 0, exports.painterCameraFar);
            this._painterCameraEntity.lookAt(0, 0, 0);
            this._painterCameraEntity.addComponent('camera', {
                projection: pc.PROJECTION_ORTHOGRAPHIC,
                clearColorBuffer: false,
                clearDepthBuffer: false,
                priority: -1,
                layers: [painterLayer.id],
                nearClip: 0.1,
                farClip: exports.painterCameraFar * 2,
                renderTarget: this._painterRenderTarget,
            });
            this._app.root.addChild(this._painterCameraEntity);
            this._painterCameraEntity.enabled = false;
            this._painterCameraEntity.camera.frustumCulling = false;
            this._painterCameraEntity.camera.orthoHeight = exports.painterCameraFar;
        }
        _initEntities() {
            const painterLayer = this._app.scene.layers.getLayerByName(this._layerName);
            painterLayer.transparentSortMode = pc.SORTMODE_MANUAL;
            this._painterEntity = new pc.Entity('TerrainBrushPainter');
            this._painterEntity.addComponent('render', {
                type: 'plane',
                layers: [painterLayer.id],
                material: this._painterMaterial,
                castShadows: false,
                castShadowsLightmap: false,
                receiveShadows: false
            });
            this._painterInvertEntity = new pc.Entity('TerrainBrushPainterInvert');
            this._painterInvertEntity.addComponent('render', {
                type: 'plane',
                layers: [painterLayer.id],
                material: this._painterInvertMaterial,
                castShadows: false,
                castShadowsLightmap: false,
                receiveShadows: false,
            });
            this._painterEntity.render.meshInstances[0].drawOrder = 1;
            this._painterInvertEntity.render.meshInstances[0].drawOrder = 0;
            this._app.root.addChild(this._painterInvertEntity);
            this._app.root.addChild(this._painterEntity);
            this._painterInvertEntity.setLocalEulerAngles(90, 0, 0);
            this._painterEntity.setLocalEulerAngles(90, 0, 0);
            this._painterInvertEntity.enabled = false;
            this._painterEntity.enabled = false;
        }
        _initShaders() {
            const vertex = ColorPainterShaders_mjs_1.vertexShader;
            const fragment = (0, Utils_mjs_4.setPrecision)(this._app.graphicsDevice, ColorPainterShaders_mjs_1.fragmentShader);
            const fragmentInvert = (0, Utils_mjs_4.setPrecision)(this._app.graphicsDevice, ColorPainterShaders_mjs_1.fragmentInvertShader);
            if (pc.ShaderMaterial) {
                this._painterMaterial = new pc.ShaderMaterial({
                    uniqueName: 'TerrainPainterFragmentShader',
                    vertexGLSL: vertex,
                    fragmentGLSL: fragment,
                    attributes: {
                        aPosition: pc.SEMANTIC_POSITION,
                        aUv0: pc.SEMANTIC_TEXCOORD0
                    }
                });
                this._painterInvertMaterial = new pc.ShaderMaterial({
                    uniqueName: 'TerrainPainterInvertFragmentShader',
                    vertexGLSL: vertex,
                    fragmentGLSL: fragmentInvert,
                    attributes: {
                        aPosition: pc.SEMANTIC_POSITION,
                        aUv0: pc.SEMANTIC_TEXCOORD0
                    }
                });
                return;
            }
            this._painterShader = pc.createShaderFromCode(this._app.graphicsDevice, vertex, fragment, 'TerrainPainterFragmentShader', {
                aPosition: pc.SEMANTIC_POSITION,
                aUv0: pc.SEMANTIC_TEXCOORD0
            });
            this._painterInvertShader = pc.createShaderFromCode(this._app.graphicsDevice, vertex, fragmentInvert, 'TerrainPainterInvertFragmentShader', {
                aPosition: pc.SEMANTIC_POSITION,
                aUv0: pc.SEMANTIC_TEXCOORD0
            });
        }
        _initMaterials() {
            // Engine v1 not support ShaderMaterial
            // use old methods
            if (!pc.ShaderMaterial) {
                this._painterMaterial = new pc.Material();
                this._painterInvertMaterial = new pc.Material();
                /* @ts-ignore */
                this._painterMaterial.shader = this._painterShader;
                /* @ts-ignore */
                this._painterInvertMaterial.shader = this._painterInvertShader;
            }
            this._painterMaterial.name = 'BrushPainterMaterial';
            this._painterMaterial.blendType = pc.BLEND_ADDITIVE;
            this._painterMaterial.update();
            this._painterInvertMaterial.name = 'BrushPainterInvertMaterial';
            this._painterInvertMaterial.blendType = pc.BLEND_SUBTRACTIVE;
            this._painterInvertMaterial.update();
        }
        _updateRuntimeSettings(dt) {
            const originalOpacity = this._brushSettings.opacity;
            const opacity = originalOpacity;
            this._painterMaterial.setParameter('uBrushOpacity', opacity);
            this._painterInvertMaterial.setParameter('uBrushOpacity', opacity);
        }
        _updatePositionAndScale(x, y, scaleWidth, scaleHeight) {
            const far = this.cameraFar * 2;
            const ration = this.background.width / this.background.height;
            x = x * far * ration - this.cameraFar * ration;
            y = y * far - this.cameraFar;
            scaleWidth = scaleWidth * this.background.width / far / 2.5;
            scaleHeight = scaleHeight * this.background.height / far / 2.5;
            this._setScale(scaleWidth, scaleHeight);
            this._setPosition(x, y);
        }
        startPaint(dt, x, y, scaleWidth, scaleHeight) {
            this._updateRuntimeSettings(dt);
            this._updatePositionAndScale(x, y, scaleWidth, scaleHeight);
            this._painting = true;
            this._painterInvertEntity.enabled = true;
            this._painterEntity.enabled = true;
            this._painterCameraEntity.enabled = true;
        }
        stopPaint() {
            this._painting = false;
            this._painterInvertEntity.enabled = false;
            this._painterEntity.enabled = false;
            this._painterCameraEntity.enabled = false;
        }
        _setScale(x, y) {
            this._painterEntity.setLocalScale(x, 1, y);
            this._painterInvertEntity.setLocalScale(x, 1, y);
        }
        _setPosition(x, y) {
            this._painterEntity.setLocalPosition(x, y, 0);
            this._painterInvertEntity.setLocalPosition(x, y, 0);
        }
        updateSettings(brushSettings, activeLayer) {
            this._painterMask.fill(0);
            if (activeLayer > 0) {
                this._painterMask[activeLayer - 1] = 1;
            }
            const brushTexture = brushSettings.textures[brushSettings.active].resource;
            this._painterMaterial.setParameter('uBrushMask', this._painterMask);
            this._painterMaterial.setParameter('uHeightMap', brushTexture);
            this._painterInvertMaterial.setParameter('uBrushMask', this._painterMask);
            this._painterInvertMaterial.setParameter('uHeightMap', brushTexture);
            this._brushSettings = brushSettings;
        }
    }
    exports.default = ColorPainter;
});
define("src/Heightfield/IPatchInstancing", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.updateBuffer = updateBuffer;
    function updateBuffer(vertexBuffer, data, length) {
        if (vertexBuffer) {
            const device = vertexBuffer.device;
            if (device.isWebGL2) {
                const gl = device.gl;
                gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer.impl.bufferId);
                gl.bufferSubData(gl.ARRAY_BUFFER, 0, data, 0, length);
            }
            else if (device.isWebGPU) {
                const wgpu = device.wgpu;
                const buffer = vertexBuffer.impl.buffer;
                wgpu.queue.writeBuffer(buffer, 0, data, 0, length);
            }
            else {
                console.error('Unsupported device');
            }
        }
    }
});
define("src/Heightfield/PatchCombineInstancing", ["require", "exports", "src/Core/PatchCombineInstancing", "src/Heightfield/IPatchInstancing"], function (require, exports, PatchCombineInstancing_mjs_1, IPatchInstancing_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    PatchCombineInstancing_mjs_1 = __importStar(PatchCombineInstancing_mjs_1);
    class PatchCombineInstancing extends PatchCombineInstancing_mjs_1.default {
        constructor() {
            super(...arguments);
            this.bufferType = PatchCombineInstancing_mjs_1.TComInstCoordsOffsetArrType;
            this.itemBufferSize = 4;
        }
        get meshInstanceCount() { return this.data.length * PatchCombineInstancing_mjs_1.combineGroupLen; }
        appendMeshInstances(arr, offset = 0) {
            let meshIndex = 0;
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    if (chunk.object) {
                        arr[meshIndex++ + offset] = chunk.object;
                    }
                }
            }
            return meshIndex;
        }
        begin(castShadow = false, receiveShadow = false) {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    const chunkObject = chunk.object;
                    chunk.count = 0;
                    chunk.hasChanges = false;
                    if (chunkObject) {
                        chunkObject.visible = false;
                        chunkObject.castShadow = castShadow;
                        chunkObject.receiveShadow = receiveShadow;
                    }
                }
            }
        }
        end() {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    const chunkObject = chunk.object;
                    if (chunkObject && chunk.count > 0) {
                        chunkObject.instancingCount = chunk.count;
                        if (chunk.hasChanges && chunkObject.instancingData) {
                            // TODO: performance improvement
                            //chunkObject.instancingData.vertexBuffer?.unlock();
                            const length = chunk.count * PatchCombineInstancing_mjs_1.comInstDataSize;
                            const vertexBuffer = chunkObject.instancingData.vertexBuffer;
                            (0, IPatchInstancing_mjs_1.updateBuffer)(vertexBuffer, chunk.data, length);
                        }
                    }
                }
            }
        }
    }
    exports.default = PatchCombineInstancing;
});
define("src/Heightfield/PatchInstancing", ["require", "exports", "src/Core/LodInfo", "src/Core/PatchInstancing", "src/Heightfield/IPatchInstancing"], function (require, exports, LodInfo_mjs_4, PatchInstancing_mjs_1, IPatchInstancing_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class PatchInstancing extends PatchInstancing_mjs_1.PatchInstancing {
        constructor() {
            super(...arguments);
            this.bufferType = PatchInstancing_mjs_1.TInstCoordsOffsetArrType;
            this.itemBufferSize = 2;
        }
        get meshInstanceCount() { return this.data.length * LodInfo_mjs_4.LEFT * LodInfo_mjs_4.RIGHT * LodInfo_mjs_4.TOP * LodInfo_mjs_4.BOTTOM; }
        appendMeshInstances(arr, offset = 0) {
            let i = 0;
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                if (chunk.object) {
                                    arr[i++ + offset] = chunk.object;
                                }
                            }
                        }
                    }
                }
            }
            return i;
        }
        begin(castShadow = false, receiveShadow = false) {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                const chunkObject = chunk.object;
                                chunk.count = 0;
                                chunk.hasChanges = false;
                                if (chunkObject) {
                                    chunkObject.visible = false;
                                    chunkObject.castShadow = castShadow;
                                    chunkObject.receiveShadow = receiveShadow;
                                }
                            }
                        }
                    }
                }
            }
        }
        end() {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                const chunkObject = chunk.object;
                                if (chunkObject && chunk.count > 0) {
                                    chunkObject.instancingCount = chunk.count;
                                    if (chunk.hasChanges && chunkObject.instancingData) {
                                        // TODO: performance improvement
                                        //chunkObject.instancingData.vertexBuffer?.unlock();
                                        const length = chunk.count * PatchInstancing_mjs_1.instDataSize;
                                        const vertexBuffer = chunkObject.instancingData.vertexBuffer;
                                        (0, IPatchInstancing_mjs_2.updateBuffer)(vertexBuffer, chunk.data, length);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    exports.default = PatchInstancing;
});
define("src/Heightfield/GPUHeightMapBuffer", ["require", "exports", "src/Extras/Utils", "src/Core/CompressedPatchedHeightMap", "src/Core/SquareIterator", "src/Heightfield/ShaderChunks"], function (require, exports, Utils_mjs_5, CompressedPatchedHeightMap_mjs_1, SquareIterator_mjs_1, ShaderChunks_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getHeightMapFormat = getHeightMapFormat;
    exports.getHeightMapChunkBufferType = getHeightMapChunkBufferType;
    CompressedPatchedHeightMap_mjs_1 = __importDefault(CompressedPatchedHeightMap_mjs_1);
    SquareIterator_mjs_1 = __importDefault(SquareIterator_mjs_1);
    class GPUHeightMapBuffer extends SquareIterator_mjs_1.default {
        get app() { return this._app; }
        get format() { return this._format; }
        get texture() { return this._texture; }
        constructor(app, field) {
            super(field);
            this._app = app;
            this._init();
        }
        destroy() {
            var _a;
            (_a = this._texture) === null || _a === void 0 ? void 0 : _a.destroy();
        }
        _init() {
            var _a;
            (_a = this._texture) === null || _a === void 0 ? void 0 : _a.destroy();
            const device = this._app.graphicsDevice;
            const heightFormat = getHeightMapFormat(device, this.field.heightMap);
            const format = (0, ShaderChunks_mjs_2.getTextureType)(heightFormat);
            const bufFormat = getHeightMapChunkBufferType(device, format);
            const dataChunkSize = this.field.heightMap.dataChunkSize;
            const chunks = this.field.heightMap.getChunksBuffers(bufFormat);
            this._format = heightFormat;
            this._textureLevelsType = bufFormat;
            this._texture = new pc.Texture(device, {
                width: dataChunkSize,
                height: dataChunkSize,
                format: format,
                mipmaps: false,
                minFilter: pc.FILTER_NEAREST,
                magFilter: pc.FILTER_NEAREST,
                addressU: pc.ADDRESS_CLAMP_TO_EDGE,
                addressV: pc.ADDRESS_CLAMP_TO_EDGE,
                addressW: pc.ADDRESS_CLAMP_TO_EDGE,
                flipY: device.isWebGPU,
                arrayLength: chunks.length,
                levels: [chunks]
            });
        }
        updateHeightMapChunk(chunkX, chunkZ) {
            // The height map is updated by updating the entire chunk,
            // which is sufficient if the chunk size is not large.
            const dataChunkSize = this.field.heightMap.dataChunkSize;
            const level = this.field.heightMap.getChunkIndex(chunkX, chunkZ);
            const buffer = this.field.heightMap.getChunkBuffer(this._textureLevelsType, chunkX, chunkZ);
            if (this._app.graphicsDevice.isWebGL2) {
                const gl = this._app.graphicsDevice.gl;
                const textureFormat = this._texture.impl._glFormat;
                const texturePixelT = this._texture.impl._glPixelType;
                const textureTarget = this._texture.impl._glTarget;
                const textureObject = this._texture.impl._glTexture;
                gl.bindTexture(textureTarget, textureObject);
                gl.texSubImage3D(gl.TEXTURE_2D_ARRAY, 0, 0, 0, level, dataChunkSize, dataChunkSize, 1, textureFormat, texturePixelT, buffer);
            }
            else if (this._app.graphicsDevice.isWebGPU) {
                const webgpu = this._app.graphicsDevice.wgpu;
                const texture = (this._texture.impl.gpuTexture);
                webgpu.queue.writeTexture({
                    texture: texture,
                    origin: [0, 0, level]
                }, buffer, {
                    offset: 0,
                    bytesPerRow: dataChunkSize * 4, // always 4 for rgba format
                    rowsPerImage: dataChunkSize
                }, {
                    width: dataChunkSize,
                    height: dataChunkSize
                });
            }
        }
        updateHeightMap(zone) {
            // Ignore update if height map need upload
            if (this._texture._needsUpload) {
                return;
            }
            this._forEach(zone, this.field.heightMap.dataChunkSize, this.field.heightMap.dataNumChunksX, this.field.heightMap.dataNumChunksZ, (patchIndex, x, z) => {
                this.updateHeightMapChunk(x, z);
            });
        }
    }
    exports.default = GPUHeightMapBuffer;
    function getHeightMapFormat(graphicsDevice, heightMap) {
        let hmFormat = (0, Utils_mjs_5.checkSupportR32FTexture)(graphicsDevice) ? 'r32f' : 'rgba';
        if (heightMap instanceof CompressedPatchedHeightMap_mjs_1.default) {
            hmFormat = heightMap.compressAlgoritm === 'x4' ? 'rgbaX4' : 'rgbaX2';
        }
        return hmFormat;
    }
    function getHeightMapChunkBufferType(graphicsDevice, format) {
        if (format === pc.PIXELFORMAT_R32F) {
            return Float32Array;
        }
        if (format === pc.PIXELFORMAT_RG16U) {
            return Uint16Array;
        }
        if (format === pc.PIXELFORMAT_RGBA8U) {
            return Uint8Array;
        }
        throw new Error('Unsupported format');
    }
});
define("src/Heightfield/GPUBuffersManager", ["require", "exports", "src/Core/CoordsBuffer"], function (require, exports, CoordsBuffer_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class GPUBuffersManager {
        get heightMap() { return this._heightMap; }
        get sharedIndexBuffer() { return this._sharedIndexBuffer; }
        get sharedVertexBuffer() { return this._sharedVertexBuffer; }
        constructor(heightMap) {
            this._heightMap = heightMap;
            this.updateIndexBuffer();
            this.updateVertexBuffer();
        }
        destroy() {
            var _a, _b;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._sharedVertexBuffer) === null || _b === void 0 ? void 0 : _b.destroy();
        }
        _buildVertexFormat(graphicsDevice, vertexBuffer) {
            const coordsFormat = (vertexBuffer.patchVertexBufferTyped instanceof Uint8Array) ? pc.TYPE_UINT8 : pc.TYPE_UINT16;
            const vertexDesc = [{
                    semantic: pc.SEMANTIC_POSITION,
                    components: CoordsBuffer_mjs_2.coordsVertexSize,
                    type: coordsFormat,
                    normalize: false,
                    asInt: true
                }];
            return new pc.VertexFormat(graphicsDevice, vertexDesc, vertexBuffer.patchVertexBufferLength);
        }
        updateIndexBuffer() {
            var _a;
            const graphicsDevice = this._heightMap.app.graphicsDevice;
            const patchIndices = this._heightMap.field.patchIndices;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            this._sharedIndexBuffer = new pc.IndexBuffer(graphicsDevice, pc.INDEXFORMAT_UINT32, patchIndices.length, pc.BUFFER_STATIC, patchIndices, { storage: false });
        }
        updateVertexBuffer() {
            var _a;
            const graphicsDevice = this._heightMap.app.graphicsDevice;
            const coordBuffer = this._heightMap.field.patchVertices;
            const bufferData = coordBuffer.patchVertexBufferData;
            const format = this._buildVertexFormat(graphicsDevice, coordBuffer);
            (_a = this._sharedVertexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            this._sharedVertexBuffer = new pc.VertexBuffer(graphicsDevice, format, format.vertexCount, {
                usage: pc.BUFFER_STATIC,
                storage: false,
                data: bufferData,
            });
        }
        _buildInstancingVertexFormat(instancer) {
            const graphicsDevice = this._heightMap.app.graphicsDevice;
            const type = instancer.bufferType === Uint16Array ? pc.TYPE_UINT16 :
                instancer.bufferType === Uint8Array ? pc.TYPE_UINT8 :
                    pc.TYPE_FLOAT32;
            return new pc.VertexFormat(graphicsDevice, [{
                    semantic: pc.SEMANTIC_ATTR10,
                    components: instancer.itemBufferSize,
                    type: type,
                    normalize: false,
                    asInt: true
                }]);
        }
        buildInstancingVertexBuffer(instancer, data) {
            const vertexFormat = this._buildInstancingVertexFormat(instancer);
            const numVertices = data.length / instancer.itemBufferSize;
            return new pc.VertexBuffer(vertexFormat.device, vertexFormat, numVertices, {
                usage: pc.BUFFER_GPUDYNAMIC,
                data: data,
                storage: false,
            });
        }
    }
    exports.default = GPUBuffersManager;
});
define("src/Heightfield/GPUWireframeBuffersManager", ["require", "exports", "src/Core/LodInfo"], function (require, exports, LodInfo_mjs_5) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    const offsets = [[0, 1], [1, 2], [2, 0]];
    class GPUWireframeBufferManager {
        get lodInfo() { return this._lodInfo; }
        get buffersManager() { return this._byffersManager; }
        constructor(byffersManager, lodInfo) {
            this._byffersManager = byffersManager;
            this._lodInfo = lodInfo;
            this._fillBuffers();
        }
        _fillBuffers() {
            this._data = new Array(this._lodInfo.length);
            for (let lodCore = 0; lodCore < this._data.length; lodCore++) {
                const arr = new Array(LodInfo_mjs_5.LEFT);
                for (let l = 0; l < LodInfo_mjs_5.LEFT; l++) {
                    arr[l] = new Array(LodInfo_mjs_5.RIGHT);
                    for (let r = 0; r < LodInfo_mjs_5.RIGHT; r++) {
                        arr[l][r] = new Array(LodInfo_mjs_5.TOP);
                        for (let t = 0; t < LodInfo_mjs_5.TOP; t++) {
                            arr[l][r][t] = new Array(LodInfo_mjs_5.BOTTOM);
                            for (let b = 0; b < LodInfo_mjs_5.BOTTOM; b++) {
                                arr[l][r][t][b] = {
                                    buffer: null,
                                    primitive: {
                                        type: pc.PRIMITIVE_LINES,
                                        base: 0,
                                        baseVertex: 0,
                                        count: 0,
                                        indexed: true
                                    }
                                };
                            }
                        }
                    }
                }
                this._data[lodCore] = arr;
            }
        }
        _recreateWireframeData(lod) {
            var _a;
            const lodInfo = this._lodInfo[lod.core].info[lod.left][lod.right][lod.top][lod.bottom];
            const bufferScope = this._data[lod.core][lod.left][lod.right][lod.top][lod.bottom];
            (_a = bufferScope.buffer) === null || _a === void 0 ? void 0 : _a.destroy();
            const indexBuffer = this._byffersManager.sharedIndexBuffer;
            const numVertices = this._byffersManager.sharedVertexBuffer.numVertices;
            const base = lodInfo.start;
            const count = lodInfo.count;
            const srcIndices = new Uint32Array(indexBuffer.storage);
            const tmpIndices = [];
            const seen = new Set();
            for (let j = base; j < base + count; j += 3) {
                for (let k = 0; k < 3; k++) {
                    const i1 = srcIndices[j + offsets[k][0]];
                    const i2 = srcIndices[j + offsets[k][1]];
                    const hash = (i1 > i2) ? ((i2 * numVertices) + i1) : ((i1 * numVertices) + i2);
                    if (!seen.has(hash)) {
                        seen.add(hash);
                        tmpIndices.push(i1, i2);
                    }
                }
            }
            const dstIndices = new Uint32Array(tmpIndices);
            bufferScope.primitive.count = dstIndices.length;
            bufferScope.buffer = new pc.IndexBuffer(indexBuffer.device, pc.INDEXFORMAT_UINT32, dstIndices.length, pc.BUFFER_STATIC, dstIndices, { storage: false });
        }
        _getOrCreateWireframeData(lod) {
            const bufferScope = this._data[lod.core][lod.left][lod.right][lod.top][lod.bottom];
            if (!bufferScope.buffer) {
                this._recreateWireframeData(lod);
            }
            return bufferScope;
        }
        get(lod) {
            return this._getOrCreateWireframeData(lod);
        }
        freeData(lod) {
            var _a;
            const bufferScope = this._data[lod.core][lod.left][lod.right][lod.top][lod.bottom];
            (_a = bufferScope.buffer) === null || _a === void 0 ? void 0 : _a.destroy();
            bufferScope.buffer = null;
        }
        free() {
            for (let core = 0; core < this._data.length; core++) {
                for (let left = 0; left < LodInfo_mjs_5.LEFT; left++) {
                    for (let right = 0; right < LodInfo_mjs_5.RIGHT; right++) {
                        for (let top = 0; top < LodInfo_mjs_5.TOP; top++) {
                            for (let bottom = 0; bottom < LodInfo_mjs_5.BOTTOM; bottom++) {
                                this.freeData({ core, left, right, top, bottom });
                            }
                        }
                    }
                }
            }
        }
        destroy() {
            this.free();
        }
    }
    exports.default = GPUWireframeBufferManager;
});
define("src/Heightfield/MeshInstanceFactory", ["require", "exports", "src/Heightfield/ShaderChunks", "src/Heightfield/PatchCombineInstancing", "src/Heightfield/PatchInstancing"], function (require, exports, ShaderChunks_mjs_3, PatchCombineInstancing_mjs_2, PatchInstancing_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    PatchCombineInstancing_mjs_2 = __importDefault(PatchCombineInstancing_mjs_2);
    PatchInstancing_mjs_2 = __importDefault(PatchInstancing_mjs_2);
    class MeshInstanceFactory {
        get aabb() { return this._aabb; }
        get buffersManager() { return this._buffersManager; }
        get wireframeBuffersManager() { return this._wireframeBuffersManager; }
        constructor(buffersManager, wireframeBuffersManager) {
            this._aabb = new pc.BoundingBox();
            this._buffersManager = buffersManager;
            this._wireframeBuffersManager = wireframeBuffersManager;
            this.updateAabb();
        }
        updateAabb() {
            const field = this._buffersManager.heightMap.field;
            const halfWidth = field.width / 2;
            const halfDepth = field.depth / 2;
            this._aabb.setMinMax(new pc.Vec3(-halfWidth, 0, -halfDepth), new pc.Vec3(+halfWidth, field.maxHeight, +halfDepth));
        }
        createInstancingMesh(entity, material, lodInfo, primitiveInfo, instancer, data) {
            const graphicsDevice = this._buffersManager.heightMap.app.graphicsDevice;
            const patchMesh = new pc.Mesh(graphicsDevice);
            const primitive = patchMesh.primitive[0];
            const instancingBuf = this._buffersManager.buildInstancingVertexBuffer(instancer, data);
            patchMesh.aabb = this.aabb;
            patchMesh.indexBuffer[0] = this._buffersManager.sharedIndexBuffer;
            patchMesh.vertexBuffer = this._buffersManager.sharedVertexBuffer;
            primitive.type = pc.PRIMITIVE_TRIANGLES;
            primitive.base = primitiveInfo.start;
            primitive.count = primitiveInfo.count;
            primitive.indexed = true;
            const patchMeshInstance = new pc.MeshInstance(patchMesh, material, entity);
            patchMeshInstance.cull = false;
            patchMeshInstance.visible = false;
            patchMeshInstance.visibleThisFrame = false;
            patchMeshInstance.castShadow = false;
            patchMeshInstance.receiveShadow = false;
            patchMeshInstance.setParameter(ShaderChunks_mjs_3.patchLodCoreParamName, lodInfo.core, 0xffffffff);
            patchMeshInstance.setInstancing(instancingBuf, false);
            patchMeshInstance.setCustomAabb(this.aabb);
            return patchMeshInstance;
        }
        createPatchMesh(patchIndex, entity, material) {
            const field = this._buffersManager.heightMap.field;
            const graphicsDevice = this._buffersManager.heightMap.app.graphicsDevice;
            const patchMesh = new pc.Mesh(graphicsDevice);
            const primitive = patchMesh.primitive[0];
            patchMesh.aabb = this.aabb;
            patchMesh.indexBuffer[0] = this._buffersManager.sharedIndexBuffer;
            patchMesh.vertexBuffer = this._buffersManager.sharedVertexBuffer;
            primitive.type = pc.PRIMITIVE_TRIANGLES;
            primitive.base = 0;
            primitive.count = 0;
            primitive.indexed = true;
            const patchMeshInstance = new pc.MeshInstance(patchMesh, material, entity);
            patchMeshInstance.cull = false;
            patchMeshInstance.visible = false;
            patchMeshInstance.visibleThisFrame = false;
            patchMeshInstance.castShadow = false;
            patchMeshInstance.receiveShadow = false;
            const patchX = patchIndex % field.numPatchesX;
            const patchZ = patchIndex / field.numPatchesX | 0;
            const minX = patchX * (field.patchSize - 1);
            const minZ = patchZ * (field.patchSize - 1);
            patchMeshInstance.setParameter(ShaderChunks_mjs_3.patchCoordOffsetParamName, [minX, minZ], 0xffffffff);
            patchMeshInstance.setInstancing(null);
            patchMeshInstance.setCustomAabb(this.aabb);
            return patchMeshInstance;
        }
        destroyMesh(meshInstance) {
            var _a, _b, _c, _d;
            // dont destroy shared index and vertex buffers and wireframe shared index buffer
            if (meshInstance.mesh) {
                meshInstance.mesh.indexBuffer = [null];
                meshInstance.mesh.vertexBuffer = null;
            }
            meshInstance.destroy();
            (_a = meshInstance.mesh) === null || _a === void 0 ? void 0 : _a.destroy();
            if (meshInstance.instancingData) {
                (_c = (_b = meshInstance.instancingData).destroy) === null || _c === void 0 ? void 0 : _c.call(_b);
                (_d = meshInstance.instancingData.vertexBuffer) === null || _d === void 0 ? void 0 : _d.destroy();
            }
        }
        bindDependenciesToMaterial(instancing, material, update = true) {
            var _a;
            const heightMapBuffer = this._buffersManager.heightMap;
            const instancingType = instancing instanceof PatchCombineInstancing_mjs_2.default ? 'combine' :
                instancing instanceof PatchInstancing_mjs_2.default ? 'simple' :
                    false;
            material.setAttribute(ShaderChunks_mjs_3.patchInstCoordOffsetAttrName, pc.SEMANTIC_ATTR10);
            material.setAttribute(ShaderChunks_mjs_3.vertexCoordAttrName, pc.SEMANTIC_POSITION);
            material.setParameter(ShaderChunks_mjs_3.heightMapParamName, heightMapBuffer.texture);
            material.setParameter(ShaderChunks_mjs_3.patchLodCoreParamName, 0);
            if (instancingType) {
                material.deleteParameter(ShaderChunks_mjs_3.patchCoordOffsetParamName);
            }
            else {
                material.setParameter(ShaderChunks_mjs_3.patchCoordOffsetParamName, [0, 0]);
            }
            const pcVersion = `v${pc.version[0]}`;
            const field = heightMapBuffer.field;
            const chunksStore = (0, ShaderChunks_mjs_3.getFieldShaderChunks)({
                width: field.width,
                depth: field.depth,
                patchSize: field.patchSize,
                heightMapChunkSize: field.heightMap.dataChunkSize,
                heightMapFormat: heightMapBuffer.format,
                engineVersion: pcVersion,
                instancing: instancingType,
            });
            const chunkNames = Object.keys(chunksStore);
            const shaderChunks = (_a = material.getShaderChunks) === null || _a === void 0 ? void 0 : _a.call(material, pc.SHADERLANGUAGE_GLSL);
            if (shaderChunks) {
                for (let chunkName of chunkNames) {
                    shaderChunks.set(chunkName, chunksStore[chunkName]);
                }
                material.shaderChunksVersion = pc.CHUNKAPI_1_70;
            }
            else {
                const chunks = material.chunks;
                for (let chunkName of chunkNames) {
                    chunks[chunkName] = chunksStore[chunkName];
                }
                chunks.APIVersion = pc.CHUNKAPI_1_70;
            }
            if (update) {
                material.update();
            }
        }
    }
    exports.default = MeshInstanceFactory;
});
define("src/Heightfield/EntityPatchesMesh", ["require", "exports", "src/Core/SquareIterator", "src/Heightfield/PatchCombineInstancing", "src/Heightfield/PatchInstancing", "src/Heightfield/ShaderChunks"], function (require, exports, SquareIterator_mjs_2, PatchCombineInstancing_mjs_3, PatchInstancing_mjs_3, ShaderChunks_mjs_4) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    SquareIterator_mjs_2 = __importDefault(SquareIterator_mjs_2);
    PatchCombineInstancing_mjs_3 = __importDefault(PatchCombineInstancing_mjs_3);
    PatchInstancing_mjs_3 = __importDefault(PatchInstancing_mjs_3);
    class EntityPatchesMesh extends SquareIterator_mjs_2.default {
        static createMaterial() {
            const material = new pc.StandardMaterial();
            material.name = "HeightfieldMaterial";
            material.setAttribute(ShaderChunks_mjs_4.patchInstCoordOffsetAttrName, pc.SEMANTIC_ATTR10);
            material.setAttribute(ShaderChunks_mjs_4.vertexCoordAttrName, pc.SEMANTIC_POSITION);
            return material;
        }
        get instancing() { return this._instancing; }
        get meshFactory() { return this._meshFactory; }
        get meshInstanceArray() { return this._meshInstanceArray; }
        get aabb() { return this._meshFactory.aabb; }
        get material() { return this._material; }
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        constructor(meshFactory, entity) {
            super(meshFactory.buffersManager.heightMap.field);
            this._patchSize = this.field.patchSize;
            this._numPatchesX = this.field.numPatchesX;
            this._numPatchesZ = this.field.numPatchesZ;
            this._entity = entity;
            this._material = EntityPatchesMesh.createMaterial();
            this._meshFactory = meshFactory;
            this._patchAvalableCount = 0;
            this._changesIds = [];
            this._instancingType = false;
            this._prevUseMeshBag = false;
            this._meshInstanceArray = new Array(this._numPatchesX * this._numPatchesZ);
            this._meshFactory.bindDependenciesToMaterial(this.instancing, this._material, true);
        }
        _forceUpdateRenderComponent() {
            let append = false; // destroy prev meshInstances by default
            const count = this.instancing
                ? this.instancing.meshInstanceCount
                : this._patchAvalableCount;
            const meshInstances = new Array(count);
            if (this.instancing) {
                this.instancing.appendMeshInstances(meshInstances);
            }
            else {
                // if instancing was used, then we delete all previous instances
                // or use custom renderer
                append = !this._prevUseMeshBag;
                let i = 0;
                for (let patchIndex = 0; patchIndex < this._meshInstanceArray.length; patchIndex++) {
                    const patchMeshInstance = this._meshInstanceArray[patchIndex];
                    if (patchMeshInstance) {
                        meshInstances[i++] = patchMeshInstance;
                    }
                }
                this._changesIds.length = 0;
            }
            this._prevUseMeshBag = !!this.instancing;
            if (this._entity.render) {
                // TODO: https://github.com/playcanvas/engine/issues/6680
                if (append) {
                    this._entity.render._meshInstances.length = 0;
                }
                this._entity.render.meshInstances = meshInstances;
            }
            else {
                // TODO: add custom layers
                this._entity.addComponent('render', {
                    meshInstances: meshInstances
                });
            }
            // Update default values
            for (const meshInstance of meshInstances) {
                meshInstance.cull = false;
                meshInstance.castShadow = false;
                meshInstance.receiveShadow = false;
            }
        }
        updateAabb() {
            for (const meshInstance of this._meshInstanceArray) {
                if (meshInstance) {
                    meshInstance.setCustomAabb(this._meshFactory.aabb);
                    meshInstance.mesh.aabb = this._meshFactory.aabb;
                }
            }
            if (this.instancing) {
                this.instancing.forEach(item => {
                    if (item.object) {
                        item.object.setCustomAabb(this._meshFactory.aabb);
                        item.object.mesh.aabb = this._meshFactory.aabb;
                    }
                });
            }
        }
        updateRenderComponent() {
            if (this.instancing || this._changesIds.length === 0 || !this._entity.enabled) {
                return;
            }
            this._forceUpdateRenderComponent();
        }
        _addPatchMeshInstance(patchIndex, meshInstance) {
            if (this._meshInstanceArray[patchIndex]) {
                throw new Error('Mesh instance has already been added');
            }
            this._meshInstanceArray[patchIndex] = meshInstance;
            this._changesIds.push(patchIndex);
            this._patchAvalableCount++;
        }
        getOrCreatePatchMesh(patchIndex) {
            let patch = this._meshInstanceArray[patchIndex];
            if (!patch) {
                patch = this._meshFactory.createPatchMesh(patchIndex, this._entity, this._material);
                this._addPatchMeshInstance(patchIndex, patch);
            }
            return patch;
        }
        destroyPatchMesh(patchIndex) {
            const patchMeshInstance = this._meshInstanceArray[patchIndex];
            if (patchMeshInstance) {
                this._meshFactory.destroyMesh(patchMeshInstance);
                this._patchAvalableCount--;
                this._changesIds.push(patchIndex);
                delete this._meshInstanceArray[patchIndex];
            }
        }
        destroyPatchesMesh() {
            for (let i = 0; i < this._meshInstanceArray.length; i++) {
                this.destroyPatchMesh(i);
            }
        }
        _cleanMeshes() {
            var _a;
            // Destroy for recreate
            (_a = this._instancing) === null || _a === void 0 ? void 0 : _a.destroy((mesh) => {
                this._meshFactory.destroyMesh(mesh);
            });
            // Destroy patches meshes, they will not be used in custom or instanced rendering
            if (this._instancing) {
                this.destroyPatchesMesh();
            }
        }
        setInstancingType(type) {
            if (this._instancingType === type) {
                return;
            }
            this._cleanMeshes();
            this._instancingType = type;
            this._instancing = type === 'combine' ? new PatchCombineInstancing_mjs_3.default() :
                type === 'simple' ? new PatchInstancing_mjs_3.default() :
                    undefined;
            this._meshFactory.bindDependenciesToMaterial(this._instancing, this._material, true);
            this.updateMeshes();
        }
        updatePatchesMeshMaterial() {
            const field = this._meshFactory.buffersManager.heightMap.field;
            const numPatchesX = field.numPatchesX;
            const numPatchesZ = field.numPatchesZ;
            for (let z = 0; z < numPatchesZ; z++) {
                for (let x = 0; x < numPatchesX; x++) {
                    const index = z * numPatchesX + x;
                    const meshInstance = this._meshInstanceArray[index];
                    if (meshInstance) {
                        meshInstance.material = this._material;
                    }
                }
            }
        }
        updateMeshes() {
            this._cleanMeshes();
            if (this.instancing) {
                this.instancing.build(this._meshFactory.buffersManager.heightMap.field, (lodInfo, primitiveInfo, data) => {
                    return this._meshFactory.createInstancingMesh(this._entity, this._material, lodInfo, primitiveInfo, this.instancing, data);
                });
            }
            else {
                this.updatePatchesMeshMaterial();
            }
            this._forceUpdateRenderComponent();
        }
    }
    exports.default = EntityPatchesMesh;
});
define("src/Heightfield/Enums", ["require", "exports", "src/Extras/EnumConverter"], function (require, exports, EnumConverter_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.fieldHeightsCompressAlgoritm = exports.fieldHeightsCompressAlgoritmDefault = exports.fieldPatchSizeEnum = exports.fieldPatchSizeEnumDefault = exports.fieldSizeEnum = exports.fieldSizeEnumDefault = void 0;
    exports.fieldSizeEnumDefault = 513;
    exports.fieldSizeEnum = (0, EnumConverter_mjs_1.mapEnum)({
        '128': 129,
        '256': 257,
        '512': 513,
        '1024': 1025,
        '2048': 2049,
        '4096': 4097,
        '8192': 8193,
        '16384': 16385,
    });
    exports.fieldPatchSizeEnumDefault = 33;
    exports.fieldPatchSizeEnum = (0, EnumConverter_mjs_1.mapEnum)({
        '16': 17,
        '32': 33,
        '64': 65,
        '128': 129,
        '256': 257,
        '512': 513,
        '1024': 1025,
        '2048': 2049,
    });
    exports.fieldHeightsCompressAlgoritmDefault = 'none';
    exports.fieldHeightsCompressAlgoritm = (0, EnumConverter_mjs_1.mapEnum)({
        'None': 'none',
        'X2': 'x2',
        'X4': 'x4'
    });
});
define("src/Heightfield/Patch", ["require", "exports", "src/Core/LodState"], function (require, exports, LodState_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchState = void 0;
    class PatchState {
        constructor() {
            this.visible = false;
            this.lod = LodState_mjs_2.defaultPatchLod;
            this.indicesBaseIndex = 0;
            this.indicesCount = 0;
        }
    }
    exports.PatchState = PatchState;
    class Patch extends PatchState {
        constructor(index, x, z, minX, minZ, size) {
            super();
            this.index = index;
            this.size = size;
            this.x = x;
            this.z = z;
            this.minX = minX;
            this.minZ = minZ;
        }
    }
    exports.default = Patch;
});
define("src/Heightfield/PatchesRenderPreparer", ["require", "exports", "src/Heightfield/ShaderChunks", "src/Heightfield/EntityPatchesMesh", "src/Heightfield/Patch"], function (require, exports, ShaderChunks_mjs_5, EntityPatchesMesh_mjs_1, Patch_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    EntityPatchesMesh_mjs_1 = __importDefault(EntityPatchesMesh_mjs_1);
    Patch_mjs_1 = __importDefault(Patch_mjs_1);
    class PatchesRenderPreparer extends EntityPatchesMesh_mjs_1.default {
        get lodState() { return this._lodState; }
        get bufferArray() { return this._bufferArray; }
        get wireframe() { return this._wireframe; }
        set wireframe(v) {
            this._wireframe = v;
            this._updateMeshes();
        }
        get castShadow() { return this._castShadow; }
        set castShadow(v) {
            this._castShadow = v;
            this._updateMeshes();
        }
        get receiveShadow() { return this._receiveShadow; }
        set receiveShadow(v) {
            this._receiveShadow = v;
            this._updateMeshes();
        }
        constructor(lodSate, meshFactory, entity, options) {
            var _a, _b, _c;
            super(meshFactory, entity);
            this._lodState = lodSate;
            this._wireframe = (_a = options.wireframe) !== null && _a !== void 0 ? _a : false;
            this._castShadow = (_b = options.castShadow) !== null && _b !== void 0 ? _b : false;
            this._receiveShadow = (_c = options.receiveShadow) !== null && _c !== void 0 ? _c : false;
            this._bufferArray = new Array(this.meshInstanceArray.length);
        }
        _updateMesh(meshInstance, lod) {
            if (meshInstance) {
                meshInstance.castShadow = this._castShadow;
                meshInstance.receiveShadow = this._receiveShadow;
                const newRenderStyle = this._wireframe ? pc.RENDERSTYLE_WIREFRAME : pc.RENDERSTYLE_SOLID;
                // @ts-ignore
                meshInstance._renderStyle = newRenderStyle;
                if (this._wireframe) {
                    const wireframeData = this.meshFactory.wireframeBuffersManager.get(lod);
                    meshInstance.mesh.indexBuffer[pc.RENDERSTYLE_WIREFRAME] = wireframeData.buffer;
                    meshInstance.mesh.primitive[pc.RENDERSTYLE_WIREFRAME] = wireframeData.primitive;
                }
            }
        }
        _freeIfNeedWireframe(meshInstance, lod) {
            if (meshInstance && !this._wireframe) {
                delete meshInstance.mesh.indexBuffer[pc.RENDERSTYLE_WIREFRAME];
                delete meshInstance.mesh.primitive[pc.RENDERSTYLE_WIREFRAME];
            }
        }
        _updateMeshes() {
            var _a;
            for (let i = 0; i < this.meshInstanceArray.length; i++) {
                const meshInstance = this.meshInstanceArray[i];
                const buffer = this._bufferArray[i];
                this._updateMesh(meshInstance, buffer.lod);
                this._freeIfNeedWireframe(meshInstance, buffer.lod);
            }
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.forEach(item => {
                this._updateMesh(item.object, item.lod);
                this._freeIfNeedWireframe(item.object, item.lod);
            });
        }
        updateMeshes() {
            super.updateMeshes();
            this._updateMeshes();
        }
        initPatch(patchX, patchZ, size, minX, minZ, info, lodInfo) {
            const index = patchZ * this._numPatchesX + patchX;
            const buffer = new Patch_mjs_1.default(index, patchX, patchZ, minX, minZ, size);
            buffer.lod = lodInfo;
            buffer.indicesBaseIndex = info.start;
            buffer.indicesCount = info.count;
            this._bufferArray[index] = buffer;
        }
        updatePatch(patchX, patchZ, visible, info, lod) {
            const index = patchZ * this._numPatchesX + patchX;
            const buffer = this._bufferArray[index];
            buffer.visible = visible;
            buffer.indicesBaseIndex = info.start;
            buffer.indicesCount = info.count;
            buffer.lod = lod;
            if (this.instancing) {
                if (visible) {
                    const inst = this.instancing.increment(lod, buffer);
                    if (inst.count === 1 && inst.object) {
                        const meshInstance = inst.object;
                        meshInstance.visible = true;
                        meshInstance.castShadow = this._castShadow;
                        meshInstance.receiveShadow = this._receiveShadow;
                    }
                }
            }
            else {
                const meshInstance = this.getOrCreatePatchMesh(index);
                const mesh = meshInstance.mesh;
                const primitive = mesh.primitive[0];
                primitive.base = info.start;
                primitive.count = info.count;
                meshInstance.visible = visible;
                meshInstance.setParameter(ShaderChunks_mjs_5.patchLodCoreParamName, lod.core);
                this._updateMesh(meshInstance, lod);
            }
        }
        beforeUpdate() {
            var _a;
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.begin(false, false);
        }
        afterUpdate() {
            var _a;
            this.updateRenderComponent();
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.end();
        }
    }
    exports.default = PatchesRenderPreparer;
});
define("src/Scripts/FlyCamera", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.flyCameraScriptName = exports.FlyCamera = void 0;
    class FlyCamera extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this.mobileControl = false;
        }
        initialize() {
            // Camera euler angle rotation around x and y axes
            const eulers = this.entity.getLocalEulerAngles();
            this.ex = (eulers.z - eulers.x);
            this.ey = (eulers.z - eulers.y);
            this.translateLoc = pc.Vec3.ZERO.clone();
            this.moved = false;
            this.rightDown = false;
            this.middleDown = false;
            // Disabling the context menu stops the browser displaying a menu when
            // you right-click the page
            if (this.app.mouse) {
                this.app.mouse.disableContextMenu();
                this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);
                this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);
                this.app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);
            }
        }
        append(x, y) {
            this.ex += x;
            this.ey += y;
            this.ex = pc.math.clamp(this.ex, -90, 90);
        }
        translate(x, y, z) {
            this.translateLoc.x += x;
            this.translateLoc.y += y;
            this.translateLoc.z += z;
        }
        update(dt) {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
            const app = this.app;
            let speed = this.speed;
            if ((_a = app.keyboard) === null || _a === void 0 ? void 0 : _a.isPressed(pc.KEY_SPACE)) {
                speed = this.slowSpeed;
            }
            if ((_b = app.keyboard) === null || _b === void 0 ? void 0 : _b.isPressed(pc.KEY_SHIFT)) {
                speed = this.fastSpeed;
            }
            // Joypad control
            const joystickMover = touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.sticks['joystick0'];
            const joystickRoter = touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.sticks['joystick1'];
            if (this.mobileControls && (touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.buttons.wasPressed('button2'))) {
                this.mobileControl = !this.mobileControl;
                this.mobileControls.enabled = this.mobileControl;
            }
            if (joystickRoter) {
                this.append(joystickRoter.y, -joystickRoter.x);
            }
            if (joystickMover) {
                this.translate(speed * joystickMover.x * dt, 0, -speed * joystickMover.y * dt);
            }
            // Update the camera's position
            if (((_c = app.keyboard) === null || _c === void 0 ? void 0 : _c.isPressed(pc.KEY_UP)) || ((_d = app.keyboard) === null || _d === void 0 ? void 0 : _d.isPressed(pc.KEY_W))) {
                this.translate(0, 0, -speed * dt);
            }
            else if (((_e = app.keyboard) === null || _e === void 0 ? void 0 : _e.isPressed(pc.KEY_DOWN)) || ((_f = app.keyboard) === null || _f === void 0 ? void 0 : _f.isPressed(pc.KEY_S))) {
                this.translate(0, 0, speed * dt);
            }
            if (((_g = app.keyboard) === null || _g === void 0 ? void 0 : _g.isPressed(pc.KEY_LEFT)) || ((_h = app.keyboard) === null || _h === void 0 ? void 0 : _h.isPressed(pc.KEY_A))) {
                this.translate(-speed * dt, 0, 0);
            }
            else if (((_j = app.keyboard) === null || _j === void 0 ? void 0 : _j.isPressed(pc.KEY_RIGHT)) || ((_k = app.keyboard) === null || _k === void 0 ? void 0 : _k.isPressed(pc.KEY_D))) {
                this.translate(speed * dt, 0, 0);
            }
            // Update the camera's TRS
            this.entity.setLocalEulerAngles(this.ex, this.ey, 0);
            this.entity.translateLocal(this.translateLoc);
            this.translateLoc.set(0, 0, 0);
            // Update frustum by actual matrix
            this.app.renderer.updateCameraFrustum((_l = this.entity.camera) === null || _l === void 0 ? void 0 : _l.camera);
        }
        onMouseMove(event) {
            if (!this.mode && !pc.Mouse.isPointerLocked()) {
                return;
            }
            if (!this.rightDown &&
                !this.middleDown)
                return;
            // Update the current Euler angles, clamp the pitch.
            if (!this.moved) {
                // first move event can be very large
                this.moved = true;
                return;
            }
            if (this.rightDown) {
                this.append(-event.dy / this.sensitivity, -event.dx / this.sensitivity);
            }
            if (this.middleDown) {
                let speed = this.speed;
                if (this.app.keyboard.isPressed(pc.KEY_SHIFT)) {
                    speed = this.fastSpeed;
                }
                this.translate(-(event.dx / 5) * speed, (event.dy / 5) * speed, 0);
            }
        }
        onMouseDown(event) {
            // When the mouse button is clicked try and capture the pointer
            if (!this.mode && !pc.Mouse.isPointerLocked()) {
                this.app.mouse.enablePointerLock();
            }
            if (event.button === pc.MOUSEBUTTON_RIGHT) {
                this.rightDown = true;
            }
            if (event.button === pc.MOUSEBUTTON_MIDDLE) {
                this.middleDown = true;
            }
        }
        onMouseUp(event) {
            if (event.button === pc.MOUSEBUTTON_RIGHT) {
                this.rightDown = false;
            }
            if (event.button === pc.MOUSEBUTTON_MIDDLE) {
                this.middleDown = false;
            }
        }
    }
    exports.FlyCamera = FlyCamera;
    exports.default = FlyCamera;
    exports.flyCameraScriptName = 'flyCamera';
    pc.registerScript(FlyCamera, exports.flyCameraScriptName);
    FlyCamera.attributes.add('mobileControls', {
        type: 'entity',
    });
    FlyCamera.attributes.add('speed', {
        type: 'number',
        default: 10
    });
    FlyCamera.attributes.add('slowSpeed', {
        type: 'number',
        default: 1
    });
    FlyCamera.attributes.add('fastSpeed', {
        type: 'number',
        default: 20
    });
    FlyCamera.attributes.add('sensitivity', {
        type: 'number',
        min: 1,
        default: 5
    });
    FlyCamera.attributes.add('mode', {
        type: 'number',
        default: 0,
        enum: [{
                "Lock": 0
            }, {
                "Drag": 1
            }]
    });
});
define("src/Scripts/FpsCounter", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.fpsCounterScriptName = void 0;
    class FpsCounter extends pc.ScriptType {
        initialize() {
            const constr = window.FPSMeter;
            if (constr) {
                this.fps = new constr({
                    heat: true,
                    graph: true
                });
            }
        }
        update(dt) {
            var _a;
            (_a = this.fps) === null || _a === void 0 ? void 0 : _a.tick();
        }
    }
    exports.default = FpsCounter;
    exports.fpsCounterScriptName = 'FpsCounter';
    pc.registerScript(FpsCounter, exports.fpsCounterScriptName);
});
define("src/Scripts/Terrain", ["require", "exports", "src/Extras/Debug", "src/Core/MidpointDispHeightfield", "src/Core/HeightfieldRaycastResult", "src/Core/HeightMap", "src/Heightfield/ColorPainter", "src/Heightfield/Enums", "src/Heightfield/ShaderChunks", "src/Core/HeightfieldShape", "src/Core/PatchedHeightMap", "src/Core/CompressedPatchedHeightMap", "src/Extras/EnumConverter", "src/AmmoIntegration/AmmoIntegration", "src/Core/LodState", "src/Heightfield/GPUHeightMapBuffer", "src/Core/PatchesSphereBuffer", "src/Core/PatchesManager", "src/Heightfield/MeshInstanceFactory", "src/Heightfield/GPUBuffersManager", "src/Heightfield/PatchesRenderPreparer", "src/Heightfield/GPUWireframeBuffersManager"], function (require, exports, Debug_mjs_1, MidpointDispHeightfield_mjs_1, HeightfieldRaycastResult_mjs_2, HeightMap_mjs_4, ColorPainter_mjs_1, Enums_mjs_1, ShaderChunks_mjs_6, HeightfieldShape_mjs_1, PatchedHeightMap_mjs_1, CompressedPatchedHeightMap_mjs_2, EnumConverter_mjs_2, AmmoIntegration_mjs_1, LodState_mjs_3, GPUHeightMapBuffer_mjs_1, PatchesSphereBuffer_mjs_1, PatchesManager_mjs_1, MeshInstanceFactory_mjs_1, GPUBuffersManager_mjs_1, PatchesRenderPreparer_mjs_1, GPUWireframeBuffersManager_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.bigTerrainEditorScriptName = exports.terrainScriptName = exports.Terrain = exports.RenderMode = void 0;
    MidpointDispHeightfield_mjs_1 = __importDefault(MidpointDispHeightfield_mjs_1);
    HeightfieldRaycastResult_mjs_2 = __importDefault(HeightfieldRaycastResult_mjs_2);
    HeightMap_mjs_4 = __importDefault(HeightMap_mjs_4);
    ColorPainter_mjs_1 = __importDefault(ColorPainter_mjs_1);
    HeightfieldShape_mjs_1 = __importDefault(HeightfieldShape_mjs_1);
    PatchedHeightMap_mjs_1 = __importDefault(PatchedHeightMap_mjs_1);
    CompressedPatchedHeightMap_mjs_2 = __importDefault(CompressedPatchedHeightMap_mjs_2);
    LodState_mjs_3 = __importDefault(LodState_mjs_3);
    GPUHeightMapBuffer_mjs_1 = __importDefault(GPUHeightMapBuffer_mjs_1);
    PatchesSphereBuffer_mjs_1 = __importDefault(PatchesSphereBuffer_mjs_1);
    PatchesManager_mjs_1 = __importDefault(PatchesManager_mjs_1);
    MeshInstanceFactory_mjs_1 = __importDefault(MeshInstanceFactory_mjs_1);
    GPUBuffersManager_mjs_1 = __importDefault(GPUBuffersManager_mjs_1);
    PatchesRenderPreparer_mjs_1 = __importDefault(PatchesRenderPreparer_mjs_1);
    GPUWireframeBuffersManager_mjs_1 = __importDefault(GPUWireframeBuffersManager_mjs_1);
    const brushMinSize = 2;
    const brushMaxSize = 250;
    const tmpMat = new pc.Mat4();
    const terrainLocalVertexPos = new pc.Vec3();
    const heightMapExt = '.hm';
    var RenderMode;
    (function (RenderMode) {
        RenderMode[RenderMode["Standard"] = 1] = "Standard";
        RenderMode[RenderMode["InstancingAccelerator"] = 2] = "InstancingAccelerator";
        RenderMode[RenderMode["CombineInstancingAccelerator"] = 3] = "CombineInstancingAccelerator";
    })(RenderMode || (exports.RenderMode = RenderMode = {}));
    class Terrain extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this._lock = 0;
            this._localCameraPosition = new pc.Vec3();
            this._roughness = 1.0;
            this._rayStart = new pc.Vec3();
            this._rayEnd = new pc.Vec3();
            this._rayDirection = new pc.Vec3();
            this._ray = new pc.Ray();
            this._cameraPos = new Array(3);
            this._lastLodGridUpdate = 0;
            this._brushSizeStep = 1;
            this._brushOpacityStep = 0.01;
            this._intersectsRayResult = false;
            this._keyAddLock = true;
            this._keySubLock = true;
        }
        get shape() { return this._heightFieldShape; }
        get object() { return this._terrain; }
        get lock() { return this._lock; }
        addLock() {
            this._lock++;
        }
        freeLock() {
            this._lock--;
        }
        postInitialize() {
            this._initializeMouse();
            this._initializeKeyboard();
            this._initBrush();
            this._initTerrain();
            this._updateMaterialParameters();
            this._updateLayers();
            this._updateBrush();
            this._updatePainterMaterial();
            this._updateMesh();
            this._updateHeightMapFromAttr();
            this.on('attr:renderMode', () => {
                this._defaultPatchesPreparer.setInstancingType(this.renderMode === RenderMode.CombineInstancingAccelerator ? 'combine' :
                    this.renderMode === RenderMode.InstancingAccelerator ? 'simple' :
                        false);
            });
            this.on('attr:castShadow', () => {
                this._defaultPatchesPreparer.castShadow = this.castShadow;
            });
            this.on('attr:receiveShadow', () => {
                this._defaultPatchesPreparer.receiveShadow = this.receiveShadow;
            });
            this.on('attr:wireframe', () => {
                this._defaultPatchesPreparer.wireframe = this.wireframe;
                if (!this.wireframe) {
                    this._wireframeBuffersManager.free();
                }
            });
            this.on('attr:activeLayer', () => {
                this._updatePainterMaterial();
            });
            this.on('attr:layers', () => {
                this._updateLayers();
            });
            this.on('attr:brush', () => {
                this._updateBrush();
                this._updatePainterMaterial();
            });
            this.on('attr:height', () => {
                this._terrain.setMaxHeight(this.height);
                this._spheresBuffer.recalculate();
                this._meshFactory.updateAabb();
                this._defaultPatchesPreparer.updateAabb();
                this._updateMaterialParameters();
            });
            this.on('attr:zFar', () => {
                this._defaultPatchesLodState.setZFar(this.zFar);
            });
        }
        _initBrush() {
            const splatMap = this.painterSettings.splatMap.resource;
            this._brushHeightMap = new HeightMap_mjs_4.default(256, 256, 100);
            this._colorPainter = new ColorPainter_mjs_1.default(this.app, splatMap, this.layer);
        }
        _updatePainterMaterial() {
            this._colorPainter.updateSettings(this.brush, this.activeLayer);
        }
        _updateBrush() {
            this._brushSize = this.brush.size | 0;
            this._brushOpacity = this.brush.opacity;
            const activeBrush = this.brush.active | 0;
            if (activeBrush === this._activeBrush) {
                return;
            }
            if (!this.brush.textures[activeBrush]) {
                console.error('Brush image unset.');
                return;
            }
            const brushTexture = this.brush.textures[activeBrush].resource;
            const brushImg = brushTexture.getSource();
            if (!brushImg) {
                console.error('Brush image unset.');
                return;
            }
            this._activeBrush = activeBrush;
            this._brushHeightMap.fromImage(brushImg);
            this._brushHeightMap.smooth(1, 1);
            console.log(this._brushHeightMap);
        }
        _initHeightMapBuffer(chunkSize) {
            // TODO: Move to terrain collider
            // TODO: Ammo js integration
            let buffer = undefined;
            if (typeof Ammo !== 'undefined') {
                buffer = (0, AmmoIntegration_mjs_1.getBuffer)(this.width, this.depth, this.patchSize, chunkSize, this.compressAlgoritm);
                const ht = this.compressAlgoritm === 'none' ? 0 :
                    this.compressAlgoritm === 'x2' ? 1 :
                        2;
                const hm = new Ammo.btAlexTerrainPatchedHeightMap(this.width, this.depth, this.patchSize, chunkSize, 0, this.height, ht, buffer.byteOffset);
                const shape = new Ammo.btAlexHeightfieldTerrainShape(hm, false);
                const groundTransform = new Ammo.btTransform();
                const position = new Ammo.btVector3(0, this.height / 2, 0);
                groundTransform.setIdentity();
                groundTransform.setOrigin(position);
                const groundMass = 0;
                const groundLocalInertia = new Ammo.btVector3(0, 0, 0);
                const groundMotionState = new Ammo.btDefaultMotionState(groundTransform);
                const groundConstrInfo = new Ammo.btRigidBodyConstructionInfo(groundMass, groundMotionState, shape, groundLocalInertia);
                const groundBody = new Ammo.btRigidBody(groundConstrInfo);
                this.app.systems.rigidbody.dynamicsWorld.addRigidBody(groundBody);
                Ammo.destroy(position);
                Ammo.destroy(groundTransform);
            }
            return buffer;
        }
        get heightMapTexture() { return this._heightMapBuffer.texture; }
        get aabb() { return this._meshFactory.aabb; }
        _initTerrain() {
            const tmpChunkSize = this.patchSize * 2 - 1;
            const chunkSize = Math.min(this.width, this.depth, tmpChunkSize);
            const buffer = this._initHeightMapBuffer(chunkSize);
            const heightMap = this.compressAlgoritm !== 'none'
                ? new CompressedPatchedHeightMap_mjs_2.default(this.width, this.depth, this.patchSize, chunkSize, this.height, this.compressAlgoritm, buffer)
                : new PatchedHeightMap_mjs_1.default(this.width, this.depth, this.patchSize, chunkSize, this.height, buffer);
            this._terrain = new MidpointDispHeightfield_mjs_1.default(heightMap);
            this._heightFieldShape = new HeightfieldShape_mjs_1.default(heightMap);
            this._raycastResult = new HeightfieldRaycastResult_mjs_2.default();
            this._spheresBuffer = new PatchesSphereBuffer_mjs_1.default(heightMap, this.entity.getWorldTransform());
            this._heightMapBuffer = new GPUHeightMapBuffer_mjs_1.default(this.app, this._terrain);
            this._buffersManager = new GPUBuffersManager_mjs_1.default(this._heightMapBuffer);
            this._wireframeBuffersManager = new GPUWireframeBuffersManager_mjs_1.default(this._buffersManager, this._terrain.lodInfo);
            this._meshFactory = new MeshInstanceFactory_mjs_1.default(this._buffersManager, this._wireframeBuffersManager);
            this._patchesManager = new PatchesManager_mjs_1.default(this._terrain, this._spheresBuffer);
            this._defaultPatchesLodState = new LodState_mjs_3.default(this._patchesManager.lodManager, this.zFar);
            this._defaultPatchesPreparer = new PatchesRenderPreparer_mjs_1.default(this._defaultPatchesLodState, this._meshFactory, this.entity, {
                wireframe: this.wireframe,
                castShadow: this.castShadow,
                receiveShadow: this.receiveShadow,
            });
            this._patchesManager.addState(this._defaultPatchesPreparer);
            console.log(this._terrain, this._heightFieldShape);
        }
        _updateMaterialParameters() {
            this._defaultPatchesPreparer.material.setParameter(ShaderChunks_mjs_6.splatMapParamName, this._colorPainter.background);
            this._defaultPatchesPreparer.material.setParameter(ShaderChunks_mjs_6.maxHeightParamName, this._terrain.maxHeight);
        }
        _updateLayers() {
            var _a;
            // TODO
            const maxCount = 5;
            const width = 1024;
            const height = 1024;
            let length = 0;
            let flags = [];
            let scales = [];
            let offsets = [];
            let diffuses = [];
            let normals = [];
            for (let i = 0; i < maxCount; i++) {
                let flag = 0;
                if (i < this.layers.length) {
                    const layer = this.layers[i];
                    const diffuse = layer.diffuse;
                    const normalMap = layer.normalMap;
                    if (diffuse) {
                        const diffuseTexture = diffuse.resource;
                        flag++;
                        length++;
                        diffuses.push(diffuseTexture.getSource());
                        scales.push(layer.size.x, layer.size.y);
                        offsets.push(layer.offset.x, layer.offset.y);
                        if (normalMap) {
                            const normalTexture = normalMap.resource;
                            flag++;
                            normals.push(normalTexture.getSource());
                        }
                    }
                }
                flags.push(flag);
            }
            (_a = this._layersDiffuse) === null || _a === void 0 ? void 0 : _a.destroy();
            //this._layersDiffuse = this.layers[0].diffuse.resource as pcx.Texture;
            this._layersDiffuse = new pc.Texture(this.app.graphicsDevice, {
                name: 'terrainLayersDiffuse',
                format: pc.PIXELFORMAT_SRGBA8,
                width: width,
                height: height,
                arrayLength: length,
                flipY: this.app.graphicsDevice.isWebGPU,
                //magFilter: pc.FILTER_LINEAR,
                //minFilter: pc.FILTER_LINEAR_MIPMAP_LINEAR,
                mipmaps: true,
                addressU: pc.ADDRESS_REPEAT,
                addressV: pc.ADDRESS_REPEAT,
                addressW: pc.ADDRESS_CLAMP_TO_EDGE,
                levels: [diffuses]
            });
            this._layersDiffuse.upload();
            console.log(this._layersDiffuse);
            this._defaultPatchesPreparer.material.setParameter(ShaderChunks_mjs_6.layersDiffuseParamName, this._layersDiffuse);
            this._defaultPatchesPreparer.material.setParameter(`${ShaderChunks_mjs_6.layersFlagsParamName}[0]`, flags);
            this._defaultPatchesPreparer.material.setParameter(`${ShaderChunks_mjs_6.layersScaleParamName}[0]`, scales);
            this._defaultPatchesPreparer.material.setParameter(`${ShaderChunks_mjs_6.layersOffsetParamName}[0]`, offsets);
        }
        _updateMesh() {
            this._defaultPatchesPreparer.setInstancingType(this.renderMode === RenderMode.CombineInstancingAccelerator ? 'combine' :
                this.renderMode === RenderMode.InstancingAccelerator ? 'simple' :
                    false);
        }
        _initializeMouse() {
            var _a, _b;
            (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.on(pc.EVENT_MOUSEMOVE, this._onMouseMove, this);
            (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.on(pc.EVENT_MOUSEWHEEL, this._onMouseWheel, this);
            this.on('destroy', () => {
                var _a, _b;
                (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.off(pc.EVENT_MOUSEMOVE, this._onMouseMove, this);
                (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.off(pc.EVENT_MOUSEWHEEL, this._onMouseWheel, this);
            });
        }
        _onMouseMove(event) {
            this._lastMouseMoveEvent = event;
        }
        _onMouseWheel(event) {
            const candidate = this._brushSize + event.wheelDelta * this._brushSizeStep;
            this._brushSize = Math.min(Math.max(candidate, brushMinSize), brushMaxSize);
        }
        _initializeKeyboard() {
            var _a, _b;
            (_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.on(pc.EVENT_KEYDOWN, this._onKeyboardDown, this);
            (_b = this.app.keyboard) === null || _b === void 0 ? void 0 : _b.on(pc.EVENT_KEYUP, this._onKeyboardUp, this);
            this.on('destroy', () => {
                var _a, _b;
                (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.off(pc.EVENT_KEYDOWN, this._onKeyboardDown, this);
                (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.off(pc.EVENT_KEYUP, this._onKeyboardUp, this);
            });
        }
        _onKeyboardDown(event) {
            if (this._keyAddLock === false && event.key === pc.KEY_ADD) {
                this._keyAddLock = true;
                this._brushOpacity = Math.max(this._brushOpacity + this._brushOpacityStep, 0);
            }
            if (this._keySubLock === false && event.key === pc.KEY_SUBTRACT) {
                this._keySubLock = true;
                this._brushOpacity = Math.min(this._brushOpacity - this._brushOpacityStep, 1);
            }
        }
        _onKeyboardUp(event) {
            if (event.key === pc.KEY_ADD) {
                this._keyAddLock = false;
            }
            else if (event.key === pc.KEY_SUBTRACT) {
                this._keySubLock = false;
            }
        }
        _updateHeightMapFromAttr() {
            return __awaiter(this, void 0, void 0, function* () {
                if (this.heightMap.file) {
                    if (!this.heightMap.file.resource) {
                        console.warn('Height map file unset.');
                        return;
                    }
                    const data = this.heightMap.file.resource;
                    const settings = {
                        adaptiveMaxHeight: true,
                        adaptiveWidthAndDepth: true,
                    };
                    yield this._terrain.loadHeightMapFromFile(data, settings, this.heightMap.smoothFactor, this.heightMap.smoothRadius);
                }
                else {
                    const texture = this.heightMap.texture;
                    if (!texture) {
                        console.warn('Height map image unset.');
                        return;
                    }
                    const resource = texture.resource;
                    const img = resource.getSource();
                    if (!img) {
                        console.warn('Height map image unset.');
                        return;
                    }
                    this._terrain.loadHeightMapFromImg(img, this.heightMap.smoothFactor, this.heightMap.smoothRadius);
                    // TODO: clear heightmap
                    resource.destroy();
                }
                this._heightMapBuffer.updateHeightMap({ minX: 0, maxX: this.width, minZ: 0, maxZ: this.depth });
                this._spheresBuffer.recalculate();
                this._meshFactory.updateAabb();
                this._defaultPatchesPreparer.updateAabb();
            });
        }
        _saveHeightMapToImg() {
            const base64 = this._terrain.heightMap.toImage();
            const image = new Image();
            image.src = base64;
            const w = window.open(undefined, '_blank');
            w.document.write(image.outerHTML);
        }
        _saveHeightMapToFile() {
            return __awaiter(this, void 0, void 0, function* () {
                const blob = yield this._terrain.heightMap.toFile();
                const blobUrl = URL.createObjectURL(blob);
                const a = document.createElement("a");
                const timestamp = new Date();
                document.body.appendChild(a);
                a.href = blobUrl;
                a.download = `hm_${+timestamp}${heightMapExt}`;
                a.click();
                URL.revokeObjectURL(blobUrl);
            });
        }
        update(dt) {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            if (this._colorPainter.painting) {
                this._colorPainter.stopPaint();
            }
            if (this.autoRender &&
                this.cameraEntity &&
                this.cameraEntity.camera) {
                const camera = this.cameraEntity.camera;
                const mat = this.entity.getWorldTransform();
                const scale = mat.getScale();
                const cameraPos = this.cameraEntity.getPosition();
                this._cameraPos[0] = cameraPos.x;
                this._cameraPos[1] = cameraPos.y;
                this._cameraPos[2] = cameraPos.z;
                this._defaultPatchesPreparer.material.setParameter(ShaderChunks_mjs_6.cameraPositionParamName, this._cameraPos);
                if (this._lastMouseMoveEvent) {
                    let hasChanges = false;
                    camera.screenToWorld(this._lastMouseMoveEvent.x, this._lastMouseMoveEvent.y, camera.nearClip, this._rayStart);
                    camera.screenToWorld(this._lastMouseMoveEvent.x, this._lastMouseMoveEvent.y, camera.farClip, this._rayEnd);
                    this._rayDirection.sub2(this._rayEnd, this._rayStart);
                    const changeRay = !this._ray.origin.equals(this._rayStart) || !this._ray.direction.equals(this._rayDirection);
                    if (changeRay) {
                        this._ray.set(this._rayStart, this._rayDirection);
                        this._raycastResult.clear();
                        this._intersectsRayResult = this._heightFieldShape.intersectsRay(mat, this._ray, this._raycastResult);
                    }
                    if (this._intersectsRayResult) {
                        const brushSizeX = this._brushSize / scale.x | 0;
                        const brushSizeZ = this._brushSize / scale.z | 0;
                        this._terrain.patchVertices.getPosition(this._raycastResult.vertexIndex, terrainLocalVertexPos);
                        if ((_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.wasPressed(pc.KEY_I)) {
                            console.log(this._raycastResult, this._localCameraPosition, terrainLocalVertexPos);
                        }
                        (0, Debug_mjs_1.drawPoint)({ center: this._raycastResult.point, radius: this._brushSize, numSegments: 10, depthTest: true, color: pc.Color.GRAY });
                        (0, Debug_mjs_1.drawDirectionVector)(this._raycastResult.point, this._raycastResult.normal, pc.Color.MAGENTA);
                        if (this._lock < 1 &&
                            ((_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.isPressed(pc.MOUSEBUTTON_LEFT))) {
                            if (this.painting) {
                                const width = this._terrain.width - 1;
                                const depth = this._terrain.depth - 1;
                                const x = terrainLocalVertexPos.x / width;
                                const y = terrainLocalVertexPos.z / depth;
                                const scaleW = brushSizeX / width;
                                const scaleH = brushSizeZ / depth;
                                this._colorPainter.startPaint(dt, x, y, scaleW, scaleH);
                            }
                            else {
                                const average = (brushSizeX + brushSizeZ) / 2;
                                const centerX = terrainLocalVertexPos.x | 0;
                                const centerZ = terrainLocalVertexPos.z | 0;
                                const zone = {
                                    minX: centerX - brushSizeX,
                                    maxX: centerX + brushSizeX + 1,
                                    minZ: centerZ - brushSizeZ,
                                    maxZ: centerZ + brushSizeZ + 1,
                                };
                                if ((_c = this.app.keyboard) === null || _c === void 0 ? void 0 : _c.isPressed(pc.KEY_ALT)) {
                                    this._terrain.smoothHeightsZone(zone, average * this._brushOpacity * dt / 10, 1);
                                }
                                else {
                                    const negative = !!((_d = this.app.keyboard) === null || _d === void 0 ? void 0 : _d.isPressed(pc.KEY_CONTROL));
                                    const appendValue = (negative ? -average : average) * this._brushOpacity * dt / 10;
                                    this._terrain.appendHeightMap(this._brushHeightMap, appendValue, zone);
                                }
                                if ((_e = this.app.keyboard) === null || _e === void 0 ? void 0 : _e.wasPressed(pc.KEY_I)) {
                                    console.log(zone);
                                }
                                this._terrain.recalculateMinMax(zone);
                                this._heightMapBuffer.updateHeightMap(zone);
                                this._spheresBuffer.recalculateZone(zone);
                                hasChanges = true;
                            }
                        }
                    }
                }
                tmpMat.invert(mat);
                tmpMat.transformPoint(camera.entity.getPosition(), this._localCameraPosition);
                this._patchesManager.updateLods(this._localCameraPosition, this.lodByYPos);
                this._patchesManager.update(camera.frustum);
                /*
                const spheres = this._spheresBuffer.spheres;
                for (let i = 0; i < spheres.length; i++) {
                    const sphere = spheres[i];
                    drawPoint({ center: sphere.center, radius: sphere.radius, numSegments: 10, depthTest: true, color: pc.Color.YELLOW });
                }
                */
            }
            if ((_f = this.app.keyboard) === null || _f === void 0 ? void 0 : _f.wasPressed(pc.KEY_L)) {
                this._defaultPatchesLodState.printLodMap();
            }
            if ((_g = this.app.keyboard) === null || _g === void 0 ? void 0 : _g.wasPressed(pc.KEY_P)) {
                this._saveHeightMapToImg();
            }
            if ((_h = this.app.keyboard) === null || _h === void 0 ? void 0 : _h.wasPressed(pc.KEY_O)) {
                this._saveHeightMapToFile();
            }
            // Debug
            //this.app.drawTexture( 0.5, -0.6, 0.5, 0.3, this.painterSettings.splatMap.resource, undefined as any);
        }
    }
    exports.Terrain = Terrain;
    exports.default = Terrain;
    exports.terrainScriptName = "Terrain";
    exports.bigTerrainEditorScriptName = "bigTerrainEditor";
    pc.registerScript(Terrain, exports.terrainScriptName);
    pc.registerScript(Terrain, exports.bigTerrainEditorScriptName);
    Terrain.attributes.add("renderMode", { type: "number", enum: (0, EnumConverter_mjs_2.mapTitleEnum)(RenderMode), default: RenderMode.Standard, });
    Terrain.attributes.add("castShadow", { type: "boolean", default: true, });
    Terrain.attributes.add("receiveShadow", { type: "boolean", default: true, });
    Terrain.attributes.add("lodByYPos", { type: "boolean", default: true, });
    Terrain.attributes.add("zFar", { type: "number", default: 5000, min: 1, step: 1, precision: 0, });
    Terrain.attributes.add("width", { type: "number", enum: Enums_mjs_1.fieldSizeEnum, default: Enums_mjs_1.fieldSizeEnumDefault, });
    Terrain.attributes.add("depth", { type: "number", enum: Enums_mjs_1.fieldSizeEnum, default: Enums_mjs_1.fieldSizeEnumDefault, });
    Terrain.attributes.add("patchSize", { type: "number", enum: Enums_mjs_1.fieldPatchSizeEnum, default: Enums_mjs_1.fieldPatchSizeEnumDefault, });
    Terrain.attributes.add("height", { type: "number", default: 10, min: 1, });
    Terrain.attributes.add("compressAlgoritm", { type: "string", enum: Enums_mjs_1.fieldHeightsCompressAlgoritm, default: Enums_mjs_1.fieldHeightsCompressAlgoritmDefault, });
    Terrain.attributes.add("layer", { type: "string", default: 'TerrainEditor', });
    Terrain.attributes.add("cameraEntity", { type: "entity" });
    Terrain.attributes.add("autoRender", { type: "boolean", default: true, });
    Terrain.attributes.add("painting", { type: "boolean", default: false, });
    Terrain.attributes.add("wireframe", { type: "boolean", default: false, });
    Terrain.attributes.add("heightMap", {
        type: 'json',
        schema: [
            {
                name: 'file',
                type: 'asset',
                assetType: 'binary',
            },
            {
                name: 'texture',
                type: "asset",
                assetType: 'texture',
            },
            {
                name: 'smoothFactor',
                description: `
                To what extent neighbors influence the new height:
                Value of 0 will ignore neighbors (no smoothing).
                Value of 1 will ignore the node old height.
            `,
                type: "number",
                default: 1,
                min: 0,
                max: 1,
            },
            {
                name: 'smoothRadius',
                description: `The radius of factor smooth.`,
                type: "number",
                default: 1,
                step: 1,
                min: 1,
            }
        ]
    });
    Terrain.attributes.add("brush", {
        type: "json",
        schema: [
            {
                name: "active",
                description: "The brush texture index.",
                type: "number",
                default: 0,
                min: 0,
                step: 1,
                precision: 0,
            },
            {
                name: "size",
                description: "The brush size",
                type: "number",
                default: 10,
                min: brushMinSize,
                max: brushMaxSize,
                step: 1,
                precision: 0,
            },
            {
                name: "opacity",
                description: "The brush opacity",
                type: "number",
                default: 0.5,
                min: 0,
                max: 1,
            },
            {
                name: "textures",
                description: "The brush textures",
                type: "asset",
                assetType: 'texture',
                array: true,
            }
        ]
    });
    Terrain.attributes.add("activeLayer", { type: 'number', default: 0, min: 0, max: 32, step: 1, precision: 0, });
    Terrain.attributes.add("layers", {
        type: "json",
        array: true,
        schema: [
            {
                name: "name",
                title: "Name",
                type: "string",
            },
            {
                name: "diffuse",
                title: "Diffuse",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "normalMap",
                title: "Normal Map",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "size",
                title: "Size",
                type: "vec2",
                default: [1, 1]
            },
            {
                name: "offset",
                title: "Offset",
                type: "vec2",
                default: [0, 0]
            },
        ]
    });
    Terrain.attributes.add("painterSettings", {
        type: "json",
        schema: [
            {
                name: "splatMap",
                type: "asset",
                assetType: "texture",
                title: "Splat Map",
            },
        ]
    });
});
define("src/Scripts/GrassField", ["require", "exports", "src/GrassField/GrassFieldTexture", "src/GrassField/GrassShaderChunk", "src/Extras/Debug", "src/Extras/Random", "src/Heightfield/GPUHeightMapBuffer", "src/Heightfield/ShaderChunks", "src/Scripts/Terrain"], function (require, exports, GrassFieldTexture_mjs_1, GrassShaderChunk_mjs_1, Debug_mjs_2, Random_mjs_1, GPUHeightMapBuffer_mjs_2, ShaderChunks_mjs_7, Terrain_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.grassFieldScriptName = exports.GrassField = exports.quadMatrixIndexes = exports.quad2Matrix = exports.quad1Matrix = void 0;
    Random_mjs_1 = __importDefault(Random_mjs_1);
    Terrain_mjs_1 = __importDefault(Terrain_mjs_1);
    exports.quad1Matrix = [
        2, 2, 1, 2, 0, 2,
        0, 1, 0, 0, 1, 0,
        2, 0, 2, 1, 1, 1
    ];
    exports.quad2Matrix = [
        4, 4, 3, 4, 2, 4, 1, 4,
        0, 4, 0, 3, 0, 2, 0, 1,
        0, 0, 1, 0, 2, 0, 3, 0,
        4, 0, 4, 1, 4, 2, 4, 3
    ];
    exports.quadMatrixIndexes = [
        [4, 3, 2], // 0
        [5, 8, 1], // 1
        [6, 7, 0], // 2
    ];
    const lod1QuadCount = 8;
    const lod2QuadCount = 16;
    const tmpMat = new pc.Mat4();
    class GrassField extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this.transitionLow = 0.31;
            this.transitionHigh = 0.36;
            this._bufferStore = {};
            this._time = 0;
            this._lastDrawPos = new pc.Vec3();
            this._lod1MinMaxStore = [];
            this._lod2MinMaxStore = [];
            this._offsetLod1Arr = [
                0, 0, 0, 0,
                0, 0, 0, 0,
                0, 0, 0, 0,
                0, 0, 0, 0,
            ];
            this._offsetLod2Arr = [
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
            ];
        }
        get checkRadius() { return this.radius / 2; }
        get patchRadius() { return this.radius / 2; }
        destroy() {
            var _a, _b, _c, _d, _e;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._sharedVertexBuffer) === null || _b === void 0 ? void 0 : _b.destroy();
            (_c = this._sharedInstancingBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
            if (this._meshInst) {
                (_e = (_d = this._meshInst.instancingData) === null || _d === void 0 ? void 0 : _d.vertexBuffer) === null || _e === void 0 ? void 0 : _e.destroy();
                this._meshInst.destroy();
                if (this._meshInst.mesh) {
                    this._meshInst.mesh.destroy();
                }
                if (this._material) {
                    this._material.destroy();
                }
            }
            if (this.entity.render) {
                this.entity.render.meshInstances = [];
            }
        }
        _initBladesAndEditMode() {
            this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius);
            if (this.painting) {
                this._terrain.addLock();
            }
        }
        postInitialize() {
            var _a, _b;
            const terrainEntity = this.entity.root.findByName('Terrain');
            const terrainScript = (_a = terrainEntity.script) === null || _a === void 0 ? void 0 : _a.get(Terrain_mjs_1.default);
            this._terrain = terrainScript;
            this._cameraEntity = terrainScript.cameraEntity;
            this._dataTexture = new GrassFieldTexture_mjs_1.GrassFieldTexture(this.app.graphicsDevice, this._terrain.width, this._terrain.depth);
            // update set check is visible
            if (((_b = this._cameraEntity.camera) === null || _b === void 0 ? void 0 : _b.frustum.planes) &&
                this._cameraEntity.camera.frustum.planes[0] instanceof pc.Plane) {
                this._checkIsVisible = this._checkIsVisibleNew;
            }
            else {
                this._checkIsVisible = this._checkIsVisibleOld;
            }
            this._initBladesAndEditMode();
            this.on('enable', () => this._initBladesAndEditMode());
            this.on('disable', () => {
                this.destroy();
                this._terrain.freeLock();
            });
            this.on('attr:painting', () => {
                if (this.painting) {
                    this._terrain.addLock();
                }
                else {
                    this._terrain.freeLock();
                }
            });
            this.on('attr:wireframe', () => {
                var _a, _b;
                const primitive = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.mesh) === null || _b === void 0 ? void 0 : _b.primitive;
                if (primitive && primitive[0]) {
                    primitive[0].type = this.wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                }
            });
            this.on('attr:castShadow', () => {
                this._meshInst.castShadow = this.castShadow;
            });
            this.on('attr:receiveShadow', () => {
                this._meshInst.receiveShadow = this.receiveShadow;
            });
            this.on('attr:seed', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:numBlades', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:bladeWidth', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:bladeMinHeight', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:bladeMaxHeight', () => this._updateMeshInstancing(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:radius', () => this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:lod0BladeSegs', () => this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius));
            this.on('attr:lod1BladeSegs', () => this._updateGrassMesh(this.app.graphicsDevice, this.patchRadius));
        }
        update(dt) {
            const cameraPos = this._cameraEntity.getPosition();
            const existsTexs = !!this.textures && this.textures.length > 0;
            const color = existsTexs ? this.textures[0].color : pc.Color.WHITE;
            const rand = existsTexs ? this.textures[0].colorRandom : pc.Vec3.ZERO;
            const tex = existsTexs ? this.textures[0].diffuse.resource : null;
            if (!this.freezeDrawPos) {
                const mat = this.entity.getWorldTransform();
                tmpMat.invert(mat);
                tmpMat.transformPoint(cameraPos, this._lastDrawPos);
            }
            this._time += dt;
            this._material.setParameter(GrassShaderChunk_mjs_1.timeParamName, this._time);
            this._material.setParameter(GrassShaderChunk_mjs_1.windIntensityParamName, this.windIntensity);
            this._material.setParameter(GrassShaderChunk_mjs_1.drawPosParamName, [this._lastDrawPos.x, this._lastDrawPos.y, this._lastDrawPos.z]);
            this._material.setParameter('uDiffuseColor', [color.r, color.g, color.b]);
            this._material.setParameter('uDiffuseColorRandom', [rand.x, rand.y, rand.z]);
            this._material.setParameter('uDiffuseTex', tex);
            this._frustum(cameraPos, this._cameraEntity.camera.camera, this.freezeDrawPos);
        }
        updateAabb() {
            const patchesAabb = this._terrain.aabb;
            if (this._meshInst) {
                this._meshInst.mesh.aabb = patchesAabb;
                this._meshInst.aabb = patchesAabb;
                this._meshInst.setCustomAabb(patchesAabb);
            }
        }
        _checkIsVisible(min, max, frustumPlanes) {
            return false;
        }
        _checkIsVisibleOld(min, max, frustumPlanes) {
            for (let p = 0; p < 6; p++) {
                const frustumPlane = frustumPlanes[p];
                const d = Math.max(min.x * frustumPlane[0], max.x * frustumPlane[0])
                    + Math.max(min.y * frustumPlane[1], max.y * frustumPlane[1])
                    + Math.max(min.z * frustumPlane[2], max.z * frustumPlane[2])
                    + frustumPlane[3];
                if (d <= 0) {
                    return false;
                }
            }
            return true;
        }
        _checkIsVisibleNew(min, max, frustumPlanes) {
            for (let p = 0; p < 6; p++) {
                const frustumPlane = frustumPlanes[p];
                const d = Math.max(min.x * frustumPlane.normal.x, max.x * frustumPlane.normal.x)
                    + Math.max(min.y * frustumPlane.normal.y, max.y * frustumPlane.normal.y)
                    + Math.max(min.z * frustumPlane.normal.z, max.z * frustumPlane.normal.z)
                    + frustumPlane.distance;
                if (d <= 0) {
                    return false;
                }
            }
            return true;
        }
        _frustumHelper(count, quadMatrix, quadOffset, minMaxStore, offsetArr, inverse, cameraPos, camera, freeze) {
            const scale = this.entity.getScale();
            const terrainScale = this._terrain.entity.getScale();
            const checkRadius = this.checkRadius * Math.max(scale.x, scale.z);
            const maxHeight = this._terrain.object.maxHeight * terrainScale.y;
            const frustumPlanes = camera.frustum.planes;
            let visibleCount = 0;
            for (let i = 0; i < count; i++) {
                if (!minMaxStore[i])
                    minMaxStore[i] = [new pc.Vec3(), new pc.Vec3(), false];
                if (!freeze) {
                    const quadMatrixX = quadMatrix[i * 2 + 0];
                    const quadMatrixZ = quadMatrix[i * 2 + 1];
                    const localCenterX = this.radius * (quadMatrixX - quadOffset);
                    const localCenterZ = this.radius * (quadMatrixZ - quadOffset);
                    const worldCenterX = cameraPos.x + localCenterX * scale.x;
                    const worldCenterZ = cameraPos.z + localCenterZ * scale.z;
                    minMaxStore[i][0].set(worldCenterX - checkRadius, 0, worldCenterZ - checkRadius);
                    minMaxStore[i][1].set(worldCenterX + checkRadius, maxHeight, worldCenterZ + checkRadius);
                    const visible = this._checkIsVisible(minMaxStore[i][0], minMaxStore[i][1], frustumPlanes);
                    if (visible) {
                        offsetArr[visibleCount * 2 + 0] = localCenterX;
                        offsetArr[visibleCount * 2 + 1] = localCenterZ;
                    }
                    minMaxStore[i][2] = visible;
                }
                const min = minMaxStore[i][0];
                const max = minMaxStore[i][1];
                const vis = minMaxStore[i][2];
                if (freeze) {
                    (0, Debug_mjs_2.drawBox)({ min, max, color: vis ? pc.Color.GREEN : pc.Color.RED });
                }
                visibleCount += Number(vis);
            }
            if (!freeze && inverse && visibleCount > 0) {
                const hiddenCount = count - visibleCount;
                for (let i = visibleCount; i > -1; i--) {
                    const indexIn = (hiddenCount + i) * 2;
                    const indexOr = i * 2;
                    offsetArr[indexIn + 0] = offsetArr[indexOr + 0];
                    offsetArr[indexIn + 1] = offsetArr[indexOr + 1];
                }
            }
            return visibleCount;
        }
        _frustum(cameraPos, camera, freeze) {
            var _a;
            const visibleLod1Count = this._frustumHelper(lod1QuadCount, exports.quad1Matrix, 1, this._lod1MinMaxStore, this._offsetLod1Arr, false, cameraPos, camera, freeze);
            const visibleLod2Count = this._frustumHelper(lod2QuadCount, exports.quad2Matrix, 2, this._lod2MinMaxStore, this._offsetLod2Arr, true, cameraPos, camera, freeze);
            const meshInst = this._meshInst;
            const mesh = meshInst.mesh;
            const primitive = mesh.primitive[0];
            const base = this.lod2BladeSegs * 12 * (lod2QuadCount - visibleLod2Count);
            const count = this.lod0BladeSegs * 12
                + this.lod1BladeSegs * 12 * visibleLod1Count
                + this.lod2BladeSegs * 12 * visibleLod2Count;
            meshInst.setParameter(`${GrassShaderChunk_mjs_1.lod1OffsetXZParamName}[0]`, this._offsetLod1Arr);
            meshInst.setParameter(`${GrassShaderChunk_mjs_1.lod2OffsetXZParamName}[0]`, this._offsetLod2Arr);
            // always true for lod 0
            meshInst.visible = this.autoRender || freeze;
            meshInst.visibleThisFrame = this.autoRender || freeze;
            primitive.base = base;
            primitive.count = count;
            if ((_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.wasReleased(pc.KEY_V)) {
                console.log(visibleLod1Count);
                console.log(visibleLod2Count);
                console.log(this._offsetLod1Arr);
                console.log(this._offsetLod2Arr);
            }
        }
        _updateGrassMesh(graphicsDevice, radius) {
            this._updateMeshBuffers(graphicsDevice);
            this._updateMeshMaterial(graphicsDevice);
            this._updateMeshInstance(graphicsDevice);
            this._updateMeshInstancing(graphicsDevice, radius);
            this.updateAabb();
            const meshInstances = [this._meshInst];
            if (this.entity.render) {
                this.entity.render.meshInstances = meshInstances;
            }
            else {
                this.entity.addComponent('render', {
                    meshInstances: meshInstances,
                    castShadows: this.castShadow,
                    receiveShadows: this.receiveShadow,
                    cull: false,
                });
            }
            this._meshInst.castShadow = this.castShadow;
            this._meshInst.receiveShadow = this.receiveShadow;
        }
        _updateMeshInstancing(graphicsDevice, radius) {
            var _a, _b, _c;
            if (this._meshInst) {
                this._updateInstancingBuffer(graphicsDevice, radius);
                (_c = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.instancingData) === null || _b === void 0 ? void 0 : _b.vertexBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
                this._meshInst.setInstancing(this._sharedInstancingBuffer);
            }
        }
        _updateMeshInstance(graphicsDevice) {
            var _a, _b, _c, _d;
            (_c = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.instancingData) === null || _b === void 0 ? void 0 : _b.vertexBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
            (_d = this._meshInst) === null || _d === void 0 ? void 0 : _d.destroy();
            const mesh = new pc.Mesh(graphicsDevice);
            const primitive = mesh.primitive[0];
            mesh.indexBuffer[0] = this._sharedIndexBuffer;
            mesh.vertexBuffer = this._sharedVertexBuffer;
            primitive.type = this.wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
            primitive.base = 0;
            primitive.count = this._bufferStore.index.length;
            primitive.indexed = true;
            this._meshInst = new pc.MeshInstance(mesh, this._material, this.entity);
        }
        /**
        * Sets up indices for single blade mesh.
        * @param id array of indices
        * @param vc1 vertex start offset for front side of blade
        * @param vc2 vertex start offset for back side of blade
        * @param i index offset
        */
        _initBladeIndices(id, vc1, vc2, i, bladeSegs) {
            let seg;
            // blade front side
            for (seg = 0; seg < bladeSegs; ++seg) {
                id[i++] = vc1 + 0; // tri 1
                id[i++] = vc1 + 1;
                id[i++] = vc1 + 2;
                id[i++] = vc1 + 2; // tri 2
                id[i++] = vc1 + 1;
                id[i++] = vc1 + 3;
                vc1 += 2;
            }
            // blade back side
            for (seg = 0; seg < bladeSegs; ++seg) {
                id[i++] = vc2 + 2; // tri 1
                id[i++] = vc2 + 1;
                id[i++] = vc2 + 0;
                id[i++] = vc2 + 3; // tri 2
                id[i++] = vc2 + 1;
                id[i++] = vc2 + 2;
                vc2 += 2;
            }
            return i;
        }
        /** Set up indices for 1 blade */
        _initBladeIndexVerts(vindex) {
            for (let i = 0; i < vindex.length; ++i) {
                vindex[i] = i;
            }
        }
        _initBladeOffsetShapeVerts(offsetShape, radius, numBlades) {
            const normalizeValue = offsetShape instanceof Uint16Array ? pc.FloatPacking.float2Half : (x) => x;
            const random = new Random_mjs_1.default(this.seed);
            const heightFactor = this.bladeMaxHeight - this.bladeMinHeight;
            //let noise = 0;
            for (let i = 0; i < numBlades; ++i) {
                //noise = Math.abs(simplex(offsetShape[i * 8 + 0] * 0.03, offsetShape[i * 8 + 2] * 0.03));
                //noise = noise * noise * noise;
                //noise *= 5.0;
                const x = random.nrand() * radius;
                const y = random.nrand() * radius;
                const z = 0;
                const rotation = Math.PI * 2.0 * random.random();
                const width = this.bladeWidth + random.random() * this.bladeWidth * 0.5;
                const height = this.bladeMinHeight + Math.pow(random.random(), 4.0) * heightFactor;
                const lean = 0.01 + random.random() * 0.3;
                const curve = 0.05 + random.random() * 0.3;
                offsetShape[i * 8 + 0] = normalizeValue(x); // x
                offsetShape[i * 8 + 1] = normalizeValue(y); // y
                offsetShape[i * 8 + 2] = normalizeValue(z); // z
                offsetShape[i * 8 + 3] = normalizeValue(rotation); // rot
                offsetShape[i * 8 + 4] = normalizeValue(width); // width
                offsetShape[i * 8 + 5] = normalizeValue(height); //+ noise; //+ height
                offsetShape[i * 8 + 6] = normalizeValue(lean); // lean
                offsetShape[i * 8 + 7] = normalizeValue(curve); // curve
            }
        }
        _updateInstancingBuffer(graphicsDevice, radius) {
            var _a;
            (_a = this._sharedInstancingBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            const lod0PatchCount = 1;
            const lod1PatchCount = 8;
            const lod2PatchCount = 16;
            const patchNumBlades = (this.numBlades / (lod0PatchCount + lod1PatchCount + lod2PatchCount)) | 0;
            const offsetAndShapeLength = patchNumBlades * 8;
            if (this._bufferStore.offsetAndShape === undefined ||
                this._bufferStore.offsetAndShape.length !== offsetAndShapeLength) {
                this._bufferStore.offsetAndShape = new Float32Array(offsetAndShapeLength);
            }
            this._initBladeOffsetShapeVerts(this._bufferStore.offsetAndShape, radius, patchNumBlades);
            const type = this._bufferStore.offsetAndShape instanceof Uint16Array ? pc.TYPE_FLOAT16 : pc.TYPE_FLOAT32;
            const instancingFormat = new pc.VertexFormat(graphicsDevice, [
                {
                    semantic: pc.SEMANTIC_ATTR10,
                    components: 4,
                    type: type,
                    normalize: false,
                    asInt: false
                },
                {
                    semantic: pc.SEMANTIC_ATTR11,
                    components: 4,
                    type: type,
                    normalize: false,
                    asInt: false,
                },
            ]);
            this._sharedInstancingBuffer = new pc.VertexBuffer(graphicsDevice, instancingFormat, patchNumBlades, {
                usage: pc.BUFFER_STATIC,
                data: this._bufferStore.offsetAndShape,
                storage: false,
            });
        }
        _getVertexFormat(graphicsDevice) {
            return new pc.VertexFormat(graphicsDevice, [{
                    semantic: pc.SEMANTIC_POSITION,
                    components: 1,
                    type: pc.TYPE_FLOAT32,
                    normalize: false,
                    asInt: false
                }]);
        }
        _updateMeshBuffers(graphicsDevice) {
            var _a, _b;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._sharedVertexBuffer) === null || _b === void 0 ? void 0 : _b.destroy();
            const lod0VC = (this.lod0BladeSegs + 1) * 2;
            const lod1VC = (this.lod1BladeSegs + 1) * 2;
            const lod2VC = (this.lod2BladeSegs + 1) * 2;
            const indexLength = this.lod0BladeSegs * 12 + this.lod1BladeSegs * 12 * lod1QuadCount + this.lod2BladeSegs * 12 * lod2QuadCount;
            const indexVertsLength = lod0VC * 2 + lod1VC * 2 * lod1QuadCount + lod2VC * 2 * lod2QuadCount;
            if (this._bufferStore.index === undefined ||
                this._bufferStore.index.length !== indexLength) {
                this._bufferStore.index = new Uint16Array(indexLength);
                let index = 0;
                for (let i = 0; i < lod2QuadCount; i++) {
                    const lod2VC1 = i * lod2VC * 2;
                    const lod2VC2 = lod2VC1 + lod2VC;
                    index = this._initBladeIndices(this._bufferStore.index, lod2VC1, lod2VC2, index, this.lod2BladeSegs);
                }
                const lod0VC1 = lod2QuadCount * lod2VC * 2;
                const lod0VC2 = lod0VC1 + lod0VC;
                index = this._initBladeIndices(this._bufferStore.index, lod0VC1, lod0VC2, index, this.lod0BladeSegs);
                for (let i = 0; i < lod1QuadCount; i++) {
                    const lod1VC1 = lod0VC2 + lod0VC + i * lod1VC * 2;
                    const lod1VC2 = lod1VC1 + lod1VC;
                    index = this._initBladeIndices(this._bufferStore.index, lod1VC1, lod1VC2, index, this.lod1BladeSegs);
                }
            }
            if (this._bufferStore.indexVerts === undefined ||
                this._bufferStore.indexVerts.length !== indexVertsLength) {
                this._bufferStore.indexVerts = new Float32Array(indexVertsLength);
                this._initBladeIndexVerts(this._bufferStore.indexVerts);
            }
            this._sharedIndexBuffer = new pc.IndexBuffer(graphicsDevice, pc.INDEXFORMAT_UINT16, this._bufferStore.index.length, pc.BUFFER_STATIC, this._bufferStore.index, { storage: false });
            this._sharedVertexBuffer = new pc.VertexBuffer(graphicsDevice, this._getVertexFormat(graphicsDevice), this._bufferStore.indexVerts.length, {
                usage: pc.BUFFER_STATIC,
                data: this._bufferStore.indexVerts,
                storage: false,
            });
        }
        _updateMeshMaterial(graphicsDevice) {
            var _a, _b, _c;
            (_a = this._material) === null || _a === void 0 ? void 0 : _a.destroy();
            this._material = new pc.StandardMaterial();
            this._material.name = "GrassFieldMaterial";
            /*
            this._material.depthTest = false;
            this._material.depthWrite = true;
            this._material.blendType = pc.BLEND_NONE;
            this._material.alphaTest = 0;
            this._material.alphaWrite = false;
            this._material.alphaFade = false;
            this._material.alphaToCoverage = false;
            */
            const terrain = this._terrain.object;
            const heightMap = this._terrain.heightMapTexture;
            const terrainScale = this._terrain.entity.getScale();
            this._material.setAttribute(GrassShaderChunk_mjs_1.vindexAttrName, pc.SEMANTIC_POSITION);
            this._material.setAttribute(GrassShaderChunk_mjs_1.offsetAttrName, pc.SEMANTIC_ATTR10);
            this._material.setAttribute(GrassShaderChunk_mjs_1.shapeAttrName, pc.SEMANTIC_ATTR11);
            this._material.setParameter('uDataMap', this._dataTexture.texture);
            this._material.setParameter(ShaderChunks_mjs_7.heightMapParamName, heightMap);
            this._material.setParameter(GrassShaderChunk_mjs_1.fieldScaleParamName, [terrainScale.x, terrainScale.y, terrainScale.z]);
            this._material.setParameter(ShaderChunks_mjs_7.maxHeightParamName, terrain.maxHeight);
            this._material.setParameter(`${GrassShaderChunk_mjs_1.lod1OffsetXZParamName}[0]`, this._offsetLod1Arr);
            this._material.setParameter(`${GrassShaderChunk_mjs_1.lod2OffsetXZParamName}[0]`, this._offsetLod2Arr);
            this._material.setParameter(GrassShaderChunk_mjs_1.drawPosParamName, [0, 0, 0]);
            this._material.setParameter(GrassShaderChunk_mjs_1.timeParamName, this._time);
            this._material.setParameter(GrassShaderChunk_mjs_1.windIntensityParamName, 0);
            const hmFormat = (0, GPUHeightMapBuffer_mjs_2.getHeightMapFormat)(graphicsDevice, terrain.heightMap);
            const pcVersion = `v${pc.version[0]}`;
            const chunksStore = (0, GrassShaderChunk_mjs_1.getGrassShaderChunks)({
                width: terrain.width,
                depth: terrain.depth,
                heightMapChunkSize: terrain.heightMap.dataChunkSize,
                heightMapFormat: hmFormat,
                bladeMaxHeight: this.bladeMaxHeight * 1.5,
                lod0BladeSegs: this.lod0BladeSegs,
                lod1BladeSegs: this.lod1BladeSegs,
                lod2BladeSegs: this.lod2BladeSegs,
                radius: this.radius,
                transitionLow: this.transitionLow,
                transitionHigh: this.transitionHigh,
                engineVersion: pcVersion,
            });
            const chunkNames = Object.keys(chunksStore);
            const shaderChunks = (_c = (_b = this._material).getShaderChunks) === null || _c === void 0 ? void 0 : _c.call(_b, pc.SHADERLANGUAGE_GLSL);
            if (shaderChunks) {
                for (let chunkName of chunkNames) {
                    shaderChunks.set(chunkName, chunksStore[chunkName]);
                }
                this._material.shaderChunksVersion = pc.CHUNKAPI_1_70;
            }
            else {
                const chunks = this._material.chunks;
                chunks.APIVersion = pc.CHUNKAPI_1_70;
                for (let chunkName of chunkNames) {
                    chunks[chunkName] = chunksStore[chunkName];
                }
            }
            this._material.update();
        }
    }
    exports.GrassField = GrassField;
    exports.default = GrassField;
    exports.grassFieldScriptName = "grassField";
    pc.registerScript(GrassField, exports.grassFieldScriptName);
    GrassField.attributes.add("painting", { type: "boolean", default: false });
    GrassField.attributes.add("castShadow", { type: "boolean", default: true, });
    GrassField.attributes.add("receiveShadow", { type: "boolean", default: true, });
    GrassField.attributes.add("wireframe", { type: "boolean", default: false });
    GrassField.attributes.add("freezeDrawPos", { type: "boolean", default: false });
    GrassField.attributes.add("autoRender", { type: "boolean", default: true });
    GrassField.attributes.add("seed", { type: "number", default: 53464546455, min: 1, step: 1, precision: 0 });
    GrassField.attributes.add("windIntensity", { type: "number", default: 0, min: -30, max: 30 });
    GrassField.attributes.add("numBlades", { type: "number", default: 4000, min: 0, max: 8000000, step: 1, precision: 0 });
    GrassField.attributes.add("radius", { type: "number", default: 80, min: 1, max: 10000 });
    GrassField.attributes.add("lod0BladeSegs", { type: "number", default: 3, min: 1, max: 10, step: 1, precision: 0 });
    GrassField.attributes.add("lod1BladeSegs", { type: "number", default: 2, min: 1, max: 10, step: 1, precision: 0 });
    GrassField.attributes.add("lod2BladeSegs", { type: "number", default: 1, min: 1, max: 10, step: 1, precision: 0 });
    GrassField.attributes.add("bladeWidth", { type: "number", default: 0.04, min: 0.01, max: 5 });
    GrassField.attributes.add("bladeMinHeight", { type: "number", default: 0.25, min: 0.01, max: 10 });
    GrassField.attributes.add("bladeMaxHeight", { type: "number", default: 1, min: 0.01, max: 10 });
    GrassField.attributes.add("textures", {
        type: "json",
        array: true,
        schema: [
            {
                name: "name",
                title: "Name",
                type: "string",
            },
            {
                name: "diffuse",
                title: "Diffuse",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "color",
                title: "Color",
                type: "rgb"
            },
            {
                name: "colorRandom",
                title: "Color Random",
                type: "vec3",
                default: [0.01, 0.01, 0.01]
            }
        ]
    });
});
;
(() => {
    if (window.___amd___requireResolver) {
        window.___amd___requireResolver();
    }
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVycmFpbi1zeXN0ZW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zYXNyYy9yZXF1cmVkU3RhcnQuanMiLCIuLi8uLi9zcmMvRXh0cmFzL1R5cGVzLm10cyIsIi4uLy4uL3NyYy9Db3JlL0lab25lLm10cyIsIi4uLy4uL3NyYy9FeHRyYXMvQ29tcHJlc3Nvci5tdHMiLCIuLi8uLi9zcmMvQ29yZS9BYnNIZWlnaHRNYXBGaWxlSU8ubXRzIiwiLi4vLi4vc3JjL0NvcmUvQWJzSGVpZ2h0TWFwLm10cyIsIi4uLy4uL3NyYy9Db3JlL0hlaWdodE1hcC5tdHMiLCIuLi8uLi9zcmMvQ29yZS9BYnNTaGF0dGVyZWRIZWlnaHRNYXAubXRzIiwiLi4vLi4vc3JjL0NvcmUvQWJzQ2h1bmtlZEhlaWdodE1hcC5tdHMiLCIuLi8uLi9zcmMvQ29yZS9Db21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcC5tdHMiLCIuLi8uLi9zcmMvQW1tb0ludGVncmF0aW9uL0FtbW9JbnRlZ3JhdGlvbi5tdHMiLCIuLi8uLi9zcmMvQ29yZS9Db29yZHNCdWZmZXIubXRzIiwiLi4vLi4vc3JjL0NvcmUvTG9kSW5mby5tdHMiLCIuLi8uLi9zcmMvQ29yZS9JUGF0Y2hMb2QubXRzIiwiLi4vLi4vc3JjL0NvcmUvTG9kRXN0aW1hdG9yLm10cyIsIi4uLy4uL3NyYy9Db3JlL0dyaWRCdWlsZGVyLm10cyIsIi4uLy4uL3NyYy9Db3JlL0hlaWdodGZpZWxkLm10cyIsIi4uLy4uL3NyYy9Db3JlL0hlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdC5tdHMiLCIuLi8uLi9zcmMvQ29yZS9UcmlhbmdsZS5tdHMiLCIuLi8uLi9zcmMvQ29yZS9IZWlnaHRmaWVsZFNoYXBlLm10cyIsIi4uLy4uL3NyYy9Db3JlL0lQYXRjaC5tdHMiLCIuLi8uLi9zcmMvQ29yZS9JUGF0Y2hJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9FeHRyYXMvVXRpbHMubXRzIiwiLi4vLi4vc3JjL0V4dHJhcy9TdG9yZTJELm10cyIsIi4uLy4uL3NyYy9Db3JlL0xvZFN0YXRlLm10cyIsIi4uLy4uL3NyYy9Db3JlL0xvZE1hbmFnZXIubXRzIiwiLi4vLi4vc3JjL0NvcmUvTWlkcG9pbnREaXNwSGVpZ2h0ZmllbGQubXRzIiwiLi4vLi4vc3JjL0NvcmUvUGF0Y2hDb21iaW5lSW5zdGFuY2luZy5tdHMiLCIuLi8uLi9zcmMvQ29yZS9QYXRjaEluc3RhbmNpbmcubXRzIiwiLi4vLi4vc3JjL0NvcmUvUGF0Y2hlZEhlaWdodE1hcC5tdHMiLCIuLi8uLi9zcmMvQ29yZS9QYXRjaGVzU3BoZXJlQnVmZmVyLm10cyIsIi4uLy4uL3NyYy9Db3JlL1BhdGNoZXNNYW5hZ2VyLm10cyIsIi4uLy4uL3NyYy9Db3JlL1NxdWFyZUl0ZXJhdG9yLm10cyIsIi4uLy4uL3NyYy9FeHRyYXMvRGVidWcubXRzIiwiLi4vLi4vc3JjL0V4dHJhcy9FbnVtQ29udmVydGVyLm10cyIsIi4uLy4uL3NyYy9FeHRyYXMvUmFuZG9tLm10cyIsIi4uLy4uL3NyYy9HcmFzc0ZpZWxkL0dyYXNzRmllbGRUZXh0dXJlLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9TaGFkZXJDaHVua3MubXRzIiwiLi4vLi4vc3JjL0dyYXNzRmllbGQvR3Jhc3NTaGFkZXJDaHVuay5tdHMiLCIuLi8uLi9zcmMvR3Jhc3NGaWVsZC9zaW1wbGV4Lm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9CcnVzaC5tdHMiLCIuLi8uLi9zcmMvSGVpZ2h0ZmllbGQvQ29sb3JQYWludGVyU2hhZGVycy5tdHMiLCIuLi8uLi9zcmMvSGVpZ2h0ZmllbGQvQ29sb3JQYWludGVyLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9JUGF0Y2hJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9QYXRjaENvbWJpbmVJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9QYXRjaEluc3RhbmNpbmcubXRzIiwiLi4vLi4vc3JjL0hlaWdodGZpZWxkL0dQVUhlaWdodE1hcEJ1ZmZlci5tdHMiLCIuLi8uLi9zcmMvSGVpZ2h0ZmllbGQvR1BVQnVmZmVyc01hbmFnZXIubXRzIiwiLi4vLi4vc3JjL0hlaWdodGZpZWxkL0dQVVdpcmVmcmFtZUJ1ZmZlcnNNYW5hZ2VyLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9NZXNoSW5zdGFuY2VGYWN0b3J5Lm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9FbnRpdHlQYXRjaGVzTWVzaC5tdHMiLCIuLi8uLi9zcmMvSGVpZ2h0ZmllbGQvRW51bXMubXRzIiwiLi4vLi4vc3JjL0hlaWdodGZpZWxkL1BhdGNoLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9QYXRjaGVzUmVuZGVyUHJlcGFyZXIubXRzIiwiLi4vLi4vc3JjL1NjcmlwdHMvRmx5Q2FtZXJhLm10cyIsIi4uLy4uL3NyYy9TY3JpcHRzL0Zwc0NvdW50ZXIubXRzIiwiLi4vLi4vc3JjL1NjcmlwdHMvVGVycmFpbi5tdHMiLCIuLi8uLi9zcmMvU2NyaXB0cy9HcmFzc0ZpZWxkLm10cyIsIi4uLy4uL3N6c3JjL3JlcXVyZWRGaW5pc2guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLENBQUM7QUFBQSxDQUFDLEdBQUcsRUFBRTtJQUVOLE1BQU0sSUFBSSxHQUFPLEVBQUUsQ0FBQztJQUNwQixNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFFcEIsbUNBQW1DO0lBQ25DLE1BQU0sQ0FBQyx1QkFBdUIsR0FBSSxNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hELE1BQU0sQ0FBQyx3QkFBd0IsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO0lBRWpELElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRXZDLE1BQU0sTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRTtZQUVwQyxJ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QUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQztZQUN6QyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDekIsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFFekMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDekMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQztZQUN6QyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQztZQUV6QyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDMUIsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDMUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFFMUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMs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LEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO0lBQ25DLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUE7SUFFakMsTUFBTSxJQUFJLEdBQUcsSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDM0IsTUFBTSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7SUFFNUIsTUFBTSxLQUFLLEdBQUc7UUFDYixJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO1FBQ3RFLElBQUksSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEUsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztLQUN0RSxDQUFBO0lBRUQsTUFBTSxDQUFDLEdBQUc7UUFDVCxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUU7UUFDcEIsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUU7UUFDM0UsR0FBRyxFQUFFLENBQUMsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRTtRQUMzRSxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUc7UUFDM0UsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHO1FBQzNFLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFFLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRztRQUMzRSxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRztRQUMzRSxDQUFDLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFO1FBQzNFLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEdBQUcsRUFBQyxDQUFDO1FBQzNFLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHO1FBQzNFLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHO1FBQzNFLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFDLEdBQUcsRUFBQyxHQUFHO1FBQzNFLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHO0tBQ3ZFLENBQUE7SUFFRCw2RUFBNkU7SUFDN0Usd0VBQXdFO0lBQ3hFLFNBQVMsSUFBSSxDQUFFLElBQVk7UUFD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RyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzNHLFVBQVUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDOUYsVUFBVSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZILFVBQVUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQ3pGLFVBQVUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNuSCxVQUFVLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDbkgsVUFBVSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ25ILFVBQVUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzlGLFVBQVUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDbkcsVUFBVSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNoRyxVQUFVLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUU7UUFDbEMsSUFBSSxFQUFFLE1BQU07UUFDWixLQUFLLEVBQUUsSUFBSTtRQUNYLE1BQU0sRUFBRTtZQUNKO2dCQUNJLElBQUksRUFBRSxNQUFNO2dCQUNaLEtBQUssRUFBRSxNQUFNO2dCQUNiLElBQUksRUFBRSxRQUFRO2FBQ2pCO1lBQ0Q7Z0JBQ0ksSUFBSSxFQUFFLFNBQVM7Z0JBQ2YsS0FBSyxFQUFFLFNBQVM7Z0JBQ2hCLElBQUksRUFBRSxPQUFPO2dCQUNiLFNBQVMsRUFBRSxTQUFTO2FBQ3ZCO1lBQ0Q7Z0JBQ0ksSUFBSSxFQUFFLE9BQU87Z0JBQ2IsS0FBSyxFQUFFLE9BQU87Z0JBQ2QsSUFBSSxFQUFFLEtBQUs7YUFDZDtZQUNEO2dCQUNJLElBQUksRUFBRSxhQUFhO2dCQUNuQixLQUFLLEVBQUUsY0FBYztnQkFDckIsSUFBSSxFQUFFLE1BQU07Z0JBQ1osT0FBTyxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7YUFDOUI7U0FDSjtLQUNKLENBQUMsQ0FBQzs7QUM1dkJILENBQUM7QUFBQSxDQUFDLEdBQUcsRUFBRTtJQUNILElBQUksTUFBTSxDQUFDLHdCQUF3QixFQUFFLENBQUM7UUFDbEMsTUFBTSxDQUFDLHdCQUF3QixFQUFFLENBQUM7SUFDdEMsQ0FBQztBQUNMLENBQUMsQ0FBQyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyI7KCgpID0+IHtcclxuXHJcblx0Y29uc3QgZGVmcyAgICAgPSB7fTtcclxuXHRjb25zdCByZXNvbHZlZCA9IHt9O1xyXG5cclxuXHQvLyBzYXZlIG9yaWdpbmFsIGRlZmluZSBhbmQgcmVxdWlyZVxyXG5cdHdpbmRvdy5fX19hbWRfX19PcmlnaW5hbERlZmluZSAgPSB3aW5kb3cuZGVmaW5lO1xyXG5cdHdpbmRvdy5fX19hbWRfX19PcmlnaW5hbFJlcXVpcmUgPSB3aW5kb3cucmVxdWlyZTtcclxuXHJcblx0aWYgKCF3aW5kb3cuZGVmaW5lICYmICF3aW5kb3cucmVxdWlyZSkge1xyXG5cclxuXHRcdGNvbnN0IGRlZmluZSA9IChpZCwgZGVwcywgZmFjdG9yeSkgPT4ge1xyXG5cclxuXHRcdFx0aWYgKGRlZnNbaWRdKSB7XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdEdXBsaWNhdGUgZGVmaW5pdGlvbiBmb3IgJyArIGlkKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZGVmc1tpZF0gPSBbZGVwcywgZmFjdG9yeV07XHJcblx0XHR9XHJcblxyXG5cdFx0ZGVmaW5lLmFtZCA9IHtcclxuXHRcdFx0YnVuZGxlOiB0cnVlLCAgIC8vIHRoaXMgaW1wbGVtZW50YXRpb24gd29ya3Mgb25seSB3aXRoIGJ1bmRsZWQgYW1kIG1vZHVsZXNcclxuXHRcdFx0ZHluYW1pYzogZmFsc2UsIC8vIGRvZXMgbm90IHN1cHBvcnQgZHluYW1pYyBvciBhc3luYyBsb2FkaW5nXHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IHJlcXVpcmUgPSAoaWQpID0+IHtcclxuXHJcblx0XHRcdGlmIChpZCA9PT0gJ3JlcXVpcmUnKSByZXR1cm4gcmVxdWlyZTtcclxuXHRcdFx0aWYgKGlkID09PSAnZXhwb3J0cycpIHJldHVybiB7fTtcclxuXHRcdFx0aWYgKHJlc29sdmVkW2lkXSkgICAgIHJldHVybiByZXNvbHZlZFtpZF07XHJcblxyXG5cdFx0XHRpZiAoIWRlZnNbaWRdKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZGVmcywgaWQpO1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignTm8gZGVmaW5pdGlvbiBmb3IgJyArIGlkKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgbW9kdWxlRXhwb3J0cyA9IHt9O1xyXG5cdFx0XHRjb25zdCBkZXBzICAgID0gZGVmc1tpZF1bMF07XHJcblx0XHRcdGNvbnN0IGZhY3RvcnkgPSBkZWZzW2lkXVsxXTtcclxuXHRcdFx0Y29uc3QgYXJncyA9IGRlcHMubWFwKGRlcCA9PiB7XHJcblxyXG5cdFx0XHRcdGlmIChkZXAgPT09ICdleHBvcnRzJykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG1vZHVsZUV4cG9ydHM7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gcmVxdWlyZShkZXApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGZhY3RvcnkuYXBwbHkobnVsbCwgYXJncyk7XHJcblxyXG5cdFx0XHRyZXR1cm4gcmVzb2x2ZWRbaWRdID0gbW9kdWxlRXhwb3J0cztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0d2luZG93LmRlZmluZSAgPSBkZWZpbmU7XHJcblx0XHR3aW5kb3cucmVxdWlyZSA9IHJlcXVpcmU7XHJcblx0fVxyXG5cclxuXHR3aW5kb3cuX19fYW1kX19fcmVxdWlyZVJlc29sdmVyID0gKCkgPT4ge1xyXG5cclxuXHRcdGZvciAoY29uc3QgaWQgaW4gZGVmcykge1xyXG5cclxuXHRcdFx0aWYgKGRlZnMuaGFzT3duUHJvcGVydHkoaWQpKSB7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGRlcHMgPSBkZWZzW2lkXVswXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZGVwcykge1xyXG5cdFx0XHRcdFx0ZGVwcy5tYXAoZGVwID0+IHtcclxuXHRcclxuXHRcdFx0XHRcdFx0aWYgKGRlcCAhPT0gJ3JlcXVpcmUnICYmXHJcblx0XHRcdFx0XHRcdFx0ZGVwICE9PSAnZXhwb3J0cycpIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKCFyZXNvbHZlZC5oYXNPd25Qcm9wZXJ0eShkZXApKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXF1aXJlKGRlcCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoIWRlZnMuaGFzT3duUHJvcGVydHkoZGVwKSAmJlxyXG5cdFx0XHRcdFx0XHRcdFx0IXJlc29sdmVkLmhhc093blByb3BlcnR5KGRlcCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgZGVmaW5lICcke2lkfScgZGVwIG5vdCBmb3VuZCAnJHtkZXB9J2ApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXF1aXJlKGlkKTtcclxuXHJcblx0XHRcdFx0ZGVsZXRlIGRlZnNbaWRdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIHJldHVybiBvcmlnaW5hbCBkZWZpbmUgYW5kIHJlcXVpcmVcclxuXHRcdHdpbmRvdy5kZWZpbmUgID0gd2luZG93Ll9fX2FtZF9fX09yaWdpbmFsRGVmaW5lO1xyXG5cdFx0d2luZG93LnJlcXVpcmUgPSB3aW5kb3cuX19fYW1kX19fT3JpZ2luYWxSZXF1aXJlO1xyXG5cclxuXHRcdC8vIGNsZWFyXHJcblx0XHRkZWxldGUgd2luZG93Ll9fX2FtZF9fX3JlcXVpcmVSZXNvbHZlcjtcclxuXHRcdGRlbGV0ZSB3aW5kb3cuX19fYW1kX19fT3JpZ2luYWxEZWZpbmU7XHJcblx0XHRkZWxldGUgd2luZG93Ll9fX2FtZF9fX09yaWdpbmFsUmVxdWlyZTtcclxuXHR9O1xyXG59KSgpOyIsImV4cG9ydCB0eXBlIGludCA9IG51bWJlcjtcbmV4cG9ydCB0eXBlIHVuc2lnbmVkX2ludCA9IG51bWJlcjtcbmV4cG9ydCB0eXBlIGZsb2F0ID0gbnVtYmVyO1xuZXhwb3J0IHR5cGUgUmVmT2JqZWN0PFQgZXh0ZW5kcyBvYmplY3Q+ID0gVDtcbmV4cG9ydCB0eXBlIElWZWN0b3IyID0geyB4OiBmbG9hdCwgeTogZmxvYXQgfTtcbmV4cG9ydCB0eXBlIElWZWN0b3IzID0geyB4OiBmbG9hdCwgeTogZmxvYXQsIHo6IGZsb2F0IH07XG5leHBvcnQgdHlwZSBJVmVjdG9yNCA9IHsgeDogZmxvYXQsIHk6IGZsb2F0LCB6OiBmbG9hdCwgdzogZmxvYXQgfTtcbmV4cG9ydCB0eXBlIElNYXRyaXg0ID0geyBkYXRhOiBGbG9hdDMyQXJyYXkgfTsiLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVpvbmUge1xuICAgIG1pblg6IGludDtcbiAgICBtYXhYOiBpbnQ7XG4gICAgbWluWjogaW50O1xuICAgIG1heFo6IGludDtcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wcmVzc29yIHtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBfY29uY2F0Q2h1bmtzKGNodW5rczogVWludDhBcnJheVtdLCB0b3RhbExlbmd0aDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGxldCBwb3NpdGlvbiA9IDA7XHJcblxyXG4gICAgICAgIC8vIENvbmNhdGVuYXRlIGFsbCBVaW50OEFycmF5IGNodW5rcyBpbnRvIGEgc2luZ2xlIEFycmF5QnVmZmVyXHJcbiAgICAgICAgY29uc3QgcmVzdWx0QnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGgpOyAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHtcclxuICAgICAgICAgICAgcmVzdWx0QnVmZmVyLnNldChjaHVuaywgcG9zaXRpb24pO1xyXG4gICAgICAgICAgICBwb3NpdGlvbiArPSBjaHVuay5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0QnVmZmVyLmJ1ZmZlcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBfZ2V0UmVzdWx0KHJlYWRlcjogUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPGFueT4pIHtcclxuXHJcbiAgICAgICAgbGV0IHRvdGFsTGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgY2h1bmtzOiBVaW50OEFycmF5W10gPSBbXTtcclxuXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcclxuICAgICAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xyXG4gICAgICAgICAgICBjaHVua3MucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHRvdGFsTGVuZ3RoICs9IHZhbHVlLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25jYXRDaHVua3MoY2h1bmtzLCB0b3RhbExlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBjb21wcmVzc0J1ZmZlcihidWZmZXI6IEFycmF5QnVmZmVyLCBmb3JtYXQ6IENvbXByZXNzaW9uRm9ybWF0ID0gJ2d6aXAnKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbXByZXNzZWRTdHJlYW0gPSBuZXcgQ29tcHJlc3Npb25TdHJlYW0oZm9ybWF0KTtcclxuICAgICAgICBjb25zdCB3cml0ZXIgPSBjb21wcmVzc2VkU3RyZWFtLndyaXRhYmxlLmdldFdyaXRlcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHdyaXRlci53cml0ZShuZXcgVWludDhBcnJheShidWZmZXIpKTtcclxuICAgICAgICB3cml0ZXIuY2xvc2UoKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVhZGVyID0gY29tcHJlc3NlZFN0cmVhbS5yZWFkYWJsZS5nZXRSZWFkZXIoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3VsdChyZWFkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVjb21wcmVzc0J1ZmZlcihidWZmZXI6IEFycmF5QnVmZmVyLCBmb3JtYXQ6IENvbXByZXNzaW9uRm9ybWF0ID0gJ2d6aXAnKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlY29tcHJlc3NlZFN0cmVhbSA9IG5ldyBEZWNvbXByZXNzaW9uU3RyZWFtKGZvcm1hdCk7XHJcbiAgICAgICAgY29uc3QgcmVhZGVyID0gZGVjb21wcmVzc2VkU3RyZWFtLnJlYWRhYmxlLmdldFJlYWRlcigpO1xyXG4gICAgICAgIGNvbnN0IHdyaXRlciA9IGRlY29tcHJlc3NlZFN0cmVhbS53cml0YWJsZS5nZXRXcml0ZXIoKTtcclxuICAgIFxyXG4gICAgICAgIC8vIFdyaXRlIHRoZSBjb21wcmVzc2VkIGJ1ZmZlciB0byB0aGUgd3JpdGVyXHJcbiAgICAgICAgd3JpdGVyLndyaXRlKG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO1xyXG4gICAgICAgIHdyaXRlci5jbG9zZSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzdWx0KHJlYWRlcik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQ29tcHJlc3NvciBmcm9tIFwiLi4vRXh0cmFzL0NvbXByZXNzb3IubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIEFic0hlaWdodE1hcCBmcm9tIFwiLi9BYnNIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB7IElSZWFkb25seUFic0hlaWdodE1hcCB9IGZyb20gXCIuL0Fic0hlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBoZWlnaHRNYXBWZXJzaW9uID0gOTk7XHJcbmV4cG9ydCBjb25zdCBmYWN0b3JTaXplID0gMztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zIHtcclxuICAgIGFkYXB0aXZlV2lkdGhBbmREZXB0aD86IGJvb2xlYW4sXHJcbiAgICBhZGFwdGl2ZU1heEhlaWdodD86IGJvb2xlYW4sXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUltcG9ydEZpbGVIZWFkZXIge1xyXG4gICAgd2lkdGg6IGludCxcclxuICAgIGRlcHRoOiBpbnQsXHJcbiAgICBtYXhIZWlnaHQ6IGZsb2F0XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBoZWlnaHRNYXBGaWxlQ29tcHJlc3NlZEZvcm1hdDogQ29tcHJlc3Npb25Gb3JtYXQgPSAnZ3ppcCc7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzSGVpZ2h0TWFwRmlsZUlPIHtcclxuXHJcbiAgICBwcml2YXRlIF9fcmVhZEhlaWdodEZhY3Rvcih2aWV3OiBEYXRhVmlldywgaGVhZGVyU2l6ZTogaW50LCB3aWR0aDogaW50LCB4OiBpbnQsIHo6IGludCkge1xyXG5cclxuICAgICAgICBjb25zdCBpbmRleCA9IHogKiB3aWR0aCArIHg7XHJcbiAgICAgICAgY29uc3QgciA9IHZpZXcuZ2V0VWludDgoaGVhZGVyU2l6ZSArIGluZGV4ICogZmFjdG9yU2l6ZSArIDApO1xyXG4gICAgICAgIGNvbnN0IGcgPSB2aWV3LmdldFVpbnQ4KGhlYWRlclNpemUgKyBpbmRleCAqIGZhY3RvclNpemUgKyAxKTtcclxuICAgICAgICBjb25zdCBiID0gdmlldy5nZXRVaW50OChoZWFkZXJTaXplICsgaW5kZXggKiBmYWN0b3JTaXplICsgMik7XHJcbiAgICBcclxuICAgICAgICBjb25zdCBzY2FsZWQgPSAociA8PCAxNikgfCAoZyA8PCA4KSB8IGI7XHJcbiAgICAgICAgY29uc3QgZmFjdG9yID0gc2NhbGVkIC8gMHhmZmZmZmY7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGZhY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9fd3JpdGVIZWlnaHRGYWN0b3IodmlldzogRGF0YVZpZXcsIGhlYWRlclNpemU6IGludCwgaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNIZWlnaHRNYXAsIHg6IGludCwgejogaW50KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGluZGV4ICA9IHogKiBoZWlnaHRNYXAud2lkdGggKyB4O1xyXG4gICAgICAgIGNvbnN0IGZhY3RvciA9IGhlaWdodE1hcC5nZXRGYWN0b3IoeCwgeik7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVkID0gTWF0aC5mbG9vcihmYWN0b3IgKiAweGZmZmZmZik7XHJcbiAgICAgICAgY29uc3QgciA9IChzY2FsZWQgPj4gMTYpICYgMHhmZjtcclxuICAgICAgICBjb25zdCBnID0gKHNjYWxlZCA+PiA4KSAmIDB4ZmY7XHJcbiAgICAgICAgY29uc3QgYiA9IChzY2FsZWQgJiAweGZmKTtcclxuXHJcbiAgICAgICAgdmlldy5zZXRVaW50OChoZWFkZXJTaXplICsgaW5kZXggKiBmYWN0b3JTaXplICsgMCwgcik7XHJcbiAgICAgICAgdmlldy5zZXRVaW50OChoZWFkZXJTaXplICsgaW5kZXggKiBmYWN0b3JTaXplICsgMSwgZyk7XHJcbiAgICAgICAgdmlldy5zZXRVaW50OChoZWFkZXJTaXplICsgaW5kZXggKiBmYWN0b3JTaXplICsgMiwgYik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9faW1wb3J0RnJvbUZpbGUoaGVpZ2h0TWFwOiBBYnNIZWlnaHRNYXAsIGJ1ZmZlcjogQXJyYXlCdWZmZXIsIG9wdGlvbnM/OiBJSGVpZ2h0TWFwRmlsZUltcG9ydE9wdGlvbnMpOiBQcm9taXNlPElJbXBvcnRGaWxlSGVhZGVyIHwgbnVsbD4ge1xyXG5cclxuICAgICAgICAvLyBUT0RPOlxyXG4gICAgICAgIC8vIGhlYWRlciB2ZXJzaW9uIDk5XHJcbiAgICAgICAgLy8gaGVhZGVyQnl0ZVNpemUsIHZlcnNpb24sIHdpZHRoLCBkZXB0aCwgbWF4SGVpZ2h0XHJcblxyXG4gICAgICAgIGNvbnN0IG5CdWZmZXIgPSBhd2FpdCBDb21wcmVzc29yLmRlY29tcHJlc3NCdWZmZXIoYnVmZmVyLCBoZWlnaHRNYXBGaWxlQ29tcHJlc3NlZEZvcm1hdCk7XHJcbiAgICAgICAgY29uc3QgdmlldyAgICA9IG5ldyBEYXRhVmlldyhuQnVmZmVyKTtcclxuICAgICAgICBjb25zdCB2ZXJzaW9uID0gdmlldy5nZXRVaW50MzIoMSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIGlmICh2ZXJzaW9uICE9PSBoZWlnaHRNYXBWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignSGVpZ2h0IG1hcCB2ZXJzaW9uOiAlZiBubyBzdXBwb3J0LicsIHZlcnNpb24pO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBjb25zdCBoZWFkZXJTaXplID0gdmlldy5nZXRVaW50OCgwKTtcclxuICAgICAgICBjb25zdCB3aWR0aCAgICAgID0gdmlldy5nZXRVaW50MzIoNSwgdHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgZGVwdGggICAgICA9IHZpZXcuZ2V0VWludDMyKDksIHRydWUpO1xyXG4gICAgICAgIGNvbnN0IG1heEhlaWdodCAgPSB2aWV3LmdldEZsb2F0MzIoMTMsIHRydWUpO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgZmluYWxNYXhIZWlnaHQgPSBvcHRpb25zPy5hZGFwdGl2ZU1heEhlaWdodCA/IGhlaWdodE1hcC5tYXhIZWlnaHQgOiBtYXhIZWlnaHQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKChoZWlnaHRNYXAud2lkdGggIT09IHdpZHRoIHx8IGhlaWdodE1hcC5kZXB0aCAhPT0gZGVwdGgpICYmIG9wdGlvbnM/LmFkYXB0aXZlV2lkdGhBbmREZXB0aCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVE9ETzogaXRzIHdvcmsgZm9yIHhebiArIDEsIHpebiArIDFcclxuICAgICAgICAgICAgY29uc3QgZmFjdG9yWCA9ICh3aWR0aCAtIDEpIC8gKGhlaWdodE1hcC53aWR0aCAtIDEpO1xyXG4gICAgICAgICAgICBjb25zdCBmYWN0b3JaID0gKGRlcHRoIC0gMSkgLyAoaGVpZ2h0TWFwLmRlcHRoIC0gMSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IGRlcHRoOyB6ICs9IGZhY3RvclopIHtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4ICs9IGZhY3RvclgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogc21vb3RoIGZvciBoZWlnaHRNYXAgbW9yZSBpbXBvcnQgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IHRoaXMuX19yZWFkSGVpZ2h0RmFjdG9yKHZpZXcsIGhlYWRlclNpemUsIHdpZHRoLCB4IHwgMCwgeiB8IDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGZhY3RvciAqIGZpbmFsTWF4SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRNYXAuc2V0KHggLyBmYWN0b3JYLCB6IC8gZmFjdG9yWiwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgeiA9IDA7ICh6IDwgZGVwdGgpICYmICh6IDwgaGVpZ2h0TWFwLmRlcHRoKTsgeisrKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgKHggPCB3aWR0aCkgJiYgKHggPCBoZWlnaHRNYXAud2lkdGgpOyB4KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gdGhpcy5fX3JlYWRIZWlnaHRGYWN0b3IodmlldywgaGVhZGVyU2l6ZSwgd2lkdGgsIHgsIHopO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGZhY3RvciAqIGZpbmFsTWF4SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodE1hcC5zZXQoeCwgeiwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgIGRlcHRoLFxyXG4gICAgICAgICAgICBtYXhIZWlnaHRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9fZXhwb3J0VG9CdWZmZXIoaGVpZ2h0TWFwOiBBYnNIZWlnaHRNYXApIHtcclxuICAgIFxyXG4gICAgICAgIC8vIFRPRE86XHJcbiAgICAgICAgLy8gaGVhZGVyIHZlcnNpb24gOTlcclxuICAgICAgICAvLyBoZWFkZXJCeXRlU2l6ZSwgdmVyc2lvbiwgd2lkdGgsIGRlcHRoLCBtYXhIZWlnaHRcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGhlYWRlclNpemUgPSAxICsgNCArIDQgKyA0ICsgNDtcclxuICAgICAgICBjb25zdCBidWZmZXIgICAgID0gbmV3IEFycmF5QnVmZmVyKGhlYWRlclNpemUgKyBmYWN0b3JTaXplICogaGVpZ2h0TWFwLndpZHRoICogaGVpZ2h0TWFwLmRlcHRoKTtcclxuICAgICAgICBjb25zdCB2aWV3ICAgICAgID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XHJcbiAgICBcclxuICAgICAgICB2aWV3LnNldFVpbnQ4ICAoMCwgaGVhZGVyU2l6ZSk7XHJcbiAgICAgICAgdmlldy5zZXRVaW50MzIgKDEsIGhlaWdodE1hcFZlcnNpb24sIHRydWUpO1xyXG4gICAgICAgIHZpZXcuc2V0VWludDMyICg1LCBoZWlnaHRNYXAud2lkdGgsIHRydWUpO1xyXG4gICAgICAgIHZpZXcuc2V0VWludDMyICg5LCBoZWlnaHRNYXAuZGVwdGgsIHRydWUpO1xyXG4gICAgICAgIHZpZXcuc2V0RmxvYXQzMigxMywgaGVpZ2h0TWFwLm1heEhlaWdodCwgdHJ1ZSk7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IGhlaWdodE1hcC5kZXB0aDsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGhlaWdodE1hcC53aWR0aDsgeCsrKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fX3dyaXRlSGVpZ2h0RmFjdG9yKHZpZXcsIGhlYWRlclNpemUsIGhlaWdodE1hcCwgeCwgeik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBDb21wcmVzc29yLmNvbXByZXNzQnVmZmVyKGJ1ZmZlciwgaGVpZ2h0TWFwRmlsZUNvbXByZXNzZWRGb3JtYXQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBYnNIZWlnaHRNYXBGaWxlSU87IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJWm9uZSB9IGZyb20gXCIuL0lab25lLm1qc1wiO1xyXG5pbXBvcnQgQWJzSGVpZ2h0TWFwRmlsZUlPLCB7IHR5cGUgSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwRmlsZUlPLm1qc1wiO1xyXG5cclxuLyoqXHJcbiAqIEB2YXJpYW50IHIzMmYgLSBmb3JtYXQgYnkgZmxvYXQzMiB0ZXh0dXJlXHJcbiAqIEB2YXJpYW50IHJnYmEgLSBmb3JhbXQgYnkgdWludDhbNF0gdGV4dHVyZVxyXG4gKiBAdmFyaWFudCByZ2JhWDIgLSBmb3JtYXQgY29tcHJlc3NlZCBieSAyIHBhdGNoZXMgYnkgeCBjb29yZGluYXRlXHJcbiAqIEB2YXJpYW50IHJnYmFYNCAtIGZvcm1hdCBjb21wcmVzc2VkIGJ5IDQgcGF0Y2hlcyBieSB4IGNvb3JkaW5hdGVcclxuICogQHNlZSBDb21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcFxyXG4gKi9cclxuZXhwb3J0IHR5cGUgVEhlaWdodE1hcEZvcm1hdCA9ICdyMzJmJyB8ICdyZ2JhJyB8ICdyZ2JhWDInIHwgJ3JnYmFYNCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZWFkb25seUFic0hlaWdodE1hcCB7XHJcblxyXG4gICAgcmVhZG9ubHkgd2lkdGg6IGludDtcclxuICAgIHJlYWRvbmx5IGRlcHRoOiBpbnQ7XHJcblxyXG4gICAgcmVhZG9ubHkgbWF4SGVpZ2h0OiBmbG9hdDtcclxuXHJcbiAgICBnZXQoeDogaW50LCB6OiBpbnQpOiBmbG9hdDtcclxuICAgIGdldEZhY3Rvcih4OiBpbnQsIHo6IGludCk6IGZsb2F0O1xyXG4gICAgZ2V0SGVpZ2h0SW50ZXJwb2xhdGVkKHg6IGZsb2F0LCB6OiBmbG9hdCk6IGZsb2F0O1xyXG4gICAgdG9GaWxlKCk6IFByb21pc2U8QmxvYj47XHJcbiAgICB0b0NhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHRvQnVmZmVyKGJ1ZmZlcjogVWludDhBcnJheSB8IFVpbnQ4Q2xhbXBlZEFycmF5KTogdm9pZDtcclxuICAgIHRvSW1hZ2UodHlwZT86IHN0cmluZyB8IHVuZGVmaW5lZCwgcXVhbGl0eT86IGFueSk6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic0hlaWdodE1hcCBleHRlbmRzIEFic0hlaWdodE1hcEZpbGVJTyBpbXBsZW1lbnRzIElSZWFkb25seUFic0hlaWdodE1hcCwgSVpvbmUge1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCB3aWR0aDogaW50O1xyXG4gICAgcHVibGljIGFic3RyYWN0IGRlcHRoOiBpbnQ7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgbWF4SGVpZ2h0OiBmbG9hdDtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0KHg6IGludCwgejogaW50KTogZmxvYXQ7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3Qgc2V0KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpOiBmbG9hdDtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGYWN0b3IoeDogaW50LCB6OiBpbnQpOiBmbG9hdDtcclxuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWluWCA9IDA7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWluWiA9IDA7XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXQgbWF4WCgpIHsgcmV0dXJuIHRoaXMud2lkdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgbWF4WigpIHsgcmV0dXJuIHRoaXMuZGVwdGg7IH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SGVpZ2h0SW50ZXJwb2xhdGVkKHg6IGZsb2F0LCB6OiBmbG9hdCkge1xyXG5cclxuICAgICAgICBjb25zdCBpbnRYID0geCB8IDA7XHJcbiAgICAgICAgY29uc3QgaW50WiA9IHogfCAwO1xyXG4gICAgICAgIGNvbnN0IHgwejAgPSB0aGlzLmdldChpbnRYLCBpbnRaKTtcclxuXHJcbiAgICAgICAgaWYgKChpbnRYICsgMSA+PSB0aGlzLndpZHRoKSB8fFxyXG4gICAgICAgICAgICAoaW50WiArIDEgPj0gdGhpcy5kZXB0aCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHgwejA7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgY29uc3QgeDF6MCA9IHRoaXMuZ2V0KGludFggKyAxLCBpbnRaKTtcclxuICAgICAgICBjb25zdCB4MHoxID0gdGhpcy5nZXQoaW50WCwgICAgIGludFogKyAxKTtcclxuICAgICAgICBjb25zdCB4MXoxID0gdGhpcy5nZXQoaW50WCArIDEsIGludFogKyAxKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGZhY3RvclggPSB4IC0gaW50WDtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGludGVycG9sYXRlZEJvdHRvbSA9ICh4MXowIC0geDB6MCkgKiBmYWN0b3JYICsgeDB6MDtcclxuICAgICAgICBjb25zdCBpbnRlcnBvbGF0ZWRUb3AgICAgPSAoeDF6MSAtIHgwejEpICogZmFjdG9yWCArIHgwejE7XHJcbiAgICBcclxuICAgICAgICBjb25zdCBmYWN0b3JaID0geiAtIGludFo7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbmFsSGVpZ2h0ID0gKGludGVycG9sYXRlZFRvcCAtIGludGVycG9sYXRlZEJvdHRvbSkgKiBmYWN0b3JaICsgaW50ZXJwb2xhdGVkQm90dG9tO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGZpbmFsSGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBhcHBlbmQoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCk6IGZsb2F0O1xyXG5cclxuICAgIHB1YmxpYyBzdWJzdHJhY3QoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGVuZCh4LCB6LCAtdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBtdWx0aXBseSh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0LCBoZWlnaHRJZlplcm8/OiBmbG9hdCk6IGZsb2F0O1xyXG5cclxuICAgIHB1YmxpYyBkaXZpZGUoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCwgaGVpZ2h0SWZaZXJvOiBmbG9hdCA9IDApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseSh4LCB6LCAxIC8gdmFsdWUsIGhlaWdodElmWmVybyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGZyb21GaWxlKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIG9wdGlvbnM/OiBJSGVpZ2h0TWFwRmlsZUltcG9ydE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fX2ltcG9ydEZyb21GaWxlKHRoaXMsIGJ1ZmZlciwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHRvRmlsZSgpIHtcclxuICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCB0aGlzLl9fZXhwb3J0VG9CdWZmZXIodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtidWZmZXJdLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvQnVmZmVyKGJ1ZmZlcjogVWludDhBcnJheSB8IFVpbnQ4Q2xhbXBlZEFycmF5KTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IHdpZHRoICA9IHRoaXMud2lkdGg7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSAwOyB6IDwgdGhpcy5kZXB0aDsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGYgICA9IHRoaXMuZ2V0RmFjdG9yKHgsIHopO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdiAgID0gZiAqIDI1NTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9ICh4ICsgeiAqIHdpZHRoKSAqIDQ7XHJcblxyXG4gICAgICAgICAgICAgICAgYnVmZmVyW3BvcyArIDBdID0gdjtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlcltwb3MgKyAxXSA9IHY7XHJcbiAgICAgICAgICAgICAgICBidWZmZXJbcG9zICsgMl0gPSB2O1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyW3BvcyArIDNdID0gMjU1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0b0NhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgIGNvbnN0IHdpZHRoICA9IHRoaXMud2lkdGg7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5kZXB0aDtcclxuXHJcbiAgICAgICAgY2FudmFzLndpZHRoICA9IHdpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICBpZiAoIWN0eCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCBjcmVhdGUgY2FudmFzIDJkIGNvbnRleHQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyICAgID0gaW1hZ2VEYXRhLmRhdGE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy50b0J1ZmZlcihidWZmZXIpO1xyXG4gICAgICAgIGN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhdmUgaGVpZ2h0IG1hcCB0byBpbWFnZSBvZiBiYXNlNjRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRvSW1hZ2UodHlwZT86IHN0cmluZyB8IHVuZGVmaW5lZCwgcXVhbGl0eT86IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy50b0NhbnZhcygpO1xyXG4gICAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKHR5cGUsIHF1YWxpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBoZWlnaHQgbWFwIGZyb20gaW1hZ2VcclxuICAgICAqIEBwYXJhbSBpbWcgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmcm9tSW1hZ2UoaW1nOiBJbWFnZUJpdG1hcCkge1xyXG5cclxuICAgICAgICBjb25zdCBidWZmZXJXaWR0aCAgPSBpbWcud2lkdGg7XHJcbiAgICAgICAgY29uc3QgYnVmZmVySGVpZ2h0ID0gaW1nLmhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKGJ1ZmZlcldpZHRoICUgMiAhPT0gMCB8fCBidWZmZXJIZWlnaHQgJSAyICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hcCBzaXplcyBub3QgZGl2aXNpYmxlIGJ5IDIgYXJlIG5vdCBzdXBwb3J0ZWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjYW52YXMgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSE7XHJcblxyXG4gICAgICAgIGNhbnZhcy53aWR0aCAgPSBidWZmZXJXaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gYnVmZmVySGVpZ2h0O1xyXG4gICAgXHJcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW1hZ2VEYXRhICAgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBidWZmZXJXaWR0aCwgYnVmZmVySGVpZ2h0KTtcclxuICAgICAgICBjb25zdCBpbWFnZUJ1ZmZlciA9IGltYWdlRGF0YS5kYXRhO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhTZWdtZW50WCA9IHRoaXMud2lkdGggLSAxO1xyXG4gICAgICAgIGNvbnN0IG1heFNlZ21lbnRaID0gdGhpcy5kZXB0aCAtIDE7XHJcbiAgICAgICAgY29uc3QgZmFjdG9yWCAgICAgPSBidWZmZXJXaWR0aCAgLyBtYXhTZWdtZW50WDtcclxuICAgICAgICBjb25zdCBmYWN0b3JaICAgICA9IGJ1ZmZlckhlaWdodCAvIG1heFNlZ21lbnRaO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHRoaXMuZGVwdGg7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IG5vcm1hbGl6ZVggPSB4ID09PSBtYXhTZWdtZW50WCA/IHggLSAxIDogeDtcclxuICAgICAgICAgICAgICAgIGxldCBub3JtYWxpemVaID0geiA9PT0gbWF4U2VnbWVudFogPyB6IC0gMSA6IHo7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0TWFwWCA9IChub3JtYWxpemVYICogZmFjdG9yWCkgfCAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0TWFwWiA9IChub3JtYWxpemVaICogZmFjdG9yWikgfCAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9IChoZWlnaHRNYXBYICsgaGVpZ2h0TWFwWiAqIGJ1ZmZlcldpZHRoKSAqIDQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gaW1hZ2VCdWZmZXJbcG9zXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGcgPSBpbWFnZUJ1ZmZlcltwb3MgKyAxXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBpbWFnZUJ1ZmZlcltwb3MgKyAyXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBpbWFnZUJ1ZmZlcltwb3MgKyAzXTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2VmZiAgPSAociArIGcgKyBiKSAvIDMgLyBhO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gY29lZmYgKiB0aGlzLm1heEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh4LCB6LCBoZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgc21vb3RoWm9uZSh6b25lOiBJWm9uZSwgbnA6IGZsb2F0LCByYWRpdXM6IGludCkge1xyXG5cclxuICAgICAgICBpZiAoem9uZS5tYXhYIDwgMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh6b25lLm1heFogPCAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChucCA8IDAgfHwgbnAgPiAxKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHJhZGl1cyA8IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbWluWCA9IE1hdGgubWF4KHpvbmUubWluWCwgMCk7XHJcbiAgICAgICAgY29uc3QgbWluWiA9IE1hdGgubWF4KHpvbmUubWluWiwgMCk7XHJcbiAgICAgICAgY29uc3QgbWF4WCA9IE1hdGgubWluKHpvbmUubWF4WCwgdGhpcy53aWR0aCk7XHJcbiAgICAgICAgY29uc3QgbWF4WiA9IE1hdGgubWluKHpvbmUubWF4WiwgdGhpcy5kZXB0aCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNwID0gMSAtIG5wO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB4ID0gbWluWDsgeCA8IG1heFg7IHgrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeiA9IG1pblo7IHogPCBtYXhaOyB6KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2SGVpZ2h0ID0gdGhpcy5nZXQoeCwgeik7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHVwZHRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmVpZ2hOdW1iZXIgID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBuZWlnaEF2ZXJhZ2UgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHJ4ID0gLXJhZGl1czsgcnggPD0gcmFkaXVzOyByeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHJ6ID0gLXJhZGl1czsgcnogPD0gcmFkaXVzOyByeisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lclggPSAoeCArIHJ4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5uZXJaID0gKHogKyByeik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJYIDwgMCB8fCBpbm5lclggPj0gdGhpcy53aWR0aCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbm5lclogPCAwIHx8IGlubmVyWiA+PSB0aGlzLmRlcHRoKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IChpbm5lclggPT09IHggJiYgaW5uZXJaID09PSB6KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBwcmV2SGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZ2V0KGlubmVyWCwgaW5uZXJaKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoTnVtYmVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoQXZlcmFnZSArPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG5laWdoQXZlcmFnZSAvPSBuZWlnaE51bWJlcjtcclxuICAgICAgICAgICAgICAgIHVwZHRIZWlnaHQgPSBuZWlnaEF2ZXJhZ2UgKiBucCArIHByZXZIZWlnaHQgKiBjcDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh4LCB6LCB1cGR0SGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc21vb3RoKG5wOiBmbG9hdCwgcmFkaXVzOiBpbnQpIHtcclxuICAgICAgICB0aGlzLnNtb290aFpvbmUodGhpcywgbnAsIHJhZGl1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG5vcm1hbGl6ZShtYXhIZWlnaHQ6IGZsb2F0KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCB0aGlzLmRlcHRoOyB6KyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEhlaWdodCAgID0gdGhpcy5nZXQoeCwgeik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVIZWlnaHQgPSAoY3VycmVudEhlaWdodCAvIHRoaXMubWF4SGVpZ2h0KSAqIG1heEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh4LCB6LCBub3JtYWxpemVIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb21iaW5lSGVpZ2h0cyhcclxuICAgICAgICB0eXBlOiAnKycgfCAnLScgfCAnKicgfCAnLycsXHJcbiAgICAgICAgaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNIZWlnaHRNYXAsXHJcbiAgICAgICAgdmFsdWU6IGZsb2F0LFxyXG4gICAgICAgIHpvbmU6IElab25lLFxyXG4gICAgICAgIGhlaWdodElmWmVybzogZmxvYXQgPSAwLFxyXG4gICAgICAgIG1pbkhlaWdodDogZmxvYXQgfCBudWxsID0gbnVsbCxcclxuICAgICAgICBtYXhIZWlnaHQ6IGZsb2F0IHwgbnVsbCA9IG51bGxcclxuICAgICkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh6b25lLm1heFggPCAwKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHpvbmUubWF4WiA8IDApIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBsZW5YID0gem9uZS5tYXhYIC0gem9uZS5taW5YO1xyXG4gICAgICAgIGNvbnN0IGxlblogPSB6b25lLm1heFogLSB6b25lLm1pblo7XHJcblxyXG4gICAgICAgIGlmIChsZW5YIDwgMSB8fCBsZW5aIDwgMSB8fCB2YWx1ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmaXhlZE1pblggPSBNYXRoLm1heCh6b25lLm1pblgsIDApO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTWluWiA9IE1hdGgubWF4KHpvbmUubWluWiwgMCk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRNYXhYID0gTWF0aC5taW4oem9uZS5tYXhYLCB0aGlzLndpZHRoKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1heFogPSBNYXRoLm1pbih6b25lLm1heFosIHRoaXMuZGVwdGgpO1xyXG5cclxuICAgICAgICBjb25zdCBjb2VmZkZhY3RvclggPSAoaGVpZ2h0TWFwLndpZHRoIC0gMSkgLyBsZW5YO1xyXG4gICAgICAgIGNvbnN0IGNvZWZmRmFjdG9yWiA9IChoZWlnaHRNYXAuZGVwdGggLSAxKSAvIGxlblo7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSBmaXhlZE1pblo7IHogPCBmaXhlZE1heFo7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IGZpeGVkTWluWDsgeCA8IGZpeGVkTWF4WDsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgeDIgPSAoY29lZmZGYWN0b3JYICogKHggLSB6b25lLm1pblgpKSB8IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB6MiA9IChjb2VmZkZhY3RvclogKiAoeiAtIHpvbmUubWluWikpIHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGhlaWdodE1hcC5nZXQoeDIsIHoyKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNtb290aEFwcGVuZFZhbHVlID0gaGVpZ2h0ICogdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkSGVpZ2h0ID0gdGhpcy5nZXQoeCwgeikgfHwgaGVpZ2h0SWZaZXJvO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBjYW5kaWRhdGUgPSB0eXBlID09PSAnKycgPyBvbGRIZWlnaHQgKyBzbW9vdGhBcHBlbmRWYWx1ZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9PT0gJy0nID8gb2xkSGVpZ2h0IC0gc21vb3RoQXBwZW5kVmFsdWUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPT09ICcqJyA/IG9sZEhlaWdodCAqIHNtb290aEFwcGVuZFZhbHVlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID09PSAnLycgPyBvbGRIZWlnaHQgLyBzbW9vdGhBcHBlbmRWYWx1ZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobWluSGVpZ2h0ICE9PSBudWxsICYmIGNhbmRpZGF0ZSA8IG1pbkhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZSA9IG1pbkhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG1heEhlaWdodCAhPT0gbnVsbCAmJiBjYW5kaWRhdGUgPiBtYXhIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUgPSBtYXhIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoeCwgeiwgY2FuZGlkYXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWJzSGVpZ2h0TWFwOyIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBBYnNIZWlnaHRNYXAsIHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwLCBUSGVpZ2h0TWFwRm9ybWF0IH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgIEhlaWdodE1hcEFyclR5cGUgPSBGbG9hdDMyQXJyYXk7XHJcbmV4cG9ydCBjb25zdCBIZWlnaHRNYXBBcnJUeXBlID0gRmxvYXQzMkFycmF5O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplOiBpbnQgPSAxO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlIZWlnaHRNYXA8VERhdGEgPSBIZWlnaHRNYXBBcnJUeXBlPiBleHRlbmRzIElSZWFkb25seUFic0hlaWdodE1hcCB7XHJcbiAgICByZWFkb25seSBpdGVtU2l6ZTogaW50O1xyXG4gICAgcmVhZG9ubHkgaXRlbUhlaWdodEluZGV4T2Zmc2V0OiBpbnQ7XHJcbiAgICByZWFkb25seSBkYXRhOiBURGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhlaWdodE1hcDxURGF0YSBleHRlbmRzIEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSA9IEhlaWdodE1hcEFyclR5cGU+IGV4dGVuZHMgQWJzSGVpZ2h0TWFwIGltcGxlbWVudHMgSVJlYWRvbmx5SGVpZ2h0TWFwPFREYXRhPiB7XHJcblxyXG4gICAgcHJpdmF0ZSBfd2lkdGg6IGludCA9IDA7XHJcbiAgICBwcml2YXRlIF9kZXB0aDogaW50ID0gMDtcclxuICAgIHByaXZhdGUgX21heEhlaWdodDogZmxvYXQgPSAwO1xyXG4gICAgcHJpdmF0ZSBfZGF0YTogVERhdGE7XHJcbiAgICBcclxuICAgIHByaXZhdGUgX2l0ZW1TaXplOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9pdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludDtcclxuICAgIFxyXG4gICAgcHVibGljIGdldCBzaXplKCkgIHsgcmV0dXJuIHRoaXMuX3dpZHRoICogdGhpcy5fZGVwdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgd2lkdGgoKSB7IHJldHVybiB0aGlzLl93aWR0aDsgfVxyXG4gICAgcHVibGljIGdldCBkZXB0aCgpIHsgcmV0dXJuIHRoaXMuX2RlcHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRhdGEoKSAgeyByZXR1cm4gdGhpcy5fZGF0YTsgfVxyXG4gICAgcHVibGljIGdldCBmb3JtYXQoKTogVEhlaWdodE1hcEZvcm1hdCB7IHJldHVybiAncmdiYSc7IH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGl0ZW1TaXplKCkgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2l0ZW1TaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGl0ZW1IZWlnaHRJbmRleE9mZnNldCgpIHsgcmV0dXJuIHRoaXMuX2l0ZW1IZWlnaHRJbmRleE9mZnNldDsgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0IG1heEhlaWdodCgpICB7IHJldHVybiB0aGlzLl9tYXhIZWlnaHQ7IH1cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyOiBURGF0YSwgaXRlbVNpemU/OiBpbnQsIGl0ZW1IZWlnaHRJbmRleE9mZnNldD86IGludCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyPzogVERhdGEgfCB1bmRlZmluZWQsIGl0ZW1TaXplOiBpbnQgPSBkZWZhdWx0SGVpZ2h0VmVydGV4U2l6ZSwgaXRlbUhlaWdodEluZGV4T2Zmc2V0OiBpbnQgPSAwKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl9pbml0KHdpZHRoLCBkZXB0aCwgbWF4SGVpZ2h0LCBidWZmZXIhLCBpdGVtU2l6ZSwgaXRlbUhlaWdodEluZGV4T2Zmc2V0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2luaXQod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCk6IHZvaWQ7XHJcbiAgICBwcm90ZWN0ZWQgX2luaXQod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyOiBURGF0YSwgaXRlbVNpemU/OiBpbnQsIGl0ZW1IZWlnaHRJbmRleE9mZnNldD86IGludCk6IHZvaWQ7XHJcbiAgICBwcm90ZWN0ZWQgX2luaXQod2lkdGg6IGludCwgZGVwdGg6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyPzogVERhdGEgfCB1bmRlZmluZWQsIGl0ZW1TaXplOiBpbnQgPSBkZWZhdWx0SGVpZ2h0VmVydGV4U2l6ZSwgaXRlbUhlaWdodEluZGV4T2Zmc2V0OiBpbnQgPSAwKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5fZGVwdGggPSBkZXB0aDtcclxuICAgICAgICB0aGlzLl9tYXhIZWlnaHQgPSBtYXhIZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChidWZmZXIpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtU2l6ZSA8IGl0ZW1IZWlnaHRJbmRleE9mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSXRlbVNpemUgY2FuJ3QgbGVzcyBvciBlcSBJdGVtSGVpZ2h0SW5kZXhPZmZzZXRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoIDwgKHdpZHRoICogZGVwdGgpICogaXRlbVNpemUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJ1ZmZlciBoYXMgaW52YWxpZCBsZW5ndGhcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSBidWZmZXI7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1TaXplID0gaXRlbVNpemU7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1IZWlnaHRJbmRleE9mZnNldCA9IGl0ZW1IZWlnaHRJbmRleE9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHR5cGUgY2hlY2tlclxyXG4gICAgICAgICAgICB0aGlzLl9kYXRhID0gbmV3IEhlaWdodE1hcEFyclR5cGUod2lkdGggKiBkZXB0aCAqIGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplKSBhcyB1bmtub3duIGFzIFREYXRhO1xyXG4gICAgICAgICAgICB0aGlzLl9pdGVtU2l6ZSA9IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplO1xyXG4gICAgICAgICAgICB0aGlzLl9pdGVtSGVpZ2h0SW5kZXhPZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2VuY29kZUhlaWdodEZhY3RvcihzdG9yZTogVERhdGEsIGluZGV4OiBpbnQsIHZhbHVlOiBmbG9hdCkge1xyXG4gICAgICAgIHN0b3JlW2luZGV4XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcm90ZWN0ZWQgX2RlY29kZUhlaWdodEZhY3RvcihzdG9yZTogUmVjb3JkPG51bWJlciwgbnVtYmVyPiwgaW5kZXg6IGludCkge1xyXG4gICAgICAgIHJldHVybiBzdG9yZVtpbmRleF07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByb3RlY3RlZCBfZGVjb2RlSGVpZ2h0KHN0b3JlOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+LCBpbmRleDogaW50LCBtYXg6IGZsb2F0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlY29kZUhlaWdodEZhY3RvcihzdG9yZSwgaW5kZXgpICogbWF4O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfZW5jb2RlQW5kU2V0SGVpZ2h0RmFjdG9yKHN0b3JlOiBURGF0YSwgaW5kZXg6IGludCwgcmVhbEhlaWdodDogZmxvYXQsIG1heDogZmxvYXQpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplID0gTWF0aC5tYXgoTWF0aC5taW4ocmVhbEhlaWdodCwgbWF4KSwgMCk7XHJcbiAgICAgICAgY29uc3QgZmFjdG9yICAgID0gbm9ybWFsaXplIC8gbWF4O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgIHRoaXMuX2VuY29kZUhlaWdodEZhY3RvcihzdG9yZSwgaW5kZXgsIGZhY3Rvcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlY29kZUhlaWdodEZhY3RvcihzdG9yZSwgaW5kZXgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0SW5kZXgoeDogaW50LCB6OiBpbnQpIHtcclxuICAgICAgICByZXR1cm4gKHogKiB0aGlzLl93aWR0aCArIHgpICogdGhpcy5faXRlbVNpemUgKyB0aGlzLl9pdGVtSGVpZ2h0SW5kZXhPZmZzZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZhY3Rvcih4OiBpbnQsIHo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRJbmRleCh4LCB6KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVjb2RlSGVpZ2h0RmFjdG9yKHRoaXMuX2RhdGEsIGluZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0KHg6IGludCwgejogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldEluZGV4KHgsIHopO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWNvZGVIZWlnaHQodGhpcy5fZGF0YSwgaW5kZXgsIHRoaXMuX21heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHNldCh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldEluZGV4KHgsIHopO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVBbmRTZXRIZWlnaHRGYWN0b3IodGhpcy5fZGF0YSwgaW5kZXgsIHZhbHVlLCB0aGlzLl9tYXhIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRNYXhIZWlnaHQobWF4SGVpZ2h0OiBmbG9hdCkge1xyXG4gICAgICAgIHRoaXMuX21heEhlaWdodCA9IG1heEhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgYXBwZW5kKHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXggICAgID0gdGhpcy5nZXRJbmRleCh4LCB6KTtcclxuICAgICAgICBjb25zdCBvbGRWYWx1ZSAgPSB0aGlzLl9kZWNvZGVIZWlnaHQodGhpcy5fZGF0YSwgaW5kZXgsIHRoaXMuX21heEhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgY2FuVmFsdWUgID0gb2xkVmFsdWUgKyB2YWx1ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuY29kZUFuZFNldEhlaWdodEZhY3Rvcih0aGlzLl9kYXRhLCBpbmRleCwgY2FuVmFsdWUsIHRoaXMuX21heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIG11bHRpcGx5KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQsIGhlaWdodElmWmVybzogZmxvYXQgPSAwKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGluZGV4ICAgICA9IHRoaXMuZ2V0SW5kZXgoeCwgeik7XHJcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgID0gdGhpcy5fZGVjb2RlSGVpZ2h0KHRoaXMuX2RhdGEsIGluZGV4LCB0aGlzLl9tYXhIZWlnaHQpIHx8IGhlaWdodElmWmVybztcclxuICAgICAgICBjb25zdCBjYW5WYWx1ZSAgPSBvbGRWYWx1ZSAqIHZhbHVlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZW5jb2RlQW5kU2V0SGVpZ2h0RmFjdG9yKHRoaXMuX2RhdGEsIGluZGV4LCBjYW5WYWx1ZSwgdGhpcy5fbWF4SGVpZ2h0KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSGVpZ2h0TWFwOyIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElab25lIH0gZnJvbSBcIi4vSVpvbmUubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRNYXAsIHsgZGVmYXVsdEhlaWdodFZlcnRleFNpemUsIHR5cGUgSGVpZ2h0TWFwQXJyVHlwZSwgdHlwZSBJUmVhZG9ubHlIZWlnaHRNYXAgfSBmcm9tIFwiLi9IZWlnaHRNYXAubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgbWluTWF4U3RhY2tTaXplICA9IDI7XHJcbmV4cG9ydCBjb25zdCBtaW5NYXhHbG9iYWxTaXplID0gMiAqIG1pbk1heFN0YWNrU2l6ZTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwIGV4dGVuZHMgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIHtcclxuXHJcbiAgICByZWFkb25seSBwYXRjaFNpemU6IGludDtcclxuICAgIHJlYWRvbmx5IG51bVBhdGNoZXNYOiBpbnQ7XHJcbiAgICByZWFkb25seSBudW1QYXRjaGVzWjogaW50O1xyXG5cclxuICAgIGdldE1pbigpOiBmbG9hdDtcclxuICAgIGdldE1heCgpOiBmbG9hdDtcclxuICAgIGdldE1pbkZhY3RvcigpOiBmbG9hdDtcclxuICAgIGdldE1heEZhY3RvcigpOiBmbG9hdDtcclxuICAgIGdldEVudHJpZXNQYXRjaE1pbih4OiBmbG9hdCwgejogZmxvYXQpOiBmbG9hdDtcclxuICAgIGdldEVudHJpZXNQYXRjaE1heCh4OiBmbG9hdCwgejogZmxvYXQpOiBmbG9hdDtcclxuICAgIGdldEVudHJpZXNQYXRjaE1pbkZhY3Rvcih4OiBmbG9hdCwgejogZmxvYXQpOiBmbG9hdDtcclxuICAgIGdldEVudHJpZXNQYXRjaE1heEZhY3Rvcih4OiBmbG9hdCwgejogZmxvYXQpOiBmbG9hdDtcclxuICAgIGdldFBhdGNoTWluKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KTogZmxvYXQ7XHJcbiAgICBnZXRQYXRjaE1heChwYXRjaEJhc2VYOiBpbnQsIHBhdGNoQmFzZVo6IGludCk6IGZsb2F0O1xyXG4gICAgZ2V0UGF0Y2hNaW5GYWN0b3IocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpOiBmbG9hdDtcclxuICAgIGdldFBhdGNoTWF4RmFjdG9yKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KTogZmxvYXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwVHlwcGVkPFREYXRhIGV4dGVuZHMgRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50OEFycmF5ID0gSGVpZ2h0TWFwQXJyVHlwZT4gZXh0ZW5kcyBJUmVhZG9ubHlBYnNTaGF0dGVyZWRIZWlnaHRNYXAsIElSZWFkb25seUhlaWdodE1hcDxURGF0YT4ge1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic1NoYXR0ZXJlZEhlaWdodE1hcDxURGF0YSBleHRlbmRzIEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSA9IEhlaWdodE1hcEFyclR5cGU+IGV4dGVuZHMgSGVpZ2h0TWFwPFREYXRhPiBpbXBsZW1lbnRzIElSZWFkb25seUFic1NoYXR0ZXJlZEhlaWdodE1hcFR5cHBlZDxURGF0YT4ge1xyXG4gICAgXHJcbiAgICBwcm90ZWN0ZWQgX3BhdGNoU2l6ZTogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9udW1QYXRjaGVzWDogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9udW1QYXRjaGVzWjogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9wYXRjaGVzU2VnbWVudFNpemU6IGludDtcclxuICAgIHByb3RlY3RlZCBfbWluTWF4SGVpZ2h0Q29vcmRzOiBpbnRbXTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoU2l6ZSgpICAgeyByZXR1cm4gdGhpcy5fcGF0Y2hTaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNYKCkgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1g7IH1cclxuICAgIHB1YmxpYyBnZXQgbnVtUGF0Y2hlc1ooKSB7IHJldHVybiB0aGlzLl9udW1QYXRjaGVzWjsgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIG1heEhlaWdodDogZmxvYXQsIGJ1ZmZlcjogVERhdGEsIGl0ZW1TaXplPzogaW50LCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ/OiBpbnQpO1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIHBhdGNoU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI/OiBURGF0YSB8IHVuZGVmaW5lZCwgaXRlbVNpemU6IGludCA9IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludCA9IDApIHtcclxuICAgICAgICBzdXBlcih3aWR0aCwgZGVwdGgsIG1heEhlaWdodCwgYnVmZmVyISAvKiogVFMgaHVjayAqLywgaXRlbVNpemUsIGl0ZW1IZWlnaHRJbmRleE9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5fc2V0UGF0Y2hTaXplKHBhdGNoU2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fY2xlYXJNaW5NYXhIZWlnaHRDb29yZHMoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIF9zZXRQYXRjaFNpemUocGF0Y2hTaXplOiBpbnQpIHtcclxuICAgICAgICB0aGlzLl9wYXRjaFNpemUgICA9IHBhdGNoU2l6ZTtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWCA9ICgodGhpcy53aWR0aCAtIDEpIC8gKHRoaXMuX3BhdGNoU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgdGhpcy5fbnVtUGF0Y2hlc1ogPSAoKHRoaXMuZGVwdGggLSAxKSAvICh0aGlzLl9wYXRjaFNpemUgLSAxKSkgfCAwO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoZXNTZWdtZW50U2l6ZSA9IHRoaXMuX251bVBhdGNoZXNYICogdGhpcy5fbnVtUGF0Y2hlc1ogKiBtaW5NYXhTdGFja1NpemU7XHJcbiAgICAgICAgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzID0gbmV3IEFycmF5PGludD4obWluTWF4R2xvYmFsU2l6ZSArIHRoaXMuX3BhdGNoZXNTZWdtZW50U2l6ZSAqIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfY2xlYXJNaW5NYXhIZWlnaHRDb29yZHMoKSB7XHJcbiAgICAgICAgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzLmZpbGwoMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEVudHJpZXNQYXRjaE1pbih4OiBpbnQsIHo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWCA9IHggLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWiA9IHogLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFBhdGNoTWluKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RW50cmllc1BhdGNoTWF4KHg6IGludCwgejogaW50KSB7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hYID0geCAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgY29uc3QgcGF0Y2haID0geiAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGF0Y2hNYXgocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRFbnRyaWVzUGF0Y2hNaW5GYWN0b3IoeDogaW50LCB6OiBpbnQpIHtcclxuICAgICAgICBjb25zdCBwYXRjaFggPSB4IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBwYXRjaFogPSB6IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRQYXRjaE1pbkZhY3RvcihwYXRjaFgsIHBhdGNoWik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEVudHJpZXNQYXRjaE1heEZhY3Rvcih4OiBpbnQsIHo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWCA9IHggLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWiA9IHogLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFBhdGNoTWF4RmFjdG9yKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TWluKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbMF0sIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1sxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE1heCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzWzJdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbM10pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNaW5GYWN0b3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmFjdG9yKHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1swXSwgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzWzFdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TWF4RmFjdG9yKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbMl0sIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1szXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBhdGNoTWluKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSBtaW5NYXhHbG9iYWxTaXplICsgKHBhdGNoQmFzZVogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoQmFzZVgpICogbWluTWF4U3RhY2tTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXhdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXggKyAxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBhdGNoTWF4KHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSBtaW5NYXhHbG9iYWxTaXplICsgKHBhdGNoQmFzZVogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoQmFzZVgpICogbWluTWF4U3RhY2tTaXplICsgdGhpcy5fcGF0Y2hlc1NlZ21lbnRTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXhdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXggKyAxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBhdGNoTWluRmFjdG9yKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSBtaW5NYXhHbG9iYWxTaXplICsgKHBhdGNoQmFzZVogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoQmFzZVgpICogbWluTWF4U3RhY2tTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXhdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXggKyAxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBhdGNoTWF4RmFjdG9yKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSBtaW5NYXhHbG9iYWxTaXplICsgKHBhdGNoQmFzZVogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoQmFzZVgpICogbWluTWF4U3RhY2tTaXplICsgdGhpcy5fcGF0Y2hlc1NlZ21lbnRTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXhdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbaW5kZXggKyAxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY2FsY3VsYXRlQUFCQigpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzWzBdID0gMDtcclxuICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbMV0gPSAwO1xyXG4gICAgICAgIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1syXSA9IDA7XHJcbiAgICAgICAgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzWzNdID0gMDtcclxuXHJcbiAgICAgICAgbGV0IG1pbkZhY3RvciA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xyXG4gICAgICAgIGxldCBtYXhGYWN0b3IgPSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBwYXRjaFogPSAwOyBwYXRjaFogPCB0aGlzLl9udW1QYXRjaGVzWjsgcGF0Y2haKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHBhdGNoWCA9IDA7IHBhdGNoWCA8IHRoaXMuX251bVBhdGNoZXNYOyBwYXRjaFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbkluZGV4ID0gbWluTWF4R2xvYmFsU2l6ZSArIChwYXRjaFogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoWCkgKiBtaW5NYXhTdGFja1NpemU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhJbmRleCA9IG1pbkluZGV4ICsgdGhpcy5fcGF0Y2hlc1NlZ21lbnRTaXplO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoTWluRmFjdG9yID0gdGhpcy5nZXRGYWN0b3IodGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW21pbkluZGV4XSwgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW21pbkluZGV4ICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hNYXhmYWN0b3IgPSB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXhdLCB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXggKyAxXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1pbkZhY3RvciA+IHBhdGNoTWluRmFjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluRmFjdG9yID0gcGF0Y2hNaW5GYWN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzWzBdID0gdGhpcy5fbWluTWF4SGVpZ2h0Q29vcmRzW21pbkluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbMV0gPSB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWluSW5kZXggKyAxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWF4RmFjdG9yIDwgcGF0Y2hNYXhmYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhGYWN0b3IgPSBwYXRjaE1heGZhY3RvcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbMl0gPSB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1szXSA9IHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1ttYXhJbmRleCArIDFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWNhbGN1bGF0ZU1pbk1heCh6b25lOiBJWm9uZSk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh6b25lLm1heFggPCAwKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHpvbmUubWF4WiA8IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZml4ZWRNaW5YID0gTWF0aC5tYXgoem9uZS5taW5YLCAwKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1pblogPSBNYXRoLm1heCh6b25lLm1pblosIDApO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTWF4WCA9IE1hdGgubWluKHpvbmUubWF4WCwgdGhpcy53aWR0aCk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRNYXhaID0gTWF0aC5taW4oem9uZS5tYXhaLCB0aGlzLmRlcHRoKTtcclxuXHJcbiAgICAgICAgbGV0IGdsb2JhbE1pbkYgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuICAgICAgICBsZXQgZ2xvYmFsTWF4RiA9IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xyXG5cclxuICAgICAgICBsZXQgZ2xvYmFsTWluWCA9IDA7XHJcbiAgICAgICAgbGV0IGdsb2JhbE1pblogPSAwO1xyXG4gICAgICAgIGxldCBnbG9iYWxNYXhYID0gMDtcclxuICAgICAgICBsZXQgZ2xvYmFsTWF4WiA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSBmaXhlZE1pblo7IHogPCBmaXhlZE1heFo7IHogKz0gdGhpcy5fcGF0Y2hTaXplKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gZml4ZWRNaW5YOyB4IDwgZml4ZWRNYXhYOyB4ICs9IHRoaXMuX3BhdGNoU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaFggICA9IHggLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2haICAgPSB6IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoSSAgID0gcGF0Y2haICogdGhpcy5fbnVtUGF0Y2hlc1ggKyBwYXRjaFg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5JbmRleCA9IG1pbk1heEdsb2JhbFNpemUgKyBwYXRjaEkgKiBtaW5NYXhTdGFja1NpemU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhJbmRleCA9IG1pbkluZGV4ICsgdGhpcy5fcGF0Y2hlc1NlZ21lbnRTaXplO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFBhdGNoWCA9IHBhdGNoWCAqIHRoaXMuX3BhdGNoU2l6ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0UGF0Y2haID0gcGF0Y2haICogdGhpcy5fcGF0Y2hTaXplO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFBhdGNoWCAgPSBmaXJzdFBhdGNoWCArIHRoaXMuX3BhdGNoU2l6ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQYXRjaFogID0gZmlyc3RQYXRjaFogKyB0aGlzLl9wYXRjaFNpemU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG1pbkYgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuICAgICAgICAgICAgICAgIGxldCBtYXhGID0gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWluWCA9IGZpcnN0UGF0Y2hYO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1pblogPSBmaXJzdFBhdGNoWjtcclxuICAgICAgICAgICAgICAgIGxldCBtYXhYID0gZmlyc3RQYXRjaFg7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4WiA9IGZpcnN0UGF0Y2haO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGlubmVyWiA9IGZpcnN0UGF0Y2haICsgMTsgaW5uZXJaIDwgbGFzdFBhdGNoWjsgaW5uZXJaKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5uZXJYID0gZmlyc3RQYXRjaFggKyAxOyBpbm5lclggPCBsYXN0UGF0Y2hYOyBpbm5lclgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gdGhpcy5nZXRGYWN0b3IoaW5uZXJYLCBpbm5lclopO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbkYgPiBmYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkYgPSBmYWN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5YID0gaW5uZXJYO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWiA9IGlubmVyWjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heEYgPCBmYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEYgPSBmYWN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhYID0gaW5uZXJYO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WiA9IGlubmVyWjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsTWluRiA+IG1pbkYpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNaW5GID0gbWluRjtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNaW5YID0gbWluWDtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNaW5aID0gbWluWjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsTWF4RiA8IG1heEYpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNYXhGID0gbWF4RjtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNYXhYID0gbWF4WDtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNYXhaID0gbWF4WjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWluSW5kZXhdICAgICA9IG1pblg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWluSW5kZXggKyAxXSA9IG1pblo7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXhdICAgICA9IG1heFg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbbWF4SW5kZXggKyAxXSA9IG1heFo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdldE1pbkZhY3RvcigpID4gZ2xvYmFsTWluRikge1xyXG4gICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbMF0gPSBnbG9iYWxNaW5YO1xyXG4gICAgICAgICAgICB0aGlzLl9taW5NYXhIZWlnaHRDb29yZHNbMV0gPSBnbG9iYWxNaW5aO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0TWF4RmFjdG9yKCkgPCBnbG9iYWxNYXhGKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1syXSA9IGdsb2JhbE1heFg7XHJcbiAgICAgICAgICAgIHRoaXMuX21pbk1heEhlaWdodENvb3Jkc1szXSA9IGdsb2JhbE1heFo7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgSGVpZ2h0TWFwQXJyVHlwZSwgZGVmYXVsdEhlaWdodFZlcnRleFNpemUsIHR5cGUgSVJlYWRvbmx5SGVpZ2h0TWFwIH0gZnJvbSBcIi4vSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBBYnNTaGF0dGVyZWRIZWlnaHRNYXAsIHR5cGUgSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzU2hhdHRlcmVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlBYnNDaHVua2VkSGVpZ2h0TWFwIGV4dGVuZHMgSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwIHtcclxuXHJcbiAgICByZWFkb25seSBkYXRhQ2h1bmtTaXplOiBpbnQ7XHJcbiAgICByZWFkb25seSBkYXRhTnVtQ2h1bmtzWDogaW50O1xyXG4gICAgcmVhZG9ubHkgZGF0YU51bUNodW5rc1o6IGludDtcclxuICAgIHJlYWRvbmx5IGRhdGFDaHVua1NpemVGYWN0b3I6IGZsb2F0O1xyXG5cclxuICAgIGdldENodW5rSW5kZXgoY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogaW50O1xyXG4gICAgZ2V0Q2h1bmtCdWZmZXIodHlwZTogRmxvYXQzMkFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IEZsb2F0MzJBcnJheTtcclxuICAgIGdldENodW5rQnVmZmVyKHR5cGU6IFVpbnQxNkFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IFVpbnQxNkFycmF5O1xyXG4gICAgZ2V0Q2h1bmtCdWZmZXIodHlwZTogVWludDhBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBVaW50OEFycmF5O1xyXG4gICAgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcik6IEZsb2F0MzJBcnJheVtdO1xyXG4gICAgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yKTogVWludDE2QXJyYXlbXTtcclxuICAgIGdldENodW5rc0J1ZmZlcnModHlwZTogVWludDhBcnJheUNvbnN0cnVjdG9yKTogVWludDhBcnJheVtdO1xyXG5cclxuICAgIGdldENodW5rQnVmZmVyPFQgZXh0ZW5kcyBGbG9hdDMyQXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQxNkFycmF5Q29uc3RydWN0b3IgfCBVaW50OEFycmF5Q29uc3RydWN0b3I+KHR5cGU6IFQsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IGFueTtcclxuICAgIGdldENodW5rc0J1ZmZlcnM8VCBleHRlbmRzIEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yIHwgVWludDE2QXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQ4QXJyYXlDb25zdHJ1Y3Rvcj4odHlwZTogVCk6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlBYnNDaHVua2VkSGVpZ2h0TWFwVHlwcGVkPFREYXRhIGV4dGVuZHMgRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50OEFycmF5ID0gSGVpZ2h0TWFwQXJyVHlwZT4gZXh0ZW5kcyBJUmVhZG9ubHlBYnNDaHVua2VkSGVpZ2h0TWFwLCBJUmVhZG9ubHlIZWlnaHRNYXA8VERhdGE+IHtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1pbk1heFN0YWNrU2l6ZSA9IDI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUocGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCkge1xyXG5cclxuICAgIGlmICgoZGF0YUNodW5rU2l6ZSAtIDEpICUgKHBhdGNoU2l6ZSAtIDEpICE9PSAwKSB7XHJcbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRXaWR0aCA9ICgoZGF0YUNodW5rU2l6ZSAtIDEgKyBwYXRjaFNpemUgLSAxKSAvIChkYXRhQ2h1bmtTaXplIC0gMSkpICogKHBhdGNoU2l6ZSAtIDEpICsgMTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YUNodW5rU2l6ZSBtaW51cyAxICglZCkgbXVzdCBiZSBkaXZpc2libGUgYnkgcGF0Y2hTaXplIG1pbnVzIDEgKCVkKVxcblwiLCBkYXRhQ2h1bmtTaXplLCBwYXRjaFNpemUpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUcnkgdXNpbmcgRGF0YUNodW5rU2l6ZSA9ICVkXFxuXCIsIHJlY29tbWVuZGVkV2lkdGgpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhQ2h1bmtTaXplO1xyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzQ2h1bmtlZEhlaWdodE1hcDxURGF0YSBleHRlbmRzIEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSA9IEhlaWdodE1hcEFyclR5cGU+IGV4dGVuZHMgQWJzU2hhdHRlcmVkSGVpZ2h0TWFwPFREYXRhPiBpbXBsZW1lbnRzIElSZWFkb25seUFic0NodW5rZWRIZWlnaHRNYXBUeXBwZWQ8VERhdGE+IHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgX3BhdGNoZXNTZWdtZW50U2l6ZTogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9taW5NYXhIZWlnaHRDb29yZHM6IGludFtdO1xyXG4gICAgcHJvdGVjdGVkIF9taW5IZWlnaHRDb29yZDogaW50W107XHJcbiAgICBwcm90ZWN0ZWQgX21heEhlaWdodENvb3JkOiBpbnRbXTtcclxuICAgIHByb3RlY3RlZCBfZGF0YUNodW5rU2l6ZTogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9kYXRhTnVtQ2h1bmtzWDogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9kYXRhTnVtQ2h1bmtzWjogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9kYXRhQ2h1bmtTaXplRmFjdG9yOiBmbG9hdDtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGRhdGFDaHVua1NpemUoKSAgICAgICB7IHJldHVybiB0aGlzLl9kYXRhQ2h1bmtTaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRhdGFOdW1DaHVua3NYKCkgICAgICB7IHJldHVybiB0aGlzLl9kYXRhTnVtQ2h1bmtzWDsgfVxyXG4gICAgcHVibGljIGdldCBkYXRhTnVtQ2h1bmtzWigpICAgICAgeyByZXR1cm4gdGhpcy5fZGF0YU51bUNodW5rc1o7IH1cclxuICAgIHB1YmxpYyBnZXQgZGF0YUNodW5rU2l6ZUZhY3RvcigpIHsgcmV0dXJuIHRoaXMuX2RhdGFDaHVua1NpemVGYWN0b3I7IH1cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyOiBURGF0YSwgaXRlbVNpemU/OiBpbnQsIGl0ZW1IZWlnaHRJbmRleE9mZnNldD86IGludCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyPzogVERhdGEgfCB1bmRlZmluZWQsIGl0ZW1TaXplOiBpbnQgPSBkZWZhdWx0SGVpZ2h0VmVydGV4U2l6ZSwgaXRlbUhlaWdodEluZGV4T2Zmc2V0OiBpbnQgPSAwKSB7XHJcbiAgICAgICAgc3VwZXIod2lkdGgsIGRlcHRoLCBwYXRjaFNpemUsIG1heEhlaWdodCwgYnVmZmVyISAvKiogVFMgaHVjayAqLywgaXRlbVNpemUsIGl0ZW1IZWlnaHRJbmRleE9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5fc2V0RGF0YUNodW5rU2l6ZShkYXRhQ2h1bmtTaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3NldERhdGFDaHVua1NpemUodmFsdWU6IGludCkge1xyXG4gICAgICAgIHRoaXMuX2RhdGFDaHVua1NpemUgID0gZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUodGhpcy5fcGF0Y2hTaXplLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fZGF0YU51bUNodW5rc1ggPSAoKHRoaXMud2lkdGggLSAxKSAvICh0aGlzLl9kYXRhQ2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICB0aGlzLl9kYXRhTnVtQ2h1bmtzWiA9ICgodGhpcy5kZXB0aCAtIDEpIC8gKHRoaXMuX2RhdGFDaHVua1NpemUgLSAxKSkgfCAwO1xyXG4gICAgICAgIHRoaXMuX2RhdGFDaHVua1NpemVGYWN0b3IgPSB0aGlzLl9wYXRjaFNpemUgPT09IHRoaXMuX2RhdGFDaHVua1NpemVcclxuICAgICAgICAgICAgPyAxLjBcclxuICAgICAgICAgICAgOiB0aGlzLl9wYXRjaFNpemUgLyAodGhpcy5fZGF0YUNodW5rU2l6ZSArIHRoaXMuX3BhdGNoU2l6ZSAtICh0aGlzLl9kYXRhQ2h1bmtTaXplICUgdGhpcy5fcGF0Y2hTaXplKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRJbmRleCh4OiBpbnQsIHo6IGludCk6IGludCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvY2FsWCA9IHggJSB0aGlzLl9kYXRhQ2h1bmtTaXplO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsWiA9IHogJSB0aGlzLl9kYXRhQ2h1bmtTaXplO1xyXG4gICAgICAgIGNvbnN0IGNodW5rWCA9IHggLyB0aGlzLl9kYXRhQ2h1bmtTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBjaHVua1ogPSB6IC8gdGhpcy5fZGF0YUNodW5rU2l6ZSB8IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGNodW5rT2Zmc2V0ID0gKGNodW5rWiAqIHRoaXMuX2RhdGFOdW1DaHVua3NYICsgY2h1bmtYKSAqICh0aGlzLl9kYXRhQ2h1bmtTaXplICoqIDIpO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsSW5kZXggID0gKGxvY2FsWiAqIHRoaXMuX2RhdGFDaHVua1NpemUgKyBsb2NhbFgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2h1bmtPZmZzZXQgKyBsb2NhbEluZGV4O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtJbmRleChjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBpbnQge1xyXG4gICAgICAgIHJldHVybiBjaHVua1ogKiB0aGlzLl9kYXRhTnVtQ2h1bmtzWCArIGNodW5rWDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtCdWZmZXIodHlwZTogRmxvYXQzMkFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IEZsb2F0MzJBcnJheTtcclxuICAgIHB1YmxpYyBnZXRDaHVua0J1ZmZlcih0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBVaW50MTZBcnJheTtcclxuICAgIHB1YmxpYyBnZXRDaHVua0J1ZmZlcih0eXBlOiBVaW50OEFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IFVpbnQ4QXJyYXk7XHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtCdWZmZXIodHlwZTogYW55LCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpIHtcclxuICAgICAgICBjb25zdCBzaXplICAgICAgICA9IHRoaXMuZGF0YUNodW5rU2l6ZSAqKiAyO1xyXG4gICAgICAgIGNvbnN0IGNodW5rTGV2ZWwgID0gY2h1bmtaICogdGhpcy5kYXRhTnVtQ2h1bmtzWCArIGNodW5rWDtcclxuICAgICAgICBjb25zdCBjaHVua09mZnNldCA9IGNodW5rTGV2ZWwgKiBzaXplICogdGhpcy5kYXRhLkJZVEVTX1BFUl9FTEVNRU5UO1xyXG4gICAgICAgIGNvbnN0IGNvdW50ICAgICAgID0gc2l6ZSAqICh0aGlzLmRhdGEuQllURVNfUEVSX0VMRU1FTlQgLyB0eXBlLkJZVEVTX1BFUl9FTEVNRU5UKTtcclxuICAgICAgICByZXR1cm4gbmV3IHR5cGUodGhpcy5kYXRhLmJ1ZmZlciwgdGhpcy5kYXRhLmJ5dGVPZmZzZXQgKyBjaHVua09mZnNldCwgY291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yKTogRmxvYXQzMkFycmF5W107XHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yKTogVWludDE2QXJyYXlbXTtcclxuICAgIHB1YmxpYyBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IFVpbnQ4QXJyYXlDb25zdHJ1Y3Rvcik6IFVpbnQ4QXJyYXlbXTtcclxuICAgIHB1YmxpYyBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IGFueSkge1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5fZGF0YU51bUNodW5rc1ggKiB0aGlzLl9kYXRhTnVtQ2h1bmtzWik7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGNodW5rWiA9IDA7IGNodW5rWiA8IHRoaXMuX2RhdGFOdW1DaHVua3NaOyBjaHVua1orKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgY2h1bmtYID0gMDsgY2h1bmtYIDwgdGhpcy5fZGF0YU51bUNodW5rc1g7IGNodW5rWCsrKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2h1bmtaICogdGhpcy5fZGF0YU51bUNodW5rc1ggKyBjaHVua1g7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaW5kZXhdID0gdGhpcy5nZXRDaHVua0J1ZmZlcih0eXBlLCBjaHVua1gsIGNodW5rWik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWJzQ2h1bmtlZEhlaWdodE1hcDsiLCJpbXBvcnQgdHlwZSB7IGZsb2F0LCBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgQWJzQ2h1bmtlZEhlaWdodE1hcCwgeyBnZXRPclRocm93RGF0YUNodW5rU2l6ZSwgSVJlYWRvbmx5QWJzQ2h1bmtlZEhlaWdodE1hcFR5cHBlZCB9IGZyb20gXCIuL0Fic0NodW5rZWRIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB7IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplIH0gZnJvbSBcIi4vSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgVENvbXByZXNzQWxnb3JpdG0gPSBcIngyXCIgfCBcIng0XCI7XHJcbmV4cG9ydCB0eXBlIFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VCBleHRlbmRzIFRDb21wcmVzc0FsZ29yaXRtPiA9IFQgZXh0ZW5kcyBcIngyXCIgPyBVaW50MTZBcnJheSA6IFVpbnQ4QXJyYXk7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXA8VFRDb21wcmVzc0FsZ29yaXRtIGV4dGVuZHMgVENvbXByZXNzQWxnb3JpdG0+XHJcbiAgICAgZXh0ZW5kcyBBYnNDaHVua2VkSGVpZ2h0TWFwPFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRDb21wcmVzc0FsZ29yaXRtPj5cclxuICBpbXBsZW1lbnRzIElSZWFkb25seUFic0NodW5rZWRIZWlnaHRNYXBUeXBwZWQ8VEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVENvbXByZXNzQWxnb3JpdG0+PiB7XHJcbiAgICBcclxuICAgIHByaXZhdGUgX2NvbXByZXNzQWxnb3JpdG06IFRUQ29tcHJlc3NBbGdvcml0bTtcclxuICAgIHByaXZhdGUgX3BhdGNoWEJhdGNoU2l6ZTogaW50O1xyXG4gICAgcHJpdmF0ZSBfbWF4U2FmZUZhY3RvcjogaW50O1xyXG5cclxuICAgIHB1YmxpYyBnZXQgY29tcHJlc3NBbGdvcml0bSgpIHsgcmV0dXJuIHRoaXMuX2NvbXByZXNzQWxnb3JpdG07IH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUJ1ZmZlcjxUQ29tcHJlc3MgZXh0ZW5kcyBUQ29tcHJlc3NBbGdvcml0bT4od2lkdGg6IGludCwgZGVwdGg6IGludCwgY2h1bmtTaXplOiBpbnQsIGFsZ29yaXRtOiBUQ29tcHJlc3MpOiBUSGVpZ2h0TWFwQXJyYXlUeXBlQmFnPFRDb21wcmVzcz4ge1xyXG5cclxuICAgICAgICBjb25zdCBudW1DaHVua3NYICAgPSAoKHdpZHRoIC0gMSkgLyAoY2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICBjb25zdCBudW1DaHVua3NaICAgPSAoKGRlcHRoIC0gMSkgLyAoY2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICBjb25zdCBjaHVua0FyclNpemUgPSBjaHVua1NpemUgKiogMjtcclxuICAgICAgICBjb25zdCBjaHVua0NvdW50ICAgPSBudW1DaHVua3NYICogbnVtQ2h1bmtzWjtcclxuICAgICAgICBjb25zdCBwYXRjaFhCYXRjaGluZ0NvdW50ID0gYWxnb3JpdG0gPT09IFwieDRcIiA/IDQgOiAyO1xyXG5cclxuICAgICAgICBpZiAobnVtQ2h1bmtzWCA8IHBhdGNoWEJhdGNoaW5nQ291bnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRoZSBjaHVua1NpemUgKCVkKSBzaG91bGQgYmUgYXQgbGVhc3QgKCVkKSB0aW1lcyBzbWFsbGVyIHRoYW4gdGhlIHdpZHRoICglZClcXG5cIiwgY2h1bmtTaXplLCBwYXRjaFhCYXRjaGluZ0NvdW50LCB3aWR0aCk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChhbGdvcml0bSA9PT0gXCJ4MlwiXHJcbiAgICAgICAgICAgID8gbmV3IFVpbnQxNkFycmF5KGNodW5rQXJyU2l6ZSAqIGNodW5rQ291bnQpXHJcbiAgICAgICAgICAgIDogbmV3IFVpbnQ4QXJyYXkoY2h1bmtBcnJTaXplICogY2h1bmtDb3VudClcclxuICAgICAgICApIGFzIHVua25vd24gYXMgVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUQ29tcHJlc3M+O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgZGF0YUNodW5rU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBhbGdvcml0bTogVFRDb21wcmVzc0FsZ29yaXRtKTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgZGF0YUNodW5rU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBhbGdvcml0bTogVFRDb21wcmVzc0FsZ29yaXRtLCBidWZmZXI6IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRDb21wcmVzc0FsZ29yaXRtPiwgaXRlbVNpemU/OiBpbnQsIGl0ZW1IZWlnaHRJbmRleE9mZnNldD86IGludCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYWxnb3JpdG06IFRUQ29tcHJlc3NBbGdvcml0bSwgYnVmZmVyPzogVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVENvbXByZXNzQWxnb3JpdG0+LCBpdGVtU2l6ZTogaW50ID0gZGVmYXVsdEhlaWdodFZlcnRleFNpemUsIGl0ZW1IZWlnaHRJbmRleE9mZnNldDogaW50ID0gMCkge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkRGF0YUNodW5rU2l6ZSA9IGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplKHBhdGNoU2l6ZSwgZGF0YUNodW5rU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgdG1wQnVmZmVyID0gYnVmZmVyID8/IENvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwLmNyZWF0ZUJ1ZmZlcih3aWR0aCwgZGVwdGgsIHZhbGlkRGF0YUNodW5rU2l6ZSwgYWxnb3JpdG0pO1xyXG4gICAgICAgIHN1cGVyKHdpZHRoLCBkZXB0aCwgcGF0Y2hTaXplLCBkYXRhQ2h1bmtTaXplLCBtYXhIZWlnaHQsIHRtcEJ1ZmZlciwgaXRlbVNpemUsIGl0ZW1IZWlnaHRJbmRleE9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5fY29tcHJlc3NBbGdvcml0bSA9IGFsZ29yaXRtO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSAgPSBhbGdvcml0bSA9PT0gXCJ4NFwiID8gNCA6IDI7XHJcbiAgICAgICAgdGhpcy5fbWF4U2FmZUZhY3RvciAgICA9IGFsZ29yaXRtID09PSBcIng0XCIgPyAweGZmIDogMHhmZmZmO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRDaHVua0luZGV4KGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IGludCB7XHJcbiAgICAgICAgcmV0dXJuIChjaHVua1ogKiB0aGlzLmRhdGFOdW1DaHVua3NYICsgY2h1bmtYKSAvIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSB8IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIGdldENodW5rQnVmZmVyKHR5cGU6IEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBGbG9hdDMyQXJyYXk7XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0Q2h1bmtCdWZmZXIodHlwZTogVWludDE2QXJyYXlDb25zdHJ1Y3RvciwgY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogVWludDE2QXJyYXk7XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0Q2h1bmtCdWZmZXIodHlwZTogVWludDhBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBVaW50OEFycmF5O1xyXG4gICAgcHVibGljIG92ZXJyaWRlIGdldENodW5rQnVmZmVyKHR5cGU6IGFueSwgY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogYW55IHtcclxuICAgICAgICBjb25zdCBzaXplICAgICAgICA9IHRoaXMuZGF0YUNodW5rU2l6ZSAqKiAyO1xyXG4gICAgICAgIGNvbnN0IGNodW5rTGV2ZWwgID0gKGNodW5rWiAqIHRoaXMuZGF0YU51bUNodW5rc1ggKyBjaHVua1gpIC8gdGhpcy5fcGF0Y2hYQmF0Y2hTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBjaHVua09mZnNldCA9IGNodW5rTGV2ZWwgKiBzaXplICogdGhpcy5kYXRhLkJZVEVTX1BFUl9FTEVNRU5UICogdGhpcy5fcGF0Y2hYQmF0Y2hTaXplO1xyXG4gICAgICAgIGNvbnN0IGNvdW50ICAgICAgID0gc2l6ZSAqIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSAqICh0aGlzLmRhdGEuQllURVNfUEVSX0VMRU1FTlQgLyB0eXBlLkJZVEVTX1BFUl9FTEVNRU5UKTtcclxuICAgICAgICByZXR1cm4gbmV3IHR5cGUodGhpcy5kYXRhLmJ1ZmZlciwgdGhpcy5kYXRhLmJ5dGVPZmZzZXQgKyBjaHVua09mZnNldCwgY291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yKTogRmxvYXQzMkFycmF5W107XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yKTogVWludDE2QXJyYXlbXTtcclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IFVpbnQ4QXJyYXlDb25zdHJ1Y3Rvcik6IFVpbnQ4QXJyYXlbXTtcclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IGFueSk6IGFueSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBBcnJheSgodGhpcy5kYXRhTnVtQ2h1bmtzWCAvIHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSkgKiB0aGlzLmRhdGFOdW1DaHVua3NaKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBjaHVua1ogPSAwOyBjaHVua1ogPCB0aGlzLmRhdGFOdW1DaHVua3NaOyBjaHVua1orKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgY2h1bmtYID0gMDsgY2h1bmtYIDwgdGhpcy5kYXRhTnVtQ2h1bmtzWDsgY2h1bmtYICs9IHRoaXMuX3BhdGNoWEJhdGNoU2l6ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gKGNodW5rWiAqIHRoaXMuZGF0YU51bUNodW5rc1ggKyBjaHVua1gpIC8gdGhpcy5fcGF0Y2hYQmF0Y2hTaXplIHwgMDtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSB0aGlzLmdldENodW5rQnVmZmVyKHR5cGUsIGNodW5rWCwgY2h1bmtaKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX2VuY29kZUhlaWdodEZhY3RvcihzdG9yZTogVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVENvbXByZXNzQWxnb3JpdG0+LCBpbmRleDogaW50LCB2YWx1ZTogZmxvYXQpIHtcclxuICAgICAgICBzdG9yZVtpbmRleF0gPSBNYXRoLm1pbih2YWx1ZSAqIHRoaXMuX21heFNhZmVGYWN0b3IsIHRoaXMuX21heFNhZmVGYWN0b3IpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX2RlY29kZUhlaWdodEZhY3RvcihzdG9yZTogVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVENvbXByZXNzQWxnb3JpdG0+LCBpbmRleDogaW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlW2luZGV4XSAvIHRoaXMuX21heFNhZmVGYWN0b3I7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBvdmVycmlkZSBnZXRJbmRleCh4OiBpbnQsIHo6IGludCk6IGludCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvY2FsWCA9IHggJSB0aGlzLmRhdGFDaHVua1NpemU7XHJcbiAgICAgICAgY29uc3QgbG9jYWxaID0geiAlIHRoaXMuZGF0YUNodW5rU2l6ZTtcclxuICAgICAgICBjb25zdCBjaHVua1ggPSB4IC8gdGhpcy5kYXRhQ2h1bmtTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBjaHVua1ogPSB6IC8gdGhpcy5kYXRhQ2h1bmtTaXplIHwgMDtcclxuXHJcbiAgICAgICAgY29uc3QgY2h1bmtMZXZlbCAgPSAoY2h1bmtaICogdGhpcy5kYXRhTnVtQ2h1bmtzWCArIGNodW5rWCkgLyB0aGlzLl9wYXRjaFhCYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IGNodW5rT2Zmc2V0ID0gY2h1bmtMZXZlbCAqICh0aGlzLmRhdGFDaHVua1NpemUgKiogMik7XHJcbiAgICAgICAgY29uc3QgbG9jYWxJbmRleCAgPSBsb2NhbFogKiB0aGlzLmRhdGFDaHVua1NpemUgKyBsb2NhbFg7XHJcbiAgICAgICAgY29uc3QgbnVtQ29tcHJlc3MgPSBjaHVua1ggJSB0aGlzLl9wYXRjaFhCYXRjaFNpemU7IC8vIGNvbXByZXNzIGJ5IHggYXhpc1xyXG5cclxuICAgICAgICByZXR1cm4gKGNodW5rT2Zmc2V0ICsgbG9jYWxJbmRleCkgKiB0aGlzLl9wYXRjaFhCYXRjaFNpemUgKyBudW1Db21wcmVzcztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXA7IiwiaW1wb3J0IHsgZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUgfSBmcm9tIFwiLi4vQ29yZS9BYnNDaHVua2VkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBUQ29tcHJlc3NBbGdvcml0bSwgVEhlaWdodE1hcEFycmF5VHlwZUJhZyB9IGZyb20gXCIuLi9Db3JlL0NvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBIZWlnaHRNYXBBcnJUeXBlIH0gZnJvbSBcIi4uL0NvcmUvSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgVENvbXByZXNzQWxnb3JpdG1Pck5vbmUgPSBUQ29tcHJlc3NBbGdvcml0bSB8ICdub25lJztcclxuZXhwb3J0IHR5cGUgVFRUPFQgZXh0ZW5kcyBUQ29tcHJlc3NBbGdvcml0bU9yTm9uZT4gPVxyXG4gICAgVCBleHRlbmRzICdub25lJyA/IEhlaWdodE1hcEFyclR5cGUgOlxyXG4gICAgVCBleHRlbmRzICd4NCcgICA/IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VD4gOlxyXG4gICAgVCBleHRlbmRzICd4MicgICA/IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VD4gOlxyXG4gICAgbmV2ZXI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnVmZmVyPFRDb21wcmVzcyBleHRlbmRzIFRDb21wcmVzc0FsZ29yaXRtT3JOb25lPihcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBkZXB0aDogbnVtYmVyLFxyXG4gICAgcGF0Y2hTaXplOiBudW1iZXIsXHJcbiAgICBkYXRhQ2h1bmtTaXplOiBudW1iZXIsXHJcbiAgICBjb21wcmVzc0FsZ29yaXRtOiBUQ29tcHJlc3NcclxuKTogVFRUPFRDb21wcmVzcz4ge1xyXG5cclxuICAgIGlmICh0eXBlb2YgQW1tbyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiQW1tbyBub3QgZXhpc3RzXCIpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNodW5rU2l6ZSAgICA9IGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplKHBhdGNoU2l6ZSwgZGF0YUNodW5rU2l6ZSk7XHJcbiAgICBjb25zdCBudW1DaHVua3NYICAgPSAoKHdpZHRoIC0gMSkgLyAoY2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgIGNvbnN0IG51bUNodW5rc1ogICA9ICgoZGVwdGggLSAxKSAvIChjaHVua1NpemUgLSAxKSkgfCAwO1xyXG4gICAgY29uc3QgY2h1bmtBcnJTaXplID0gY2h1bmtTaXplICoqIDI7XHJcbiAgICBjb25zdCBjaHVua0NvdW50ICAgPSBudW1DaHVua3NYICogbnVtQ2h1bmtzWjtcclxuXHJcbiAgICBpZiAoY29tcHJlc3NBbGdvcml0bSAhPT0gXCJub25lXCIpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hYQmF0Y2hpbmdDb3VudCA9IGNvbXByZXNzQWxnb3JpdG0gPT09IFwieDRcIiA/IDQgOiAyO1xyXG5cclxuICAgICAgICBpZiAobnVtQ2h1bmtzWCA8IHBhdGNoWEJhdGNoaW5nQ291bnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRoZSBjaHVua1NpemUgKCVkKSBzaG91bGQgYmUgYXQgbGVhc3QgKCVkKSB0aW1lcyBzbWFsbGVyIHRoYW4gdGhlIHdpZHRoICglZClcXG5cIiwgY2h1bmtTaXplLCBwYXRjaFhCYXRjaGluZ0NvdW50LCB3aWR0aCk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgYnN6ID0gY29tcHJlc3NBbGdvcml0bSA9PT0gXCJ4MlwiID8gMiA6XHJcbiAgICAgICAgICAgICAgICBjb21wcmVzc0FsZ29yaXRtID09PSBcIng0XCIgPyAxIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0OyAvLyBmbG9hdDMyXHJcbiAgICBcclxuICAgIGNvbnN0IGxlbiA9IGNodW5rQXJyU2l6ZSAqIGNodW5rQ291bnQ7XHJcbiAgICBjb25zdCBwdHIgPSBBbW1vLl9tYWxsb2MoYnN6ICogbGVuKTtcclxuICAgIFxyXG4gICAgc3dpdGNoIChjb21wcmVzc0FsZ29yaXRtKSB7XHJcbiAgICAgICAgY2FzZSBcIng0XCI6IHJldHVybiBuZXcgVWludDhBcnJheShBbW1vLkhFQVBVOC5idWZmZXIsIHB0ciwgbGVuKSBhcyB1bmtub3duIGFzIFRUVDxUQ29tcHJlc3M+O1xyXG4gICAgICAgIGNhc2UgXCJ4MlwiOiByZXR1cm4gbmV3IFVpbnQxNkFycmF5KEFtbW8uSEVBUFUxNi5idWZmZXIsIHB0ciwgbGVuKSBhcyB1bmtub3duIGFzIFRUVDxUQ29tcHJlc3M+O1xyXG4gICAgICAgIGRlZmF1bHQ6ICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoQW1tby5IRUFQRjMyLmJ1ZmZlciwgcHRyLCBsZW4pIGFzIHVua25vd24gYXMgVFRUPFRDb21wcmVzcz47XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBJVmVjdG9yMiwgSVZlY3RvcjMsIFJlZk9iamVjdCwgZmxvYXQsIGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBBYnNIZWlnaHRNYXAsIHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVmVydGV4SGVpZ2h0c0luZm8ge1xyXG4gICAgbWF4SGVpZ2h0OiBmbG9hdDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29vcmRzUmVhZGVyIHtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBnZXRQb3NpdGlvbihpbmRleDogaW50LCBidWY6IFJlZk9iamVjdDxJVmVjdG9yMz4pOiBib29sZWFuO1xyXG4gICAgZ2V0UG9zaXRpb25XaXRoSGVpZ2h0QnlGYWN0b3IoaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjM+KTogYm9vbGVhbjtcclxuICAgIGdldENvb3JkcyhpbmRleDogaW50LCBidWY6IFJlZk9iamVjdDxJVmVjdG9yMz4pOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZWFkb25seUNvb3Jkc0J1ZmZlciBleHRlbmRzIElDb29yZHNSZWFkZXIge1xyXG5cclxuICAgIHJlYWRvbmx5IGhlaWdodE1hcDogSVJlYWRvbmx5QWJzSGVpZ2h0TWFwO1xyXG4gICAgcmVhZG9ubHkgcGF0Y2hWZXJ0ZXhCdWZmZXJMZW5ndGg6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHBhdGNoVmVydGV4QnVmZmVyVHlwZWQ6IFVpbnQxNkFycmF5IHwgVWludDhBcnJheTtcclxuICAgIHJlYWRvbmx5IHBhdGNoVmVydGV4QnVmZmVyRGF0YTogUmVhZG9ubHk8QXJyYXlCdWZmZXI+O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY29vcmRzVmVydGV4U2l6ZSA9IDI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29vcmRzQnVmZmVyIGltcGxlbWVudHMgSVJlYWRvbmx5Q29vcmRzQnVmZmVyIHtcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfd2lkdGg6IGludDtcclxuICAgIHByaXZhdGUgX2RlcHRoOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9wYXRjaFNpemU6IGludDtcclxuICAgIHByaXZhdGUgX2RhdGE6IEFycmF5QnVmZmVyO1xyXG4gICAgcHJpdmF0ZSBfZGF0YVR5cGVkOiBVaW50MTZBcnJheTtcclxuICAgIHByaXZhdGUgX2xlbmd0aDogbnVtYmVyO1xyXG5cclxuICAgIHJlYWRvbmx5IGhlaWdodE1hcDogQWJzSGVpZ2h0TWFwO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hWZXJ0ZXhCdWZmZXJMZW5ndGgoKSB7IHJldHVybiB0aGlzLl9sZW5ndGg7IH1cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hWZXJ0ZXhCdWZmZXJEYXRhKCkgICB7IHJldHVybiB0aGlzLl9kYXRhOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoVmVydGV4QnVmZmVyVHlwZWQoKSAgeyByZXR1cm4gdGhpcy5fZGF0YVR5cGVkOyB9XHJcblxyXG4gICAgcHVibGljIGdldCB3aWR0aCgpICAgICAgIHsgcmV0dXJuIHRoaXMuX3dpZHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRlcHRoKCkgICAgICAgeyByZXR1cm4gdGhpcy5fZGVwdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hTaXplKCkgICB7IHJldHVybiB0aGlzLl9wYXRjaFNpemU7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihoZWlnaHRNYXA6IEFic0hlaWdodE1hcCwgcGF0Y2hTaXplOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5oZWlnaHRNYXAgID0gaGVpZ2h0TWFwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3BhdGNoU2l6ZSA9IHBhdGNoU2l6ZTtcclxuICAgICAgICB0aGlzLl93aWR0aCA9IGhlaWdodE1hcC53aWR0aDtcclxuICAgICAgICB0aGlzLl9kZXB0aCA9IGhlaWdodE1hcC5kZXB0aDtcclxuICAgICAgICB0aGlzLl9sZW5ndGggPSB0aGlzLl9wYXRjaFNpemUgKiB0aGlzLl9wYXRjaFNpemU7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvb3Jkc0Fyckxlbmd0aCAgPSB0aGlzLl9sZW5ndGggKiBjb29yZHNWZXJ0ZXhTaXplO1xyXG4gICAgICAgIGNvbnN0IGNvb3Jkc0J5dGVMZW5ndGggPSBjb29yZHNBcnJMZW5ndGggKiBVaW50MTZBcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcclxuXHJcbiAgICAgICAgdGhpcy5fZGF0YSAgICAgID0gbmV3IEFycmF5QnVmZmVyKGNvb3Jkc0J5dGVMZW5ndGgpO1xyXG4gICAgICAgIHRoaXMuX2RhdGFUeXBlZCA9IG5ldyBVaW50MTZBcnJheSh0aGlzLl9kYXRhLCAwLCBjb29yZHNBcnJMZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgaW5pdCgpIHtcclxuXHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCB0aGlzLl9wYXRjaFNpemU7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLl9wYXRjaFNpemU7IHgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFUeXBlZFtpbmRleCsrXSA9IHg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhVHlwZWRbaW5kZXgrK10gPSB6O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24oaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjM+KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIHRoaXMuX3dpZHRoIHwgMDtcclxuICAgICAgICBjb25zdCB6ID0gaW5kZXggLyB0aGlzLl93aWR0aCB8IDA7XHJcblxyXG4gICAgICAgIGJ1Zi54ID0geDtcclxuICAgICAgICBidWYueSA9IHRoaXMuaGVpZ2h0TWFwLmdldCh4LCB6KTtcclxuICAgICAgICBidWYueiA9IHo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBvc2l0aW9uV2l0aEhlaWdodEJ5RmFjdG9yKGluZGV4OiBpbnQsIGJ1ZjogUmVmT2JqZWN0PElWZWN0b3IzPikge1xyXG5cclxuICAgICAgICBjb25zdCB4ID0gaW5kZXggJSB0aGlzLl93aWR0aCB8IDA7XHJcbiAgICAgICAgY29uc3QgeiA9IGluZGV4IC8gdGhpcy5fd2lkdGggfCAwO1xyXG5cclxuICAgICAgICBidWYueCA9IHg7XHJcbiAgICAgICAgYnVmLnkgPSB0aGlzLmhlaWdodE1hcC5nZXRGYWN0b3IoeCwgeik7XHJcbiAgICAgICAgYnVmLnogPSB6O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDb29yZHMoaW5kZXg6IG51bWJlciwgYnVmOiBJVmVjdG9yMyk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICBjb25zdCB4ID0gaW5kZXggJSB0aGlzLl93aWR0aCB8IDA7XHJcbiAgICAgICAgY29uc3QgeiA9IGluZGV4IC8gdGhpcy5fd2lkdGggfCAwO1xyXG5cclxuICAgICAgICBidWYueCA9IHg7XHJcbiAgICAgICAgYnVmLnogPSB6O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDb29yZHNCdWZmZXI7IiwiaW1wb3J0IHsgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBMRUZUICAgPSAyO1xyXG5leHBvcnQgY29uc3QgUklHSFQgID0gMjtcclxuZXhwb3J0IGNvbnN0IFRPUCAgICA9IDI7XHJcbmV4cG9ydCBjb25zdCBCT1RUT00gPSAyO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU2luZ2xlTG9kSW5mbyB7XHJcbiAgICBzdGFydDogaW50O1xyXG4gICAgY291bnQ6IGludDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRJbmZvKCk6IElTaW5nbGVMb2RJbmZvW11bXVtdW10ge1xyXG5cclxuICAgIGNvbnN0IGFyciA9IG5ldyBBcnJheTxJU2luZ2xlTG9kSW5mb1tdW11bXT4oTEVGVCk7XHJcblxyXG4gICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyAgIGwrKykgeyBhcnJbbF0gPSBuZXcgQXJyYXk8SVNpbmdsZUxvZEluZm9bXVtdPihSSUdIVCk7XHJcbiAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyAgcisrKSB7IGFycltsXVtyXSA9IG5ldyBBcnJheTxJU2luZ2xlTG9kSW5mb1tdPihUT1ApO1xyXG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7ICAgIHQrKykgeyBhcnJbbF1bcl1bdF0gPSBuZXcgQXJyYXk8SVNpbmdsZUxvZEluZm8+KEJPVFRPTSk7XHJcbiAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcbiAgICAgICAgYXJyW2xdW3JdW3RdW2JdID0ge1xyXG4gICAgICAgICAgICBzdGFydDogMCxcclxuICAgICAgICAgICAgY291bnQ6IDBcclxuICAgICAgICB9O1xyXG4gICAgfX19fVxyXG5cclxuICAgIHJldHVybiBhcnI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlYWRvbmx5TG9kSW5mbyB7XHJcbiAgICBpbmZvOiBSZWFkb25seTxJU2luZ2xlTG9kSW5mbz5bXVtdW11bXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExvZEluZm8gaW1wbGVtZW50cyBJUmVhZG9ubHlMb2RJbmZvIHtcclxuXHJcbiAgICAvL2luZm9bTEVGVF1bUklHSFRdW1RPUF1bQk9UVE9NXTtcclxuICAgIHB1YmxpYyBpbmZvOiBJU2luZ2xlTG9kSW5mb1tdW11bXVtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaW5mbyA9IGluaXRJbmZvKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsZWFyKCkge1xyXG4gICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgICBsKyspIHtcclxuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyAgcisrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7ICAgIHQrKykge1xyXG4gICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2luZ2xlID0gdGhpcy5pbmZvW2xdW3JdW3RdW2JdO1xyXG4gICAgICAgICAgICBzaW5nbGUuc3RhcnQgPSAwO1xyXG4gICAgICAgICAgICBzaW5nbGUuY291bnQgPSAwO1xyXG4gICAgICAgIH19fX1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTG9kSW5mbzsiLCJpbXBvcnQgdHlwZSB7IGZsb2F0LCBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGF0Y2hMb2RCYXNlIHtcclxuICAgIGNvcmU6IGludDtcclxuICAgIGxlZnQ6IGludDtcclxuICAgIHJpZ2h0OiBpbnQ7XHJcbiAgICB0b3A6IGludDtcclxuICAgIGJvdHRvbTogaW50O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElQYXRjaExvZCBleHRlbmRzIElQYXRjaExvZEJhc2Uge1xyXG5cclxuICAgIC8qKiBEaXN0YW5jZSB0byBwYXRjaCBjZW50ZXIgeHogYW5kIHkgcG9zIGZyb20gaGVpZ2h0bWFwIGFsdGl0dWRlIGJ5IGNhbWVyYSB4eiB0byAqL1xyXG4gICAgZGlzdGFuY2U6IGZsb2F0O1xyXG59IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaExvZEJhc2UgfSBmcm9tIFwiLi9JUGF0Y2hMb2QubWpzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9kSWQoYzogaW50LCBsOiBpbnQsIHI6IGludCwgdDogaW50LCBiOiBpbnQpIHtcclxuICAgICAgICAgICAgXHJcbiAgICBjb25zdCBsb2RDb3JlID0gYyArIDE7XHJcbiAgICBjb25zdCBsb2RCaW5hcnlWYWx1ZSA9IChsIDw8IDMpIHwgKHIgPDwgMikgfCAodCA8PCAxKSB8IGI7XHJcbiAgICBcclxuICAgIHJldHVybiBsb2RDb3JlICogMTYgLSBsb2RCaW5hcnlWYWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExvZEluZm9JZChsb2Q6IElQYXRjaExvZEJhc2UpIHtcclxuICAgIHJldHVybiBnZXRMb2RJZChsb2QuY29yZSwgbG9kLmxlZnQsIGxvZC5yaWdodCwgbG9kLnRvcCwgbG9kLmJvdHRvbSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVMb2RJZChpZDogaW50KTogSVBhdGNoTG9kQmFzZSB7XHJcblxyXG4gICAgY29uc3QgY0FkanVzdGVkICA9IE1hdGguZmxvb3IoaWQgLyAxNik7XHJcbiAgICBjb25zdCBiaW5hcnlQYXJ0ID0gaWQgJSAxNjtcclxuXHJcbiAgICBjb25zdCBsZWZ0ICAgPSAoYmluYXJ5UGFydCA+PiAzKSAmIDE7XHJcbiAgICBjb25zdCByaWdodCAgPSAoYmluYXJ5UGFydCA+PiAyKSAmIDE7XHJcbiAgICBjb25zdCB0b3AgICAgPSAoYmluYXJ5UGFydCA+PiAxKSAmIDE7XHJcbiAgICBjb25zdCBib3R0b20gPSBiaW5hcnlQYXJ0ICYgMTtcclxuXHJcbiAgICBjb25zdCBjb3JlID0gY0FkanVzdGVkIC0gMTtcclxuXHJcbiAgICByZXR1cm4geyBjb3JlLCBsZWZ0LCByaWdodCwgdG9wLCBib3R0b20gfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9kRXN0aW1hdG9yIHtcclxuXHJcbiAgICBwcml2YXRlIF9wYXRjaFNpemU6IGludDtcclxuICAgIHByaXZhdGUgX251bVBhdGNoZXNYOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9udW1QYXRjaGVzWjogaW50O1xyXG4gICAgcHJpdmF0ZSBfbG9kQ291bnQ6IGludDtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoU2l6ZSgpICAgeyByZXR1cm4gdGhpcy5fcGF0Y2hTaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNYKCkgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1g7IH1cclxuICAgIHB1YmxpYyBnZXQgbnVtUGF0Y2hlc1ooKSB7IHJldHVybiB0aGlzLl9udW1QYXRjaGVzWjsgfVxyXG4gICAgcHVibGljIGdldCBjb3VudCgpICAgICAgIHsgcmV0dXJuIHRoaXMuX2xvZENvdW50OyB9XHJcbiAgICBwdWJsaWMgZ2V0IG1heCgpICAgICAgICAgeyByZXR1cm4gdGhpcy5fbG9kQ291bnQgLSAxOyB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHBhdGNoU2l6ZTogaW50LCBudW1QYXRjaGVzWDogaW50LCBudW1QYXRjaGVzWjogaW50KSB7XHJcbiAgICAgICAgdGhpcy5zZXRQYXJhbXMocGF0Y2hTaXplLCBudW1QYXRjaGVzWCwgbnVtUGF0Y2hlc1opO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRQYXJhbXMocGF0Y2hTaXplOiBpbnQsIG51bVBhdGNoZXNYOiBpbnQsIG51bVBhdGNoZXNaOiBpbnQpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fcGF0Y2hTaXplICAgPSBwYXRjaFNpemU7XHJcbiAgICAgICAgdGhpcy5fbnVtUGF0Y2hlc1ggPSBudW1QYXRjaGVzWDtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWiA9IG51bVBhdGNoZXNaO1xyXG5cclxuICAgICAgICB0aGlzLl9jYWxjTWF4TE9EKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2FsY01heExPRCgpIHtcclxuXHJcbiAgICAgICAgY29uc3QgbnVtU2VnbWVudHMgICAgICAgICAgPSB0aGlzLl9wYXRjaFNpemUgLSAxO1xyXG4gICAgICAgIGNvbnN0IG51bVNlZ21lbnRzTG9nMiAgICAgID0gTWF0aC5sb2cyKG51bVNlZ21lbnRzKTtcclxuICAgICAgICBjb25zdCBudW1TZWdtZW50c0xvZzJDZWlsICA9IE1hdGguY2VpbChudW1TZWdtZW50c0xvZzIpO1xyXG4gICAgICAgIGNvbnN0IG51bVNlZ21lbnRzTG9nMkZsb29yID0gTWF0aC5mbG9vcihudW1TZWdtZW50c0xvZzIpO1xyXG5cclxuICAgICAgICBpZiAobnVtU2VnbWVudHNMb2cyQ2VpbCAhPT0gbnVtU2VnbWVudHNMb2cyRmxvb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIG51bWJlciBvZiB2ZXJ0aWNlcyBpbiB0aGUgcGF0Y2ggbWludXMgb25lIG11c3QgYmUgYSBwb3dlciBvZiB0d29cXG5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9sb2RDb3VudCA9IG51bVNlZ21lbnRzTG9nMkZsb29yO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBpbnQsIFJlZk9iamVjdCwgdW5zaWduZWRfaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgQk9UVE9NLCBMRUZULCBMb2RJbmZvLCBSSUdIVCwgVE9QLCB0eXBlIElSZWFkb25seUxvZEluZm8gfSBmcm9tIFwiLi9Mb2RJbmZvLm1qc1wiO1xyXG5pbXBvcnQgTG9kRXN0aW1hdG9yIGZyb20gXCIuL0xvZEVzdGltYXRvci5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyaWQge1xyXG4gICAgcmVhZG9ubHkgd2lkdGg6IGludDtcclxuICAgIHJlYWRvbmx5IGRlcHRoOiBpbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyaWRQYXRjaGVkIGV4dGVuZHMgSUdyaWQge1xyXG4gICAgcmVhZG9ubHkgcGF0Y2hTaXplOiBpbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyaWRQYXRjaGVkSW5mbyBleHRlbmRzIElHcmlkUGF0Y2hlZCB7XHJcbiAgICByZWFkb25seSBudW1QYXRjaGVzWDogaW50O1xyXG4gICAgcmVhZG9ubHkgbnVtUGF0Y2hlc1o6IGludDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR3JpZFBhdGNoZWRMb2QgZXh0ZW5kcyBJR3JpZFBhdGNoZWRJbmZvIHtcclxuICAgIHJlYWRvbmx5IGxvZEVzdGltYXRvcjogTG9kRXN0aW1hdG9yO1xyXG4gICAgcmVhZG9ubHkgbG9kSW5mbzogSVJlYWRvbmx5TG9kSW5mb1tdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgR3JpZEJ1aWxkZXIgaW1wbGVtZW50cyBJR3JpZFBhdGNoZWRMb2Qge1xyXG5cclxuICAgIHByaXZhdGUgX2xvZEluZm86IExvZEluZm9bXTtcclxuICAgIHByaXZhdGUgX2xvZEVzdGltYXRvcjogTG9kRXN0aW1hdG9yO1xyXG4gICAgcHJpdmF0ZSBfaW5kaWNlczogVWludDMyQXJyYXk7XHJcbiAgICBwcml2YXRlIF93aWR0aDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfZGVwdGg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX3BhdGNoU2l6ZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfbnVtUGF0Y2hlc1g6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX251bVBhdGNoZXNaOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGdldCB3aWR0aCgpIHsgcmV0dXJuIHRoaXMuX3dpZHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRlcHRoKCkgeyByZXR1cm4gdGhpcy5fZGVwdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hTaXplKCkgeyByZXR1cm4gdGhpcy5fcGF0Y2hTaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNYKCkgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1g7IH1cclxuICAgIHB1YmxpYyBnZXQgbnVtUGF0Y2hlc1ooKSB7IHJldHVybiB0aGlzLl9udW1QYXRjaGVzWjsgfVxyXG4gICAgcHVibGljIGdldCBtYXhMT0QoKSB7IHJldHVybiB0aGlzLmxvZEVzdGltYXRvci5tYXg7IH1cclxuICAgIHB1YmxpYyBnZXQgbG9kQ291bnQoKSB7IHJldHVybiB0aGlzLmxvZEVzdGltYXRvci5jb3VudDsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hJbmRpY2VzKCk6IFJlYWRvbmx5PFVpbnQzMkFycmF5PiB7IHJldHVybiB0aGlzLl9pbmRpY2VzIGFzIGFueTsgfVxyXG4gICAgcHVibGljIGdldCBsb2RFc3RpbWF0b3IoKSB7IHJldHVybiB0aGlzLl9sb2RFc3RpbWF0b3I7IH1cclxuICAgIHB1YmxpYyBnZXQgbG9kSW5mbygpOiBJUmVhZG9ubHlMb2RJbmZvW10geyByZXR1cm4gdGhpcy5fbG9kSW5mbzsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGdyaWQ6IFJlZk9iamVjdDxJR3JpZFBhdGNoZWQ+KSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3dpZHRoICAgICAgID0gZ3JpZC53aWR0aDtcclxuICAgICAgICB0aGlzLl9kZXB0aCAgICAgICA9IGdyaWQuZGVwdGg7XHJcbiAgICAgICAgdGhpcy5fcGF0Y2hTaXplICAgPSBncmlkLnBhdGNoU2l6ZTtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWCA9ICgodGhpcy5fd2lkdGggLSAxKSAvICh0aGlzLl9wYXRjaFNpemUgLSAxKSkgfCAwO1xyXG4gICAgICAgIHRoaXMuX251bVBhdGNoZXNaID0gKCh0aGlzLl9kZXB0aCAtIDEpIC8gKHRoaXMuX3BhdGNoU2l6ZSAtIDEpKSB8IDA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl93aWR0aCA+PSAweGZmZmYpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk1heCB3aWR0aCA9ICVkXFxuXCIsIDB4ZmZmZiAtMSk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2RlcHRoID49IDB4ZmZmZikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTWF4IGRlcHRoID0gJWRcXG5cIiwgMHhmZmZmIC0xKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKHRoaXMuX3dpZHRoIC0gMSkgJSAodGhpcy5fcGF0Y2hTaXplIC0gMSkgIT09IDApIHtcclxuICAgICAgICAgICAgY29uc3QgcmVjb21tZW5kZWRXaWR0aCA9ICgodGhpcy5fd2lkdGggLSAxICsgdGhpcy5fcGF0Y2hTaXplIC0gMSkgLyAodGhpcy5fcGF0Y2hTaXplIC0gMSkpICogKHRoaXMuX3BhdGNoU2l6ZSAtIDEpICsgMTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIldpZHRoIG1pbnVzIDEgKCVkKSBtdXN0IGJlIGRpdmlzaWJsZSBieSBwYXRjaFNpemUgbWludXMgMSAoJWQpXFxuXCIsIHRoaXMuX3dpZHRoLCB0aGlzLl9wYXRjaFNpemUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVHJ5IHVzaW5nIFdpZHRoID0gJWRcXG5cIiwgcmVjb21tZW5kZWRXaWR0aCk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCh0aGlzLl9kZXB0aCAtIDEpICUgKHRoaXMuX3BhdGNoU2l6ZSAtIDEpICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlY29tbWVuZGVkRGVwdGggPSAoKHRoaXMuX2RlcHRoIC0gMSArIHRoaXMuX3BhdGNoU2l6ZSAtIDEpIC8gKHRoaXMuX3BhdGNoU2l6ZSAtIDEpKSAqICh0aGlzLl9wYXRjaFNpemUgLSAxKSArIDE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEZXB0aCBtaW51cyAxICglZCkgbXVzdCBiZSBkaXZpc2libGUgYnkgcGF0Y2hTaXplIG1pbnVzIDEgKCVkKVxcblwiLCB0aGlzLl9kZXB0aCwgdGhpcy5fcGF0Y2hTaXplKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRyeSB1c2luZyBXaWR0aCA9ICVkXFxuXCIsIHJlY29tbWVuZGVkRGVwdGgpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9wYXRjaFNpemUgPCAzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGUgbWluaW11bSBwYXRjaCBzaXplIGlzIDMgKCVkKVxcblwiLCB0aGlzLl9wYXRjaFNpemUpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAodGhpcy5fcGF0Y2hTaXplICUgMiA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUGF0Y2ggc2l6ZSBtdXN0IGJlIGFuIG9kZCBudW1iZXIgKCVkKVxcblwiLCB0aGlzLl9wYXRjaFNpemUpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2J1aWxkTG9kc0FuZEluZGljZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9idWlsZExvZHNBbmRJbmRpY2VzKCkge1xyXG5cclxuICAgICAgICB0aGlzLl9sb2RFc3RpbWF0b3IgPSBuZXcgTG9kRXN0aW1hdG9yKHRoaXMuX3BhdGNoU2l6ZSwgdGhpcy5fbnVtUGF0Y2hlc1gsIHRoaXMuX251bVBhdGNoZXNaKTtcclxuICAgICAgICB0aGlzLl9sb2RJbmZvID0gbmV3IEFycmF5KHRoaXMuX2xvZEVzdGltYXRvci5jb3VudCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbG9kSW5mby5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2RJbmZvW2ldID0gbmV3IExvZEluZm8oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBudW1JbmRpY2VzID0gdGhpcy5fY2FsY051bUluZGljZXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5kaWNlcyA9IG5ldyBVaW50MzJBcnJheShudW1JbmRpY2VzKTtcclxuXHJcbiAgICAgICAgbnVtSW5kaWNlcyA9IHRoaXMuX2luaXRJbmRpY2VzKHRoaXMuX2luZGljZXMpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJGaW5hbCBudW1iZXIgb2YgaW5kaWNlcyAlZFxcblwiLCBudW1JbmRpY2VzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfY2FsY051bUluZGljZXMoKTogaW50IHtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgbnVtUXVhZHMgPSAodGhpcy5wYXRjaFNpemUgLSAxKSAqKiAyO1xyXG4gICAgICAgIGxldCBudW1JbmRpY2VzID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4UGVybXV0YXRpb25zUGVyTGV2ZWwgPSAxNjsgLy8gdHJ1ZS9mYWxzZSBmb3IgZWFjaCBvZiB0aGUgZm91ciBzaWRlc1xyXG4gICAgICAgIGNvbnN0IGluZGljZXNQZXJRdWFkID0gNjsgICAgICAgICAgIC8vIHR3byB0cmlhbmdsZXNcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kID0gMDsgbG9kIDwgdGhpcy5sb2RDb3VudDsgbG9kKyspIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxPRCAlZDogbnVtIHF1YWRzICVkXFxuXCIsIGxvZCwgbnVtUXVhZHMpO1xyXG4gICAgICAgICAgICBudW1JbmRpY2VzICs9IG51bVF1YWRzICogaW5kaWNlc1BlclF1YWQgKiBtYXhQZXJtdXRhdGlvbnNQZXJMZXZlbDtcclxuICAgICAgICAgICAgbnVtUXVhZHMgLz0gNDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJJbml0aWFsIG51bWJlciBvZiBpbmRpY2VzICVkXFxuXCIsIG51bUluZGljZXMpO1xyXG4gICAgICAgIHJldHVybiBudW1JbmRpY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRJbmRpY2VzKGluZGljZXM6IFVpbnQzMkFycmF5KTogaW50IHtcclxuXHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kID0gMDsgbG9kIDwgdGhpcy5sb2RDb3VudDsgbG9kKyspIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIioqKiBJbml0IGluZGljZXMgbG9kICVkICoqKlxcblwiLCBsb2QpO1xyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2luaXRJbmRpY2VzTE9EKGluZGV4LCBpbmRpY2VzLCBsb2QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRJbmRpY2VzTE9EKGluZGV4OiBpbnQsIGluZGljZXM6IFVpbnQzMkFycmF5LCBsb2Q6IGludCk6IGludCB7XHJcblxyXG4gICAgICAgIGxldCB0b3RhbEluZGljZXNGb3JMT0QgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5mbyAgPSB0aGlzLl9sb2RJbmZvW2xvZF0uaW5mb1tsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5faW5pdEluZGljZXNMT0RTaW5nbGUoaW5kZXgsIGluZGljZXMsIGxvZCwgbG9kICsgbCwgbG9kICsgciwgbG9kICsgdCwgbG9kICsgYik7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5zdGFydCA9IHN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmNvdW50ID0gaW5kZXggLSBzdGFydDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsSW5kaWNlc0ZvckxPRCArPSBpbmZvLmNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJUb3RhbCBpbmRpY2VzIGZvciBMT0Q6ICVkXFxuXCIsIHRvdGFsSW5kaWNlc0ZvckxPRCk7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRJbmRpY2VzTE9EU2luZ2xlKGluZGV4OiBpbnQsIGluZGljZXM6IFVpbnQzMkFycmF5LCBsb2RDb3JlOiBpbnQsIGxvZExlZnQ6IGludCwgbG9kUmlnaHQ6IGludCwgbG9kVG9wOiBpbnQsIGxvZEJvdHRvbTogaW50KTogaW50IHtcclxuXHJcbiAgICAgICAgY29uc3Qgd2lkdGggICA9IHRoaXMucGF0Y2hTaXplO1xyXG4gICAgICAgIGNvbnN0IGZhblN0ZXAgPSBNYXRoLnBvdygyLCBsb2RDb3JlICsgMSk7ICAgICAgLy8gbG9kID0gMCAtLT4gMiwgbG9kID0gMSAtLT4gNCwgbG9kID0gMiAtLT4gOCwgZXRjXHJcbiAgICAgICAgY29uc3QgZW5kUG9zICA9IHRoaXMucGF0Y2hTaXplIC0gMSAtIGZhblN0ZXA7ICAvLyBwYXRjaCBzaXplIDUsIGZhbiBzdGVwIDIgLS0+IEVuZFBvcyA9IDI7IHBhdGNoIHNpemUgOSwgZmFuIHN0ZXAgMiAtLT4gRW5kUG9zID0gNlxyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gMCA7IHogPD0gZW5kUG9zOyB6ICs9IGZhblN0ZXApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDAgOyB4IDw9IGVuZFBvczsgeCArPSBmYW5TdGVwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsTGVmdCAgID0geCA9PSAwICAgICAgPyBsb2RMZWZ0ICAgOiBsb2RDb3JlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbFJpZ2h0ICA9IHggPT0gZW5kUG9zID8gbG9kUmlnaHQgIDogbG9kQ29yZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxCb3R0b20gPSB6ID09IDAgICAgICA/IGxvZEJvdHRvbSA6IGxvZENvcmU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsVG9wICAgID0geiA9PSBlbmRQb3MgPyBsb2RUb3AgICAgOiBsb2RDb3JlO1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9jcmVhdGVUcmlhbmdsZUZhbihpbmRleCwgaW5kaWNlcywgbG9kQ29yZSwgbExlZnQsIGxSaWdodCwgbFRvcCwgbEJvdHRvbSwgeCwgeiwgd2lkdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jcmVhdGVUcmlhbmdsZUZhbihpbmRleDogaW50LCBpbmRpY2VzOiBVaW50MzJBcnJheSwgbG9kQ29yZTogaW50LCBsb2RMZWZ0OiBpbnQsIGxvZFJpZ2h0OiBpbnQsIGxvZFRvcDogaW50LCBsb2RCb3R0b206IGludCwgeDogaW50LCB6OiBpbnQsIHdpZHRoOiBpbnQpOiB1bnNpZ25lZF9pbnQge1xyXG5cclxuICAgICAgICBjb25zdCBzdGVwTGVmdCAgID0gTWF0aC5wb3coMiwgbG9kTGVmdCk7IC8vIGJlY2F1c2UgTE9EIHN0YXJ0cyBhdCB6ZXJvLi4uXHJcbiAgICAgICAgY29uc3Qgc3RlcFJpZ2h0ICA9IE1hdGgucG93KDIsIGxvZFJpZ2h0KTtcclxuICAgICAgICBjb25zdCBzdGVwVG9wICAgID0gTWF0aC5wb3coMiwgbG9kVG9wKTtcclxuICAgICAgICBjb25zdCBzdGVwQm90dG9tID0gTWF0aC5wb3coMiwgbG9kQm90dG9tKTtcclxuICAgICAgICBjb25zdCBzdGVwQ2VudGVyID0gTWF0aC5wb3coMiwgbG9kQ29yZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGluZGV4Q2VudGVyID0gKHogKyBzdGVwQ2VudGVyKSAqIHdpZHRoICsgeCArIHN0ZXBDZW50ZXI7XHJcblxyXG4gICAgICAgIC8vIGZpcnN0IHVwXHJcbiAgICAgICAgbGV0IGluZGV4VGVtcDEgPSB6ICogd2lkdGggKyB4O1xyXG4gICAgICAgIGxldCBpbmRleFRlbXAyID0gKHogKyBzdGVwTGVmdCkgKiB3aWR0aCArIHg7XHJcblxyXG4gICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuXHJcbiAgICAgICAgLy8gc2Vjb25kIHVwXHJcbiAgICAgICAgaWYgKGxvZExlZnQgPT0gbG9kQ29yZSkge1xyXG4gICAgICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMiArPSBzdGVwTGVmdCAqIHdpZHRoO1xyXG5cclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlyc3QgcmlnaHRcclxuICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICBpbmRleFRlbXAyICs9IHN0ZXBUb3A7XHJcblxyXG4gICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuXHJcbiAgICAgICAgLy8gc2Vjb25kIHJpZ2h0XHJcbiAgICAgICAgaWYgKGxvZFRvcCA9PT0gbG9kQ29yZSkge1xyXG4gICAgICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMiArPSBzdGVwVG9wO1xyXG5cclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlyc3QgZG93blxyXG4gICAgICAgIGluZGV4VGVtcDEgPSBpbmRleFRlbXAyO1xyXG4gICAgICAgIGluZGV4VGVtcDIgLT0gc3RlcFJpZ2h0ICogd2lkdGg7XHJcblxyXG4gICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuXHJcbiAgICAgICAgLy8gc2Vjb25kIGRvd25cclxuICAgICAgICBpZiAobG9kUmlnaHQgPT09IGxvZENvcmUpIHtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMSA9IGluZGV4VGVtcDI7XHJcbiAgICAgICAgICAgIGluZGV4VGVtcDIgLT0gc3RlcFJpZ2h0ICogd2lkdGg7XHJcblxyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2FkZFRyaWFuZ2xlKGluZGV4LCBpbmRpY2VzLCBpbmRleENlbnRlciwgaW5kZXhUZW1wMSwgaW5kZXhUZW1wMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaXJzdCBsZWZ0XHJcbiAgICAgICAgaW5kZXhUZW1wMSA9IGluZGV4VGVtcDI7XHJcbiAgICAgICAgaW5kZXhUZW1wMiAtPSBzdGVwQm90dG9tO1xyXG5cclxuICAgICAgICBpbmRleCA9IHRoaXMuX2FkZFRyaWFuZ2xlKGluZGV4LCBpbmRpY2VzLCBpbmRleENlbnRlciwgaW5kZXhUZW1wMSwgaW5kZXhUZW1wMik7XHJcblxyXG4gICAgICAgIC8vIHNlY29uZCBsZWZ0XHJcbiAgICAgICAgaWYgKGxvZEJvdHRvbSA9PT0gbG9kQ29yZSkge1xyXG4gICAgICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMiAtPSBzdGVwQm90dG9tO1xyXG5cclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2FkZFRyaWFuZ2xlKGluZGV4OiB1bnNpZ25lZF9pbnQsIGluZGljZXM6IFVpbnQzMkFycmF5LCB2MTogdW5zaWduZWRfaW50LCB2MjogdW5zaWduZWRfaW50LCB2MzogdW5zaWduZWRfaW50KSB7XHJcbiAgICAgICAgaW5kaWNlc1tpbmRleCsrXSA9IHYxO1xyXG4gICAgICAgIGluZGljZXNbaW5kZXgrK10gPSB2MjtcclxuICAgICAgICBpbmRpY2VzW2luZGV4KytdID0gdjM7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHcmlkQnVpbGRlcjsiLCJpbXBvcnQgdHlwZSB7IGludCwgZmxvYXQsIFJlZk9iamVjdCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBBYnNDaHVua2VkSGVpZ2h0TWFwLCB7IElSZWFkb25seUFic0NodW5rZWRIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNDaHVua2VkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElSZWFkb25seUFic0hlaWdodE1hcCB9IGZyb20gXCIuL0Fic0hlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJSGVpZ2h0TWFwRmlsZUltcG9ydE9wdGlvbnMgfSBmcm9tIFwiLi9BYnNIZWlnaHRNYXBGaWxlSU8ubWpzXCI7XHJcbmltcG9ydCBDb29yZHNCdWZmZXIsIHsgSVJlYWRvbmx5Q29vcmRzQnVmZmVyIH0gZnJvbSBcIi4vQ29vcmRzQnVmZmVyLm1qc1wiO1xyXG5pbXBvcnQgR3JpZEJ1aWxkZXIgZnJvbSBcIi4vR3JpZEJ1aWxkZXIubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVpvbmUgfSBmcm9tIFwiLi9JWm9uZS5tanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlaWdodGZpZWxkIGV4dGVuZHMgR3JpZEJ1aWxkZXIge1xyXG5cclxuICAgIHByaXZhdGUgX3ZlcnRpY2VzOiBDb29yZHNCdWZmZXI7XHJcblxyXG4gICAgcHJvdGVjdGVkIF9oZWlnaHRNYXA6IEFic0NodW5rZWRIZWlnaHRNYXA8YW55PjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoVmVydGljZXMoKTogSVJlYWRvbmx5Q29vcmRzQnVmZmVyIHsgcmV0dXJuIHRoaXMuX3ZlcnRpY2VzOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodE1hcCgpOiBJUmVhZG9ubHlBYnNDaHVua2VkSGVpZ2h0TWFwIHsgcmV0dXJuIHRoaXMuX2hlaWdodE1hcDsgfVxyXG4gICAgcHVibGljIGdldCBtYXhIZWlnaHQoKSB7IHJldHVybiB0aGlzLmhlaWdodE1hcC5tYXhIZWlnaHQ7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihoZWlnaHRNYXA6IFJlZk9iamVjdDxBYnNDaHVua2VkSGVpZ2h0TWFwPGFueT4+KSB7XHJcblxyXG4gICAgICAgIHN1cGVyKGhlaWdodE1hcCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwID0gaGVpZ2h0TWFwO1xyXG4gICAgICAgIHRoaXMuX3ZlcnRpY2VzICA9IG5ldyBDb29yZHNCdWZmZXIodGhpcy5faGVpZ2h0TWFwLCB0aGlzLl9oZWlnaHRNYXAucGF0Y2hTaXplKTtcclxuICAgICAgICB0aGlzLl92ZXJ0aWNlcy5pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEhlaWdodCh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnNldCh4LCB6LCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFwcGVuZFRvSGVpZ2h0KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAuYXBwZW5kKHgsIHosIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbXVsdGlwbHlUb0hlaWdodCh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0LCBkZWZhdWx0SGVpZ2h0OiBmbG9hdCA9IDApIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAubXVsdGlwbHkoeCwgeiwgdmFsdWUsIGRlZmF1bHRIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzbW9vdGhIZWlnaHRzWm9uZSh6b25lOiBJWm9uZSwgbnA6IGZsb2F0LCByYWRpdXM6IGZsb2F0KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnNtb290aFpvbmUoem9uZSwgbnAsIHJhZGl1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWRIZWlnaHRNYXBGcm9tRmlsZShidWZmZXI6IEFycmF5QnVmZmVyLCBvcHRpb25zPzogSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zLCBucDogZmxvYXQgPSAtMSwgcmFkaXVzOiBpbnQgPSAwKSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gYXdhaXQgdGhpcy5faGVpZ2h0TWFwLmZyb21GaWxlKGJ1ZmZlciwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnNtb290aChucCwgcmFkaXVzKTtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAucmVjYWxjdWxhdGVNaW5NYXgodGhpcy5faGVpZ2h0TWFwKTtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAucmVjYWxjdWxhdGVBQUJCKCk7XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9hZEhlaWdodE1hcEZyb21JbWcoaW1nOiBJbWFnZUJpdG1hcCwgbnA6IGZsb2F0ID0gLTEsIHJhZGl1czogaW50ID0gMCkge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5mcm9tSW1hZ2UoaW1nKTtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAuc21vb3RoKG5wLCByYWRpdXMpO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5yZWNhbGN1bGF0ZU1pbk1heCh0aGlzLl9oZWlnaHRNYXApO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5yZWNhbGN1bGF0ZUFBQkIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbm9ybWFsaXplSGVpZ2h0TWFwKG1heEhlaWdodD86IGZsb2F0KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWF4SGVpZ2h0ID8/PSB0aGlzLl9oZWlnaHRNYXAubWF4SGVpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAubm9ybWFsaXplKG1heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldE1heEhlaWdodChtYXhIZWlnaHQ6IGZsb2F0KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnNldE1heEhlaWdodChtYXhIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhcHBlbmRIZWlnaHRNYXAoXHJcbiAgICAgICAgaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNIZWlnaHRNYXAsXHJcbiAgICAgICAgdmFsdWU6IGZsb2F0LFxyXG4gICAgICAgIHpvbmU6IElab25lLFxyXG4gICAgICAgIG1pbkhlaWdodDogZmxvYXQgfCBudWxsID0gbnVsbCxcclxuICAgICAgICBtYXhIZWlnaHQ6IGZsb2F0IHwgbnVsbCA9IG51bGxcclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5jb21iaW5lSGVpZ2h0cygnKycsIGhlaWdodE1hcCwgdmFsdWUsIHpvbmUsIDAsIG1pbkhlaWdodCwgbWF4SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjYWxjdWxhdGVNaW5NYXgoem9uZTogSVpvbmUsIGFhYmI6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5yZWNhbGN1bGF0ZU1pbk1heCh6b25lKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYWFiYikge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWlnaHRNYXAucmVjYWxjdWxhdGVBQUJCKCk7XHJcbiAgICAgICAgfSBcclxuICAgIH1cclxufSIsIi8vIE91ciBzeXN0ZW0gaXMgZGl2aWRlZCBpbnRvIGEgZ2VuZXJhbCBwYXJ0IGFuZCBhbiBlbmdpbmUgcGFydCxcbi8vIGZvciBvcHRpbWl6YXRpb24gd2UgdXNlIHRoZSBlbmdpbmUgcGFydCBpbiB0aGlzIGZpbGUuIChwbGF5Y2FudmFzIFZlYzMpXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdCB7XG5cbiAgICBwdWJsaWMgdmVydGV4SW5kZXggPSAwO1xuICAgIHB1YmxpYyBkaXN0YW5jZSAgICA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgcHVibGljIGxvY2FsTm9ybWFsID0gbmV3IHBjLlZlYzMoMCwgMSwgMCk7XG4gICAgcHVibGljIG5vcm1hbCAgICAgID0gbmV3IHBjLlZlYzMoMCwgMSwgMCk7XG4gICAgcHVibGljIGxvY2FsUG9pbnQgID0gbmV3IHBjLlZlYzMoTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSk7XG4gICAgcHVibGljIHBvaW50ICAgICAgID0gbmV3IHBjLlZlYzMoTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSk7XG5cbiAgICBwdWJsaWMgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMudmVydGV4SW5kZXggPSAwO1xuICAgICAgICB0aGlzLmRpc3RhbmNlID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgdGhpcy5sb2NhbE5vcm1hbC5zZXQoMCwgMSwgMCk7XG4gICAgICAgIHRoaXMubm9ybWFsLnNldCgwLCAxLCAwKTtcbiAgICAgICAgdGhpcy5sb2NhbFBvaW50LnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcbiAgICAgICAgdGhpcy5wb2ludC5zZXQoTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSk7XG4gICAgfVxufSIsImltcG9ydCB0eXBlIHsgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcblxuY29uc3QgdG1wVHJpVmVjQSA9IG5ldyBwYy5WZWMzKCk7XG5jb25zdCB0bXBUcmlWZWNCID0gbmV3IHBjLlZlYzMoKTtcblxuZXhwb3J0IGNsYXNzIFRyaWFuZ2xlIGV4dGVuZHMgcGMuVHJpIHtcblxuICAgIGluZGV4MDogaW50O1xuICAgIGluZGV4MTogaW50O1xuICAgIGluZGV4MjogaW50O1xuXG4gICAgZ2V0Tm9ybWFsKHJzaDogcGN4LlZlYzMpIHtcbiAgICAgICAgdG1wVHJpVmVjQS5zdWIyKHRoaXMudjEsIHRoaXMudjApO1xuICAgICAgICB0bXBUcmlWZWNCLnN1YjIodGhpcy52MiwgdGhpcy52MCk7XG4gICAgICAgIHJzaC5jcm9zcyh0bXBUcmlWZWNBLCB0bXBUcmlWZWNCKS5ub3JtYWxpemUoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRyaWFuZ2xlOyIsImltcG9ydCB7IGZsb2F0LCBpbnQsIElWZWN0b3IzLCBSZWZPYmplY3QgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBJUmVhZG9ubHlBYnNTaGF0dGVyZWRIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNTaGF0dGVyZWRIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB7IElab25lIH0gZnJvbSBcIi4vSVpvbmUubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRmaWVsZFJheWNhc3RSZXN1bHQgZnJvbSBcIi4vSGVpZ2h0ZmllbGRSYXljYXN0UmVzdWx0Lm1qc1wiO1xyXG5pbXBvcnQgVHJpYW5nbGUgZnJvbSBcIi4vVHJpYW5nbGUubWpzXCI7XHJcblxyXG4vLyBPdXIgc3lzdGVtIGlzIGRpdmlkZWQgaW50byBhIGdlbmVyYWwgcGFydCBhbmQgYW4gZW5naW5lIHBhcnQsXHJcbi8vIGZvciBvcHRpbWl6YXRpb24gd2UgdXNlIHRoZSBlbmdpbmUgcGFydCBpbiB0aGlzIGZpbGUuIChwbGF5Y2FudmFzIFZlYzMsIE1hdDQsIFRyaSwgQm91bmRpbmdCb3gpXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDb29yZFhaIHtcclxuICAgIHg6IGludCxcclxuICAgIHo6IGludCxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR3JpZFJheWNhc3RTdGF0ZSB7XHJcbiAgICB4OiBpbnQsXHJcbiAgICB6OiBpbnQsXHJcbiAgICBwYXJhbTogaW50LFxyXG4gICAgcHJldlg6IGludCxcclxuICAgIHByZXZaOiBpbnQsXHJcbiAgICBwcmV2UGFyYW06IGludCxcclxuICAgIG1heERpc3RhbmNlRmxhdDogZmxvYXQsXHJcbn1cclxuXHJcbmNvbnN0IGluZmluaXRlICAgICAgICA9IDk5OTk5OTk7XHJcbmNvbnN0IG1vZGVsVHJhbnNmb3JtICA9IG5ldyBwYy5NYXQ0KCk7XHJcbmNvbnN0IHRtcFJheSAgICAgICAgICA9IG5ldyBwYy5SYXkoKTtcclxuY29uc3QgdG1wUmF5Y2FzdFZlYyAgID0gbmV3IHBjLlZlYzMoKTtcclxuY29uc3QgdG1wUG9zMSAgICAgICAgID0gbmV3IHBjLlZlYzMoKTtcclxuY29uc3QgdG1wUG9zMiAgICAgICAgID0gbmV3IHBjLlZlYzMoKTtcclxuY29uc3QgdG1wUG9zMyAgICAgICAgID0gbmV3IHBjLlZlYzMoKTtcclxuXHJcbmNvbnN0IHRyaWFuZ2xlICAgICAgID0gbmV3IFRyaWFuZ2xlKCk7XHJcbmNvbnN0IGRlYnVnVG1wVmVjICAgID0gbmV3IHBjLlZlYzMoKTtcclxuY29uc3QgZGVidWdUcmFuc2Zvcm0gPSBuZXcgcGMuTWF0NCgpO1xyXG5jb25zdCBkZWJ1Z1Bvc2l0aW9ucyA9IG5ldyBBcnJheSgxNik7XHJcblxyXG5sZXQgZGVidWdUcmFuc2Zvcm1Jc0lkZW50aXR5ID0gdHJ1ZTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUFBQkIgZXh0ZW5kcyBJWm9uZSB7XHJcbiAgICBtaW5ZOiBmbG9hdCxcclxuICAgIG1heFk6IGZsb2F0LFxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWJ1Z0RyYXdUcmlhbmdsZUxpbmVzKHRyaTogcGN4LlRyaSwgY29sb3IgPSBwYy5Db2xvci5ZRUxMT1cpIHtcclxuICAgIC8qXHJcbiAgICBbXHJcbiAgICAgICAgdHJpLnYwLngsIHRyaS52MC55LCB0cmkudjAueiwgdHJpLnYxLngsIHRyaS52MS55LCB0cmkudjEueixcclxuICAgICAgICB0cmkudjEueCwgdHJpLnYxLnksIHRyaS52MS56LCB0cmkudjIueCwgdHJpLnYyLnksIHRyaS52Mi56LFxyXG4gICAgICAgIHRyaS52Mi54LCB0cmkudjIueSwgdHJpLnYyLnosIHRyaS52MC54LCB0cmkudjAueSwgdHJpLnYwLnosXHJcbiAgICBdLCBjb2xvciwgZmFsc2UpO1xyXG4gICAgXVxyXG4gICAgKi9cclxuICAgIGRlYnVnVHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50KHRyaS52MCwgZGVidWdUbXBWZWMpO1xyXG4gICAgZGVidWdQb3NpdGlvbnNbMF0gPSBkZWJ1Z1Bvc2l0aW9uc1sxNV0gPSBkZWJ1Z1RtcFZlYy54O1xyXG4gICAgZGVidWdQb3NpdGlvbnNbMV0gPSBkZWJ1Z1Bvc2l0aW9uc1sxNl0gPSBkZWJ1Z1RtcFZlYy55O1xyXG4gICAgZGVidWdQb3NpdGlvbnNbMl0gPSBkZWJ1Z1Bvc2l0aW9uc1sxN10gPSBkZWJ1Z1RtcFZlYy56O1xyXG4gICAgZGVidWdUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnQodHJpLnYxLCBkZWJ1Z1RtcFZlYyk7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1szXSA9IGRlYnVnUG9zaXRpb25zWzZdID0gZGVidWdUbXBWZWMueDtcclxuICAgIGRlYnVnUG9zaXRpb25zWzRdID0gZGVidWdQb3NpdGlvbnNbN10gPSBkZWJ1Z1RtcFZlYy55O1xyXG4gICAgZGVidWdQb3NpdGlvbnNbNV0gPSBkZWJ1Z1Bvc2l0aW9uc1s4XSA9IGRlYnVnVG1wVmVjLno7XHJcbiAgICBkZWJ1Z1RyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludCh0cmkudjIsIGRlYnVnVG1wVmVjKTtcclxuICAgIGRlYnVnUG9zaXRpb25zWzldICA9IGRlYnVnUG9zaXRpb25zWzEyXSA9IGRlYnVnVG1wVmVjLng7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1sxMF0gPSBkZWJ1Z1Bvc2l0aW9uc1sxM10gPSBkZWJ1Z1RtcFZlYy55O1xyXG4gICAgZGVidWdQb3NpdGlvbnNbMTFdID0gZGVidWdQb3NpdGlvbnNbMTRdID0gZGVidWdUbXBWZWMuejtcclxuICAgIHBjLmFwcD8uZHJhd0xpbmVBcnJheXMoZGVidWdQb3NpdGlvbnMsIGNvbG9yLCBmYWxzZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzUmF5Qm94KGFhYmI6IElBQUJCLCByYXk6IHBjeC5SYXkpIHtcclxuXHJcbiAgICBjb25zdCByYXlPcmlnaW4gICAgPSByYXkub3JpZ2luO1xyXG4gICAgY29uc3QgcmF5RGlyZWN0aW9uID0gcmF5LmRpcmVjdGlvbjtcclxuXHJcbiAgICBjb25zdCBtaW5YID0gYWFiYi5taW5YO1xyXG4gICAgY29uc3QgbWF4WCA9IGFhYmIubWF4WDtcclxuICAgIGNvbnN0IG1pblkgPSBhYWJiLm1pblk7XHJcbiAgICBjb25zdCBtYXhZID0gYWFiYi5tYXhZO1xyXG4gICAgY29uc3QgbWluWiA9IGFhYmIubWluWjtcclxuICAgIGNvbnN0IG1heFogPSBhYWJiLm1heFo7XHJcblxyXG4gICAgbGV0IHRtaW4gPSAobWluWCAtIHJheU9yaWdpbi54KSAvIHJheURpcmVjdGlvbi54O1xyXG4gICAgbGV0IHRtYXggPSAobWF4WCAtIHJheU9yaWdpbi54KSAvIHJheURpcmVjdGlvbi54O1xyXG5cclxuICAgIGlmICh0bWluID4gdG1heCkge1xyXG4gICAgICAgIGxldCB0ZW1wID0gdG1pbjtcclxuICAgICAgICB0bWluID0gdG1heDtcclxuICAgICAgICB0bWF4ID0gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdHltaW4gPSAobWluWSAtIHJheU9yaWdpbi55KSAvIHJheURpcmVjdGlvbi55O1xyXG4gICAgbGV0IHR5bWF4ID0gKG1heFkgLSByYXlPcmlnaW4ueSkgLyByYXlEaXJlY3Rpb24ueTtcclxuXHJcbiAgICBpZiAodHltaW4gPiB0eW1heCkge1xyXG4gICAgICAgIGxldCB0ZW1wID0gdHltaW47XHJcbiAgICAgICAgdHltaW4gPSB0eW1heDtcclxuICAgICAgICB0eW1heCA9IHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCh0bWluID4gdHltYXgpIHx8ICh0eW1pbiA+IHRtYXgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eW1pbiA+IHRtaW4pIHtcclxuICAgICAgICB0bWluID0gdHltaW47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5bWF4IDwgdG1heCkge1xyXG4gICAgICAgIHRtYXggPSB0eW1heDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdHptaW4gPSAobWluWiAtIHJheU9yaWdpbi56KSAvIHJheURpcmVjdGlvbi56O1xyXG4gICAgbGV0IHR6bWF4ID0gKG1heFogLSByYXlPcmlnaW4ueikgLyByYXlEaXJlY3Rpb24uejtcclxuXHJcbiAgICBpZiAodHptaW4gPiB0em1heCkge1xyXG4gICAgICAgIGxldCB0ZW1wID0gdHptaW47XHJcbiAgICAgICAgdHptaW4gPSB0em1heDtcclxuICAgICAgICB0em1heCA9IHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCh0bWluID4gdHptYXgpIHx8ICh0em1pbiA+IHRtYXgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWlnaHRmaWVsZFNoYXBlIHtcclxuXHJcbiAgICBwcml2YXRlIF9oZWlnaHRNYXA6IElSZWFkb25seUFic1NoYXR0ZXJlZEhlaWdodE1hcDtcclxuICAgIHByaXZhdGUgX2JlZ2luUG9zOiBwY3guVmVjMztcclxuICAgIHByaXZhdGUgX2VuZFBvczogcGN4LlZlYzM7XHJcbiAgICBwcml2YXRlIF9ib3VuZGluZ0JveDogSUFBQkI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNTaGF0dGVyZWRIZWlnaHRNYXApIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAgPSBoZWlnaHRNYXA7XHJcbiAgICAgICAgdGhpcy5fYmVnaW5Qb3MgPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgICAgIHRoaXMuX2VuZFBvcyA9IG5ldyBwYy5WZWMzKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ0JveCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVCb3VuZGluZ0JveCgpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBoYWxmV2lkdGggPSB0aGlzLl9oZWlnaHRNYXAud2lkdGggLyAyO1xyXG4gICAgICAgIGNvbnN0IGhhbGZEZXB0aCA9IHRoaXMuX2hlaWdodE1hcC5kZXB0aCAvIDI7XHJcblxyXG4gICAgICAgIHRoaXMuX2JvdW5kaW5nQm94ID0ge1xyXG4gICAgICAgICAgICBtaW5YOiAtaGFsZldpZHRoLFxyXG4gICAgICAgICAgICBtaW5ZOiAwLFxyXG4gICAgICAgICAgICBtaW5aOiAtaGFsZkRlcHRoLFxyXG4gICAgICAgICAgICBtYXhYOiBoYWxmV2lkdGgsXHJcbiAgICAgICAgICAgIG1heFk6IHRoaXMuX2hlaWdodE1hcC5tYXhIZWlnaHQsXHJcbiAgICAgICAgICAgIG1heFo6IGhhbGZEZXB0aCxcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF90cmlhbmdsZUludGVyc2VjdHNSYXkodHJpOiBUcmlhbmdsZSwgcmF5OiBwY3guUmF5LCBiZXN0UmVzdWx0OiBIZWlnaHRmaWVsZFJheWNhc3RSZXN1bHQpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgaWYgKHRyaS5pbnRlcnNlY3RzUmF5KHJheSwgdG1wUmF5Y2FzdFZlYykpIHtcclxuICAgIFxyXG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHRtcFJheWNhc3RWZWMuZGlzdGFuY2UocmF5Lm9yaWdpbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoYmVzdFJlc3VsdC5kaXN0YW5jZSA+IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LmRpc3RhbmNlID0gZGlzdGFuY2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRyaS5nZXROb3JtYWwoYmVzdFJlc3VsdC5sb2NhbE5vcm1hbCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJlc3RSZXN1bHQubm9ybWFsLmNvcHkoYmVzdFJlc3VsdC5sb2NhbE5vcm1hbCk7XHJcbiAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LmxvY2FsUG9pbnQuY29weSh0bXBSYXljYXN0VmVjKTtcclxuICAgICAgICAgICAgICAgIGJlc3RSZXN1bHQucG9pbnQuY29weSh0bXBSYXljYXN0VmVjKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZGVidWdEcmF3VHJpYW5nbGVMaW5lcyh0cmksIHBjLkNvbG9yLlJFRCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlUDAgPSBiZXN0UmVzdWx0LnBvaW50LmRpc3RhbmNlKHRyaS52MCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZVAxID0gYmVzdFJlc3VsdC5wb2ludC5kaXN0YW5jZSh0cmkudjEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VQMiA9IGJlc3RSZXN1bHQucG9pbnQuZGlzdGFuY2UodHJpLnYyKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlUDAgPiBkaXN0YW5jZVAxKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VQMSA+IGRpc3RhbmNlUDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFJlc3VsdC52ZXJ0ZXhJbmRleCA9IHRyaS5pbmRleDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LnZlcnRleEluZGV4ID0gdHJpLmluZGV4MTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VQMCA+IGRpc3RhbmNlUDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFJlc3VsdC52ZXJ0ZXhJbmRleCA9IHRyaS5pbmRleDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LnZlcnRleEluZGV4ID0gdHJpLmluZGV4MDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy9kZWJ1Z0RyYXdUcmlhbmdsZUxpbmVzKHRyaSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfYXNzaWduUG9zaXRpb24oaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjM+KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIHRoaXMuX2hlaWdodE1hcC53aWR0aCB8IDA7XHJcbiAgICAgICAgY29uc3QgeiA9IGluZGV4IC8gdGhpcy5faGVpZ2h0TWFwLndpZHRoIHwgMDtcclxuXHJcbiAgICAgICAgYnVmLnggPSAoLXRoaXMuX2hlaWdodE1hcC53aWR0aCAvIDIpICsgeDtcclxuICAgICAgICBidWYueSA9IHRoaXMuX2hlaWdodE1hcC5nZXQoeCwgeik7XHJcbiAgICAgICAgYnVmLnogPSAoLXRoaXMuX2hlaWdodE1hcC5kZXB0aCAvIDIpICsgejtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3F1YWRBY3Rpb24ocnM6IElHcmlkUmF5Y2FzdFN0YXRlLCByYXk6IHBjeC5SYXksIHJlc3VsdDogSGVpZ2h0ZmllbGRSYXljYXN0UmVzdWx0KTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBycy5wcmV2WDtcclxuICAgICAgICBjb25zdCB6ID0gcnMucHJldlo7XHJcblxyXG4gICAgICAgIGlmICh4IDwgMCB8fCB6IDwgMCB8fCB4ID49IHRoaXMuX2hlaWdodE1hcC53aWR0aCAtIDEgfHwgeiA+PSB0aGlzLl9oZWlnaHRNYXAuZGVwdGggLSAxKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcbiAgICAgICAgY29uc3QgeEZhbjIgPSB4ICUgMiA9PT0gMDtcclxuICAgICAgICBjb25zdCB6RmFuMiA9IHogJSAyID09PSAwO1xyXG5cclxuICAgICAgICBsZXQgaW5kZXgwLCBpbmRleDEsIGluZGV4MjtcclxuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoeEZhbjIgIT09IHpGYW4yKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleDAgPSAoeiArIDApICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAwKTtcclxuICAgICAgICAgICAgICAgIGluZGV4MSA9ICh6ICsgMSkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDApO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgyID0gKHogKyAwKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleDAgPSAoeiArIDApICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAwKTtcclxuICAgICAgICAgICAgICAgIGluZGV4MSA9ICh6ICsgMSkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDEpO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgyID0gKHogKyAwKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnblBvc2l0aW9uKGluZGV4MCwgdG1wUG9zMSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnblBvc2l0aW9uKGluZGV4MSwgdG1wUG9zMik7XHJcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnblBvc2l0aW9uKGluZGV4MiwgdG1wUG9zMyk7XHJcblxyXG4gICAgICAgICAgICB0cmlhbmdsZS5pbmRleDAgPSBpbmRleDA7XHJcbiAgICAgICAgICAgIHRyaWFuZ2xlLmluZGV4MSA9IGluZGV4MTtcclxuICAgICAgICAgICAgdHJpYW5nbGUuaW5kZXgyID0gaW5kZXgyO1xyXG5cclxuICAgICAgICAgICAgdHJpYW5nbGUuc2V0KHRtcFBvczEsIHRtcFBvczIsIHRtcFBvczMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3RyaWFuZ2xlSW50ZXJzZWN0c1JheSh0cmlhbmdsZSwgcmF5LCByZXN1bHQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoeEZhbjIgIT09IHpGYW4yKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleDAgPSAoeiArIDApICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAxKTtcclxuICAgICAgICAgICAgICAgIGluZGV4MSA9ICh6ICsgMSkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDApO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgyID0gKHogKyAxKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleDAgPSAoeiArIDApICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAwKTtcclxuICAgICAgICAgICAgICAgIGluZGV4MSA9ICh6ICsgMSkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDApO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgyID0gKHogKyAxKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnblBvc2l0aW9uKGluZGV4MCwgdG1wUG9zMSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnblBvc2l0aW9uKGluZGV4MSwgdG1wUG9zMik7XHJcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnblBvc2l0aW9uKGluZGV4MiwgdG1wUG9zMyk7XHJcblxyXG4gICAgICAgICAgICB0cmlhbmdsZS5pbmRleDAgPSBpbmRleDA7XHJcbiAgICAgICAgICAgIHRyaWFuZ2xlLmluZGV4MSA9IGluZGV4MTtcclxuICAgICAgICAgICAgdHJpYW5nbGUuaW5kZXgyID0gaW5kZXgyO1xyXG5cclxuICAgICAgICAgICAgdHJpYW5nbGUuc2V0KHRtcFBvczEsIHRtcFBvczIsIHRtcFBvczMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3RyaWFuZ2xlSW50ZXJzZWN0c1JheSh0cmlhbmdsZSwgcmF5LCByZXN1bHQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2ludGVyc2VjdHNSYXkobG9jYWxSYXk6IHBjeC5SYXksIHJlc3VsdDogSGVpZ2h0ZmllbGRSYXljYXN0UmVzdWx0ID0gbmV3IEhlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdCgpKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGlmICghaW50ZXJzZWN0c1JheUJveCh0aGlzLl9ib3VuZGluZ0JveCwgbG9jYWxSYXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2JlZ2luUG9zLmNvcHkobG9jYWxSYXkub3JpZ2luKTtcclxuICAgICAgICB0aGlzLl9iZWdpblBvcy54ICs9IHRoaXMuX2JvdW5kaW5nQm94Lm1heFg7XHJcbiAgICAgICAgdGhpcy5fYmVnaW5Qb3MueiArPSB0aGlzLl9ib3VuZGluZ0JveC5tYXhaO1xyXG5cclxuICAgICAgICB0aGlzLl9lbmRQb3MuY29weShsb2NhbFJheS5kaXJlY3Rpb24pLmFkZCh0aGlzLl9iZWdpblBvcyk7XHJcblxyXG4gICAgICAgIGxldCByYXlEaXJlY3Rpb25GbGF0WCA9IHRoaXMuX2VuZFBvcy54IC0gdGhpcy5fYmVnaW5Qb3MueDtcclxuICAgICAgICBsZXQgcmF5RGlyZWN0aW9uRmxhdFogPSB0aGlzLl9lbmRQb3MueiAtIHRoaXMuX2JlZ2luUG9zLno7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heERpc3RhbmNlRmxhdCA9IE1hdGguc3FydChyYXlEaXJlY3Rpb25GbGF0WCAqKiAyICsgcmF5RGlyZWN0aW9uRmxhdFogKiogMik7XHJcblxyXG4gICAgICAgIGlmIChtYXhEaXN0YW5jZUZsYXQgPCAwLjAwMDEpIHtcclxuICAgICAgICAgICAgLy8gQ29uc2lkZXIgdGhlIHJheSB2ZXJ0aWNhbFxyXG4gICAgICAgICAgICByYXlEaXJlY3Rpb25GbGF0WCA9IDA7XHJcbiAgICAgICAgICAgIHJheURpcmVjdGlvbkZsYXRaID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJheURpcmVjdGlvbkZsYXRYIC89IG1heERpc3RhbmNlRmxhdDtcclxuICAgICAgICAgICAgcmF5RGlyZWN0aW9uRmxhdFogLz0gbWF4RGlzdGFuY2VGbGF0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeGlTdGVwID0gcmF5RGlyZWN0aW9uRmxhdFggPiAwID8gMSA6IHJheURpcmVjdGlvbkZsYXRYIDwgMCA/IC0xIDogMDtcclxuICAgICAgICBjb25zdCB6aVN0ZXAgPSByYXlEaXJlY3Rpb25GbGF0WiA+IDAgPyAxIDogcmF5RGlyZWN0aW9uRmxhdFogPCAwID8gLTEgOiAwO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJhbURlbHRhWCA9IHhpU3RlcCAhPT0gMCA/IDEgLyBNYXRoLmFicyhyYXlEaXJlY3Rpb25GbGF0WCkgOiBpbmZpbml0ZTtcclxuICAgICAgICBjb25zdCBwYXJhbURlbHRhWiA9IHppU3RlcCAhPT0gMCA/IDEgLyBNYXRoLmFicyhyYXlEaXJlY3Rpb25GbGF0WikgOiBpbmZpbml0ZTtcclxuXHJcbiAgICAgICAgbGV0IHBhcmFtQ3Jvc3NYO1xyXG4gICAgICAgIGxldCBwYXJhbUNyb3NzWjtcclxuXHJcbiAgICAgICAgaWYgKHhpU3RlcCAhPT0gMCkge1xyXG4gICAgICAgICAgICBwYXJhbUNyb3NzWCA9IHhpU3RlcCA9PT0gMVxyXG4gICAgICAgICAgICAgICAgPyAoTWF0aC5jZWlsKHRoaXMuX2JlZ2luUG9zLngpIC0gdGhpcy5fYmVnaW5Qb3MueCkgKiBwYXJhbURlbHRhWFxyXG4gICAgICAgICAgICAgICAgOiAodGhpcy5fYmVnaW5Qb3MueCAtIE1hdGguZmxvb3IodGhpcy5fYmVnaW5Qb3MueCkpICogcGFyYW1EZWx0YVg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbUNyb3NzWCA9IGluZmluaXRlOyAgLy8gV2lsbCBuZXZlciBjcm9zcyBvbiBYXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoemlTdGVwICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHBhcmFtQ3Jvc3NaID0gemlTdGVwID09PSAxXHJcbiAgICAgICAgICAgICAgICA/IChNYXRoLmNlaWwodGhpcy5fYmVnaW5Qb3MueikgLSB0aGlzLl9iZWdpblBvcy56KSAqIHBhcmFtRGVsdGFaXHJcbiAgICAgICAgICAgICAgICA6ICh0aGlzLl9iZWdpblBvcy56IC0gTWF0aC5mbG9vcih0aGlzLl9iZWdpblBvcy56KSkgKiBwYXJhbURlbHRhWjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtQ3Jvc3NaID0gaW5maW5pdGU7ICAvLyBXaWxsIG5ldmVyIGNyb3NzIG9uIFpcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJzOiBJR3JpZFJheWNhc3RTdGF0ZSA9IHtcclxuICAgICAgICAgICAgeDogdGhpcy5fYmVnaW5Qb3MueCB8IDAsXHJcbiAgICAgICAgICAgIHo6IHRoaXMuX2JlZ2luUG9zLnogfCAwLFxyXG4gICAgICAgICAgICBwYXJhbTogMCxcclxuICAgICAgICAgICAgcHJldlg6IDAsXHJcbiAgICAgICAgICAgIHByZXZaOiAwLFxyXG4gICAgICAgICAgICBwcmV2UGFyYW06IDAsXHJcbiAgICAgICAgICAgIG1heERpc3RhbmNlRmxhdDogbWF4RGlzdGFuY2VGbGF0LFxyXG4gICAgICAgIH07XHJcblxyXG5cdCAgICAvLyBXb3JrYXJvdW5kIGNhc2VzIHdoZXJlIHRoZSByYXkgc3RhcnRzIGF0IGFuIGludGVnZXIgcG9zaXRpb25cclxuXHQgICAgaWYgKHBhcmFtQ3Jvc3NYID09PSAwLjApIHtcclxuICAgICAgICAgICAgcGFyYW1Dcm9zc1ggKz0gcGFyYW1EZWx0YVg7XHJcbiAgICAgICAgICAgIC8vIElmIGdvaW5nIGJhY2t3YXJkcywgd2Ugc2hvdWxkIGlnbm9yZSB0aGUgcG9zaXRpb24gd2Ugd291bGQgZ2V0IGJ5IHRoZSBhYm92ZSBmbG9vcmluZyxcclxuICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGUgcmF5IGlzIG5vdCBoZWFkaW5nIGluIHRoYXQgZGlyZWN0aW9uXHJcbiAgICAgICAgICAgIGlmICh4aVN0ZXAgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBycy54IC09IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYXJhbUNyb3NzWiA9PT0gMC4wKSB7XHJcbiAgICAgICAgICAgIHBhcmFtQ3Jvc3NaICs9IHBhcmFtRGVsdGFaO1xyXG4gICAgICAgICAgICBpZiAoemlTdGVwID09PSAtMSlcclxuICAgICAgICAgICAgICAgIHJzLnogLT0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoYXNIaXQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgd2hpbGUgKCFoYXNIaXQpIHtcclxuXHJcbiAgICAgICAgICAgIHJzLnByZXZYID0gcnMueDtcclxuICAgICAgICAgICAgcnMucHJldlogPSBycy56O1xyXG4gICAgICAgICAgICBycy5wcmV2UGFyYW0gPSBycy5wYXJhbTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAocGFyYW1Dcm9zc1ggPCBwYXJhbUNyb3NzWikge1xyXG4gICAgICAgICAgICAgICAgLy8gWCBsYW5lXHJcbiAgICAgICAgICAgICAgICBycy54ICs9IHhpU3RlcDtcclxuICAgICAgICAgICAgICAgIC8vIEFzc2lnbiBiZWZvcmUgYWR2YW5jaW5nIHRoZSBwYXJhbSxcclxuICAgICAgICAgICAgICAgIC8vIHRvIGJlIGluIHN5bmMgd2l0aCB0aGUgaW5pdGlhbGl6YXRpb24gc3RlcFxyXG4gICAgICAgICAgICAgICAgcnMucGFyYW0gPSBwYXJhbUNyb3NzWDtcclxuICAgICAgICAgICAgICAgIHBhcmFtQ3Jvc3NYICs9IHBhcmFtRGVsdGFYO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gWiBsYW5lXHJcbiAgICAgICAgICAgICAgICBycy56ICs9IHppU3RlcDtcclxuICAgICAgICAgICAgICAgIHJzLnBhcmFtID0gcGFyYW1Dcm9zc1o7XHJcbiAgICAgICAgICAgICAgICBwYXJhbUNyb3NzWiArPSBwYXJhbURlbHRhWjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9xdWFkQWN0aW9uKHJzLCBsb2NhbFJheSwgcmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgaGFzSGl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJzLnBhcmFtID4gcnMubWF4RGlzdGFuY2VGbGF0KSB7XHJcbiAgICAgICAgICAgICAgICBycy5wYXJhbSA9IHJzLm1heERpc3RhbmNlRmxhdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGFzSGl0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbnRlcnNlY3RzUmF5KHdvcmxkVHJhbmZvcm06IHBjeC5NYXQ0IHwgbnVsbCB8IHVuZGVmaW5lZCwgcmF5OiBwY3guUmF5LCByZXN1bHQ6IEhlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdCA9IG5ldyBIZWlnaHRmaWVsZFJheWNhc3RSZXN1bHQoKSk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICBpZiAod29ybGRUcmFuZm9ybSkge1xyXG4gICAgICAgICAgICBtb2RlbFRyYW5zZm9ybS5jb3B5KHdvcmxkVHJhbmZvcm0pLmludmVydCgpO1xyXG4gICAgICAgICAgICBtb2RlbFRyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludChyYXkub3JpZ2luLCB0bXBSYXkub3JpZ2luKTtcclxuICAgICAgICAgICAgbW9kZWxUcmFuc2Zvcm0udHJhbnNmb3JtVmVjdG9yKHJheS5kaXJlY3Rpb24sIHRtcFJheS5kaXJlY3Rpb24pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGRlYnVnVHJhbnNmb3JtLmNvcHkod29ybGRUcmFuZm9ybSk7XHJcbiAgICAgICAgICAgIGRlYnVnVHJhbnNmb3JtSXNJZGVudGl0eSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghZGVidWdUcmFuc2Zvcm1Jc0lkZW50aXR5KSB7XHJcbiAgICAgICAgICAgIGRlYnVnVHJhbnNmb3JtLnNldElkZW50aXR5KCk7XHJcbiAgICAgICAgICAgIGRlYnVnVHJhbnNmb3JtSXNJZGVudGl0eSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgY29uc3QgaGl0ID0gdGhpcy5faW50ZXJzZWN0c1JheSh3b3JsZFRyYW5mb3JtID8gdG1wUmF5IDogcmF5LCByZXN1bHQpO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKGhpdCAmJiB3b3JsZFRyYW5mb3JtKSB7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB3b3JsZCBwb2ludCBhbmQgbm9ybWFsLCBidXQgc2F2ZSBsb2NhbFxyXG4gICAgICAgICAgICB3b3JsZFRyYW5mb3JtLnRyYW5zZm9ybVBvaW50KHJlc3VsdC5wb2ludCwgcmVzdWx0LnBvaW50KTtcclxuICAgICAgICAgICAgd29ybGRUcmFuZm9ybS50cmFuc2Zvcm1WZWN0b3IocmVzdWx0Lm5vcm1hbCwgcmVzdWx0Lm5vcm1hbCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuICEhaGl0O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGludGVyZmFjZSBJUGF0Y2gge1xyXG4gICAgcmVhZG9ubHkgaW5kZXg6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IG1pblg6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IG1pblo6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHg6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHo6IG51bWJlcjtcclxufSIsImltcG9ydCB0eXBlIHsgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUGF0Y2ggfSBmcm9tIFwiLi9JUGF0Y2gubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoTG9kQmFzZSB9IGZyb20gXCIuL0lQYXRjaExvZC5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJU2luZ2xlTG9kSW5mbyB9IGZyb20gXCIuL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUdyaWRQYXRjaGVkTG9kIH0gZnJvbSBcIi4vR3JpZEJ1aWxkZXIubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElJbnN0YW5jaW5nT2JqZWN0IHtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VE9iamVjdCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0LCBURGF0YSBleHRlbmRzIFVpbnQxNkFycmF5IHwgVWludDhBcnJheT4ge1xyXG4gICAgdmVydGV4QmFzZUluZGV4OiBpbnQ7XHJcbiAgICB2ZXJ0ZXhDb3VudDogaW50O1xyXG4gICAgbG9kOiBJUGF0Y2hMb2RCYXNlO1xyXG4gICAgZGF0YTogVERhdGE7XHJcbiAgICBjb3VudDogaW50O1xyXG4gICAgb2JqZWN0OiBUT2JqZWN0IHwgbnVsbDtcclxuICAgIGhhc0NoYW5nZXM6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFRCdWxkZXI8VE9iamVjdCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0LCBURGF0YSBleHRlbmRzIFVpbnQxNkFycmF5IHwgVWludDhBcnJheT4gPSAobG9kSW5mbzogSVBhdGNoTG9kQmFzZSwgcHJpbWl0aXZlSW5mbzogSVNpbmdsZUxvZEluZm8sIGluc3RhbmNpbmdEYXRhOiBURGF0YSwgbWF4SW5zdGFuY2luZ0NvdW50OiBpbnQpID0+IFRPYmplY3QgfCBudWxsO1xyXG5leHBvcnQgdHlwZSBURGVzdHJ1Y3RvcjxUT2JqZWN0IGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3Q+ID0gKG9iamVjdDogVE9iamVjdCkgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgVFNlbGVjdG9yPFRPYmplY3QgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdCwgVERhdGEgZXh0ZW5kcyBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXk+ID0gKGl0ZW06IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxUT2JqZWN0LCBURGF0YT4pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElQYXRjaEluc3RhbmNpbmc8VE9iamVjdCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0LCBURGF0YSBleHRlbmRzIFVpbnQxNkFycmF5IHwgVWludDhBcnJheT4ge1xyXG5cclxuICAgIGJ1aWxkKGdyaWQ6IElHcmlkUGF0Y2hlZExvZCwgb2JqZWN0QnVpbGRlcj86IFRCdWxkZXI8VE9iamVjdCwgVERhdGE+KTogdm9pZDtcclxuXHJcbiAgICBmb3JFYWNoKGZuOiBUU2VsZWN0b3I8VE9iamVjdCwgVERhdGE+KTogdm9pZDtcclxuXHJcbiAgICBkZXN0cm95KGRlc3RydWN0b3I6IFREZXN0cnVjdG9yPFRPYmplY3Q+KTogdm9pZDtcclxuXHJcbiAgICBnZXQobG9kOiBJUGF0Y2hMb2RCYXNlKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFRPYmplY3QsIFREYXRhPjtcclxuXHJcbiAgICBpbmNyZW1lbnQobG9kOiBJUGF0Y2hMb2RCYXNlLCBwYXRjaDogSVBhdGNoKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFRPYmplY3QsIFREYXRhPjtcclxuXHJcbiAgICB6ZXJvQWxsKCk6IHZvaWQ7XHJcbn0iLCJpbXBvcnQgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4vVHlwZXMubWpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0KHZhbDogbnVtYmVyLCBtaW5XaWR0aDogbnVtYmVyLCBwcmVmaXg6IHN0cmluZykge1xuXG4gICAgY29uc3Qgc3RyID0gdmFsLnRvU3RyaW5nKCk7XG4gICAgY29uc3Qgc3RyTGVuID0gc3RyLmxlbmd0aDtcbiAgICBjb25zdCBhcHBlbmRDb3VudCA9IG1pbldpZHRoIC0gc3RyTGVuO1xuXG4gICAgbGV0IHJlc3VsdCA9IHN0cjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXBwZW5kQ291bnQ7IGkrKykge1xuICAgICAgICByZXN1bHQgPSBwcmVmaXggKyByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikge1xuXHRyZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHZhbHVlKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21GbG9hdCgpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbUZsb2F0UmFuZ2Uoc3RhcnQ6IGZsb2F0LCBlbmQ6IGZsb2F0KSB7XG5cbiAgICBpZiAoZW5kID09IHN0YXJ0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcmFuZG9tIHJhbmdlXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbHRhID0gZW5kIC0gc3RhcnQ7XG5cbiAgICBjb25zdCByYW5kb21WYWx1ZSA9IHJhbmRvbUZsb2F0KCkgKiBkZWx0YSArIHN0YXJ0O1xuXG4gICAgcmV0dXJuIHJhbmRvbVZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsY05leHRQb3dlck9mVHdvKHg6IGludCk6IGludCB7XG4gICAgXG4gICAgbGV0IHJldCA9IDE7XG5cbiAgICBpZiAoeCA9PSAxKSB7XG4gICAgICAgIHJldHVybiAyO1xuICAgIH1cblxuICAgIHdoaWxlIChyZXQgPCB4KSB7XG4gICAgICAgIHJldCA9IHJldCAqIDI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbn1cblxuLyoqIEEgcmFuZG9tIG51bWJlciBmcm9tIC0xLjAgdG8gMS4wICovXG5leHBvcnQgZnVuY3Rpb24gbnJhbmQoKSB7XG5cdHJldHVybiBNYXRoLnJhbmRvbSgpICogMi4wIC0gMS4wO1xufVxuXG5leHBvcnQgY29uc3Qgc2V0UHJlY2lzaW9uID0gKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIHNoYWRlckNvZGU6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBcInByZWNpc2lvbiBcIiArIGdyYXBoaWNzRGV2aWNlLnByZWNpc2lvbiArIFwiIGZsb2F0O1xcblwiICsgc2hhZGVyQ29kZTtcbn1cblxuZXhwb3J0IGNvbnN0IGxpdHRsZUVuZGlhbiA9ICgoKSA9PiB7XG4gICAgY29uc3QgdWludDhBcnJheSAgPSBuZXcgVWludDhBcnJheShbMHhBQSwgMHhCQl0pO1xuICAgIGNvbnN0IHVpbnQxNmFycmF5ID0gbmV3IFVpbnQxNkFycmF5KHVpbnQ4QXJyYXkuYnVmZmVyKTtcbiAgICByZXR1cm4gdWludDE2YXJyYXlbMF0gPT09IDB4QkJBQTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBjaGVja1N1cHBvcnRSMzJGVGV4dHVyZSA9IChncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlKSA9PiB7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgICAgXG4gICAgICAgIC8vIFRPRE86IG5lZWQgbW9yZSB0ZXN0Li4uXG4gICAgICAgIC8vIFRPRE86IG9uIGlwaG9uZSBub3Qgd29yayByMzJmIHRleHR1cmVzXG4gICAgICAgIGlmIChuYXZpZ2F0b3IucGxhdGZvcm0ubWF0Y2goL2lQaG9uZXxpUG9kfGlQYWQvKSAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgbmF2aWdhdG9yLnBsYXRmb3JtLnN0YXJ0c1dpdGgoXCJNYWNcIikgJiYgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gNCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdyYXBoaWNzRGV2aWNlLmlzV2ViR0wyKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGdsID0gKGdyYXBoaWNzRGV2aWNlIGFzIHBjeC5XZWJnbEdyYXBoaWNzRGV2aWNlKS5nbDtcbiAgICBcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBnbC5nZXRFeHRlbnNpb24oXCJFWFRfY29sb3JfYnVmZmVyX2Zsb2F0XCIpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdsLmdldEV4dGVuc2lvbihcIk9FU190ZXh0dXJlX2Zsb2F0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoISFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi9UeXBlcy5tanNcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic1N0b3JlMkQ8VCBleHRlbmRzIHN0cmluZyB8IG51bWJlciB8IG9iamVjdD4ge1xuXG4gICAgcHJvdGVjdGVkIF9wOiBUW107XG4gICAgcHJvdGVjdGVkIF9jb2xzID0gMDtcbiAgICBwcm90ZWN0ZWQgX3Jvd3MgPSAwO1xuXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IF9pbml0QXJyYXlUeXBlKHNpemU6IGludCk6IFRbXTtcblxuICAgIHB1YmxpYyBpbml0KGNvbHM6IGludCwgcm93czogaW50KTogdm9pZCB7XG5cbiAgICAgICAgdGhpcy5fY29scyA9IGNvbHM7XG4gICAgICAgIHRoaXMuX3Jvd3MgPSByb3dzO1xuXG4gICAgICAgIGNvbnN0IHNpemUgPSBjb2xzICogcm93cztcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3AgPSB0aGlzLl9pbml0QXJyYXlUeXBlKHNpemUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbml0QnlWYWwoY29sczogaW50LCByb3dzOiBpbnQsIHZhbDogVCB8ICgoKSA9PiBUKSk6IHZvaWQge1xuXG4gICAgICAgIHRoaXMuaW5pdChjb2xzLCByb3dzKTtcblxuICAgICAgICBjb25zdCBzaXplID0gY29scyAqIHJvd3M7XG4gICAgICAgIGNvbnN0IHZhbElzRnVuYyA9IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbic7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9wW2ldID0gdmFsSXNGdW5jID8gdmFsKCkgOiB2YWw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaW5pdEJ5U3RvcmUoY29sczogaW50LCByb3dzOiBpbnQsIHZhbDogUmVjb3JkPGludCwgVD4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fY29scyA9IGNvbHM7XG4gICAgICAgIHRoaXMuX3Jvd3MgPSByb3dzO1xuICAgICAgICB0aGlzLl9wID0gdmFsIGFzIFRbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkcigpOiBSZWNvcmQ8bnVtYmVyLCBUPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wO1xuICAgIH1cblxuICAgIHB1YmxpYyBzaXplKCk6IGludCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yb3dzICogdGhpcy5fY29scztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0KGNvbDogaW50LCByb3c6IGludCk6IFQge1xuICAgICAgICByZXR1cm4gdGhpcy5fcFtyb3cgKiB0aGlzLl9jb2xzICsgY29sXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0KGNvbDogaW50LCByb3c6IGludCwgdmFsdWU6IFQpIHtcbiAgICAgICAgdGhpcy5fcFtyb3cgKiB0aGlzLl9jb2xzICsgY29sXSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRCeUluZGV4KGluZGV4OiBpbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BbaW5kZXhdO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc2V0QnlJbmRleChpbmRleDogaW50LCB2YWx1ZTogVCkge1xuICAgICAgICB0aGlzLl9wW2luZGV4XSA9IHZhbHVlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE9ialN0b3JlMkQ8VCBleHRlbmRzIG9iamVjdD4gZXh0ZW5kcyBBYnNTdG9yZTJEPFQ+IHtcblxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfaW5pdEFycmF5VHlwZShzaXplOiBudW1iZXIpOiBUW10ge1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5PFQ+KHNpemUpO1xuICAgIH1cbn0iLCJpbXBvcnQgdHlwZSB7IGZsb2F0LCBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaExvZCB9IGZyb20gXCIuL0lQYXRjaExvZC5tanNcIjtcclxuaW1wb3J0IHR5cGUgTG9kTWFuYWdlciBmcm9tIFwiLi9Mb2RNYW5hZ2VyLm1qc1wiO1xyXG5pbXBvcnQgeyBnZXRUZXh0IH0gZnJvbSBcIi4uL0V4dHJhcy9VdGlscy5tanNcIjtcclxuaW1wb3J0IHsgT2JqU3RvcmUyRCB9IGZyb20gXCIuLi9FeHRyYXMvU3RvcmUyRC5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0UGF0Y2hMb2Q6IFJlYWRvbmx5PElQYXRjaExvZD4gPSB7XHJcbiAgICBkaXN0YW5jZTogMCxcclxuICAgIGNvcmU6ICAgICAwLFxyXG4gICAgbGVmdDogICAgIDAsXHJcbiAgICByaWdodDogICAgMCxcclxuICAgIHRvcDogICAgICAwLFxyXG4gICAgYm90dG9tOiAgIDAsXHJcbn1cclxuXHJcbmNvbnN0IGdldFplcm9QYXRjaExvZCA9ICgpOiBJUGF0Y2hMb2QgPT4gKHtcclxuICAgIGRpc3RhbmNlOiAwLFxyXG4gICAgY29yZTogICAgIDAsXHJcbiAgICBsZWZ0OiAgICAgMCxcclxuICAgIHJpZ2h0OiAgICAwLFxyXG4gICAgdG9wOiAgICAgIDAsXHJcbiAgICBib3R0b206ICAgMCxcclxufSk7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElMb2RTdGF0ZSB7XHJcbiAgICBnZXRQYXRjaExvZChwYXRjaFg6IGludCwgcGF0Y2haOiBpbnQpOiBJUGF0Y2hMb2Q7XHJcbiAgICBnZXRQYXRjaExvZEJ5SW5kZXgoaW5kZXg6IGludCk6IElQYXRjaExvZDtcclxuICAgIGdldExvZEZvckRpc3RhbmNlKGRpc3RhbmNlOiBmbG9hdCk6IGludDtcclxuICAgIHVwZGF0ZVBhdGNoTG9kKHBhdGNoWDogbnVtYmVyLCBwYXRjaFo6IG51bWJlcik6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZFN0YXRlIGltcGxlbWVudHMgSUxvZFN0YXRlIHtcclxuXHJcbiAgICBwcml2YXRlIF96RmFyOiBmbG9hdDtcclxuICAgIHByaXZhdGUgX21hcDogT2JqU3RvcmUyRDxJUGF0Y2hMb2Q+O1xyXG4gICAgcHJpdmF0ZSBfcmVnaW9uczogZmxvYXRbXTtcclxuICAgIHByaXZhdGUgX2xvZE1hbmFnZXI6IExvZE1hbmFnZXI7XHJcblxyXG4gICAgcHVibGljIGdldCBsb2RNYW5hZ2VyKCkgeyByZXR1cm4gdGhpcy5fbG9kTWFuYWdlcjsgfVxyXG4gICAgcHVibGljIGdldCB6RmFyKCkgeyByZXR1cm4gdGhpcy5fekZhcjsgfVxyXG4gICAgcHVibGljIGdldCByZWdpb25zKCkgeyByZXR1cm4gdGhpcy5fcmVnaW9uczsgfVxyXG4gICAgcHVibGljIGdldCBtYXAoKSB7IHJldHVybiB0aGlzLl9tYXA7IH1cclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IobG9kTWFuYWdlcjogTG9kTWFuYWdlciwgekZhcjogZmxvYXQpIHtcclxuICAgICAgICB0aGlzLnNldExvZE1hbmFnZXIobG9kTWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5zZXRaRmFyKHpGYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRMb2RNYW5hZ2VyKGxvZE1hbmFnZXI6IExvZE1hbmFnZXIsIHJlbW92ZUZyb21QcmV2OiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLl9sb2RNYW5hZ2VyICYmIHJlbW92ZUZyb21QcmV2KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvZE1hbmFnZXIucmVtb3ZlU3RhdGUodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9sb2RNYW5hZ2VyID0gbG9kTWFuYWdlcjtcclxuICAgICAgICB0aGlzLl9sb2RNYW5hZ2VyLmFkZFN0YXRlKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLl9yZWdpb25zID0gbmV3IEFycmF5PG51bWJlcj4odGhpcy5fbG9kTWFuYWdlci5jb3VudCk7XHJcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IE9ialN0b3JlMkQ8SVBhdGNoTG9kPigpO1xyXG4gICAgICAgIHRoaXMuX21hcC5pbml0QnlWYWwodGhpcy5fbG9kTWFuYWdlci5udW1QYXRjaGVzWCwgdGhpcy5fbG9kTWFuYWdlci5udW1QYXRjaGVzWiwgZ2V0WmVyb1BhdGNoTG9kKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0WkZhcih6RmFyOiBmbG9hdCkge1xyXG4gICAgICAgIHRoaXMuX3pGYXIgPSB6RmFyO1xyXG4gICAgICAgIHRoaXMuX2NhbGNMb2RSZWdpb25zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9jYWxjTG9kUmVnaW9ucygpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoZSByaW5nIHN5c3RlbSB0byBkZXRlcm1pbmUgdGhlIExPRC5cclxuICAgICAgICAvLyBUT0RPOiBCYXNlZCBvbiB0aGUgaGVpZ2h0cyB3ZSBjYW4gY2FsY3VsYXRlIHRoZSBvcHRpbWFsIGxvZHNcclxuXHJcbiAgICAgICAgbGV0IHN1bSA9IDA7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3JlZ2lvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgc3VtICs9IGkgKyAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHggPSB0aGlzLl96RmFyIC8gc3VtO1xyXG4gICAgICAgIGxldCB0ZW1wID0gMDtcclxuICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fcmVnaW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJSYW5nZSA9ICh4ICogKGkgKyAxKSkgfCAwO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWdpb25zW2ldID0gdGVtcCArIGN1clJhbmdlO1xyXG4gICAgICAgICAgICB0ZW1wICs9IGN1clJhbmdlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGF0Y2hMb2QocGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXQocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQYXRjaExvZEJ5SW5kZXgoaW5kZXg6IGludCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0QnlJbmRleChpbmRleCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXRMb2RGb3JEaXN0YW5jZShkaXN0YW5jZTogZmxvYXQpIHtcclxuXHJcbiAgICAgICAgbGV0IGxvZCA9IHRoaXMuX3JlZ2lvbnMubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9yZWdpb25zLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCB0aGlzLl9yZWdpb25zW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxvZCA9IGk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBsb2Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVBhdGNoTG9kKHBhdGNoWDogbnVtYmVyLCBwYXRjaFo6IG51bWJlcikge1xyXG5cclxuICAgICAgICBjb25zdCBpdGVtICAgID0gdGhpcy5fbWFwLmdldChwYXRjaFgsIHBhdGNoWik7XHJcbiAgICAgICAgY29uc3QgY29yZUxvZCA9IGl0ZW0uY29yZTtcclxuXHJcbiAgICAgICAgbGV0IGhhc0NoYW5nZSAgID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGluZGV4TGVmdCAgID0gcGF0Y2hYO1xyXG4gICAgICAgIGxldCBpbmRleFJpZ2h0ICA9IHBhdGNoWDtcclxuICAgICAgICBsZXQgaW5kZXhUb3AgICAgPSBwYXRjaFo7XHJcbiAgICAgICAgbGV0IGluZGV4Qm90dG9tID0gcGF0Y2haO1xyXG5cclxuICAgICAgICBpZiAocGF0Y2hYID4gMCkge1xyXG5cclxuICAgICAgICAgICAgaW5kZXhMZWZ0LS07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcmV2ID0gaXRlbS5sZWZ0O1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5fbWFwLmdldChpbmRleExlZnQsIHBhdGNoWikuY29yZSA+IGNvcmVMb2QgPyAxIDogMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChwcmV2ICE9PSBuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmxlZnQgPSBuZXh0O1xyXG4gICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhdGNoWCA8IHRoaXMuX2xvZE1hbmFnZXIubnVtUGF0Y2hlc1ggLSAxKSB7XHJcblxyXG4gICAgICAgICAgICBpbmRleFJpZ2h0Kys7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcmV2ID0gaXRlbS5yaWdodDtcclxuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuX21hcC5nZXQoaW5kZXhSaWdodCwgcGF0Y2haKS5jb3JlID4gY29yZUxvZCA/IDEgOiAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0ucmlnaHQgPSBuZXh0O1xyXG4gICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhdGNoWiA+IDApIHtcclxuXHJcbiAgICAgICAgICAgIGluZGV4Qm90dG9tLS07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcmV2ID0gaXRlbS5ib3R0b207XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLl9tYXAuZ2V0KHBhdGNoWCwgaW5kZXhCb3R0b20pLmNvcmUgPiBjb3JlTG9kID8gMSA6IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5ib3R0b20gPSBuZXh0O1xyXG4gICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhdGNoWiA8IHRoaXMuX2xvZE1hbmFnZXIubnVtUGF0Y2hlc1ogLSAxKSB7XHJcblxyXG4gICAgICAgICAgICBpbmRleFRvcCsrO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJldiA9IGl0ZW0udG9wO1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5fbWFwLmdldChwYXRjaFgsIGluZGV4VG9wKS5jb3JlID4gY29yZUxvZCA/IDEgOiAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0udG9wID0gbmV4dDtcclxuICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoYXNDaGFuZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByaW50TG9kTWFwKCkge1xyXG5cclxuICAgICAgICBjb25zdCBtYXhMb2RNYXhaID0gdGhpcy5fbG9kTWFuYWdlci5udW1QYXRjaGVzWiAtIDE7XHJcbiAgICAgICAgY29uc3QgbWF4TG9kTWF4WCA9IHRoaXMuX2xvZE1hbmFnZXIubnVtUGF0Y2hlc1g7XHJcblxyXG4gICAgICAgIGxldCBtYXhDb3JlID0gMDtcclxuICAgICAgICBsZXQgc3RyID0gJyc7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZE1hcFogPSBtYXhMb2RNYXhaOyBsb2RNYXBaID4gLTE7IGxvZE1hcFotLSkge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgbG9kTWFwWCA9IDA7IGxvZE1hcFggPCBtYXhMb2RNYXhYOyBsb2RNYXBYKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuX21hcC5nZXQobG9kTWFwWCwgbG9kTWFwWikuY29yZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWF4Q29yZSA8IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4Q29yZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBsb2RNYXhOdW1iZXJDb3VudCAgPSBtYXhMb2RNYXhaLnRvU3RyaW5nKCkubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGNvcmVNYXhOdW1iZXJDb3VudCA9IG1heENvcmUudG9TdHJpbmcoKS5sZW5ndGg7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgbG9kTWFwWiA9IG1heExvZE1heFo7IGxvZE1hcFogPiAtMTsgbG9kTWFwWi0tKSB7XHJcblxyXG4gICAgICAgICAgICBzdHIgKz0gZ2V0VGV4dChsb2RNYXBaLCBsb2RNYXhOdW1iZXJDb3VudCwgJyAnKSArICc6ICc7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBsb2RNYXBYID0gMDsgbG9kTWFwWCA8IG1heExvZE1heFg7IGxvZE1hcFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fbWFwLmdldChsb2RNYXBYLCBsb2RNYXBaKS5jb3JlO1xyXG5cclxuICAgICAgICAgICAgICAgIHN0ciArPSBnZXRUZXh0KHZhbHVlLCBjb3JlTWF4TnVtYmVyQ291bnQsICcgJykgKyAnICc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0ciArPSAnXFxuJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKHN0cik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgdHlwZSB7IFJlZk9iamVjdCwgSVZlY3RvcjMsIGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElMb2RTdGF0ZSB9IGZyb20gXCIuL0xvZFN0YXRlLm1qc1wiO1xyXG5pbXBvcnQgTG9kRXN0aW1hdG9yIGZyb20gXCIuL0xvZEVzdGltYXRvci5tanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZE1hbmFnZXIge1xyXG5cclxuICAgIHByaXZhdGUgX3N0YXRlczogSUxvZFN0YXRlW107XHJcblxyXG4gICAgcHJpdmF0ZSBfcGF0Y2hTaXplOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9udW1QYXRjaGVzWDogaW50O1xyXG4gICAgcHJpdmF0ZSBfbnVtUGF0Y2hlc1o6IGludDtcclxuICAgIHByaXZhdGUgX2xvZENvdW50OiBpbnQ7XHJcblxyXG4gICAgcHVibGljIGdldCBzdGF0ZXMoKSAgICAgIHsgcmV0dXJuIHRoaXMuX3N0YXRlczsgfVxyXG4gICAgcHVibGljIGdldCBwYXRjaFNpemUoKSAgIHsgcmV0dXJuIHRoaXMuX3BhdGNoU2l6ZTsgfVxyXG4gICAgcHVibGljIGdldCBudW1QYXRjaGVzWCgpIHsgcmV0dXJuIHRoaXMuX251bVBhdGNoZXNYOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNaKCkgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1o7IH1cclxuICAgIHB1YmxpYyBnZXQgY291bnQoKSAgICAgICB7IHJldHVybiB0aGlzLl9sb2RDb3VudDsgfVxyXG4gICAgcHVibGljIGdldCBtYXgoKSAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2xvZENvdW50IC0gMTsgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihsb2RFc3RpbWF0b3I6IExvZEVzdGltYXRvcikge1xyXG4gICAgICAgIHRoaXMuX3N0YXRlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoU2l6ZSA9IGxvZEVzdGltYXRvci5wYXRjaFNpemU7XHJcbiAgICAgICAgdGhpcy5fbnVtUGF0Y2hlc1ggPSBsb2RFc3RpbWF0b3IubnVtUGF0Y2hlc1g7XHJcbiAgICAgICAgdGhpcy5fbnVtUGF0Y2hlc1ogPSBsb2RFc3RpbWF0b3IubnVtUGF0Y2hlc1o7XHJcbiAgICAgICAgdGhpcy5fbG9kQ291bnQgPSBsb2RFc3RpbWF0b3IuY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhc1N0YXRlKHN0YXRlOiBJTG9kU3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGVzLmluZGV4T2Yoc3RhdGUpICE9PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkU3RhdGUoc3RhdGU6IElMb2RTdGF0ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9zdGF0ZXMuaW5kZXhPZihzdGF0ZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlcy5wdXNoKHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyByZW1vdmVTdGF0ZShzdGF0ZTogSUxvZFN0YXRlKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuX3N0YXRlcy5pbmRleE9mKHN0YXRlKTtcclxuXHJcbiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdGVzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGxvY2FsVmlld1BvczogUmVmT2JqZWN0PElWZWN0b3IzPiwgaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNIZWlnaHRNYXAsIHVzZVlQb3M6IGJvb2xlYW4gPSB0cnVlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgYSA9IHRoaXMuX3VwZGF0ZUxvZE1hcFBhc3MxKGxvY2FsVmlld1BvcywgaGVpZ2h0TWFwLCB1c2VZUG9zKTtcclxuICAgICAgICBjb25zdCBiID0gdGhpcy5fdXBkYXRlTG9kTWFwUGFzczIoKTtcclxuICAgICAgICByZXR1cm4gYSB8fCBiO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdXBkYXRlTG9kTWFwUGFzczEobG9jYWxWaWV3UG9zOiBSZWZPYmplY3Q8SVZlY3RvcjM+LCBoZWlnaHRNYXA6IElSZWFkb25seUFic0hlaWdodE1hcCwgdXNlWVBvczogYm9vbGVhbikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGhhbGZXaWR0aCAgID0gaGVpZ2h0TWFwLndpZHRoIC8gMjtcclxuICAgICAgICBjb25zdCBoYWxmRGVwdGggICA9IGhlaWdodE1hcC5kZXB0aCAvIDI7XHJcbiAgICAgICAgY29uc3QgY2VudGVyU3RlcCAgPSB0aGlzLnBhdGNoU2l6ZSAvIDIgfCAwO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoU2l6ZU0xID0gdGhpcy5wYXRjaFNpemUgLSAxO1xyXG5cclxuICAgICAgICBsZXQgcHJveHlQYXRjaENlbnRlclkgPSAwO1xyXG4gICAgICAgIGxldCBoYXNDaGFuZ2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHVzZVlQb3MpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZUNhbWVyYVggPSBNYXRoLm1pbihNYXRoLm1heChsb2NhbFZpZXdQb3MueCArIGhhbGZXaWR0aCwgMCksIGhlaWdodE1hcC53aWR0aCAtIDEpO1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVDYW1lcmFaID0gTWF0aC5taW4oTWF0aC5tYXgobG9jYWxWaWV3UG9zLnogKyBoYWxmRGVwdGgsIDApLCBoZWlnaHRNYXAuZGVwdGggLSAxKTtcclxuICAgICAgICAgICAgY29uc3QgY2FtZXJhUG9zQWx0aXR1ZGUgPSBoZWlnaHRNYXAuZ2V0KG5vcm1hbGl6ZUNhbWVyYVggfCAwLCBub3JtYWxpemVDYW1lcmFaIHwgMCk7XHJcblxyXG4gICAgICAgICAgICBwcm94eVBhdGNoQ2VudGVyWSA9IChsb2NhbFZpZXdQb3MueSAtIGNhbWVyYVBvc0FsdGl0dWRlKSAqKiAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kTWFwWiA9IDA7IGxvZE1hcFogPCB0aGlzLm51bVBhdGNoZXNaOyBsb2RNYXBaKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGxvZE1hcFggPSAwOyBsb2RNYXBYIDwgdGhpcy5udW1QYXRjaGVzWDsgbG9kTWFwWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgeCA9IGxvZE1hcFggKiBwYXRjaFNpemVNMSArIGNlbnRlclN0ZXA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB6ID0gbG9kTWFwWiAqIHBhdGNoU2l6ZU0xICsgY2VudGVyU3RlcDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaENlbnRlclggPSAtaGFsZldpZHRoICsgeDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoQ2VudGVyWiA9IC1oYWxmRGVwdGggKyB6O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VUb0NhbWVyYSA9IE1hdGguc3FydChcclxuICAgICAgICAgICAgICAgICAgICAobG9jYWxWaWV3UG9zLnggLSBwYXRjaENlbnRlclgpICoqIDIgK1xyXG4gICAgICAgICAgICAgICAgICAgIChsb2NhbFZpZXdQb3MueiAtIHBhdGNoQ2VudGVyWikgKiogMiArXHJcbiAgICAgICAgICAgICAgICAgICAgcHJveHlQYXRjaENlbnRlcllcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdGF0ZSBvZiB0aGlzLl9zdGF0ZXMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29yZUxvZCAgPSBzdGF0ZS5nZXRMb2RGb3JEaXN0YW5jZShkaXN0YW5jZVRvQ2FtZXJhKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRjaExvZCA9IHN0YXRlLmdldFBhdGNoTG9kKGxvZE1hcFgsIGxvZE1hcFopO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwYXRjaExvZC5kaXN0YW5jZSA9IGRpc3RhbmNlVG9DYW1lcmE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXRjaExvZC5jb3JlICE9PSBjb3JlTG9kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoTG9kLmNvcmUgPSBjb3JlTG9kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZUxvZE1hcFBhc3MyKCkge1xyXG5cclxuICAgICAgICBsZXQgaGFzQ2hhbmdlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZE1hcFogPSAwOyBsb2RNYXBaIDwgdGhpcy5udW1QYXRjaGVzWjsgbG9kTWFwWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBsb2RNYXBYID0gMDsgbG9kTWFwWCA8IHRoaXMubnVtUGF0Y2hlc1g7IGxvZE1hcFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3RhdGUgb2YgdGhpcy5fc3RhdGVzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS51cGRhdGVQYXRjaExvZChsb2RNYXBYLCBsb2RNYXBaKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IGNhbGNOZXh0UG93ZXJPZlR3bywgcmFuZG9tRmxvYXRSYW5nZSB9IGZyb20gXCIuLi9FeHRyYXMvVXRpbHMubWpzXCI7XG5pbXBvcnQgdHlwZSB7IGludCwgZmxvYXQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xuaW1wb3J0IEhlaWdodGZpZWxkIGZyb20gXCIuL0hlaWdodGZpZWxkLm1qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaWRwb2ludERpc3BIZWlnaHRmaWVsZCBleHRlbmRzIEhlaWdodGZpZWxkIHtcblxuICAgIHB1YmxpYyBjcmVhdGVNaWRwb2ludERpc3BsYWNlbWVudChyb3VnaG5lc3M6IGZsb2F0KTogdm9pZCB7XG5cbiAgICAgICAgaWYgKHJvdWdobmVzcyA8IDAuMCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJyb3VnaG5lc3MgbXVzdCBiZSBwb3NpdGl2ZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NyZWF0ZU1pZHBvaW50RGlzcGxhY2VtZW50RjMyKHJvdWdobmVzcyk7XG4gICAgICAgIHRoaXMubm9ybWFsaXplSGVpZ2h0TWFwKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY3JlYXRlTWlkcG9pbnREaXNwbGFjZW1lbnRGMzIocm91Z2huZXNzOiBmbG9hdCk6IHZvaWQge1xuXG4gICAgICAgIGxldCByZWN0U2l6ZSAgPSBjYWxjTmV4dFBvd2VyT2ZUd28odGhpcy53aWR0aCk7XG4gICAgICAgIGxldCBjdXJIZWlnaHQgPSByZWN0U2l6ZSAvIDIuMDtcblxuICAgICAgICBjb25zdCBoZWlnaHRSZWR1Y2UgPSBNYXRoLnBvdygyLjAsIC1yb3VnaG5lc3MpO1xuICAgIFxuICAgICAgICB3aGlsZSAocmVjdFNpemUgPiAwKSB7XG5cbiAgICAgICAgICAgIHRoaXMuX2RpYW1vbmRTdGVwKHJlY3RTaXplLCBjdXJIZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5fc3F1YXJlU3RlcChyZWN0U2l6ZSwgY3VySGVpZ2h0KTtcblxuICAgICAgICAgICAgcmVjdFNpemUgPSAocmVjdFNpemUgLyAyKSB8IDA7XG4gICAgICAgICAgICBjdXJIZWlnaHQgKj0gaGVpZ2h0UmVkdWNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZGlhbW9uZFN0ZXAocmVjdFNpemU6IGludCwgY3VySGVpZ2h0OiBmbG9hdCk6IHZvaWQge1xuXG4gICAgICAgIGNvbnN0IEhhbGZSZWN0U2l6ZSA9IE1hdGguZmxvb3IocmVjdFNpemUgLyAyKTtcblxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuZGVwdGg7IHkgKz0gcmVjdFNpemUpIHtcblxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4ICs9IHJlY3RTaXplKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IG5leHRYID0gKHggKyByZWN0U2l6ZSkgJSB0aGlzLndpZHRoO1xuICAgICAgICAgICAgICAgIGxldCBuZXh0WSA9ICh5ICsgcmVjdFNpemUpICUgdGhpcy5kZXB0aDtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAobmV4dFggPCB4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRYID0gdGhpcy53aWR0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGlmIChuZXh0WSA8IHkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dFkgPSB0aGlzLmRlcHRoIC0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdG9wTGVmdCAgICAgPSB0aGlzLmhlaWdodE1hcC5nZXQoeCwgeSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9wUmlnaHQgICAgPSB0aGlzLmhlaWdodE1hcC5nZXQobmV4dFgsIHkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvdHRvbUxlZnQgID0gdGhpcy5oZWlnaHRNYXAuZ2V0KHgsIG5leHRZKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IHRoaXMuaGVpZ2h0TWFwLmdldChuZXh0WCwgbmV4dFkpO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IG1pZFggPSAoeCArIEhhbGZSZWN0U2l6ZSkgJSB0aGlzLndpZHRoO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pZFkgPSAoeSArIEhhbGZSZWN0U2l6ZSkgJSB0aGlzLmRlcHRoO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHJhbmRWYWx1ZSA9IHJhbmRvbUZsb2F0UmFuZ2UoY3VySGVpZ2h0LCAtY3VySGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBtaWRQb2ludCA9ICh0b3BMZWZ0ICsgdG9wUmlnaHQgKyBib3R0b21MZWZ0ICsgYm90dG9tUmlnaHQpIC8gNC4wO1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KG1pZFgsIG1pZFksIG1pZFBvaW50ICsgcmFuZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3NxdWFyZVN0ZXAocmVjdFNpemU6IGludCwgY3VySGVpZ2h0OiBmbG9hdCk6IHZvaWQge1xuXG4gICAgICAgIGNvbnN0IGhhbGZSZWN0U2l6ZSA9IChyZWN0U2l6ZSAvIDIpIHwgMDtcblxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuZGVwdGg7IHkgKz0gcmVjdFNpemUpIHtcblxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4ICs9IHJlY3RTaXplKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IG5leHRYID0gKHggKyByZWN0U2l6ZSkgJSB0aGlzLndpZHRoO1xuICAgICAgICAgICAgICAgIGxldCBuZXh0WSA9ICh5ICsgcmVjdFNpemUpICUgdGhpcy5kZXB0aDtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAobmV4dFggPCB4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRYID0gdGhpcy53aWR0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGlmIChuZXh0WSA8IHkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dFkgPSB0aGlzLmRlcHRoIC0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgbWlkWCA9ICh4ICsgaGFsZlJlY3RTaXplKSAlIHRoaXMud2lkdGg7XG4gICAgICAgICAgICAgICAgY29uc3QgbWlkWSA9ICh5ICsgaGFsZlJlY3RTaXplKSAlIHRoaXMuZGVwdGg7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2TWlkWCA9ICh4IC0gaGFsZlJlY3RTaXplICsgdGhpcy53aWR0aCkgJSB0aGlzLndpZHRoO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZNaWRZID0gKHkgLSBoYWxmUmVjdFNpemUgKyB0aGlzLmRlcHRoKSAlIHRoaXMuZGVwdGg7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY3VyVG9wTGVmdCAgPSB0aGlzLmhlaWdodE1hcC5nZXQoeCwgeSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VyVG9wUmlnaHQgPSB0aGlzLmhlaWdodE1hcC5nZXQobmV4dFgsIHkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1ckNlbnRlciAgID0gdGhpcy5oZWlnaHRNYXAuZ2V0KG1pZFgsIG1pZFkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZZQ2VudGVyID0gdGhpcy5oZWlnaHRNYXAuZ2V0KG1pZFgsIHByZXZNaWRZKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJCb3RMZWZ0ICA9IHRoaXMuaGVpZ2h0TWFwLmdldCh4LCBuZXh0WSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldlhDZW50ZXIgPSB0aGlzLmhlaWdodE1hcC5nZXQocHJldk1pZFgsIG1pZFkpO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGN1ckxlZnRNaWQgPSAoY3VyVG9wTGVmdCArIGN1ckNlbnRlciArIGN1ckJvdExlZnQgKyBwcmV2WENlbnRlcikgLyA0LjAgKyByYW5kb21GbG9hdFJhbmdlKC1jdXJIZWlnaHQsIGN1ckhlaWdodCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VyVG9wTWlkICA9IChjdXJUb3BMZWZ0ICsgY3VyQ2VudGVyICsgY3VyVG9wUmlnaHQgKyBwcmV2WUNlbnRlcikgLyA0LjAgKyByYW5kb21GbG9hdFJhbmdlKC1jdXJIZWlnaHQsIGN1ckhlaWdodCk7XG4gICAgXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIZWlnaHQobWlkWCwgeSwgY3VyVG9wTWlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhlaWdodCh4LCBtaWRZLCBjdXJMZWZ0TWlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoIH0gZnJvbSBcIi4vSVBhdGNoLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaExvZCwgSVBhdGNoTG9kQmFzZSB9IGZyb20gXCIuL0lQYXRjaExvZC5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJSW5zdGFuY2luZ09iamVjdCwgSVBhdGNoSW5zdGFuY2luZywgSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nLCBUQnVsZGVyLCBURGVzdHJ1Y3RvciwgVFNlbGVjdG9yIH0gZnJvbSBcIi4vSVBhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IHsgZ2V0TG9kSWQgfSBmcm9tIFwiLi9Mb2RFc3RpbWF0b3IubWpzXCI7XHJcbmltcG9ydCB7IEJPVFRPTSwgTEVGVCwgUklHSFQsIFRPUCwgdHlwZSBJUmVhZG9ubHlMb2RJbmZvIH0gZnJvbSBcIi4vTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJR3JpZFBhdGNoZWRMb2QgfSBmcm9tIFwiLi9HcmlkQnVpbGRlci5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBjb21JbnN0RGF0YVNpemUgPSA0O1xyXG5leHBvcnQgY29uc3QgY29tYmluZUdyb3VwTGVuID0gNjtcclxuXHJcbmV4cG9ydCB0eXBlICBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGUgPSBVaW50OEFycmF5O1xyXG5leHBvcnQgY29uc3QgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlID0gVWludDhBcnJheTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbWJpbmVJdGVtIHtcclxuICAgIG1haW5JZDogaW50LFxyXG4gICAgZ3JvdXBJZDogaW50LFxyXG4gICAgYW5nbGU6IGludCxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTG9kQ29tYmluZURhdGE8VCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0PiB7XHJcbiAgICBncm91cHM6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+W10sXHJcbiAgICBpdGVtczogSUNvbWJpbmVJdGVtW11bXVtdW11cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0Y2hDb21iaW5lSW5zdGFuY2luZzxUIGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3Q+IGltcGxlbWVudHMgSVBhdGNoSW5zdGFuY2luZzxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+IHtcclxuXHJcbiAgICBwcml2YXRlIF9wYXRjaENvdW50OiBpbnQ7XHJcblxyXG4gICAgcHVibGljIGRhdGE6IElMb2RDb21iaW5lRGF0YTxUPltdO1xyXG4gICAgcHVibGljIGdldCBwYXRjaENvdW50KCkgeyByZXR1cm4gdGhpcy5fcGF0Y2hDb3VudDsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoQ291bnQgPSAwO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZm9yRWFjaChmbjogVFNlbGVjdG9yPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4pIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmRhdGEubGVuZ3RoOyBjKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tYmluZUdyb3VwTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuZGF0YVtjXS5ncm91cHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgZm4oc2VnbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3lTZWdtZW50T2JqZWN0cyhpbmRleDogaW50LCBkZXN0cnVjdG9yOiBURGVzdHJ1Y3RvcjxUPikge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbWJpbmVHcm91cExlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBzZWdtZW50ID0gdGhpcy5kYXRhW2luZGV4XS5ncm91cHNbaV07XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VnbWVudC5vYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGRlc3RydWN0b3Ioc2VnbWVudC5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgc2VnbWVudC5vYmplY3QgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KGRlc3RydWN0b3I6IFREZXN0cnVjdG9yPFQ+KSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95U2VnbWVudE9iamVjdHMoaSwgZGVzdHJ1Y3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGF0YS5sZW5ndGggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBidWlsZChncmlkOiBJR3JpZFBhdGNoZWRMb2QsIG9iamVjdEJ1aWxkZXI/OiBUQnVsZGVyPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4pIHtcclxuXHJcbiAgICAgICAgdGhpcy5fcGF0Y2hDb3VudCA9IGdyaWQubnVtUGF0Y2hlc1ggKiBncmlkLm51bVBhdGNoZXNaO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBBcnJheShncmlkLmxvZEluZm8ubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kQ29yZSA9IDA7IGxvZENvcmUgPCB0aGlzLmRhdGEubGVuZ3RoOyBsb2RDb3JlKyspIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW2xvZENvcmVdID0gdGhpcy5fYnVpbGRJbmZvKGxvZENvcmUsIGdyaWQubG9kSW5mb1tsb2RDb3JlXSwgdGhpcy5fcGF0Y2hDb3VudCwgb2JqZWN0QnVpbGRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2J1aWxkSW5mbzxUIGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3Q+KGxvZENvcmU6IGludCwgbG9kSW5mbzogSVJlYWRvbmx5TG9kSW5mbywgcGF0Y2hDb3VudDogaW50LCBvYmplY3RCdWlsZGVyPzogVEJ1bGRlcjxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+KTogSUxvZENvbWJpbmVEYXRhPFQ+IHtcclxuXHJcbiAgICAgICAgY29uc3QgZ3JvdXBzID0gbmV3IEFycmF5PElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+Pihjb21iaW5lR3JvdXBMZW4pO1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zICA9IG5ldyBBcnJheTxJQ29tYmluZUl0ZW1bXVtdW10+KExFRlQpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykgICB7IGl0ZW1zW2xdID0gbmV3IEFycmF5PElDb21iaW5lSXRlbVtdW10+KFJJR0hUKTtcclxuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspICB7IGl0ZW1zW2xdW3JdID0gbmV3IEFycmF5PElDb21iaW5lSXRlbVtdPihUT1ApO1xyXG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspICAgIHsgaXRlbXNbbF1bcl1bdF0gPSBuZXcgQXJyYXk8SUNvbWJpbmVJdGVtPihCT1RUT00pO1xyXG4gICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZ2V0TG9kSWQobG9kQ29yZSwgbCwgciwgdCwgYik7XHJcbiAgICAgICAgICAgIGNvbnN0IHZsID0gZ2V0TG9kQ29tYmluZURhdGEobG9kQ29yZSwgbCwgciwgdCwgYik7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbWFpbklkLCBncm91cElkIH0gPSB2bDtcclxuXHJcbiAgICAgICAgICAgIGl0ZW1zW2xdW3JdW3RdW2JdID0gdmw7XHJcblxyXG4gICAgICAgICAgICAvLyBidWlsZCBkYXRhIGZvciBtYWluIGNhc2VcclxuICAgICAgICAgICAgaWYgKGlkID09PSBtYWluSWQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gbG9kSW5mby5pbmZvW2xdW3JdW3RdW2JdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9kOiBJUGF0Y2hMb2RCYXNlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvcmU6IGxvZENvcmUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogbCxcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogcixcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IHQsXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBiXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgICA9IG5ldyBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGUocGF0Y2hDb3VudCAqIGNvbUluc3REYXRhU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmplY3QgPSBvYmplY3RCdWlsZGVyID8gb2JqZWN0QnVpbGRlcihsb2QsIGluZm8sIGRhdGEsIHBhdGNoQ291bnQpIDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBncm91cHNbZ3JvdXBJZF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4QmFzZUluZGV4OiBpbmZvLnN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleENvdW50OiBpbmZvLmNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZDogbG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBvYmplY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfX19fVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBncm91cHMsXHJcbiAgICAgICAgICAgIGl0ZW1zXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0KGxvZDogSVBhdGNoTG9kKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGFbbG9kLmNvcmVdO1xyXG4gICAgICAgIGNvbnN0IGdyb3VwSWQgPSBkYXRhLml0ZW1zW2xvZC5sZWZ0XVtsb2QucmlnaHRdW2xvZC50b3BdW2xvZC5ib3R0b21dLmdyb3VwSWQ7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuZ3JvdXBzW2dyb3VwSWRdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbmNyZW1lbnQobG9kOiBJUGF0Y2hMb2QsIHBhdGNoOiBJUGF0Y2gpOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZGF0YSAgID0gdGhpcy5kYXRhW2xvZC5jb3JlXTtcclxuICAgICAgICBjb25zdCBpdGVtICAgPSBkYXRhLml0ZW1zW2xvZC5sZWZ0XVtsb2QucmlnaHRdW2xvZC50b3BdW2xvZC5ib3R0b21dO1xyXG4gICAgICAgIGNvbnN0IHNpbmdsZSA9IGRhdGEuZ3JvdXBzW2l0ZW0uZ3JvdXBJZF07XHJcblxyXG4gICAgICAgIGNvbnN0IHByZXZJbmRleCA9IHNpbmdsZS5jb3VudDtcclxuICAgICAgICBjb25zdCBpbmRleCAgICAgPSBwcmV2SW5kZXggKiBjb21JbnN0RGF0YVNpemU7XHJcblxyXG4gICAgICAgIGlmIChzaW5nbGUuZGF0YVtpbmRleCArIDBdICE9PSBwYXRjaC54IHx8XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMV0gIT09IHBhdGNoLnogfHxcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAyXSAhPT0gaXRlbS5hbmdsZSkge1xyXG4gICAgICAgICAgICBzaW5nbGUuZGF0YVtpbmRleCArIDBdID0gcGF0Y2gueDtcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAxXSA9IHBhdGNoLno7XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMl0gPSBpdGVtLmFuZ2xlO1xyXG4gICAgICAgICAgICBzaW5nbGUuaGFzQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzaW5nbGUuY291bnQrKztcclxuICAgICAgICByZXR1cm4gc2luZ2xlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB6ZXJvQWxsKCkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsb2RDb3JlID0gMDsgbG9kQ29yZSA8IHRoaXMuZGF0YS5sZW5ndGg7IGxvZENvcmUrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21iaW5lR3JvdXBMZW47IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbmdsZSA9IHRoaXMuZGF0YVtsb2RDb3JlXS5ncm91cHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgc2luZ2xlLmNvdW50ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExvZENvbWJpbmVEYXRhKGxvZENvcmU6IGludCwgbDogaW50LCByOiBpbnQsIHQ6IGludCwgYjogaW50KSB7XHJcblxyXG4gICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIHdoaWNoIHNoYXBlIGNhbiBiZSByZXBsYWNlZCBieSByb3RhdGlvbi5cclxuICAgIC8vIEFuZ2xlIDEgPSA5MCwgMiA9IDE4MCwgMyA9IDI3MFxyXG5cclxuICAgIC8vIHxcXHwvfC8gICAgICAgICAgICAgICAgICAgfFxcfC98XFx8XHJcbiAgICAvLyB8XFx8L3xcXCAgPT4gcm90YXRlKDkwKSA9PiB8L3xcXHwvfFxyXG4gICAgLy8gfC98XFx8LyAgICAgICAgICAgICAgICAgICAgXFwgLyBcXFxyXG5cclxuICAgIGxldCBtYWluSWQ7XHJcbiAgICBsZXQgZ3JvdXBJZDtcclxuICAgIGxldCBhbmdsZTtcclxuXHJcbiAgICBpZiAobCA9PT0gMCAmJiByID09PSAwICYmIHQgPT09IDAgJiYgYiA9PT0gMCkge1xyXG4gICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAwLCAwLCAwLCAwKTtcclxuICAgICAgICBncm91cElkID0gMDtcclxuICAgICAgICBhbmdsZSAgID0gMDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMCAmJiB0ID09PSAwICYmIGIgPT09IDApIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDE7XHJcbiAgICAgICAgYW5nbGUgICA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAwICYmIHIgPT09IDAgJiYgdCA9PT0gMSAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgIGdyb3VwSWQgPSAxO1xyXG4gICAgICAgIGFuZ2xlICAgPSA5MDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDAgJiYgciA9PT0gMSAmJiB0ID09PSAwICYmIGIgPT09IDApIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDE7XHJcbiAgICAgICAgYW5nbGUgICA9IDE4MDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDAgJiYgciA9PT0gMCAmJiB0ID09PSAwICYmIGIgPT09IDEpIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDE7XHJcbiAgICAgICAgYW5nbGUgICA9IDI3MDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMCAmJiB0ID09PSAxICYmIGIgPT09IDApIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMSwgMCk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDI7XHJcbiAgICAgICAgYW5nbGUgICA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAwICYmIHIgPT09IDEgJiYgdCA9PT0gMSAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDApO1xyXG4gICAgICAgIGdyb3VwSWQgPSAyO1xyXG4gICAgICAgIGFuZ2xlICAgPSA5MDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDAgJiYgciA9PT0gMSAmJiB0ID09PSAwICYmIGIgPT09IDEpIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMSwgMCk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDI7XHJcbiAgICAgICAgYW5nbGUgICA9IDE4MDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMCAmJiB0ID09PSAwICYmIGIgPT09IDEpIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMSwgMCk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDI7XHJcbiAgICAgICAgYW5nbGUgICA9IDI3MDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMSAmJiB0ID09PSAwICYmIGIgPT09IDApIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMSwgMCwgMCk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDM7XHJcbiAgICAgICAgYW5nbGUgICA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAwICYmIHIgPT09IDAgJiYgdCA9PT0gMSAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDEsIDAsIDApO1xyXG4gICAgICAgIGdyb3VwSWQgPSAzO1xyXG4gICAgICAgIGFuZ2xlICAgPSA5MDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMCAmJiB0ID09PSAxICYmIGIgPT09IDEpIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMSwgMSk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDQ7XHJcbiAgICAgICAgYW5nbGUgICA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDEgJiYgdCA9PT0gMSAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDEpO1xyXG4gICAgICAgIGdyb3VwSWQgPSA0O1xyXG4gICAgICAgIGFuZ2xlICAgPSA5MDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDAgJiYgciA9PT0gMSAmJiB0ID09PSAxICYmIGIgPT09IDEpIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMSwgMSk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDQ7XHJcbiAgICAgICAgYW5nbGUgICA9IDE4MDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMSAmJiB0ID09PSAwICYmIGIgPT09IDEpIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMCwgMSwgMSk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDQ7XHJcbiAgICAgICAgYW5nbGUgICA9IDI3MDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPT09IDEgJiYgciA9PT0gMSAmJiB0ID09PSAxICYmIGIgPT09IDEpIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMSwgMSwgMSwgMSk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDU7XHJcbiAgICAgICAgYW5nbGUgICA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhblxcJ3QgY29tYmluZSAke2xvZENvcmV9LCR7bH0sJHtyfSwke3R9LCR7Yn1gKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG1haW5JZCxcclxuICAgICAgICBncm91cElkLFxyXG4gICAgICAgIGFuZ2xlOiBhbmdsZSAvIDkwLCAvLyBzYXZlIGZvciB1aW50OFxyXG4gICAgfTtcclxufSAiLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoIH0gZnJvbSBcIi4vSVBhdGNoLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaExvZEJhc2UgfSBmcm9tIFwiLi9JUGF0Y2hMb2QubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUluc3RhbmNpbmdPYmplY3QsIElQYXRjaEluc3RhbmNpbmcsIElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZywgVEJ1bGRlciwgVERlc3RydWN0b3IsIFRTZWxlY3RvciB9IGZyb20gXCIuL0lQYXRjaEluc3RhbmNpbmcubWpzXCI7XHJcbmltcG9ydCB7IEJPVFRPTSwgTEVGVCwgUklHSFQsIFRPUCwgdHlwZSBJUmVhZG9ubHlMb2RJbmZvIH0gZnJvbSBcIi4vTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJR3JpZFBhdGNoZWRMb2QgfSBmcm9tIFwiLi9HcmlkQnVpbGRlci5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnN0RGF0YVNpemUgPSAyO1xyXG5cclxuZXhwb3J0IHR5cGUgIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZSA9IFVpbnQxNkFycmF5O1xyXG5leHBvcnQgY29uc3QgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlID0gVWludDE2QXJyYXk7XHJcblxyXG5leHBvcnQgY2xhc3MgUGF0Y2hJbnN0YW5jaW5nPFQgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdD4gaW1wbGVtZW50cyBJUGF0Y2hJbnN0YW5jaW5nPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4ge1xyXG5cclxuICAgIHByaXZhdGUgX3BhdGNoQ291bnQ6IGludDtcclxuXHJcbiAgICBwdWJsaWMgZGF0YTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT5bXVtdW11bXVtdO1xyXG4gICAgcHVibGljIGdldCBwYXRjaENvdW50KCkgeyByZXR1cm4gdGhpcy5fcGF0Y2hDb3VudDsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoQ291bnQgPSAwO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZm9yRWFjaChmbjogVFNlbGVjdG9yPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4pIHtcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWdtZW50ID0gdGhpcy5kYXRhW2NdW2xdW3JdW3RdW2JdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oc2VnbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3lTZWdtZW50T2JqZWN0cyhpbmRleDogaW50LCBkZXN0cnVjdG9yOiBURGVzdHJ1Y3RvcjxUPikge1xyXG4gICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgUklHSFQ7IHIrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnQgPSB0aGlzLmRhdGFbaW5kZXhdW2xdW3JdW3RdW2JdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ21lbnQub2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0cnVjdG9yKHNlZ21lbnQub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnQub2JqZWN0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveShkZXN0cnVjdG9yOiBURGVzdHJ1Y3RvcjxUPikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveVNlZ21lbnRPYmplY3RzKGksIGRlc3RydWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGEubGVuZ3RoID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYnVpbGQoZ3JpZDogSUdyaWRQYXRjaGVkTG9kLCBvYmplY3RCdWlsZGVyPzogVEJ1bGRlcjxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+KSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhdGNoQ291bnQgPSBncmlkLm51bVBhdGNoZXNYICogZ3JpZC5udW1QYXRjaGVzWjtcclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgQXJyYXkoZ3JpZC5sb2RJbmZvLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZENvcmUgPSAwOyBsb2RDb3JlIDwgdGhpcy5kYXRhLmxlbmd0aDsgbG9kQ29yZSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtsb2RDb3JlXSA9IHRoaXMuX2J1aWxkSW5mbyhsb2RDb3JlLCBncmlkLmxvZEluZm9bbG9kQ29yZV0sIHRoaXMuX3BhdGNoQ291bnQsIG9iamVjdEJ1aWxkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9idWlsZEluZm88VCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0Pihsb2RDb3JlOiBpbnQsIGxvZEluZm86IElSZWFkb25seUxvZEluZm8sIHBhdGNoQ291bnQ6IGludCwgb2JqZWN0QnVpbGRlcj86IFRCdWxkZXI8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPik6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+W11bXVtdW10ge1xyXG5cclxuICAgICAgICBjb25zdCBhcnIgPSBuZXcgQXJyYXk8SVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT5bXVtdW10+KExFRlQpO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspICAgeyBhcnJbbF0gPSBuZXcgQXJyYXkoUklHSFQpO1xyXG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgUklHSFQ7IHIrKykgIHsgYXJyW2xdW3JdID0gbmV3IEFycmF5KFRPUCk7XHJcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykgICAgeyBhcnJbbF1bcl1bdF0gPSBuZXcgQXJyYXkoQk9UVE9NKTtcclxuICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpbmZvID0gbG9kSW5mby5pbmZvW2xdW3JdW3RdW2JdO1xyXG4gICAgICAgICAgICBjb25zdCBsb2Q6IElQYXRjaExvZEJhc2UgPSB7XHJcbiAgICAgICAgICAgICAgICBjb3JlOiBsb2RDb3JlLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogbCxcclxuICAgICAgICAgICAgICAgIHJpZ2h0OiByLFxyXG4gICAgICAgICAgICAgICAgdG9wOiB0LFxyXG4gICAgICAgICAgICAgICAgYm90dG9tOiBiXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhICAgPSBuZXcgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlKHBhdGNoQ291bnQgKiBpbnN0RGF0YVNpemUpO1xyXG4gICAgICAgICAgICBjb25zdCBvYmplY3QgPSBvYmplY3RCdWlsZGVyID8gb2JqZWN0QnVpbGRlcihsb2QsIGluZm8sIGRhdGEsIHBhdGNoQ291bnQpIDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGFycltsXVtyXVt0XVtiXSA9IHtcclxuICAgICAgICAgICAgICAgIHZlcnRleEJhc2VJbmRleDogaW5mby5zdGFydCxcclxuICAgICAgICAgICAgICAgIHZlcnRleENvdW50OiBpbmZvLmNvdW50LFxyXG4gICAgICAgICAgICAgICAgY291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBsb2Q6IGxvZCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgICAgICBvYmplY3Q6IG9iamVjdCxcclxuICAgICAgICAgICAgICAgIGhhc0NoYW5nZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH19fX1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldChsb2Q6IElQYXRjaExvZEJhc2UpOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtsb2QuY29yZV1bbG9kLmxlZnRdW2xvZC5yaWdodF1bbG9kLnRvcF1bbG9kLmJvdHRvbV07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBpbmNyZW1lbnQobG9kOiBJUGF0Y2hMb2RCYXNlLCBwYXRjaDogSVBhdGNoKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHNpbmdsZSAgICA9IHRoaXMuZ2V0KGxvZCk7XHJcbiAgICAgICAgY29uc3QgcHJldkluZGV4ID0gc2luZ2xlLmNvdW50O1xyXG4gICAgICAgIGNvbnN0IGluZGV4ICAgICA9IHByZXZJbmRleCAqIGluc3REYXRhU2l6ZTtcclxuXHJcbiAgICAgICAgaWYgKHNpbmdsZS5kYXRhW2luZGV4ICsgMF0gIT09IHBhdGNoLm1pblggfHxcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAxXSAhPT0gcGF0Y2gubWluWikge1xyXG4gICAgICAgICAgICBzaW5nbGUuZGF0YVtpbmRleCArIDBdID0gcGF0Y2gubWluWDtcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAxXSA9IHBhdGNoLm1pblo7XHJcbiAgICAgICAgICAgIHNpbmdsZS5oYXNDaGFuZ2VzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNpbmdsZS5jb3VudCsrO1xyXG4gICAgICAgIHJldHVybiBzaW5nbGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHplcm9BbGwoKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZENvcmUgPSAwOyBsb2RDb3JlIDwgdGhpcy5kYXRhLmxlbmd0aDsgbG9kQ29yZSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaW5nbGUgPSB0aGlzLmRhdGFbbG9kQ29yZV1bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGUuY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IEFic0NodW5rZWRIZWlnaHRNYXAsIHsgZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUsIHR5cGUgSVJlYWRvbmx5QWJzQ2h1bmtlZEhlaWdodE1hcFR5cHBlZCB9IGZyb20gXCIuL0Fic0NodW5rZWRIZWlnaHRNYXAubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZWFkb25seVBhdGNoZWRIZWlnaHRNYXAgZXh0ZW5kcyBJUmVhZG9ubHlBYnNDaHVua2VkSGVpZ2h0TWFwVHlwcGVkPEZsb2F0MzJBcnJheT4ge1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGF0Y2hlZEhlaWdodE1hcCBleHRlbmRzIEFic0NodW5rZWRIZWlnaHRNYXA8RmxvYXQzMkFycmF5PiBpbXBsZW1lbnRzIElSZWFkb25seVBhdGNoZWRIZWlnaHRNYXAge1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZUJ1ZmZlcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBjaHVua1NpemU6IGludCk6IEZsb2F0MzJBcnJheSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG51bUNodW5rc1ggICA9ICgod2lkdGggLSAxKSAvIChjaHVua1NpemUgLSAxKSkgfCAwO1xyXG4gICAgICAgIGNvbnN0IG51bUNodW5rc1ogICA9ICgoZGVwdGggLSAxKSAvIChjaHVua1NpemUgLSAxKSkgfCAwO1xyXG4gICAgICAgIGNvbnN0IGNodW5rQXJyU2l6ZSA9IGNodW5rU2l6ZSAqKiAyO1xyXG4gICAgICAgIGNvbnN0IGNodW5rQ291bnQgICA9IG51bUNodW5rc1ggKiBudW1DaHVua3NaO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoY2h1bmtBcnJTaXplICogY2h1bmtDb3VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCwgYnVmZmVyPzogRmxvYXQzMkFycmF5KSB7XHJcbiAgICAgICAgY29uc3QgdmFsaWREYXRhQ2h1bmtTaXplID0gZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUocGF0Y2hTaXplLCBkYXRhQ2h1bmtTaXplKTtcclxuICAgICAgICBjb25zdCB0bXBCdWZmZXIgPSBidWZmZXIgPz8gUGF0Y2hlZEhlaWdodE1hcC5jcmVhdGVCdWZmZXIod2lkdGgsIGRlcHRoLCB2YWxpZERhdGFDaHVua1NpemUpO1xyXG4gICAgICAgIHN1cGVyKHdpZHRoLCBkZXB0aCwgcGF0Y2hTaXplLCBkYXRhQ2h1bmtTaXplLCBtYXhIZWlnaHQsIHRtcEJ1ZmZlciwgMSwgMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBhdGNoZWRIZWlnaHRNYXA7IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUmVhZG9ubHlBYnNTaGF0dGVyZWRIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNTaGF0dGVyZWRIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVpvbmUgfSBmcm9tIFwiLi9JWm9uZS5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBidWZmZXJJdGVtU2l6ZSA9IDQ7IC8vICh4LCB5LCB6LCByYWRpdXMpXHJcblxyXG4vLyBPdXIgc3lzdGVtIGlzIGRpdmlkZWQgaW50byBhIGdlbmVyYWwgcGFydCBhbmQgYW4gZW5naW5lIHBhcnQsXHJcbi8vIGZvciBvcHRpbWl6YXRpb24gd2UgdXNlIHRoZSBlbmdpbmUgcGFydCBpbiB0aGlzIGZpbGUuIChwbGF5Y2FudmFzIFZlYzMsIE1hdDQsIEJvdW5kaW5nU3BoZXJlKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0Y2hlc1NwaGVyZUJ1ZmZlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBfc2NhbGU6IHBjeC5WZWMzO1xyXG4gICAgcHJpdmF0ZSBfbWF0cml4OiBwY3guTWF0NDtcclxuICAgIHByaXZhdGUgX2hlaWdodE1hcDogSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwO1xyXG4gICAgcHJpdmF0ZSBfbG9jYWxCdWZmZXI6IG51bWJlcltdO1xyXG4gICAgcHJpdmF0ZSBfd29ybGRTcGhlcmVzOiBwY3guQm91bmRpbmdTcGhlcmVbXTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodE1hcCgpIHsgcmV0dXJuIHRoaXMuX2hlaWdodE1hcDsgfVxyXG4gICAgcHVibGljIGdldCBidWZmZXIoKSB7IHJldHVybiB0aGlzLl9sb2NhbEJ1ZmZlcjsgfVxyXG4gICAgcHVibGljIGdldCBzcGhlcmVzKCkgeyByZXR1cm4gdGhpcy5fd29ybGRTcGhlcmVzOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNTaGF0dGVyZWRIZWlnaHRNYXAsIG1hdHJpeD86IHBjeC5NYXQ0KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwID0gaGVpZ2h0TWFwO1xyXG4gICAgICAgIHRoaXMuX2xvY2FsQnVmZmVyID0gbmV3IEFycmF5PG51bWJlcj4odGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNYICogdGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNaICogYnVmZmVySXRlbVNpemUpO1xyXG4gICAgICAgIHRoaXMuX2xvY2FsQnVmZmVyLmZpbGwoMCk7XHJcbiAgICAgICAgdGhpcy5fc2NhbGUgPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgICAgIHRoaXMuX21hdHJpeCA9IG5ldyBwYy5NYXQ0KCk7XHJcbiAgICAgICAgdGhpcy5faW5pdFdvcmxkU3BoZXJlcygpO1xyXG4gICAgICAgIHRoaXMuc2V0TWF0cml4KG1hdHJpeCA/PyBwYy5NYXQ0LklERU5USVRZLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9pbml0V29ybGRTcGhlcmVzKCkge1xyXG5cclxuICAgICAgICB0aGlzLl93b3JsZFNwaGVyZXMgPSBuZXcgQXJyYXk8cGN4LkJvdW5kaW5nU3BoZXJlPih0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1ggKiB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1opO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBwYXRjaFogPSAwOyBwYXRjaFogPCB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1o7IHBhdGNoWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBwYXRjaFggPSAwOyBwYXRjaFggPCB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1g7IHBhdGNoWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwYXRjaFggKyBwYXRjaFogKiB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1g7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fd29ybGRTcGhlcmVzW2luZGV4XSA9IG5ldyBwYy5Cb3VuZGluZ1NwaGVyZSgpOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0TWF0cml4KG1hdHJpeDogcGN4Lk1hdDQsIHJlY2FsY3VsYXRlOiBib29sZWFuID0gdHJ1ZSkge1xyXG5cclxuICAgICAgICB0aGlzLl9tYXRyaXguY29weShtYXRyaXgpO1xyXG4gICAgICAgIHRoaXMuX21hdHJpeC5nZXRTY2FsZSh0aGlzLl9zY2FsZSk7XHJcblxyXG4gICAgICAgIGlmIChyZWNhbGN1bGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZWNhbGN1bGF0ZVdvcmxkQm91bmRpbmdTcGhlcmVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgcGF0Y2hWaXNpYmxlKHBhdGNoWDogaW50LCBwYXRjaFo6IGludCwgbWFyZ2luOiBmbG9hdCwgZnJ1c3R1bTogcGN4LkZydXN0dW0pIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzcGhlcmVJZHggPSBwYXRjaFggKyBwYXRjaFogKiB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1g7XHJcbiAgICAgICAgY29uc3Qgc3BoZXJlID0gdGhpcy5fd29ybGRTcGhlcmVzW3NwaGVyZUlkeF07XHJcbiAgICAgICAgY29uc3QgcHJldlJhZGl1cyA9IHNwaGVyZS5yYWRpdXM7XHJcblxyXG4gICAgICAgIHNwaGVyZS5yYWRpdXMgKj0gbWFyZ2luO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBmcnVzdHVtLmNvbnRhaW5zU3BoZXJlKHNwaGVyZSk7XHJcblxyXG4gICAgICAgIHNwaGVyZS5yYWRpdXMgPSBwcmV2UmFkaXVzO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0ID4gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjYWxjdWxhdGUoKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHBhdGNoWiA9IDA7IHBhdGNoWiA8IHRoaXMuX2hlaWdodE1hcC5udW1QYXRjaGVzWjsgcGF0Y2haKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHBhdGNoWCA9IDA7IHBhdGNoWCA8IHRoaXMuX2hlaWdodE1hcC5udW1QYXRjaGVzWDsgcGF0Y2hYKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY2FsY3VsYXRlQm91bmRpbmdTcGhlcmUocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWNhbGN1bGF0ZVpvbmUoem9uZTogSVpvbmUpOiB2b2lkIHtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoem9uZS5tYXhYIDwgMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh6b25lLm1heFogPCAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGZpeGVkTWluWCA9IE1hdGgubWF4KHpvbmUubWluWCwgMCk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRNaW5aID0gTWF0aC5tYXgoem9uZS5taW5aLCAwKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1heFggPSBNYXRoLm1pbih6b25lLm1heFgsIHRoaXMuX2hlaWdodE1hcC53aWR0aCk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRNYXhaID0gTWF0aC5taW4oem9uZS5tYXhaLCB0aGlzLl9oZWlnaHRNYXAuZGVwdGgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gZml4ZWRNaW5aOyB6IDwgZml4ZWRNYXhaOyB6ICs9IHRoaXMuX2hlaWdodE1hcC5wYXRjaFNpemUpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSBmaXhlZE1pblg7IHggPCBmaXhlZE1heFg7IHggKz0gdGhpcy5faGVpZ2h0TWFwLnBhdGNoU2l6ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoWCA9IHggLyB0aGlzLl9oZWlnaHRNYXAucGF0Y2hTaXplIHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoWiA9IHogLyB0aGlzLl9oZWlnaHRNYXAucGF0Y2hTaXplIHwgMDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY2FsY3VsYXRlQm91bmRpbmdTcGhlcmUocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWNhbGN1bGF0ZUJvdW5kaW5nU3BoZXJlKHBhdGNoWDogaW50LCBwYXRjaFo6IGludCkge1xyXG5cclxuICAgICAgICBjb25zdCBpbmRleCA9IChwYXRjaFggKyBwYXRjaFogKiB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1gpICogYnVmZmVySXRlbVNpemU7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWluSGVpZ2h0ID0gdGhpcy5faGVpZ2h0TWFwLmdldFBhdGNoTWluKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgICAgICBjb25zdCBwYXRjaE1heEhlaWdodCA9IHRoaXMuX2hlaWdodE1hcC5nZXRQYXRjaE1heChwYXRjaFgsIHBhdGNoWik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcGF0Y2hSYWRpdXNCeVNpemUgICA9IHRoaXMuX2hlaWdodE1hcC5wYXRjaFNpemUgLyAyO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoUmVkaXVzQnlIZWlnaHQgPSAocGF0Y2hNYXhIZWlnaHQgLSBwYXRjaE1pbkhlaWdodCkgLyAyO1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaENlbnRlclggPSAocGF0Y2hYICogdGhpcy5faGVpZ2h0TWFwLnBhdGNoU2l6ZSkgKyBwYXRjaFJhZGl1c0J5U2l6ZTtcclxuICAgICAgICBjb25zdCBwYXRjaENlbnRlclkgPSAocGF0Y2hNYXhIZWlnaHQgKyBwYXRjaE1pbkhlaWdodCkgLyAyO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoQ2VudGVyWiA9IChwYXRjaFogKiB0aGlzLl9oZWlnaHRNYXAucGF0Y2hTaXplKSArIHBhdGNoUmFkaXVzQnlTaXplO1xyXG4gICAgICAgIGNvbnN0IHJhZGl1cyAgICAgICA9IChwYXRjaFJhZGl1c0J5U2l6ZSA+IHBhdGNoUmVkaXVzQnlIZWlnaHQgPyBwYXRjaFJhZGl1c0J5U2l6ZSA6IHBhdGNoUmVkaXVzQnlIZWlnaHQpICogTWF0aC5TUVJUMjtcclxuXHJcbiAgICAgICAgLy8gV2UgY29uc3RydWN0IGNvb3JkaW5hdGVzIHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGhlaWdodCBtYXBcclxuXHJcbiAgICAgICAgdGhpcy5fbG9jYWxCdWZmZXJbaW5kZXggKyAwXSA9IHBhdGNoQ2VudGVyWCArIHRoaXMuX2hlaWdodE1hcC53aWR0aCAvIC0yO1xyXG4gICAgICAgIHRoaXMuX2xvY2FsQnVmZmVyW2luZGV4ICsgMV0gPSBwYXRjaENlbnRlclk7XHJcbiAgICAgICAgdGhpcy5fbG9jYWxCdWZmZXJbaW5kZXggKyAyXSA9IHBhdGNoQ2VudGVyWiArIHRoaXMuX2hlaWdodE1hcC5kZXB0aCAvIC0yO1xyXG4gICAgICAgIHRoaXMuX2xvY2FsQnVmZmVyW2luZGV4ICsgM10gPSByYWRpdXM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fcmVjYWxjdWxhdGVXb3JsZEJvdW5kaW5nU3BoZXJlKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZWNhbGN1bGF0ZVdvcmxkQm91bmRpbmdTcGhlcmVzKCkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBwYXRjaFogPSAwOyBwYXRjaFogPCB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1o7IHBhdGNoWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBwYXRjaFggPSAwOyBwYXRjaFggPCB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1g7IHBhdGNoWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVjYWxjdWxhdGVXb3JsZEJvdW5kaW5nU3BoZXJlKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZWNhbGN1bGF0ZVdvcmxkQm91bmRpbmdTcGhlcmUocGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwaGVyZUlkeCA9IHBhdGNoWCArIHBhdGNoWiAqIHRoaXMuX2hlaWdodE1hcC5udW1QYXRjaGVzWDtcclxuICAgICAgICBjb25zdCBidWZmZXJJZHggPSBzcGhlcmVJZHggKiBidWZmZXJJdGVtU2l6ZTtcclxuICAgICAgICBjb25zdCBsb2NSYWRpdXMgPSB0aGlzLl9sb2NhbEJ1ZmZlcltidWZmZXJJZHggKyAzXTtcclxuICAgICAgICBjb25zdCB3cmxTcGhlcmUgPSB0aGlzLl93b3JsZFNwaGVyZXNbc3BoZXJlSWR4XTtcclxuXHJcbiAgICAgICAgd3JsU3BoZXJlLmNlbnRlci5zZXQoXHJcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsQnVmZmVyW2J1ZmZlcklkeCArIDBdLFxyXG4gICAgICAgICAgICB0aGlzLl9sb2NhbEJ1ZmZlcltidWZmZXJJZHggKyAxXSxcclxuICAgICAgICAgICAgdGhpcy5fbG9jYWxCdWZmZXJbYnVmZmVySWR4ICsgMl1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB3cmxTcGhlcmUucmFkaXVzID0gTWF0aC5zcXJ0KFxyXG4gICAgICAgICAgICAodGhpcy5fc2NhbGUueCAqIGxvY1JhZGl1cykgKiogMiArXHJcbiAgICAgICAgICAgICh0aGlzLl9zY2FsZS55ICogbG9jUmFkaXVzKSAqKiAyICtcclxuICAgICAgICAgICAgKHRoaXMuX3NjYWxlLnogKiBsb2NSYWRpdXMpICoqIDJcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLl9tYXRyaXgudHJhbnNmb3JtUG9pbnQod3JsU3BoZXJlLmNlbnRlciwgd3JsU3BoZXJlLmNlbnRlcik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgdHlwZSB7IGZsb2F0LCBpbnQsIElWZWN0b3IzLCBSZWZPYmplY3QgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaExvZCB9IGZyb20gXCIuL0lQYXRjaExvZC5tanNcIjtcclxuaW1wb3J0IHsgZGVmYXVsdFBhdGNoTG9kLCBJTG9kU3RhdGUgfSBmcm9tIFwiLi9Mb2RTdGF0ZS5tanNcIjtcclxuaW1wb3J0IExvZE1hbmFnZXIgZnJvbSBcIi4vTG9kTWFuYWdlci5tanNcIjtcclxuaW1wb3J0IFBhdGNoZXNTcGhlcmVCdWZmZXIgZnJvbSBcIi4vUGF0Y2hlc1NwaGVyZUJ1ZmZlci5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJR3JpZFBhdGNoZWRMb2QgfSBmcm9tIFwiLi9HcmlkQnVpbGRlci5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJU2luZ2xlTG9kSW5mbyB9IGZyb20gXCIuL0xvZEluZm8ubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElQYXRjaGVzU3RhdGUge1xyXG4gICAgcmVhZG9ubHkgbG9kU3RhdGU6IElMb2RTdGF0ZTtcclxuICAgIGJlZm9yZVVwZGF0ZSgpOiB2b2lkO1xyXG4gICAgYWZ0ZXJVcGRhdGUoKTogdm9pZDtcclxuICAgIGluaXRQYXRjaChwYXRjaFg6IGludCwgcGF0Y2haOiBpbnQsIHNpemU6IGludCwgbWluWDogaW50LCBtaW5aOiBpbnQsIGluZm86IFJlYWRvbmx5PElTaW5nbGVMb2RJbmZvPiwgbG9kSW5mbzogUmVhZG9ubHk8SVBhdGNoTG9kPik6IHZvaWQ7XHJcbiAgICB1cGRhdGVQYXRjaChwYXRjaFg6IGludCwgcGF0Y2haOiBpbnQsIHZpc2libGU6IGJvb2xlYW4sIGluZm86IFJlYWRvbmx5PElTaW5nbGVMb2RJbmZvPiwgbG9kSW5mbzogUmVhZG9ubHk8SVBhdGNoTG9kPik6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhdGNoZXNNYW5hZ2VyIHtcclxuXHJcbiAgICBwcml2YXRlIF9ncmlkOiBJR3JpZFBhdGNoZWRMb2Q7XHJcbiAgICBwcml2YXRlIF9zcGhlcmVzOiBQYXRjaGVzU3BoZXJlQnVmZmVyO1xyXG4gICAgcHJpdmF0ZSBfbG9kTWFuYWdlcjogTG9kTWFuYWdlcjtcclxuICAgIHByaXZhdGUgX3N0YXRlczogSVBhdGNoZXNTdGF0ZVtdO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgZ3JpZCgpIHsgcmV0dXJuIHRoaXMuX2dyaWQ7IH1cclxuICAgIHB1YmxpYyBnZXQgc3BoZXJlcygpIHsgcmV0dXJuIHRoaXMuX3NwaGVyZXM7IH1cclxuICAgIHB1YmxpYyBnZXQgbG9kTWFuYWdlcigpIHsgcmV0dXJuIHRoaXMuX2xvZE1hbmFnZXI7IH1cclxuICAgIHB1YmxpYyBnZXQgc3RhdGVzKCk6IFJlYWRvbmx5PFJlYWRvbmx5PElQYXRjaGVzU3RhdGU+W10+IHsgcmV0dXJuIHRoaXMuX3N0YXRlczsgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihncmlkOiBJR3JpZFBhdGNoZWRMb2QsIHNwaGVyZXM6IFBhdGNoZXNTcGhlcmVCdWZmZXIpIHtcclxuICAgICAgICB0aGlzLl9ncmlkID0gZ3JpZDtcclxuICAgICAgICB0aGlzLl9zcGhlcmVzID0gc3BoZXJlcztcclxuICAgICAgICB0aGlzLl9sb2RNYW5hZ2VyID0gbmV3IExvZE1hbmFnZXIoZ3JpZC5sb2RFc3RpbWF0b3IpO1xyXG4gICAgICAgIHRoaXMuX3N0YXRlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoYXNTdGF0ZShzdGF0ZTogSVBhdGNoZXNTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZXMuaW5kZXhPZihzdGF0ZSkgIT09IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRTdGF0ZShzdGF0ZTogSVBhdGNoZXNTdGF0ZSkge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX2xvZE1hbmFnZXIuaGFzU3RhdGUoc3RhdGUubG9kU3RhdGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkxvZCBzdGF0ZSBoYXMgZGlmZmVyZW50IGxvZCBtYW5hZ2VyIHdpdGggcGF0Y2hlcyBtYW5hZ2VyXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fc3RhdGVzLmluZGV4T2Yoc3RhdGUpID09PSAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZXMucHVzaChzdGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9pbml0U2luZ2xlU3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVTdGF0ZShzdGF0ZTogSVBhdGNoZXNTdGF0ZSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuX3N0YXRlcy5pbmRleE9mKHN0YXRlKTtcclxuXHJcbiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdGVzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0U2luZ2xlU3RhdGUoc3RhdGU6IElQYXRjaGVzU3RhdGUpIHtcclxuXHJcbiAgICAgICAgY29uc3QgbnVtUGF0Y2hlc1ggPSB0aGlzLl9ncmlkLm51bVBhdGNoZXNYO1xyXG4gICAgICAgIGNvbnN0IG51bVBhdGNoZXNaID0gdGhpcy5fZ3JpZC5udW1QYXRjaGVzWjtcclxuICAgICAgICBjb25zdCBwYXRjaFNpemUgICA9IHRoaXMuX2dyaWQucGF0Y2hTaXplO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBwYXRjaFogPSAwOyBwYXRjaFogPCBudW1QYXRjaGVzWjsgcGF0Y2haKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHBhdGNoWCA9IDA7IHBhdGNoWCA8IG51bVBhdGNoZXNYOyBwYXRjaFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pblggPSBwYXRjaFggKiAocGF0Y2hTaXplIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5aID0gcGF0Y2haICogKHBhdGNoU2l6ZSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuX2dyaWQubG9kSW5mb1swXS5pbmZvWzBdWzBdWzBdWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIHN0YXRlLmluaXRQYXRjaChwYXRjaFgsIHBhdGNoWiwgcGF0Y2hTaXplLCBtaW5YLCBtaW5aLCBpbmZvLCBkZWZhdWx0UGF0Y2hMb2QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZnJ1c3R1bT86IHBjeC5GcnVzdHVtLCBmcnVzdHVtTWFyZ2luOiBmbG9hdCA9IDEpIHtcclxuXHJcbiAgICAgICAgY29uc3QgbnVtU3RhdGVzID0gdGhpcy5fc3RhdGVzLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBudW1QYXRjaGVzWCA9IHRoaXMuX2dyaWQubnVtUGF0Y2hlc1g7XHJcbiAgICAgICAgY29uc3QgbnVtUGF0Y2hlc1ogPSB0aGlzLl9ncmlkLm51bVBhdGNoZXNaO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVN0YXRlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlc1tpXS5iZWZvcmVVcGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IHBhdGNoWiA9IDA7IHBhdGNoWiA8IG51bVBhdGNoZXNaOyBwYXRjaForKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcGF0Y2hYID0gMDsgcGF0Y2hYIDwgbnVtUGF0Y2hlc1g7IHBhdGNoWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlzaWJsZSA9ICEhZnJ1c3R1bSAmJiB0aGlzLl9zcGhlcmVzLnBhdGNoVmlzaWJsZShwYXRjaFgsIHBhdGNoWiwgZnJ1c3R1bU1hcmdpbiwgZnJ1c3R1bSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1TdGF0ZXM7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3N0YXRlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwbG9kID0gc3RhdGUubG9kU3RhdGUuZ2V0UGF0Y2hMb2QocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSB0aGlzLl9ncmlkLmxvZEluZm9bcGxvZC5jb3JlXS5pbmZvW3Bsb2QubGVmdF1bcGxvZC5yaWdodF1bcGxvZC50b3BdW3Bsb2QuYm90dG9tXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUudXBkYXRlUGF0Y2gocGF0Y2hYLCBwYXRjaFosIHZpc2libGUsIGluZm8sIHBsb2QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVN0YXRlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlc1tpXS5hZnRlclVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlTG9kcyhsb2NhbFZpZXdQb3M6IFJlZk9iamVjdDxJVmVjdG9yMz4sIHVzZVlQb3M6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5sb2RNYW5hZ2VyLnVwZGF0ZShsb2NhbFZpZXdQb3MsIHRoaXMuX3NwaGVyZXMuaGVpZ2h0TWFwLCB1c2VZUG9zKTtcclxuICAgIH1cclxufSIsImltcG9ydCB0eXBlIHsgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJWm9uZSB9IGZyb20gXCIuL0lab25lLm1qc1wiO1xyXG5pbXBvcnQgSGVpZ2h0ZmllbGQgZnJvbSBcIi4vSGVpZ2h0ZmllbGQubWpzXCI7XHJcblxyXG5leHBvcnQgdHlwZSBURm9yRWFjaFNxdWFyZUNhbGxiYWNrID0gKGluZGV4OiBpbnQsIHg6IGludCwgejogaW50KSA9PiB2b2lkIHwgYm9vbGVhbjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNxdWFyZUl0ZXJhdG9yIHtcclxuXHJcbiAgICBwcml2YXRlIF9maWVsZDogSGVpZ2h0ZmllbGQ7XHJcblxyXG4gICAgcHVibGljIGdldCBmaWVsZCgpIHsgcmV0dXJuIHRoaXMuX2ZpZWxkOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoZmllbGQ6IEhlaWdodGZpZWxkKSB7XHJcbiAgICAgICAgdGhpcy5fZmllbGQgPSBmaWVsZDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2ZvckVhY2goem9uZTogSVpvbmUsIHNxdWFyZVNpemU6IGludCwgbnVtU3F1YXJlWDogaW50LCBudW1TcXVhcmVaOiBpbnQsIGNhbGxiYWNrOiBURm9yRWFjaFNxdWFyZUNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgIGlmICh6b25lLm1heFggPCAwKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHpvbmUubWF4WiA8IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbWluWCA9IE1hdGgubWF4KHpvbmUubWluWCwgMCk7XHJcbiAgICAgICAgY29uc3QgbWluWiA9IE1hdGgubWF4KHpvbmUubWluWiwgMCk7XHJcbiAgICAgICAgY29uc3QgbWF4WCA9IE1hdGgubWluKHpvbmUubWF4WCwgdGhpcy5maWVsZC53aWR0aCk7XHJcbiAgICAgICAgY29uc3QgbWF4WiA9IE1hdGgubWluKHpvbmUubWF4WiwgdGhpcy5maWVsZC5kZXB0aCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1pblBhdGNoWCA9IG1pblggLyBzcXVhcmVTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBtaW5QYXRjaFogPSBtaW5aIC8gc3F1YXJlU2l6ZSB8IDA7XHJcbiAgICAgICAgY29uc3QgbWF4UGF0Y2hYID0gbWF4WCAvIHNxdWFyZVNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IG1heFBhdGNoWiA9IG1heFogLyBzcXVhcmVTaXplIHwgMDtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplTWluWCA9IE1hdGgubWF4KG1pblBhdGNoWCwgMCk7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplTWluWiA9IE1hdGgubWF4KG1pblBhdGNoWiwgMCk7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplTWF4WCA9IE1hdGgubWluKG1heFBhdGNoWCArIDEsIG51bVNxdWFyZVgpO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZU1heFogPSBNYXRoLm1pbihtYXhQYXRjaFogKyAxLCBudW1TcXVhcmVaKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IG5vcm1hbGl6ZU1pblo7IHogPCBub3JtYWxpemVNYXhaOyB6KyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSBub3JtYWxpemVNaW5YOyB4IDwgbm9ybWFsaXplTWF4WDsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hJbmRleCA9IHogKiBudW1TcXVhcmVYICsgeDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2socGF0Y2hJbmRleCwgeCwgeikgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiY29uc3QgdG1wVmVjID0gbmV3IHBjLlZlYzMoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdEaXJlY3Rpb25WZWN0b3IocG9zaXRpb246IHBjeC5WZWMzLCBkaXI6IHBjeC5WZWMzLCBjb2xvciA9IHBjLkNvbG9yLlJFRCkge1xuXG4gICAgLy8gRHJhdyB0aGUgdmVjdG9yXG4gICAgY29uc3Qgc3RhcnQgPSBwb3NpdGlvbjtcbiAgICBjb25zdCBlbmQgPSB0bXBWZWMuYWRkMihwb3NpdGlvbiwgZGlyKTtcbiAgICBcbiAgICBwYy5hcHAhLmRyYXdMaW5lKHN0YXJ0LCBlbmQsIGNvbG9yLCBmYWxzZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3UG9pbnQoXG4gICAge2NlbnRlciwgcmFkaXVzID0gMC4xLCBudW1TZWdtZW50cyA9IDQsIGNvbG9yID0gcGMuQ29sb3IuUkVELCBsYXllciwgZGVwdGhUZXN0ID0gZmFsc2UgfTpcbiAgICB7Y2VudGVyOiBwY3guVmVjMywgcmFkaXVzPzogbnVtYmVyLCBudW1TZWdtZW50cz86IG51bWJlciwgY29sb3I/OiBwY3guQ29sb3IsIGRlcHRoVGVzdD86IGJvb2xlYW4sIGxheWVyPzogcGN4LkxheWVyfVxuKSB7XG4gICAgY29uc3QgYmxvY2sgID0gNiAqIDM7XG4gICAgY29uc3QgcG9pbnRzID0gbmV3IEFycmF5KG51bVNlZ21lbnRzICogYmxvY2spO1xuICAgIGNvbnN0IHN0ZXAgPSAyICogTWF0aC5QSSAvIG51bVNlZ21lbnRzO1xuXG4gICAgbGV0IGFuZ2xlID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtU2VnbWVudHM7IGkrKykge1xuXG4gICAgICAgIGNvbnN0IHNpbjAgPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgICAgIGNvbnN0IGNvczAgPSBNYXRoLmNvcyhhbmdsZSk7XG5cbiAgICAgICAgYW5nbGUgKz0gc3RlcDtcblxuICAgICAgICBjb25zdCBzaW4xID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgICAgICBjb25zdCBjb3MxID0gTWF0aC5jb3MoYW5nbGUpO1xuXG4gICAgICAgIGNvbnN0IGogPSBpICogYmxvY2s7XG5cbiAgICAgICAgcG9pbnRzW2ogKyAwXSA9IGNlbnRlci54ICsgcmFkaXVzICogc2luMDtcbiAgICAgICAgcG9pbnRzW2ogKyAxXSA9IGNlbnRlci55O1xuICAgICAgICBwb2ludHNbaiArIDJdID0gY2VudGVyLnogKyByYWRpdXMgKiBjb3MwO1xuXG4gICAgICAgIHBvaW50c1tqICsgM10gPSBjZW50ZXIueCArIHJhZGl1cyAqIHNpbjE7XG4gICAgICAgIHBvaW50c1tqICsgNF0gPSBjZW50ZXIueTtcbiAgICAgICAgcG9pbnRzW2ogKyA1XSA9IGNlbnRlci56ICsgcmFkaXVzICogY29zMTtcblxuICAgICAgICBwb2ludHNbaiArIDZdID0gY2VudGVyLng7XG4gICAgICAgIHBvaW50c1tqICsgN10gPSBjZW50ZXIueSArIHJhZGl1cyAqIHNpbjA7XG4gICAgICAgIHBvaW50c1tqICsgOF0gPSBjZW50ZXIueiArIHJhZGl1cyAqIGNvczA7XG5cbiAgICAgICAgcG9pbnRzW2ogKyA5XSAgPSBjZW50ZXIueDtcbiAgICAgICAgcG9pbnRzW2ogKyAxMF0gPSBjZW50ZXIueSArIHJhZGl1cyAqIHNpbjE7XG4gICAgICAgIHBvaW50c1tqICsgMTFdID0gY2VudGVyLnogKyByYWRpdXMgKiBjb3MxO1xuXG4gICAgICAgIHBvaW50c1tqICsgMTJdID0gY2VudGVyLnggKyByYWRpdXMgKiBjb3MwO1xuICAgICAgICBwb2ludHNbaiArIDEzXSA9IGNlbnRlci55ICsgcmFkaXVzICogc2luMDtcbiAgICAgICAgcG9pbnRzW2ogKyAxNF0gPSBjZW50ZXIuejtcblxuICAgICAgICBwb2ludHNbaiArIDE1XSA9IGNlbnRlci54ICsgcmFkaXVzICogY29zMTtcbiAgICAgICAgcG9pbnRzW2ogKyAxNl0gPSBjZW50ZXIueSArIHJhZGl1cyAqIHNpbjE7XG4gICAgICAgIHBvaW50c1tqICsgMTddID0gY2VudGVyLno7XG4gICAgfVxuXG4gICAgcGMuYXBwIS5kcmF3TGluZUFycmF5cyhwb2ludHMsIGNvbG9yLCBkZXB0aFRlc3QsIGxheWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdCb3goXG4gICAge21pbiwgbWF4LCBjb2xvciA9IHBjLkNvbG9yLlJFRCwgbGF5ZXIsIGRlcHRoVGVzdCA9IGZhbHNlfTpcbiAgICB7bWluOiBwY3guVmVjMywgbWF4OiBwY3guVmVjMywgY29sb3I/OiBwY3guQ29sb3IsIGRlcHRoVGVzdD86IGJvb2xlYW4sIGxheWVyPzogcGN4LkxheWVyfVxuKSB7XG4gICAgcGMuYXBwPy5kcmF3V2lyZUFsaWduZWRCb3gobWluLCBtYXgsIGNvbG9yLCBkZXB0aFRlc3QsIGxheWVyKTtcbn0iLCJleHBvcnQgZnVuY3Rpb24gaXNOdW1lcmljKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiAvXi0/XFxkKyQvLnRlc3QodmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFwVGl0bGVFbnVtPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oc29tZUVudW06IFQpIHtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCB2YWx1ZSBpbiBzb21lRW51bSkge1xyXG5cclxuICAgICAgICBpZiAoIXNvbWVFbnVtLmhhc093blByb3BlcnR5KHZhbHVlKSB8fFxyXG4gICAgICAgICAgICBpc051bWVyaWModmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZW51bUVudHJ5OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xyXG4gICAgICAgIGVudW1FbnRyeVt2YWx1ZV0gPSBzb21lRW51bVt2YWx1ZV07XHJcbiAgICAgICAgcmVzdWx0LnB1c2goZW51bUVudHJ5KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hcEVudW08VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+Pihzb21lRW51bTogVCkge1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG5cclxuICAgIGZvciAobGV0IHZhbHVlIGluIHNvbWVFbnVtKSB7XHJcblxyXG4gICAgICAgIGlmICghc29tZUVudW0uaGFzT3duUHJvcGVydHkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZW51bUVudHJ5OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xyXG4gICAgICAgIGVudW1FbnRyeVt2YWx1ZV0gPSBzb21lRW51bVt2YWx1ZV07XHJcbiAgICAgICAgcmVzdWx0LnB1c2goZW51bUVudHJ5KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFJhbmRvbSB7XHJcblxyXG4gICAgcHJpdmF0ZSBfdG1wOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF90aWNrOiBudW1iZXI7XHJcblxyXG4gICAgcmVhZG9ubHkgc2VlZDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNlZWQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2VlZCA9IHNlZWQ7XHJcbiAgICAgICAgdGhpcy5fdG1wICA9IHNlZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5fdG1wID0gdGhpcy5zZWVkO1xyXG4gICAgfVxyXG5cclxuICAgIG5leHQoKTogbnVtYmVyIHtcclxuICAgICAgICB0aGlzLl90bXAgPSAodGhpcy5fdG1wICogNDgyNzEpICUgMjE0NzQ4MzY0NztcclxuICAgICAgICB0aGlzLl90aWNrID0gdGhpcy5fdG1wIC8gMjE0NzQ4MzY0NztcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGljaztcclxuICAgIH1cclxuXHJcbiAgICBuZXh0RmxvYXQobWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KCkgKiAobWF4IC0gbWluKSArIG1pbjtcclxuICAgIH1cclxuXHJcbiAgICBuZXh0SW50KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dEZsb2F0KG1pbiwgbWF4KSB8IDA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJhbmRvbSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5leHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBucmFuZCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5leHRGbG9hdCgtMSwgMSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdyYXNzRmllbGRUZXh0dXJlIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1BWF9DSEFORUwgPSA4O1xyXG5cclxuICAgIHByaXZhdGUgX3RleHR1cmU6IHBjeC5UZXh0dXJlO1xyXG4gICAgcHJpdmF0ZSBfYnVmZmVyOiBVaW50OEFycmF5O1xyXG4gICAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX2RlcHRoOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGdldCB0ZXh0dXJlKCkgeyByZXR1cm4gdGhpcy5fdGV4dHVyZTsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIHdpZHRoOiBudW1iZXIsIGRlcHRoOiBudW1iZXIsIGJ1ZmZlcj86IFVpbnQ4QXJyYXkpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLl9kZXB0aCA9IGRlcHRoO1xyXG5cclxuICAgICAgICBjb25zdCB3ID0gKHdpZHRoIC0gMSkgLyA0ICsgMTtcclxuICAgICAgICBjb25zdCBkID0gKGRlcHRoIC0gMSkgLyA0ICsgMTtcclxuXHJcbiAgICAgICAgdGhpcy5fYnVmZmVyID0gYnVmZmVyID8/IG5ldyBVaW50OEFycmF5KHcgKiBkICogNCk7IC8vID0+IDEgYnl0ZSA9IDggYml0cyA9PiA4IC8gMiA9IDQgYml0IGZvciA4IGxldmVsc1xyXG4gICAgICAgIHRoaXMuX3RleHR1cmUgPSBuZXcgcGMuVGV4dHVyZShncmFwaGljc0RldmljZSwge1xyXG4gICAgICAgICAgICB3aWR0aDogdyxcclxuICAgICAgICAgICAgaGVpZ2h0OiBkLFxyXG4gICAgICAgICAgICBmb3JtYXQ6IHBjLlBJWEVMRk9STUFUX1JHQkE4VSxcclxuICAgICAgICAgICAgbWlwbWFwczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1pbkZpbHRlcjogcGMuRklMVEVSX05FQVJFU1QsXHJcbiAgICAgICAgICAgIG1hZ0ZpbHRlcjogcGMuRklMVEVSX05FQVJFU1QsXHJcbiAgICAgICAgICAgIGFkZHJlc3NVOiBwYy5BRERSRVNTX0NMQU1QX1RPX0VER0UsXHJcbiAgICAgICAgICAgIGFkZHJlc3NWOiBwYy5BRERSRVNTX0NMQU1QX1RPX0VER0UsXHJcbiAgICAgICAgICAgIGZsaXBZOiBncmFwaGljc0RldmljZS5pc1dlYkdQVSxcclxuICAgICAgICAgICAgbGV2ZWxzOiBbdGhpcy5fYnVmZmVyXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuX3RleHR1cmU/LmRlc3Ryb3koKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Q2hhbm5lbCh4OiBpbnQsIHo6IGludCwgY2hhbm5lbDogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSAoeCArIHogKiB0aGlzLl93aWR0aCkgLyA0IHwgMDtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuX2J1ZmZlcltpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFBpeGVsKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fdGV4dHVyZSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5fdGV4dHVyZS5kZXZpY2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFDaHVua1NpemUgPSAxO1xyXG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheSg0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZXZpY2UuaXNXZWJHTDIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBnbCA9IChkZXZpY2UgYXMgcGN4LldlYmdsR3JhcGhpY3NEZXZpY2UpLmdsO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZUZvcm1hdCA9IHRoaXMuX3RleHR1cmUuaW1wbC5fZ2xGb3JtYXQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlUGl4ZWxUID0gdGhpcy5fdGV4dHVyZS5pbXBsLl9nbFBpeGVsVHlwZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmVUYXJnZXQgPSB0aGlzLl90ZXh0dXJlLmltcGwuX2dsVGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZU9iamVjdCA9IHRoaXMuX3RleHR1cmUuaW1wbC5fZ2xUZXh0dXJlO1xyXG5cclxuICAgICAgICAgICAgICAgIGdsLmJpbmRUZXh0dXJlKHRleHR1cmVUYXJnZXQsIHRleHR1cmVPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgZ2wudGV4U3ViSW1hZ2UzRChnbC5URVhUVVJFXzJEX0FSUkFZLCAwLCAwLCAwLCAwLCBkYXRhQ2h1bmtTaXplLCBkYXRhQ2h1bmtTaXplLCAxLCB0ZXh0dXJlRm9ybWF0LCB0ZXh0dXJlUGl4ZWxULCBidWZmZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRldmljZS5pc1dlYkdQVSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHdlYmdwdSAgPSAoZGV2aWNlIGFzIGFueSkud2dwdSBhcyBHUFVEZXZpY2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gKHRoaXMuX3RleHR1cmUuaW1wbC5ncHVUZXh0dXJlKSBhcyBHUFVUZXh0dXJlO1xyXG5cclxuICAgICAgICAgICAgICAgIHdlYmdwdS5xdWV1ZS53cml0ZVRleHR1cmUoXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlOiB0ZXh0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFswLCAwLCAwXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWlwTGV2ZWw6IDBcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcixcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXNQZXJSb3c6IDQgKiBkYXRhQ2h1bmtTaXplLCAvLyBhbHdheXMgNCBmb3IgcmdiYSBmb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93c1BlckltYWdlOiBkYXRhQ2h1bmtTaXplXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBkYXRhQ2h1bmtTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGRhdGFDaHVua1NpemVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVEhlaWdodE1hcEZvcm1hdCB9IGZyb20gXCIuLi9Db3JlL0Fic0hlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IHsgbGl0dGxlRW5kaWFuIH0gZnJvbSBcIi4uL0V4dHJhcy9VdGlscy5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCB2ZXJ0ZXhDb29yZEF0dHJOYW1lICAgPSBcInZlcnRleF9wb3NpdGlvblwiO1xyXG5leHBvcnQgY29uc3QgdmVydGV4SGVpZ2h0QXR0ck5hbWUgID0gXCJ2ZXJ0ZXhfaGVpZ2h0XCI7XHJcbmV4cG9ydCBjb25zdCB2ZXJ0ZXhOb3JtYWxBdHRyTmFtZSAgPSBcInZlcnRleF9ub3JtYWxcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXRjaEluc3RDb29yZE9mZnNldEF0dHJOYW1lID0gXCJ2ZXJ0ZXhfcG9zdGlvbl9vZmZzZXRcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXRjaENvb3JkT2Zmc2V0UGFyYW1OYW1lICAgICA9IFwidVBhdGNoQ29vcmRPZmZzZXRcIjtcclxuZXhwb3J0IGNvbnN0IHBhdGNoTG9kQ29yZVBhcmFtTmFtZSAgICAgICAgID0gXCJ1UGF0Y2hMb2RDb3JlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgaGVpZ2h0TWFwUGFyYW1OYW1lID0gXCJ1SGVpZ2h0TWFwXCI7XHJcbmV4cG9ydCBjb25zdCBtYXhIZWlnaHRQYXJhbU5hbWUgPSBcInVNYXhIZWlnaHRcIjtcclxuZXhwb3J0IGNvbnN0IHNwbGF0TWFwUGFyYW1OYW1lICA9IFwidVNwbGF0TWFwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY2FtZXJhUG9zaXRpb25QYXJhbU5hbWUgPSBcInVDYW1lcmFQb3NcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBsaXR0bGVFbmRpYW5WYWx1ZSA9IGxpdHRsZUVuZGlhbiA/ICd0cnVlJyA6ICdmYWxzZSc7XHJcblxyXG5leHBvcnQgY29uc3QgZGVmaW5lc1ZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgI2RlZmluZSBITV9OVU1fQ0hVTktTX1ggICAgICAgICglJUhNX05VTV9DSFVOS1NfWCUlKVxyXG4gICAgI2RlZmluZSBITV9OVU1fQ0hVTktTX1hfVSAgICAgICh1aW50KEhNX05VTV9DSFVOS1NfWCkpXHJcbiAgICAjZGVmaW5lIEhNX0NIVU5LX1NJWkUgICAgICAgICAgKCUlSE1fQ0hVTktfU0laRSUlKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFX1UgICAgICAgICh1aW50KEhNX0NIVU5LX1NJWkUpKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFX00xX1UgICAgIChITV9DSFVOS19TSVpFX1UgLSAxdSlcclxuICAgICNkZWZpbmUgSE1fQ0hVTktfU0laRV9GICAgICAgICAoZmxvYXQoSE1fQ0hVTktfU0laRSkpXHJcbiAgICAjZGVmaW5lIEZJRUxEX1NJWkUgICAgICAgICAgICAgKGl2ZWMyKCUlRklFTERfU0laRV9YJSUsICUlRklFTERfU0laRV9aJSUpKVxyXG4gICAgI2RlZmluZSBGSUVMRF9TSVpFX0YgICAgICAgICAgICh2ZWMyKCUlRklFTERfU0laRV9YX0YlJSwgJSVGSUVMRF9TSVpFX1pfRiUlKSlcclxuICAgICNkZWZpbmUgRklFTERfU0laRV9VICAgICAgICAgICAodXZlYzIoRklFTERfU0laRSkpXHJcbiAgICAjZGVmaW5lIEZJRUxEX1NJWkVfSF9GICAgICAgICAgKEZJRUxEX1NJWkVfRiAvIDIuMClcclxuICAgICNkZWZpbmUgRklFTERfU0laRV9IX05fRiAgICAgICAoLUZJRUxEX1NJWkVfSF9GKVxyXG4gICAgI2RlZmluZSBGSUVMRF9QQVRDSF9TSVpFX1ggICAgICglJUZJRUxEX1BBVENIX1NJWkVfWCUlKVxyXG4gICAgI2RlZmluZSBGSUVMRF9QQVRDSF9TSVpFX00xICAgIChGSUVMRF9QQVRDSF9TSVpFX1ggLSAxLjApXHJcbiAgICAjZGVmaW5lIEZJRUxEX1BBVENIX1NJWkVfTTFfSCAgKEZJRUxEX1BBVENIX1NJWkVfTTEgLyAyLjApXHJcbiAgICAjZGVmaW5lIEZJRUxEX1BBVENIX1NJWkVfTTFfRiAgKHZlYzIoRklFTERfUEFUQ0hfU0laRV9NMV9ILCBGSUVMRF9QQVRDSF9TSVpFX00xX0gpKVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJhc2VPcmlnaW5hbFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdW5pZm9ybSB2ZWMyICR7cGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZX07XHJcblxyXG4gICAgYXR0cmlidXRlIHV2ZWMyICR7dmVydGV4Q29vcmRBdHRyTmFtZX07XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZUZvckluc3RhbmNpbmdWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIGF0dHJpYnV0ZSB1dmVjMiAke3ZlcnRleENvb3JkQXR0ck5hbWV9O1xyXG4gICAgYXR0cmlidXRlIHV2ZWMyICR7cGF0Y2hJbnN0Q29vcmRPZmZzZXRBdHRyTmFtZX07XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZUZvckNvbWJpbmVJbnN0YW5jaW5nVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICBhdHRyaWJ1dGUgdXZlYzIgJHt2ZXJ0ZXhDb29yZEF0dHJOYW1lfTtcclxuICAgIGF0dHJpYnV0ZSB1dmVjNCAke3BhdGNoSW5zdENvb3JkT2Zmc2V0QXR0ck5hbWV9O1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGhlaWdodE1hcFNhbXBsZXIgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB1bmlmb3JtIGhpZ2hwICUlSEVJR0hUX01BUF9TQU1QTEVSJSUgJHtoZWlnaHRNYXBQYXJhbU5hbWV9O1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJhc2VDbGVhclZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdW5pZm9ybSBtYXQ0IG1hdHJpeF92aWV3UHJvamVjdGlvbjtcclxuICAgIHVuaWZvcm0gbWF0NCBtYXRyaXhfbW9kZWw7XHJcbiAgICB1bmlmb3JtIG1hdDMgbWF0cml4X25vcm1hbDtcclxuXHJcbiAgICB1bmlmb3JtIHZlYzMgJHtjYW1lcmFQb3NpdGlvblBhcmFtTmFtZX07XHJcbiAgICBcclxuICAgIHVuaWZvcm0gZmxvYXQgJHttYXhIZWlnaHRQYXJhbU5hbWV9O1xyXG4gICAgdW5pZm9ybSBmbG9hdCAke3BhdGNoTG9kQ29yZVBhcmFtTmFtZX07XHJcblxyXG4gICAgdmVjMiBkQ3VycmVudEZpZWxkWFo7XHJcbiAgICBmbG9hdCBkQ3VycmVudEZpZWxkSGVpZ2h0O1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJhc2VDbGVhclN1YlZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdmVjMyBkUG9zaXRpb25XO1xyXG4gICAgbWF0NCBkTW9kZWxNYXRyaXg7XHJcbiAgICBtYXQzIGROb3JtYWxNYXRyaXg7XHJcblxyXG4gICAgdmVjMyBkQ3VycmVudEZpZWxkTm9ybWFsO1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGN1cnJlbnRGaWVsZFhaQ2h1bmtWUyA9IFxyXG5gXHJcbiAgICB2ZWMyIGdldEN1cnJlbnRGaWVsZFhaKCkge1xyXG4gICAgICAgIHJldHVybiB2ZWMyKCR7dmVydGV4Q29vcmRBdHRyTmFtZX0pICsgJHtwYXRjaENvb3JkT2Zmc2V0UGFyYW1OYW1lfTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBjdXJyZW50RmllbGRYWkZvckluc3RhbmNpbmdDaHVua1ZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdmVjMiBnZXRDdXJyZW50RmllbGRYWigpIHtcclxuICAgICAgICByZXR1cm4gdmVjMigke3ZlcnRleENvb3JkQXR0ck5hbWV9ICsgJHtwYXRjaEluc3RDb29yZE9mZnNldEF0dHJOYW1lfSk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgY3VycmVudEZpZWxkWFpGb3JDb21iaW5lSW5zdGFuY2luZ0NodW5rVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICBjb25zdCB2ZWM0IHJvdGF0ZVBhdGNoWFpDb2ZmWzRdID0gdmVjNFs0XShcclxuICAgICAgICB2ZWM0KCAxLjAsICAwLjAsICAwLjAsICAxLjApLFxyXG4gICAgICAgIHZlYzQoIDAuMCwgIDEuMCwgLTEuMCwgIDAuMCksXHJcbiAgICAgICAgdmVjNCgtMS4wLCAgMC4wLCAgMC4wLCAtMS4wKSxcclxuICAgICAgICB2ZWM0KCAwLjAsIC0xLjAsICAxLjAsICAwLjApXHJcbiAgICApO1xyXG5cclxuICAgIHZlYzIgcm90YXRlUGF0Y2hYWih2ZWMyIGNvb3JkLCB1aW50IGFuZ2xlKSB7XHJcbiAgICAgICAgdmVjMiBvZmZzZXQgPSBjb29yZCAtIEZJRUxEX1BBVENIX1NJWkVfTTFfSDtcclxuICAgICAgICB2ZWM0IHRyYW5zZiA9IHJvdGF0ZVBhdGNoWFpDb2ZmW2FuZ2xlXTtcclxuICAgICAgICByZXR1cm4gRklFTERfUEFUQ0hfU0laRV9NMV9IICsgb2Zmc2V0Lnh4ICogdHJhbnNmLnh6ICsgb2Zmc2V0Lnl5ICogdHJhbnNmLnl3O1xyXG4gICAgfVxyXG5cclxuICAgIHZlYzIgZ2V0Q3VycmVudEZpZWxkWFooKSB7XHJcbiAgICAgICAgdWludCBhbmdsZSA9ICR7cGF0Y2hJbnN0Q29vcmRPZmZzZXRBdHRyTmFtZX0uejtcclxuICAgICAgICB2ZWMyIG9yZ1haID0gdmVjMigke3ZlcnRleENvb3JkQXR0ck5hbWV9KTtcclxuICAgICAgICB2ZWMyIHJvdFhaID0gcm90YXRlUGF0Y2hYWihvcmdYWiwgYW5nbGUpO1xyXG4gICAgICAgIHJldHVybiByb3RYWiArIHZlYzIoJHtwYXRjaEluc3RDb29yZE9mZnNldEF0dHJOYW1lfS54eSkgKiBGSUVMRF9QQVRDSF9TSVpFX00xO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZpZWxkQ29vcmRzQ2h1bmtWUyA9XHJcbmBcclxuICAgIHZlYzIgZ2V0Q3VycmVudEZpZWxkVXZDb29yZCgpIHtcclxuICAgICAgICB2ZWMyIHh6ID0gZEN1cnJlbnRGaWVsZFhaO1xyXG4gICAgICAgIHZlYzIgdXYgPSAoeHogKyAwLjUpIC8gRklFTERfU0laRV9GO1xyXG4gICAgICAgIHJldHVybiB1djtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdXZlYzIgY2xhbXBGaWVsZFhaKHZlYzIgeHopIHtcclxuICAgICAgICByZXR1cm4gdXZlYzIoY2xhbXAoeHosIHZlYzIoMC4wKSwgRklFTERfU0laRV9GKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZlYzIgZ2V0RmllbGRYWihpdmVjMiBvZmZzZXQpIHtcclxuICAgICAgICByZXR1cm4gZEN1cnJlbnRGaWVsZFhaICsgdmVjMihvZmZzZXQpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZpZWxkSGVpZ2h0RmFjdG9yUjMyRlZTID0gXHJcbmBcclxuICAgIGZsb2F0IGdldEZpZWxkSGVpZ2h0RmFjdG9yRnJvbVRleHR1cmUodXZlYzMgY29vcmQpIHtcclxuICAgICAgICByZXR1cm4gdGV4ZWxGZXRjaCgke2hlaWdodE1hcFBhcmFtTmFtZX0sIGl2ZWMzKGNvb3JkKSwgMCkucjtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzYzODI3ODM2L2lzLWl0LXBvc3NpYmxlLXRvLWRvLWEtcmdiYS10by1mbG9hdC1hbmQtYmFjay1yb3VuZC10cmlwLWFuZC1yZWFkLXRoZS1waXhlbHMtaW5cclxuLy8gbm90ZTogdGhlIDAuMXMgaGVyZSBhbiB0aGVyZSBhcmUgdm9vZG9vIHJlbGF0ZWQgdG8gcHJlY2lzaW9uXHJcbi8qXHJcbiAgICBmbG9hdCByZ2JhOHVUb0Zsb2F0MCh1dmVjNCB2KSB7XHJcbiAgICAgICAgdmVjNCBiaXRzICA9IHZlYzQoJHtsaXR0bGVFbmRpYW4gPyAndicgOiAndi5hYmdyJ30pO1xyXG4gICAgICAgIGZsb2F0IHNpZ24gPSBtaXgoLTEuMCwgMS4wLCBzdGVwKGJpdHNbM10sIDEyOC4wKSk7XHJcbiAgICAgICAgZmxvYXQgZXhwbyA9IGZsb29yKG1vZChiaXRzWzNdICsgMC4xLCAxMjguMCkpICogMi4wICsgZmxvb3IoKGJpdHNbMl0gKyAwLjEpIC8gMTI4LjApIC0gMTI3LjA7XHJcbiAgICAgICAgZmxvYXQgc2lnICA9IGJpdHNbMF0gKyBiaXRzWzFdICogMjU2LjAgKyBmbG9vcihtb2QoYml0c1syXSArIDAuMSwgMTI4LjApKSAqIDI1Ni4wICogMjU2LjA7XHJcbiAgICAgICAgcmV0dXJuIHNpZ24gKiAoMS4wICsgc2lnIC8gODM4ODYwNy4wKSAqIHBvdygyLjAsIGV4cG8pO1xyXG4gICAgfVxyXG4qL1xyXG5cclxuZXhwb3J0IGNvbnN0IGZpZWxkSGVpZ2h0RmFjdG9yUkdCQThVVlMgPVxyXG5gXHJcbiAgICBmbG9hdCByZ2JhOHVUb0Zsb2F0KHV2ZWM0IHYpIHtcclxuICAgICAgICB1dmVjNCBiaXRzID0gJHtsaXR0bGVFbmRpYW4gPyAndicgOiAndi5hYmdyJ307XHJcbiAgICAgICAgZmxvYXQgc2lnbiA9IDIuMCAqIHN0ZXAoZmxvYXQoYml0c1szXSksIDEyOC4wKSAtIDEuMDtcclxuICAgICAgICBmbG9hdCBleHBvID0gZmxvYXQoKGJpdHNbM10gJiAxMjd1KSAqIDJ1ICsgYml0c1syXSAvIDEyOHUpIC0gMTI3LjA7XHJcbiAgICAgICAgZmxvYXQgc2lnICA9IGZsb2F0KGJpdHNbMF0gKyBiaXRzWzFdICogMjU2dSArIChiaXRzWzJdICYgMTI3dSkgKiA2NTUzNnUpO1xyXG4gICAgICAgIHJldHVybiBzaWduICogKDEuMCArIHNpZyAvIDgzODg2MDcuMCkgKiBwb3coMi4wLCBleHBvKTtcclxuICAgIH1cclxuXHJcbiAgICBmbG9hdCBnZXRGaWVsZEhlaWdodEZhY3RvckZyb21UZXh0dXJlKHV2ZWMzIGNvb3JkKSB7XHJcbiAgICAgICAgdXZlYzQgcmdiYSA9IHRleGVsRmV0Y2goJHtoZWlnaHRNYXBQYXJhbU5hbWV9LCBpdmVjMyhjb29yZCksIDApO1xyXG4gICAgICAgIHJldHVybiByZ2JhOHVUb0Zsb2F0KHJnYmEpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuLy8gQ29tcHJlc3MgaGVpZ2h0IGJ5IHggY29vcmQgW3BhdGNoMCwgcGF0Y2gxXSAuLi5cclxuLy8gc2VlOiBDb21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcCBmaWxlXHJcbmV4cG9ydCBjb25zdCBmaWVsZEhlaWdodEZhY3RvclJHMTZVWDJWUyA9XHJcbmBcclxuICAgIGZsb2F0IGdldEZpZWxkSGVpZ2h0RmFjdG9yRnJvbVRleHR1cmUodXZlYzMgY29vcmQpIHtcclxuXHJcbiAgICAgICAgdWludCBsZXZlbCAgICA9IGNvb3JkLmI7XHJcbiAgICAgICAgdWludCBuZXdMZXZlbCA9IGxldmVsIC8gMnU7XHJcbiAgICAgICAgdWludCBzaGlmdCAgICA9IGxldmVsICYgMXU7XHJcblxyXG4gICAgICAgIHV2ZWM0IHJnYmEgPSB0ZXhlbEZldGNoKCR7aGVpZ2h0TWFwUGFyYW1OYW1lfSwgaXZlYzMoY29vcmQueHksIG5ld0xldmVsKSwgMCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmbG9hdChyZ2JhW3NoaWZ0XSkgLyA2NTUzNS4wO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuLy8gQ29tcHJlc3MgaGVpZ2h0IGJ5IHggY29vcmQgW3BhdGNoMCwgcGF0Y2gxLCBwYXRjaDIsIHBhdGNoM10gLi4uXHJcbi8vIHNlZTogQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXAgZmlsZVxyXG5leHBvcnQgY29uc3QgZmllbGRIZWlnaHRGYWN0b3JSR0JBOFVYNFZTID1cclxuYFxyXG4gICAgZmxvYXQgZ2V0RmllbGRIZWlnaHRGYWN0b3JGcm9tVGV4dHVyZSh1dmVjMyBjb29yZCkge1xyXG5cclxuICAgICAgICB1aW50IGxldmVsICAgID0gY29vcmQuYjtcclxuICAgICAgICB1aW50IG5ld0xldmVsID0gbGV2ZWwgLyA0dTtcclxuICAgICAgICB1aW50IHNoaWZ0ICAgID0gbGV2ZWwgJiAzdTtcclxuXHJcbiAgICAgICAgdXZlYzQgcmdiYSA9IHRleGVsRmV0Y2goJHtoZWlnaHRNYXBQYXJhbU5hbWV9LCBpdmVjMyhjb29yZC54eSwgbmV3TGV2ZWwpLCAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZsb2F0KHJnYmFbc2hpZnRdKSAvIDI1NS4wO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZpZWxkQ2h1bmtCdWZmZXJDb29yZFZTID1cclxuYFxyXG4gICAgdXZlYzMgZ2V0RmllbGRDaHVua0J1ZmZlckNvb3JkKHV2ZWMyIHh6KSB7XHJcblxyXG4gICAgICAgIHV2ZWMyIGNrID0geHogLyBITV9DSFVOS19TSVpFX1U7XHJcblxyXG4gICAgICAgIHVpbnQgbG9jYWxYID0geHpbMF0gJSBITV9DSFVOS19TSVpFX1U7XHJcbiAgICAgICAgdWludCBsb2NhbFogPSB4elsxXSAlIEhNX0NIVU5LX1NJWkVfVTtcclxuICAgICAgICB1aW50IGxldmVsICA9IGNrWzFdICogSE1fTlVNX0NIVU5LU19YX1UgKyBja1swXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHV2ZWMzKGxvY2FsWCwgbG9jYWxaLCBsZXZlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXZlYzMgZ2V0RmllbGRDaHVua0J1ZmZlclJlbGF0aXZlQ29vcmQoaXZlYzIgb2Zmc2V0KSB7XHJcbiAgICAgICAgdmVjMiAgb2MgPSBnZXRGaWVsZFhaKG9mZnNldCk7XHJcbiAgICAgICAgdXZlYzIgeHogPSBjbGFtcEZpZWxkWFoob2MpO1xyXG4gICAgICAgIHJldHVybiBnZXRGaWVsZENodW5rQnVmZmVyQ29vcmQoeHopO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZpZWxkSGVpZ2h0RmFjdG9yQ2h1bmtWUyA9IFxyXG5gXHJcbiAgICBmbG9hdCBnZXRGaWVsZEhlaWdodEZhY3RvcihpdmVjMiBvZmZzZXQpIHtcclxuICAgICAgICB1dmVjMyBjb29yZCA9IGdldEZpZWxkQ2h1bmtCdWZmZXJSZWxhdGl2ZUNvb3JkKG9mZnNldCk7XHJcbiAgICAgICAgcmV0dXJuIGdldEZpZWxkSGVpZ2h0RmFjdG9yRnJvbVRleHR1cmUoY29vcmQpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZpZWxkSGVpZ2h0Q2h1bmtWUyA9XHJcbmBcclxuICAgIGZsb2F0IGdldEZpZWxkSGVpZ2h0KGl2ZWMyIG9mZnNldCkge1xyXG4gICAgICAgIHJldHVybiBnZXRGaWVsZEhlaWdodEZhY3RvcihvZmZzZXQpICogJHttYXhIZWlnaHRQYXJhbU5hbWV9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmbG9hdCBnZXRDdXJyZW50RmllbGRIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldEZpZWxkSGVpZ2h0KGl2ZWMyKDAsIDApKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnN0YW5jaW5nVlMgPSBgYDtcclxuZXhwb3J0IGNvbnN0IHRyYW5zZm9ybUluc3RhbmNpbmdWUyA9IGBgO1xyXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtRGVjbFZTID0gYGA7XHJcblxyXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiNpZiBkZWZpbmVkKFNIQURPV19QQVNTKVxyXG4jZWxzZVxyXG4gICAgdmFyeWluZyBmbG9hdCB2UGF0Y2hMb2Q7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2Q29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdkZpZWxkUG9zaXRpb247XHJcblxyXG4gICAgdmFyeWluZyBmbG9hdCB2Q2xvc2VNYXNrO1xyXG4gICAgdmFyeWluZyBmbG9hdCB2TWlkZGxlTWFzaztcclxuI2VuZGlmXHJcblxyXG4gICAgbWF0NCBnZXRNb2RlbE1hdHJpeCgpIHtcclxuICAgICAgICByZXR1cm4gbWF0cml4X21vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIHZlYzMgZ2V0V29ybGRQb3NpdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gZFBvc2l0aW9uVztcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmVjNCBnZXRQb3NpdGlvbigpIHtcclxuXHJcbiAgICAgICAgZE1vZGVsTWF0cml4ID0gZ2V0TW9kZWxNYXRyaXgoKTtcclxuICAgICAgICBkQ3VycmVudEZpZWxkWFogPSBnZXRDdXJyZW50RmllbGRYWigpO1xyXG4gICAgICAgIGRDdXJyZW50RmllbGRIZWlnaHQgPSBnZXRDdXJyZW50RmllbGRIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgdmVjMiBjZW50ZXJlZFhaID0gRklFTERfU0laRV9IX05fRiArIGRDdXJyZW50RmllbGRYWjtcclxuICAgICAgICB2ZWM0IGxvY2FsUG9zICAgPSB2ZWM0KGNlbnRlcmVkWFouciwgZEN1cnJlbnRGaWVsZEhlaWdodCwgY2VudGVyZWRYWi5nLCAxLjApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZlYzQgcG9zVyAgICAgID0gZE1vZGVsTWF0cml4ICogbG9jYWxQb3M7XHJcbiAgICAgICAgdmVjNCBzY3JlZW5Qb3MgPSBtYXRyaXhfdmlld1Byb2plY3Rpb24gKiBwb3NXO1xyXG5cclxuICAgICAgICBkUG9zaXRpb25XID0gcG9zVy54eXo7XHJcblxyXG4jaWYgZGVmaW5lZChTSEFET1dfUEFTUylcclxuI2Vsc2VcclxuICAgICAgICBmbG9hdCBkaXMgPSBsZW5ndGgoJHtjYW1lcmFQb3NpdGlvblBhcmFtTmFtZX0gLSBkUG9zaXRpb25XKTtcclxuXHJcbiAgICAgICAgdk1pZGRsZU1hc2sgPSBzbW9vdGhzdGVwKDYwMC4wICsgMTAwLjAsIDYwMC4wLCBkaXMpO1xyXG4gICAgICAgIHZDbG9zZU1hc2sgID0gc21vb3Roc3RlcCgyMDAuMCArIDUwLjAsIDIwMC4wLCBkaXMpO1xyXG5cclxuICAgICAgICB2RmllbGRQb3NpdGlvbiA9IGRDdXJyZW50RmllbGRYWjtcclxuICAgICAgICB2VXZDb29yZCAgICAgICA9IGdldEN1cnJlbnRGaWVsZFV2Q29vcmQoKTtcclxuICAgICAgICB2UGF0Y2hMb2QgICAgICA9ICR7cGF0Y2hMb2RDb3JlUGFyYW1OYW1lfTtcclxuI2VuZGlmXHJcblxyXG4gICAgICAgIHJldHVybiBzY3JlZW5Qb3M7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgdXYwVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbmA7XHJcblxyXG4vLyBGSVg6IGJ1ZyB3aXRoIGdldFV2MCBmb3IgVjEgRW5naW5lXHJcbmV4cG9ydCBjb25zdCBzdGFydFV2MFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdmVjMiBnZXRVdjAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlYzIoMC4wKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBub3JtYWxCeUhlaWdodE1hcFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdmVjMyBnZXRDdXJyZW50RmllbGROb3JtYWwoKSB7XHJcblxyXG4gICAgICAgIGZsb2F0IHN0ZXAgID0gcG93KDIuMCwgJHtwYXRjaExvZENvcmVQYXJhbU5hbWV9ICsgMS4wKSAvIDIuMDtcclxuICAgICAgICBmbG9hdCBsZWZ0ICA9IGdldEZpZWxkSGVpZ2h0RmFjdG9yKGl2ZWMyKCBzdGVwLCAgMCkpO1xyXG4gICAgICAgIGZsb2F0IHJpZ2h0ID0gZ2V0RmllbGRIZWlnaHRGYWN0b3IoaXZlYzIoLXN0ZXAsICAwKSk7XHJcbiAgICAgICAgZmxvYXQgdXAgICAgPSBnZXRGaWVsZEhlaWdodEZhY3RvcihpdmVjMiggMCwgICAgIHN0ZXApKTtcclxuICAgICAgICBmbG9hdCBkb3duICA9IGdldEZpZWxkSGVpZ2h0RmFjdG9yKGl2ZWMyKCAwLCAgICAtc3RlcCkpO1xyXG5cclxuICAgICAgICB2ZWMzIG5vcm1hbCA9IHZlYzMobGVmdCwgc3RlcCAqIDAuMDIsIGRvd24pIC0gdmVjMyhyaWdodCwgMCwgdXApO1xyXG5cclxuICAgICAgICByZXR1cm4gbm9ybWFsaXplKG5vcm1hbCk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3Qgbm9ybWFsVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGdldE5vcm1hbCgpIHtcclxuICAgICAgICBkTm9ybWFsTWF0cml4ID0gbWF0cml4X25vcm1hbDtcclxuICAgICAgICByZXR1cm4gbm9ybWFsaXplKGROb3JtYWxNYXRyaXggKiBkQ3VycmVudEZpZWxkTm9ybWFsKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBub3JtYWxDb3JlVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICAvLyBGSVg6IHZlcnRleF9ub3JtYWwgdW5kZWNsYXJhdGlvblxyXG4gICAgdmVjMyB2ZXJ0ZXhfbm9ybWFsO1xyXG4gICAgdmVjMyBkQ3VycmVudEZpZWxkTm9ybWFsO1xyXG5cclxuICAgIHZlYzMgZ2V0TG9jYWxOb3JtYWwodmVjMyB2ZXJ0ZXhOb3JtYWwpIHtcclxuXHJcbiAgICAgICAgZEN1cnJlbnRGaWVsZE5vcm1hbCA9IGdldEN1cnJlbnRGaWVsZE5vcm1hbCgpO1xyXG4gICAgICAgIHZlcnRleF9ub3JtYWwgPSBkQ3VycmVudEZpZWxkTm9ybWFsO1xyXG5cclxuICAgICAgICByZXR1cm4gZEN1cnJlbnRGaWVsZE5vcm1hbDtcclxuICAgIH1cclxuXHJcbiAgICBtYXQzIGdldE5vcm1hbE1hdHJpeChtYXQ0IG1vZGVsTWF0cml4KSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeF9ub3JtYWw7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3Qgc3RhcnRWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcblxyXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcclxuXHJcbiAgICAjaWYgZGVmaW5lZChTSEFET1dfUEFTUylcclxuICAgICNlbHNlXHJcbiAgICAgICAgZEN1cnJlbnRGaWVsZE5vcm1hbCA9IGdldEN1cnJlbnRGaWVsZE5vcm1hbCgpO1xyXG4gICAgI2VuZGlmXHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgZ2FtbWFOb3JtYWxpemVIZWFkZXJQUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICNkZWZpbmUgR0FNTUFfTk9STUFMSVpFXHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgZ2FtbWFOb3JtYWxpemVDaHVua1BTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdmVjMyBhdXRvR2FtbWFDb3JyZWN0SW5wdXQodmVjMyB2KSB7XHJcbiAgICAgICAgI2lmIGRlZmluZWQoR0FNTUFfTk9STUFMSVpFKVxyXG4gICAgICAgICAgICByZXR1cm4gZ2FtbWFDb3JyZWN0SW5wdXQodik7XHJcbiAgICAgICAgI2Vsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgI2VuZGlmXHJcbiAgICB9XHJcblxyXG4gICAgdmVjNCBhdXRvR2FtbWFDb3JyZWN0SW5wdXQodmVjNCB2KSB7XHJcbiAgICAgICAgI2lmIGRlZmluZWQoR0FNTUFfTk9STUFMSVpFKVxyXG4gICAgICAgICAgICByZXR1cm4gZ2FtbWFDb3JyZWN0SW5wdXQodik7XHJcbiAgICAgICAgI2Vsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgI2VuZGlmXHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgbWF4TGF5ZXJzQ291bnQgPSA1OyAvLyBEZWZhdWx0ICsgUiArIEcgKyBCICsgQVxyXG5leHBvcnQgY29uc3QgbGF5ZXJzRGlmZnVzZVBhcmFtTmFtZSA9IFwidUxheWVyc0RpZmZ1c2VcIjtcclxuZXhwb3J0IGNvbnN0IGxheWVyc05vcm1hbHNQYXJhbU5hbWUgPSBcInVMYXllcnNOb3JtYWxzXCI7XHJcbmV4cG9ydCBjb25zdCBsYXllcnNGbGFnc1BhcmFtTmFtZSAgID0gXCJ1TGF5ZXJzRmxhZ3NcIjtcclxuZXhwb3J0IGNvbnN0IGxheWVyc1NjYWxlUGFyYW1OYW1lICAgPSBcInVMYXllcnNTY2FsZVwiO1xyXG5leHBvcnQgY29uc3QgbGF5ZXJzT2Zmc2V0UGFyYW1OYW1lICA9IFwidUxheWVyc09mZnNldFwiO1xyXG5leHBvcnQgY29uc3QgZGlmZnVzZVBTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyRCAke3NwbGF0TWFwUGFyYW1OYW1lfTtcclxuICAgIHVuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkRBcnJheSAke2xheWVyc0RpZmZ1c2VQYXJhbU5hbWV9O1xyXG4gICAgLy91bmlmb3JtIG1lZGl1bXAgc2FtcGxlcjJEQXJyYXkgJHtsYXllcnNOb3JtYWxzUGFyYW1OYW1lfTtcclxuICAgIHVuaWZvcm0gZmxvYXQgJHtsYXllcnNGbGFnc1BhcmFtTmFtZX1bJHttYXhMYXllcnNDb3VudH1dO1xyXG4gICAgdW5pZm9ybSB2ZWMyICR7bGF5ZXJzU2NhbGVQYXJhbU5hbWV9WyR7bWF4TGF5ZXJzQ291bnR9XTtcclxuICAgIHVuaWZvcm0gdmVjMiAke2xheWVyc09mZnNldFBhcmFtTmFtZX1bJHttYXhMYXllcnNDb3VudH1dO1xyXG5cclxuICAgIHZhcnlpbmcgZmxvYXQgdlBhdGNoTG9kO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZVdkNvb3JkO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZGaWVsZFBvc2l0aW9uO1xyXG5cclxuICAgIHZhcnlpbmcgZmxvYXQgdkNsb3NlTWFzaztcclxuICAgIHZhcnlpbmcgZmxvYXQgdk1pZGRsZU1hc2s7XHJcblxyXG4gICAgY29uc3QgZmxvYXQgY2xvc2VVdlNjYWxlICA9IDEuMDtcclxuICAgIGNvbnN0IGZsb2F0IG1pZGRsZVV2U2NhbGUgPSAwLjY7XHJcbiAgICBjb25zdCBmbG9hdCBmYXJVdlNjYWxlICAgID0gMC4zO1xyXG5cclxuICAgIHZlYzMgZGlzdGFuY2VEaWZmdXNlVGV4dHVyZSh2ZWMyIHV2LCBpbnQgbGV2ZWwpIHtcclxuICAgICAgICB2ZWMzIGZpbmFsVXYgPSB2ZWMzKCR7bGF5ZXJzT2Zmc2V0UGFyYW1OYW1lfVtsZXZlbF0gKyB1diAqICR7bGF5ZXJzU2NhbGVQYXJhbU5hbWV9W2xldmVsXSwgbGV2ZWwpO1xyXG4gICAgICAgIC8vdmVjMyBmaW5hbFR4ID0gdGV4dHVyZSgke2xheWVyc0RpZmZ1c2VQYXJhbU5hbWV9LCBmaW5hbFV2ICogdmVjMyhmYXJVdlNjYWxlLCBmYXJVdlNjYWxlLCAxLjApKS5yZ2I7XHJcbiAgICAgICAgLy9maW5hbFR4ID0gbWl4KGZpbmFsVHgsIHRleHR1cmUoJHtsYXllcnNEaWZmdXNlUGFyYW1OYW1lfSwgZmluYWxVdiAqIHZlYzMobWlkZGxlVXZTY2FsZSwgbWlkZGxlVXZTY2FsZSwgMS4wKSkucmdiLCB2TWlkZGxlTWFzayk7XHJcbiAgICAgICAgLy9maW5hbFR4ID0gbWl4KGZpbmFsVHgsIHRleHR1cmUoJHtsYXllcnNEaWZmdXNlUGFyYW1OYW1lfSwgZmluYWxVdiAqIHZlYzMoY2xvc2VVdlNjYWxlLCBjbG9zZVV2U2NhbGUsIDEuMCkpLnJnYiwgdkNsb3NlTWFzayk7XHJcbiAgICAgICAgcmV0dXJuIHRleHR1cmUoJHtsYXllcnNEaWZmdXNlUGFyYW1OYW1lfSwgZmluYWxVdikucmdiO1xyXG4gICAgfVxyXG5cclxuICAgIHZvaWQgZ2V0QWxiZWRvKCkge1xyXG5cclxuICAgICAgICB2ZWM0IHNwbGF0TWFwID0gdGV4dHVyZTJEKCR7c3BsYXRNYXBQYXJhbU5hbWV9LCB2VXZDb29yZCk7XHJcbiAgICAgICAgdmVjMyBhbGJlZG8gICA9IGRpc3RhbmNlRGlmZnVzZVRleHR1cmUodlV2Q29vcmQsIDApO1xyXG5cclxuICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8ICR7bWF4TGF5ZXJzQ291bnR9OyArK2kpIHtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0IHNwbGF0RmFjdG9yID0gc3BsYXRNYXBbaSAtIDFdO1xyXG5cclxuI2lmIGRlZmluZWQoV0VCR1BVKVxyXG4gICAgICAgICAgICBpZiAoJHtsYXllcnNGbGFnc1BhcmFtTmFtZX1baV0gPiAwLjApIHtcclxuI2Vsc2VcclxuICAgICAgICAgICAgaWYgKCR7bGF5ZXJzRmxhZ3NQYXJhbU5hbWV9W2ldID4gMC4wICYmIHNwbGF0RmFjdG9yID4gMC4wKSB7XHJcbiNlbmRpZlxyXG4gICAgICAgICAgICAgICAgYWxiZWRvID0gbWl4KGFsYmVkbywgZGlzdGFuY2VEaWZmdXNlVGV4dHVyZSh2VXZDb29yZCwgaSksIHNwbGF0RmFjdG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBkQWxiZWRvID0gYXV0b0dhbW1hQ29ycmVjdElucHV0KGFsYmVkbyk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgaGVpZ2h0TWFwRmFjdG9yc0NodW5rcyA9IHtcclxuICAgIGZpZWxkSGVpZ2h0RmFjdG9yUjMyRlZTLFxyXG4gICAgZmllbGRIZWlnaHRGYWN0b3JSR0JBOFVWUyxcclxuICAgIGZpZWxkSGVpZ2h0RmFjdG9yUkcxNlVYMlZTLFxyXG4gICAgZmllbGRIZWlnaHRGYWN0b3JSR0JBOFVYNFZTLFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY2h1bmtzID0ge1xyXG5cclxuICAgIC4uLmhlaWdodE1hcEZhY3RvcnNDaHVua3MsXHJcblxyXG4gICAgaGVpZ2h0TWFwU2FtcGxlcixcclxuXHJcbiAgICBjdXJyZW50RmllbGRYWkZvckNvbWJpbmVJbnN0YW5jaW5nQ2h1bmtWUyxcclxuICAgIGN1cnJlbnRGaWVsZFhaRm9ySW5zdGFuY2luZ0NodW5rVlMsXHJcbiAgICBjdXJyZW50RmllbGRYWkNodW5rVlMsXHJcblxyXG4gICAgZmllbGRIZWlnaHRGYWN0b3JDaHVua1ZTLFxyXG5cclxuICAgIGZpZWxkSGVpZ2h0Q2h1bmtWUyxcclxuICAgIGZpZWxkQ29vcmRzQ2h1bmtWUyxcclxuICAgIGZpZWxkQ2h1bmtCdWZmZXJDb29yZFZTLFxyXG5cclxuICAgIG5vcm1hbEJ5SGVpZ2h0TWFwVlMsXHJcblxyXG4gICAgLy8gVmVydGV4XHJcbiAgICBkZWZpbmVzVlMsXHJcbiAgICBiYXNlRm9yQ29tYmluZUluc3RhbmNpbmdWUyxcclxuICAgIGJhc2VGb3JJbnN0YW5jaW5nVlMsXHJcbiAgICBiYXNlT3JpZ2luYWxWUyxcclxuICAgIGJhc2VDbGVhclZTLFxyXG4gICAgYmFzZUNsZWFyU3ViVlMsXHJcblxyXG4gICAgdHJhbnNmb3JtRGVjbFZTLFxyXG4gICAgXHJcbiAgICB0cmFuc2Zvcm1WUyxcclxuICAgIGluc3RhbmNpbmdWUyxcclxuICAgIHRyYW5zZm9ybUluc3RhbmNpbmdWUyxcclxuICAgIG5vcm1hbFZTLFxyXG4gICAgbm9ybWFsQ29yZVZTLFxyXG5cclxuICAgIHV2MFZTLFxyXG4gICAgc3RhcnRWUyxcclxuICAgIHN0YXJ0VXYwVlMsXHJcblxyXG4gICAgLy8gRnJhZ21lbnRcclxuICAgIGdhbW1hTm9ybWFsaXplSGVhZGVyUFMsXHJcbiAgICBnYW1tYU5vcm1hbGl6ZUNodW5rUFMsXHJcbiAgICBkaWZmdXNlUFMsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUZpZWxkSGVpZ2h0RmFjdG9yVlNTdG9yZSB7XHJcbiAgICBmaWVsZEhlaWdodEZhY3RvclIzMkZWUzogc3RyaW5nLFxyXG4gICAgZmllbGRIZWlnaHRGYWN0b3JSR0JBOFVWUzogc3RyaW5nLFxyXG4gICAgZmllbGRIZWlnaHRGYWN0b3JSRzE2VVgyVlM6IHN0cmluZyxcclxuICAgIGZpZWxkSGVpZ2h0RmFjdG9yUkdCQThVWDRWUzogc3RyaW5nLFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmllbGRIZWlnaHRGYWN0b3JWUyhmb3JtYXQ6IFRIZWlnaHRNYXBGb3JtYXQsIGNodW5rc1N0b3JlOiBJRmllbGRIZWlnaHRGYWN0b3JWU1N0b3JlKSB7XHJcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xyXG4gICAgICAgIGNhc2UgJ3IzMmYnOiAgIHJldHVybiBjaHVua3NTdG9yZS5maWVsZEhlaWdodEZhY3RvclIzMkZWUztcclxuICAgICAgICBjYXNlICdyZ2JhJzogICByZXR1cm4gY2h1bmtzU3RvcmUuZmllbGRIZWlnaHRGYWN0b3JSR0JBOFVWUztcclxuICAgICAgICBjYXNlICdyZ2JhWDInOiByZXR1cm4gY2h1bmtzU3RvcmUuZmllbGRIZWlnaHRGYWN0b3JSRzE2VVgyVlM7XHJcbiAgICAgICAgY2FzZSAncmdiYVg0JzogcmV0dXJuIGNodW5rc1N0b3JlLmZpZWxkSGVpZ2h0RmFjdG9yUkdCQThVWDRWUztcclxuICAgICAgICBkZWZhdWx0OiBicmVhaztcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignRm9ybWF0IG5vdCBzdXBwb3J0ZWQnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRleHR1cmVUeXBlKGZvcm1hdDogVEhlaWdodE1hcEZvcm1hdCkge1xyXG4gICAgc3dpdGNoIChmb3JtYXQpIHtcclxuICAgICAgICBjYXNlICdyMzJmJzogICByZXR1cm4gcGMuUElYRUxGT1JNQVRfUjMyRjtcclxuICAgICAgICBjYXNlICdyZ2JhJzogICByZXR1cm4gcGMuUElYRUxGT1JNQVRfUkdCQThVO1xyXG4gICAgICAgIGNhc2UgJ3JnYmFYMic6IHJldHVybiBwYy5QSVhFTEZPUk1BVF9SRzE2VTtcclxuICAgICAgICBjYXNlICdyZ2JhWDQnOiByZXR1cm4gcGMuUElYRUxGT1JNQVRfUkdCQThVO1xyXG4gICAgICAgIGRlZmF1bHQ6IGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtYXQgbm90IHN1cHBvcnRlZCcpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2FtcGxlclR5cGUoZm9ybWF0OiBUSGVpZ2h0TWFwRm9ybWF0KSB7XHJcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xyXG4gICAgICAgIGNhc2UgJ3IzMmYnOiAgIHJldHVybiAnc2FtcGxlcjJEQXJyYXknO1xyXG4gICAgICAgIGNhc2UgJ3JnYmEnOiAgIHJldHVybiAndXNhbXBsZXIyREFycmF5JztcclxuICAgICAgICBjYXNlICdyZ2JhWDInOiByZXR1cm4gJ3VzYW1wbGVyMkRBcnJheSc7XHJcbiAgICAgICAgY2FzZSAncmdiYVg0JzogcmV0dXJuICd1c2FtcGxlcjJEQXJyYXknO1xyXG4gICAgICAgIGRlZmF1bHQ6IGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtYXQgbm90IHN1cHBvcnRlZCcpO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBUSW5zdGFuY2luZ1R5cGUgPSAnc2ltcGxlJyB8ICdjb21iaW5lJyB8IGZhbHNlO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJRmllbGRTaGFkZXJPcHRpb25zIHtcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBkZXB0aDogbnVtYmVyLFxyXG4gICAgcGF0Y2hTaXplOiBudW1iZXIsXHJcbiAgICBoZWlnaHRNYXBDaHVua1NpemU6IG51bWJlcixcclxuICAgIGluc3RhbmNpbmc6IFRJbnN0YW5jaW5nVHlwZSxcclxuICAgIGhlaWdodE1hcEZvcm1hdDogVEhlaWdodE1hcEZvcm1hdCxcclxuICAgIGNodW5rc1N0b3JlPzogdHlwZW9mIGNodW5rcyxcclxuICAgIGVuZ2luZVZlcnNpb246ICd2MScgfCAndjInXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZFNoYWRlckNodW5rcyh7XHJcbiAgICB3aWR0aCxcclxuICAgIGRlcHRoLFxyXG4gICAgcGF0Y2hTaXplLFxyXG4gICAgaGVpZ2h0TWFwQ2h1bmtTaXplLFxyXG4gICAgaW5zdGFuY2luZyxcclxuICAgIGhlaWdodE1hcEZvcm1hdCxcclxuICAgIGNodW5rc1N0b3JlID0gY2h1bmtzLFxyXG4gICAgZW5naW5lVmVyc2lvbiA9ICd2MScsXHJcbn06IElGaWVsZFNoYWRlck9wdGlvbnMpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcclxuXHJcbiAgICBjb25zdCBkZWZpbmVzVlMgPSBjaHVua3NTdG9yZS5kZWZpbmVzVlNcclxuICAgICAgICAucmVwbGFjZSgnJSVITV9OVU1fQ0hVTktTX1glJScsIFN0cmluZygod2lkdGggLSAxKSAvIChoZWlnaHRNYXBDaHVua1NpemUgLSAxKSB8IDApKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUhNX0NIVU5LX1NJWkUlJScsIFN0cmluZyhoZWlnaHRNYXBDaHVua1NpemUgfCAwKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVGSUVMRF9TSVpFX1glJScsIFN0cmluZyh3aWR0aCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlRklFTERfU0laRV9aJSUnLCBTdHJpbmcoZGVwdGgpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUZJRUxEX1NJWkVfWF9GJSUnLCB3aWR0aC50b0ZpeGVkKDEpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUZJRUxEX1NJWkVfWl9GJSUnLCBkZXB0aC50b0ZpeGVkKDEpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUZJRUxEX1BBVENIX1NJWkVfWCUlJywgcGF0Y2hTaXplLnRvRml4ZWQoMSkpO1xyXG5cclxuICAgIGNvbnN0IGZpZWxkSGVpZ2h0RmFjdG9yVlMgPSBnZXRGaWVsZEhlaWdodEZhY3RvclZTKGhlaWdodE1hcEZvcm1hdCwgY2h1bmtzU3RvcmUpO1xyXG5cclxuICAgIGNvbnN0IGhtVlMgPSBjaHVua3NTdG9yZS5oZWlnaHRNYXBTYW1wbGVyLnJlcGxhY2VBbGwoJyUlSEVJR0hUX01BUF9TQU1QTEVSJSUnLCBnZXRTYW1wbGVyVHlwZShoZWlnaHRNYXBGb3JtYXQpKTtcclxuICAgIGNvbnN0IGJhc2VDbGVhclZTID0gY2h1bmtzU3RvcmUuYmFzZUNsZWFyVlMgKyBobVZTO1xyXG5cclxuICAgIGNvbnN0IGJhc2VDb29yZFZTID0gaW5zdGFuY2luZyA9PT0gJ2NvbWJpbmUnID8gY2h1bmtzU3RvcmUuYmFzZUZvckNvbWJpbmVJbnN0YW5jaW5nVlMgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jaW5nID09PSAnc2ltcGxlJyAgPyBjaHVua3NTdG9yZS5iYXNlRm9ySW5zdGFuY2luZ1ZTIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzU3RvcmUuYmFzZU9yaWdpbmFsVlM7XHJcblxyXG4gICAgY29uc3QgY3VycmVudEZpZWxkWFpWUyA9IGluc3RhbmNpbmcgPT09ICdjb21iaW5lJyA/IGNodW5rc1N0b3JlLmN1cnJlbnRGaWVsZFhaRm9yQ29tYmluZUluc3RhbmNpbmdDaHVua1ZTIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jaW5nID09PSAnc2ltcGxlJyAgPyBjaHVua3NTdG9yZS5jdXJyZW50RmllbGRYWkZvckluc3RhbmNpbmdDaHVua1ZTIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua3NTdG9yZS5jdXJyZW50RmllbGRYWkNodW5rVlM7XHJcbiAgICBcclxuICAgIGlmIChlbmdpbmVWZXJzaW9uID09PSAndjInKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vcm1hbENvcmVWUyA9IGNodW5rc1N0b3JlLm5vcm1hbEJ5SGVpZ2h0TWFwVlMgKyBjaHVua3NTdG9yZS5ub3JtYWxDb3JlVlM7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtVlMgPSBkZWZpbmVzVlNcclxuICAgICAgICAgICAgKyBiYXNlQ29vcmRWU1xyXG4gICAgICAgICAgICArIGJhc2VDbGVhclZTXHJcbiAgICAgICAgICAgICsgY3VycmVudEZpZWxkWFpWU1xyXG4gICAgICAgICAgICArIGZpZWxkSGVpZ2h0RmFjdG9yVlNcclxuICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5maWVsZENvb3Jkc0NodW5rVlNcclxuICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5maWVsZENodW5rQnVmZmVyQ29vcmRWU1xyXG4gICAgICAgICAgICArIGNodW5rc1N0b3JlLmZpZWxkSGVpZ2h0RmFjdG9yQ2h1bmtWU1xyXG4gICAgICAgICAgICArIGNodW5rc1N0b3JlLmZpZWxkSGVpZ2h0Q2h1bmtWU1xyXG4gICAgICAgICAgICArIGNodW5rc1N0b3JlLnRyYW5zZm9ybVZTO1xyXG5cclxuICAgICAgICBjb25zdCBkaWZmdXNlUFMgPSBjaHVua3NTdG9yZS5nYW1tYU5vcm1hbGl6ZUNodW5rUFNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5kaWZmdXNlUFM7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBWZXJ0ZXhcclxuICAgICAgICAgICAgbm9ybWFsQ29yZVZTLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1WUyxcclxuICAgICAgICAgICAgdHJhbnNmb3JtQ29yZVZTOiAnJyxcclxuICAgICAgICAgICAgdHJhbnNmb3JtSW5zdGFuY2luZ1ZTOiAnJyxcclxuXHJcbiAgICAgICAgICAgIC8vIEZyYWdtZW50XHJcbiAgICAgICAgICAgIGRpZmZ1c2VQUyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHN0YXJ0VlMgPSBjaHVua3NTdG9yZS5ub3JtYWxCeUhlaWdodE1hcFZTICsgY2h1bmtzU3RvcmUuc3RhcnRVdjBWUyArIGNodW5rc1N0b3JlLnN0YXJ0VlM7XHJcbiAgICBjb25zdCBiYXNlVlMgPSBiYXNlQ29vcmRWUyArIGJhc2VDbGVhclZTICsgY2h1bmtzU3RvcmUuYmFzZUNsZWFyU3ViVlM7XHJcbiAgICBjb25zdCB0cmFuc2Zvcm1WUyA9IGRlZmluZXNWU1xyXG4gICAgICAgICsgY3VycmVudEZpZWxkWFpWU1xyXG4gICAgICAgICsgZmllbGRIZWlnaHRGYWN0b3JWU1xyXG4gICAgICAgICsgY2h1bmtzU3RvcmUuZmllbGRDb29yZHNDaHVua1ZTXHJcbiAgICAgICAgKyBjaHVua3NTdG9yZS5maWVsZENodW5rQnVmZmVyQ29vcmRWU1xyXG4gICAgICAgICsgY2h1bmtzU3RvcmUuZmllbGRIZWlnaHRGYWN0b3JDaHVua1ZTXHJcbiAgICAgICAgKyBjaHVua3NTdG9yZS5maWVsZEhlaWdodENodW5rVlNcclxuICAgICAgICArIGNodW5rc1N0b3JlLnRyYW5zZm9ybVZTO1xyXG4gICAgXHJcbiAgICBjb25zdCBkaWZmdXNlUFMgPSBjaHVua3NTdG9yZS5nYW1tYU5vcm1hbGl6ZUhlYWRlclBTXHJcbiAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5nYW1tYU5vcm1hbGl6ZUNodW5rUFNcclxuICAgICAgICAgICAgICAgICAgICArIGNodW5rc1N0b3JlLmRpZmZ1c2VQUztcclxuXHJcbiAgICByZXR1cm4ge1xyXG5cclxuICAgICAgICAvLyBWZXJ0ZXhcclxuICAgICAgICBiYXNlVlMsXHJcbiAgICAgICAgdHJhbnNmb3JtVlMsXHJcbiAgICAgICAgbm9ybWFsVlM6IGNodW5rc1N0b3JlLm5vcm1hbFZTLFxyXG4gICAgICAgIHV2MFZTOiBjaHVua3NTdG9yZS51djBWUyxcclxuICAgICAgICBzdGFydFZTLFxyXG5cclxuICAgICAgICB0cmFuc2Zvcm1EZWNsVlM6IGNodW5rc1N0b3JlLnRyYW5zZm9ybURlY2xWUyxcclxuICAgICAgICBpbnN0YW5jaW5nVlM6IGNodW5rc1N0b3JlLmluc3RhbmNpbmdWUyxcclxuXHJcbiAgICAgICAgLy8gRnJhZ21lbnRcclxuICAgICAgICBkaWZmdXNlUFMsXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBnZXRTYW1wbGVyVHlwZSwgZ2V0RmllbGRIZWlnaHRGYWN0b3JWUywgaGVpZ2h0TWFwRmFjdG9yc0NodW5rcywgaGVpZ2h0TWFwU2FtcGxlciwgbWF4SGVpZ2h0UGFyYW1OYW1lIH0gZnJvbSBcIi4uL0hlaWdodGZpZWxkL1NoYWRlckNodW5rcy5tanNcIjtcclxuaW1wb3J0IHsgVEhlaWdodE1hcEZvcm1hdCB9IGZyb20gXCIuLi9Db3JlL0Fic0hlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCB2aW5kZXhBdHRyTmFtZSA9IFwidmVydGV4X3Bvc2l0aW9uXCI7XHJcbmV4cG9ydCBjb25zdCBvZmZzZXRBdHRyTmFtZSA9IFwidmVydGV4X29mZnNldFwiO1xyXG5leHBvcnQgY29uc3Qgc2hhcGVBdHRyTmFtZSAgPSBcInZlcnRleF9zaGFwZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRpbWVQYXJhbU5hbWUgICAgICAgICAgPSBcInVUaW1lXCI7XHJcbmV4cG9ydCBjb25zdCBmaWVsZFNjYWxlUGFyYW1OYW1lICAgID0gXCJ1RmllbGRTY2FsZVwiO1xyXG5leHBvcnQgY29uc3QgbG9kMU9mZnNldFhaUGFyYW1OYW1lICA9IFwidUxvZDFPZmZzZXRYWlwiO1xyXG5leHBvcnQgY29uc3QgbG9kMk9mZnNldFhaUGFyYW1OYW1lICA9IFwidUxvZDJPZmZzZXRYWlwiO1xyXG5leHBvcnQgY29uc3QgZHJhd1Bvc1BhcmFtTmFtZSAgICAgICA9IFwidURyYXdQb3NpdGlvblwiO1xyXG5leHBvcnQgY29uc3Qgd2luZEludGVuc2l0eVBhcmFtTmFtZSA9IFwidVdpbmRJbnRlbnNpdHlcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnN0YW5jaW5nVlMgPSBgYDtcclxuZXhwb3J0IGNvbnN0IHRyYW5zZm9ybUluc3RhbmNpbmdWUyA9IGBgO1xyXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtRGVjbFZTID0gYGA7XHJcblxyXG5leHBvcnQgY29uc3QgZGVmaW5lc1ZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgI2RlZmluZSBITV9OVU1fQ0hVTktTX1ggICAgICAgKCUlSE1fTlVNX0NIVU5LU19YJSUpXHJcbiAgICAjZGVmaW5lIEhNX05VTV9DSFVOS1NfWF9VICAgICAodWludChITV9OVU1fQ0hVTktTX1gpKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFICAgICAgICAgKCUlSE1fQ0hVTktfU0laRSUlKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFX0YgICAgICAgKGZsb2F0KEhNX0NIVU5LX1NJWkUpKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFX1UgICAgICAgKHVpbnQoSE1fQ0hVTktfU0laRSkpXHJcbiAgICAjZGVmaW5lIEZJRUxEX1NJWkUgICAgICAgICAgICAoaXZlYzIoJSVGSUVMRF9TSVpFX1glJSwgJSVGSUVMRF9TSVpFX1olJSkpXHJcbiAgICAjZGVmaW5lIEZJRUxEX1NJWkVfRiAgICAgICAgICAodmVjMiglJUZJRUxEX1NJWkVfWF9GJSUsICUlRklFTERfU0laRV9aX0YlJSkpXHJcbiAgICAjZGVmaW5lIEZJRUxEX1NJWkVfQk9VTkRfRiAgICAoRklFTERfU0laRV9GIC0gMi4wKSAgICAgIFxyXG4gICAgI2RlZmluZSBGSUVMRF9TSVpFX0hfRiAgICAgICAgKEZJRUxEX1NJWkVfRiAvIDIuMClcclxuICAgICNkZWZpbmUgRklFTERfU0laRV9IX05fRiAgICAgICgtRklFTERfU0laRV9IX0YpXHJcblxyXG4gICAgI2RlZmluZSBQQVRDSF9TSVpFICAgICAgICAgKCUlUEFUQ0hfU0laRSUlKVxyXG4gICAgI2RlZmluZSBIQUxGX1BBVENIX1NJWkUgICAgKFBBVENIX1NJWkUgLyAyLjApXHJcblxyXG4gICAgI2RlZmluZSBCTEFERV9IRUlHSFRfVEFMTCAgKCUlQkxBREVfSEVJR0hUX1RBTEwlJSkgLy8gaGVpZ2h0IG9mIGEgdGFsbCBibGFkZVxyXG5cclxuICAgICNkZWZpbmUgVFJBTlNJVElPTl9MT1cgICAgICglJVRSQU5TSVRJT05fTE9XJSUpICAgLy8gZWxldmF0aW9uIG9mIGJlYWNoLWdyYXNzIHRyYW5zaXRpb24gKHN0YXJ0KVxyXG4gICAgI2RlZmluZSBUUkFOU0lUSU9OX0hJR0ggICAgKCUlVFJBTlNJVElPTl9ISUdIJSUpICAvLyAoZW5kKVxyXG4gICAgI2RlZmluZSBUUkFOU0lUSU9OX05PSVNFICAgKDAuMDYpICAgICAgICAgICAgICAgICAvLyB0cmFuc2l0aW9uIG5vaXNlIHNjYWxlXHJcbiAgICAjZGVmaW5lIENJUkNMRV9SQURJVVMgICAgICAoUEFUQ0hfU0laRSAqIDIuOSlcclxuICAgICNkZWZpbmUgTUFYX1pJTklUX0RJU1RBTkNFICgzMDAuMClcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWZpbmVzQmxhZGVWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICNkZWZpbmUgTE9EMF9CTEFERV9TRUdTICAgICAgICAoJSVMT0QwX0JMQURFX1NFR1MlJSkgLy8gIyBvZiBibGFkZSBzZWdtZW50cyBsb2QgMFxyXG4gICAgI2RlZmluZSBMT0QxX0JMQURFX1NFR1MgICAgICAgICglJUxPRDFfQkxBREVfU0VHUyUlKSAvLyAjIG9mIGJsYWRlIHNlZ21lbnRzIGxvZCAxXHJcbiAgICAjZGVmaW5lIExPRDJfQkxBREVfU0VHUyAgICAgICAgKCUlTE9EMl9CTEFERV9TRUdTJSUpIC8vICMgb2YgYmxhZGUgc2VnbWVudHMgbG9kIDJcclxuXHJcbiAgICAjZGVmaW5lIExPRDBfQkxBREVfRElWUyAgICAgICAgKExPRDBfQkxBREVfU0VHUyArIDEuMCkgIC8vICMgb2YgZGl2aXNpb25zXHJcbiAgICAjZGVmaW5lIExPRDBfQkxBREVfVkVSVFMgICAgICAgKExPRDBfQkxBREVfRElWUyAqIDIuMCkgIC8vICMgb2YgdmVydGljZXMgKHBlciBzaWRlLCBzbyAxLzIgdG90YWwpXHJcbiAgICAjZGVmaW5lIExPRDBfQkxBREVfVkVSVFNfQ09VTlQgKExPRDBfQkxBREVfVkVSVFMgKiAyLjApIC8vICMgb2YgdmVydGljZXNcclxuXHJcbiAgICAjZGVmaW5lIExPRDFfQkxBREVfRElWUyAgICAgICAgKExPRDFfQkxBREVfU0VHUyArIDEuMCkgIC8vICMgb2YgZGl2aXNpb25zXHJcbiAgICAjZGVmaW5lIExPRDFfQkxBREVfVkVSVFMgICAgICAgKExPRDFfQkxBREVfRElWUyAqIDIuMCkgIC8vICMgb2YgdmVydGljZXMgKHBlciBzaWRlLCBzbyAxLzIgdG90YWwpXHJcbiAgICAjZGVmaW5lIExPRDFfQkxBREVfVkVSVFNfQ09VTlQgKExPRDFfQkxBREVfVkVSVFMgKiAyLjApIC8vICMgb2YgdmVydGljZXNcclxuXHJcbiAgICAjZGVmaW5lIExPRDJfQkxBREVfRElWUyAgICAgICAgKExPRDJfQkxBREVfU0VHUyArIDEuMCkgIC8vICMgb2YgZGl2aXNpb25zXHJcbiAgICAjZGVmaW5lIExPRDJfQkxBREVfVkVSVFMgICAgICAgKExPRDJfQkxBREVfRElWUyAqIDIuMCkgIC8vICMgb2YgdmVydGljZXMgKHBlciBzaWRlLCBzbyAxLzIgdG90YWwpXHJcbiAgICAjZGVmaW5lIExPRDJfQkxBREVfVkVSVFNfQ09VTlQgKExPRDJfQkxBREVfVkVSVFMgKiAyLjApIC8vICMgb2YgdmVydGljZXNcclxuICAgIFxyXG4gICAgI2RlZmluZSBMT0QyX0JMQURFX1ZFUlRTX0FMTF9DT1VOVCAoTE9EMl9CTEFERV9WRVJUU19DT1VOVCAqIDE2LjApIC8vICMgb2YgdmVydGljZXMgYWxsIGZyYWdtZW50c1xyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbENvcmVWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIC8vIEZJWDogdmVydGV4X25vcm1hbCB1bmRlY2xhcmF0aW9uXHJcbiAgICB2ZWMzIHZlcnRleF9ub3JtYWw7XHJcblxyXG4gICAgdmVjMyBnZXRMb2NhbE5vcm1hbCh2ZWMzIHZlcnRleE5vcm1hbCkge1xyXG5cclxuICAgICAgICAvLyBTZXQgZGVmYXVsdCBzaGFkZXIgbm9ybWFsXHJcbiAgICAgICAgdmVydGV4X25vcm1hbCA9IGRWZXJ0ZXhOb3JtYWw7XHJcblxyXG4gICAgICAgIHJldHVybiBkVmVydGV4Tm9ybWFsO1xyXG4gICAgfVxyXG5cclxuICAgIG1hdDMgZ2V0Tm9ybWFsTWF0cml4KG1hdDQgbW9kZWxNYXRyaXgpIHtcclxuICAgICAgICByZXR1cm4gbWF0cml4X25vcm1hbDtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1WUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzMgZ2V0V29ybGRQb3NpdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gZFBvc2l0aW9uVztcclxuICAgIH1cclxuXHJcbiAgICBtYXQ0IGdldE1vZGVsTWF0cml4KCkge1xyXG4gICAgICAgIHJldHVybiBtYXRyaXhfbW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgdmVjNCBnZXRQb3NpdGlvbigpIHtcclxuXHJcbiAgICAgICAgZGVjb2RlQmxhZGUoKTtcclxuICAgICAgICBjYWxjdWxhdGVCbGFkZVZlcnRleCgpO1xyXG5cclxuICAgICAgICBkTW9kZWxNYXRyaXggPSBnZXRNb2RlbE1hdHJpeCgpO1xyXG5cclxuICAgICAgICB2ZWM0IHBvc1cgICAgICA9IGRNb2RlbE1hdHJpeCAqIHZlYzQoZFZlcnRleFBvc2l0aW9uLCAxLjApO1xyXG4gICAgICAgIHZlYzQgc2NyZWVuUG9zID0gbWF0cml4X3ZpZXdQcm9qZWN0aW9uICogcG9zVztcclxuXHJcbiAgICAgICAgZFBvc2l0aW9uVyA9IHBvc1cueHl6O1xyXG5cclxuICAgICAgICByZXR1cm4gc2NyZWVuUG9zO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdmVjMyBnZXROb3JtYWwoKSB7XHJcbiAgICAgICAgZE5vcm1hbE1hdHJpeCA9IG1hdHJpeF9ub3JtYWw7XHJcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZShkTm9ybWFsTWF0cml4ICogZFZlcnRleE5vcm1hbCk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgdXYwVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMyIGdldFV2MCgpIHtcclxuICAgICAgICByZXR1cm4gdmVjMihkRWRnZU9mQmxhZGUsIGREaXZWZXJ0ZXhJbmRleCAqIDIuMCk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG4vLyBidWcgd2l0aCBnZXRVdjBcclxuZXhwb3J0IGNvbnN0IHN0YXJ0VXYwVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gICAgIFxyXG4gICAgdmVjMiBnZXRVdjAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlYzIoZEVkZ2VPZkJsYWRlLCBkRGl2VmVydGV4SW5kZXggKiAyLjApO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJhc2VWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHVuaWZvcm0gbWF0NCBtYXRyaXhfdmlld1Byb2plY3Rpb247XHJcbiAgICB1bmlmb3JtIG1hdDQgbWF0cml4X21vZGVsO1xyXG4gICAgdW5pZm9ybSBtYXQzIG1hdHJpeF9ub3JtYWw7XHJcblxyXG4gICAgdW5pZm9ybSBtZWRpdW1wIHVzYW1wbGVyMkQgdURhdGFNYXA7XHJcblxyXG4gICAgdW5pZm9ybSB2ZWMzICAke2ZpZWxkU2NhbGVQYXJhbU5hbWV9O1xyXG4gICAgdW5pZm9ybSBmbG9hdCAke21heEhlaWdodFBhcmFtTmFtZX07XHJcbiAgICBcclxuICAgIHVuaWZvcm0gdmVjMyAgJHtkcmF3UG9zUGFyYW1OYW1lfTsgICAgICAgLy8gY2VudHJlIG9mIHdoZXJlIHdlIHdhbnQgdG8gZHJhd1xyXG4gICAgdW5pZm9ybSBmbG9hdCAke3RpbWVQYXJhbU5hbWV9OyAgICAgICAgICAvLyB1c2VkIHRvIGFuaW1hdGUgYmxhZGVzXHJcbiAgICB1bmlmb3JtIGZsb2F0ICR7d2luZEludGVuc2l0eVBhcmFtTmFtZX07XHJcblxyXG4gICAgdW5pZm9ybSB2ZWMyICR7bG9kMU9mZnNldFhaUGFyYW1OYW1lfVs4XTsgIC8vIGNlbnRlciBvZmZzZXQgZnJvbSBkcmF3IHBvcyBsb2QgMVxyXG4gICAgdW5pZm9ybSB2ZWMyICR7bG9kMk9mZnNldFhaUGFyYW1OYW1lfVsxNl07IC8vIGNlbnRlciBvZmZzZXQgZnJvbSBkcmF3IHBvcyBsb2QgMlxyXG5cclxuICAgIGF0dHJpYnV0ZSBmbG9hdCAke3ZpbmRleEF0dHJOYW1lfTtcclxuICAgIGF0dHJpYnV0ZSB2ZWM0ICR7b2Zmc2V0QXR0ck5hbWV9O1xyXG4gICAgYXR0cmlidXRlIHZlYzQgJHtzaGFwZUF0dHJOYW1lfTtcclxuXHJcbiAgICBmbG9hdCBkVmVydGV4SW5kZXg7ICAgICAgICAgICAvLyB2ZXJ0ZXggaW5kZXggZm9yIHRoaXMgc2lkZSBvZiB0aGUgYmxhZGVcclxuICAgIGZsb2F0IGREaXZWZXJ0ZXhJbmRleDsgICAgICAgIC8vIGRpdiBpbmRleCAoMCAuLiBCTEFERV9ESVZTKVxyXG4gICAgZmxvYXQgZFBlcmNlbnRPZkJsYWRlSGVpZ2h0OyAgLy8gcGVyY2VudCBvZiBoZWlnaHQgb2YgYmxhZGUgdGhpcyB2ZXJ0ZXggaXMgYXRcclxuICAgIGZsb2F0IGRTaWRlT2ZCbGFkZTsgICAgICAgICAgIC8vIGZyb250L2JhY2sgc2lkZSBvZiBibGFkZVxyXG4gICAgZmxvYXQgZEVkZ2VPZkJsYWRlOyAgICAgICAgICAgLy8gbGVmdC9yaWdodCBlZGdlICh4PTAgb3IgeD0xKVxyXG4gICAgdmVjMiBkQmxhZGVGaWVsZFhaUG9zOyAgICAgICAgLy8gYmxhZGUgeHogcG9zaXRpb24gb24gZmllbGRcclxuICAgIHZlYzMgZFZlcnRleFBvc2l0aW9uOyAgICAgICAgIC8vIFZlcnRleCBwb3NpdGlvbiAtIHN0YXJ0IHdpdGggMkQgc2hhcGUsIG5vIGJlbmQgYXBwbGllZFxyXG4gICAgdmVjMyBkVmVydGV4Tm9ybWFsOyAgICAgICAgICAgLy8gVmVydGV4IG5vcm1hbFxyXG4gICAgdmVjMiBkRmllbGRQYXRjaE9mZnNldFhaOyAgICAgLy8gZmllbGQgcGF0Y2ggb2Zmc2V0IGZyb20gY2VudGVyXHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZUNsZWFyU3ViVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGRQb3NpdGlvblc7XHJcbiAgICBtYXQ0IGRNb2RlbE1hdHJpeDtcclxuICAgIG1hdDMgZE5vcm1hbE1hdHJpeDtcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBmaWVsZEhlaWdodE1hcFZTID0gXHJcbmBcclxuICAgIHV2ZWMyIGNsYW1wRmllbGRYWih2ZWMyIHh6KSB7XHJcbiAgICAgICAgcmV0dXJuIHV2ZWMyKGNsYW1wKHh6LCB2ZWMyKDAuMCksIEZJRUxEX1NJWkVfRikpO1xyXG4gICAgfVxyXG5cclxuICAgIHV2ZWMzIGdldEZpZWxkQ2h1bmtCdWZmZXJDb29yZCh2ZWMyIG9yaWdYWikge1xyXG5cclxuICAgICAgICB1dmVjMiB4eiA9IGNsYW1wRmllbGRYWihvcmlnWFopO1xyXG4gICAgICAgIHV2ZWMyIGNrID0geHogLyBITV9DSFVOS19TSVpFX1U7XHJcblxyXG4gICAgICAgIHVpbnQgbG9jYWxYID0geHpbMF0gJSBITV9DSFVOS19TSVpFX1U7XHJcbiAgICAgICAgdWludCBsb2NhbFogPSB4elsxXSAlIEhNX0NIVU5LX1NJWkVfVTtcclxuICAgICAgICB1aW50IGxldmVsICA9IGNrWzFdICogSE1fTlVNX0NIVU5LU19YX1UgKyBja1swXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHV2ZWMzKGxvY2FsWCwgbG9jYWxaLCBsZXZlbCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZsb2F0IGdldEZpZWxkSGVpZ2h0RmFjdG9yKHZlYzIgeHopIHtcclxuICAgICAgICB1dmVjMyBjb29yZCA9IGdldEZpZWxkQ2h1bmtCdWZmZXJDb29yZCh4eik7XHJcbiAgICAgICAgcmV0dXJuIGdldEZpZWxkSGVpZ2h0RmFjdG9yRnJvbVRleHR1cmUoY29vcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZsb2F0IGdldEZpZWxkSGVpZ2h0KHZlYzIgeHopIHtcclxuICAgICAgICByZXR1cm4gZ2V0RmllbGRIZWlnaHRGYWN0b3IoeHopICogJHttYXhIZWlnaHRQYXJhbU5hbWV9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmbG9hdCBnZXRGaWVsZEhlaWdodEludGVycG9sYXRlZCh2ZWMyIHh6KSB7XHJcblxyXG4gICAgICAgIC8vIGhlcmUgd2UgY2FuIGNhbGN1bGF0ZSBub3JtYWxcclxuXHJcbiAgICAgICAgdmVjMiBmbG9vclhaID0gZmxvb3IoeHopO1xyXG5cclxuICAgICAgICBmbG9hdCB4MHowID0gZ2V0RmllbGRIZWlnaHQoZmxvb3JYWik7XHJcblxyXG4gICAgICAgIGlmICgoZmxvb3JYWlswXSArIDEuMCA+PSBGSUVMRF9TSVpFX0ZbMF0pIHx8XHJcbiAgICAgICAgICAgIChmbG9vclhaWzFdICsgMS4wID49IEZJRUxEX1NJWkVfRlsxXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHgwejA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmbG9hdCB4MXowID0gZ2V0RmllbGRIZWlnaHQoZmxvb3JYWiArIHZlYzIoMS4wLCAwLjApKTtcclxuICAgICAgICBmbG9hdCB4MHoxID0gZ2V0RmllbGRIZWlnaHQoZmxvb3JYWiArIHZlYzIoMC4wLCAxLjApKTtcclxuICAgICAgICBmbG9hdCB4MXoxID0gZ2V0RmllbGRIZWlnaHQoZmxvb3JYWiArIHZlYzIoMS4wLCAxLjApKTtcclxuXHJcbiAgICAgICAgZmxvYXQgZmFjdG9yWCA9IHh6WzBdIC0gZmxvb3JYWlswXTtcclxuICAgICAgICBmbG9hdCBmYWN0b3JaID0geHpbMV0gLSBmbG9vclhaWzFdO1xyXG5cclxuICAgICAgICBmbG9hdCBpbnRlcnBvbGF0ZWRCb3R0b20gPSAoeDF6MCAtIHgwejApICogZmFjdG9yWCArIHgwejA7XHJcbiAgICAgICAgZmxvYXQgaW50ZXJwb2xhdGVkVG9wICAgID0gKHgxejEgLSB4MHoxKSAqIGZhY3RvclggKyB4MHoxO1xyXG4gICAgICAgIGZsb2F0IGZpbmFsSGVpZ2h0ICAgICAgICA9IChpbnRlcnBvbGF0ZWRUb3AgLSBpbnRlcnBvbGF0ZWRCb3R0b20pICogZmFjdG9yWiArIGludGVycG9sYXRlZEJvdHRvbTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZpbmFsSGVpZ2h0O1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJsYWRlRGVjb2RlclZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdm9pZCBkZWNvZGVCbGFkZSgpIHtcclxuXHJcbiAgICAgICAgZmxvYXQgbm5WaSA9ICR7dmluZGV4QXR0ck5hbWV9IC0gTE9EMl9CTEFERV9WRVJUU19BTExfQ09VTlQ7XHJcblxyXG4gICAgICAgIGlmIChublZpIDwgMC4wKSB7XHJcblxyXG4gICAgICAgICAgICBmbG9hdCBsb2QyblZpICA9IG1vZCgke3ZpbmRleEF0dHJOYW1lfSwgTE9EMl9CTEFERV9WRVJUU19DT1VOVCk7XHJcbiAgICAgICAgICAgIGludCBwYXRjaEluZGV4ID0gaW50KCR7dmluZGV4QXR0ck5hbWV9IC8gTE9EMl9CTEFERV9WRVJUU19DT1VOVCk7XHJcblxyXG4gICAgICAgICAgICBkVmVydGV4SW5kZXggICAgICAgICAgPSBtb2QobG9kMm5WaSwgTE9EMl9CTEFERV9WRVJUUyk7XHJcbiAgICAgICAgICAgIGREaXZWZXJ0ZXhJbmRleCAgICAgICA9IGZsb29yKGRWZXJ0ZXhJbmRleCAvIDIuMCk7XHJcbiAgICAgICAgICAgIGRQZXJjZW50T2ZCbGFkZUhlaWdodCA9IGREaXZWZXJ0ZXhJbmRleCAvIExPRDJfQkxBREVfU0VHUztcclxuICAgICAgICAgICAgZFNpZGVPZkJsYWRlICAgICAgICAgID0gZmxvb3IobG9kMm5WaSAvIExPRDJfQkxBREVfVkVSVFMpO1xyXG5cclxuICAgICAgICAgICAgZEZpZWxkUGF0Y2hPZmZzZXRYWiA9ICR7bG9kMk9mZnNldFhaUGFyYW1OYW1lfVtwYXRjaEluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobm5WaSA8IExPRDBfQkxBREVfVkVSVFNfQ09VTlQpIHtcclxuXHJcbiAgICAgICAgICAgIGRWZXJ0ZXhJbmRleCAgICAgICAgICA9IG1vZChublZpLCBMT0QwX0JMQURFX1ZFUlRTKTtcclxuICAgICAgICAgICAgZERpdlZlcnRleEluZGV4ICAgICAgID0gZmxvb3IoZFZlcnRleEluZGV4IC8gMi4wKTtcclxuICAgICAgICAgICAgZFBlcmNlbnRPZkJsYWRlSGVpZ2h0ID0gZERpdlZlcnRleEluZGV4IC8gTE9EMF9CTEFERV9TRUdTO1xyXG4gICAgICAgICAgICBkU2lkZU9mQmxhZGUgICAgICAgICAgPSBmbG9vcihublZpIC8gTE9EMF9CTEFERV9WRVJUUyk7XHJcblxyXG4gICAgICAgICAgICBkRmllbGRQYXRjaE9mZnNldFhaID0gdmVjMigwLjApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0IGxvZDFublZpID0gbm5WaSAtIExPRDBfQkxBREVfVkVSVFNfQ09VTlQ7XHJcbiAgICAgICAgICAgIGZsb2F0IGxvZDFuVmkgID0gbW9kKGxvZDFublZpLCBMT0QxX0JMQURFX1ZFUlRTX0NPVU5UKTtcclxuICAgICAgICAgICAgaW50IHBhdGNoSW5kZXggPSBpbnQobG9kMW5uVmkgLyBMT0QxX0JMQURFX1ZFUlRTX0NPVU5UKTtcclxuXHJcbiAgICAgICAgICAgIGRWZXJ0ZXhJbmRleCAgICAgICAgICA9IG1vZChsb2QxblZpLCBMT0QxX0JMQURFX1ZFUlRTKTtcclxuICAgICAgICAgICAgZERpdlZlcnRleEluZGV4ICAgICAgID0gZmxvb3IoZFZlcnRleEluZGV4IC8gMi4wKTtcclxuICAgICAgICAgICAgZFBlcmNlbnRPZkJsYWRlSGVpZ2h0ID0gZERpdlZlcnRleEluZGV4IC8gTE9EMV9CTEFERV9TRUdTO1xyXG4gICAgICAgICAgICBkU2lkZU9mQmxhZGUgICAgICAgICAgPSBmbG9vcihsb2QxblZpIC8gTE9EMV9CTEFERV9WRVJUUyk7XHJcblxyXG4gICAgICAgICAgICBkRmllbGRQYXRjaE9mZnNldFhaID0gJHtsb2QxT2Zmc2V0WFpQYXJhbU5hbWV9W3BhdGNoSW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBkRWRnZU9mQmxhZGUgPSBtb2QoZFZlcnRleEluZGV4LCAyLjApO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhbGN1bGF0ZUxvY2FsVlMgPSAgLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgLy8gUm90YXRlIGJ5IGFuIGFuZ2xlXHJcbiAgICB2ZWMyIHJvdGF0ZShmbG9hdCB4LCBmbG9hdCB5LCBmbG9hdCByKSB7XHJcbiAgICAgICAgZmxvYXQgYyA9IGNvcyhyKTtcclxuICAgICAgICBmbG9hdCBzID0gc2luKHIpO1xyXG4gICAgICAgIHJldHVybiB2ZWMyKHggKiBjIC0geSAqIHMsIHggKiBzICsgeSAqIGMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJvdGF0ZSBieSBhIHZlY3RvclxyXG4gICAgdmVjMiByb3RhdGUoZmxvYXQgeCwgZmxvYXQgeSwgdmVjMiByKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlYzIoeCAqIHIueCAtIHkgKiByLnksIHggKiByLnkgKyB5ICogci54KTtcclxuICAgIH1cclxuXHJcbiAgICBmbG9hdCBnZXRHcmFzc0ZhY3Rvcih2ZWMyIG94eikge1xyXG4gICAgXHJcbiAgICAgICAgdmVjMiB4eiA9IGZsb29yKG94eik7XHJcblxyXG4gICAgICAgIGlmICh4elswXSA8IDAuMCB8fFxyXG4gICAgICAgICAgICB4elsxXSA8IDAuMCB8fFxyXG4gICAgICAgICAgICB4elswXSA+IEZJRUxEX1NJWkVfQk9VTkRfRlswXSB8fFxyXG4gICAgICAgICAgICB4elsxXSA+IEZJRUxEX1NJWkVfQk9VTkRfRlsxXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMC4wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIDEuMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFyeWluZyB2ZWMyIHZVdkZpZWxkQ29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2Q29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzMgdkNvbG9yO1xyXG5cclxuICAgIHZvaWQgY2FsY3VsYXRlQmxhZGVWZXJ0ZXgoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmVjNCBvZmZzZXQgPSAke29mZnNldEF0dHJOYW1lfTtcclxuICAgICAgICB2ZWM0IHNoYXBlICA9ICR7c2hhcGVBdHRyTmFtZX07XHJcblxyXG4gICAgICAgIC8vIEJhc2VkIG9uIGNlbnRyZSBvZiB2aWV3IGNvbmUgcG9zaXRpb24sIHdoYXQgZ3JpZCB0aWxlIHNob3VsZFxyXG4gICAgICAgIC8vIHRoaXMgcGllY2Ugb2YgZ3Jhc3MgYmUgZHJhd24gYXQ/XHJcbiAgICAgICAgdmVjMiBxdWFkQ2VudGVyUG9zID0gJHtkcmF3UG9zUGFyYW1OYW1lfS54ejtcclxuICAgICAgICB2ZWMyIGJsYWRlT2Zmc2V0ICAgPSBvZmZzZXQueHk7XHJcbiAgICAgICAgdmVjMiBwYXRjaENlbnRlciAgID0gZmxvb3IoKHF1YWRDZW50ZXJQb3MgLSBibGFkZU9mZnNldCkgLyBQQVRDSF9TSVpFKSAqIFBBVENIX1NJWkUgKyBIQUxGX1BBVENIX1NJWkUgKyBkRmllbGRQYXRjaE9mZnNldFhaO1xyXG5cclxuICAgICAgICBmbG9hdCBkcmF3UG9zQWx0aXR1ZGUgPSAke2RyYXdQb3NQYXJhbU5hbWV9Lnk7XHJcblxyXG4gICAgICAgIC8vIEZpbmQgdGhlIGJsYWRlIG1lc2ggeCx5IHBvc2l0aW9uXHJcbiAgICAgICAgdmVjMiBibGFkZVBvcyA9IHBhdGNoQ2VudGVyICsgYmxhZGVPZmZzZXQ7XHJcblxyXG4gICAgICAgIC8vIExvY2FsIHF1YWQgY2VudGVyIHBvc2l0aW9uIGluIGZpZWxkXHJcbiAgICAgICAgLy8gYmVjYXVzZSB0aGUgcG9zaXRpb25zIGFyZSBzaGlmdGVkIGJ5IGhhbGYgdGhlIHNpemUgb2YgdGhlIGZpZWxkXHJcbiAgICAgICAgLy8gdmVjMiBsb2NhbFF1YWRDZW50ZXJQb3MgPSBxdWFkQ2VudGVyUG9zICsgRklFTERfU0laRV9IX0Y7XHJcblxyXG4gICAgICAgIGZsb2F0IGRpc3RhbmNlRnJvbUJsYWRlVG9RdWFkQ2VudGVyID0gZGlzdGFuY2UoYmxhZGVQb3MsIHF1YWRDZW50ZXJQb3MpO1xyXG4gICAgICAgIGZsb2F0IGRlZ2VuZXJhdGVCeURpc3RhbmNlRnJvbUJsYWRlVG9RdWFkQ2VudGVyID0gc21vb3Roc3RlcCgwLjkyLCAxLjAsIENJUkNMRV9SQURJVVMgLyBkaXN0YW5jZUZyb21CbGFkZVRvUXVhZENlbnRlcik7XHJcblxyXG4gICAgICAgIC8vIFZlcnRleCBwb3NpdGlvbiAtIHN0YXJ0IHdpdGggMkQgc2hhcGUsIG5vIGJlbmQgYXBwbGllZFxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbiA9IHZlYzMoXHJcbiAgICAgICAgICAgIHNoYXBlLnggKiAoZEVkZ2VPZkJsYWRlIC0gMC41KSAqICgxLjAgLSBwb3coZFBlcmNlbnRPZkJsYWRlSGVpZ2h0LCAzLjApKSwgLy8gdGFwZXIgYmxhZGUgZWRnZXMgYXMgYXBwcm9hY2ggdGlwXHJcbiAgICAgICAgICAgIDAuMCwgLy8gZmxhdCB5LCB1bmJlbnRcclxuICAgICAgICAgICAgc2hhcGUueSAqIGRQZXJjZW50T2ZCbGFkZUhlaWdodCAvLyBoZWlnaHQgb2YgdnR4LCB1bmJlbnRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBBcHBseSBibGFkZSdzIG5hdHVyYWwgY3VydmUgYW1vdW50XHJcbiAgICAgICAgZmxvYXQgY3VydmUgPSBzaGFwZS53O1xyXG5cclxuICAgICAgICAvLyBUaGVuIGFkZCBhbmltYXRlZCBjdXJ2ZSBhbW91bnQgYnkgdGltZSB1c2luZyB0aGlzIGJsYWRlJ3NcclxuICAgICAgICAvLyB1bmlxdWUgcHJvcGVydGllcyB0byByYW5kb21pemUgaXRzIG9zY2lsbGF0aW9uXHJcbiAgICAgICAgY3VydmUgKz0gc2hhcGUudyArIDAuMTI1ICogKHNpbigke3RpbWVQYXJhbU5hbWV9ICogNC4wICsgb2Zmc2V0LncgKiAwLjIgKiBzaGFwZS55ICsgb2Zmc2V0LnggKyBvZmZzZXQueSkpO1xyXG5cclxuICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgZmxvYXQgd2luZCA9IDAuNTtcclxuXHJcbiAgICAgICAgd2luZCA9IChjbGFtcCh3aW5kLCAwLjI1LCAxLjApIC0gMC4yNSkgKiAoMS4wIC8gMC43NSk7XHJcbiAgICAgICAgd2luZCA9IHdpbmQgKiB3aW5kICogJHt3aW5kSW50ZW5zaXR5UGFyYW1OYW1lfTtcclxuICAgICAgICB3aW5kICo9IGRQZXJjZW50T2ZCbGFkZUhlaWdodDsgLy8gc2NhbGUgd2luZCBieSBoZWlnaHQgb2YgYmxhZGVcclxuICAgICAgICB3aW5kID0gLXdpbmQ7XHJcblxyXG4gICAgICAgIC8vIFN0YXJ0IGNvbXB1dGluZyBhIG5vcm1hbCBmb3IgdGhpcyB2ZXJ0ZXhcclxuICAgICAgICBkVmVydGV4Tm9ybWFsID0gdmVjMygwLjAsIGRTaWRlT2ZCbGFkZSAqIC0yLjAgKyAxLjAsIDAuMCk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBsZWFuIGFuZCBjdXJ2ZSB0b2dldGhlclxyXG4gICAgICAgIGZsb2F0IHJvdCA9IHNoYXBlLnogKyBjdXJ2ZSAqIGRQZXJjZW50T2ZCbGFkZUhlaWdodDtcclxuICAgICAgICB2ZWMyIHJvdHYgPSB2ZWMyKGNvcyhyb3QpLCBzaW4ocm90KSk7XHJcblxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi55eiA9IHJvdGF0ZShkVmVydGV4UG9zaXRpb24ueSwgZFZlcnRleFBvc2l0aW9uLnosIHJvdHYpO1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwueXogICA9IHJvdGF0ZShkVmVydGV4Tm9ybWFsLnksIGRWZXJ0ZXhOb3JtYWwueiwgcm90dik7XHJcblxyXG4gICAgICAgIC8vIHJvdGF0aW9uIG9mIHRoaXMgYmxhZGUgYXMgYSB2ZWN0b3JcclxuICAgICAgICByb3R2ID0gdmVjMihjb3Mob2Zmc2V0LncpLCBzaW4ob2Zmc2V0LncpKTtcclxuXHJcbiAgICAgICAgZFZlcnRleFBvc2l0aW9uLnh5ID0gcm90YXRlKGRWZXJ0ZXhQb3NpdGlvbi54LCBkVmVydGV4UG9zaXRpb24ueSwgcm90dik7XHJcbiAgICAgICAgZFZlcnRleE5vcm1hbC54eSAgID0gcm90YXRlKGRWZXJ0ZXhOb3JtYWwueCwgZFZlcnRleE5vcm1hbC55LCByb3R2KTtcclxuXHJcbiAgICAgICAgcm90diA9IHZlYzIoY29zKHdpbmQpLCBzaW4od2luZCkpO1xyXG5cclxuICAgICAgICAvLyBXaW5kIGJsb3dzIGluIGF4aXMtYWxpZ25lZCBkaXJlY3Rpb24gdG8gbWFrZSB0aGluZ3Mgc2ltcGxlclxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi55eiA9IHJvdGF0ZShkVmVydGV4UG9zaXRpb24ueSwgZFZlcnRleFBvc2l0aW9uLnosIHJvdHYpO1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwueXogICA9IHJvdGF0ZShkVmVydGV4Tm9ybWFsLnksIGRWZXJ0ZXhOb3JtYWwueiwgcm90dik7XHJcblxyXG4gICAgICAgIC8vIExvY2FsIGJsYWRlIHBvc2l0aW9uIGluIGZpZWxkXHJcbiAgICAgICAgLy8gYmVjYXVzZSB0aGUgcG9zaXRpb25zIGFyZSBzaGlmdGVkIGJ5IGhhbGYgdGhlIHNpemUgb2YgdGhlIGZpZWxkXHJcbiAgICAgICAgZEJsYWRlRmllbGRYWlBvcyA9IGJsYWRlUG9zIC8gJHtmaWVsZFNjYWxlUGFyYW1OYW1lfS54eiArIEZJRUxEX1NJWkVfSF9GO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNhbXBsZSB0aGUgaGVpZ2h0ZmllbGQgZGF0YSB0ZXh0dXJlIHRvIGdldCBhbHRpdHVkZSBmb3IgdGhpcyBibGFkZSBwb3NpdGlvblxyXG4gICAgICAgIGZsb2F0IGJsYWRlQWx0aXR1ZGUgPSBnZXRGaWVsZEhlaWdodEludGVycG9sYXRlZChkQmxhZGVGaWVsZFhaUG9zKSAqICR7ZmllbGRTY2FsZVBhcmFtTmFtZX0ueTtcclxuICAgICAgICBmbG9hdCBncmFzc0ZhY3RvciAgID0gZ2V0R3Jhc3NGYWN0b3IoZEJsYWRlRmllbGRYWlBvcyk7XHJcblxyXG4gICAgICAgIGZsb2F0IGRpc3RhbmNlUXVhZENlbnRlclRvRHJhdyA9IGRpc3RhbmNlKGJsYWRlQWx0aXR1ZGUsIGRyYXdQb3NBbHRpdHVkZSk7XHJcbiAgICAgICAgZmxvYXQgZGVnZW5lcmF0ZUJ5RGlzdGFuY2VGcm9tQmxhZGVUb0RyYXcgPSBzbW9vdGhzdGVwKDAuODEsIDEuMCwgTUFYX1pJTklUX0RJU1RBTkNFIC8gZGlzdGFuY2VRdWFkQ2VudGVyVG9EcmF3KTtcclxuXHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIHdlIHdhbnQgdGhlIGdyYXNzIHRvIGFwcGVhciBvciBub3RcclxuICAgICAgICAvLyBVc2UgdGhlIG5vaXNlIGNoYW5uZWwgdG8gcGVydHVyYiB0aGUgYmxhZGUgYWx0aXR1ZGUgZ3Jhc3Mgc3RhcnRzIGdyb3dpbmcgYXQuXHJcbiAgICAgICAgLy8gZmxvYXQgbm9pc3lBbHRpdHVkZSA9IGdyYXNzRmFjdG9yICogVFJBTlNJVElPTl9OT0lTRSAtIChUUkFOU0lUSU9OX05PSVNFIC8gMi4wKTtcclxuICAgICAgICAvLyBmbG9hdCBkZWdlbmVyYXRlQnlOb2lzZSA9IChjbGFtcChub2lzeUFsdGl0dWRlLCBUUkFOU0lUSU9OX0xPVywgVFJBTlNJVElPTl9ISUdIKSAtIFRSQU5TSVRJT05fTE9XKSAqICgxLjAgLyAoVFJBTlNJVElPTl9ISUdIIC0gVFJBTlNJVElPTl9MT1cpKTtcclxuXHJcbiAgICAgICAgLy8gVHJhbnNpdGlvbiBnZW9tZXRyeSB0b3dhcmQgZGVnZW5lcmF0ZSBhcyB3ZSBhcHByb2FjaCBmaWVsZCBhbHRpdHVkZVxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbiAqPSBncmFzc0ZhY3RvciAqIGRlZ2VuZXJhdGVCeURpc3RhbmNlRnJvbUJsYWRlVG9EcmF3ICogZGVnZW5lcmF0ZUJ5RGlzdGFuY2VGcm9tQmxhZGVUb1F1YWRDZW50ZXI7IC8vIGRlZ2VuZXJhdGVCeU5vaXNlXHJcblxyXG4gICAgICAgIC8vIFRyYW5zbGF0ZSB0byB3b3JsZCBjb29yZGluYXRlc1xyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi54ICs9IGJsYWRlUG9zLng7XHJcbiAgICAgICAgZFZlcnRleFBvc2l0aW9uLnkgKz0gYmxhZGVQb3MueTtcclxuICAgICAgICBkVmVydGV4UG9zaXRpb24ueiArPSBibGFkZUFsdGl0dWRlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyYW5zbGF0ZSB0byB4eiBwbGFuZVxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbiA9IGRWZXJ0ZXhQb3NpdGlvbi54enk7XHJcbiAgICAgICAgZFZlcnRleE5vcm1hbCAgID0gZFZlcnRleE5vcm1hbC54enk7XHJcblxyXG4gICAgICAgIC8vIGdyYXNzIHRleHR1cmUgY29vcmRpbmF0ZSBmb3IgdGhpcyB2ZXJ0ZXhcclxuICAgICAgICB2VXZDb29yZCA9IHZlYzIoZEVkZ2VPZkJsYWRlLCBkRGl2VmVydGV4SW5kZXggKiAyLjApO1xyXG5cclxuICAgICAgICAvLyBmaWVsZCB0ZXh0dXJlIGNvb3JkaW5hdGUgZm9yIHRoaXMgdmVydGV4XHJcbiAgICAgICAgdlV2RmllbGRDb29yZCA9IGRCbGFkZUZpZWxkWFpQb3MgLyBGSUVMRF9TSVpFX0Y7XHJcblxyXG4gICAgICAgIC8vIFZlcnRleCBjb2xvciBtdXN0IGJlIGJyaWdodGVyIGJlY2F1c2UgaXQgaXMgbXVsdGlwbGllZCB3aXRoIGJsYWRlIHRleHR1cmVcclxuICAgICAgICAvLyBFYWNoIGJsYWRlIGlzIHJhbmRvbWx5IGNvbG91cml6ZWQgYSBiaXQgYnkgaXRzIHBvc2l0aW9uXHJcbiAgICAgICAgdkNvbG9yID0gdmVjMyhjb3MoJHtvZmZzZXRBdHRyTmFtZX0ueCksIHNpbigke29mZnNldEF0dHJOYW1lfS55KSwgc2luKCR7b2Zmc2V0QXR0ck5hbWV9LngpKTtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIGh0dHBzOi8vY29tbXVuaXR5Lmtocm9ub3Mub3JnL3QvZGlzY2FyZGluZy1wb2x5Z29ucy1pbi12ZXJ0ZXgtc2hhZGVyLzEwMzgzOS85XHJcbmV4cG9ydCBjb25zdCBzdGFydFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgJHtzdGFydFV2MFZTfVxyXG5cclxuICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcblxyXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBkaWZmdXNlUFMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1RGlmZnVzZVRleDtcclxuICAgIHVuaWZvcm0gdmVjMyB1RGlmZnVzZUNvbG9yO1xyXG4gICAgdW5pZm9ybSB2ZWMzIHVEaWZmdXNlQ29sb3JSYW5kb207XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZVdkZpZWxkQ29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2Q29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzMgdkNvbG9yO1xyXG5cclxuICAgIHZlYzMgYXV0b0dhbW1hQ29ycmVjdElucHV0KHZlYzMgdikge1xyXG4gICAgICAgICNpZiBkZWZpbmVkKEdBTU1BX05PUk1BTElaRSlcclxuICAgICAgICAgICAgcmV0dXJuIGdhbW1hQ29ycmVjdElucHV0KHYpO1xyXG4gICAgICAgICNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICNlbmRpZlxyXG4gICAgfVxyXG5cclxuICAgIHZlYzQgYXV0b0dhbW1hQ29ycmVjdElucHV0KHZlYzQgdikge1xyXG4gICAgICAgICNpZiBkZWZpbmVkKEdBTU1BX05PUk1BTElaRSlcclxuICAgICAgICAgICAgcmV0dXJuIGdhbW1hQ29ycmVjdElucHV0KHYpO1xyXG4gICAgICAgICNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICNlbmRpZlxyXG4gICAgfVxyXG5cclxuICAgIHZvaWQgZ2V0QWxiZWRvKCkge1xyXG5cclxuICAgICAgICB2ZWMzIHRleCA9IGF1dG9HYW1tYUNvcnJlY3RJbnB1dCh0ZXh0dXJlMkQodURpZmZ1c2VUZXgsIHZVdkNvb3JkKS5yZ2IpO1xyXG5cclxuICAgICAgICBkQWxiZWRvID0gdGV4ICogdURpZmZ1c2VDb2xvciArIHZDb2xvciAqIHVEaWZmdXNlQ29sb3JSYW5kb207XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgY2h1bmtzID0ge1xyXG5cclxuICAgIC4uLmhlaWdodE1hcEZhY3RvcnNDaHVua3MsXHJcblxyXG4gICAgaGVpZ2h0TWFwU2FtcGxlcixcclxuXHJcbiAgICBkZWZpbmVzVlMsXHJcbiAgICBkZWZpbmVzQmxhZGVWUyxcclxuICAgIGJsYWRlRGVjb2RlclZTLFxyXG4gICAgY2FsY3VsYXRlTG9jYWxWUyxcclxuXHJcbiAgICBmaWVsZEhlaWdodE1hcFZTLFxyXG5cclxuICAgIC8vIFZlcnRleFxyXG4gICAgYmFzZVZTLFxyXG4gICAgYmFzZUNsZWFyU3ViVlMsXHJcbiAgICB0cmFuc2Zvcm1WUyxcclxuICAgIHRyYW5zZm9ybURlY2xWUyxcclxuICAgIGluc3RhbmNpbmdWUyxcclxuICAgIHRyYW5zZm9ybUluc3RhbmNpbmdWUyxcclxuICAgIG5vcm1hbENvcmVWUyxcclxuICAgIG5vcm1hbFZTLFxyXG4gICAgdXYwVlMsXHJcbiAgICBzdGFydFZTLFxyXG5cclxuICAgIC8vIEZyYWdtZW50XHJcbiAgICBkaWZmdXNlUFMsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyYXNzU2hhZGVyT3B0aW9ucyB7XHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgZGVwdGg6IG51bWJlcixcclxuICAgIGhlaWdodE1hcENodW5rU2l6ZTogbnVtYmVyLFxyXG4gICAgaGVpZ2h0TWFwRm9ybWF0OiBUSGVpZ2h0TWFwRm9ybWF0LFxyXG4gICAgYmxhZGVNYXhIZWlnaHQ6IG51bWJlcixcclxuICAgIGxvZDBCbGFkZVNlZ3M6IG51bWJlcixcclxuICAgIGxvZDFCbGFkZVNlZ3M6IG51bWJlcixcclxuICAgIGxvZDJCbGFkZVNlZ3M6IG51bWJlcixcclxuICAgIHJhZGl1czogbnVtYmVyLFxyXG4gICAgdHJhbnNpdGlvbkxvdzogbnVtYmVyLFxyXG4gICAgdHJhbnNpdGlvbkhpZ2g6IG51bWJlcixcclxuICAgIGNodW5rc1N0b3JlPzogdHlwZW9mIGNodW5rcyxcclxuICAgIGVuZ2luZVZlcnNpb24/OiAndjEnIHwgJ3YyJ1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0R3Jhc3NTaGFkZXJDaHVua3Moe1xyXG4gICAgd2lkdGgsXHJcbiAgICBkZXB0aCxcclxuICAgIGhlaWdodE1hcENodW5rU2l6ZSxcclxuICAgIGhlaWdodE1hcEZvcm1hdCxcclxuICAgIGJsYWRlTWF4SGVpZ2h0LFxyXG4gICAgbG9kMEJsYWRlU2VncyxcclxuICAgIGxvZDFCbGFkZVNlZ3MsXHJcbiAgICBsb2QyQmxhZGVTZWdzLFxyXG4gICAgcmFkaXVzLFxyXG4gICAgdHJhbnNpdGlvbkxvdyxcclxuICAgIHRyYW5zaXRpb25IaWdoLFxyXG4gICAgY2h1bmtzU3RvcmUgPSBjaHVua3MsXHJcbiAgICBlbmdpbmVWZXJzaW9uID0gJ3YxJyxcclxufTogSUdyYXNzU2hhZGVyT3B0aW9ucyk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xyXG5cclxuICAgIGNvbnN0IGRlZmluZXNWUyA9IGNodW5rc1N0b3JlLmRlZmluZXNWU1xyXG4gICAgICAgIC5yZXBsYWNlKCclJUhNX05VTV9DSFVOS1NfWCUlJywgU3RyaW5nKCh3aWR0aCAtIDEpIC8gKGhlaWdodE1hcENodW5rU2l6ZSAtIDEpIHwgMCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlSE1fQ0hVTktfU0laRSUlJywgU3RyaW5nKGhlaWdodE1hcENodW5rU2l6ZSB8IDApKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUZJRUxEX1NJWkVfWCUlJywgU3RyaW5nKHdpZHRoKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVGSUVMRF9TSVpFX1olJScsIFN0cmluZyhkZXB0aCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlRklFTERfU0laRV9YX0YlJScsIHdpZHRoLnRvRml4ZWQoMSkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlRklFTERfU0laRV9aX0YlJScsIGRlcHRoLnRvRml4ZWQoMSkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlQkxBREVfSEVJR0hUX1RBTEwlJScsIGJsYWRlTWF4SGVpZ2h0LnRvRml4ZWQoMSkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlUEFUQ0hfU0laRSUlJywgcmFkaXVzLnRvRml4ZWQoMSkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlVFJBTlNJVElPTl9MT1clJScsIHRyYW5zaXRpb25Mb3cudG9TdHJpbmcoKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVUUkFOU0lUSU9OX0hJR0glJScsIHRyYW5zaXRpb25IaWdoLnRvU3RyaW5nKCkpO1xyXG4gICAgXHJcbiAgICBjb25zdCBkZWZpbmVzQmxhZGVWUyA9IGNodW5rc1N0b3JlLmRlZmluZXNCbGFkZVZTXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlTE9EMF9CTEFERV9TRUdTJSUnLCBsb2QwQmxhZGVTZWdzLnRvRml4ZWQoMSkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlTE9EMV9CTEFERV9TRUdTJSUnLCBsb2QxQmxhZGVTZWdzLnRvRml4ZWQoMSkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlTE9EMl9CTEFERV9TRUdTJSUnLCBsb2QyQmxhZGVTZWdzLnRvRml4ZWQoMSkpO1xyXG5cclxuICAgIGNvbnN0IGhlaWdodE1hcFZTID0gY2h1bmtzU3RvcmUuaGVpZ2h0TWFwU2FtcGxlci5yZXBsYWNlQWxsKCclJUhFSUdIVF9NQVBfU0FNUExFUiUlJywgZ2V0U2FtcGxlclR5cGUoaGVpZ2h0TWFwRm9ybWF0KSk7XHJcbiAgICBjb25zdCBiYXNlQ2xlYXJWUyA9IGNodW5rc1N0b3JlLmJhc2VWUyArIGhlaWdodE1hcFZTO1xyXG4gICAgY29uc3QgaGVpZ2h0RmFjdG9yVlMgPSBnZXRGaWVsZEhlaWdodEZhY3RvclZTKGhlaWdodE1hcEZvcm1hdCwgY2h1bmtzU3RvcmUpO1xyXG5cclxuICAgIGNvbnN0IHRyYW5zZm9ybVZTID0gaGVpZ2h0RmFjdG9yVlNcclxuICAgICAgICAgICAgICAgICAgICAgICsgY2h1bmtzU3RvcmUuZmllbGRIZWlnaHRNYXBWU1xyXG4gICAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5ibGFkZURlY29kZXJWU1xyXG4gICAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5jYWxjdWxhdGVMb2NhbFZTXHJcbiAgICAgICAgICAgICAgICAgICAgICArIGNodW5rc1N0b3JlLnRyYW5zZm9ybVZTO1xyXG5cclxuICAgIGNvbnN0IGRpZmZ1c2VQUyA9ICcjZGVmaW5lIEdBTU1BX05PUk1BTElaRVxcclxcbidcclxuICAgICAgICAgICAgICAgICAgICArIGNodW5rc1N0b3JlLmRpZmZ1c2VQUztcclxuXHJcbiAgICBpZiAoZW5naW5lVmVyc2lvbiA9PT0gJ3YyJykge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybTJWUyA9IGRlZmluZXNWUyArIGRlZmluZXNCbGFkZVZTICsgYmFzZUNsZWFyVlMgKyB0cmFuc2Zvcm1WUztcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLy8gVmVydGV4XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybVZTOiB0cmFuc2Zvcm0yVlMsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybUNvcmVWUzogXCJcIixcclxuICAgICAgICAgICAgdHJhbnNmb3JtSW5zdGFuY2luZ1ZTOiBcIlwiLFxyXG4gICAgICAgICAgICBub3JtYWxDb3JlVlM6IGNodW5rc1N0b3JlLm5vcm1hbENvcmVWUyxcclxuXHJcbiAgICAgICAgICAgIC8vIEZyYWdtZW50XHJcbiAgICAgICAgICAgIGRpZmZ1c2VQUzogZGlmZnVzZVBTLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGJhc2VWUyA9IGRlZmluZXNWUyArXHJcbiAgICAgICAgICAgICAgICAgICBkZWZpbmVzQmxhZGVWUyArXHJcbiAgICAgICAgICAgICAgICAgICBiYXNlQ2xlYXJWUyArXHJcbiAgICAgICAgICAgICAgICAgICBjaHVua3NTdG9yZS5iYXNlQ2xlYXJTdWJWUztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIC8vIFZlcnRleFxyXG4gICAgICAgIGJhc2VWUyxcclxuICAgICAgICBzdGFydFZTOiBjaHVua3NTdG9yZS5zdGFydFZTLFxyXG4gICAgICAgIHRyYW5zZm9ybVZTOiB0cmFuc2Zvcm1WUyxcclxuICAgICAgICB0cmFuc2Zvcm1EZWNsVlM6IGNodW5rc1N0b3JlLnRyYW5zZm9ybURlY2xWUyxcclxuICAgICAgICBpbnN0YW5jaW5nVlM6IGNodW5rc1N0b3JlLmluc3RhbmNpbmdWUyxcclxuICAgICAgICBub3JtYWxWUzogY2h1bmtzU3RvcmUubm9ybWFsVlMsXHJcbiAgICAgICAgdXYwVlM6IGNodW5rc1N0b3JlLnV2MFZTLFxyXG5cclxuICAgICAgICAvLyBGcmFnbWVudFxyXG4gICAgICAgIGRpZmZ1c2VQUzogZGlmZnVzZVBTLFxyXG4gICAgfTtcclxufSIsIi8qXHJcbiAqIEEgc3BlZWQtaW1wcm92ZWQgcGVybGluIGFuZCBzaW1wbGV4IG5vaXNlIGFsZ29yaXRobXMgZm9yIDJELlxyXG4gKlxyXG4gKiBCYXNlZCBvbiBleGFtcGxlIGNvZGUgYnkgU3RlZmFuIEd1c3RhdnNvbiAoc3RlZ3VAaXRuLmxpdS5zZSkuXHJcbiAqIE9wdGltaXNhdGlvbnMgYnkgUGV0ZXIgRWFzdG1hbiAocGVhc3RtYW5AZHJpenpsZS5zdGFuZm9yZC5lZHUpLlxyXG4gKiBCZXR0ZXIgcmFuayBvcmRlcmluZyBtZXRob2QgYnkgU3RlZmFuIEd1c3RhdnNvbiBpbiAyMDEyLlxyXG4gKiBDb252ZXJ0ZWQgdG8gSmF2YXNjcmlwdCBieSBKb3NlcGggR2VudGxlLlxyXG4gKlxyXG4gKiBWZXJzaW9uIDIwMTItMDMtMDlcclxuICpcclxuICogVGhpcyBjb2RlIHdhcyBwbGFjZWQgaW4gdGhlIHB1YmxpYyBkb21haW4gYnkgaXRzIG9yaWdpbmFsIGF1dGhvcixcclxuICogU3RlZmFuIEd1c3RhdnNvbi4gWW91IG1heSB1c2UgaXQgYXMgeW91IHNlZSBmaXQsIGJ1dFxyXG4gKiBhdHRyaWJ1dGlvbiBpcyBhcHByZWNpYXRlZC5cclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogVHlwZVNjcmlwdGlmaWVkIDIwMTZcclxuICovXHJcblxyXG5jbGFzcyBHcmFkIHtcclxuXHRcclxuXHR4OiBudW1iZXJcclxuXHR5OiBudW1iZXJcclxuXHR6OiBudW1iZXJcclxuXHJcblx0Y29uc3RydWN0b3IgKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpIHtcclxuXHRcdHRoaXMueCA9IHhcclxuXHRcdHRoaXMueSA9IHlcclxuXHRcdHRoaXMueiA9IHpcclxuXHR9XHJcblxyXG5cdGRvdDIgKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcblx0XHRyZXR1cm4gdGhpcy54ICogeCArIHRoaXMueSAqIHlcclxuXHR9XHJcblxyXG5cdGRvdDMgKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpIHtcclxuXHRcdHJldHVybiB0aGlzLnggKiB4ICsgdGhpcy55ICogeSArIHRoaXMueiAqIHpcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IEYyID0gMC41ICogKE1hdGguc3FydCgzKSAtIDEpXHJcbmNvbnN0IEcyID0gKDMgLSBNYXRoLnNxcnQoMykpIC8gNlxyXG5cclxuY29uc3QgcGVybSA9IG5ldyBBcnJheSg1MTIpXHJcbmNvbnN0IGdyYWRQID0gbmV3IEFycmF5KDUxMilcclxuXHJcbmNvbnN0IGdyYWQzID0gW1xyXG5cdG5ldyBHcmFkKDEsMSwwKSwgbmV3IEdyYWQoLTEsMSwwKSwgbmV3IEdyYWQoMSwtMSwwKSwgbmV3IEdyYWQoLTEsLTEsMCksXHJcblx0bmV3IEdyYWQoMSwwLDEpLCBuZXcgR3JhZCgtMSwwLDEpLCBuZXcgR3JhZCgxLDAsLTEpLCBuZXcgR3JhZCgtMSwwLC0xKSxcclxuXHRuZXcgR3JhZCgwLDEsMSksIG5ldyBHcmFkKDAsLTEsMSksIG5ldyBHcmFkKDAsMSwtMSksIG5ldyBHcmFkKDAsLTEsLTEpXHJcbl1cclxuXHJcbmNvbnN0IHAgPSBbXHJcblx0MTUxLDE2MCwxMzcsOTEsOTAsMTUsXHJcblx0MTMxLDEzLDIwMSw5NSw5Niw1MywxOTQsMjMzLDcsMjI1LDE0MCwzNiwxMDMsMzAsNjksMTQyLDgsOTksMzcsMjQwLDIxLDEwLDIzLFxyXG5cdDE5MCwgNiwxNDgsMjQ3LDEyMCwyMzQsNzUsMCwyNiwxOTcsNjIsOTQsMjUyLDIxOSwyMDMsMTE3LDM1LDExLDMyLDU3LDE3NywzMyxcclxuXHQ4OCwyMzcsMTQ5LDU2LDg3LDE3NCwyMCwxMjUsMTM2LDE3MSwxNjgsIDY4LDE3NSw3NCwxNjUsNzEsMTM0LDEzOSw0OCwyNywxNjYsXHJcblx0NzcsMTQ2LDE1OCwyMzEsODMsMTExLDIyOSwxMjIsNjAsMjExLDEzMywyMzAsMjIwLDEwNSw5Miw0MSw1NSw0NiwyNDUsNDAsMjQ0LFxyXG5cdDEwMiwxNDMsNTQsIDY1LDI1LDYzLDE2MSwgMSwyMTYsODAsNzMsMjA5LDc2LDEzMiwxODcsMjA4LCA4OSwxOCwxNjksMjAwLDE5NixcclxuXHQxMzUsMTMwLDExNiwxODgsMTU5LDg2LDE2NCwxMDAsMTA5LDE5OCwxNzMsMTg2LCAzLDY0LDUyLDIxNywyMjYsMjUwLDEyNCwxMjMsXHJcblx0NSwyMDIsMzgsMTQ3LDExOCwxMjYsMjU1LDgyLDg1LDIxMiwyMDcsMjA2LDU5LDIyNyw0NywxNiw1OCwxNywxODIsMTg5LDI4LDQyLFxyXG5cdDIyMywxODMsMTcwLDIxMywxMTksMjQ4LDE1MiwgMiw0NCwxNTQsMTYzLCA3MCwyMjEsMTUzLDEwMSwxNTUsMTY3LCA0MywxNzIsOSxcclxuXHQxMjksMjIsMzksMjUzLCAxOSw5OCwxMDgsMTEwLDc5LDExMywyMjQsMjMyLDE3OCwxODUsIDExMiwxMDQsMjE4LDI0Niw5NywyMjgsXHJcblx0MjUxLDM0LDI0MiwxOTMsMjM4LDIxMCwxNDQsMTIsMTkxLDE3OSwxNjIsMjQxLCA4MSw1MSwxNDUsMjM1LDI0OSwxNCwyMzksMTA3LFxyXG5cdDQ5LDE5MiwyMTQsIDMxLDE4MSwxOTksMTA2LDE1NywxODQsIDg0LDIwNCwxNzYsMTE1LDEyMSw1MCw0NSwxMjcsIDQsMTUwLDI1NCxcclxuXHQxMzgsMjM2LDIwNSw5MywyMjIsMTE0LDY3LDI5LDI0LDcyLDI0MywxNDEsMTI4LDE5NSw3OCw2NiwyMTUsNjEsMTU2LDE4MFxyXG5dXHJcblxyXG4vLyBUaGlzIGlzbid0IGEgdmVyeSBnb29kIHNlZWRpbmcgZnVuY3Rpb24sIGJ1dCBpdCB3b3JrcyBvay4gSXQgc3VwcG9ydHMgMl4xNlxyXG4vLyBkaWZmZXJlbnQgc2VlZCB2YWx1ZXMuIFdyaXRlIHNvbWV0aGluZyBiZXR0ZXIgaWYgeW91IG5lZWQgbW9yZSBzZWVkcy5cclxuZnVuY3Rpb24gc2VlZCAoc2VlZDogbnVtYmVyKSB7XHJcblx0aWYgKHNlZWQgPiAwICYmIHNlZWQgPCAxKSB7XHJcblx0XHQvLyBTY2FsZSB0aGUgc2VlZCBvdXRcclxuXHRcdHNlZWQgKj0gNjU1MzZcclxuXHR9XHJcblxyXG5cdHNlZWQgPSBNYXRoLmZsb29yKHNlZWQpXHJcblx0aWYgKHNlZWQgPCAyNTYpIHtcclxuXHRcdHNlZWQgfD0gc2VlZCA8PCA4XHJcblx0fVxyXG5cclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XHJcblx0XHRsZXQgdjogbnVtYmVyXHJcblx0XHRpZiAoaSAmIDEpIHtcclxuXHRcdFx0diA9IHBbaV0gXiAoc2VlZCAmIDI1NSlcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHYgPSBwW2ldIF4gKChzZWVkID4+IDgpICYgMjU1KVxyXG5cdFx0fVxyXG5cclxuXHRcdHBlcm1baV0gPSBwZXJtW2kgKyAyNTZdID0gdlxyXG5cdFx0Z3JhZFBbaV0gPSBncmFkUFtpICsgMjU2XSA9IGdyYWQzW3YgJSAxMl1cclxuXHR9XHJcbn1cclxuXHJcbnNlZWQoMClcclxuXHJcbi8vIDJEIHNpbXBsZXggbm9pc2VcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2ltcGxleCh4aW46IG51bWJlciwgeWluOiBudW1iZXIpIHtcclxuXHRsZXQgbjA6IG51bWJlciwgbjE6IG51bWJlciwgbjI6IG51bWJlciAvLyBOb2lzZSBjb250cmlidXRpb25zIGZyb20gdGhlIHRocmVlIGNvcm5lcnNcclxuXHQvLyBTa2V3IHRoZSBpbnB1dCBzcGFjZSB0byBkZXRlcm1pbmUgd2hpY2ggc2ltcGxleCBjZWxsIHdlJ3JlIGluXHJcblx0Y29uc3QgcyA9ICh4aW4gKyB5aW4pICogRjIgLy8gSGFpcnkgZmFjdG9yIGZvciAyRFxyXG5cdGxldCBpID0gTWF0aC5mbG9vcih4aW4gKyBzKVxyXG5cdGxldCBqID0gTWF0aC5mbG9vcih5aW4gKyBzKVxyXG5cdGNvbnN0IHQgPSAoaSArIGopICogRzJcclxuXHRjb25zdCB4MCA9IHhpbiAtIGkgKyB0IC8vIFRoZSB4LHkgZGlzdGFuY2VzIGZyb20gdGhlIGNlbGwgb3JpZ2luLCB1bnNrZXdlZC5cclxuXHRjb25zdCB5MCA9IHlpbiAtIGogKyB0XHJcblx0Ly8gRm9yIHRoZSAyRCBjYXNlLCB0aGUgc2ltcGxleCBzaGFwZSBpcyBhbiBlcXVpbGF0ZXJhbCB0cmlhbmdsZS5cclxuXHQvLyBEZXRlcm1pbmUgd2hpY2ggc2ltcGxleCB3ZSBhcmUgaW4uXHJcblx0bGV0IGkxOiBudW1iZXIsIGoxOiBudW1iZXIgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIChtaWRkbGUpIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGopIGNvb3Jkc1xyXG5cdGlmICh4MCA+IHkwKSB7IC8vIGxvd2VyIHRyaWFuZ2xlLCBYWSBvcmRlcjogKDAsMCktPigxLDApLT4oMSwxKVxyXG5cdFx0aTEgPSAxXHJcblx0XHRqMSA9IDBcclxuXHR9IGVsc2UgeyAgICAvLyB1cHBlciB0cmlhbmdsZSwgWVggb3JkZXI6ICgwLDApLT4oMCwxKS0+KDEsMSlcclxuXHRcdGkxID0gMFxyXG5cdFx0ajEgPSAxXHJcblx0fVxyXG5cdC8vIEEgc3RlcCBvZiAoMSwwKSBpbiAoaSxqKSBtZWFucyBhIHN0ZXAgb2YgKDEtYywtYykgaW4gKHgseSksIGFuZFxyXG5cdC8vIGEgc3RlcCBvZiAoMCwxKSBpbiAoaSxqKSBtZWFucyBhIHN0ZXAgb2YgKC1jLDEtYykgaW4gKHgseSksIHdoZXJlXHJcblx0Ly8gYyA9ICgzLXNxcnQoMykpLzZcclxuXHRjb25zdCB4MSA9IHgwIC0gaTEgKyBHMiAvLyBPZmZzZXRzIGZvciBtaWRkbGUgY29ybmVyIGluICh4LHkpIHVuc2tld2VkIGNvb3Jkc1xyXG5cdGNvbnN0IHkxID0geTAgLSBqMSArIEcyXHJcblx0Y29uc3QgeDIgPSB4MCAtIDEgKyAyICogRzIgLy8gT2Zmc2V0cyBmb3IgbGFzdCBjb3JuZXIgaW4gKHgseSkgdW5za2V3ZWQgY29vcmRzXHJcblx0Y29uc3QgeTIgPSB5MCAtIDEgKyAyICogRzJcclxuXHQvLyBXb3JrIG91dCB0aGUgaGFzaGVkIGdyYWRpZW50IGluZGljZXMgb2YgdGhlIHRocmVlIHNpbXBsZXggY29ybmVyc1xyXG5cdGkgJj0gMjU1XHJcblx0aiAmPSAyNTVcclxuXHRjb25zdCBnaTAgPSBncmFkUFtpICsgcGVybVtqXV1cclxuXHRjb25zdCBnaTEgPSBncmFkUFtpICsgaTEgKyBwZXJtW2ogKyBqMV1dXHJcblx0Y29uc3QgZ2kyID0gZ3JhZFBbaSArIDEgKyBwZXJtW2ogKyAxXV1cclxuXHQvLyBDYWxjdWxhdGUgdGhlIGNvbnRyaWJ1dGlvbiBmcm9tIHRoZSB0aHJlZSBjb3JuZXJzXHJcblx0bGV0IHQwID0gMC41IC0geDAgKiB4MCAtIHkwICogeTBcclxuXHRpZiAodDAgPCAwKSB7XHJcblx0XHRuMCA9IDBcclxuXHR9IGVsc2Uge1xyXG5cdFx0dDAgKj0gdDBcclxuXHRcdG4wID0gdDAgKiB0MCAqIGdpMC5kb3QyKHgwLCB5MCkgIC8vICh4LHkpIG9mIGdyYWQzIHVzZWQgZm9yIDJEIGdyYWRpZW50XHJcblx0fVxyXG5cdGxldCB0MSA9IDAuNSAtIHgxICogeDEgLSB5MSAqIHkxXHJcblx0aWYgKHQxIDwgMCkge1xyXG5cdFx0bjEgPSAwXHJcblx0fSBlbHNlIHtcclxuXHRcdHQxICo9IHQxXHJcblx0XHRuMSA9IHQxICogdDEgKiBnaTEuZG90Mih4MSwgeTEpXHJcblx0fVxyXG5cdGxldCB0MiA9IDAuNSAtIHgyICogeDIgLSB5MiAqIHkyXHJcblx0aWYgKHQyIDwgMCkge1xyXG5cdFx0bjIgPSAwXHJcblx0fSBlbHNlIHtcclxuXHRcdHQyICo9IHQyXHJcblx0XHRuMiA9IHQyICogdDIgKiBnaTIuZG90Mih4MiwgeTIpXHJcblx0fVxyXG5cdC8vIEFkZCBjb250cmlidXRpb25zIGZyb20gZWFjaCBjb3JuZXIgdG8gZ2V0IHRoZSBmaW5hbCBub2lzZSB2YWx1ZS5cclxuXHQvLyBUaGUgcmVzdWx0IGlzIHNjYWxlZCB0byByZXR1cm4gdmFsdWVzIGluIHRoZSBpbnRlcnZhbCBbLTEsMV0uXHJcblx0cmV0dXJuIDcwICogKG4wICsgbjEgKyBuMilcclxufSIsImV4cG9ydCBpbnRlcmZhY2UgSUJydXNoU2V0dGluZ3Mge1xyXG4gICAgcmVhZG9ubHkgYWN0aXZlOiBudW1iZXIsXHJcbiAgICByZWFkb25seSBzaXplOiBudW1iZXIsXHJcbiAgICByZWFkb25seSBvcGFjaXR5OiBudW1iZXIsXHJcbiAgICByZWFkb25seSB0ZXh0dXJlczogcGN4LkFzc2V0W107XHJcbn0iLCJleHBvcnQgY29uc3QgdmVydGV4U2hhZGVyID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgYXR0cmlidXRlIHZlYzMgYVBvc2l0aW9uO1xyXG4gICAgYXR0cmlidXRlIHZlYzIgYVV2MDtcclxuXHJcbiAgICB1bmlmb3JtIG1hdDQgbWF0cml4X21vZGVsO1xyXG4gICAgdW5pZm9ybSBtYXQ0IG1hdHJpeF92aWV3UHJvamVjdGlvbjtcclxuXHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2MDtcclxuXHJcbiAgICB2b2lkIG1haW4odm9pZClcclxuICAgIHtcclxuICAgICAgICB2VXYwID0gYVV2MDtcclxuICAgICAgICBnbF9Qb3NpdGlvbiA9IG1hdHJpeF92aWV3UHJvamVjdGlvbiAqIG1hdHJpeF9tb2RlbCAqIHZlYzQoYVBvc2l0aW9uLCAxLjApO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZhY3Rvck1ldGhvZCA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZhcnlpbmcgdmVjMiB2VXYwO1xyXG5cclxuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVIZWlnaHRNYXA7XHJcbiAgICB1bmlmb3JtIGZsb2F0IHVCcnVzaE9wYWNpdHk7XHJcbiAgICB1bmlmb3JtIHZlYzQgdUJydXNoTWFzaztcclxuXHJcbiAgICBmbG9hdCBnZXRGYWN0b3IoKSB7XHJcbiAgICAgICAgdmVjNCBoZWlnaHRNYXAgPSB0ZXh0dXJlMkQodUhlaWdodE1hcCwgdlV2MCk7XHJcbiAgICAgICAgZmxvYXQgaGVpZ2h0ICAgPSAoaGVpZ2h0TWFwLnIgKyBoZWlnaHRNYXAuZyArIGhlaWdodE1hcC5iKSAvIDMuMCAvIGhlaWdodE1hcC5hO1xyXG4gICAgICAgIGZsb2F0IGZhY3RvciAgID0gaGVpZ2h0ICogdUJydXNoT3BhY2l0eTtcclxuICAgICAgICByZXR1cm4gZmFjdG9yO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZyYWdtZW50U2hhZGVyID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgJHtmYWN0b3JNZXRob2R9XHJcblxyXG4gICAgdm9pZCBtYWluKHZvaWQpXHJcbiAgICB7XHJcbiAgICAgICAgZmxvYXQgZmFjdG9yID0gZ2V0RmFjdG9yKCk7XHJcbiAgICAgICAgdmVjNCBjb2xvciA9IHZlYzQodUJydXNoTWFzayAqIGZhY3Rvcik7XHJcblxyXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZyYWdtZW50SW52ZXJ0U2hhZGVyID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgJHtmYWN0b3JNZXRob2R9XHJcblxyXG4gICAgdm9pZCBtYWluKHZvaWQpXHJcbiAgICB7XHJcbiAgICAgICAgZmxvYXQgbGV2ZWxzID0gNC4wO1xyXG4gICAgICAgIGZsb2F0IGZhY3RvciA9IGdldEZhY3RvcigpO1xyXG4gICAgICAgIHZlYzQgY29sb3IgICA9IHZlYzQoZmFjdG9yKTtcclxuXHJcbiAgICAgICAgaWYgKHVCcnVzaE1hc2suciA+IDAuMCkgeyBjb2xvci5yID0gMC4wOyBsZXZlbHMgLT0gMS4wOyB9XHJcbiAgICAgICAgaWYgKHVCcnVzaE1hc2suZyA+IDAuMCkgeyBjb2xvci5nID0gMC4wOyBsZXZlbHMgLT0gMS4wOyB9XHJcbiAgICAgICAgaWYgKHVCcnVzaE1hc2suYiA+IDAuMCkgeyBjb2xvci5iID0gMC4wOyBsZXZlbHMgLT0gMS4wOyB9XHJcbiAgICAgICAgaWYgKHVCcnVzaE1hc2suYSA+IDAuMCkgeyBjb2xvci5hID0gMC4wOyBsZXZlbHMgLT0gMS4wOyB9XHJcblxyXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IGNvbG9yIC8gbGV2ZWxzO1xyXG4gICAgfVxyXG5gOyIsImltcG9ydCB7IElCcnVzaFNldHRpbmdzIH0gZnJvbSBcIi4vQnJ1c2gubWpzXCI7XHJcbmltcG9ydCB7IGZyYWdtZW50SW52ZXJ0U2hhZGVyLCBmcmFnbWVudFNoYWRlciwgdmVydGV4U2hhZGVyIH0gZnJvbSBcIi4vQ29sb3JQYWludGVyU2hhZGVycy5tanNcIjtcclxuaW1wb3J0IHsgc2V0UHJlY2lzaW9uIH0gZnJvbSBcIi4uL0V4dHJhcy9VdGlscy5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBwYWludGVyQ2FtZXJhRmFyID0gMTA7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2xvclBhaW50ZXIge1xyXG5cclxuICAgIHByaXZhdGUgX2xheWVyTmFtZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRpbmc6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9wYWludGVyTWFzazogRmxvYXQzMkFycmF5O1xyXG4gICAgcHJpdmF0ZSBfYnJ1c2hTZXR0aW5nczogSUJydXNoU2V0dGluZ3M7XHJcblxyXG4gICAgcHJpdmF0ZSBfYXBwOiBwY3guQXBwQmFzZTtcclxuICAgIHByaXZhdGUgX2J1ZmZlcjogcGN4LlRleHR1cmU7XHJcbiAgICBwcml2YXRlIF9wYWludGVyUmVuZGVyVGFyZ2V0OiBwY3guUmVuZGVyVGFyZ2V0O1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRlckNhbWVyYUVudGl0eTogcGN4LkVudGl0eTtcclxuXHJcbiAgICBwcml2YXRlIF9wYWludGVyU2hhZGVyOiBwY3guU2hhZGVyO1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRlck1hdGVyaWFsOiBwY3guTWF0ZXJpYWw7XHJcbiAgICBwcml2YXRlIF9wYWludGVyRW50aXR5OiBwY3guRW50aXR5O1xyXG5cclxuICAgIHByaXZhdGUgX3BhaW50ZXJJbnZlcnRTaGFkZXI6IHBjeC5TaGFkZXI7XHJcbiAgICBwcml2YXRlIF9wYWludGVySW52ZXJ0TWF0ZXJpYWw6IHBjeC5NYXRlcmlhbDtcclxuICAgIHByaXZhdGUgX3BhaW50ZXJJbnZlcnRFbnRpdHk6IHBjeC5FbnRpdHk7XHJcblxyXG4gICAgcHVibGljIGdldCBwYWludGluZygpICAgeyByZXR1cm4gdGhpcy5fcGFpbnRpbmc7IH1cclxuICAgIHB1YmxpYyBnZXQgY2FtZXJhRmFyKCkgIHsgcmV0dXJuIHBhaW50ZXJDYW1lcmFGYXI7IH1cclxuICAgIHB1YmxpYyBnZXQgYmFja2dyb3VuZCgpIHsgcmV0dXJuIHRoaXMuX2J1ZmZlcjsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogcGN4LkFwcEJhc2UsIGJ1ZmZlcjogcGN4LlRleHR1cmUsIGxheWVyTmFtZTogc3RyaW5nKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hc2sgPSBuZXcgRmxvYXQzMkFycmF5KDQpO1xyXG4gICAgICAgIHRoaXMuX2xheWVyTmFtZSA9IGxheWVyTmFtZTtcclxuICAgICAgICB0aGlzLl9idWZmZXIgPSBidWZmZXI7XHJcbiAgICAgICAgdGhpcy5fYXBwID0gYXBwO1xyXG5cclxuICAgICAgICB0aGlzLl9pbml0Q2FtZXJhKCk7XHJcbiAgICAgICAgdGhpcy5faW5pdFNoYWRlcnMoKTtcclxuICAgICAgICB0aGlzLl9pbml0TWF0ZXJpYWxzKCk7XHJcbiAgICAgICAgdGhpcy5faW5pdEVudGl0aWVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdENhbWVyYSgpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGFpbnRlckxheWVyID0gdGhpcy5fYXBwLnNjZW5lLmxheWVycy5nZXRMYXllckJ5TmFtZSh0aGlzLl9sYXllck5hbWUpITtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlclJlbmRlclRhcmdldCA9IG5ldyBwYy5SZW5kZXJUYXJnZXQoe1xyXG4gICAgICAgICAgICBjb2xvckJ1ZmZlcjogdGhpcy5fYnVmZmVyLFxyXG4gICAgICAgICAgICBmbGlwWTogdGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlLmlzV2ViR1BVLFxyXG4gICAgICAgICAgICBkZXB0aDogZmFsc2UsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkgPSBuZXcgcGMuRW50aXR5KCdUZXJyYWluUGFpbnRlckNhbWVyYScpO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuc2V0TG9jYWxQb3NpdGlvbigwLCAwLCBwYWludGVyQ2FtZXJhRmFyKTtcclxuICAgICAgICB0aGlzLl9wYWludGVyQ2FtZXJhRW50aXR5Lmxvb2tBdCgwLCAwLCAwKTtcclxuICAgICAgICB0aGlzLl9wYWludGVyQ2FtZXJhRW50aXR5LmFkZENvbXBvbmVudCgnY2FtZXJhJywge1xyXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBwYy5QUk9KRUNUSU9OX09SVEhPR1JBUEhJQyxcclxuICAgICAgICAgICAgY2xlYXJDb2xvckJ1ZmZlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIGNsZWFyRGVwdGhCdWZmZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICBwcmlvcml0eTogLTEsXHJcbiAgICAgICAgICAgIGxheWVyczogW3BhaW50ZXJMYXllci5pZF0sXHJcbiAgICAgICAgICAgIG5lYXJDbGlwOiAwLjEsXHJcbiAgICAgICAgICAgIGZhckNsaXA6IHBhaW50ZXJDYW1lcmFGYXIgKiAyLFxyXG4gICAgICAgICAgICByZW5kZXJUYXJnZXQ6IHRoaXMuX3BhaW50ZXJSZW5kZXJUYXJnZXQsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2FwcC5yb290LmFkZENoaWxkKHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkpO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVyQ2FtZXJhRW50aXR5LmVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wYWludGVyQ2FtZXJhRW50aXR5LmNhbWVyYSEuZnJ1c3R1bUN1bGxpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wYWludGVyQ2FtZXJhRW50aXR5LmNhbWVyYSEub3J0aG9IZWlnaHQgPSBwYWludGVyQ2FtZXJhRmFyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRFbnRpdGllcygpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGFpbnRlckxheWVyID0gdGhpcy5fYXBwLnNjZW5lLmxheWVycy5nZXRMYXllckJ5TmFtZSh0aGlzLl9sYXllck5hbWUpITtcclxuXHJcbiAgICAgICAgcGFpbnRlckxheWVyLnRyYW5zcGFyZW50U29ydE1vZGUgPSBwYy5TT1JUTU9ERV9NQU5VQUw7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkgID0gbmV3IHBjLkVudGl0eSgnVGVycmFpbkJydXNoUGFpbnRlcicpO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkuYWRkQ29tcG9uZW50KCdyZW5kZXInLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdwbGFuZScsXHJcbiAgICAgICAgICAgIGxheWVyczogW3BhaW50ZXJMYXllci5pZF0sXHJcbiAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLl9wYWludGVyTWF0ZXJpYWwsXHJcbiAgICAgICAgICAgIGNhc3RTaGFkb3dzOiBmYWxzZSxcclxuICAgICAgICAgICAgY2FzdFNoYWRvd3NMaWdodG1hcDogZmFsc2UsXHJcbiAgICAgICAgICAgIHJlY2VpdmVTaGFkb3dzOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5ICA9IG5ldyBwYy5FbnRpdHkoJ1RlcnJhaW5CcnVzaFBhaW50ZXJJbnZlcnQnKTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5LmFkZENvbXBvbmVudCgncmVuZGVyJywge1xyXG4gICAgICAgICAgICB0eXBlOiAncGxhbmUnLFxyXG4gICAgICAgICAgICBsYXllcnM6IFtwYWludGVyTGF5ZXIuaWRdLFxyXG4gICAgICAgICAgICBtYXRlcmlhbDogdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLFxyXG4gICAgICAgICAgICBjYXN0U2hhZG93czogZmFsc2UsXHJcbiAgICAgICAgICAgIGNhc3RTaGFkb3dzTGlnaHRtYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICByZWNlaXZlU2hhZG93czogZmFsc2UsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkucmVuZGVyIS5tZXNoSW5zdGFuY2VzWzBdLmRyYXdPcmRlciA9IDE7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5yZW5kZXIhLm1lc2hJbnN0YW5jZXNbMF0uZHJhd09yZGVyID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5fYXBwLnJvb3QuYWRkQ2hpbGQodGhpcy5fcGFpbnRlckludmVydEVudGl0eSk7XHJcbiAgICAgICAgdGhpcy5fYXBwLnJvb3QuYWRkQ2hpbGQodGhpcy5fcGFpbnRlckVudGl0eSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkuc2V0TG9jYWxFdWxlckFuZ2xlcyg5MCwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5zZXRMb2NhbEV1bGVyQW5nbGVzKDkwLCAwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdFNoYWRlcnMoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZlcnRleCA9IHZlcnRleFNoYWRlcjtcclxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IHNldFByZWNpc2lvbih0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UsIGZyYWdtZW50U2hhZGVyKTtcclxuICAgICAgICBjb25zdCBmcmFnbWVudEludmVydCA9IHNldFByZWNpc2lvbih0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UsIGZyYWdtZW50SW52ZXJ0U2hhZGVyKTtcclxuXHJcbiAgICAgICAgaWYgKHBjLlNoYWRlck1hdGVyaWFsKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwgPSBuZXcgcGMuU2hhZGVyTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICAgICAgdW5pcXVlTmFtZTogJ1RlcnJhaW5QYWludGVyRnJhZ21lbnRTaGFkZXInLFxyXG4gICAgICAgICAgICAgICAgdmVydGV4R0xTTDogdmVydGV4LFxyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRHTFNMOiBmcmFnbWVudCxcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhUG9zaXRpb246IHBjLlNFTUFOVElDX1BPU0lUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIGFVdjA6IHBjLlNFTUFOVElDX1RFWENPT1JEMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbCA9IG5ldyBwYy5TaGFkZXJNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgICAgICB1bmlxdWVOYW1lOiAnVGVycmFpblBhaW50ZXJJbnZlcnRGcmFnbWVudFNoYWRlcicsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhHTFNMOiB2ZXJ0ZXgsXHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudEdMU0w6IGZyYWdtZW50SW52ZXJ0LFxyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGFQb3NpdGlvbjogcGMuU0VNQU5USUNfUE9TSVRJT04sXHJcbiAgICAgICAgICAgICAgICAgICAgYVV2MDogcGMuU0VNQU5USUNfVEVYQ09PUkQwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlclNoYWRlciA9IHBjLmNyZWF0ZVNoYWRlckZyb21Db2RlKHRoaXMuX2FwcC5ncmFwaGljc0RldmljZSwgdmVydGV4LCBmcmFnbWVudCwgJ1RlcnJhaW5QYWludGVyRnJhZ21lbnRTaGFkZXInLCB7XHJcbiAgICAgICAgICAgIGFQb3NpdGlvbjogcGMuU0VNQU5USUNfUE9TSVRJT04sXHJcbiAgICAgICAgICAgIGFVdjA6IHBjLlNFTUFOVElDX1RFWENPT1JEMFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0U2hhZGVyID0gcGMuY3JlYXRlU2hhZGVyRnJvbUNvZGUodGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlLCB2ZXJ0ZXgsIGZyYWdtZW50SW52ZXJ0LCAnVGVycmFpblBhaW50ZXJJbnZlcnRGcmFnbWVudFNoYWRlcicsIHtcclxuICAgICAgICAgICAgYVBvc2l0aW9uOiBwYy5TRU1BTlRJQ19QT1NJVElPTixcclxuICAgICAgICAgICAgYVV2MDogcGMuU0VNQU5USUNfVEVYQ09PUkQwXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdE1hdGVyaWFscygpIHtcclxuXHJcbiAgICAgICAgLy8gRW5naW5lIHYxIG5vdCBzdXBwb3J0IFNoYWRlck1hdGVyaWFsXHJcbiAgICAgICAgLy8gdXNlIG9sZCBtZXRob2RzXHJcbiAgICAgICAgaWYgKCFwYy5TaGFkZXJNYXRlcmlhbCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsID0gbmV3IHBjLk1hdGVyaWFsKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbCA9IG5ldyBwYy5NYXRlcmlhbCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLyogQHRzLWlnbm9yZSAqL1xyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwuc2hhZGVyID0gdGhpcy5fcGFpbnRlclNoYWRlcjtcclxuICAgICAgICAgICAgLyogQHRzLWlnbm9yZSAqL1xyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwuc2hhZGVyID0gdGhpcy5fcGFpbnRlckludmVydFNoYWRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbC5uYW1lID0gJ0JydXNoUGFpbnRlck1hdGVyaWFsJztcclxuICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwuYmxlbmRUeXBlID0gcGMuQkxFTkRfQURESVRJVkU7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsLnVwZGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwubmFtZSA9ICdCcnVzaFBhaW50ZXJJbnZlcnRNYXRlcmlhbCc7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLmJsZW5kVHlwZSA9IHBjLkJMRU5EX1NVQlRSQUNUSVZFO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC51cGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVSdW50aW1lU2V0dGluZ3MoZHQ6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsT3BhY2l0eSA9IHRoaXMuX2JydXNoU2V0dGluZ3Mub3BhY2l0eTtcclxuICAgICAgICBjb25zdCBvcGFjaXR5ID0gb3JpZ2luYWxPcGFjaXR5O1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VCcnVzaE9wYWNpdHknLCBvcGFjaXR5KTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1QnJ1c2hPcGFjaXR5Jywgb3BhY2l0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlUG9zaXRpb25BbmRTY2FsZSh4OiBudW1iZXIsIHk6IG51bWJlciwgc2NhbGVXaWR0aDogbnVtYmVyLCBzY2FsZUhlaWdodDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGZhciAgICA9IHRoaXMuY2FtZXJhRmFyICogMjtcclxuICAgICAgICBjb25zdCByYXRpb24gPSB0aGlzLmJhY2tncm91bmQud2lkdGggLyB0aGlzLmJhY2tncm91bmQuaGVpZ2h0O1xyXG5cclxuICAgICAgICB4ID0geCAqIGZhciAqIHJhdGlvbiAtIHRoaXMuY2FtZXJhRmFyICogcmF0aW9uO1xyXG4gICAgICAgIHkgPSB5ICogZmFyIC0gdGhpcy5jYW1lcmFGYXI7XHJcblxyXG4gICAgICAgIHNjYWxlV2lkdGggID0gc2NhbGVXaWR0aCAgKiB0aGlzLmJhY2tncm91bmQud2lkdGggIC8gZmFyIC8gMi41O1xyXG4gICAgICAgIHNjYWxlSGVpZ2h0ID0gc2NhbGVIZWlnaHQgKiB0aGlzLmJhY2tncm91bmQuaGVpZ2h0IC8gZmFyIC8gMi41O1xyXG5cclxuICAgICAgICB0aGlzLl9zZXRTY2FsZShzY2FsZVdpZHRoLCBzY2FsZUhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5fc2V0UG9zaXRpb24oeCwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0UGFpbnQoZHQ6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHNjYWxlV2lkdGg6IG51bWJlciwgc2NhbGVIZWlnaHQ6IG51bWJlcikge1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVSdW50aW1lU2V0dGluZ3MoZHQpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVBvc2l0aW9uQW5kU2NhbGUoeCwgeSwgc2NhbGVXaWR0aCwgc2NhbGVIZWlnaHQpO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5lbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9wYWludGVyRW50aXR5LmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuZW5hYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0b3BQYWludCgpIHtcclxuICAgICAgICB0aGlzLl9wYWludGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJDYW1lcmFFbnRpdHkuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NldFNjYWxlKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5zZXRMb2NhbFNjYWxlKHgsIDEsIHkpO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkuc2V0TG9jYWxTY2FsZSh4LCAxLCB5KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zZXRQb3NpdGlvbih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkuc2V0TG9jYWxQb3NpdGlvbih4LCB5LCAwKTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5LnNldExvY2FsUG9zaXRpb24oeCwgeSwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVNldHRpbmdzKGJydXNoU2V0dGluZ3M6IElCcnVzaFNldHRpbmdzLCBhY3RpdmVMYXllcjogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJNYXNrLmZpbGwoMCk7XHJcblxyXG4gICAgICAgIGlmIChhY3RpdmVMYXllciA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5fcGFpbnRlck1hc2tbYWN0aXZlTGF5ZXIgLSAxXSA9IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBicnVzaFRleHR1cmUgPSBicnVzaFNldHRpbmdzLnRleHR1cmVzW2JydXNoU2V0dGluZ3MuYWN0aXZlXS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsLnNldFBhcmFtZXRlcigndUJydXNoTWFzaycsIHRoaXMuX3BhaW50ZXJNYXNrKTtcclxuICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1SGVpZ2h0TWFwJywgYnJ1c2hUZXh0dXJlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLnNldFBhcmFtZXRlcigndUJydXNoTWFzaycsIHRoaXMuX3BhaW50ZXJNYXNrKTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1SGVpZ2h0TWFwJywgYnJ1c2hUZXh0dXJlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYnJ1c2hTZXR0aW5ncyA9IGJydXNoU2V0dGluZ3M7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoSW5zdGFuY2luZyBhcyBJUGF0Y2hlc0luc3RhbmNpbmdOYXRpdmUgfSBmcm9tIFwiLi4vQ29yZS9JUGF0Y2hJbnN0YW5jaW5nLm1qc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUJ1ZmZlcih2ZXJ0ZXhCdWZmZXI6IHBjeC5WZXJ0ZXhCdWZmZXIgfCBudWxsLCBkYXRhOiBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXksIGxlbmd0aDogaW50KSB7XHJcblxyXG4gICAgaWYgKHZlcnRleEJ1ZmZlcikge1xyXG5cclxuICAgICAgICBjb25zdCBkZXZpY2UgPSB2ZXJ0ZXhCdWZmZXIuZGV2aWNlO1xyXG5cclxuICAgICAgICBpZiAoZGV2aWNlLmlzV2ViR0wyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdsID0gKGRldmljZSBhcyBwY3guV2ViZ2xHcmFwaGljc0RldmljZSkuZ2w7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhCdWZmZXIuaW1wbC5idWZmZXJJZCk7XHJcbiAgICAgICAgICAgIGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCBkYXRhLCAwLCBsZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkZXZpY2UuaXNXZWJHUFUpIHtcclxuICAgICAgICAgICAgY29uc3Qgd2dwdSAgID0gKGRldmljZSBhcyBhbnkpLndncHUgYXMgR1BVRGV2aWNlO1xyXG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSB2ZXJ0ZXhCdWZmZXIuaW1wbC5idWZmZXIgYXMgR1BVQnVmZmVyO1xyXG4gICAgICAgICAgICB3Z3B1LnF1ZXVlLndyaXRlQnVmZmVyKGJ1ZmZlciwgMCwgZGF0YSwgMCwgbGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Vuc3VwcG9ydGVkIGRldmljZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGF0Y2hJbnN0YW5jaW5nPFREYXRhIGV4dGVuZHMgVWludDE2QXJyYXkgfCBVaW50OEFycmF5PiBleHRlbmRzIElQYXRjaGVzSW5zdGFuY2luZ05hdGl2ZTxwY3guTWVzaEluc3RhbmNlLCBURGF0YT4ge1xyXG5cclxuICAgIHJlYWRvbmx5IGJ1ZmZlclR5cGU6IFVpbnQxNkFycmF5Q29uc3RydWN0b3IgfCBVaW50OEFycmF5Q29uc3RydWN0b3I7XHJcbiAgICByZWFkb25seSBpdGVtQnVmZmVyU2l6ZTogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbWVzaEluc3RhbmNlQ291bnQ6IG51bWJlcjtcclxuICAgIFxyXG4gICAgYXBwZW5kTWVzaEluc3RhbmNlcyhhcnI6IHBjeC5NZXNoSW5zdGFuY2VbXSwgb2Zmc2V0PzogbnVtYmVyKTogbnVtYmVyO1xyXG5cclxuICAgIGJlZ2luKGNhc3RTaGFkb3c/OiBib29sZWFuLCByZWNlaXZlU2hhZG93PzogYm9vbGVhbik6IHZvaWQ7XHJcblxyXG4gICAgZW5kKCk6IHZvaWQ7XHJcbn0iLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBQYXRjaENvbWJpbmVJbnN0YW5jaW5nTmF0aXZlLCB7IGNvbWJpbmVHcm91cExlbiwgY29tSW5zdERhdGFTaXplLCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGUgfSBmcm9tIFwiLi4vQ29yZS9QYXRjaENvbWJpbmVJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgeyB0eXBlIElQYXRjaEluc3RhbmNpbmcsIHVwZGF0ZUJ1ZmZlciB9IGZyb20gXCIuL0lQYXRjaEluc3RhbmNpbmcubWpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXRjaENvbWJpbmVJbnN0YW5jaW5nIGV4dGVuZHMgUGF0Y2hDb21iaW5lSW5zdGFuY2luZ05hdGl2ZTxwY3guTWVzaEluc3RhbmNlPiBpbXBsZW1lbnRzIElQYXRjaEluc3RhbmNpbmc8VENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IGJ1ZmZlclR5cGUgPSBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgaXRlbUJ1ZmZlclNpemUgPSA0O1xyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0IG1lc2hJbnN0YW5jZUNvdW50KCkgeyByZXR1cm4gdGhpcy5kYXRhLmxlbmd0aCAqIGNvbWJpbmVHcm91cExlbjsgfVxyXG5cclxuICAgIHB1YmxpYyBhcHBlbmRNZXNoSW5zdGFuY2VzKGFycjogcGN4Lk1lc2hJbnN0YW5jZVtdLCBvZmZzZXQ6IGludCA9IDApIHtcclxuXHJcbiAgICAgICAgbGV0IG1lc2hJbmRleCA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmRhdGEubGVuZ3RoOyBjKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tYmluZUdyb3VwTGVuOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMuZGF0YVtjXS5ncm91cHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNodW5rLm9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyclttZXNoSW5kZXgrKyArIG9mZnNldF0gPSBjaHVuay5vYmplY3Q7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNoSW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJlZ2luKGNhc3RTaGFkb3c6IGJvb2xlYW4gPSBmYWxzZSwgcmVjZWl2ZVNoYWRvdzogYm9vbGVhbiA9IGZhbHNlKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbWJpbmVHcm91cExlbjsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRhdGFbY10uZ3JvdXBzW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmtPYmplY3QgPSBjaHVuay5vYmplY3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgY2h1bmsuY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgY2h1bmsuaGFzQ2hhbmdlcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaHVua09iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC5jYXN0U2hhZG93ID0gY2FzdFNoYWRvdztcclxuICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC5yZWNlaXZlU2hhZG93ID0gcmVjZWl2ZVNoYWRvdztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW5kKCkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21iaW5lR3JvdXBMZW47IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5kYXRhW2NdLmdyb3Vwc1tpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rT2JqZWN0ID0gY2h1bmsub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoY2h1bmtPYmplY3QgJiYgY2h1bmsuY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QuaW5zdGFuY2luZ0NvdW50ID0gY2h1bmsuY291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay5oYXNDaGFuZ2VzICYmIGNodW5rT2JqZWN0Lmluc3RhbmNpbmdEYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NodW5rT2JqZWN0Lmluc3RhbmNpbmdEYXRhLnZlcnRleEJ1ZmZlcj8udW5sb2NrKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBjaHVuay5jb3VudCAqIGNvbUluc3REYXRhU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVydGV4QnVmZmVyID0gY2h1bmtPYmplY3QuaW5zdGFuY2luZ0RhdGEudmVydGV4QnVmZmVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQnVmZmVyKHZlcnRleEJ1ZmZlciwgY2h1bmsuZGF0YSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBCT1RUT00sIExFRlQsIFJJR0hULCBUT1AgfSBmcm9tIFwiLi4vQ29yZS9Mb2RJbmZvLm1qc1wiO1xyXG5pbXBvcnQgeyBpbnN0RGF0YVNpemUsIFBhdGNoSW5zdGFuY2luZyBhcyBQYXRjaEluc3RhbmNpbmdOYXRpdmUsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZSB9IGZyb20gXCIuLi9Db3JlL1BhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoSW5zdGFuY2luZywgdXBkYXRlQnVmZmVyIH0gZnJvbSBcIi4vSVBhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhdGNoSW5zdGFuY2luZyBleHRlbmRzIFBhdGNoSW5zdGFuY2luZ05hdGl2ZTxwY3guTWVzaEluc3RhbmNlPiBpbXBsZW1lbnRzIElQYXRjaEluc3RhbmNpbmc8VEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IGJ1ZmZlclR5cGUgPSBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgaXRlbUJ1ZmZlclNpemUgPSAyO1xyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0IG1lc2hJbnN0YW5jZUNvdW50KCkgeyByZXR1cm4gdGhpcy5kYXRhLmxlbmd0aCAqIExFRlQgKiBSSUdIVCAqIFRPUCAqIEJPVFRPTTsgfVxyXG5cclxuICAgIHB1YmxpYyBhcHBlbmRNZXNoSW5zdGFuY2VzKGFycjogcGN4Lk1lc2hJbnN0YW5jZVtdLCBvZmZzZXQ6IGludCA9IDApIHtcclxuXHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMuZGF0YVtjXVtsXVtyXVt0XVtiXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsub2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW2krKyArIG9mZnNldF0gPSBjaHVuay5vYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiZWdpbihjYXN0U2hhZG93OiBib29sZWFuID0gZmFsc2UsIHJlY2VpdmVTaGFkb3c6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMuZGF0YVtjXVtsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rT2JqZWN0ID0gY2h1bmsub2JqZWN0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLmNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLmhhc0NoYW5nZXMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmtPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QuY2FzdFNoYWRvdyA9IGNhc3RTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QucmVjZWl2ZVNoYWRvdyA9IHJlY2VpdmVTaGFkb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVuZCgpIHtcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRhdGFbY11bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua09iamVjdCA9IGNodW5rLm9iamVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rT2JqZWN0ICYmIGNodW5rLmNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0Lmluc3RhbmNpbmdDb3VudCA9IGNodW5rLmNvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsuaGFzQ2hhbmdlcyAmJiBjaHVua09iamVjdC5pbnN0YW5jaW5nRGF0YSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jaHVua09iamVjdC5pbnN0YW5jaW5nRGF0YS52ZXJ0ZXhCdWZmZXI/LnVubG9jaygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gY2h1bmsuY291bnQgKiBpbnN0RGF0YVNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRleEJ1ZmZlciA9IGNodW5rT2JqZWN0Lmluc3RhbmNpbmdEYXRhLnZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUJ1ZmZlcih2ZXJ0ZXhCdWZmZXIsIGNodW5rLmRhdGEsIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBjaGVja1N1cHBvcnRSMzJGVGV4dHVyZSB9IGZyb20gXCIuLi9FeHRyYXMvVXRpbHMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwLCBUSGVpZ2h0TWFwRm9ybWF0IH0gZnJvbSBcIi4uL0NvcmUvQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXAgZnJvbSBcIi4uL0NvcmUvQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCBTcXVhcmVJdGVyYXRvciBmcm9tIFwiLi4vQ29yZS9TcXVhcmVJdGVyYXRvci5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJWm9uZSB9IGZyb20gXCIuLi9Db3JlL0lab25lLm1qc1wiO1xyXG5pbXBvcnQgSGVpZ2h0ZmllbGQgZnJvbSBcIi4uL0NvcmUvSGVpZ2h0ZmllbGQubWpzXCI7XHJcbmltcG9ydCB7IGdldFRleHR1cmVUeXBlIH0gZnJvbSBcIi4vU2hhZGVyQ2h1bmtzLm1qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR1BVSGVpZ2h0TWFwQnVmZmVyIGV4dGVuZHMgU3F1YXJlSXRlcmF0b3Ige1xyXG5cclxuICAgIHByaXZhdGUgX2FwcDogcGN4LkFwcEJhc2U7XHJcbiAgICBwcml2YXRlIF9mb3JtYXQ6IFRIZWlnaHRNYXBGb3JtYXQ7XHJcbiAgICBwcml2YXRlIF90ZXh0dXJlOiBwY3guVGV4dHVyZTtcclxuICAgIHByaXZhdGUgX3RleHR1cmVMZXZlbHNUeXBlOiBGbG9hdDMyQXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQxNkFycmF5Q29uc3RydWN0b3IgfCBVaW50OEFycmF5Q29uc3RydWN0b3I7XHJcblxyXG4gICAgcHVibGljIGdldCBhcHAoKSB7IHJldHVybiB0aGlzLl9hcHA7IH1cclxuICAgIHB1YmxpYyBnZXQgZm9ybWF0KCkgeyByZXR1cm4gdGhpcy5fZm9ybWF0OyB9XHJcbiAgICBwdWJsaWMgZ2V0IHRleHR1cmUoKSB7IHJldHVybiB0aGlzLl90ZXh0dXJlOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IgKGFwcDogcGN4LkFwcEJhc2UsIGZpZWxkOiBIZWlnaHRmaWVsZCkge1xyXG4gICAgICAgIHN1cGVyKGZpZWxkKTtcclxuICAgICAgICB0aGlzLl9hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5faW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuX3RleHR1cmU/LmRlc3Ryb3koKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0KCkge1xyXG5cclxuICAgICAgICB0aGlzLl90ZXh0dXJlPy5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRldmljZSAgICAgICAgPSB0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2U7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0Rm9ybWF0ICA9IGdldEhlaWdodE1hcEZvcm1hdChkZXZpY2UsIHRoaXMuZmllbGQuaGVpZ2h0TWFwKTtcclxuICAgICAgICBjb25zdCBmb3JtYXQgICAgICAgID0gZ2V0VGV4dHVyZVR5cGUoaGVpZ2h0Rm9ybWF0KTtcclxuICAgICAgICBjb25zdCBidWZGb3JtYXQgICAgID0gZ2V0SGVpZ2h0TWFwQ2h1bmtCdWZmZXJUeXBlKGRldmljZSwgZm9ybWF0KTtcclxuICAgICAgICBjb25zdCBkYXRhQ2h1bmtTaXplID0gdGhpcy5maWVsZC5oZWlnaHRNYXAuZGF0YUNodW5rU2l6ZTtcclxuICAgICAgICBjb25zdCBjaHVua3MgICAgICAgID0gdGhpcy5maWVsZC5oZWlnaHRNYXAuZ2V0Q2h1bmtzQnVmZmVycyhidWZGb3JtYXQpO1xyXG5cclxuICAgICAgICB0aGlzLl9mb3JtYXQgPSBoZWlnaHRGb3JtYXQ7XHJcbiAgICAgICAgdGhpcy5fdGV4dHVyZUxldmVsc1R5cGUgPSBidWZGb3JtYXQ7XHJcbiAgICAgICAgdGhpcy5fdGV4dHVyZSA9IG5ldyBwYy5UZXh0dXJlKGRldmljZSwge1xyXG4gICAgICAgICAgICB3aWR0aDogZGF0YUNodW5rU2l6ZSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBkYXRhQ2h1bmtTaXplLFxyXG4gICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCxcclxuICAgICAgICAgICAgbWlwbWFwczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1pbkZpbHRlcjogcGMuRklMVEVSX05FQVJFU1QsXHJcbiAgICAgICAgICAgIG1hZ0ZpbHRlcjogcGMuRklMVEVSX05FQVJFU1QsXHJcbiAgICAgICAgICAgIGFkZHJlc3NVOiBwYy5BRERSRVNTX0NMQU1QX1RPX0VER0UsXHJcbiAgICAgICAgICAgIGFkZHJlc3NWOiBwYy5BRERSRVNTX0NMQU1QX1RPX0VER0UsXHJcbiAgICAgICAgICAgIGFkZHJlc3NXOiBwYy5BRERSRVNTX0NMQU1QX1RPX0VER0UsXHJcbiAgICAgICAgICAgIGZsaXBZOiBkZXZpY2UuaXNXZWJHUFUsXHJcbiAgICAgICAgICAgIGFycmF5TGVuZ3RoOiBjaHVua3MubGVuZ3RoLFxyXG4gICAgICAgICAgICBsZXZlbHM6IFtjaHVua3NdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZUhlaWdodE1hcENodW5rKGNodW5rWDogaW50LCBjaHVua1o6IGludCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRoZSBoZWlnaHQgbWFwIGlzIHVwZGF0ZWQgYnkgdXBkYXRpbmcgdGhlIGVudGlyZSBjaHVuayxcclxuICAgICAgICAvLyB3aGljaCBpcyBzdWZmaWNpZW50IGlmIHRoZSBjaHVuayBzaXplIGlzIG5vdCBsYXJnZS5cclxuXHJcbiAgICAgICAgY29uc3QgZGF0YUNodW5rU2l6ZSA9IHRoaXMuZmllbGQuaGVpZ2h0TWFwLmRhdGFDaHVua1NpemU7XHJcbiAgICAgICAgY29uc3QgbGV2ZWwgID0gdGhpcy5maWVsZC5oZWlnaHRNYXAuZ2V0Q2h1bmtJbmRleChjaHVua1gsIGNodW5rWik7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5maWVsZC5oZWlnaHRNYXAuZ2V0Q2h1bmtCdWZmZXIodGhpcy5fdGV4dHVyZUxldmVsc1R5cGUsIGNodW5rWCwgY2h1bmtaKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2FwcC5ncmFwaGljc0RldmljZS5pc1dlYkdMMikge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2wgPSAodGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlIGFzIHBjeC5XZWJnbEdyYXBoaWNzRGV2aWNlKS5nbDtcclxuICAgICAgICAgICAgY29uc3QgdGV4dHVyZUZvcm1hdCA9IHRoaXMuX3RleHR1cmUuaW1wbC5fZ2xGb3JtYXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVQaXhlbFQgPSB0aGlzLl90ZXh0dXJlLmltcGwuX2dsUGl4ZWxUeXBlO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlVGFyZ2V0ID0gdGhpcy5fdGV4dHVyZS5pbXBsLl9nbFRhcmdldDtcclxuICAgICAgICAgICAgY29uc3QgdGV4dHVyZU9iamVjdCA9IHRoaXMuX3RleHR1cmUuaW1wbC5fZ2xUZXh0dXJlO1xyXG5cclxuICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUodGV4dHVyZVRhcmdldCwgdGV4dHVyZU9iamVjdCk7XHJcbiAgICAgICAgICAgIGdsLnRleFN1YkltYWdlM0QoZ2wuVEVYVFVSRV8yRF9BUlJBWSwgMCwgMCwgMCwgbGV2ZWwsIGRhdGFDaHVua1NpemUsIGRhdGFDaHVua1NpemUsIDEsIHRleHR1cmVGb3JtYXQsIHRleHR1cmVQaXhlbFQsIGJ1ZmZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2FwcC5ncmFwaGljc0RldmljZS5pc1dlYkdQVSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgd2ViZ3B1ICA9ICh0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UgYXMgYW55KS53Z3B1IGFzIEdQVURldmljZTtcclxuICAgICAgICAgICAgY29uc3QgdGV4dHVyZSA9ICh0aGlzLl90ZXh0dXJlLmltcGwuZ3B1VGV4dHVyZSkgYXMgR1BVVGV4dHVyZTtcclxuXHJcbiAgICAgICAgICAgIHdlYmdwdS5xdWV1ZS53cml0ZVRleHR1cmUoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZSxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFswLCAwLCBsZXZlbF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidWZmZXIsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzUGVyUm93OiBkYXRhQ2h1bmtTaXplICogNCwgLy8gYWx3YXlzIDQgZm9yIHJnYmEgZm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgcm93c1BlckltYWdlOiBkYXRhQ2h1bmtTaXplXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBkYXRhQ2h1bmtTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogZGF0YUNodW5rU2l6ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlSGVpZ2h0TWFwKHpvbmU6IElab25lKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSWdub3JlIHVwZGF0ZSBpZiBoZWlnaHQgbWFwIG5lZWQgdXBsb2FkXHJcbiAgICAgICAgaWYgKHRoaXMuX3RleHR1cmUuX25lZWRzVXBsb2FkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2ZvckVhY2goXHJcbiAgICAgICAgICAgIHpvbmUsXHJcbiAgICAgICAgICAgIHRoaXMuZmllbGQuaGVpZ2h0TWFwLmRhdGFDaHVua1NpemUsXHJcbiAgICAgICAgICAgIHRoaXMuZmllbGQuaGVpZ2h0TWFwLmRhdGFOdW1DaHVua3NYLFxyXG4gICAgICAgICAgICB0aGlzLmZpZWxkLmhlaWdodE1hcC5kYXRhTnVtQ2h1bmtzWixcclxuICAgICAgICAgICAgKHBhdGNoSW5kZXgsIHgsIHopID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSGVpZ2h0TWFwQ2h1bmsoeCwgeik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGVpZ2h0TWFwRm9ybWF0KGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIGhlaWdodE1hcDogSVJlYWRvbmx5QWJzSGVpZ2h0TWFwKSB7XHJcbiAgICBcclxuICAgIGxldCBobUZvcm1hdDogVEhlaWdodE1hcEZvcm1hdCA9IGNoZWNrU3VwcG9ydFIzMkZUZXh0dXJlKGdyYXBoaWNzRGV2aWNlKSA/ICdyMzJmJyA6ICdyZ2JhJztcclxuXHJcbiAgICBpZiAoaGVpZ2h0TWFwIGluc3RhbmNlb2YgQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXApIHtcclxuICAgICAgICBobUZvcm1hdCA9IGhlaWdodE1hcC5jb21wcmVzc0FsZ29yaXRtID09PSAneDQnID8gJ3JnYmFYNCcgOiAncmdiYVgyJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaG1Gb3JtYXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIZWlnaHRNYXBDaHVua0J1ZmZlclR5cGUoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgZm9ybWF0OiBudW1iZXIpIHtcclxuXHJcbiAgICBpZiAoZm9ybWF0ID09PSBwYy5QSVhFTEZPUk1BVF9SMzJGKSB7XHJcbiAgICAgICAgcmV0dXJuIEZsb2F0MzJBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZm9ybWF0ID09PSBwYy5QSVhFTEZPUk1BVF9SRzE2VSkge1xyXG4gICAgICAgIHJldHVybiBVaW50MTZBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZm9ybWF0ID09PSBwYy5QSVhFTEZPUk1BVF9SR0JBOFUpIHtcclxuICAgICAgICByZXR1cm4gVWludDhBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGZvcm1hdCcpO1xyXG59IiwiaW1wb3J0IHsgY29vcmRzVmVydGV4U2l6ZSwgdHlwZSBJUmVhZG9ubHlDb29yZHNCdWZmZXIgfSBmcm9tIFwiLi4vQ29yZS9Db29yZHNCdWZmZXIubWpzXCI7XHJcbmltcG9ydCBHUFVIZWlnaHRNYXBCdWZmZXIgZnJvbSBcIi4vR1BVSGVpZ2h0TWFwQnVmZmVyLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaEluc3RhbmNpbmcgfSBmcm9tIFwiLi9JUGF0Y2hJbnN0YW5jaW5nLm1qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR1BVQnVmZmVyc01hbmFnZXIge1xyXG5cclxuICAgIHByaXZhdGUgX2hlaWdodE1hcDogR1BVSGVpZ2h0TWFwQnVmZmVyO1xyXG4gICAgcHJpdmF0ZSBfc2hhcmVkSW5kZXhCdWZmZXI6IHBjeC5JbmRleEJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX3NoYXJlZFZlcnRleEJ1ZmZlcjogcGN4LlZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodE1hcCgpIHsgcmV0dXJuIHRoaXMuX2hlaWdodE1hcDsgfVxyXG4gICAgcHVibGljIGdldCBzaGFyZWRJbmRleEJ1ZmZlcigpIHsgcmV0dXJuIHRoaXMuX3NoYXJlZEluZGV4QnVmZmVyOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHNoYXJlZFZlcnRleEJ1ZmZlcigpIHsgcmV0dXJuIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlcjsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yIChoZWlnaHRNYXA6IEdQVUhlaWdodE1hcEJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcCA9IGhlaWdodE1hcDtcclxuICAgICAgICB0aGlzLnVwZGF0ZUluZGV4QnVmZmVyKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWZXJ0ZXhCdWZmZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2J1aWxkVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIHZlcnRleEJ1ZmZlcjogSVJlYWRvbmx5Q29vcmRzQnVmZmVyKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvb3Jkc0Zvcm1hdCA9ICh2ZXJ0ZXhCdWZmZXIucGF0Y2hWZXJ0ZXhCdWZmZXJUeXBlZCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpID8gcGMuVFlQRV9VSU5UOCA6IHBjLlRZUEVfVUlOVDE2O1xyXG4gICAgICAgIGNvbnN0IHZlcnRleERlc2MgPSBbe1xyXG4gICAgICAgICAgICBzZW1hbnRpYzogcGMuU0VNQU5USUNfUE9TSVRJT04sXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IGNvb3Jkc1ZlcnRleFNpemUsXHJcbiAgICAgICAgICAgIHR5cGU6IGNvb3Jkc0Zvcm1hdCxcclxuICAgICAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcclxuICAgICAgICAgICAgYXNJbnQ6IHRydWVcclxuICAgICAgICB9XTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBwYy5WZXJ0ZXhGb3JtYXQoZ3JhcGhpY3NEZXZpY2UsIHZlcnRleERlc2MsIHZlcnRleEJ1ZmZlci5wYXRjaFZlcnRleEJ1ZmZlckxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZUluZGV4QnVmZmVyKCkge1xyXG5cclxuICAgICAgICBjb25zdCBncmFwaGljc0RldmljZSA9IHRoaXMuX2hlaWdodE1hcC5hcHAuZ3JhcGhpY3NEZXZpY2U7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hJbmRpY2VzID0gdGhpcy5faGVpZ2h0TWFwLmZpZWxkLnBhdGNoSW5kaWNlcztcclxuXHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlciA9IG5ldyBwYy5JbmRleEJ1ZmZlcihcclxuICAgICAgICAgICAgZ3JhcGhpY3NEZXZpY2UsXHJcbiAgICAgICAgICAgIHBjLklOREVYRk9STUFUX1VJTlQzMixcclxuICAgICAgICAgICAgcGF0Y2hJbmRpY2VzLmxlbmd0aCxcclxuICAgICAgICAgICAgcGMuQlVGRkVSX1NUQVRJQyxcclxuICAgICAgICAgICAgcGF0Y2hJbmRpY2VzLFxyXG4gICAgICAgICAgICB7IHN0b3JhZ2U6IGZhbHNlIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVWZXJ0ZXhCdWZmZXIoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGdyYXBoaWNzRGV2aWNlID0gdGhpcy5faGVpZ2h0TWFwLmFwcC5ncmFwaGljc0RldmljZTtcclxuICAgICAgICBjb25zdCBjb29yZEJ1ZmZlciA9IHRoaXMuX2hlaWdodE1hcC5maWVsZC5wYXRjaFZlcnRpY2VzO1xyXG4gICAgICAgIGNvbnN0IGJ1ZmZlckRhdGEgPSBjb29yZEJ1ZmZlci5wYXRjaFZlcnRleEJ1ZmZlckRhdGE7XHJcbiAgICAgICAgY29uc3QgZm9ybWF0ID0gdGhpcy5fYnVpbGRWZXJ0ZXhGb3JtYXQoZ3JhcGhpY3NEZXZpY2UsIGNvb3JkQnVmZmVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyID0gbmV3IHBjLlZlcnRleEJ1ZmZlcihncmFwaGljc0RldmljZSwgZm9ybWF0LCBmb3JtYXQudmVydGV4Q291bnQsIHtcclxuICAgICAgICAgICAgdXNhZ2U6IHBjLkJVRkZFUl9TVEFUSUMsXHJcbiAgICAgICAgICAgIHN0b3JhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICBkYXRhOiBidWZmZXJEYXRhLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfYnVpbGRJbnN0YW5jaW5nVmVydGV4Rm9ybWF0KGluc3RhbmNlcjogSVBhdGNoSW5zdGFuY2luZzxhbnk+KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGdyYXBoaWNzRGV2aWNlID0gdGhpcy5faGVpZ2h0TWFwLmFwcC5ncmFwaGljc0RldmljZTtcclxuICAgICAgICBjb25zdCB0eXBlID0gaW5zdGFuY2VyLmJ1ZmZlclR5cGUgPT09IFVpbnQxNkFycmF5ID8gcGMuVFlQRV9VSU5UMTYgOlxyXG4gICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZXIuYnVmZmVyVHlwZSA9PT0gVWludDhBcnJheSA/ICBwYy5UWVBFX1VJTlQ4IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuVFlQRV9GTE9BVDMyO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IHBjLlZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSwgW3tcclxuICAgICAgICAgICAgc2VtYW50aWM6IHBjLlNFTUFOVElDX0FUVFIxMCxcclxuICAgICAgICAgICAgY29tcG9uZW50czogaW5zdGFuY2VyLml0ZW1CdWZmZXJTaXplLFxyXG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICBub3JtYWxpemU6IGZhbHNlLFxyXG4gICAgICAgICAgICBhc0ludDogdHJ1ZVxyXG4gICAgICAgIH1dKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYnVpbGRJbnN0YW5jaW5nVmVydGV4QnVmZmVyKGluc3RhbmNlcjogSVBhdGNoSW5zdGFuY2luZzxhbnk+LCBkYXRhOiBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXkpIHtcclxuICAgICAgICBjb25zdCB2ZXJ0ZXhGb3JtYXQgPSB0aGlzLl9idWlsZEluc3RhbmNpbmdWZXJ0ZXhGb3JtYXQoaW5zdGFuY2VyKTtcclxuICAgICAgICBjb25zdCBudW1WZXJ0aWNlcyAgPSBkYXRhLmxlbmd0aCAvIGluc3RhbmNlci5pdGVtQnVmZmVyU2l6ZTtcclxuICAgICAgICByZXR1cm4gbmV3IHBjLlZlcnRleEJ1ZmZlcih2ZXJ0ZXhGb3JtYXQuZGV2aWNlLCB2ZXJ0ZXhGb3JtYXQsIG51bVZlcnRpY2VzLCB7XHJcbiAgICAgICAgICAgIHVzYWdlOiBwYy5CVUZGRVJfR1BVRFlOQU1JQyxcclxuICAgICAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgc3RvcmFnZTogZmFsc2UsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgdHlwZSB7IElQYXRjaExvZEJhc2UgfSBmcm9tIFwiLi4vQ29yZS9JUGF0Y2hMb2QubWpzXCI7XHJcbmltcG9ydCB7IEJPVFRPTSwgTEVGVCwgUklHSFQsIFRPUCwgdHlwZSBJUmVhZG9ubHlMb2RJbmZvIH0gZnJvbSBcIi4uL0NvcmUvTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IEdQVUJ1ZmZlcnNNYW5hZ2VyIGZyb20gXCIuL0dQVUJ1ZmZlcnNNYW5hZ2VyLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJSW50ZXJuYWxXaXJlZnJhbWVEYXRhIHtcclxuICAgIGJ1ZmZlcjogcGN4LkluZGV4QnVmZmVyIHwgbnVsbDtcclxuICAgIHByaW1pdGl2ZToge1xyXG4gICAgICAgIHR5cGU6IG51bWJlcixcclxuICAgICAgICBiYXNlOiBudW1iZXIsXHJcbiAgICAgICAgYmFzZVZlcnRleDogbnVtYmVyLFxyXG4gICAgICAgIGNvdW50OiBudW1iZXIsXHJcbiAgICAgICAgaW5kZXhlZDogdHJ1ZVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElXaXJlZnJhbWVEYXRhIGV4dGVuZHMgSUludGVybmFsV2lyZWZyYW1lRGF0YSB7XHJcbiAgICBidWZmZXI6IHBjeC5JbmRleEJ1ZmZlcjtcclxufVxyXG5cclxuY29uc3Qgb2Zmc2V0cyA9IFtbMCwgMV0sIFsxLCAyXSwgWzIsIDBdXTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdQVVdpcmVmcmFtZUJ1ZmZlck1hbmFnZXIge1xyXG4gICAgXHJcbiAgICBwcml2YXRlIF9ieWZmZXJzTWFuYWdlcjogR1BVQnVmZmVyc01hbmFnZXI7XHJcbiAgICBwcml2YXRlIF9sb2RJbmZvOiBJUmVhZG9ubHlMb2RJbmZvW107XHJcbiAgICBwcml2YXRlIF9kYXRhOiBJSW50ZXJuYWxXaXJlZnJhbWVEYXRhW11bXVtdW11bXTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGxvZEluZm8oKSB7IHJldHVybiB0aGlzLl9sb2RJbmZvOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGJ1ZmZlcnNNYW5hZ2VyKCkgeyByZXR1cm4gdGhpcy5fYnlmZmVyc01hbmFnZXI7IH1cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoYnlmZmVyc01hbmFnZXI6IEdQVUJ1ZmZlcnNNYW5hZ2VyLCBsb2RJbmZvOiBJUmVhZG9ubHlMb2RJbmZvW10pIHtcclxuICAgICAgICB0aGlzLl9ieWZmZXJzTWFuYWdlciA9IGJ5ZmZlcnNNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuX2xvZEluZm8gPSBsb2RJbmZvO1xyXG4gICAgICAgIHRoaXMuX2ZpbGxCdWZmZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZmlsbEJ1ZmZlcnMoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2RhdGEgPSBuZXcgQXJyYXkodGhpcy5fbG9kSW5mby5sZW5ndGgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsb2RDb3JlID0gMDsgbG9kQ29yZSA8IHRoaXMuX2RhdGEubGVuZ3RoOyBsb2RDb3JlKyspIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IG5ldyBBcnJheTxJSW50ZXJuYWxXaXJlZnJhbWVEYXRhW11bXVtdPihMRUZUKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspICAgeyBhcnJbbF0gPSBuZXcgQXJyYXkoUklHSFQpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspICB7IGFycltsXVtyXSA9IG5ldyBBcnJheShUT1ApO1xyXG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSAgICB7IGFycltsXVtyXVt0XSA9IG5ldyBBcnJheShCT1RUT00pO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGFycltsXVtyXVt0XVtiXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBidWZmZXI6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHBjLlBSSU1JVElWRV9MSU5FUyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVZlcnRleDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ZWQ6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9fX19XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9kYXRhW2xvZENvcmVdID0gYXJyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZWNyZWF0ZVdpcmVmcmFtZURhdGEobG9kOiBJUGF0Y2hMb2RCYXNlKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvZEluZm8gPSB0aGlzLl9sb2RJbmZvW2xvZC5jb3JlXS5pbmZvW2xvZC5sZWZ0XVtsb2QucmlnaHRdW2xvZC50b3BdW2xvZC5ib3R0b21dO1xyXG4gICAgICAgIGNvbnN0IGJ1ZmZlclNjb3BlID0gdGhpcy5fZGF0YVtsb2QuY29yZV1bbG9kLmxlZnRdW2xvZC5yaWdodF1bbG9kLnRvcF1bbG9kLmJvdHRvbV07XHJcblxyXG4gICAgICAgIGJ1ZmZlclNjb3BlLmJ1ZmZlcj8uZGVzdHJveSgpO1xyXG5cclxuICAgICAgICBjb25zdCBpbmRleEJ1ZmZlciA9IHRoaXMuX2J5ZmZlcnNNYW5hZ2VyLnNoYXJlZEluZGV4QnVmZmVyO1xyXG4gICAgICAgIGNvbnN0IG51bVZlcnRpY2VzID0gdGhpcy5fYnlmZmVyc01hbmFnZXIuc2hhcmVkVmVydGV4QnVmZmVyLm51bVZlcnRpY2VzO1xyXG5cclxuICAgICAgICBjb25zdCBiYXNlID0gbG9kSW5mby5zdGFydDtcclxuICAgICAgICBjb25zdCBjb3VudCA9IGxvZEluZm8uY291bnQ7XHJcbiAgICAgICAgY29uc3Qgc3JjSW5kaWNlcyA9IG5ldyBVaW50MzJBcnJheShpbmRleEJ1ZmZlci5zdG9yYWdlKTtcclxuICAgICAgICBjb25zdCB0bXBJbmRpY2VzID0gW107XHJcbiAgICAgICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaiA9IGJhc2U7IGogPCBiYXNlICsgY291bnQ7IGogKz0gMykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IDM7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaTEgPSBzcmNJbmRpY2VzW2ogKyBvZmZzZXRzW2tdWzBdXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGkyID0gc3JjSW5kaWNlc1tqICsgb2Zmc2V0c1trXVsxXV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNoID0gKGkxID4gaTIpID8gKChpMiAqIG51bVZlcnRpY2VzKSArIGkxKSA6ICgoaTEgKiBudW1WZXJ0aWNlcykgKyBpMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNlZW4uaGFzKGhhc2gpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vlbi5hZGQoaGFzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wSW5kaWNlcy5wdXNoKGkxLCBpMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRzdEluZGljZXMgPSBuZXcgVWludDMyQXJyYXkodG1wSW5kaWNlcyk7XHJcblxyXG4gICAgICAgIGJ1ZmZlclNjb3BlLnByaW1pdGl2ZS5jb3VudCA9IGRzdEluZGljZXMubGVuZ3RoO1xyXG4gICAgICAgIGJ1ZmZlclNjb3BlLmJ1ZmZlciA9IG5ldyBwYy5JbmRleEJ1ZmZlcihcclxuICAgICAgICAgICAgaW5kZXhCdWZmZXIuZGV2aWNlLFxyXG4gICAgICAgICAgICBwYy5JTkRFWEZPUk1BVF9VSU5UMzIsXHJcbiAgICAgICAgICAgIGRzdEluZGljZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICBwYy5CVUZGRVJfU1RBVElDLFxyXG4gICAgICAgICAgICBkc3RJbmRpY2VzLFxyXG4gICAgICAgICAgICB7IHN0b3JhZ2U6IGZhbHNlIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2dldE9yQ3JlYXRlV2lyZWZyYW1lRGF0YShsb2Q6IElQYXRjaExvZEJhc2UpIHtcclxuXHJcbiAgICAgICAgY29uc3QgYnVmZmVyU2NvcGUgPSB0aGlzLl9kYXRhW2xvZC5jb3JlXVtsb2QubGVmdF1bbG9kLnJpZ2h0XVtsb2QudG9wXVtsb2QuYm90dG9tXTtcclxuXHJcbiAgICAgICAgaWYgKCFidWZmZXJTY29wZS5idWZmZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVjcmVhdGVXaXJlZnJhbWVEYXRhKGxvZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYnVmZmVyU2NvcGUgYXMgdW5rbm93biBhcyBJV2lyZWZyYW1lRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0KGxvZDogSVBhdGNoTG9kQmFzZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRPckNyZWF0ZVdpcmVmcmFtZURhdGEobG9kKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZnJlZURhdGEobG9kOiBJUGF0Y2hMb2RCYXNlKSB7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyU2NvcGUgPSB0aGlzLl9kYXRhW2xvZC5jb3JlXVtsb2QubGVmdF1bbG9kLnJpZ2h0XVtsb2QudG9wXVtsb2QuYm90dG9tXTtcclxuICAgICAgICBidWZmZXJTY29wZS5idWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICBidWZmZXJTY29wZS5idWZmZXIgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmcmVlKCkge1xyXG4gICAgICAgIGZvciAobGV0IGNvcmUgPSAwOyBjb3JlIDwgdGhpcy5fZGF0YS5sZW5ndGg7IGNvcmUrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsZWZ0ID0gMDsgbGVmdCA8IExFRlQ7IGxlZnQrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcmlnaHQgPSAwOyByaWdodCA8IFJJR0hUOyByaWdodCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdG9wID0gMDsgdG9wIDwgVE9QOyB0b3ArKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBib3R0b20gPSAwOyBib3R0b20gPCBCT1RUT007IGJvdHRvbSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmVlRGF0YSh7IGNvcmUsIGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLmZyZWUoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB0eXBlIHsgSVBhdGNoTG9kQmFzZSB9IGZyb20gXCIuLi9Db3JlL0lQYXRjaExvZC5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJU2luZ2xlTG9kSW5mbyB9IGZyb20gXCIuLi9Db3JlL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoSW5zdGFuY2luZyB9IGZyb20gXCIuL0lQYXRjaEluc3RhbmNpbmcubWpzXCI7XHJcbmltcG9ydCB7IGdldEZpZWxkU2hhZGVyQ2h1bmtzLCBwYXRjaENvb3JkT2Zmc2V0UGFyYW1OYW1lLCBwYXRjaEluc3RDb29yZE9mZnNldEF0dHJOYW1lLCBwYXRjaExvZENvcmVQYXJhbU5hbWUsIGhlaWdodE1hcFBhcmFtTmFtZSwgdmVydGV4Q29vcmRBdHRyTmFtZSB9IGZyb20gXCIuL1NoYWRlckNodW5rcy5tanNcIjtcclxuaW1wb3J0IFBhdGNoQ29tYmluZUluc3RhbmNpbmcgZnJvbSBcIi4vUGF0Y2hDb21iaW5lSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IFBhdGNoSW5zdGFuY2luZyBmcm9tIFwiLi9QYXRjaEluc3RhbmNpbmcubWpzXCI7XHJcbmltcG9ydCBHUFVXaXJlZnJhbWVCdWZmZXJNYW5hZ2VyIGZyb20gXCIuL0dQVVdpcmVmcmFtZUJ1ZmZlcnNNYW5hZ2VyLm1qc1wiO1xyXG5pbXBvcnQgR1BVQnVmZmVyc01hbmFnZXIgZnJvbSBcIi4vR1BVQnVmZmVyc01hbmFnZXIubWpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXNoSW5zdGFuY2VGYWN0b3J5IHtcclxuXHJcbiAgICBwcml2YXRlIF9hYWJiOiBwY3guQm91bmRpbmdCb3g7XHJcbiAgICBwcml2YXRlIF9idWZmZXJzTWFuYWdlcjogR1BVQnVmZmVyc01hbmFnZXI7XHJcbiAgICBwcml2YXRlIF93aXJlZnJhbWVCdWZmZXJzTWFuYWdlcjogR1BVV2lyZWZyYW1lQnVmZmVyTWFuYWdlcjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGFhYmIoKSB7IHJldHVybiB0aGlzLl9hYWJiOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGJ1ZmZlcnNNYW5hZ2VyKCkgeyByZXR1cm4gdGhpcy5fYnVmZmVyc01hbmFnZXI7IH1cclxuICAgIHB1YmxpYyBnZXQgd2lyZWZyYW1lQnVmZmVyc01hbmFnZXIoKSB7IHJldHVybiB0aGlzLl93aXJlZnJhbWVCdWZmZXJzTWFuYWdlcjsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJ1ZmZlcnNNYW5hZ2VyOiBHUFVCdWZmZXJzTWFuYWdlciwgd2lyZWZyYW1lQnVmZmVyc01hbmFnZXI6IEdQVVdpcmVmcmFtZUJ1ZmZlck1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLl9hYWJiID0gbmV3IHBjLkJvdW5kaW5nQm94KCk7XHJcbiAgICAgICAgdGhpcy5fYnVmZmVyc01hbmFnZXIgPSBidWZmZXJzTWFuYWdlcjtcclxuICAgICAgICB0aGlzLl93aXJlZnJhbWVCdWZmZXJzTWFuYWdlciA9IHdpcmVmcmFtZUJ1ZmZlcnNNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQWFiYigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVBYWJiKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZpZWxkICAgICA9IHRoaXMuX2J1ZmZlcnNNYW5hZ2VyLmhlaWdodE1hcC5maWVsZDtcclxuICAgICAgICBjb25zdCBoYWxmV2lkdGggPSBmaWVsZC53aWR0aCAvIDI7XHJcbiAgICAgICAgY29uc3QgaGFsZkRlcHRoID0gZmllbGQuZGVwdGggLyAyO1xyXG5cclxuICAgICAgICB0aGlzLl9hYWJiLnNldE1pbk1heChcclxuICAgICAgICAgICAgbmV3IHBjLlZlYzMoLWhhbGZXaWR0aCwgMCwgICAgICAgICAgICAgICAtaGFsZkRlcHRoKSxcclxuICAgICAgICAgICAgbmV3IHBjLlZlYzMoK2hhbGZXaWR0aCwgZmllbGQubWF4SGVpZ2h0LCAraGFsZkRlcHRoKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZUluc3RhbmNpbmdNZXNoKGVudGl0eTogcGN4LkVudGl0eSwgbWF0ZXJpYWw6IHBjeC5NYXRlcmlhbCwgbG9kSW5mbzogSVBhdGNoTG9kQmFzZSwgcHJpbWl0aXZlSW5mbzogSVNpbmdsZUxvZEluZm8sIGluc3RhbmNlcjogSVBhdGNoSW5zdGFuY2luZzxhbnk+LCBkYXRhOiBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXkpOiBwY3guTWVzaEluc3RhbmNlIHtcclxuXHJcbiAgICAgICAgY29uc3QgZ3JhcGhpY3NEZXZpY2UgPSB0aGlzLl9idWZmZXJzTWFuYWdlci5oZWlnaHRNYXAuYXBwLmdyYXBoaWNzRGV2aWNlO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVzaCA9IG5ldyBwYy5NZXNoKGdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBwYXRjaE1lc2gucHJpbWl0aXZlWzBdO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNpbmdCdWYgPSB0aGlzLl9idWZmZXJzTWFuYWdlci5idWlsZEluc3RhbmNpbmdWZXJ0ZXhCdWZmZXIoaW5zdGFuY2VyLCBkYXRhKTtcclxuXHJcbiAgICAgICAgcGF0Y2hNZXNoLmFhYmIgPSB0aGlzLmFhYmI7XHJcbiAgICAgICAgcGF0Y2hNZXNoLmluZGV4QnVmZmVyWzBdID0gdGhpcy5fYnVmZmVyc01hbmFnZXIuc2hhcmVkSW5kZXhCdWZmZXI7XHJcbiAgICAgICAgcGF0Y2hNZXNoLnZlcnRleEJ1ZmZlciAgID0gdGhpcy5fYnVmZmVyc01hbmFnZXIuc2hhcmVkVmVydGV4QnVmZmVyO1xyXG5cclxuICAgICAgICBwcmltaXRpdmUudHlwZSA9IHBjLlBSSU1JVElWRV9UUklBTkdMRVM7XHJcbiAgICAgICAgcHJpbWl0aXZlLmJhc2UgPSBwcmltaXRpdmVJbmZvLnN0YXJ0O1xyXG4gICAgICAgIHByaW1pdGl2ZS5jb3VudCA9IHByaW1pdGl2ZUluZm8uY291bnQ7XHJcbiAgICAgICAgcHJpbWl0aXZlLmluZGV4ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaE1lc2hJbnN0YW5jZSA9IG5ldyBwYy5NZXNoSW5zdGFuY2UocGF0Y2hNZXNoLCBtYXRlcmlhbCwgZW50aXR5KTtcclxuXHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UuY3VsbCA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS52aXNpYmxlVGhpc0ZyYW1lID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnJlY2VpdmVTaGFkb3cgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2Uuc2V0UGFyYW1ldGVyKHBhdGNoTG9kQ29yZVBhcmFtTmFtZSwgbG9kSW5mby5jb3JlLCAweGZmZmZmZmZmKTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRJbnN0YW5jaW5nKGluc3RhbmNpbmdCdWYsIGZhbHNlKTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRDdXN0b21BYWJiKHRoaXMuYWFiYik7XHJcblxyXG4gICAgICAgIHJldHVybiBwYXRjaE1lc2hJbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlUGF0Y2hNZXNoKHBhdGNoSW5kZXg6IG51bWJlciwgZW50aXR5OiBwY3guRW50aXR5LCBtYXRlcmlhbDogcGN4Lk1hdGVyaWFsKTogcGN4Lk1lc2hJbnN0YW5jZSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5fYnVmZmVyc01hbmFnZXIuaGVpZ2h0TWFwLmZpZWxkO1xyXG4gICAgICAgIGNvbnN0IGdyYXBoaWNzRGV2aWNlID0gdGhpcy5fYnVmZmVyc01hbmFnZXIuaGVpZ2h0TWFwLmFwcC5ncmFwaGljc0RldmljZTtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hNZXNoID0gbmV3IHBjLk1lc2goZ3JhcGhpY3NEZXZpY2UpO1xyXG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IHBhdGNoTWVzaC5wcmltaXRpdmVbMF07XHJcblxyXG4gICAgICAgIHBhdGNoTWVzaC5hYWJiID0gdGhpcy5hYWJiO1xyXG4gICAgICAgIHBhdGNoTWVzaC5pbmRleEJ1ZmZlclswXSA9IHRoaXMuX2J1ZmZlcnNNYW5hZ2VyLnNoYXJlZEluZGV4QnVmZmVyO1xyXG4gICAgICAgIHBhdGNoTWVzaC52ZXJ0ZXhCdWZmZXIgICA9IHRoaXMuX2J1ZmZlcnNNYW5hZ2VyLnNoYXJlZFZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICAgICAgcHJpbWl0aXZlLnR5cGUgPSBwYy5QUklNSVRJVkVfVFJJQU5HTEVTO1xyXG4gICAgICAgIHByaW1pdGl2ZS5iYXNlID0gMDtcclxuICAgICAgICBwcmltaXRpdmUuY291bnQgPSAwO1xyXG4gICAgICAgIHByaW1pdGl2ZS5pbmRleGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hNZXNoSW5zdGFuY2UgPSBuZXcgcGMuTWVzaEluc3RhbmNlKHBhdGNoTWVzaCwgbWF0ZXJpYWwsIGVudGl0eSk7XHJcblxyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLmN1bGwgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UudmlzaWJsZVRoaXNGcmFtZSA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLmNhc3RTaGFkb3cgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5yZWNlaXZlU2hhZG93ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoWCA9IHBhdGNoSW5kZXggJSBmaWVsZC5udW1QYXRjaGVzWDtcclxuICAgICAgICBjb25zdCBwYXRjaFogPSBwYXRjaEluZGV4IC8gZmllbGQubnVtUGF0Y2hlc1ggfCAwO1xyXG5cclxuICAgICAgICBjb25zdCBtaW5YID0gcGF0Y2hYICogKGZpZWxkLnBhdGNoU2l6ZSAtIDEpO1xyXG4gICAgICAgIGNvbnN0IG1pblogPSBwYXRjaFogKiAoZmllbGQucGF0Y2hTaXplIC0gMSk7XHJcblxyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnNldFBhcmFtZXRlcihwYXRjaENvb3JkT2Zmc2V0UGFyYW1OYW1lLCBbbWluWCwgbWluWl0sIDB4ZmZmZmZmZmYpO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnNldEluc3RhbmNpbmcobnVsbCk7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2Uuc2V0Q3VzdG9tQWFiYih0aGlzLmFhYmIpO1xyXG5cclxuICAgICAgICByZXR1cm4gcGF0Y2hNZXNoSW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3lNZXNoKG1lc2hJbnN0YW5jZTogcGN4Lk1lc2hJbnN0YW5jZSkge1xyXG4gICAgXHJcbiAgICAgICAgLy8gZG9udCBkZXN0cm95IHNoYXJlZCBpbmRleCBhbmQgdmVydGV4IGJ1ZmZlcnMgYW5kIHdpcmVmcmFtZSBzaGFyZWQgaW5kZXggYnVmZmVyXHJcbiAgICAgICAgaWYgKG1lc2hJbnN0YW5jZS5tZXNoKSB7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tZXNoLmluZGV4QnVmZmVyID0gW251bGxdIGFzIHVua25vd24gYXMgcGN4LkluZGV4QnVmZmVyW107XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tZXNoLnZlcnRleEJ1ZmZlciA9IG51bGwgYXMgdW5rbm93biBhcyBwY3guVmVydGV4QnVmZmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWVzaEluc3RhbmNlLmRlc3Ryb3koKTtcclxuICAgICAgICBtZXNoSW5zdGFuY2UubWVzaD8uZGVzdHJveSgpO1xyXG5cclxuICAgICAgICBpZiAobWVzaEluc3RhbmNlLmluc3RhbmNpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UuaW5zdGFuY2luZ0RhdGEuZGVzdHJveT8uKCk7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5pbnN0YW5jaW5nRGF0YS52ZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJpbmREZXBlbmRlbmNpZXNUb01hdGVyaWFsKGluc3RhbmNpbmc6IElQYXRjaEluc3RhbmNpbmc8YW55PiB8IHVuZGVmaW5lZCwgbWF0ZXJpYWw6IHBjeC5TdGFuZGFyZE1hdGVyaWFsLCB1cGRhdGU6IGJvb2xlYW4gPSB0cnVlKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGhlaWdodE1hcEJ1ZmZlciA9IHRoaXMuX2J1ZmZlcnNNYW5hZ2VyLmhlaWdodE1hcDtcclxuICAgICAgICBjb25zdCBpbnN0YW5jaW5nVHlwZSA9ICBpbnN0YW5jaW5nIGluc3RhbmNlb2YgUGF0Y2hDb21iaW5lSW5zdGFuY2luZyA/ICdjb21iaW5lJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2luZyBpbnN0YW5jZW9mIFBhdGNoSW5zdGFuY2luZyA/ICdzaW1wbGUnIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZTtcclxuXHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHBhdGNoSW5zdENvb3JkT2Zmc2V0QXR0ck5hbWUsIHBjLlNFTUFOVElDX0FUVFIxMCk7XHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHZlcnRleENvb3JkQXR0ck5hbWUsIHBjLlNFTUFOVElDX1BPU0lUSU9OKTtcclxuICAgICAgICBtYXRlcmlhbC5zZXRQYXJhbWV0ZXIoaGVpZ2h0TWFwUGFyYW1OYW1lLCBoZWlnaHRNYXBCdWZmZXIudGV4dHVyZSk7XHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHBhdGNoTG9kQ29yZVBhcmFtTmFtZSwgMCk7XHJcblxyXG4gICAgICAgIGlmIChpbnN0YW5jaW5nVHlwZSkge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5kZWxldGVQYXJhbWV0ZXIocGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5zZXRQYXJhbWV0ZXIocGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSwgWzAsIDBdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHBjVmVyc2lvbiA9IGB2JHtwYy52ZXJzaW9uWzBdfWAgYXMgdW5rbm93biBhcyBhbnk7XHJcbiAgICAgICAgY29uc3QgZmllbGQgPSBoZWlnaHRNYXBCdWZmZXIuZmllbGQ7XHJcbiAgICAgICAgY29uc3QgY2h1bmtzU3RvcmUgPSBnZXRGaWVsZFNoYWRlckNodW5rcyh7XHJcbiAgICAgICAgICAgIHdpZHRoOiBmaWVsZC53aWR0aCxcclxuICAgICAgICAgICAgZGVwdGg6IGZpZWxkLmRlcHRoLFxyXG4gICAgICAgICAgICBwYXRjaFNpemU6IGZpZWxkLnBhdGNoU2l6ZSxcclxuICAgICAgICAgICAgaGVpZ2h0TWFwQ2h1bmtTaXplOiBmaWVsZC5oZWlnaHRNYXAuZGF0YUNodW5rU2l6ZSxcclxuICAgICAgICAgICAgaGVpZ2h0TWFwRm9ybWF0OiBoZWlnaHRNYXBCdWZmZXIuZm9ybWF0LFxyXG4gICAgICAgICAgICBlbmdpbmVWZXJzaW9uOiBwY1ZlcnNpb24sXHJcbiAgICAgICAgICAgIGluc3RhbmNpbmc6IGluc3RhbmNpbmdUeXBlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNodW5rTmFtZXMgPSBPYmplY3Qua2V5cyhjaHVua3NTdG9yZSk7XHJcbiAgICAgICAgY29uc3Qgc2hhZGVyQ2h1bmtzID0gbWF0ZXJpYWwuZ2V0U2hhZGVyQ2h1bmtzPy4ocGMuU0hBREVSTEFOR1VBR0VfR0xTTCk7XHJcblxyXG4gICAgICAgIGlmIChzaGFkZXJDaHVua3MpIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNodW5rTmFtZSBvZiBjaHVua05hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBzaGFkZXJDaHVua3Muc2V0KGNodW5rTmFtZSwgY2h1bmtzU3RvcmVbY2h1bmtOYW1lXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1hdGVyaWFsLnNoYWRlckNodW5rc1ZlcnNpb24gPSBwYy5DSFVOS0FQSV8xXzcwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNodW5rczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IG1hdGVyaWFsLmNodW5rcztcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNodW5rTmFtZSBvZiBjaHVua05hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBjaHVua3NbY2h1bmtOYW1lXSA9IGNodW5rc1N0b3JlW2NodW5rTmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNodW5rcy5BUElWZXJzaW9uID0gcGMuQ0hVTktBUElfMV83MDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGUpIHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFNxdWFyZUl0ZXJhdG9yIGZyb20gXCIuLi9Db3JlL1NxdWFyZUl0ZXJhdG9yLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaEluc3RhbmNpbmcgfSBmcm9tIFwiLi9JUGF0Y2hJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgTWVzaEluc3RhbmNlRmFjdG9yeSBmcm9tIFwiLi9NZXNoSW5zdGFuY2VGYWN0b3J5Lm1qc1wiO1xyXG5pbXBvcnQgUGF0Y2hDb21iaW5lSW5zdGFuY2luZyBmcm9tIFwiLi9QYXRjaENvbWJpbmVJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgUGF0Y2hJbnN0YW5jaW5nIGZyb20gXCIuL1BhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IHsgcGF0Y2hJbnN0Q29vcmRPZmZzZXRBdHRyTmFtZSwgdHlwZSBUSW5zdGFuY2luZ1R5cGUsIHZlcnRleENvb3JkQXR0ck5hbWUgfSBmcm9tIFwiLi9TaGFkZXJDaHVua3MubWpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRpdHlQYXRjaGVzTWVzaCBleHRlbmRzIFNxdWFyZUl0ZXJhdG9yIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZU1hdGVyaWFsKCk6IHBjeC5TdGFuZGFyZE1hdGVyaWFsIHtcclxuXHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgcGMuU3RhbmRhcmRNYXRlcmlhbCgpO1xyXG4gICAgICAgICAgICAgIG1hdGVyaWFsLm5hbWUgPSBcIkhlaWdodGZpZWxkTWF0ZXJpYWxcIjtcclxuXHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHBhdGNoSW5zdENvb3JkT2Zmc2V0QXR0ck5hbWUsIHBjLlNFTUFOVElDX0FUVFIxMCk7XHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHZlcnRleENvb3JkQXR0ck5hbWUsIHBjLlNFTUFOVElDX1BPU0lUSU9OKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWFkb25seSBfcGF0Y2hTaXplOiBudW1iZXI7XHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX251bVBhdGNoZXNYOiBudW1iZXI7XHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX251bVBhdGNoZXNaOiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBfZW50aXR5OiBwY3guRW50aXR5O1xyXG4gICAgcHJpdmF0ZSBfbWF0ZXJpYWw6IHBjeC5TdGFuZGFyZE1hdGVyaWFsO1xyXG4gICAgcHJpdmF0ZSBfbWVzaEZhY3Rvcnk6IE1lc2hJbnN0YW5jZUZhY3Rvcnk7XHJcbiAgICBwcml2YXRlIF9wYXRjaEF2YWxhYmxlQ291bnQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX2NoYW5nZXNJZHM6IG51bWJlcltdO1xyXG4gICAgcHJpdmF0ZSBfbWVzaEluc3RhbmNlQXJyYXk6IEFycmF5PHBjeC5NZXNoSW5zdGFuY2UgfCB1bmRlZmluZWQ+O1xyXG4gICAgcHJpdmF0ZSBfaW5zdGFuY2luZ1R5cGU6IFRJbnN0YW5jaW5nVHlwZTtcclxuICAgIHByaXZhdGUgX2luc3RhbmNpbmc6IElQYXRjaEluc3RhbmNpbmc8YW55PiB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgX3ByZXZVc2VNZXNoQmFnOiBib29sZWFuO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgaW5zdGFuY2luZygpIHsgcmV0dXJuIHRoaXMuX2luc3RhbmNpbmc7IH1cclxuICAgIHB1YmxpYyBnZXQgbWVzaEZhY3RvcnkoKSB7IHJldHVybiB0aGlzLl9tZXNoRmFjdG9yeTsgfVxyXG4gICAgcHVibGljIGdldCBtZXNoSW5zdGFuY2VBcnJheSgpOiBSZWFkb25seTx0eXBlb2YgdGhpcy5fbWVzaEluc3RhbmNlQXJyYXk+IHsgcmV0dXJuIHRoaXMuX21lc2hJbnN0YW5jZUFycmF5OyB9XHJcbiAgICBwdWJsaWMgZ2V0IGFhYmIoKSB7IHJldHVybiB0aGlzLl9tZXNoRmFjdG9yeS5hYWJiOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG1hdGVyaWFsKCkgeyByZXR1cm4gdGhpcy5fbWF0ZXJpYWw7IH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoU2l6ZSgpIHsgcmV0dXJuIHRoaXMuX3BhdGNoU2l6ZTsgfVxyXG4gICAgcHVibGljIGdldCBudW1QYXRjaGVzWCgpIHsgcmV0dXJuIHRoaXMuX251bVBhdGNoZXNYOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNaKCkgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1o7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNoRmFjdG9yeTogTWVzaEluc3RhbmNlRmFjdG9yeSwgZW50aXR5OiBwY3guRW50aXR5KSB7XHJcblxyXG4gICAgICAgIHN1cGVyKG1lc2hGYWN0b3J5LmJ1ZmZlcnNNYW5hZ2VyLmhlaWdodE1hcC5maWVsZCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhdGNoU2l6ZSAgID0gdGhpcy5maWVsZC5wYXRjaFNpemU7XHJcbiAgICAgICAgdGhpcy5fbnVtUGF0Y2hlc1ggPSB0aGlzLmZpZWxkLm51bVBhdGNoZXNYO1xyXG4gICAgICAgIHRoaXMuX251bVBhdGNoZXNaID0gdGhpcy5maWVsZC5udW1QYXRjaGVzWjtcclxuXHJcbiAgICAgICAgdGhpcy5fZW50aXR5ID0gZW50aXR5O1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsID0gRW50aXR5UGF0Y2hlc01lc2guY3JlYXRlTWF0ZXJpYWwoKTtcclxuICAgICAgICB0aGlzLl9tZXNoRmFjdG9yeSA9IG1lc2hGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMuX3BhdGNoQXZhbGFibGVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlc0lkcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2luc3RhbmNpbmdUeXBlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcHJldlVzZU1lc2hCYWcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheSA9IG5ldyBBcnJheSh0aGlzLl9udW1QYXRjaGVzWCAqIHRoaXMuX251bVBhdGNoZXNaKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWVzaEZhY3RvcnkuYmluZERlcGVuZGVuY2llc1RvTWF0ZXJpYWwodGhpcy5pbnN0YW5jaW5nLCB0aGlzLl9tYXRlcmlhbCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZm9yY2VVcGRhdGVSZW5kZXJDb21wb25lbnQoKSB7XHJcblxyXG4gICAgICAgIGxldCBhcHBlbmQgPSBmYWxzZTsgLy8gZGVzdHJveSBwcmV2IG1lc2hJbnN0YW5jZXMgYnkgZGVmYXVsdFxyXG5cclxuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMuaW5zdGFuY2luZ1xyXG4gICAgICAgICAgICA/IHRoaXMuaW5zdGFuY2luZy5tZXNoSW5zdGFuY2VDb3VudFxyXG4gICAgICAgICAgICA6IHRoaXMuX3BhdGNoQXZhbGFibGVDb3VudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlcyA9IG5ldyBBcnJheTxwY3guTWVzaEluc3RhbmNlPihjb3VudCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2luZy5hcHBlbmRNZXNoSW5zdGFuY2VzKG1lc2hJbnN0YW5jZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICBcclxuICAgICAgICAgICAgLy8gaWYgaW5zdGFuY2luZyB3YXMgdXNlZCwgdGhlbiB3ZSBkZWxldGUgYWxsIHByZXZpb3VzIGluc3RhbmNlc1xyXG4gICAgICAgICAgICAvLyBvciB1c2UgY3VzdG9tIHJlbmRlcmVyXHJcbiAgICAgICAgICAgIGFwcGVuZCA9ICF0aGlzLl9wcmV2VXNlTWVzaEJhZztcclxuICAgICAgICBcclxuICAgICAgICAgICAgbGV0IGkgPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcGF0Y2hJbmRleCA9IDA7IHBhdGNoSW5kZXggPCB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheS5sZW5ndGg7IHBhdGNoSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hNZXNoSW5zdGFuY2UgPSB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheVtwYXRjaEluZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXRjaE1lc2hJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZXNbaSsrXSA9IHBhdGNoTWVzaEluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VzSWRzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9wcmV2VXNlTWVzaEJhZyA9ICEhdGhpcy5pbnN0YW5jaW5nO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fZW50aXR5LnJlbmRlcikge1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogaHR0cHM6Ly9naXRodWIuY29tL3BsYXljYW52YXMvZW5naW5lL2lzc3Vlcy82NjgwXHJcbiAgICAgICAgICAgIGlmIChhcHBlbmQpIHtcclxuICAgICAgICAgICAgICAgICh0aGlzLl9lbnRpdHkucmVuZGVyIGFzIGFueSkuX21lc2hJbnN0YW5jZXMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fZW50aXR5LnJlbmRlci5tZXNoSW5zdGFuY2VzID0gbWVzaEluc3RhbmNlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBjdXN0b20gbGF5ZXJzXHJcbiAgICAgICAgICAgIHRoaXMuX2VudGl0eS5hZGRDb21wb25lbnQoJ3JlbmRlcicsIHtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZXM6IG1lc2hJbnN0YW5jZXNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgZGVmYXVsdCB2YWx1ZXNcclxuICAgICAgICBmb3IgKGNvbnN0IG1lc2hJbnN0YW5jZSBvZiBtZXNoSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5jdWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5yZWNlaXZlU2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVBYWJiKCkge1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IG1lc2hJbnN0YW5jZSBvZiB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheSkge1xyXG4gICAgICAgICAgICBpZiAobWVzaEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2Uuc2V0Q3VzdG9tQWFiYih0aGlzLl9tZXNoRmFjdG9yeS5hYWJiKTtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tZXNoLmFhYmIgPSB0aGlzLl9tZXNoRmFjdG9yeS5hYWJiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jaW5nLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5vYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLm9iamVjdC5zZXRDdXN0b21BYWJiKHRoaXMuX21lc2hGYWN0b3J5LmFhYmIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ub2JqZWN0Lm1lc2guYWFiYiA9IHRoaXMuX21lc2hGYWN0b3J5LmFhYmI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlUmVuZGVyQ29tcG9uZW50KCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jaW5nIHx8IHRoaXMuX2NoYW5nZXNJZHMubGVuZ3RoID09PSAwIHx8ICF0aGlzLl9lbnRpdHkuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9mb3JjZVVwZGF0ZVJlbmRlckNvbXBvbmVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2FkZFBhdGNoTWVzaEluc3RhbmNlKHBhdGNoSW5kZXg6IG51bWJlciwgbWVzaEluc3RhbmNlOiBwY3guTWVzaEluc3RhbmNlKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9tZXNoSW5zdGFuY2VBcnJheVtwYXRjaEluZGV4XSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01lc2ggaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiBhZGRlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF0gPSBtZXNoSW5zdGFuY2U7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlc0lkcy5wdXNoKHBhdGNoSW5kZXgpO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoQXZhbGFibGVDb3VudCsrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRPckNyZWF0ZVBhdGNoTWVzaChwYXRjaEluZGV4OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgbGV0IHBhdGNoID0gdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF07XHJcbiAgICAgICAgaWYgKCFwYXRjaCkge1xyXG4gICAgICAgICAgICBwYXRjaCA9IHRoaXMuX21lc2hGYWN0b3J5LmNyZWF0ZVBhdGNoTWVzaChwYXRjaEluZGV4LCB0aGlzLl9lbnRpdHksIHRoaXMuX21hdGVyaWFsKTtcclxuICAgICAgICAgICAgdGhpcy5fYWRkUGF0Y2hNZXNoSW5zdGFuY2UocGF0Y2hJbmRleCwgcGF0Y2gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhdGNoO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95UGF0Y2hNZXNoKHBhdGNoSW5kZXg6IG51bWJlcikge1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaE1lc2hJbnN0YW5jZSA9IHRoaXMuX21lc2hJbnN0YW5jZUFycmF5W3BhdGNoSW5kZXhdO1xyXG5cclxuICAgICAgICBpZiAocGF0Y2hNZXNoSW5zdGFuY2UpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hGYWN0b3J5LmRlc3Ryb3lNZXNoKHBhdGNoTWVzaEluc3RhbmNlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3BhdGNoQXZhbGFibGVDb3VudC0tO1xyXG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VzSWRzLnB1c2gocGF0Y2hJbmRleCk7XHJcblxyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95UGF0Y2hlc01lc2goKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lQYXRjaE1lc2goaSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NsZWFuTWVzaGVzKCkge1xyXG5cclxuICAgICAgICAvLyBEZXN0cm95IGZvciByZWNyZWF0ZVxyXG4gICAgICAgIHRoaXMuX2luc3RhbmNpbmc/LmRlc3Ryb3koKG1lc2gpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEZhY3RvcnkuZGVzdHJveU1lc2gobWVzaCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIERlc3Ryb3kgcGF0Y2hlcyBtZXNoZXMsIHRoZXkgd2lsbCBub3QgYmUgdXNlZCBpbiBjdXN0b20gb3IgaW5zdGFuY2VkIHJlbmRlcmluZ1xyXG4gICAgICAgIGlmICh0aGlzLl9pbnN0YW5jaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveVBhdGNoZXNNZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRJbnN0YW5jaW5nVHlwZSh0eXBlOiBUSW5zdGFuY2luZ1R5cGUpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNpbmdUeXBlID09PSB0eXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2NsZWFuTWVzaGVzKCk7XHJcbiAgICAgICAgdGhpcy5faW5zdGFuY2luZ1R5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuX2luc3RhbmNpbmcgPSB0eXBlID09PSAnY29tYmluZScgPyBuZXcgUGF0Y2hDb21iaW5lSW5zdGFuY2luZygpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9PT0gJ3NpbXBsZScgID8gbmV3IFBhdGNoSW5zdGFuY2luZygpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICB0aGlzLl9tZXNoRmFjdG9yeS5iaW5kRGVwZW5kZW5jaWVzVG9NYXRlcmlhbCh0aGlzLl9pbnN0YW5jaW5nLCB0aGlzLl9tYXRlcmlhbCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlTWVzaGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVBhdGNoZXNNZXNoTWF0ZXJpYWwoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5fbWVzaEZhY3RvcnkuYnVmZmVyc01hbmFnZXIuaGVpZ2h0TWFwLmZpZWxkO1xyXG4gICAgICAgIGNvbnN0IG51bVBhdGNoZXNYID0gZmllbGQubnVtUGF0Y2hlc1g7XHJcbiAgICAgICAgY29uc3QgbnVtUGF0Y2hlc1ogPSBmaWVsZC5udW1QYXRjaGVzWjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCBudW1QYXRjaGVzWjsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IG51bVBhdGNoZXNYOyB4KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHogKiBudW1QYXRjaGVzWCArIHg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2UgPSB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheVtpbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc2hJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tYXRlcmlhbCA9IHRoaXMuX21hdGVyaWFsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVNZXNoZXMoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2NsZWFuTWVzaGVzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2luZykge1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNpbmcuYnVpbGQodGhpcy5fbWVzaEZhY3RvcnkuYnVmZmVyc01hbmFnZXIuaGVpZ2h0TWFwLmZpZWxkLCAobG9kSW5mbywgcHJpbWl0aXZlSW5mbywgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21lc2hGYWN0b3J5LmNyZWF0ZUluc3RhbmNpbmdNZXNoKHRoaXMuX2VudGl0eSwgdGhpcy5fbWF0ZXJpYWwsIGxvZEluZm8sIHByaW1pdGl2ZUluZm8sIHRoaXMuaW5zdGFuY2luZyEsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGF0Y2hlc01lc2hNYXRlcmlhbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZm9yY2VVcGRhdGVSZW5kZXJDb21wb25lbnQoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IG1hcEVudW0gfSBmcm9tIFwiLi4vRXh0cmFzL0VudW1Db252ZXJ0ZXIubWpzXCJcclxuXHJcbmV4cG9ydCBjb25zdCBmaWVsZFNpemVFbnVtRGVmYXVsdCA9IDUxMztcclxuZXhwb3J0IGNvbnN0IGZpZWxkU2l6ZUVudW0gPSBtYXBFbnVtKHtcclxuICAgICcxMjgnOiAgIDEyOSxcclxuICAgICcyNTYnOiAgIDI1NyxcclxuICAgICc1MTInOiAgIDUxMyxcclxuICAgICcxMDI0JzogIDEwMjUsXHJcbiAgICAnMjA0OCc6ICAyMDQ5LFxyXG4gICAgJzQwOTYnOiAgNDA5NyxcclxuICAgICc4MTkyJzogIDgxOTMsXHJcbiAgICAnMTYzODQnOiAxNjM4NSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgZmllbGRQYXRjaFNpemVFbnVtRGVmYXVsdCA9IDMzO1xyXG5leHBvcnQgY29uc3QgZmllbGRQYXRjaFNpemVFbnVtID0gbWFwRW51bSh7XHJcbiAgICAnMTYnOiAgICAxNyxcclxuICAgICczMic6ICAgIDMzLFxyXG4gICAgJzY0JzogICAgNjUsXHJcbiAgICAnMTI4JzogICAxMjksXHJcbiAgICAnMjU2JzogICAyNTcsXHJcbiAgICAnNTEyJzogICA1MTMsXHJcbiAgICAnMTAyNCc6ICAxMDI1LFxyXG4gICAgJzIwNDgnOiAgMjA0OSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgZmllbGRIZWlnaHRzQ29tcHJlc3NBbGdvcml0bURlZmF1bHQgPSAnbm9uZSc7XHJcbmV4cG9ydCBjb25zdCBmaWVsZEhlaWdodHNDb21wcmVzc0FsZ29yaXRtID0gbWFwRW51bSh7XHJcbiAgICAnTm9uZSc6ICdub25lJyxcclxuICAgICdYMic6ICd4MicsXHJcbiAgICAnWDQnOiAneDQnXHJcbn0pOyIsImltcG9ydCB0eXBlIHsgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUGF0Y2ggfSBmcm9tIFwiLi4vQ29yZS9JUGF0Y2gubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoTG9kIH0gZnJvbSBcIi4uL0NvcmUvSVBhdGNoTG9kLm1qc1wiO1xyXG5pbXBvcnQgeyBkZWZhdWx0UGF0Y2hMb2QgfSBmcm9tIFwiLi4vQ29yZS9Mb2RTdGF0ZS5tanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQYXRjaFN0YXRlIHtcclxuICAgIHB1YmxpYyB2aXNpYmxlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgbG9kOiBSZWFkb25seTxJUGF0Y2hMb2Q+ID0gZGVmYXVsdFBhdGNoTG9kO1xyXG4gICAgcHVibGljIGluZGljZXNCYXNlSW5kZXg6IG51bWJlciA9IDA7XHJcbiAgICBwdWJsaWMgaW5kaWNlc0NvdW50OiBudW1iZXIgPSAwO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXRjaCBleHRlbmRzIFBhdGNoU3RhdGUgaW1wbGVtZW50cyBJUGF0Y2gge1xyXG5cclxuICAgIHJlYWRvbmx5IGluZGV4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBzaXplOiBudW1iZXI7XHJcbiAgICByZWFkb25seSB4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSB6OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtaW5YOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtaW5aOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaW5kZXg6IG51bWJlciwgeDogaW50LCB6OiBpbnQsIG1pblg6IGludCwgbWluWjogaW50LCBzaXplOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMuc2l6ZSAgPSBzaXplO1xyXG4gICAgICAgIHRoaXMueCAgICAgPSB4O1xyXG4gICAgICAgIHRoaXMueiAgICAgPSB6O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWluWCAgPSBtaW5YO1xyXG4gICAgICAgIHRoaXMubWluWiAgPSBtaW5aO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaExvZCwgSVBhdGNoTG9kQmFzZSB9IGZyb20gXCIuLi9Db3JlL0lQYXRjaExvZC5tanNcIjtcclxuaW1wb3J0IHsgcGF0Y2hMb2RDb3JlUGFyYW1OYW1lIH0gZnJvbSBcIi4vU2hhZGVyQ2h1bmtzLm1qc1wiO1xyXG5pbXBvcnQgRW50aXR5UGF0Y2hlc01lc2ggZnJvbSBcIi4vRW50aXR5UGF0Y2hlc01lc2gubWpzXCI7XHJcbmltcG9ydCBNZXNoSW5zdGFuY2VGYWN0b3J5IGZyb20gXCIuL01lc2hJbnN0YW5jZUZhY3RvcnkubWpzXCI7XHJcbmltcG9ydCBQYXRjaCBmcm9tIFwiLi9QYXRjaC5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJU2luZ2xlTG9kSW5mbyB9IGZyb20gXCIuLi9Db3JlL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoZXNTdGF0ZSB9IGZyb20gXCIuLi9Db3JlL1BhdGNoZXNNYW5hZ2VyLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElMb2RTdGF0ZSB9IGZyb20gXCIuLi9Db3JlL0xvZFN0YXRlLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVuZGVyT3B0aW9ucyB7XHJcbiAgICB3aXJlZnJhbWU/OiBib29sZWFuLFxyXG4gICAgY2FzdFNoYWRvdz86IGJvb2xlYW4sXHJcbiAgICByZWNlaXZlU2hhZG93PzogYm9vbGVhbixcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0Y2hlc1JlbmRlclByZXBhcmVyIGV4dGVuZHMgRW50aXR5UGF0Y2hlc01lc2ggaW1wbGVtZW50cyBJUGF0Y2hlc1N0YXRlIHtcclxuXHJcbiAgICBwcml2YXRlIF93aXJlZnJhbWU6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9jYXN0U2hhZG93OiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBfcmVjZWl2ZVNoYWRvdzogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX2J1ZmZlckFycmF5OiBQYXRjaFtdO1xyXG4gICAgcHJpdmF0ZSBfbG9kU3RhdGU6IElMb2RTdGF0ZTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGxvZFN0YXRlKCkgeyByZXR1cm4gdGhpcy5fbG9kU3RhdGU7IH1cclxuICAgIHB1YmxpYyBnZXQgYnVmZmVyQXJyYXkoKTogUmVhZG9ubHk8UmVhZG9ubHk8UGF0Y2g+W10+IHsgcmV0dXJuIHRoaXMuX2J1ZmZlckFycmF5OyB9XHJcblxyXG4gICAgcHVibGljIGdldCB3aXJlZnJhbWUoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl93aXJlZnJhbWU7IH1cclxuICAgIHB1YmxpYyBzZXQgd2lyZWZyYW1lKHY6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl93aXJlZnJhbWUgPSB2O1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgY2FzdFNoYWRvdygpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMuX2Nhc3RTaGFkb3c7IH1cclxuICAgIHB1YmxpYyBzZXQgY2FzdFNoYWRvdyh2OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fY2FzdFNoYWRvdyA9IHY7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCByZWNlaXZlU2hhZG93KCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fcmVjZWl2ZVNoYWRvdzsgfVxyXG4gICAgcHVibGljIHNldCByZWNlaXZlU2hhZG93KHY6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9yZWNlaXZlU2hhZG93ID0gdjtcclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihsb2RTYXRlOiBJTG9kU3RhdGUsIG1lc2hGYWN0b3J5OiBNZXNoSW5zdGFuY2VGYWN0b3J5LCBlbnRpdHk6IHBjeC5FbnRpdHksIG9wdGlvbnM6IElSZW5kZXJPcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIobWVzaEZhY3RvcnksIGVudGl0eSk7XHJcbiAgICAgICAgdGhpcy5fbG9kU3RhdGUgPSBsb2RTYXRlO1xyXG4gICAgICAgIHRoaXMuX3dpcmVmcmFtZSA9IG9wdGlvbnMud2lyZWZyYW1lID8/IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2Nhc3RTaGFkb3cgPSBvcHRpb25zLmNhc3RTaGFkb3cgPz8gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcmVjZWl2ZVNoYWRvdyA9IG9wdGlvbnMucmVjZWl2ZVNoYWRvdyA/PyBmYWxzZTtcclxuICAgICAgICB0aGlzLl9idWZmZXJBcnJheSA9IG5ldyBBcnJheSh0aGlzLm1lc2hJbnN0YW5jZUFycmF5Lmxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF91cGRhdGVNZXNoKG1lc2hJbnN0YW5jZTogcGN4Lk1lc2hJbnN0YW5jZSB8IG51bGwgfCB1bmRlZmluZWQsIGxvZDogSVBhdGNoTG9kQmFzZSkge1xyXG5cclxuICAgICAgICBpZiAobWVzaEluc3RhbmNlKSB7XHJcblxyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyA9IHRoaXMuX2Nhc3RTaGFkb3c7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5yZWNlaXZlU2hhZG93ID0gdGhpcy5fcmVjZWl2ZVNoYWRvdztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1JlbmRlclN0eWxlID0gdGhpcy5fd2lyZWZyYW1lID8gcGMuUkVOREVSU1RZTEVfV0lSRUZSQU1FIDogcGMuUkVOREVSU1RZTEVfU09MSUQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5fcmVuZGVyU3R5bGUgPSBuZXdSZW5kZXJTdHlsZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl93aXJlZnJhbWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB3aXJlZnJhbWVEYXRhID0gdGhpcy5tZXNoRmFjdG9yeS53aXJlZnJhbWVCdWZmZXJzTWFuYWdlci5nZXQobG9kKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UubWVzaC5pbmRleEJ1ZmZlcltwYy5SRU5ERVJTVFlMRV9XSVJFRlJBTUVdID0gd2lyZWZyYW1lRGF0YS5idWZmZXI7XHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UubWVzaC5wcmltaXRpdmVbcGMuUkVOREVSU1RZTEVfV0lSRUZSQU1FXSA9IHdpcmVmcmFtZURhdGEucHJpbWl0aXZlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfZnJlZUlmTmVlZFdpcmVmcmFtZShtZXNoSW5zdGFuY2U6IHBjeC5NZXNoSW5zdGFuY2UgfCBudWxsIHwgdW5kZWZpbmVkLCBsb2Q6IElQYXRjaExvZEJhc2UpIHtcclxuXHJcbiAgICAgICAgaWYgKG1lc2hJbnN0YW5jZSAmJiAhdGhpcy5fd2lyZWZyYW1lKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkZWxldGUgbWVzaEluc3RhbmNlLm1lc2guaW5kZXhCdWZmZXJbcGMuUkVOREVSU1RZTEVfV0lSRUZSQU1FXTtcclxuICAgICAgICAgICAgZGVsZXRlIG1lc2hJbnN0YW5jZS5tZXNoLnByaW1pdGl2ZVtwYy5SRU5ERVJTVFlMRV9XSVJFRlJBTUVdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZU1lc2hlcygpIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lc2hJbnN0YW5jZUFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2UgPSB0aGlzLm1lc2hJbnN0YW5jZUFycmF5W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJBcnJheVtpXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1lc2gobWVzaEluc3RhbmNlLCBidWZmZXIubG9kKTtcclxuICAgICAgICAgICAgdGhpcy5fZnJlZUlmTmVlZFdpcmVmcmFtZShtZXNoSW5zdGFuY2UsIGJ1ZmZlci5sb2QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbnN0YW5jaW5nPy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoKGl0ZW0ub2JqZWN0LCBpdGVtLmxvZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZyZWVJZk5lZWRXaXJlZnJhbWUoaXRlbS5vYmplY3QsIGl0ZW0ubG9kKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgdXBkYXRlTWVzaGVzKCkge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZU1lc2hlcygpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0UGF0Y2gocGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50LCBzaXplOiBpbnQsIG1pblg6IGludCwgbWluWjogaW50LCBpbmZvOiBSZWFkb25seTxJU2luZ2xlTG9kSW5mbz4sIGxvZEluZm86IFJlYWRvbmx5PElQYXRjaExvZD4pOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXggID0gcGF0Y2haICogdGhpcy5fbnVtUGF0Y2hlc1ggKyBwYXRjaFg7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IFBhdGNoKGluZGV4LCBwYXRjaFgsIHBhdGNoWiwgbWluWCwgbWluWiwgc2l6ZSk7XHJcblxyXG4gICAgICAgIGJ1ZmZlci5sb2QgPSBsb2RJbmZvO1xyXG4gICAgICAgIGJ1ZmZlci5pbmRpY2VzQmFzZUluZGV4ID0gaW5mby5zdGFydDtcclxuICAgICAgICBidWZmZXIuaW5kaWNlc0NvdW50ID0gaW5mby5jb3VudDtcclxuXHJcbiAgICAgICAgdGhpcy5fYnVmZmVyQXJyYXlbaW5kZXhdID0gYnVmZmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVQYXRjaChwYXRjaFg6IGludCwgcGF0Y2haOiBpbnQsIHZpc2libGU6IGJvb2xlYW4sIGluZm86IFJlYWRvbmx5PElTaW5nbGVMb2RJbmZvPiwgbG9kOiBSZWFkb25seTxJUGF0Y2hMb2Q+KTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaW5kZXggID0gcGF0Y2haICogdGhpcy5fbnVtUGF0Y2hlc1ggKyBwYXRjaFg7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyQXJyYXlbaW5kZXhdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGJ1ZmZlci52aXNpYmxlICAgICAgICAgID0gdmlzaWJsZTtcclxuICAgICAgICBidWZmZXIuaW5kaWNlc0Jhc2VJbmRleCA9IGluZm8uc3RhcnQ7XHJcbiAgICAgICAgYnVmZmVyLmluZGljZXNDb3VudCAgICAgPSBpbmZvLmNvdW50O1xyXG4gICAgICAgIGJ1ZmZlci5sb2QgICAgICAgICAgICAgID0gbG9kO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jaW5nKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0ID0gdGhpcy5pbnN0YW5jaW5nLmluY3JlbWVudChsb2QsIGJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChpbnN0LmNvdW50ID09PSAxICYmIGluc3Qub2JqZWN0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc2hJbnN0YW5jZSA9IGluc3Qub2JqZWN0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaEluc3RhbmNlLmNhc3RTaGFkb3cgPSB0aGlzLl9jYXN0U2hhZG93O1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5yZWNlaXZlU2hhZG93ID0gdGhpcy5fcmVjZWl2ZVNoYWRvdztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1lc2hJbnN0YW5jZSA9IHRoaXMuZ2V0T3JDcmVhdGVQYXRjaE1lc2goaW5kZXgpO1xyXG4gICAgICAgICAgICBjb25zdCBtZXNoID0gbWVzaEluc3RhbmNlLm1lc2g7XHJcbiAgICAgICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IG1lc2gucHJpbWl0aXZlWzBdO1xyXG5cclxuICAgICAgICAgICAgcHJpbWl0aXZlLmJhc2UgID0gaW5mby5zdGFydDtcclxuICAgICAgICAgICAgcHJpbWl0aXZlLmNvdW50ID0gaW5mby5jb3VudDtcclxuXHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLnNldFBhcmFtZXRlcihwYXRjaExvZENvcmVQYXJhbU5hbWUsIGxvZC5jb3JlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1lc2gobWVzaEluc3RhbmNlLCBsb2QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmVmb3JlVXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2luZz8uYmVnaW4oZmFsc2UsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWZ0ZXJVcGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJDb21wb25lbnQoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNpbmc/LmVuZCgpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIEZseUNhbWVyYSBleHRlbmRzIHBjLlNjcmlwdFR5cGUge1xyXG5cclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IG1vZGU6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHNwZWVkOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBzbG93U3BlZWQ6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGZhc3RTcGVlZDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgc2Vuc2l0aXZpdHk6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IG1vYmlsZUNvbnRyb2xzOiBwY3guRW50aXR5IHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIHByaXZhdGUgZXg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZXk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdHJhbnNsYXRlTG9jOiBwY3guVmVjMztcclxuICAgIHByaXZhdGUgbW92ZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIG1pZGRsZURvd246IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIHJpZ2h0RG93bjogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgbW9iaWxlQ29udHJvbDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAvLyBDYW1lcmEgZXVsZXIgYW5nbGUgcm90YXRpb24gYXJvdW5kIHggYW5kIHkgYXhlc1xyXG4gICAgICAgIGNvbnN0IGV1bGVycyA9IHRoaXMuZW50aXR5LmdldExvY2FsRXVsZXJBbmdsZXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5leCA9IChldWxlcnMueiAtIGV1bGVycy54KTtcclxuICAgICAgICB0aGlzLmV5ID0gKGV1bGVycy56IC0gZXVsZXJzLnkpO1xyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlTG9jID0gcGMuVmVjMy5aRVJPLmNsb25lKCk7XHJcbiAgICAgICAgdGhpcy5tb3ZlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmlnaHREb3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5taWRkbGVEb3duID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAvLyBEaXNhYmxpbmcgdGhlIGNvbnRleHQgbWVudSBzdG9wcyB0aGUgYnJvd3NlciBkaXNwbGF5aW5nIGEgbWVudSB3aGVuXHJcbiAgICAgICAgLy8geW91IHJpZ2h0LWNsaWNrIHRoZSBwYWdlXHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLm1vdXNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLm1vdXNlLmRpc2FibGVDb250ZXh0TWVudSgpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZS5vbihwYy5FVkVOVF9NT1VTRU1PVkUsIHRoaXMub25Nb3VzZU1vdmUsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZS5vbihwYy5FVkVOVF9NT1VTRURPV04sIHRoaXMub25Nb3VzZURvd24sIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZS5vbihwYy5FVkVOVF9NT1VTRVVQLCAgIHRoaXMub25Nb3VzZVVwLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFwcGVuZCh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZXggKz0geDtcclxuICAgICAgICB0aGlzLmV5ICs9IHk7XHJcbiAgICAgICAgdGhpcy5leCA9IHBjLm1hdGguY2xhbXAodGhpcy5leCwgLTkwLCA5MCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRyYW5zbGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGVMb2MueCArPSB4O1xyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlTG9jLnkgKz0geTtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZUxvYy56ICs9IHo7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGFwcCA9IHRoaXMuYXBwO1xyXG5cclxuICAgICAgICBsZXQgc3BlZWQgPSB0aGlzLnNwZWVkO1xyXG5cclxuICAgICAgICBpZiAoYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX1NQQUNFKSkge1xyXG4gICAgICAgICAgICBzcGVlZCA9IHRoaXMuc2xvd1NwZWVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX1NISUZUKSkge1xyXG4gICAgICAgICAgICBzcGVlZCA9IHRoaXMuZmFzdFNwZWVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSm95cGFkIGNvbnRyb2xcclxuICAgICAgICBjb25zdCBqb3lzdGlja01vdmVyID0gdG91Y2hKb3lwYWQ/LnN0aWNrc1snam95c3RpY2swJ107XHJcbiAgICAgICAgY29uc3Qgam95c3RpY2tSb3RlciA9IHRvdWNoSm95cGFkPy5zdGlja3NbJ2pveXN0aWNrMSddO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLm1vYmlsZUNvbnRyb2xzICYmIHRvdWNoSm95cGFkPy5idXR0b25zLndhc1ByZXNzZWQoJ2J1dHRvbjInKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vYmlsZUNvbnRyb2wgPSAhdGhpcy5tb2JpbGVDb250cm9sO1xyXG4gICAgICAgICAgICB0aGlzLm1vYmlsZUNvbnRyb2xzLmVuYWJsZWQgPSB0aGlzLm1vYmlsZUNvbnRyb2w7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoam95c3RpY2tSb3Rlcikge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZChqb3lzdGlja1JvdGVyLnksIC1qb3lzdGlja1JvdGVyLngpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGpveXN0aWNrTW92ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoc3BlZWQgKiBqb3lzdGlja01vdmVyLnggKiBkdCwgMCwgLXNwZWVkICogam95c3RpY2tNb3Zlci55ICogZHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBjYW1lcmEncyBwb3NpdGlvblxyXG4gICAgICAgIGlmIChhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfVVApIHx8IGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9XKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZSgwLCAwLCAtc3BlZWQgKiBkdCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfRE9XTikgfHwgYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX1MpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKDAsIDAsIHNwZWVkICogZHQpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmIChhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfTEVGVCkgfHwgYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX0EpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKC1zcGVlZCAqIGR0LCAwLCAwKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9SSUdIVCkgfHwgYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX0QpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKHNwZWVkICogZHQsIDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBVcGRhdGUgdGhlIGNhbWVyYSdzIFRSU1xyXG4gICAgICAgIHRoaXMuZW50aXR5LnNldExvY2FsRXVsZXJBbmdsZXModGhpcy5leCwgdGhpcy5leSwgMCk7XHJcbiAgICAgICAgdGhpcy5lbnRpdHkudHJhbnNsYXRlTG9jYWwodGhpcy50cmFuc2xhdGVMb2MpO1xyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlTG9jLnNldCgwLCAwLCAwKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIGZydXN0dW0gYnkgYWN0dWFsIG1hdHJpeFxyXG4gICAgICAgIHRoaXMuYXBwLnJlbmRlcmVyLnVwZGF0ZUNhbWVyYUZydXN0dW0odGhpcy5lbnRpdHkuY2FtZXJhPy5jYW1lcmEpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Nb3VzZU1vdmUoZXZlbnQ6IHBjeC5Nb3VzZUV2ZW50KSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5tb2RlICYmICFwYy5Nb3VzZS5pc1BvaW50ZXJMb2NrZWQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMucmlnaHREb3duICYmXHJcbiAgICAgICAgICAgICF0aGlzLm1pZGRsZURvd24pXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBjdXJyZW50IEV1bGVyIGFuZ2xlcywgY2xhbXAgdGhlIHBpdGNoLlxyXG4gICAgICAgIGlmICghdGhpcy5tb3ZlZCkge1xyXG4gICAgICAgICAgICAvLyBmaXJzdCBtb3ZlIGV2ZW50IGNhbiBiZSB2ZXJ5IGxhcmdlXHJcbiAgICAgICAgICAgIHRoaXMubW92ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5yaWdodERvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAtZXZlbnQuZHkgLyB0aGlzLnNlbnNpdGl2aXR5LFxyXG4gICAgICAgICAgICAgICAgLWV2ZW50LmR4IC8gdGhpcy5zZW5zaXRpdml0eVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWlkZGxlRG93bikge1xyXG5cclxuICAgICAgICAgICAgbGV0IHNwZWVkID0gdGhpcy5zcGVlZDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkIS5pc1ByZXNzZWQocGMuS0VZX1NISUZUKSkge1xyXG4gICAgICAgICAgICAgICAgc3BlZWQgPSB0aGlzLmZhc3RTcGVlZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoLShldmVudC5keCAvIDUpICogc3BlZWQsIChldmVudC5keSAvIDUpICogc3BlZWQsIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uTW91c2VEb3duKGV2ZW50OiBwY3guTW91c2VFdmVudCkge1xyXG5cclxuICAgICAgICAvLyBXaGVuIHRoZSBtb3VzZSBidXR0b24gaXMgY2xpY2tlZCB0cnkgYW5kIGNhcHR1cmUgdGhlIHBvaW50ZXJcclxuICAgICAgICBpZiAoIXRoaXMubW9kZSAmJiAhcGMuTW91c2UuaXNQb2ludGVyTG9ja2VkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2UhLmVuYWJsZVBvaW50ZXJMb2NrKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSBwYy5NT1VTRUJVVFRPTl9SSUdIVCkge1xyXG4gICAgICAgICAgICB0aGlzLnJpZ2h0RG93biA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IHBjLk1PVVNFQlVUVE9OX01JRERMRSkge1xyXG4gICAgICAgICAgICB0aGlzLm1pZGRsZURvd24gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBvbk1vdXNlVXAoZXZlbnQ6IHBjeC5Nb3VzZUV2ZW50KSB7XHJcblxyXG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IHBjLk1PVVNFQlVUVE9OX1JJR0hUKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmlnaHREb3duID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSBwYy5NT1VTRUJVVFRPTl9NSURETEUpIHtcclxuICAgICAgICAgICAgdGhpcy5taWRkbGVEb3duID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGbHlDYW1lcmE7XHJcbmV4cG9ydCBjb25zdCBmbHlDYW1lcmFTY3JpcHROYW1lID0gJ2ZseUNhbWVyYSc7XHJcblxyXG5wYy5yZWdpc3RlclNjcmlwdChGbHlDYW1lcmEsIGZseUNhbWVyYVNjcmlwdE5hbWUpO1xyXG5cclxuRmx5Q2FtZXJhLmF0dHJpYnV0ZXMuYWRkKCdtb2JpbGVDb250cm9scycsIHtcclxuICAgIHR5cGU6ICdlbnRpdHknLFxyXG59KTtcclxuXHJcbkZseUNhbWVyYS5hdHRyaWJ1dGVzLmFkZCgnc3BlZWQnLCB7XHJcbiAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgIGRlZmF1bHQ6IDEwXHJcbn0pO1xyXG5cclxuRmx5Q2FtZXJhLmF0dHJpYnV0ZXMuYWRkKCdzbG93U3BlZWQnLCB7XHJcbiAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgIGRlZmF1bHQ6IDFcclxufSk7XHJcblxyXG5GbHlDYW1lcmEuYXR0cmlidXRlcy5hZGQoJ2Zhc3RTcGVlZCcsIHtcclxuICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgZGVmYXVsdDogMjBcclxufSk7XHJcblxyXG5GbHlDYW1lcmEuYXR0cmlidXRlcy5hZGQoJ3NlbnNpdGl2aXR5Jywge1xyXG4gICAgdHlwZTogJ251bWJlcicsXHJcbiAgICBtaW46IDEsXHJcbiAgICBkZWZhdWx0OiA1XHJcbn0pO1xyXG5cclxuRmx5Q2FtZXJhLmF0dHJpYnV0ZXMuYWRkKCdtb2RlJywge1xyXG4gICAgdHlwZTogJ251bWJlcicsXHJcbiAgICBkZWZhdWx0OiAwLFxyXG4gICAgZW51bTogW3tcclxuICAgICAgICBcIkxvY2tcIjogMFxyXG4gICAgfSwge1xyXG4gICAgICAgIFwiRHJhZ1wiOiAxXHJcbiAgICB9XVxyXG59KTsiLCJjbGFzcyBGcHNDb3VudGVyIGV4dGVuZHMgcGMuU2NyaXB0VHlwZSB7XHJcblxyXG4gICAgZnBzOiB7IHRpY2soKTogdm9pZCB9IHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY29uc3RyID0gKHdpbmRvdyBhcyBhbnkpLkZQU01ldGVyO1xyXG5cclxuICAgICAgICBpZiAoY29uc3RyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnBzID0gbmV3IGNvbnN0cih7XHJcbiAgICAgICAgICAgICAgICBoZWF0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZ3JhcGg6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5mcHM/LnRpY2soKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRnBzQ291bnRlcjtcclxuZXhwb3J0IGNvbnN0IGZwc0NvdW50ZXJTY3JpcHROYW1lID0gJ0Zwc0NvdW50ZXInO1xyXG5cclxucGMucmVnaXN0ZXJTY3JpcHQoRnBzQ291bnRlciwgZnBzQ291bnRlclNjcmlwdE5hbWUpOyIsImltcG9ydCB7IGRyYXdEaXJlY3Rpb25WZWN0b3IsIGRyYXdQb2ludCB9IGZyb20gXCIuLi9FeHRyYXMvRGVidWcubWpzXCI7XHJcbmltcG9ydCBNaWRwb2ludERpc3BIZWlnaHRmaWVsZCBmcm9tIFwiLi4vQ29yZS9NaWRwb2ludERpc3BIZWlnaHRmaWVsZC5tanNcIjtcclxuaW1wb3J0IEhlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdCBmcm9tIFwiLi4vQ29yZS9IZWlnaHRmaWVsZFJheWNhc3RSZXN1bHQubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRNYXAgZnJvbSBcIi4uL0NvcmUvSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElCcnVzaFNldHRpbmdzIH0gZnJvbSBcIi4uL0hlaWdodGZpZWxkL0JydXNoLm1qc1wiO1xyXG5pbXBvcnQgQ29sb3JQYWludGVyIGZyb20gXCIuLi9IZWlnaHRmaWVsZC9Db2xvclBhaW50ZXIubWpzXCI7XHJcbmltcG9ydCB7IGZpZWxkSGVpZ2h0c0NvbXByZXNzQWxnb3JpdG0sIGZpZWxkSGVpZ2h0c0NvbXByZXNzQWxnb3JpdG1EZWZhdWx0LCBmaWVsZFBhdGNoU2l6ZUVudW0sIGZpZWxkUGF0Y2hTaXplRW51bURlZmF1bHQsIGZpZWxkU2l6ZUVudW0sIGZpZWxkU2l6ZUVudW1EZWZhdWx0IH0gZnJvbSBcIi4uL0hlaWdodGZpZWxkL0VudW1zLm1qc1wiO1xyXG5pbXBvcnQgeyBjYW1lcmFQb3NpdGlvblBhcmFtTmFtZSwgbGF5ZXJzRGlmZnVzZVBhcmFtTmFtZSwgbGF5ZXJzRmxhZ3NQYXJhbU5hbWUsIGxheWVyc09mZnNldFBhcmFtTmFtZSwgbGF5ZXJzU2NhbGVQYXJhbU5hbWUsIG1heEhlaWdodFBhcmFtTmFtZSwgc3BsYXRNYXBQYXJhbU5hbWUsIH0gZnJvbSBcIi4uL0hlaWdodGZpZWxkL1NoYWRlckNodW5rcy5tanNcIjtcclxuaW1wb3J0IEhlaWdodGZpZWxkU2hhcGUgZnJvbSBcIi4uL0NvcmUvSGVpZ2h0ZmllbGRTaGFwZS5tanNcIjtcclxuaW1wb3J0IFBhdGNoZWRIZWlnaHRNYXAgZnJvbSBcIi4uL0NvcmUvUGF0Y2hlZEhlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IENvbXByZXNzZWRQYXRjaGVkSGVpZ2h0TWFwLCB7IFRDb21wcmVzc0FsZ29yaXRtIH0gZnJvbSBcIi4uL0NvcmUvQ29tcHJlc3NlZFBhdGNoZWRIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB7IG1hcFRpdGxlRW51bSB9IGZyb20gXCIuLi9FeHRyYXMvRW51bUNvbnZlcnRlci5tanNcIjtcclxuaW1wb3J0IHsgZ2V0QnVmZmVyIH0gZnJvbSBcIi4uL0FtbW9JbnRlZ3JhdGlvbi9BbW1vSW50ZWdyYXRpb24ubWpzXCI7XHJcbmltcG9ydCB7IElIZWlnaHRNYXBGaWxlSW1wb3J0T3B0aW9ucyB9IGZyb20gXCIuLi9Db3JlL0Fic0hlaWdodE1hcEZpbGVJTy5tanNcIjtcclxuaW1wb3J0IExvZFN0YXRlIGZyb20gXCIuLi9Db3JlL0xvZFN0YXRlLm1qc1wiO1xyXG5pbXBvcnQgR1BVSGVpZ2h0TWFwQnVmZmVyIGZyb20gXCIuLi9IZWlnaHRmaWVsZC9HUFVIZWlnaHRNYXBCdWZmZXIubWpzXCI7XHJcbmltcG9ydCBQYXRjaGVzU3BoZXJlQnVmZmVyIGZyb20gXCIuLi9Db3JlL1BhdGNoZXNTcGhlcmVCdWZmZXIubWpzXCI7XHJcbmltcG9ydCBQYXRjaGVzTWFuYWdlciBmcm9tIFwiLi4vQ29yZS9QYXRjaGVzTWFuYWdlci5tanNcIjtcclxuaW1wb3J0IE1lc2hJbnN0YW5jZUZhY3RvcnkgZnJvbSBcIi4uL0hlaWdodGZpZWxkL01lc2hJbnN0YW5jZUZhY3RvcnkubWpzXCI7XHJcbmltcG9ydCBHUFVCdWZmZXJzTWFuYWdlciBmcm9tIFwiLi4vSGVpZ2h0ZmllbGQvR1BVQnVmZmVyc01hbmFnZXIubWpzXCI7XHJcbmltcG9ydCBQYXRjaGVzUmVuZGVyUHJlcGFyZXIgZnJvbSBcIi4uL0hlaWdodGZpZWxkL1BhdGNoZXNSZW5kZXJQcmVwYXJlci5tanNcIjtcclxuaW1wb3J0IEdQVVdpcmVmcmFtZUJ1ZmZlck1hbmFnZXIgZnJvbSBcIi4uL0hlaWdodGZpZWxkL0dQVVdpcmVmcmFtZUJ1ZmZlcnNNYW5hZ2VyLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVGVycmFpbkhlaWdodE1hcEF0dHJpYnV0ZSB7XHJcbiAgICByZWFkb25seSBmaWxlOiBwY3guQXNzZXQ7XHJcbiAgICByZWFkb25seSB0ZXh0dXJlOiBwY3guQXNzZXQ7XHJcbiAgICByZWFkb25seSBzbW9vdGhGYWN0b3I6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHNtb290aFJhZGl1czogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElUZXJyYWluQnJ1c2hBdHRyaWJ1dGUgZXh0ZW5kcyBJQnJ1c2hTZXR0aW5ncyB7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRlcnJhaW5MYXllckF0dHJpYnV0ZSB7XHJcbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmcsXHJcbiAgICByZWFkb25seSBkaWZmdXNlOiBwY3guQXNzZXQ7XHJcbiAgICByZWFkb25seSBub3JtYWxNYXA6IHBjeC5Bc3NldDtcclxuICAgIHJlYWRvbmx5IHNpemU6IHBjeC5WZWMyO1xyXG4gICAgcmVhZG9ubHkgb2Zmc2V0OiBwY3guVmVjMjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVGVycmFpblBhaW50ZXJTZXR0aW5nc0F0dHJpYnV0ZSB7XHJcbiAgICByZWFkb25seSBzcGxhdE1hcDogcGN4LkFzc2V0O1xyXG59XHJcblxyXG5jb25zdCBicnVzaE1pblNpemUgPSAyO1xyXG5jb25zdCBicnVzaE1heFNpemUgPSAyNTA7XHJcbmNvbnN0IHRtcE1hdCA9IG5ldyBwYy5NYXQ0KCk7XHJcbmNvbnN0IHRlcnJhaW5Mb2NhbFZlcnRleFBvcyA9IG5ldyBwYy5WZWMzKCk7XHJcbmNvbnN0IGhlaWdodE1hcEV4dCA9ICcuaG0nO1xyXG5cclxuZXhwb3J0IGVudW0gUmVuZGVyTW9kZSB7XHJcbiAgICBTdGFuZGFyZCA9IDEsXHJcbiAgICBJbnN0YW5jaW5nQWNjZWxlcmF0b3IgPSAyLFxyXG4gICAgQ29tYmluZUluc3RhbmNpbmdBY2NlbGVyYXRvciA9IDMsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUZXJyYWluIGV4dGVuZHMgcGMuU2NyaXB0VHlwZSB7XHJcblxyXG4gICAgZGVjbGFyZSByZWFkb25seSByZW5kZXJNb2RlOiBSZW5kZXJNb2RlO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBsb2RCeVlQb3M6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IHpGYXI6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgd2lkdGg6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgZGVwdGg6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGNvbXByZXNzQWxnb3JpdG06IFRDb21wcmVzc0FsZ29yaXRtIHwgJ25vbmUnO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBwYXRjaFNpemU6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgY2FzdFNoYWRvdzogYm9vbGVhbjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgcmVjZWl2ZVNoYWRvdzogYm9vbGVhbjtcclxuXHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGxheWVyOiBzdHJpbmc7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGxheWVyMjogc3RyaW5nO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBhdXRvUmVuZGVyOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSB3aXJlZnJhbWU6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IHBhaW50aW5nOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBjYW1lcmFFbnRpdHk6IHBjeC5FbnRpdHkgfCB1bmRlZmluZWQ7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGhlaWdodE1hcDogSVRlcnJhaW5IZWlnaHRNYXBBdHRyaWJ1dGU7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGJydXNoOiBJVGVycmFpbkJydXNoQXR0cmlidXRlO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBhY3RpdmVMYXllcjogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBsYXllcnM6IElUZXJyYWluTGF5ZXJBdHRyaWJ1dGVbXTtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgcGFpbnRlclNldHRpbmdzOiBJVGVycmFpblBhaW50ZXJTZXR0aW5nc0F0dHJpYnV0ZTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHNoYXBlKCkgeyByZXR1cm4gdGhpcy5faGVpZ2h0RmllbGRTaGFwZTsgfVxyXG4gICAgcHVibGljIGdldCBvYmplY3QoKSB7IHJldHVybiB0aGlzLl90ZXJyYWluOyB9XHJcblxyXG4gICAgcHJpdmF0ZSBfbG9jayA9IDA7XHJcblxyXG4gICAgcHVibGljIGdldCBsb2NrKCkgeyByZXR1cm4gdGhpcy5fbG9jazsgfVxyXG5cclxuICAgIHByaXZhdGUgX2xvY2FsQ2FtZXJhUG9zaXRpb24gPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgcHJpdmF0ZSBfdGVycmFpbjogTWlkcG9pbnREaXNwSGVpZ2h0ZmllbGQ7XHJcbiAgICBwcml2YXRlIF9yb3VnaG5lc3MgPSAxLjA7XHJcblxyXG4gICAgcHJpdmF0ZSBfaGVpZ2h0RmllbGRTaGFwZTogSGVpZ2h0ZmllbGRTaGFwZTtcclxuICAgIHByaXZhdGUgX3JheWNhc3RSZXN1bHQ6IEhlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdDtcclxuICAgIHByaXZhdGUgX3JheVN0YXJ0ID0gbmV3IHBjLlZlYzMoKTtcclxuICAgIHByaXZhdGUgX3JheUVuZCA9IG5ldyBwYy5WZWMzKCk7XHJcbiAgICBwcml2YXRlIF9yYXlEaXJlY3Rpb24gPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgcHJpdmF0ZSBfcmF5ID0gbmV3IHBjLlJheSgpO1xyXG4gICAgcHJpdmF0ZSBfY2FtZXJhUG9zID0gbmV3IEFycmF5PG51bWJlcj4oMyk7XHJcblxyXG4gICAgcHJpdmF0ZSBfbGFzdE1vdXNlTW92ZUV2ZW50OiBwY3guTW91c2VFdmVudDtcclxuXHJcbiAgICBwcml2YXRlIF9sYXN0TG9kR3JpZFVwZGF0ZTogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgX2FjdGl2ZUJydXNoOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9icnVzaEhlaWdodE1hcDogSGVpZ2h0TWFwO1xyXG4gICAgcHJpdmF0ZSBfY29sb3JQYWludGVyOiBDb2xvclBhaW50ZXI7XHJcbiAgICBwcml2YXRlIF9icnVzaFNpemU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX2JydXNoU2l6ZVN0ZXA6IG51bWJlciA9IDE7XHJcbiAgICBwcml2YXRlIF9icnVzaE9wYWNpdHk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX2JydXNoT3BhY2l0eVN0ZXA6IG51bWJlciA9IDAuMDE7XHJcbiAgICBwcml2YXRlIF9pbnRlcnNlY3RzUmF5UmVzdWx0OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9sYXllcnNEaWZmdXNlOiBwY3guVGV4dHVyZSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBwdWJsaWMgYWRkTG9jaygpIHtcclxuICAgICAgICB0aGlzLl9sb2NrKys7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZyZWVMb2NrKCkge1xyXG4gICAgICAgIHRoaXMuX2xvY2stLTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcG9zdEluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZU1vdXNlKCk7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZUtleWJvYXJkKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXRCcnVzaCgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRUZXJyYWluKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1hdGVyaWFsUGFyYW1ldGVycygpO1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVMYXllcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlQnJ1c2goKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVQYWludGVyTWF0ZXJpYWwoKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoKCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlSGVpZ2h0TWFwRnJvbUF0dHIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpyZW5kZXJNb2RlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWZhdWx0UGF0Y2hlc1ByZXBhcmVyLnNldEluc3RhbmNpbmdUeXBlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkNvbWJpbmVJbnN0YW5jaW5nQWNjZWxlcmF0b3IgPyAnY29tYmluZScgOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkluc3RhbmNpbmdBY2NlbGVyYXRvciA/ICdzaW1wbGUnIDpcclxuICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6Y2FzdFNoYWRvdycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZGVmYXVsdFBhdGNoZXNQcmVwYXJlci5jYXN0U2hhZG93ID0gdGhpcy5jYXN0U2hhZG93O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOnJlY2VpdmVTaGFkb3cnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRQYXRjaGVzUHJlcGFyZXIucmVjZWl2ZVNoYWRvdyA9IHRoaXMucmVjZWl2ZVNoYWRvdztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjp3aXJlZnJhbWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRQYXRjaGVzUHJlcGFyZXIud2lyZWZyYW1lID0gdGhpcy53aXJlZnJhbWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMud2lyZWZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl93aXJlZnJhbWVCdWZmZXJzTWFuYWdlci5mcmVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjphY3RpdmVMYXllcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGFpbnRlck1hdGVyaWFsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6bGF5ZXJzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVMYXllcnMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpicnVzaCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQnJ1c2goKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGFpbnRlck1hdGVyaWFsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6aGVpZ2h0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLnNldE1heEhlaWdodCh0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NwaGVyZXNCdWZmZXIucmVjYWxjdWxhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEZhY3RvcnkudXBkYXRlQWFiYigpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWZhdWx0UGF0Y2hlc1ByZXBhcmVyLnVwZGF0ZUFhYmIoKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWF0ZXJpYWxQYXJhbWV0ZXJzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6ekZhcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZGVmYXVsdFBhdGNoZXNMb2RTdGF0ZS5zZXRaRmFyKHRoaXMuekZhcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEJydXNoKCkge1xyXG4gICAgICAgIGNvbnN0IHNwbGF0TWFwID0gdGhpcy5wYWludGVyU2V0dGluZ3Muc3BsYXRNYXAucmVzb3VyY2UgYXMgcGN4LlRleHR1cmU7XHJcbiAgICAgICAgdGhpcy5fYnJ1c2hIZWlnaHRNYXAgPSBuZXcgSGVpZ2h0TWFwKDI1NiwgMjU2LCAxMDApO1xyXG4gICAgICAgIHRoaXMuX2NvbG9yUGFpbnRlciA9IG5ldyBDb2xvclBhaW50ZXIodGhpcy5hcHAsIHNwbGF0TWFwLCB0aGlzLmxheWVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVQYWludGVyTWF0ZXJpYWwoKSB7XHJcbiAgICAgICAgdGhpcy5fY29sb3JQYWludGVyLnVwZGF0ZVNldHRpbmdzKHRoaXMuYnJ1c2gsIHRoaXMuYWN0aXZlTGF5ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZUJydXNoKCkge1xyXG5cclxuICAgICAgICB0aGlzLl9icnVzaFNpemUgPSB0aGlzLmJydXNoLnNpemUgfCAwO1xyXG4gICAgICAgIHRoaXMuX2JydXNoT3BhY2l0eSA9IHRoaXMuYnJ1c2gub3BhY2l0eTtcclxuXHJcbiAgICAgICAgY29uc3QgYWN0aXZlQnJ1c2ggPSB0aGlzLmJydXNoLmFjdGl2ZSB8IDA7XHJcblxyXG4gICAgICAgIGlmIChhY3RpdmVCcnVzaCA9PT0gdGhpcy5fYWN0aXZlQnJ1c2gpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJydXNoLnRleHR1cmVzW2FjdGl2ZUJydXNoXSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCcnVzaCBpbWFnZSB1bnNldC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYnJ1c2hUZXh0dXJlID0gdGhpcy5icnVzaC50ZXh0dXJlc1thY3RpdmVCcnVzaF0ucmVzb3VyY2UgYXMgcGN4LlRleHR1cmU7XHJcbiAgICAgICAgY29uc3QgYnJ1c2hJbWcgPSBicnVzaFRleHR1cmUuZ2V0U291cmNlKCkgYXMgdW5rbm93biBhcyBJbWFnZUJpdG1hcDtcclxuXHJcbiAgICAgICAgaWYgKCFicnVzaEltZykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCcnVzaCBpbWFnZSB1bnNldC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fYWN0aXZlQnJ1c2ggPSBhY3RpdmVCcnVzaDtcclxuICAgICAgICB0aGlzLl9icnVzaEhlaWdodE1hcC5mcm9tSW1hZ2UoYnJ1c2hJbWcpO1xyXG4gICAgICAgIHRoaXMuX2JydXNoSGVpZ2h0TWFwLnNtb290aCgxLCAxKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5fYnJ1c2hIZWlnaHRNYXApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRIZWlnaHRNYXBCdWZmZXIoY2h1bmtTaXplOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogTW92ZSB0byB0ZXJyYWluIGNvbGxpZGVyXHJcbiAgICAgICAgLy8gVE9ETzogQW1tbyBqcyBpbnRlZ3JhdGlvblxyXG5cclxuICAgICAgICBsZXQgYnVmZmVyOiBhbnkgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgQW1tbyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHJcbiAgICAgICAgICAgIGJ1ZmZlciA9IGdldEJ1ZmZlcih0aGlzLndpZHRoLCB0aGlzLmRlcHRoLCB0aGlzLnBhdGNoU2l6ZSwgY2h1bmtTaXplLCB0aGlzLmNvbXByZXNzQWxnb3JpdG0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaHQgPSB0aGlzLmNvbXByZXNzQWxnb3JpdG0gPT09ICdub25lJyA/IDAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NBbGdvcml0bSA9PT0gJ3gyJyAgID8gMSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyIDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGhtID0gbmV3IEFtbW8uYnRBbGV4VGVycmFpblBhdGNoZWRIZWlnaHRNYXAodGhpcy53aWR0aCwgdGhpcy5kZXB0aCwgdGhpcy5wYXRjaFNpemUsIGNodW5rU2l6ZSwgMCwgdGhpcy5oZWlnaHQsIGh0LCBidWZmZXIuYnl0ZU9mZnNldCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0gbmV3IEFtbW8uYnRBbGV4SGVpZ2h0ZmllbGRUZXJyYWluU2hhcGUoaG0sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VuZFRyYW5zZm9ybSA9IG5ldyBBbW1vLmJ0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IEFtbW8uYnRWZWN0b3IzKDAsIHRoaXMuaGVpZ2h0IC8gMiwgMCk7XHJcblxyXG4gICAgICAgICAgICBncm91bmRUcmFuc2Zvcm0uc2V0SWRlbnRpdHkoKTtcclxuICAgICAgICAgICAgZ3JvdW5kVHJhbnNmb3JtLnNldE9yaWdpbihwb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBncm91bmRNYXNzID0gMDtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdW5kTG9jYWxJbmVydGlhID0gbmV3IEFtbW8uYnRWZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgICAgICBjb25zdCBncm91bmRNb3Rpb25TdGF0ZSA9IG5ldyBBbW1vLmJ0RGVmYXVsdE1vdGlvblN0YXRlKGdyb3VuZFRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VuZENvbnN0ckluZm8gPSBuZXcgQW1tby5idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm8oZ3JvdW5kTWFzcywgZ3JvdW5kTW90aW9uU3RhdGUsIHNoYXBlLCBncm91bmRMb2NhbEluZXJ0aWEpO1xyXG4gICAgICAgICAgICBjb25zdCBncm91bmRCb2R5ID0gbmV3IEFtbW8uYnRSaWdpZEJvZHkoZ3JvdW5kQ29uc3RySW5mbyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFwcC5zeXN0ZW1zLnJpZ2lkYm9keSEuZHluYW1pY3NXb3JsZC5hZGRSaWdpZEJvZHkoZ3JvdW5kQm9keSk7XHJcblxyXG4gICAgICAgICAgICBBbW1vLmRlc3Ryb3kocG9zaXRpb24pO1xyXG4gICAgICAgICAgICBBbW1vLmRlc3Ryb3koZ3JvdW5kVHJhbnNmb3JtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBidWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc3BoZXJlc0J1ZmZlcjogUGF0Y2hlc1NwaGVyZUJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX2hlaWdodE1hcEJ1ZmZlcjogR1BVSGVpZ2h0TWFwQnVmZmVyO1xyXG4gICAgcHJpdmF0ZSBfYnVmZmVyc01hbmFnZXI6IEdQVUJ1ZmZlcnNNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBfd2lyZWZyYW1lQnVmZmVyc01hbmFnZXI6IEdQVVdpcmVmcmFtZUJ1ZmZlck1hbmFnZXI7XHJcbiAgICBwcml2YXRlIF9tZXNoRmFjdG9yeTogTWVzaEluc3RhbmNlRmFjdG9yeTtcclxuICAgIHByaXZhdGUgX3BhdGNoZXNNYW5hZ2VyOiBQYXRjaGVzTWFuYWdlcjtcclxuXHJcbiAgICBwcml2YXRlIF9kZWZhdWx0UGF0Y2hlc0xvZFN0YXRlOiBMb2RTdGF0ZTtcclxuICAgIHByaXZhdGUgX2RlZmF1bHRQYXRjaGVzUHJlcGFyZXI6IFBhdGNoZXNSZW5kZXJQcmVwYXJlcjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodE1hcFRleHR1cmUoKSB7IHJldHVybiB0aGlzLl9oZWlnaHRNYXBCdWZmZXIudGV4dHVyZTsgfVxyXG4gICAgcHVibGljIGdldCBhYWJiKCkgeyByZXR1cm4gdGhpcy5fbWVzaEZhY3RvcnkuYWFiYjsgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRUZXJyYWluKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRtcENodW5rU2l6ZSA9IHRoaXMucGF0Y2hTaXplICogMiAtIDE7XHJcbiAgICAgICAgY29uc3QgY2h1bmtTaXplID0gTWF0aC5taW4odGhpcy53aWR0aCwgdGhpcy5kZXB0aCwgdG1wQ2h1bmtTaXplKTtcclxuICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9pbml0SGVpZ2h0TWFwQnVmZmVyKGNodW5rU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0TWFwID0gdGhpcy5jb21wcmVzc0FsZ29yaXRtICE9PSAnbm9uZSdcclxuICAgICAgICA/IG5ldyBDb21wcmVzc2VkUGF0Y2hlZEhlaWdodE1hcCh0aGlzLndpZHRoLCB0aGlzLmRlcHRoLCB0aGlzLnBhdGNoU2l6ZSwgY2h1bmtTaXplLCB0aGlzLmhlaWdodCwgdGhpcy5jb21wcmVzc0FsZ29yaXRtLCBidWZmZXIpXHJcbiAgICAgICAgOiBuZXcgUGF0Y2hlZEhlaWdodE1hcCh0aGlzLndpZHRoLCB0aGlzLmRlcHRoLCB0aGlzLnBhdGNoU2l6ZSwgY2h1bmtTaXplLCB0aGlzLmhlaWdodCwgYnVmZmVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdGVycmFpbiA9IG5ldyBNaWRwb2ludERpc3BIZWlnaHRmaWVsZChoZWlnaHRNYXApO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodEZpZWxkU2hhcGUgPSBuZXcgSGVpZ2h0ZmllbGRTaGFwZShoZWlnaHRNYXApO1xyXG4gICAgICAgIHRoaXMuX3JheWNhc3RSZXN1bHQgPSBuZXcgSGVpZ2h0ZmllbGRSYXljYXN0UmVzdWx0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NwaGVyZXNCdWZmZXIgPSBuZXcgUGF0Y2hlc1NwaGVyZUJ1ZmZlcihoZWlnaHRNYXAsIHRoaXMuZW50aXR5LmdldFdvcmxkVHJhbnNmb3JtKCkpO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcEJ1ZmZlciA9IG5ldyBHUFVIZWlnaHRNYXBCdWZmZXIodGhpcy5hcHAsIHRoaXMuX3RlcnJhaW4pO1xyXG4gICAgICAgIHRoaXMuX2J1ZmZlcnNNYW5hZ2VyID0gbmV3IEdQVUJ1ZmZlcnNNYW5hZ2VyKHRoaXMuX2hlaWdodE1hcEJ1ZmZlcik7XHJcbiAgICAgICAgdGhpcy5fd2lyZWZyYW1lQnVmZmVyc01hbmFnZXIgPSBuZXcgR1BVV2lyZWZyYW1lQnVmZmVyTWFuYWdlcih0aGlzLl9idWZmZXJzTWFuYWdlciwgdGhpcy5fdGVycmFpbi5sb2RJbmZvKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWVzaEZhY3RvcnkgPSBuZXcgTWVzaEluc3RhbmNlRmFjdG9yeSh0aGlzLl9idWZmZXJzTWFuYWdlciwgdGhpcy5fd2lyZWZyYW1lQnVmZmVyc01hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoZXNNYW5hZ2VyID0gbmV3IFBhdGNoZXNNYW5hZ2VyKHRoaXMuX3RlcnJhaW4sIHRoaXMuX3NwaGVyZXNCdWZmZXIpO1xyXG5cclxuICAgICAgICB0aGlzLl9kZWZhdWx0UGF0Y2hlc0xvZFN0YXRlID0gbmV3IExvZFN0YXRlKHRoaXMuX3BhdGNoZXNNYW5hZ2VyLmxvZE1hbmFnZXIsIHRoaXMuekZhcik7XHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdFBhdGNoZXNQcmVwYXJlciA9IG5ldyBQYXRjaGVzUmVuZGVyUHJlcGFyZXIoXHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRQYXRjaGVzTG9kU3RhdGUsXHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hGYWN0b3J5LFxyXG4gICAgICAgICAgICB0aGlzLmVudGl0eSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2lyZWZyYW1lOiB0aGlzLndpcmVmcmFtZSxcclxuICAgICAgICAgICAgICAgIGNhc3RTaGFkb3c6IHRoaXMuY2FzdFNoYWRvdyxcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVTaGFkb3c6IHRoaXMucmVjZWl2ZVNoYWRvdyxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhdGNoZXNNYW5hZ2VyLmFkZFN0YXRlKHRoaXMuX2RlZmF1bHRQYXRjaGVzUHJlcGFyZXIpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl90ZXJyYWluLCB0aGlzLl9oZWlnaHRGaWVsZFNoYXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVNYXRlcmlhbFBhcmFtZXRlcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdFBhdGNoZXNQcmVwYXJlci5tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoc3BsYXRNYXBQYXJhbU5hbWUsIHRoaXMuX2NvbG9yUGFpbnRlci5iYWNrZ3JvdW5kKTtcclxuICAgICAgICB0aGlzLl9kZWZhdWx0UGF0Y2hlc1ByZXBhcmVyLm1hdGVyaWFsLnNldFBhcmFtZXRlcihtYXhIZWlnaHRQYXJhbU5hbWUsIHRoaXMuX3RlcnJhaW4ubWF4SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVMYXllcnMoKSB7XHJcblxyXG4gICAgICAgIC8vIFRPRE9cclxuICAgICAgICBjb25zdCBtYXhDb3VudCA9IDU7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggID0gMTAyNDtcclxuICAgICAgICBjb25zdCBoZWlnaHQgPSAxMDI0O1xyXG5cclxuICAgICAgICBsZXQgbGVuZ3RoICAgPSAwO1xyXG4gICAgICAgIGxldCBmbGFncyAgICA9IFtdO1xyXG4gICAgICAgIGxldCBzY2FsZXMgICA9IFtdO1xyXG4gICAgICAgIGxldCBvZmZzZXRzICA9IFtdO1xyXG4gICAgICAgIGxldCBkaWZmdXNlcyA9IFtdIGFzIGFueVtdO1xyXG4gICAgICAgIGxldCBub3JtYWxzICA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heENvdW50OyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIGxldCBmbGFnID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChpIDwgdGhpcy5sYXllcnMubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGF5ZXIgICAgID0gdGhpcy5sYXllcnNbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmdXNlICAgPSBsYXllci5kaWZmdXNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsTWFwID0gbGF5ZXIubm9ybWFsTWFwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaWZmdXNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZ1c2VUZXh0dXJlID0gZGlmZnVzZS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZysrO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpZmZ1c2VzLnB1c2goZGlmZnVzZVRleHR1cmUuZ2V0U291cmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlcy5wdXNoKGxheWVyLnNpemUueCwgbGF5ZXIuc2l6ZS55KTtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRzLnB1c2gobGF5ZXIub2Zmc2V0LngsIGxheWVyLm9mZnNldC55KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vcm1hbE1hcCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsVGV4dHVyZSA9IG5vcm1hbE1hcC5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFscy5wdXNoKG5vcm1hbFRleHR1cmUuZ2V0U291cmNlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmxhZ3MucHVzaChmbGFnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2xheWVyc0RpZmZ1c2U/LmRlc3Ryb3koKTtcclxuICAgICAgICAvL3RoaXMuX2xheWVyc0RpZmZ1c2UgPSB0aGlzLmxheWVyc1swXS5kaWZmdXNlLnJlc291cmNlIGFzIHBjeC5UZXh0dXJlO1xyXG4gICAgICAgIHRoaXMuX2xheWVyc0RpZmZ1c2UgPSBuZXcgcGMuVGV4dHVyZSh0aGlzLmFwcC5ncmFwaGljc0RldmljZSwge1xyXG4gICAgICAgICAgICBuYW1lOiAndGVycmFpbkxheWVyc0RpZmZ1c2UnLFxyXG4gICAgICAgICAgICBmb3JtYXQ6IHBjLlBJWEVMRk9STUFUX1NSR0JBOCxcclxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcclxuICAgICAgICAgICAgYXJyYXlMZW5ndGg6IGxlbmd0aCxcclxuICAgICAgICAgICAgZmxpcFk6IHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLmlzV2ViR1BVLFxyXG4gICAgICAgICAgICAvL21hZ0ZpbHRlcjogcGMuRklMVEVSX0xJTkVBUixcclxuICAgICAgICAgICAgLy9taW5GaWx0ZXI6IHBjLkZJTFRFUl9MSU5FQVJfTUlQTUFQX0xJTkVBUixcclxuICAgICAgICAgICAgbWlwbWFwczogdHJ1ZSxcclxuICAgICAgICAgICAgYWRkcmVzc1U6IHBjLkFERFJFU1NfUkVQRUFULFxyXG4gICAgICAgICAgICBhZGRyZXNzVjogcGMuQUREUkVTU19SRVBFQVQsXHJcbiAgICAgICAgICAgIGFkZHJlc3NXOiBwYy5BRERSRVNTX0NMQU1QX1RPX0VER0UsXHJcbiAgICAgICAgICAgIGxldmVsczogWyBkaWZmdXNlcyBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fbGF5ZXJzRGlmZnVzZS51cGxvYWQoKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5fbGF5ZXJzRGlmZnVzZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdFBhdGNoZXNQcmVwYXJlci5tYXRlcmlhbC5zZXRQYXJhbWV0ZXIobGF5ZXJzRGlmZnVzZVBhcmFtTmFtZSwgdGhpcy5fbGF5ZXJzRGlmZnVzZSk7XHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdFBhdGNoZXNQcmVwYXJlci5tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoYCR7bGF5ZXJzRmxhZ3NQYXJhbU5hbWV9WzBdYCwgZmxhZ3MpO1xyXG4gICAgICAgIHRoaXMuX2RlZmF1bHRQYXRjaGVzUHJlcGFyZXIubWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGAke2xheWVyc1NjYWxlUGFyYW1OYW1lfVswXWAsIHNjYWxlcyk7XHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdFBhdGNoZXNQcmVwYXJlci5tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoYCR7bGF5ZXJzT2Zmc2V0UGFyYW1OYW1lfVswXWAsIG9mZnNldHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZU1lc2goKSB7XHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdFBhdGNoZXNQcmVwYXJlci5zZXRJbnN0YW5jaW5nVHlwZShcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkNvbWJpbmVJbnN0YW5jaW5nQWNjZWxlcmF0b3IgPyAnY29tYmluZScgOlxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlck1vZGUgPT09IFJlbmRlck1vZGUuSW5zdGFuY2luZ0FjY2VsZXJhdG9yID8gJ3NpbXBsZScgOlxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgX2luaXRpYWxpemVNb3VzZSgpIHtcclxuICAgICAgICB0aGlzLmFwcC5tb3VzZT8ub24ocGMuRVZFTlRfTU9VU0VNT1ZFLCB0aGlzLl9vbk1vdXNlTW92ZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9uKHBjLkVWRU5UX01PVVNFV0hFRUwsIHRoaXMuX29uTW91c2VXaGVlbCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbignZGVzdHJveScsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9mZihwYy5FVkVOVF9NT1VTRU1PVkUsIHRoaXMuX29uTW91c2VNb3ZlLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9mZihwYy5FVkVOVF9NT1VTRVdIRUVMLCB0aGlzLl9vbk1vdXNlV2hlZWwsIHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uTW91c2VNb3ZlKGV2ZW50OiBwY3guTW91c2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMuX2xhc3RNb3VzZU1vdmVFdmVudCA9IGV2ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uTW91c2VXaGVlbChldmVudDogcGN4Lk1vdXNlRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSB0aGlzLl9icnVzaFNpemUgKyBldmVudC53aGVlbERlbHRhICogdGhpcy5fYnJ1c2hTaXplU3RlcDtcclxuICAgICAgICB0aGlzLl9icnVzaFNpemUgPSBNYXRoLm1pbihNYXRoLm1heChjYW5kaWRhdGUsIGJydXNoTWluU2l6ZSksIGJydXNoTWF4U2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZUtleWJvYXJkKCkge1xyXG4gICAgICAgIHRoaXMuYXBwLmtleWJvYXJkPy5vbihwYy5FVkVOVF9LRVlET1dOLCB0aGlzLl9vbktleWJvYXJkRG93biwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5hcHAua2V5Ym9hcmQ/Lm9uKHBjLkVWRU5UX0tFWVVQLCB0aGlzLl9vbktleWJvYXJkVXAsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMub24oJ2Rlc3Ryb3knLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLm1vdXNlPy5vZmYocGMuRVZFTlRfS0VZRE9XTiwgdGhpcy5fb25LZXlib2FyZERvd24sIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZT8ub2ZmKHBjLkVWRU5UX0tFWVVQLCB0aGlzLl9vbktleWJvYXJkVXAsIHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2tleUFkZExvY2sgPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfa2V5U3ViTG9jayA9IHRydWU7XHJcbiAgICBwcml2YXRlIF9vbktleWJvYXJkRG93bihldmVudDogcGN4LktleWJvYXJkRXZlbnQpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2tleUFkZExvY2sgPT09IGZhbHNlICYmIGV2ZW50LmtleSA9PT0gcGMuS0VZX0FERCkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXlBZGRMb2NrID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fYnJ1c2hPcGFjaXR5ID0gTWF0aC5tYXgodGhpcy5fYnJ1c2hPcGFjaXR5ICsgdGhpcy5fYnJ1c2hPcGFjaXR5U3RlcCwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fa2V5U3ViTG9jayA9PT0gZmFsc2UgJiYgZXZlbnQua2V5ID09PSBwYy5LRVlfU1VCVFJBQ1QpIHtcclxuICAgICAgICAgICAgdGhpcy5fa2V5U3ViTG9jayA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2JydXNoT3BhY2l0eSA9IE1hdGgubWluKHRoaXMuX2JydXNoT3BhY2l0eSAtIHRoaXMuX2JydXNoT3BhY2l0eVN0ZXAsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vbktleWJvYXJkVXAoZXZlbnQ6IHBjeC5LZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gcGMuS0VZX0FERCkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXlBZGRMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gcGMuS0VZX1NVQlRSQUNUKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tleVN1YkxvY2sgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBfdXBkYXRlSGVpZ2h0TWFwRnJvbUF0dHIoKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmhlaWdodE1hcC5maWxlKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVpZ2h0TWFwLmZpbGUucmVzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignSGVpZ2h0IG1hcCBmaWxlIHVuc2V0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5oZWlnaHRNYXAuZmlsZS5yZXNvdXJjZSBhcyBBcnJheUJ1ZmZlcjtcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3M6IElIZWlnaHRNYXBGaWxlSW1wb3J0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIGFkYXB0aXZlTWF4SGVpZ2h0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYWRhcHRpdmVXaWR0aEFuZERlcHRoOiB0cnVlLFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl90ZXJyYWluLmxvYWRIZWlnaHRNYXBGcm9tRmlsZShkYXRhLCBzZXR0aW5ncywgdGhpcy5oZWlnaHRNYXAuc21vb3RoRmFjdG9yLCB0aGlzLmhlaWdodE1hcC5zbW9vdGhSYWRpdXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSB0aGlzLmhlaWdodE1hcC50ZXh0dXJlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0hlaWdodCBtYXAgaW1hZ2UgdW5zZXQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc291cmNlID0gdGV4dHVyZS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICAgICAgY29uc3QgaW1nID0gcmVzb3VyY2UuZ2V0U291cmNlKCkgYXMgYW55O1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpbWcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignSGVpZ2h0IG1hcCBpbWFnZSB1bnNldC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5sb2FkSGVpZ2h0TWFwRnJvbUltZyhpbWcsIHRoaXMuaGVpZ2h0TWFwLnNtb290aEZhY3RvciwgdGhpcy5oZWlnaHRNYXAuc21vb3RoUmFkaXVzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IGNsZWFyIGhlaWdodG1hcFxyXG4gICAgICAgICAgICByZXNvdXJjZS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXBCdWZmZXIudXBkYXRlSGVpZ2h0TWFwKHsgbWluWDogMCwgbWF4WDogdGhpcy53aWR0aCwgbWluWjogMCwgbWF4WjogdGhpcy5kZXB0aCB9KTtcclxuICAgICAgICB0aGlzLl9zcGhlcmVzQnVmZmVyLnJlY2FsY3VsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fbWVzaEZhY3RvcnkudXBkYXRlQWFiYigpO1xyXG4gICAgICAgIHRoaXMuX2RlZmF1bHRQYXRjaGVzUHJlcGFyZXIudXBkYXRlQWFiYigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NhdmVIZWlnaHRNYXBUb0ltZygpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBiYXNlNjQgPSB0aGlzLl90ZXJyYWluLmhlaWdodE1hcC50b0ltYWdlKCk7XHJcbiAgICAgICAgY29uc3QgaW1hZ2UgID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaW1hZ2Uuc3JjID0gYmFzZTY0O1xyXG5cclxuICAgICAgICBjb25zdCB3ID0gd2luZG93Lm9wZW4odW5kZWZpbmVkLCAnX2JsYW5rJykhO1xyXG4gICAgICAgIHcuZG9jdW1lbnQud3JpdGUoaW1hZ2Uub3V0ZXJIVE1MKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIF9zYXZlSGVpZ2h0TWFwVG9GaWxlKCkge1xyXG5cclxuICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgdGhpcy5fdGVycmFpbi5oZWlnaHRNYXAudG9GaWxlKCk7XHJcbiAgICAgICAgY29uc3QgYmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XHJcblxyXG4gICAgICAgIGEuaHJlZiAgICAgPSBibG9iVXJsO1xyXG4gICAgICAgIGEuZG93bmxvYWQgPSBgaG1fJHsrdGltZXN0YW1wfSR7aGVpZ2h0TWFwRXh0fWA7XHJcbiAgICAgICAgYS5jbGljaygpO1xyXG5cclxuICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVcmwpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcikge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY29sb3JQYWludGVyLnBhaW50aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbG9yUGFpbnRlci5zdG9wUGFpbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmF1dG9SZW5kZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFFbnRpdHkgJiZcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFFbnRpdHkuY2FtZXJhKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjYW1lcmEgPSB0aGlzLmNhbWVyYUVudGl0eS5jYW1lcmE7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdCAgICA9IHRoaXMuZW50aXR5LmdldFdvcmxkVHJhbnNmb3JtKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlICA9IG1hdC5nZXRTY2FsZSgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FtZXJhUG9zID0gdGhpcy5jYW1lcmFFbnRpdHkuZ2V0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhUG9zWzBdID0gY2FtZXJhUG9zLng7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYVBvc1sxXSA9IGNhbWVyYVBvcy55O1xyXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmFQb3NbMl0gPSBjYW1lcmFQb3MuejtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRQYXRjaGVzUHJlcGFyZXIubWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGNhbWVyYVBvc2l0aW9uUGFyYW1OYW1lLCB0aGlzLl9jYW1lcmFQb3MpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xhc3RNb3VzZU1vdmVFdmVudCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5zY3JlZW5Ub1dvcmxkKHRoaXMuX2xhc3RNb3VzZU1vdmVFdmVudC54LCB0aGlzLl9sYXN0TW91c2VNb3ZlRXZlbnQueSwgY2FtZXJhLm5lYXJDbGlwLCB0aGlzLl9yYXlTdGFydCk7XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuc2NyZWVuVG9Xb3JsZCh0aGlzLl9sYXN0TW91c2VNb3ZlRXZlbnQueCwgdGhpcy5fbGFzdE1vdXNlTW92ZUV2ZW50LnksIGNhbWVyYS5mYXJDbGlwLCB0aGlzLl9yYXlFbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3JheURpcmVjdGlvbi5zdWIyKHRoaXMuX3JheUVuZCwgdGhpcy5fcmF5U3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VSYXkgPSAhdGhpcy5fcmF5Lm9yaWdpbi5lcXVhbHModGhpcy5fcmF5U3RhcnQpIHx8ICF0aGlzLl9yYXkuZGlyZWN0aW9uLmVxdWFscyh0aGlzLl9yYXlEaXJlY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VSYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yYXkuc2V0KHRoaXMuX3JheVN0YXJ0LCB0aGlzLl9yYXlEaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JheWNhc3RSZXN1bHQuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnRlcnNlY3RzUmF5UmVzdWx0ID0gdGhpcy5faGVpZ2h0RmllbGRTaGFwZS5pbnRlcnNlY3RzUmF5KG1hdCwgdGhpcy5fcmF5LCB0aGlzLl9yYXljYXN0UmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faW50ZXJzZWN0c1JheVJlc3VsdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBicnVzaFNpemVYID0gdGhpcy5fYnJ1c2hTaXplIC8gc2NhbGUueCB8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnJ1c2hTaXplWiA9IHRoaXMuX2JydXNoU2l6ZSAvIHNjYWxlLnogfCAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZXJyYWluLnBhdGNoVmVydGljZXMuZ2V0UG9zaXRpb24odGhpcy5fcmF5Y2FzdFJlc3VsdC52ZXJ0ZXhJbmRleCwgdGVycmFpbkxvY2FsVmVydGV4UG9zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkPy53YXNQcmVzc2VkKHBjLktFWV9JKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9yYXljYXN0UmVzdWx0LCB0aGlzLl9sb2NhbENhbWVyYVBvc2l0aW9uLCB0ZXJyYWluTG9jYWxWZXJ0ZXhQb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZHJhd1BvaW50KHsgY2VudGVyOiB0aGlzLl9yYXljYXN0UmVzdWx0LnBvaW50LCByYWRpdXM6IHRoaXMuX2JydXNoU2l6ZSwgbnVtU2VnbWVudHM6IDEwLCBkZXB0aFRlc3Q6IHRydWUsIGNvbG9yOiBwYy5Db2xvci5HUkFZIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRyYXdEaXJlY3Rpb25WZWN0b3IodGhpcy5fcmF5Y2FzdFJlc3VsdC5wb2ludCwgdGhpcy5fcmF5Y2FzdFJlc3VsdC5ub3JtYWwsIHBjLkNvbG9yLk1BR0VOVEEpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9sb2NrIDwgMSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC5tb3VzZT8uaXNQcmVzc2VkKHBjLk1PVVNFQlVUVE9OX0xFRlQpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYWludGluZykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZHRoICAgPSB0aGlzLl90ZXJyYWluLndpZHRoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlcHRoICAgPSB0aGlzLl90ZXJyYWluLmRlcHRoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHggICAgICAgPSB0ZXJyYWluTG9jYWxWZXJ0ZXhQb3MueCAvIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeSAgICAgICA9IHRlcnJhaW5Mb2NhbFZlcnRleFBvcy56IC8gZGVwdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2FsZVcgID0gYnJ1c2hTaXplWCAvIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVIICA9IGJydXNoU2l6ZVogLyBkZXB0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xvclBhaW50ZXIuc3RhcnRQYWludChkdCwgeCwgeSwgc2NhbGVXLCBzY2FsZUgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF2ZXJhZ2UgPSAoYnJ1c2hTaXplWCArIGJydXNoU2l6ZVopIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbnRlclggPSB0ZXJyYWluTG9jYWxWZXJ0ZXhQb3MueCB8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXJaID0gdGVycmFpbkxvY2FsVmVydGV4UG9zLnogfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgem9uZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5YOiBjZW50ZXJYIC0gYnJ1c2hTaXplWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhYOiBjZW50ZXJYICsgYnJ1c2hTaXplWCArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWjogY2VudGVyWiAtIGJydXNoU2l6ZVosXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WjogY2VudGVyWiArIGJydXNoU2l6ZVogKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9BTFQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5zbW9vdGhIZWlnaHRzWm9uZSh6b25lLCBhdmVyYWdlICogdGhpcy5fYnJ1c2hPcGFjaXR5ICogZHQgLyAxMCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZWdhdGl2ZSA9ICEhdGhpcy5hcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfQ09OVFJPTCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXBwZW5kVmFsdWUgPSAobmVnYXRpdmUgPyAtYXZlcmFnZSA6IGF2ZXJhZ2UpICogdGhpcy5fYnJ1c2hPcGFjaXR5ICogZHQgLyAxMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZXJyYWluLmFwcGVuZEhlaWdodE1hcCh0aGlzLl9icnVzaEhlaWdodE1hcCwgYXBwZW5kVmFsdWUsIHpvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8ud2FzUHJlc3NlZChwYy5LRVlfSSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh6b25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZXJyYWluLnJlY2FsY3VsYXRlTWluTWF4KHpvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faGVpZ2h0TWFwQnVmZmVyLnVwZGF0ZUhlaWdodE1hcCh6b25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NwaGVyZXNCdWZmZXIucmVjYWxjdWxhdGVab25lKHpvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRtcE1hdC5pbnZlcnQobWF0KTtcclxuICAgICAgICAgICAgdG1wTWF0LnRyYW5zZm9ybVBvaW50KGNhbWVyYS5lbnRpdHkuZ2V0UG9zaXRpb24oKSwgdGhpcy5fbG9jYWxDYW1lcmFQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wYXRjaGVzTWFuYWdlci51cGRhdGVMb2RzKHRoaXMuX2xvY2FsQ2FtZXJhUG9zaXRpb24sIHRoaXMubG9kQnlZUG9zKTtcclxuICAgICAgICAgICAgdGhpcy5fcGF0Y2hlc01hbmFnZXIudXBkYXRlKGNhbWVyYS5mcnVzdHVtKTtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgIGNvbnN0IHNwaGVyZXMgPSB0aGlzLl9zcGhlcmVzQnVmZmVyLnNwaGVyZXM7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BoZXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BoZXJlID0gc3BoZXJlc1tpXTtcclxuICAgICAgICAgICAgICAgIGRyYXdQb2ludCh7IGNlbnRlcjogc3BoZXJlLmNlbnRlciwgcmFkaXVzOiBzcGhlcmUucmFkaXVzLCBudW1TZWdtZW50czogMTAsIGRlcHRoVGVzdDogdHJ1ZSwgY29sb3I6IHBjLkNvbG9yLllFTExPVyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkPy53YXNQcmVzc2VkKHBjLktFWV9MKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWZhdWx0UGF0Y2hlc0xvZFN0YXRlLnByaW50TG9kTWFwKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5hcHAua2V5Ym9hcmQ/Lndhc1ByZXNzZWQocGMuS0VZX1ApKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmVIZWlnaHRNYXBUb0ltZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkPy53YXNQcmVzc2VkKHBjLktFWV9PKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zYXZlSGVpZ2h0TWFwVG9GaWxlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEZWJ1Z1xyXG4gICAgICAgIC8vdGhpcy5hcHAuZHJhd1RleHR1cmUoIDAuNSwgLTAuNiwgMC41LCAwLjMsIHRoaXMucGFpbnRlclNldHRpbmdzLnNwbGF0TWFwLnJlc291cmNlLCB1bmRlZmluZWQgYXMgYW55KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGVycmFpbjtcclxuZXhwb3J0IGNvbnN0IHRlcnJhaW5TY3JpcHROYW1lID0gXCJUZXJyYWluXCI7XHJcbmV4cG9ydCBjb25zdCBiaWdUZXJyYWluRWRpdG9yU2NyaXB0TmFtZSA9IFwiYmlnVGVycmFpbkVkaXRvclwiO1xyXG5cclxucGMucmVnaXN0ZXJTY3JpcHQoVGVycmFpbiwgdGVycmFpblNjcmlwdE5hbWUpO1xyXG5wYy5yZWdpc3RlclNjcmlwdChUZXJyYWluLCBiaWdUZXJyYWluRWRpdG9yU2NyaXB0TmFtZSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicmVuZGVyTW9kZVwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGVudW06IG1hcFRpdGxlRW51bShSZW5kZXJNb2RlKSwgZGVmYXVsdDogUmVuZGVyTW9kZS5TdGFuZGFyZCwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJjYXN0U2hhZG93XCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IHRydWUsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicmVjZWl2ZVNoYWRvd1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImxvZEJ5WVBvc1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcInpGYXJcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA1MDAwLCBtaW46IDEsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJ3aWR0aFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGVudW06IGZpZWxkU2l6ZUVudW0sIGRlZmF1bHQ6IGZpZWxkU2l6ZUVudW1EZWZhdWx0LCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImRlcHRoXCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZW51bTogZmllbGRTaXplRW51bSwgZGVmYXVsdDogZmllbGRTaXplRW51bURlZmF1bHQsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicGF0Y2hTaXplXCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZW51bTogZmllbGRQYXRjaFNpemVFbnVtLCBkZWZhdWx0OiBmaWVsZFBhdGNoU2l6ZUVudW1EZWZhdWx0LCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImhlaWdodFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDEwLCBtaW46IDEsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiY29tcHJlc3NBbGdvcml0bVwiLCB7IHR5cGU6IFwic3RyaW5nXCIsIGVudW06IGZpZWxkSGVpZ2h0c0NvbXByZXNzQWxnb3JpdG0sIGRlZmF1bHQ6IGZpZWxkSGVpZ2h0c0NvbXByZXNzQWxnb3JpdG1EZWZhdWx0LCB9KTtcclxuXHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJsYXllclwiLCB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6ICdUZXJyYWluRWRpdG9yJywgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJjYW1lcmFFbnRpdHlcIiwgeyB0eXBlOiBcImVudGl0eVwiIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiYXV0b1JlbmRlclwiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcInBhaW50aW5nXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcIndpcmVmcmFtZVwiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiBmYWxzZSwgfSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiaGVpZ2h0TWFwXCIsIHtcclxuICAgIHR5cGU6ICdqc29uJyxcclxuICAgIHNjaGVtYTogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ2ZpbGUnLFxyXG4gICAgICAgICAgICB0eXBlOiAnYXNzZXQnLFxyXG4gICAgICAgICAgICBhc3NldFR5cGU6ICdiaW5hcnknLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAndGV4dHVyZScsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcclxuICAgICAgICAgICAgYXNzZXRUeXBlOiAndGV4dHVyZScsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdzbW9vdGhGYWN0b3InLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYFxyXG4gICAgICAgICAgICAgICAgVG8gd2hhdCBleHRlbnQgbmVpZ2hib3JzIGluZmx1ZW5jZSB0aGUgbmV3IGhlaWdodDpcclxuICAgICAgICAgICAgICAgIFZhbHVlIG9mIDAgd2lsbCBpZ25vcmUgbmVpZ2hib3JzIChubyBzbW9vdGhpbmcpLlxyXG4gICAgICAgICAgICAgICAgVmFsdWUgb2YgMSB3aWxsIGlnbm9yZSB0aGUgbm9kZSBvbGQgaGVpZ2h0LlxyXG4gICAgICAgICAgICBgLFxyXG4gICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAxLFxyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIG1heDogMSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ3Ntb290aFJhZGl1cycsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgVGhlIHJhZGl1cyBvZiBmYWN0b3Igc21vb3RoLmAsXHJcbiAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDEsXHJcbiAgICAgICAgICAgIHN0ZXA6IDEsXHJcbiAgICAgICAgICAgIG1pbjogMSxcclxuICAgICAgICB9XHJcbiAgICBdXHJcbn0pO1xyXG5cclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImJydXNoXCIsIHtcclxuICAgIHR5cGU6IFwianNvblwiLFxyXG4gICAgc2NoZW1hOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcImFjdGl2ZVwiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgYnJ1c2ggdGV4dHVyZSBpbmRleC5cIixcclxuICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogMCxcclxuICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICBzdGVwOiAxLFxyXG4gICAgICAgICAgICBwcmVjaXNpb246IDAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwic2l6ZVwiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgYnJ1c2ggc2l6ZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAxMCxcclxuICAgICAgICAgICAgbWluOiBicnVzaE1pblNpemUsXHJcbiAgICAgICAgICAgIG1heDogYnJ1c2hNYXhTaXplLFxyXG4gICAgICAgICAgICBzdGVwOiAxLFxyXG4gICAgICAgICAgICBwcmVjaXNpb246IDAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwib3BhY2l0eVwiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgYnJ1c2ggb3BhY2l0eVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAwLjUsXHJcbiAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgbWF4OiAxLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcInRleHR1cmVzXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBicnVzaCB0ZXh0dXJlc1wiLFxyXG4gICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgIGFzc2V0VHlwZTogJ3RleHR1cmUnLFxyXG4gICAgICAgICAgICBhcnJheTogdHJ1ZSxcclxuICAgICAgICB9XHJcbiAgICBdXHJcbn0pO1xyXG5cclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImFjdGl2ZUxheWVyXCIsIHsgdHlwZTogJ251bWJlcicsIGRlZmF1bHQ6IDAsIG1pbjogMCwgbWF4OiAzMiwgc3RlcDogMSwgcHJlY2lzaW9uOiAwLCB9KTtcclxuXHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJsYXllcnNcIiwge1xyXG4gICAgdHlwZTogXCJqc29uXCIsXHJcbiAgICBhcnJheTogdHJ1ZSxcclxuICAgIHNjaGVtYTogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJuYW1lXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIk5hbWVcIixcclxuICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJkaWZmdXNlXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIkRpZmZ1c2VcIixcclxuICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxyXG4gICAgICAgICAgICBhc3NldFR5cGU6IFwidGV4dHVyZVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcIm5vcm1hbE1hcFwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJOb3JtYWwgTWFwXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcclxuICAgICAgICAgICAgYXNzZXRUeXBlOiBcInRleHR1cmVcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJzaXplXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIlNpemVcIixcclxuICAgICAgICAgICAgdHlwZTogXCJ2ZWMyXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFsxLCAxXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcIm9mZnNldFwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJPZmZzZXRcIixcclxuICAgICAgICAgICAgdHlwZTogXCJ2ZWMyXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFswLCAwXVxyXG4gICAgICAgIH0sXHJcbiAgICBdXHJcbn0pO1xyXG5cclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcInBhaW50ZXJTZXR0aW5nc1wiLCB7XHJcbiAgICB0eXBlOiBcImpzb25cIixcclxuICAgIHNjaGVtYTogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJzcGxhdE1hcFwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgIGFzc2V0VHlwZTogXCJ0ZXh0dXJlXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIlNwbGF0IE1hcFwiLFxyXG4gICAgICAgIH0sXHJcbiAgICBdXHJcbn0pOyIsImltcG9ydCB7IEdyYXNzRmllbGRUZXh0dXJlIH0gZnJvbSBcIi4uL0dyYXNzRmllbGQvR3Jhc3NGaWVsZFRleHR1cmUubWpzXCI7XHJcbmltcG9ydCB7IGRyYXdQb3NQYXJhbU5hbWUsIGdldEdyYXNzU2hhZGVyQ2h1bmtzLCBsb2QyT2Zmc2V0WFpQYXJhbU5hbWUsIG9mZnNldEF0dHJOYW1lLCBsb2QxT2Zmc2V0WFpQYXJhbU5hbWUsIHNoYXBlQXR0ck5hbWUsIHRpbWVQYXJhbU5hbWUsIHZpbmRleEF0dHJOYW1lLCB3aW5kSW50ZW5zaXR5UGFyYW1OYW1lLCBmaWVsZFNjYWxlUGFyYW1OYW1lIH0gZnJvbSBcIi4uL0dyYXNzRmllbGQvR3Jhc3NTaGFkZXJDaHVuay5tanNcIjtcclxuaW1wb3J0IHsgZHJhd0JveCB9IGZyb20gXCIuLi9FeHRyYXMvRGVidWcubWpzXCI7XHJcbmltcG9ydCBSYW5kb20gZnJvbSBcIi4uL0V4dHJhcy9SYW5kb20ubWpzXCI7XHJcbmltcG9ydCB7IGdldEhlaWdodE1hcEZvcm1hdCB9IGZyb20gXCIuLi9IZWlnaHRmaWVsZC9HUFVIZWlnaHRNYXBCdWZmZXIubWpzXCI7XHJcbmltcG9ydCB7IGhlaWdodE1hcFBhcmFtTmFtZSwgbWF4SGVpZ2h0UGFyYW1OYW1lIH0gZnJvbSBcIi4uL0hlaWdodGZpZWxkL1NoYWRlckNodW5rcy5tanNcIjtcclxuaW1wb3J0IFRlcnJhaW4gZnJvbSBcIi4vVGVycmFpbi5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUJ1ZmZlclN0b3JlIHtcclxuXHJcbiAgICAvLyBJbmRpY2VzIGZvciBhIGJsYWRlXHJcbiAgICBpbmRleDogVWludDE2QXJyYXksXHJcblxyXG4gICAgLy8gVGVsbHMgdGhlIHNoYWRlciB3aGljaCB2ZXJ0ZXggb2YgdGhlIGJsYWRlIGl0cyB3b3JraW5nIG9uLlxyXG4gICAgLy8gUmF0aGVyIHRoYW4gc3VwcGx5aW5nIHBvc2l0aW9ucywgdGhleSBhcmUgY29tcHV0ZWQgZnJvbSB0aGlzIHZpbmRleC5cclxuICAgIGluZGV4VmVydHM6IEZsb2F0MzJBcnJheSxcclxuXHJcbiAgICAvLyBTaGFwZSBwcm9wZXJ0aWVzIG9mIGFsbCBibGFkZXNcclxuICAgIC8vIFBvc2l0b24gJiByb3RhdGlvbiBvZiBhbGwgYmxhZGVzXHJcbiAgICBvZmZzZXRBbmRTaGFwZTogRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXksIC8vIHdlYmdwdSBub3Qgc3VwcG9ydCBmbG9hdDE2IChVaW50MTZBcnJheSA9IEZsb2F0MTZBcnJheSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHF1YWQxTWF0cml4ID0gW1xyXG4gICAgMiwgMiwgIDEsIDIsICAwLCAyLFxyXG4gICAgMCwgMSwgIDAsIDAsICAxLCAwLFxyXG4gICAgMiwgMCwgIDIsIDEsICAxLCAxXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgcXVhZDJNYXRyaXggPSBbXHJcbiAgICA0LCA0LCAgMywgNCwgIDIsIDQsICAxLCA0LFxyXG4gICAgMCwgNCwgIDAsIDMsICAwLCAyLCAgMCwgMSxcclxuICAgIDAsIDAsICAxLCAwLCAgMiwgMCwgIDMsIDAsXHJcbiAgICA0LCAwLCAgNCwgMSwgIDQsIDIsICA0LCAzXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgcXVhZE1hdHJpeEluZGV4ZXMgPSBbXHJcbiAgICBbNCwgMywgMl0sIC8vIDBcclxuICAgIFs1LCA4LCAxXSwgLy8gMVxyXG4gICAgWzYsIDcsIDBdLCAvLyAyXHJcbl07XHJcblxyXG5jb25zdCBsb2QxUXVhZENvdW50ID0gODtcclxuY29uc3QgbG9kMlF1YWRDb3VudCA9IDE2O1xyXG5jb25zdCB0bXBNYXQgPSBuZXcgcGMuTWF0NCgpO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR3Jhc3NUZXh0dXJlQXR0cmlidXRlIHtcclxuICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcclxuICAgIHJlYWRvbmx5IGRpZmZ1c2U6IHBjeC5Bc3NldDtcclxuICAgIHJlYWRvbmx5IGNvbG9yOiBwY3guQ29sb3I7XHJcbiAgICByZWFkb25seSBjb2xvclJhbmRvbTogcGN4LlZlYzM7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHcmFzc0ZpZWxkIGV4dGVuZHMgcGMuU2NyaXB0VHlwZSB7XHJcblxyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgZ3JpZEVudGl0eTogcGN4LkVudGl0eTtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGZyZWV6ZURyYXdQb3M6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBhdXRvUmVuZGVyOiBib29sZWFuO1xyXG5cclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHBhaW50aW5nOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgd2lyZWZyYW1lOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgY2FzdFNoYWRvdzogYm9vbGVhbjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHJlY2VpdmVTaGFkb3c6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBzZWVkOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSB3aW5kSW50ZW5zaXR5OiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBudW1CbGFkZXM6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHJhZGl1czogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgbG9kMEJsYWRlU2VnczogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgbG9kMUJsYWRlU2VnczogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgbG9kMkJsYWRlU2VnczogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgYmxhZGVXaWR0aDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgYmxhZGVNaW5IZWlnaHQ6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGJsYWRlTWF4SGVpZ2h0OiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSB0ZXh0dXJlczogSUdyYXNzVGV4dHVyZUF0dHJpYnV0ZVtdO1xyXG5cclxuICAgIHB1YmxpYyB0cmFuc2l0aW9uTG93ID0gMC4zMTtcclxuICAgIHB1YmxpYyB0cmFuc2l0aW9uSGlnaCA9IDAuMzY7XHJcblxyXG4gICAgcHJpdmF0ZSBfc2hhcmVkSW5kZXhCdWZmZXI6IHBjeC5JbmRleEJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX3NoYXJlZFZlcnRleEJ1ZmZlcjogcGN4LlZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICBwcml2YXRlIF9idWZmZXJTdG9yZTogSUJ1ZmZlclN0b3JlID0ge30gYXMgYW55O1xyXG4gICAgcHJpdmF0ZSBfc2hhcmVkSW5zdGFuY2luZ0J1ZmZlcjogcGN4LlZlcnRleEJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX21lc2hJbnN0OiBwY3guTWVzaEluc3RhbmNlO1xyXG4gICAgcHJpdmF0ZSBfbWF0ZXJpYWw6IHBjeC5TdGFuZGFyZE1hdGVyaWFsO1xyXG5cclxuICAgIHByaXZhdGUgX2RhdGFUZXh0dXJlOiBHcmFzc0ZpZWxkVGV4dHVyZTtcclxuICAgIHByaXZhdGUgX2NhbWVyYUVudGl0eTogcGN4LkVudGl0eTtcclxuICAgIHByaXZhdGUgX3RlcnJhaW46IFRlcnJhaW47XHJcbiAgICBwcml2YXRlIF90aW1lOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfbGFzdERyYXdQb3M6IHBjeC5WZWMzID0gbmV3IHBjLlZlYzMoKTtcclxuICAgIHByaXZhdGUgX2xvZDFNaW5NYXhTdG9yZTogQXJyYXk8W3BjeC5WZWMzLCBwY3guVmVjMywgYm9vbGVhbl0+ID0gW107XHJcbiAgICBwcml2YXRlIF9sb2QyTWluTWF4U3RvcmU6IEFycmF5PFtwY3guVmVjMywgcGN4LlZlYzMsIGJvb2xlYW5dPiA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgX2FhYmI6IHBjeC5Cb3VuZGluZ0JveDtcclxuXHJcbiAgICBwcml2YXRlIF9vZmZzZXRMb2QxQXJyOiBudW1iZXJbXSA9IFtcclxuICAgICAgICAwLCAwLCAgMCwgMCxcclxuICAgICAgICAwLCAwLCAgMCwgMCxcclxuICAgICAgICAwLCAwLCAgMCwgMCxcclxuICAgICAgICAwLCAwLCAgMCwgMCxcclxuICAgIF07XHJcblxyXG4gICAgcHJpdmF0ZSBfb2Zmc2V0TG9kMkFycjogbnVtYmVyW10gPSBbXHJcbiAgICAgICAgMCwgMCwgIDAsIDAsICAwLCAwLCAgMCwgMCxcclxuICAgICAgICAwLCAwLCAgMCwgMCwgIDAsIDAsICAwLCAwLFxyXG4gICAgICAgIDAsIDAsICAwLCAwLCAgMCwgMCwgIDAsIDAsXHJcbiAgICAgICAgMCwgMCwgIDAsIDAsICAwLCAwLCAgMCwgMCxcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIGdldCBjaGVja1JhZGl1cygpIHsgcmV0dXJuIHRoaXMucmFkaXVzIC8gMjsgfVxyXG4gICAgcHVibGljIGdldCBwYXRjaFJhZGl1cygpIHsgcmV0dXJuIHRoaXMucmFkaXVzIC8gMjsgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KCkge1xyXG5cclxuICAgICAgICB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZEluc3RhbmNpbmdCdWZmZXI/LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX21lc2hJbnN0KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9tZXNoSW5zdC5pbnN0YW5jaW5nRGF0YT8udmVydGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tZXNoSW5zdC5tZXNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXNoSW5zdC5tZXNoLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX21hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXRlcmlhbC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVudGl0eS5yZW5kZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5lbnRpdHkucmVuZGVyLm1lc2hJbnN0YW5jZXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEJsYWRlc0FuZEVkaXRNb2RlKCkge1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVHcmFzc01lc2godGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucGF0Y2hSYWRpdXMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYWludGluZykge1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLmFkZExvY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBvc3RJbml0aWFsaXplKCk6IHZvaWQge1xyXG5cclxuICAgICAgICBjb25zdCB0ZXJyYWluRW50aXR5ID0gdGhpcy5lbnRpdHkucm9vdC5maW5kQnlOYW1lKCdUZXJyYWluJykgYXMgcGN4LkVudGl0eTtcclxuICAgICAgICBjb25zdCB0ZXJyYWluU2NyaXB0ID0gdGVycmFpbkVudGl0eS5zY3JpcHQ/LmdldChUZXJyYWluKSBhcyBUZXJyYWluO1xyXG5cclxuICAgICAgICB0aGlzLl90ZXJyYWluICAgICAgPSB0ZXJyYWluU2NyaXB0O1xyXG4gICAgICAgIHRoaXMuX2NhbWVyYUVudGl0eSA9IHRlcnJhaW5TY3JpcHQuY2FtZXJhRW50aXR5ITtcclxuICAgICAgICB0aGlzLl9kYXRhVGV4dHVyZSAgPSBuZXcgR3Jhc3NGaWVsZFRleHR1cmUodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMuX3RlcnJhaW4ud2lkdGgsIHRoaXMuX3RlcnJhaW4uZGVwdGgpO1xyXG5cclxuICAgICAgICAvLyB1cGRhdGUgc2V0IGNoZWNrIGlzIHZpc2libGVcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhRW50aXR5LmNhbWVyYT8uZnJ1c3R1bS5wbGFuZXMgJiZcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhRW50aXR5LmNhbWVyYS5mcnVzdHVtLnBsYW5lc1swXSBpbnN0YW5jZW9mIHBjLlBsYW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrSXNWaXNpYmxlID0gdGhpcy5fY2hlY2tJc1Zpc2libGVOZXcgYXMgYW55O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tJc1Zpc2libGUgPSB0aGlzLl9jaGVja0lzVmlzaWJsZU9sZCBhcyBhbnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9pbml0QmxhZGVzQW5kRWRpdE1vZGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignZW5hYmxlJywgKCkgPT4gdGhpcy5faW5pdEJsYWRlc0FuZEVkaXRNb2RlKCkpO1xyXG4gICAgICAgIHRoaXMub24oJ2Rpc2FibGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLmZyZWVMb2NrKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6cGFpbnRpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhaW50aW5nKSB7IHRoaXMuX3RlcnJhaW4uYWRkTG9jaygpOyB9XHJcbiAgICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICB7IHRoaXMuX3RlcnJhaW4uZnJlZUxvY2soKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6d2lyZWZyYW1lJywgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gdGhpcy5fbWVzaEluc3Q/Lm1lc2g/LnByaW1pdGl2ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwcmltaXRpdmUgJiYgcHJpbWl0aXZlWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBwcmltaXRpdmVbMF0udHlwZSA9IHRoaXMud2lyZWZyYW1lID8gcGMuUFJJTUlUSVZFX0xJTkVTIDogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmNhc3RTaGFkb3cnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0LmNhc3RTaGFkb3cgPSB0aGlzLmNhc3RTaGFkb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6cmVjZWl2ZVNoYWRvdycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEluc3QucmVjZWl2ZVNoYWRvdyA9IHRoaXMucmVjZWl2ZVNoYWRvdztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpzZWVkJywgICAgICAgICAgICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpudW1CbGFkZXMnLCAgICAgICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpibGFkZVdpZHRoJywgICAgICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpibGFkZU1pbkhlaWdodCcsICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpibGFkZU1heEhlaWdodCcsICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpyYWRpdXMnLCAgICAgICAgICgpID0+IHRoaXMuX3VwZGF0ZUdyYXNzTWVzaCh0aGlzLmFwcC5ncmFwaGljc0RldmljZSwgdGhpcy5wYXRjaFJhZGl1cykpO1xyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6bG9kMEJsYWRlU2VncycsICAoKSA9PiB0aGlzLl91cGRhdGVHcmFzc01lc2godGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucGF0Y2hSYWRpdXMpKTtcclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmxvZDFCbGFkZVNlZ3MnLCAgKCkgPT4gdGhpcy5fdXBkYXRlR3Jhc3NNZXNoKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlLCB0aGlzLnBhdGNoUmFkaXVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbWVyYVBvcyA9IHRoaXMuX2NhbWVyYUVudGl0eS5nZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0c1RleHMgPSAhIXRoaXMudGV4dHVyZXMgJiYgdGhpcy50ZXh0dXJlcy5sZW5ndGggPiAwO1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gZXhpc3RzVGV4cyA/IHRoaXMudGV4dHVyZXNbMF0uY29sb3IgOiBwYy5Db2xvci5XSElURTtcclxuICAgICAgICBjb25zdCByYW5kICA9IGV4aXN0c1RleHMgPyB0aGlzLnRleHR1cmVzWzBdLmNvbG9yUmFuZG9tIDogcGMuVmVjMy5aRVJPO1xyXG4gICAgICAgIGNvbnN0IHRleCAgID0gZXhpc3RzVGV4cyA/IHRoaXMudGV4dHVyZXNbMF0uZGlmZnVzZS5yZXNvdXJjZSA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5mcmVlemVEcmF3UG9zKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYXQgPSB0aGlzLmVudGl0eS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xyXG5cclxuICAgICAgICAgICAgdG1wTWF0LmludmVydChtYXQpO1xyXG4gICAgICAgICAgICB0bXBNYXQudHJhbnNmb3JtUG9pbnQoY2FtZXJhUG9zLCB0aGlzLl9sYXN0RHJhd1Bvcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl90aW1lICs9IGR0O1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih0aW1lUGFyYW1OYW1lLCB0aGlzLl90aW1lKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIod2luZEludGVuc2l0eVBhcmFtTmFtZSwgdGhpcy53aW5kSW50ZW5zaXR5KTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoZHJhd1Bvc1BhcmFtTmFtZSwgW3RoaXMuX2xhc3REcmF3UG9zLngsIHRoaXMuX2xhc3REcmF3UG9zLnksIHRoaXMuX2xhc3REcmF3UG9zLnpdKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VEaWZmdXNlQ29sb3InLCBbY29sb3IuciwgY29sb3IuZywgY29sb3IuYl0pO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcigndURpZmZ1c2VDb2xvclJhbmRvbScsIFtyYW5kLngsIHJhbmQueSwgcmFuZC56XSk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1RGlmZnVzZVRleCcsIHRleCBhcyBhbnkpO1xyXG5cclxuICAgICAgICB0aGlzLl9mcnVzdHVtKGNhbWVyYVBvcywgdGhpcy5fY2FtZXJhRW50aXR5IS5jYW1lcmEhLmNhbWVyYSwgdGhpcy5mcmVlemVEcmF3UG9zKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlQWFiYigpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwYXRjaGVzQWFiYiA9IHRoaXMuX3RlcnJhaW4uYWFiYjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX21lc2hJbnN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0Lm1lc2guYWFiYiA9IHBhdGNoZXNBYWJiO1xyXG4gICAgICAgICAgICB0aGlzLl9tZXNoSW5zdC5hYWJiID0gcGF0Y2hlc0FhYmI7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0LnNldEN1c3RvbUFhYmIocGF0Y2hlc0FhYmIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jaGVja0lzVmlzaWJsZShtaW46IHBjeC5WZWMzLCBtYXg6IHBjeC5WZWMzLCBmcnVzdHVtUGxhbmVzOiBwY3guUGxhbmVbXSB8IG51bWJlcltdW10pIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2hlY2tJc1Zpc2libGVPbGQobWluOiBwY3guVmVjMywgbWF4OiBwY3guVmVjMywgZnJ1c3R1bVBsYW5lczogbnVtYmVyW11bXSkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IDY7IHArKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZnJ1c3R1bVBsYW5lID0gZnJ1c3R1bVBsYW5lc1twXTtcclxuICAgICAgICAgICAgY29uc3QgZCA9IE1hdGgubWF4KG1pbi54ICogZnJ1c3R1bVBsYW5lWzBdLCBtYXgueCAqIGZydXN0dW1QbGFuZVswXSlcclxuICAgICAgICAgICAgICAgICAgICArIE1hdGgubWF4KG1pbi55ICogZnJ1c3R1bVBsYW5lWzFdLCBtYXgueSAqIGZydXN0dW1QbGFuZVsxXSlcclxuICAgICAgICAgICAgICAgICAgICArIE1hdGgubWF4KG1pbi56ICogZnJ1c3R1bVBsYW5lWzJdLCBtYXgueiAqIGZydXN0dW1QbGFuZVsyXSlcclxuICAgICAgICAgICAgICAgICAgICArIGZydXN0dW1QbGFuZVszXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2hlY2tJc1Zpc2libGVOZXcobWluOiBwY3guVmVjMywgbWF4OiBwY3guVmVjMywgZnJ1c3R1bVBsYW5lczogcGN4LlBsYW5lW10pIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCA2OyBwKyspIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGZydXN0dW1QbGFuZSA9IGZydXN0dW1QbGFuZXNbcF07XHJcbiAgICAgICAgICAgIGNvbnN0IGQgPSBNYXRoLm1heChtaW4ueCAqIGZydXN0dW1QbGFuZS5ub3JtYWwueCwgbWF4LnggKiBmcnVzdHVtUGxhbmUubm9ybWFsLngpXHJcbiAgICAgICAgICAgICAgICAgICAgKyBNYXRoLm1heChtaW4ueSAqIGZydXN0dW1QbGFuZS5ub3JtYWwueSwgbWF4LnkgKiBmcnVzdHVtUGxhbmUubm9ybWFsLnkpXHJcbiAgICAgICAgICAgICAgICAgICAgKyBNYXRoLm1heChtaW4ueiAqIGZydXN0dW1QbGFuZS5ub3JtYWwueiwgbWF4LnogKiBmcnVzdHVtUGxhbmUubm9ybWFsLnopXHJcbiAgICAgICAgICAgICAgICAgICAgKyBmcnVzdHVtUGxhbmUuZGlzdGFuY2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoZCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2ZydXN0dW1IZWxwZXIoXHJcbiAgICAgICAgY291bnQ6IG51bWJlcixcclxuICAgICAgICBxdWFkTWF0cml4OiBudW1iZXJbXSxcclxuICAgICAgICBxdWFkT2Zmc2V0OiBudW1iZXIsXHJcbiAgICAgICAgbWluTWF4U3RvcmU6IEFycmF5PFtwY3guVmVjMywgcGN4LlZlYzMsIGJvb2xlYW5dPixcclxuICAgICAgICBvZmZzZXRBcnI6IG51bWJlcltdLFxyXG4gICAgICAgIGludmVyc2U6IGJvb2xlYW4sXHJcbiAgICAgICAgY2FtZXJhUG9zOiBwY3guVmVjMyxcclxuICAgICAgICBjYW1lcmE6IHBjeC5DYW1lcmEsXHJcbiAgICAgICAgZnJlZXplOiBib29sZWFuLFxyXG4gICAgKSB7XHJcbiAgICAgICAgY29uc3Qgc2NhbGUgICAgICAgID0gdGhpcy5lbnRpdHkuZ2V0U2NhbGUoKTtcclxuICAgICAgICBjb25zdCB0ZXJyYWluU2NhbGUgPSB0aGlzLl90ZXJyYWluLmVudGl0eS5nZXRTY2FsZSgpO1xyXG4gICAgICAgIGNvbnN0IGNoZWNrUmFkaXVzICA9IHRoaXMuY2hlY2tSYWRpdXMgKiBNYXRoLm1heChzY2FsZS54LCBzY2FsZS56KTtcclxuICAgICAgICBjb25zdCBtYXhIZWlnaHQgICAgPSB0aGlzLl90ZXJyYWluLm9iamVjdC5tYXhIZWlnaHQgKiB0ZXJyYWluU2NhbGUueTtcclxuICAgICAgICBjb25zdCBmcnVzdHVtUGxhbmVzID0gY2FtZXJhLmZydXN0dW0ucGxhbmVzO1xyXG5cclxuICAgICAgICBsZXQgdmlzaWJsZUNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW1pbk1heFN0b3JlW2ldKSBtaW5NYXhTdG9yZVtpXSA9IFtuZXcgcGMuVmVjMygpLCBuZXcgcGMuVmVjMygpLCBmYWxzZV07XHJcbiAgICAgICAgICAgIGlmICghZnJlZXplKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVhZE1hdHJpeFggID0gcXVhZE1hdHJpeFtpICogMiArIDBdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVhZE1hdHJpeFogID0gcXVhZE1hdHJpeFtpICogMiArIDFdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxDZW50ZXJYID0gdGhpcy5yYWRpdXMgKiAocXVhZE1hdHJpeFggLSBxdWFkT2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsQ2VudGVyWiA9IHRoaXMucmFkaXVzICogKHF1YWRNYXRyaXhaIC0gcXVhZE9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JsZENlbnRlclggPSBjYW1lcmFQb3MueCArIGxvY2FsQ2VudGVyWCAqIHNjYWxlLng7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JsZENlbnRlclogPSBjYW1lcmFQb3MueiArIGxvY2FsQ2VudGVyWiAqIHNjYWxlLno7XHJcblxyXG4gICAgICAgICAgICAgICAgbWluTWF4U3RvcmVbaV1bMF0uc2V0KFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmxkQ2VudGVyWCAtIGNoZWNrUmFkaXVzLFxyXG4gICAgICAgICAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ybGRDZW50ZXJaIC0gY2hlY2tSYWRpdXNcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgbWluTWF4U3RvcmVbaV1bMV0uc2V0KFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmxkQ2VudGVyWCArIGNoZWNrUmFkaXVzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heEhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICB3b3JsZENlbnRlclogKyBjaGVja1JhZGl1c1xyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aXNpYmxlID0gdGhpcy5fY2hlY2tJc1Zpc2libGUobWluTWF4U3RvcmVbaV1bMF0sIG1pbk1heFN0b3JlW2ldWzFdLCBmcnVzdHVtUGxhbmVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldEFyclt2aXNpYmxlQ291bnQgKiAyICsgMF0gPSBsb2NhbENlbnRlclg7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0QXJyW3Zpc2libGVDb3VudCAqIDIgKyAxXSA9IGxvY2FsQ2VudGVyWjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBtaW5NYXhTdG9yZVtpXVsyXSA9IHZpc2libGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1pbiA9IG1pbk1heFN0b3JlW2ldWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBtYXggPSBtaW5NYXhTdG9yZVtpXVsxXTtcclxuICAgICAgICAgICAgY29uc3QgdmlzID0gbWluTWF4U3RvcmVbaV1bMl07XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJlZXplKSB7XHJcbiAgICAgICAgICAgICAgICBkcmF3Qm94KHsgbWluLCBtYXgsIGNvbG9yOiB2aXMgPyBwYy5Db2xvci5HUkVFTiA6IHBjLkNvbG9yLlJFRCB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmlzaWJsZUNvdW50ICs9IE51bWJlcih2aXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFmcmVlemUgJiYgaW52ZXJzZSAmJiB2aXNpYmxlQ291bnQgPiAwKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBoaWRkZW5Db3VudCA9IGNvdW50IC0gdmlzaWJsZUNvdW50O1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHZpc2libGVDb3VudDsgaSA+IC0xOyBpLS0pIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleEluID0gKGhpZGRlbkNvdW50ICsgaSkgKiAyO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXhPciA9IGkgKiAyO1xyXG5cclxuICAgICAgICAgICAgICAgIG9mZnNldEFycltpbmRleEluICsgMF0gPSBvZmZzZXRBcnJbaW5kZXhPciArIDBdO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0QXJyW2luZGV4SW4gKyAxXSA9IG9mZnNldEFycltpbmRleE9yICsgMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2aXNpYmxlQ291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZnJ1c3R1bShjYW1lcmFQb3M6IHBjeC5WZWMzLCBjYW1lcmE6IHBjeC5DYW1lcmEsIGZyZWV6ZTogYm9vbGVhbikge1xyXG5cclxuICAgICAgICBjb25zdCB2aXNpYmxlTG9kMUNvdW50ID0gdGhpcy5fZnJ1c3R1bUhlbHBlcihsb2QxUXVhZENvdW50LCBxdWFkMU1hdHJpeCwgMSwgdGhpcy5fbG9kMU1pbk1heFN0b3JlLCB0aGlzLl9vZmZzZXRMb2QxQXJyLCBmYWxzZSwgY2FtZXJhUG9zLCBjYW1lcmEsIGZyZWV6ZSk7XHJcbiAgICAgICAgY29uc3QgdmlzaWJsZUxvZDJDb3VudCA9IHRoaXMuX2ZydXN0dW1IZWxwZXIobG9kMlF1YWRDb3VudCwgcXVhZDJNYXRyaXgsIDIsIHRoaXMuX2xvZDJNaW5NYXhTdG9yZSwgdGhpcy5fb2Zmc2V0TG9kMkFyciwgdHJ1ZSwgY2FtZXJhUG9zLCBjYW1lcmEsIGZyZWV6ZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1lc2hJbnN0ICA9IHRoaXMuX21lc2hJbnN0O1xyXG4gICAgICAgIGNvbnN0IG1lc2ggICAgICA9IG1lc2hJbnN0Lm1lc2g7XHJcbiAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gbWVzaC5wcmltaXRpdmVbMF07XHJcbiAgICAgICAgY29uc3QgYmFzZSAgICAgID0gdGhpcy5sb2QyQmxhZGVTZWdzICogMTIgKiAobG9kMlF1YWRDb3VudCAtIHZpc2libGVMb2QyQ291bnQpO1xyXG4gICAgICAgIGNvbnN0IGNvdW50ICAgICA9IHRoaXMubG9kMEJsYWRlU2VncyAqIDEyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgdGhpcy5sb2QxQmxhZGVTZWdzICogMTIgKiB2aXNpYmxlTG9kMUNvdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgdGhpcy5sb2QyQmxhZGVTZWdzICogMTIgKiB2aXNpYmxlTG9kMkNvdW50O1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1lc2hJbnN0LnNldFBhcmFtZXRlcihgJHtsb2QxT2Zmc2V0WFpQYXJhbU5hbWV9WzBdYCwgdGhpcy5fb2Zmc2V0TG9kMUFycik7XHJcbiAgICAgICAgbWVzaEluc3Quc2V0UGFyYW1ldGVyKGAke2xvZDJPZmZzZXRYWlBhcmFtTmFtZX1bMF1gLCB0aGlzLl9vZmZzZXRMb2QyQXJyKTtcclxuXHJcbiAgICAgICAgLy8gYWx3YXlzIHRydWUgZm9yIGxvZCAwXHJcbiAgICAgICAgbWVzaEluc3QudmlzaWJsZSA9IHRoaXMuYXV0b1JlbmRlciB8fCBmcmVlemU7XHJcbiAgICAgICAgbWVzaEluc3QudmlzaWJsZVRoaXNGcmFtZSA9IHRoaXMuYXV0b1JlbmRlciB8fCBmcmVlemU7XHJcblxyXG4gICAgICAgIHByaW1pdGl2ZS5iYXNlICA9IGJhc2U7XHJcbiAgICAgICAgcHJpbWl0aXZlLmNvdW50ID0gY291bnQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8ud2FzUmVsZWFzZWQocGMuS0VZX1YpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZpc2libGVMb2QxQ291bnQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2aXNpYmxlTG9kMkNvdW50KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5fb2Zmc2V0TG9kMUFycik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX29mZnNldExvZDJBcnIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlR3Jhc3NNZXNoKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIHJhZGl1czogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hCdWZmZXJzKGdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoTWF0ZXJpYWwoZ3JhcGhpY3NEZXZpY2UpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jZShncmFwaGljc0RldmljZSk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNpbmcoZ3JhcGhpY3NEZXZpY2UsIHJhZGl1cyk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBYWJiKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1lc2hJbnN0YW5jZXMgPSBbdGhpcy5fbWVzaEluc3RdO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5lbnRpdHkucmVuZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW50aXR5LnJlbmRlci5tZXNoSW5zdGFuY2VzID0gbWVzaEluc3RhbmNlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW50aXR5LmFkZENvbXBvbmVudCgncmVuZGVyJywge1xyXG4gICAgICAgICAgICAgICAgbWVzaEluc3RhbmNlczogbWVzaEluc3RhbmNlcyxcclxuICAgICAgICAgICAgICAgIGNhc3RTaGFkb3dzOiB0aGlzLmNhc3RTaGFkb3csXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlU2hhZG93czogdGhpcy5yZWNlaXZlU2hhZG93LFxyXG4gICAgICAgICAgICAgICAgY3VsbDogZmFsc2UsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbWVzaEluc3QuY2FzdFNoYWRvdyA9IHRoaXMuY2FzdFNoYWRvdztcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdC5yZWNlaXZlU2hhZG93ID0gdGhpcy5yZWNlaXZlU2hhZG93O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsIHJhZGl1czogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21lc2hJbnN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUluc3RhbmNpbmdCdWZmZXIoZ3JhcGhpY3NEZXZpY2UsIHJhZGl1cyk7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0Py5pbnN0YW5jaW5nRGF0YT8udmVydGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0LnNldEluc3RhbmNpbmcodGhpcy5fc2hhcmVkSW5zdGFuY2luZ0J1ZmZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZU1lc2hJbnN0YW5jZShncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0Py5pbnN0YW5jaW5nRGF0YT8udmVydGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fbWVzaEluc3Q/LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWVzaCA9IG5ldyBwYy5NZXNoKGdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBtZXNoLnByaW1pdGl2ZVswXTtcclxuXHJcbiAgICAgICAgbWVzaC5pbmRleEJ1ZmZlclswXSA9IHRoaXMuX3NoYXJlZEluZGV4QnVmZmVyO1xyXG4gICAgICAgIG1lc2gudmVydGV4QnVmZmVyICAgPSB0aGlzLl9zaGFyZWRWZXJ0ZXhCdWZmZXI7XHJcblxyXG4gICAgICAgIHByaW1pdGl2ZS50eXBlICAgID0gdGhpcy53aXJlZnJhbWUgPyBwYy5QUklNSVRJVkVfTElORVMgOiBwYy5QUklNSVRJVkVfVFJJQU5HTEVTO1xyXG4gICAgICAgIHByaW1pdGl2ZS5iYXNlICAgID0gMDtcclxuICAgICAgICBwcmltaXRpdmUuY291bnQgICA9IHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4Lmxlbmd0aDtcclxuICAgICAgICBwcmltaXRpdmUuaW5kZXhlZCA9IHRydWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fbWVzaEluc3QgPSBuZXcgcGMuTWVzaEluc3RhbmNlKG1lc2gsIHRoaXMuX21hdGVyaWFsLCB0aGlzLmVudGl0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFNldHMgdXAgaW5kaWNlcyBmb3Igc2luZ2xlIGJsYWRlIG1lc2guXHJcbiAgICAqIEBwYXJhbSBpZCBhcnJheSBvZiBpbmRpY2VzXHJcbiAgICAqIEBwYXJhbSB2YzEgdmVydGV4IHN0YXJ0IG9mZnNldCBmb3IgZnJvbnQgc2lkZSBvZiBibGFkZVxyXG4gICAgKiBAcGFyYW0gdmMyIHZlcnRleCBzdGFydCBvZmZzZXQgZm9yIGJhY2sgc2lkZSBvZiBibGFkZVxyXG4gICAgKiBAcGFyYW0gaSBpbmRleCBvZmZzZXRcclxuICAgICovXHJcbiAgICBwcml2YXRlIF9pbml0QmxhZGVJbmRpY2VzKGlkOiBVaW50OEFycmF5IHwgVWludDE2QXJyYXksIHZjMTogbnVtYmVyLCB2YzI6IG51bWJlciwgaTogbnVtYmVyLCBibGFkZVNlZ3M6IG51bWJlcikge1xyXG5cclxuICAgICAgICBsZXQgc2VnOiBudW1iZXI7XHJcblxyXG4gICAgICAgIC8vIGJsYWRlIGZyb250IHNpZGVcclxuICAgICAgICBmb3IgKHNlZyA9IDA7IHNlZyA8IGJsYWRlU2VnczsgKytzZWcpIHtcclxuICAgICAgICAgICBpZFtpKytdID0gdmMxICsgMDsgLy8gdHJpIDFcclxuICAgICAgICAgICBpZFtpKytdID0gdmMxICsgMTtcclxuICAgICAgICAgICBpZFtpKytdID0gdmMxICsgMjtcclxuICAgICAgICAgICBpZFtpKytdID0gdmMxICsgMjsgLy8gdHJpIDJcclxuICAgICAgICAgICBpZFtpKytdID0gdmMxICsgMTtcclxuICAgICAgICAgICBpZFtpKytdID0gdmMxICsgMztcclxuICAgICAgICAgICB2YzEgKz0gMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGJsYWRlIGJhY2sgc2lkZVxyXG4gICAgICAgIGZvciAoc2VnID0gMDsgc2VnIDwgYmxhZGVTZWdzOyArK3NlZykge1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzIgKyAyOyAvLyB0cmkgMVxyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzIgKyAxO1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzIgKyAwO1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzIgKyAzOyAvLyB0cmkgMlxyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzIgKyAxO1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzIgKyAyO1xyXG4gICAgICAgICAgIHZjMiArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gaTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogU2V0IHVwIGluZGljZXMgZm9yIDEgYmxhZGUgKi9cclxuICAgIHByaXZhdGUgX2luaXRCbGFkZUluZGV4VmVydHModmluZGV4OiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZpbmRleC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2aW5kZXhbaV0gPSBpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0QmxhZGVPZmZzZXRTaGFwZVZlcnRzKG9mZnNldFNoYXBlOiBVaW50MTZBcnJheSB8IEZsb2F0MzJBcnJheSwgcmFkaXVzOiBudW1iZXIsIG51bUJsYWRlczogbnVtYmVyKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplVmFsdWUgPSBvZmZzZXRTaGFwZSBpbnN0YW5jZW9mIFVpbnQxNkFycmF5ID8gcGMuRmxvYXRQYWNraW5nLmZsb2F0MkhhbGYgOiAoeDogbnVtYmVyKSA9PiB4O1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbSA9IG5ldyBSYW5kb20odGhpcy5zZWVkKTtcclxuICAgICAgICBjb25zdCBoZWlnaHRGYWN0b3IgPSB0aGlzLmJsYWRlTWF4SGVpZ2h0IC0gdGhpcy5ibGFkZU1pbkhlaWdodDtcclxuXHJcbiAgICAgICAgLy9sZXQgbm9pc2UgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQmxhZGVzOyArK2kpIHtcclxuXHJcbiAgICAgICAgICAgIC8vbm9pc2UgPSBNYXRoLmFicyhzaW1wbGV4KG9mZnNldFNoYXBlW2kgKiA4ICsgMF0gKiAwLjAzLCBvZmZzZXRTaGFwZVtpICogOCArIDJdICogMC4wMykpO1xyXG4gICAgICAgICAgICAvL25vaXNlID0gbm9pc2UgKiBub2lzZSAqIG5vaXNlO1xyXG4gICAgICAgICAgICAvL25vaXNlICo9IDUuMDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHggPSByYW5kb20ubnJhbmQoKSAqIHJhZGl1cztcclxuICAgICAgICAgICAgY29uc3QgeSA9IHJhbmRvbS5ucmFuZCgpICogcmFkaXVzO1xyXG4gICAgICAgICAgICBjb25zdCB6ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uID0gTWF0aC5QSSAqIDIuMCAqIHJhbmRvbS5yYW5kb20oKTtcclxuICAgICAgICAgICAgY29uc3Qgd2lkdGggICAgPSB0aGlzLmJsYWRlV2lkdGggKyByYW5kb20ucmFuZG9tKCkgKiB0aGlzLmJsYWRlV2lkdGggKiAwLjU7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCAgID0gdGhpcy5ibGFkZU1pbkhlaWdodCArIE1hdGgucG93KHJhbmRvbS5yYW5kb20oKSwgNC4wKSAqIGhlaWdodEZhY3RvcjtcclxuICAgICAgICAgICAgY29uc3QgbGVhbiAgICAgPSAwLjAxICsgcmFuZG9tLnJhbmRvbSgpICogMC4zO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJ2ZSAgICA9IDAuMDUgKyByYW5kb20ucmFuZG9tKCkgKiAwLjM7XHJcblxyXG4gICAgICAgICAgICBvZmZzZXRTaGFwZVtpICogOCArIDBdID0gbm9ybWFsaXplVmFsdWUoeCk7IC8vIHhcclxuICAgICAgICAgICAgb2Zmc2V0U2hhcGVbaSAqIDggKyAxXSA9IG5vcm1hbGl6ZVZhbHVlKHkpOyAvLyB5XHJcbiAgICAgICAgICAgIG9mZnNldFNoYXBlW2kgKiA4ICsgMl0gPSBub3JtYWxpemVWYWx1ZSh6KTsgLy8gelxyXG4gICAgICAgICAgICBvZmZzZXRTaGFwZVtpICogOCArIDNdID0gbm9ybWFsaXplVmFsdWUocm90YXRpb24pOyAvLyByb3RcclxuXHJcbiAgICAgICAgICAgIG9mZnNldFNoYXBlW2kgKiA4ICsgNF0gPSBub3JtYWxpemVWYWx1ZSh3aWR0aCk7ICAvLyB3aWR0aFxyXG4gICAgICAgICAgICBvZmZzZXRTaGFwZVtpICogOCArIDVdID0gbm9ybWFsaXplVmFsdWUoaGVpZ2h0KTsgLy8rIG5vaXNlOyAvLysgaGVpZ2h0XHJcbiAgICAgICAgICAgIG9mZnNldFNoYXBlW2kgKiA4ICsgNl0gPSBub3JtYWxpemVWYWx1ZShsZWFuKTsgICAvLyBsZWFuXHJcbiAgICAgICAgICAgIG9mZnNldFNoYXBlW2kgKiA4ICsgN10gPSBub3JtYWxpemVWYWx1ZShjdXJ2ZSk7ICAvLyBjdXJ2ZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlSW5zdGFuY2luZ0J1ZmZlcihncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlLCByYWRpdXM6IG51bWJlcikge1xyXG5cclxuICAgICAgICB0aGlzLl9zaGFyZWRJbnN0YW5jaW5nQnVmZmVyPy5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvZDBQYXRjaENvdW50ID0gMTtcclxuICAgICAgICBjb25zdCBsb2QxUGF0Y2hDb3VudCA9IDg7XHJcbiAgICAgICAgY29uc3QgbG9kMlBhdGNoQ291bnQgPSAxNjtcclxuICAgICAgICBjb25zdCBwYXRjaE51bUJsYWRlcyA9ICh0aGlzLm51bUJsYWRlcyAvIChsb2QwUGF0Y2hDb3VudCArIGxvZDFQYXRjaENvdW50ICsgbG9kMlBhdGNoQ291bnQpKSB8IDA7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0QW5kU2hhcGVMZW5ndGggPSBwYXRjaE51bUJsYWRlcyAqIDg7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJTdG9yZS5vZmZzZXRBbmRTaGFwZSA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLm9mZnNldEFuZFNoYXBlLmxlbmd0aCAhPT0gb2Zmc2V0QW5kU2hhcGVMZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUub2Zmc2V0QW5kU2hhcGUgPSBuZXcgRmxvYXQzMkFycmF5KG9mZnNldEFuZFNoYXBlTGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXRCbGFkZU9mZnNldFNoYXBlVmVydHModGhpcy5fYnVmZmVyU3RvcmUub2Zmc2V0QW5kU2hhcGUsIHJhZGl1cywgcGF0Y2hOdW1CbGFkZXMpO1xyXG5cclxuICAgICAgICBjb25zdCB0eXBlID0gdGhpcy5fYnVmZmVyU3RvcmUub2Zmc2V0QW5kU2hhcGUgaW5zdGFuY2VvZiBVaW50MTZBcnJheSA/IHBjLlRZUEVfRkxPQVQxNiA6IHBjLlRZUEVfRkxPQVQzMjtcclxuICAgICAgICBjb25zdCBpbnN0YW5jaW5nRm9ybWF0ID0gbmV3IHBjLlZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSwgW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZW1hbnRpYzogcGMuU0VNQU5USUNfQVRUUjEwLFxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogNCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICBub3JtYWxpemU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgYXNJbnQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNlbWFudGljOiBwYy5TRU1BTlRJQ19BVFRSMTEsXHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiA0LFxyXG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBhc0ludDogZmFsc2UsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoYXJlZEluc3RhbmNpbmdCdWZmZXIgPSBuZXcgcGMuVmVydGV4QnVmZmVyKGdyYXBoaWNzRGV2aWNlLCBpbnN0YW5jaW5nRm9ybWF0LCBwYXRjaE51bUJsYWRlcywge1xyXG4gICAgICAgICAgICB1c2FnZTogcGMuQlVGRkVSX1NUQVRJQyxcclxuICAgICAgICAgICAgZGF0YTogdGhpcy5fYnVmZmVyU3RvcmUub2Zmc2V0QW5kU2hhcGUsXHJcbiAgICAgICAgICAgIHN0b3JhZ2U6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2dldFZlcnRleEZvcm1hdChncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBwYy5WZXJ0ZXhGb3JtYXQoZ3JhcGhpY3NEZXZpY2UsIFt7XHJcbiAgICAgICAgICAgIHNlbWFudGljOiBwYy5TRU1BTlRJQ19QT1NJVElPTixcclxuICAgICAgICAgICAgY29tcG9uZW50czogMSxcclxuICAgICAgICAgICAgdHlwZTogcGMuVFlQRV9GTE9BVDMyLFxyXG4gICAgICAgICAgICBub3JtYWxpemU6IGZhbHNlLFxyXG4gICAgICAgICAgICBhc0ludDogZmFsc2VcclxuICAgICAgICB9XSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTWVzaEJ1ZmZlcnMoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkge1xyXG5cclxuICAgICAgICB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG5cclxuICAgICAgICBjb25zdCBsb2QwVkMgPSAodGhpcy5sb2QwQmxhZGVTZWdzICsgMSkgKiAyO1xyXG4gICAgICAgIGNvbnN0IGxvZDFWQyA9ICh0aGlzLmxvZDFCbGFkZVNlZ3MgKyAxKSAqIDI7XHJcbiAgICAgICAgY29uc3QgbG9kMlZDID0gKHRoaXMubG9kMkJsYWRlU2VncyArIDEpICogMjtcclxuICAgICAgICBjb25zdCBpbmRleExlbmd0aCA9IHRoaXMubG9kMEJsYWRlU2VncyAqIDEyICsgdGhpcy5sb2QxQmxhZGVTZWdzICogMTIgKiBsb2QxUXVhZENvdW50ICsgdGhpcy5sb2QyQmxhZGVTZWdzICogMTIgKiBsb2QyUXVhZENvdW50O1xyXG4gICAgICAgIGNvbnN0IGluZGV4VmVydHNMZW5ndGggPSBsb2QwVkMgKiAyICsgbG9kMVZDICogMiAqIGxvZDFRdWFkQ291bnQgKyBsb2QyVkMgKiAyICogbG9kMlF1YWRDb3VudDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4ID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXgubGVuZ3RoICE9PSBpbmRleExlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTdG9yZS5pbmRleCA9IG5ldyBVaW50MTZBcnJheShpbmRleExlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2QyUXVhZENvdW50OyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2QyVkMxID0gaSAqIGxvZDJWQyAqIDI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2QyVkMyID0gbG9kMlZDMSArIGxvZDJWQztcclxuXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuX2luaXRCbGFkZUluZGljZXModGhpcy5fYnVmZmVyU3RvcmUuaW5kZXgsIGxvZDJWQzEsIGxvZDJWQzIsIGluZGV4LCB0aGlzLmxvZDJCbGFkZVNlZ3MpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsb2QwVkMxID0gbG9kMlF1YWRDb3VudCAqIGxvZDJWQyAqIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvZDBWQzIgPSBsb2QwVkMxICsgbG9kMFZDO1xyXG5cclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9pbml0QmxhZGVJbmRpY2VzKHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4LCBsb2QwVkMxLCBsb2QwVkMyLCBpbmRleCwgdGhpcy5sb2QwQmxhZGVTZWdzKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9kMVF1YWRDb3VudDsgaSsrKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvZDFWQzEgPSBsb2QwVkMyICsgbG9kMFZDICsgaSAqIGxvZDFWQyAqIDI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2QxVkMyID0gbG9kMVZDMSArIGxvZDFWQztcclxuXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuX2luaXRCbGFkZUluZGljZXModGhpcy5fYnVmZmVyU3RvcmUuaW5kZXgsIGxvZDFWQzEsIGxvZDFWQzIsIGluZGV4LCB0aGlzLmxvZDFCbGFkZVNlZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fYnVmZmVyU3RvcmUuaW5kZXhWZXJ0cyA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4VmVydHMubGVuZ3RoICE9PSBpbmRleFZlcnRzTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4VmVydHMgPSBuZXcgRmxvYXQzMkFycmF5KGluZGV4VmVydHNMZW5ndGgpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbml0QmxhZGVJbmRleFZlcnRzKHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4VmVydHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXIgPSBuZXcgcGMuSW5kZXhCdWZmZXIoXHJcbiAgICAgICAgICAgIGdyYXBoaWNzRGV2aWNlLFxyXG4gICAgICAgICAgICBwYy5JTkRFWEZPUk1BVF9VSU5UMTYsXHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4Lmxlbmd0aCxcclxuICAgICAgICAgICAgcGMuQlVGRkVSX1NUQVRJQyxcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXgsXHJcbiAgICAgICAgICAgIHsgc3RvcmFnZTogZmFsc2UgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlciA9IG5ldyBwYy5WZXJ0ZXhCdWZmZXIoZ3JhcGhpY3NEZXZpY2UsIHRoaXMuX2dldFZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSksIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4VmVydHMubGVuZ3RoLCB7XHJcbiAgICAgICAgICAgIHVzYWdlOiBwYy5CVUZGRVJfU1RBVElDLFxyXG4gICAgICAgICAgICBkYXRhOiB0aGlzLl9idWZmZXJTdG9yZS5pbmRleFZlcnRzLFxyXG4gICAgICAgICAgICBzdG9yYWdlOiBmYWxzZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVNZXNoTWF0ZXJpYWwoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkge1xyXG5cclxuICAgICAgICB0aGlzLl9tYXRlcmlhbD8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsID0gbmV3IHBjLlN0YW5kYXJkTWF0ZXJpYWwoKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5uYW1lID0gXCJHcmFzc0ZpZWxkTWF0ZXJpYWxcIjtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5kZXB0aFRlc3QgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5kZXB0aFdyaXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5ibGVuZFR5cGUgPSBwYy5CTEVORF9OT05FO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmFscGhhVGVzdCA9IDA7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuYWxwaGFXcml0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmFscGhhRmFkZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmFscGhhVG9Db3ZlcmFnZSA9IGZhbHNlO1xyXG4gICAgICAgICovXHJcblxyXG4gICAgICAgIGNvbnN0IHRlcnJhaW4gICA9IHRoaXMuX3RlcnJhaW4ub2JqZWN0O1xyXG4gICAgICAgIGNvbnN0IGhlaWdodE1hcCA9IHRoaXMuX3RlcnJhaW4uaGVpZ2h0TWFwVGV4dHVyZTtcclxuICAgICAgICBjb25zdCB0ZXJyYWluU2NhbGUgPSB0aGlzLl90ZXJyYWluLmVudGl0eS5nZXRTY2FsZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRBdHRyaWJ1dGUodmluZGV4QXR0ck5hbWUsIHBjLlNFTUFOVElDX1BPU0lUSU9OKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRBdHRyaWJ1dGUob2Zmc2V0QXR0ck5hbWUsIHBjLlNFTUFOVElDX0FUVFIxMCk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHNoYXBlQXR0ck5hbWUsIHBjLlNFTUFOVElDX0FUVFIxMSk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcigndURhdGFNYXAnLCB0aGlzLl9kYXRhVGV4dHVyZS50ZXh0dXJlKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoaGVpZ2h0TWFwUGFyYW1OYW1lLCBoZWlnaHRNYXApO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihmaWVsZFNjYWxlUGFyYW1OYW1lLCBbdGVycmFpblNjYWxlLngsIHRlcnJhaW5TY2FsZS55LCB0ZXJyYWluU2NhbGUuel0pO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihtYXhIZWlnaHRQYXJhbU5hbWUsIHRlcnJhaW4ubWF4SGVpZ2h0KTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoYCR7bG9kMU9mZnNldFhaUGFyYW1OYW1lfVswXWAsIHRoaXMuX29mZnNldExvZDFBcnIpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihgJHtsb2QyT2Zmc2V0WFpQYXJhbU5hbWV9WzBdYCwgdGhpcy5fb2Zmc2V0TG9kMkFycik7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihkcmF3UG9zUGFyYW1OYW1lLCBbMCwgMCwgMF0pO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih0aW1lUGFyYW1OYW1lLCB0aGlzLl90aW1lKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIod2luZEludGVuc2l0eVBhcmFtTmFtZSwgMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaG1Gb3JtYXQgPSBnZXRIZWlnaHRNYXBGb3JtYXQoZ3JhcGhpY3NEZXZpY2UsIHRlcnJhaW4uaGVpZ2h0TWFwKTtcclxuICAgICAgICBjb25zdCBwY1ZlcnNpb24gPSBgdiR7cGMudmVyc2lvblswXX1gIGFzIHVua25vd24gYXMgYW55O1xyXG4gICAgICAgIGNvbnN0IGNodW5rc1N0b3JlID0gZ2V0R3Jhc3NTaGFkZXJDaHVua3Moe1xyXG4gICAgICAgICAgICB3aWR0aDogdGVycmFpbi53aWR0aCxcclxuICAgICAgICAgICAgZGVwdGg6IHRlcnJhaW4uZGVwdGgsXHJcbiAgICAgICAgICAgIGhlaWdodE1hcENodW5rU2l6ZTogdGVycmFpbi5oZWlnaHRNYXAuZGF0YUNodW5rU2l6ZSxcclxuICAgICAgICAgICAgaGVpZ2h0TWFwRm9ybWF0OiBobUZvcm1hdCxcclxuICAgICAgICAgICAgYmxhZGVNYXhIZWlnaHQ6IHRoaXMuYmxhZGVNYXhIZWlnaHQgKiAxLjUsXHJcbiAgICAgICAgICAgIGxvZDBCbGFkZVNlZ3M6IHRoaXMubG9kMEJsYWRlU2VncyxcclxuICAgICAgICAgICAgbG9kMUJsYWRlU2VnczogdGhpcy5sb2QxQmxhZGVTZWdzLFxyXG4gICAgICAgICAgICBsb2QyQmxhZGVTZWdzOiB0aGlzLmxvZDJCbGFkZVNlZ3MsXHJcbiAgICAgICAgICAgIHJhZGl1czogdGhpcy5yYWRpdXMsXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb25Mb3c6IHRoaXMudHJhbnNpdGlvbkxvdyxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbkhpZ2g6IHRoaXMudHJhbnNpdGlvbkhpZ2gsXHJcbiAgICAgICAgICAgIGVuZ2luZVZlcnNpb246IHBjVmVyc2lvbixcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2h1bmtOYW1lcyA9IE9iamVjdC5rZXlzKGNodW5rc1N0b3JlKTtcclxuICAgICAgICBjb25zdCBzaGFkZXJDaHVua3MgPSB0aGlzLl9tYXRlcmlhbC5nZXRTaGFkZXJDaHVua3M/LihwYy5TSEFERVJMQU5HVUFHRV9HTFNMKTtcclxuXHJcbiAgICAgICAgaWYgKHNoYWRlckNodW5rcykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgY2h1bmtOYW1lIG9mIGNodW5rTmFtZXMpIHtcclxuICAgICAgICAgICAgICAgIHNoYWRlckNodW5rcy5zZXQoY2h1bmtOYW1lLCBjaHVua3NTdG9yZVtjaHVua05hbWVdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2hhZGVyQ2h1bmtzVmVyc2lvbiA9IHBjLkNIVU5LQVBJXzFfNzA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2h1bmtzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0gdGhpcy5fbWF0ZXJpYWwuY2h1bmtzO1xyXG5cclxuICAgICAgICAgICAgY2h1bmtzLkFQSVZlcnNpb24gPSBwYy5DSFVOS0FQSV8xXzcwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgY2h1bmtOYW1lIG9mIGNodW5rTmFtZXMpIHtcclxuICAgICAgICAgICAgICAgIGNodW5rc1tjaHVua05hbWVdID0gY2h1bmtzU3RvcmVbY2h1bmtOYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwudXBkYXRlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdyYXNzRmllbGQ7XHJcbmV4cG9ydCBjb25zdCBncmFzc0ZpZWxkU2NyaXB0TmFtZSA9IFwiZ3Jhc3NGaWVsZFwiO1xyXG5cclxucGMucmVnaXN0ZXJTY3JpcHQoR3Jhc3NGaWVsZCwgZ3Jhc3NGaWVsZFNjcmlwdE5hbWUpO1xyXG5cclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcInBhaW50aW5nXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiY2FzdFNoYWRvd1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcInJlY2VpdmVTaGFkb3dcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogdHJ1ZSwgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJ3aXJlZnJhbWVcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogZmFsc2UgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJmcmVlemVEcmF3UG9zXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiYXV0b1JlbmRlclwiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwic2VlZFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDUzNDY0NTQ2NDU1LCBtaW46IDEsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcIndpbmRJbnRlbnNpdHlcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAwLCBtaW46IC0zMCwgbWF4OiAzMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcIm51bUJsYWRlc1wiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDQwMDAsIG1pbjogMCwgbWF4OiA4MDAwMDAwLCBzdGVwOiAxLCBwcmVjaXNpb246IDAgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJyYWRpdXNcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA4MCwgbWluOiAxLCBtYXg6IDEwMDAwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwibG9kMEJsYWRlU2Vnc1wiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDMsIG1pbjogMSwgbWF4OiAxMCwgc3RlcDogMSwgcHJlY2lzaW9uOiAwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwibG9kMUJsYWRlU2Vnc1wiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDIsIG1pbjogMSwgbWF4OiAxMCwgc3RlcDogMSwgcHJlY2lzaW9uOiAwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwibG9kMkJsYWRlU2Vnc1wiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDEsIG1pbjogMSwgbWF4OiAxMCwgc3RlcDogMSwgcHJlY2lzaW9uOiAwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiYmxhZGVXaWR0aFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDAuMDQsIG1pbjogMC4wMSwgbWF4OiA1IH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiYmxhZGVNaW5IZWlnaHRcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAwLjI1LCBtaW46IDAuMDEsIG1heDogMTAgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJibGFkZU1heEhlaWdodFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDEsIG1pbjogMC4wMSwgbWF4OiAxMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcInRleHR1cmVzXCIsIHtcclxuICAgIHR5cGU6IFwianNvblwiLFxyXG4gICAgYXJyYXk6IHRydWUsXHJcbiAgICBzY2hlbWE6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwibmFtZVwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJOYW1lXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiZGlmZnVzZVwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJEaWZmdXNlXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcclxuICAgICAgICAgICAgYXNzZXRUeXBlOiBcInRleHR1cmVcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJjb2xvclwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJDb2xvclwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInJnYlwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiY29sb3JSYW5kb21cIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiQ29sb3IgUmFuZG9tXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwidmVjM1wiLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiBbMC4wMSwgMC4wMSwgMC4wMV1cclxuICAgICAgICB9XHJcbiAgICBdXHJcbn0pOyIsIjsoKCkgPT4ge1xyXG4gICAgaWYgKHdpbmRvdy5fX19hbWRfX19yZXF1aXJlUmVzb2x2ZXIpIHtcclxuICAgICAgICB3aW5kb3cuX19fYW1kX19fcmVxdWlyZVJlc29sdmVyKCk7XHJcbiAgICB9XHJcbn0pKCk7Il19