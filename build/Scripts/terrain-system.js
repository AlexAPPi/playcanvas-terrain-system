"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
;
(() => {
    const defs = {};
    const resolved = {};
    // save original define and require
    window.___amd___OriginalDefine = window.define;
    window.___amd___OriginalRequire = window.require;
    if (!window.define && !window.require) {
        const define = (id, deps, factory) => {
            if (defs[id]) {
                throw new Error('Duplicate definition for ' + id);
            }
            defs[id] = [deps, factory];
        };
        define.amd = {
            bundle: true, // this implementation works only with bundled amd modules
            dynamic: false, // does not support dynamic or async loading
        };
        const require = (id) => {
            if (id === 'require')
                return require;
            if (id === 'exports')
                return {};
            if (resolved[id])
                return resolved[id];
            if (!defs[id]) {
                console.log(defs, id);
                throw new Error('No definition for ' + id);
            }
            const moduleExports = {};
            const deps = defs[id][0];
            const factory = defs[id][1];
            const args = deps.map(dep => {
                if (dep === 'exports') {
                    return moduleExports;
                }
                return require(dep);
            });
            factory.apply(null, args);
            return resolved[id] = moduleExports;
        };
        window.define = define;
        window.require = require;
    }
    window.___amd___requireResolver = () => {
        for (const id in defs) {
            if (defs.hasOwnProperty(id)) {
                const deps = defs[id][0];
                if (deps) {
                    deps.map(dep => {
                        if (dep !== 'require' &&
                            dep !== 'exports') {
                            if (!resolved.hasOwnProperty(dep)) {
                                require(dep);
                            }
                            if (!defs.hasOwnProperty(dep) &&
                                !resolved.hasOwnProperty(dep)) {
                                throw new Error(`Failed define '${id}' dep not found '${dep}'`);
                            }
                        }
                    });
                }
                require(id);
                delete defs[id];
            }
        }
        // return original define and require
        window.define = window.___amd___OriginalDefine;
        window.require = window.___amd___OriginalRequire;
        // clear
        delete window.___amd___requireResolver;
        delete window.___amd___OriginalDefine;
        delete window.___amd___OriginalRequire;
    };
})();
define("src/Extras/Types", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Core/IZone", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Extras/Compressor", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class Compressor {
        static _concatChunks(chunks, totalLength) {
            let position = 0;
            // Concatenate all Uint8Array chunks into a single ArrayBuffer
            const resultBuffer = new Uint8Array(totalLength);
            for (const chunk of chunks) {
                resultBuffer.set(chunk, position);
                position += chunk.length;
            }
            return resultBuffer.buffer;
        }
        static _getResult(reader) {
            return __awaiter(this, void 0, void 0, function* () {
                let totalLength = 0;
                const chunks = [];
                while (true) {
                    const { done, value } = yield reader.read();
                    if (done)
                        break;
                    chunks.push(value);
                    totalLength += value.length;
                }
                return this._concatChunks(chunks, totalLength);
            });
        }
        static compressBuffer(buffer_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, format = 'gzip') {
                const compressedStream = new CompressionStream(format);
                const writer = compressedStream.writable.getWriter();
                writer.write(new Uint8Array(buffer));
                writer.close();
                const reader = compressedStream.readable.getReader();
                return this._getResult(reader);
            });
        }
        static decompressBuffer(buffer_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, format = 'gzip') {
                const decompressedStream = new DecompressionStream(format);
                const reader = decompressedStream.readable.getReader();
                const writer = decompressedStream.writable.getWriter();
                // Write the compressed buffer to the writer
                writer.write(new Uint8Array(buffer));
                writer.close();
                return this._getResult(reader);
            });
        }
    }
    exports.default = Compressor;
});
define("src/Core/AbsHeightMapFileIO", ["require", "exports", "src/Extras/Compressor"], function (require, exports, Compressor_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsHeightMapFileIO = exports.heightMapFileCompressedFormat = exports.factorSize = exports.heightMapVersion = void 0;
    Compressor_mjs_1 = __importDefault(Compressor_mjs_1);
    exports.heightMapVersion = 99;
    exports.factorSize = 3;
    exports.heightMapFileCompressedFormat = 'gzip';
    class AbsHeightMapFileIO {
        __readHeightFactor(view, headerSize, width, x, z) {
            const index = z * width + x;
            const r = view.getUint8(headerSize + index * exports.factorSize + 0);
            const g = view.getUint8(headerSize + index * exports.factorSize + 1);
            const b = view.getUint8(headerSize + index * exports.factorSize + 2);
            const scaled = (r << 16) | (g << 8) | b;
            const factor = scaled / 0xffffff;
            return factor;
        }
        __writeHeightFactor(view, headerSize, heightMap, x, z) {
            const index = z * heightMap.width + x;
            const factor = heightMap.getFactor(x, z);
            const scaled = Math.floor(factor * 0xffffff);
            const r = (scaled >> 16) & 0xff;
            const g = (scaled >> 8) & 0xff;
            const b = (scaled & 0xff);
            view.setUint8(headerSize + index * exports.factorSize + 0, r);
            view.setUint8(headerSize + index * exports.factorSize + 1, g);
            view.setUint8(headerSize + index * exports.factorSize + 2, b);
        }
        __importFromFile(heightMap, buffer, options) {
            return __awaiter(this, void 0, void 0, function* () {
                // TODO:
                // header version 99
                // headerByteSize, version, width, depth, maxHeight
                const nBuffer = yield Compressor_mjs_1.default.decompressBuffer(buffer, exports.heightMapFileCompressedFormat);
                const view = new DataView(nBuffer);
                const version = view.getUint32(1, true);
                if (version !== exports.heightMapVersion) {
                    console.warn('Height map version: %f no support.', version);
                    return null;
                }
                const headerSize = view.getUint8(0);
                const width = view.getUint32(5, true);
                const depth = view.getUint32(9, true);
                const maxHeight = view.getFloat32(13, true);
                const finalMaxHeight = (options === null || options === void 0 ? void 0 : options.adaptiveMaxHeight) ? heightMap.maxHeight : maxHeight;
                if ((heightMap.width !== width || heightMap.depth !== depth) && (options === null || options === void 0 ? void 0 : options.adaptiveWidthAndDepth)) {
                    // TODO: its work for x^n + 1, z^n + 1
                    const factorX = (width - 1) / (heightMap.width - 1);
                    const factorZ = (depth - 1) / (heightMap.depth - 1);
                    for (let z = 0; z < depth; z += factorZ) {
                        for (let x = 0; x < width; x += factorX) {
                            // TODO: smooth for heightMap more import data
                            const factor = this.__readHeightFactor(view, headerSize, width, x | 0, z | 0);
                            const height = factor * finalMaxHeight;
                            heightMap.set(x / factorX, z / factorZ, height);
                        }
                    }
                }
                else {
                    for (let z = 0; (z < depth) && (z < heightMap.depth); z++) {
                        for (let x = 0; (x < width) && (x < heightMap.width); x++) {
                            const factor = this.__readHeightFactor(view, headerSize, width, x, z);
                            const height = factor * finalMaxHeight;
                            heightMap.set(x, z, height);
                        }
                    }
                }
                return {
                    width,
                    depth,
                    maxHeight
                };
            });
        }
        __exportToBuffer(heightMap) {
            return __awaiter(this, void 0, void 0, function* () {
                // TODO:
                // header version 99
                // headerByteSize, version, width, depth, maxHeight
                const headerSize = 1 + 4 + 4 + 4 + 4;
                const buffer = new ArrayBuffer(headerSize + exports.factorSize * heightMap.width * heightMap.depth);
                const view = new DataView(buffer);
                view.setUint8(0, headerSize);
                view.setUint32(1, exports.heightMapVersion, true);
                view.setUint32(5, heightMap.width, true);
                view.setUint32(9, heightMap.depth, true);
                view.setFloat32(13, heightMap.maxHeight, true);
                for (let z = 0; z < heightMap.depth; z++) {
                    for (let x = 0; x < heightMap.width; x++) {
                        this.__writeHeightFactor(view, headerSize, heightMap, x, z);
                    }
                }
                return Compressor_mjs_1.default.compressBuffer(buffer, exports.heightMapFileCompressedFormat);
            });
        }
    }
    exports.AbsHeightMapFileIO = AbsHeightMapFileIO;
    exports.default = AbsHeightMapFileIO;
});
define("src/Core/AbsHeightMap", ["require", "exports", "src/Core/AbsHeightMapFileIO"], function (require, exports, AbsHeightMapFileIO_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsHeightMap = void 0;
    AbsHeightMapFileIO_mjs_1 = __importDefault(AbsHeightMapFileIO_mjs_1);
    class AbsHeightMap extends AbsHeightMapFileIO_mjs_1.default {
        constructor() {
            super(...arguments);
            this.minX = 0;
            this.minZ = 0;
        }
        get maxX() { return this.width; }
        get maxZ() { return this.depth; }
        getHeightInterpolated(x, z) {
            const intX = x | 0;
            const intZ = z | 0;
            const x0z0 = this.get(intX, intZ);
            if ((intX + 1 >= this.width) ||
                (intZ + 1 >= this.depth)) {
                return x0z0;
            }
            const x1z0 = this.get(intX + 1, intZ);
            const x0z1 = this.get(intX, intZ + 1);
            const x1z1 = this.get(intX + 1, intZ + 1);
            const factorX = x - intX;
            const interpolatedBottom = (x1z0 - x0z0) * factorX + x0z0;
            const interpolatedTop = (x1z1 - x0z1) * factorX + x0z1;
            const factorZ = z - intZ;
            const finalHeight = (interpolatedTop - interpolatedBottom) * factorZ + interpolatedBottom;
            return finalHeight;
        }
        substract(x, z, value) {
            return this.append(x, z, -value);
        }
        divide(x, z, value, heightIfZero = 0) {
            return this.multiply(x, z, 1 / value, heightIfZero);
        }
        fromFile(buffer, options) {
            return __awaiter(this, void 0, void 0, function* () {
                return yield this.__importFromFile(this, buffer, options);
            });
        }
        toFile() {
            return __awaiter(this, void 0, void 0, function* () {
                const buffer = yield this.__exportToBuffer(this);
                return new Blob([buffer], { type: "application/octet-stream" });
            });
        }
        toBuffer(buffer) {
            const width = this.width;
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    const f = this.getFactor(x, z);
                    const v = f * 255;
                    const pos = (x + z * width) * 4;
                    buffer[pos + 0] = v;
                    buffer[pos + 1] = v;
                    buffer[pos + 2] = v;
                    buffer[pos + 3] = 255;
                }
            }
        }
        toCanvas() {
            const canvas = document.createElement('canvas');
            const width = this.width;
            const height = this.depth;
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');
            if (!ctx) {
                throw new Error('Failed create canvas 2d context');
            }
            const imageData = ctx.getImageData(0, 0, width, height);
            const buffer = imageData.data;
            this.toBuffer(buffer);
            ctx.putImageData(imageData, 0, 0);
            return canvas;
        }
        /**
         * Save height map to image of base64
         */
        toImage(type, quality) {
            const canvas = this.toCanvas();
            return canvas.toDataURL(type, quality);
        }
        /**
         * Load height map from image
         * @param img
         */
        fromImage(img) {
            const bufferWidth = img.width;
            const bufferHeight = img.height;
            if (bufferWidth % 2 !== 0 || bufferHeight % 2 !== 0) {
                throw new Error("Map sizes not divisible by 2 are not supported");
            }
            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            canvas.width = bufferWidth;
            canvas.height = bufferHeight;
            context.drawImage(img, 0, 0);
            const imageData = context.getImageData(0, 0, bufferWidth, bufferHeight);
            const imageBuffer = imageData.data;
            const maxSegmentX = this.width - 1;
            const maxSegmentZ = this.depth - 1;
            const factorX = bufferWidth / maxSegmentX;
            const factorZ = bufferHeight / maxSegmentZ;
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    let normalizeX = x === maxSegmentX ? x - 1 : x;
                    let normalizeZ = z === maxSegmentZ ? z - 1 : z;
                    const heightMapX = (normalizeX * factorX) | 0;
                    const heightMapZ = (normalizeZ * factorZ) | 0;
                    const pos = (heightMapX + heightMapZ * bufferWidth) * 4;
                    const r = imageBuffer[pos];
                    const g = imageBuffer[pos + 1];
                    const b = imageBuffer[pos + 2];
                    const a = imageBuffer[pos + 3];
                    const coeff = (r + g + b) / 3 / a;
                    const height = coeff * this.maxHeight;
                    this.set(x, z, height);
                }
            }
        }
        smoothZone(zone, np, radius) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            if (np < 0 || np > 1)
                return;
            if (radius < 0)
                return;
            const minX = Math.max(zone.minX, 0);
            const minZ = Math.max(zone.minZ, 0);
            const maxX = Math.min(zone.maxX, this.width);
            const maxZ = Math.min(zone.maxZ, this.depth);
            const cp = 1 - np;
            for (let x = minX; x < maxX; x++) {
                for (let z = minZ; z < maxZ; z++) {
                    const prevHeight = this.get(x, z);
                    let updtHeight;
                    let neighNumber = 0;
                    let neighAverage = 0;
                    for (let rx = -radius; rx <= radius; rx++) {
                        for (let rz = -radius; rz <= radius; rz++) {
                            const innerX = (x + rx);
                            const innerZ = (z + rz);
                            if (innerX < 0 || innerX >= this.width)
                                continue;
                            if (innerZ < 0 || innerZ >= this.depth)
                                continue;
                            const height = (innerX === x && innerZ === z)
                                ? prevHeight
                                : this.get(innerX, innerZ);
                            neighNumber++;
                            neighAverage += height;
                        }
                    }
                    neighAverage /= neighNumber;
                    updtHeight = neighAverage * np + prevHeight * cp;
                    this.set(x, z, updtHeight);
                }
            }
        }
        smooth(np, radius) {
            this.smoothZone(this, np, radius);
        }
        normalize(maxHeight) {
            for (let z = 0; z < this.depth; z++) {
                for (let x = 0; x < this.width; x++) {
                    const currentHeight = this.get(x, z);
                    const normalizeHeight = (currentHeight / this.maxHeight) * maxHeight;
                    this.set(x, z, normalizeHeight);
                }
            }
        }
        combineHeights(type, heightMap, value, zone, heightIfZero = 0, minHeight = null, maxHeight = null) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const lenX = zone.maxX - zone.minX;
            const lenZ = zone.maxZ - zone.minZ;
            if (lenX < 1 || lenZ < 1 || value === 0) {
                return;
            }
            const fixedMinX = Math.max(zone.minX, 0);
            const fixedMinZ = Math.max(zone.minZ, 0);
            const fixedMaxX = Math.min(zone.maxX, this.width);
            const fixedMaxZ = Math.min(zone.maxZ, this.depth);
            const coeffFactorX = (heightMap.width - 1) / lenX;
            const coeffFactorZ = (heightMap.depth - 1) / lenZ;
            for (let z = fixedMinZ; z < fixedMaxZ; z++) {
                for (let x = fixedMinX; x < fixedMaxX; x++) {
                    const x2 = (coeffFactorX * (x - zone.minX)) | 0;
                    const z2 = (coeffFactorZ * (z - zone.minZ)) | 0;
                    const height = heightMap.get(x2, z2);
                    const smoothAppendValue = height * value;
                    const oldHeight = this.get(x, z) || heightIfZero;
                    let candidate = type === '+' ? oldHeight + smoothAppendValue :
                        type === '-' ? oldHeight - smoothAppendValue :
                            type === '*' ? oldHeight * smoothAppendValue :
                                type === '/' ? oldHeight / smoothAppendValue :
                                    oldHeight;
                    if (minHeight !== null && candidate < minHeight) {
                        candidate = minHeight;
                    }
                    if (maxHeight !== null && candidate > maxHeight) {
                        candidate = maxHeight;
                    }
                    this.set(x, z, candidate);
                }
            }
        }
    }
    exports.AbsHeightMap = AbsHeightMap;
    exports.default = AbsHeightMap;
});
define("src/Core/HeightMap", ["require", "exports", "src/Core/AbsHeightMap"], function (require, exports, AbsHeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.HeightMap = exports.defaultHeightVertexSize = exports.HeightMapArrType = void 0;
    AbsHeightMap_mjs_1 = __importDefault(AbsHeightMap_mjs_1);
    exports.HeightMapArrType = Float32Array;
    exports.defaultHeightVertexSize = 1;
    class HeightMap extends AbsHeightMap_mjs_1.default {
        get size() { return this._width * this._depth; }
        get width() { return this._width; }
        get depth() { return this._depth; }
        get data() { return this._data; }
        get itemSize() { return this._itemSize; }
        get itemHeightIndexOffset() { return this._itemHeightIndexOffset; }
        get maxHeight() { return this._maxHeight; }
        constructor(width, depth, maxHeight, buffer, itemSize = exports.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            super();
            this._width = 0;
            this._depth = 0;
            this._maxHeight = 0;
            this._init(width, depth, maxHeight, buffer, itemSize, itemHeightIndexOffset);
        }
        _init(width, depth, maxHeight, buffer, itemSize = exports.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            this._width = width;
            this._depth = depth;
            this._maxHeight = maxHeight;
            if (buffer) {
                if (itemSize < itemHeightIndexOffset) {
                    throw new Error("ItemSize can't less or eq ItemHeightIndexOffset");
                }
                if (buffer.length < (width * depth) * itemSize) {
                    throw new Error("Buffer has invalid length");
                }
                this._data = buffer;
                this._itemSize = itemSize;
                this._itemHeightIndexOffset = itemHeightIndexOffset;
            }
            else {
                // TODO: type checker
                this._data = new exports.HeightMapArrType(width * depth * exports.defaultHeightVertexSize);
                this._itemSize = exports.defaultHeightVertexSize;
                this._itemHeightIndexOffset = 0;
            }
        }
        _encodeHeight(store, index, value, max) {
            store[index] = Math.max(Math.min(value, max), 0);
        }
        _decodeHeight(store, index, max) {
            return store[index];
        }
        _decodeHeightFactor(store, index, max) {
            return store[index] / max;
        }
        _encodeAndSet(store, index, value, max) {
            this._encodeHeight(store, index, value, max);
            return this._decodeHeight(store, index, max);
        }
        getIndex(x, z) {
            return (z * this._width + x) * this._itemSize + this._itemHeightIndexOffset;
        }
        getFactor(x, z) {
            const index = this.getIndex(x, z);
            return this._decodeHeightFactor(this._data, index, this._maxHeight);
        }
        get(x, z) {
            const index = this.getIndex(x, z);
            return this._decodeHeight(this._data, index, this._maxHeight);
        }
        set(x, z, value) {
            const index = this.getIndex(x, z);
            return this._encodeAndSet(this._data, index, value, this._maxHeight);
        }
        setMaxHeight(maxHeight) {
            this._maxHeight = maxHeight;
        }
        append(x, z, value) {
            const index = this.getIndex(x, z);
            const oldValue = this._decodeHeight(this._data, index, this._maxHeight);
            const canValue = oldValue + value;
            return this._encodeAndSet(this._data, index, canValue, this._maxHeight);
        }
        multiply(x, z, value, heightIfZero = 0) {
            const index = this.getIndex(x, z);
            const oldValue = this._decodeHeight(this._data, index, this._maxHeight) || heightIfZero;
            const canValue = oldValue * value;
            return this._encodeAndSet(this._data, index, canValue, this._maxHeight);
        }
    }
    exports.HeightMap = HeightMap;
    exports.default = HeightMap;
});
define("src/Core/AbsShatteredHeightMap", ["require", "exports", "src/Core/HeightMap"], function (require, exports, HeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsShatteredHeightMap = exports.minMaxGlobalSize = exports.minMaxStackSize = void 0;
    HeightMap_mjs_1 = __importStar(HeightMap_mjs_1);
    exports.minMaxStackSize = 2;
    exports.minMaxGlobalSize = 2 * exports.minMaxStackSize;
    class AbsShatteredHeightMap extends HeightMap_mjs_1.default {
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        constructor(width, depth, patchSize, maxHeight, buffer, itemSize = HeightMap_mjs_1.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            super(width, depth, maxHeight, buffer /** TS huck */, itemSize, itemHeightIndexOffset);
            this._setPatchSize(patchSize);
            this._clearMinMax();
        }
        _setPatchSize(patchSize) {
            // We can use shared buffer for calculation in multi threads
            this._patchSize = patchSize;
            this._numPatchesX = ((this.width - 1) / (this._patchSize - 1)) | 0;
            this._numPatchesZ = ((this.depth - 1) / (this._patchSize - 1)) | 0;
            this._patchesSegmentSize = this._numPatchesX * this._numPatchesZ * exports.minMaxStackSize;
            this._minMaxPatchesCoords = new Array(exports.minMaxGlobalSize + this._patchesSegmentSize * 2);
            // Alloc memory for performance values
            this._performMinPatchesValue = new Array(this._numPatchesX * this._numPatchesZ);
            this._performMaxPatchesValue = new Array(this._numPatchesX * this._numPatchesZ);
        }
        _clearMinMax() {
            this._minMaxPatchesCoords.fill(0);
            this._performMinPatchesValue.fill(0);
            this._performMaxPatchesValue.fill(0);
        }
        _recalculatePerformanceValuesByMaxHeight(oldMaxHeight, newMaxHeight) {
            const factor = oldMaxHeight / newMaxHeight;
            const count = this._performMinPatchesValue.length;
            for (let i = 0; i < count; i++) {
                this._performMinPatchesValue[i] *= factor;
                this._performMaxPatchesValue[i] *= factor;
            }
        }
        setMaxHeight(maxHeight) {
            const oldMaxHeight = this.maxHeight;
            super.setMaxHeight(maxHeight);
            this._recalculatePerformanceValuesByMaxHeight(oldMaxHeight, maxHeight);
        }
        getPerformPatchMin(patchBaseX, patchBaseZ) {
            return this._performMinPatchesValue[patchBaseZ * this._numPatchesX + patchBaseX];
        }
        getPerformPatchMax(patchBaseX, patchBaseZ) {
            return this._performMaxPatchesValue[patchBaseZ * this._numPatchesX + patchBaseX];
        }
        getEntriesPatchMin(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMin(patchX, patchZ);
        }
        getEntriesPatchMax(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMax(patchX, patchZ);
        }
        getEntriesPatchMinFactor(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMinFactor(patchX, patchZ);
        }
        getEntriesPatchMaxFactor(x, z) {
            const patchX = x / this._patchSize | 0;
            const patchZ = z / this._patchSize | 0;
            return this.getPatchMaxFactor(patchX, patchZ);
        }
        getMin() {
            return this.get(this._minMaxPatchesCoords[0], this._minMaxPatchesCoords[1]);
        }
        getMax() {
            return this.get(this._minMaxPatchesCoords[2], this._minMaxPatchesCoords[3]);
        }
        getMinFactor() {
            return this.getFactor(this._minMaxPatchesCoords[0], this._minMaxPatchesCoords[1]);
        }
        getMaxFactor() {
            return this.getFactor(this._minMaxPatchesCoords[2], this._minMaxPatchesCoords[3]);
        }
        getPatchMin(patchBaseX, patchBaseZ) {
            const index = exports.minMaxGlobalSize + (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize;
            return this.get(this._minMaxPatchesCoords[index], this._minMaxPatchesCoords[index + 1]);
        }
        getPatchMax(patchBaseX, patchBaseZ) {
            const index = exports.minMaxGlobalSize + (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize + this._patchesSegmentSize;
            return this.get(this._minMaxPatchesCoords[index], this._minMaxPatchesCoords[index + 1]);
        }
        getPatchMinFactor(patchBaseX, patchBaseZ) {
            const index = exports.minMaxGlobalSize + (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize;
            return this.getFactor(this._minMaxPatchesCoords[index], this._minMaxPatchesCoords[index + 1]);
        }
        getPatchMaxFactor(patchBaseX, patchBaseZ) {
            const index = exports.minMaxGlobalSize + (patchBaseZ * this._numPatchesX + patchBaseX) * exports.minMaxStackSize + this._patchesSegmentSize;
            return this.getFactor(this._minMaxPatchesCoords[index], this._minMaxPatchesCoords[index + 1]);
        }
        recalculateAABB() {
            this._minMaxPatchesCoords[0] = 0;
            this._minMaxPatchesCoords[1] = 0;
            this._minMaxPatchesCoords[2] = 0;
            this._minMaxPatchesCoords[3] = 0;
            let minValue = Number.MAX_SAFE_INTEGER;
            let maxValue = Number.MIN_SAFE_INTEGER;
            for (let patchZ = 0; patchZ < this._numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this._numPatchesX; patchX++) {
                    const patchIdx = patchZ * this._numPatchesX + patchX;
                    const minIndex = exports.minMaxGlobalSize + patchIdx * exports.minMaxStackSize;
                    const maxIndex = minIndex + this._patchesSegmentSize;
                    const patchMinValue = this.get(this._minMaxPatchesCoords[minIndex], this._minMaxPatchesCoords[minIndex + 1]);
                    const patchMaxValue = this.get(this._minMaxPatchesCoords[maxIndex], this._minMaxPatchesCoords[maxIndex + 1]);
                    // update performace values
                    this._performMinPatchesValue[patchIdx] = patchMinValue;
                    this._performMaxPatchesValue[patchIdx] = patchMaxValue;
                    if (minValue > patchMinValue) {
                        minValue = patchMinValue;
                        this._minMaxPatchesCoords[0] = this._minMaxPatchesCoords[minIndex];
                        this._minMaxPatchesCoords[1] = this._minMaxPatchesCoords[minIndex + 1];
                    }
                    if (maxValue < patchMaxValue) {
                        maxValue = patchMaxValue;
                        this._minMaxPatchesCoords[2] = this._minMaxPatchesCoords[maxIndex];
                        this._minMaxPatchesCoords[3] = this._minMaxPatchesCoords[maxIndex + 1];
                    }
                }
            }
        }
        recalculateMinMax(zone) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const fixedMinX = Math.max(zone.minX, 0);
            const fixedMinZ = Math.max(zone.minZ, 0);
            const fixedMaxX = Math.min(zone.maxX, this.width);
            const fixedMaxZ = Math.min(zone.maxZ, this.depth);
            let globalMinV = Number.MAX_SAFE_INTEGER;
            let globalMaxV = Number.MIN_SAFE_INTEGER;
            let globalMinX = 0;
            let globalMinZ = 0;
            let globalMaxX = 0;
            let globalMaxZ = 0;
            for (let z = fixedMinZ; z < fixedMaxZ; z += this._patchSize) {
                for (let x = fixedMinX; x < fixedMaxX; x += this._patchSize) {
                    const patchX = x / this._patchSize | 0;
                    const patchZ = z / this._patchSize | 0;
                    const patchI = patchZ * this._numPatchesX + patchX;
                    const minIdx = exports.minMaxGlobalSize + patchI * exports.minMaxStackSize;
                    const maxIdx = minIdx + this._patchesSegmentSize;
                    const firstPatchX = patchX * (this._patchSize - 1);
                    const firstPatchZ = patchZ * (this._patchSize - 1);
                    const lastPatchX = firstPatchX + this._patchSize;
                    const lastPatchZ = firstPatchZ + this._patchSize;
                    let minV = Number.MAX_SAFE_INTEGER;
                    let maxV = Number.MIN_SAFE_INTEGER;
                    let minX = firstPatchX;
                    let minZ = firstPatchZ;
                    let maxX = firstPatchX;
                    let maxZ = firstPatchZ;
                    for (let innerZ = firstPatchZ; innerZ < lastPatchZ; innerZ++) {
                        for (let innerX = firstPatchX; innerX < lastPatchX; innerX++) {
                            const value = this.get(innerX, innerZ);
                            if (minV > value) {
                                minV = value;
                                minX = innerX;
                                minZ = innerZ;
                            }
                            if (maxV < value) {
                                maxV = value;
                                maxX = innerX;
                                maxZ = innerZ;
                            }
                        }
                    }
                    if (globalMinV > minV) {
                        globalMinV = minV;
                        globalMinX = minX;
                        globalMinZ = minZ;
                    }
                    if (globalMaxV < maxV) {
                        globalMaxV = maxV;
                        globalMaxX = maxX;
                        globalMaxZ = maxZ;
                    }
                    this._minMaxPatchesCoords[minIdx] = minX;
                    this._minMaxPatchesCoords[minIdx + 1] = minZ;
                    this._minMaxPatchesCoords[maxIdx] = maxX;
                    this._minMaxPatchesCoords[maxIdx + 1] = maxZ;
                    // Update performance values
                    this._performMinPatchesValue[patchI] = minV;
                    this._performMaxPatchesValue[patchI] = maxV;
                }
            }
            if (this.getMin() > globalMinV) {
                this._minMaxPatchesCoords[0] = globalMinX;
                this._minMaxPatchesCoords[1] = globalMinZ;
            }
            if (this.getMax() < globalMaxV) {
                this._minMaxPatchesCoords[2] = globalMaxX;
                this._minMaxPatchesCoords[3] = globalMaxZ;
            }
        }
    }
    exports.AbsShatteredHeightMap = AbsShatteredHeightMap;
});
define("src/Core/AbsChunkedHeightMap", ["require", "exports", "src/Core/HeightMap", "src/Core/AbsShatteredHeightMap"], function (require, exports, HeightMap_mjs_2, AbsShatteredHeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AbsChunkedHeightMap = exports.minMaxStackSize = void 0;
    exports.getOrThrowDataChunkSize = getOrThrowDataChunkSize;
    exports.minMaxStackSize = 2;
    function getOrThrowDataChunkSize(patchSize, dataChunkSize) {
        if ((dataChunkSize - 1) % (patchSize - 1) !== 0) {
            const recommendedWidth = ((dataChunkSize - 1 + patchSize - 1) / (dataChunkSize - 1)) * (patchSize - 1) + 1;
            console.error("DataChunkSize minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", dataChunkSize, patchSize);
            console.error("Try using DataChunkSize = %d\n", recommendedWidth);
            throw new Error();
        }
        return dataChunkSize;
    }
    class AbsChunkedHeightMap extends AbsShatteredHeightMap_mjs_1.AbsShatteredHeightMap {
        get dataChunkSize() { return this._dataChunkSize; }
        get dataNumChunksX() { return this._dataNumChunksX; }
        get dataNumChunksZ() { return this._dataNumChunksZ; }
        get dataChunkSizeFactor() { return this._dataChunkSizeFactor; }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, buffer, itemSize = HeightMap_mjs_2.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            super(width, depth, patchSize, maxHeight, buffer /** TS huck */, itemSize, itemHeightIndexOffset);
            this._setDataChunkSize(dataChunkSize);
        }
        _setDataChunkSize(value) {
            this._dataChunkSize = getOrThrowDataChunkSize(this._patchSize, value);
            this._dataChunkSizeP2 = Math.pow(this.dataChunkSize, 2);
            this._dataNumChunksX = ((this.width - 1) / (this._dataChunkSize - 1)) | 0;
            this._dataNumChunksZ = ((this.depth - 1) / (this._dataChunkSize - 1)) | 0;
            this._dataChunkSizeFactor = this._patchSize === this._dataChunkSize
                ? 1.0
                : this._patchSize / (this._dataChunkSize + this._patchSize - (this._dataChunkSize % this._patchSize));
        }
        getIndex(x, z) {
            const localX = x % this._dataChunkSize;
            const localZ = z % this._dataChunkSize;
            const chunkX = x / this._dataChunkSize | 0;
            const chunkZ = z / this._dataChunkSize | 0;
            const chunkOffset = (chunkZ * this._dataNumChunksX + chunkX) * this._dataChunkSizeP2;
            const localIndex = (localZ * this._dataChunkSize + localX);
            return chunkOffset + localIndex;
        }
        getChunkIndex(chunkX, chunkZ) {
            return chunkZ * this._dataNumChunksX + chunkX;
        }
        getChunkBuffer(type, chunkX, chunkZ) {
            const chunkIndex = this.getChunkIndex(chunkX, chunkZ);
            const chunkOffset = this._dataChunkSizeP2 * chunkIndex * this.data.BYTES_PER_ELEMENT;
            const count = this._dataChunkSizeP2 * (this.data.BYTES_PER_ELEMENT / type.BYTES_PER_ELEMENT);
            return new type(this.data.buffer, this.data.byteOffset + chunkOffset, count);
        }
        getChunksBuffers(type) {
            const result = new Array(this._dataNumChunksX * this._dataNumChunksZ);
            for (let chunkZ = 0; chunkZ < this._dataNumChunksZ; chunkZ++) {
                for (let chunkX = 0; chunkX < this._dataNumChunksX; chunkX++) {
                    const index = this.getChunkIndex(chunkX, chunkZ);
                    result[index] = this.getChunkBuffer(type, chunkX, chunkZ);
                }
            }
            return result;
        }
    }
    exports.AbsChunkedHeightMap = AbsChunkedHeightMap;
    exports.default = AbsChunkedHeightMap;
});
define("src/Core/PatchedHeightMap", ["require", "exports", "src/Core/AbsChunkedHeightMap", "src/Core/HeightMap"], function (require, exports, AbsChunkedHeightMap_mjs_1, HeightMap_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchedHeightMap = void 0;
    AbsChunkedHeightMap_mjs_1 = __importStar(AbsChunkedHeightMap_mjs_1);
    // We store the raw height only for float32; for other types, we store a factor in memory.
    class PatchedHeightMap extends AbsChunkedHeightMap_mjs_1.default {
        get netMaxHeight() { return this._netMaxHeight; }
        get valueType() { return this._valueType; }
        static createBuffer(width, depth, chunkSize, valueType) {
            const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
            const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
            const chunkArrSize = Math.pow(chunkSize, 2);
            const chunkCount = numChunksX * numChunksZ;
            return (valueType === "32f" ? new Float32Array(chunkArrSize * chunkCount) :
                valueType === "16u" ? new Uint16Array(chunkArrSize * chunkCount) :
                    valueType === "8u" ? new Uint8Array(chunkArrSize * chunkCount) :
                        new Float32Array(chunkArrSize * chunkCount));
        }
        constructor(width, depth, patchSize, dataChunkSize, maxHeight, valueType, buffer, itemSize = HeightMap_mjs_3.defaultHeightVertexSize, itemHeightIndexOffset = 0) {
            const validDataChunkSize = (0, AbsChunkedHeightMap_mjs_1.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
            const tmpBuffer = buffer !== null && buffer !== void 0 ? buffer : PatchedHeightMap.createBuffer(width, depth, validDataChunkSize, valueType);
            super(width, depth, patchSize, dataChunkSize, maxHeight, tmpBuffer, itemSize, itemHeightIndexOffset);
            this._netMaxHeight = null;
            this._valueType = valueType;
            this._maxSafeFactor =
                valueType === "32f" ? 1.0 :
                    valueType === "16u" ? 0xffff :
                        valueType === "8u" ? 0xff :
                            1.0;
            this._recalculateDecoderValue();
        }
        setMaxHeight(maxHeight) {
            // Save last net max height
            if (this._valueType === '32f' &&
                this._netMaxHeight === null) {
                this._netMaxHeight = this.maxHeight;
            }
            // Save prev value
            super.setMaxHeight(maxHeight);
            this._recalculateDecoderValue();
        }
        _recalculateDecoderValue() {
            this._heightDecoderValue = this.maxHeight / this._maxSafeFactor;
        }
        updateValuesByMaxHeight() {
            // No dirty data
            if (this._netMaxHeight === null ||
                this._valueType !== '32f') {
                return false;
            }
            const data = this.data;
            const len = this.data.length;
            const max = this.maxHeight;
            for (let i = 0; i < len; i++) {
                // Normalize for new max
                data[i] = data[i] / this._netMaxHeight * max;
            }
            this._netMaxHeight === null;
            return true;
        }
        _encodeHeight(store, index, value, max) {
            const normalize = Math.max(Math.min(value, max), 0);
            if (this._valueType === '32f') {
                // Is not dirty max height ?
                if (this._netMaxHeight === null) {
                    store[index] = normalize;
                }
                else {
                    // convert to net
                    store[index] = normalize / max * this._netMaxHeight;
                }
            }
            else {
                // save factor for not float32 value type
                const factor = normalize / max;
                store[index] = Math.min(factor * this._maxSafeFactor, this._maxSafeFactor);
            }
        }
        _decodeHeight(store, index, max) {
            if (this._valueType === '32f') {
                if (this._netMaxHeight === null) {
                    return store[index];
                }
                // Normalize for dirty max height
                return store[index] / this._netMaxHeight * max;
            }
            return store[index] * this._heightDecoderValue;
        }
        _decodeHeightFactor(store, index, max) {
            if (this._valueType === '32f') {
                if (this._netMaxHeight === null) {
                    return store[index] / max;
                }
                return store[index] / this._netMaxHeight;
            }
            return store[index] / this._maxSafeFactor;
        }
    }
    exports.PatchedHeightMap = PatchedHeightMap;
    exports.default = PatchedHeightMap;
});
define("src/AmmoIntegration/AmmoIntegration", ["require", "exports", "src/Core/AbsChunkedHeightMap"], function (require, exports, AbsChunkedHeightMap_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getBuffer = getBuffer;
    function getBuffer(width, depth, patchSize, dataChunkSize, valueType) {
        if (typeof Ammo === 'undefined') {
            throw new Error("Ammo not exists");
        }
        const chunkSize = (0, AbsChunkedHeightMap_mjs_2.getOrThrowDataChunkSize)(patchSize, dataChunkSize);
        const numChunksX = ((width - 1) / (chunkSize - 1)) | 0;
        const numChunksZ = ((depth - 1) / (chunkSize - 1)) | 0;
        const chunkArrSize = Math.pow(chunkSize, 2);
        const chunkCount = numChunksX * numChunksZ;
        const bsz = valueType === "32f" ? 4 :
            valueType === "16u" ? 2 :
                valueType === "8u" ? 1 : 0;
        const len = chunkArrSize * chunkCount;
        const ptr = Ammo._malloc(bsz * len);
        switch (valueType) {
            case "32f": return new Float32Array(Ammo.HEAPF32.buffer, ptr, len);
            case "16u": return new Uint16Array(Ammo.HEAPU16.buffer, ptr, len);
            case "8u": return new Uint8Array(Ammo.HEAPU8.buffer, ptr, len);
            default: throw new Error("Unsupported value type");
        }
    }
});
define("src/Core/CoordsBuffer", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CoordsBuffer = exports.coordsVertexSize = void 0;
    exports.coordsVertexSize = 2;
    class CoordsBuffer {
        get patchVertexBufferLength() { return this._length; }
        get patchVertexBufferData() { return this._data; }
        get patchVertexBufferTyped() { return this._dataTyped; }
        get width() { return this._width; }
        get depth() { return this._depth; }
        get patchSize() { return this._patchSize; }
        constructor(heightMap, patchSize) {
            this.heightMap = heightMap;
            this._patchSize = patchSize;
            this._width = heightMap.width;
            this._depth = heightMap.depth;
            this._length = this._patchSize * this._patchSize;
            const coordsArrLength = this._length * exports.coordsVertexSize;
            const coordsByteLength = coordsArrLength * Uint16Array.BYTES_PER_ELEMENT;
            this._data = new ArrayBuffer(coordsByteLength);
            this._dataTyped = new Uint16Array(this._data, 0, coordsArrLength);
        }
        init() {
            let index = 0;
            for (let z = 0; z < this._patchSize; z++) {
                for (let x = 0; x < this._patchSize; x++) {
                    this._dataTyped[index++] = x;
                    this._dataTyped[index++] = z;
                }
            }
        }
        getPosition(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.y = this.heightMap.get(x, z);
            buf.z = z;
            return true;
        }
        getPositionWithHeightByFactor(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.y = this.heightMap.getFactor(x, z);
            buf.z = z;
            return true;
        }
        getCoords(index, buf) {
            const x = index % this._width | 0;
            const z = index / this._width | 0;
            buf.x = x;
            buf.z = z;
            return true;
        }
    }
    exports.CoordsBuffer = CoordsBuffer;
    exports.default = CoordsBuffer;
});
define("src/Core/LodInfo", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.LodInfo = exports.BOTTOM = exports.TOP = exports.RIGHT = exports.LEFT = void 0;
    exports.initInfo = initInfo;
    exports.LEFT = 2;
    exports.RIGHT = 2;
    exports.TOP = 2;
    exports.BOTTOM = 2;
    function initInfo() {
        const arr = new Array(exports.LEFT);
        for (let l = 0; l < exports.LEFT; l++) {
            arr[l] = new Array(exports.RIGHT);
            for (let r = 0; r < exports.RIGHT; r++) {
                arr[l][r] = new Array(exports.TOP);
                for (let t = 0; t < exports.TOP; t++) {
                    arr[l][r][t] = new Array(exports.BOTTOM);
                    for (let b = 0; b < exports.BOTTOM; b++) {
                        arr[l][r][t][b] = {
                            start: 0,
                            count: 0
                        };
                    }
                }
            }
        }
        return arr;
    }
    class LodInfo {
        constructor() {
            this.info = initInfo();
        }
        clear() {
            for (let l = 0; l < exports.LEFT; l++) {
                for (let r = 0; r < exports.RIGHT; r++) {
                    for (let t = 0; t < exports.TOP; t++) {
                        for (let b = 0; b < exports.BOTTOM; b++) {
                            const single = this.info[l][r][t][b];
                            single.start = 0;
                            single.count = 0;
                        }
                    }
                }
            }
        }
    }
    exports.LodInfo = LodInfo;
    exports.default = LodInfo;
});
define("src/Core/IPatchLod", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Core/LodEstimator", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getLodId = getLodId;
    exports.getLodInfoId = getLodInfoId;
    exports.decodeLodId = decodeLodId;
    function getLodId(c, l, r, t, b) {
        const lodCore = c + 1;
        const lodBinaryValue = (l << 3) | (r << 2) | (t << 1) | b;
        return lodCore * 16 - lodBinaryValue;
    }
    function getLodInfoId(lod) {
        return getLodId(lod.core, lod.left, lod.right, lod.top, lod.bottom);
    }
    function decodeLodId(id) {
        const cAdjusted = Math.floor(id / 16);
        const binaryPart = id % 16;
        const left = (binaryPart >> 3) & 1;
        const right = (binaryPart >> 2) & 1;
        const top = (binaryPart >> 1) & 1;
        const bottom = binaryPart & 1;
        const core = cAdjusted - 1;
        return { core, left, right, top, bottom };
    }
    class LodEstimator {
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        get count() { return this._lodCount; }
        get max() { return this._lodCount - 1; }
        constructor(patchSize, numPatchesX, numPatchesZ) {
            this.setParams(patchSize, numPatchesX, numPatchesZ);
        }
        setParams(patchSize, numPatchesX, numPatchesZ) {
            this._patchSize = patchSize;
            this._numPatchesX = numPatchesX;
            this._numPatchesZ = numPatchesZ;
            this._calcMaxLOD();
        }
        _calcMaxLOD() {
            const numSegments = this._patchSize - 1;
            const numSegmentsLog2 = Math.log2(numSegments);
            const numSegmentsLog2Ceil = Math.ceil(numSegmentsLog2);
            const numSegmentsLog2Floor = Math.floor(numSegmentsLog2);
            if (numSegmentsLog2Ceil !== numSegmentsLog2Floor) {
                throw new Error("The number of vertices in the patch minus one must be a power of two\n");
            }
            this._lodCount = numSegmentsLog2Floor;
        }
    }
    exports.default = LodEstimator;
});
define("src/Core/GridBuilder", ["require", "exports", "src/Core/LodInfo", "src/Core/LodEstimator"], function (require, exports, LodInfo_mjs_1, LodEstimator_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GridBuilder = void 0;
    LodEstimator_mjs_1 = __importDefault(LodEstimator_mjs_1);
    class GridBuilder {
        get width() { return this._width; }
        get depth() { return this._depth; }
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        get maxLOD() { return this.lodEstimator.max; }
        get lodCount() { return this.lodEstimator.count; }
        get patchIndices() { return this._indices; }
        get lodEstimator() { return this._lodEstimator; }
        get lodInfo() { return this._lodInfo; }
        constructor(grid) {
            this._width = grid.width;
            this._depth = grid.depth;
            this._patchSize = grid.patchSize;
            this._numPatchesX = ((this._width - 1) / (this._patchSize - 1)) | 0;
            this._numPatchesZ = ((this._depth - 1) / (this._patchSize - 1)) | 0;
            if (this._width >= 0xffff) {
                console.error("Max width = %d\n", 0xffff - 1);
                throw new Error();
            }
            if (this._depth >= 0xffff) {
                console.error("Max depth = %d\n", 0xffff - 1);
                throw new Error();
            }
            if ((this._width - 1) % (this._patchSize - 1) !== 0) {
                const recommendedWidth = ((this._width - 1 + this._patchSize - 1) / (this._patchSize - 1)) * (this._patchSize - 1) + 1;
                console.error("Width minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", this._width, this._patchSize);
                console.error("Try using Width = %d\n", recommendedWidth);
                throw new Error();
            }
            if ((this._depth - 1) % (this._patchSize - 1) !== 0) {
                const recommendedDepth = ((this._depth - 1 + this._patchSize - 1) / (this._patchSize - 1)) * (this._patchSize - 1) + 1;
                console.error("Depth minus 1 (%d) must be divisible by patchSize minus 1 (%d)\n", this._depth, this._patchSize);
                console.error("Try using Width = %d\n", recommendedDepth);
                throw new Error();
            }
            if (this._patchSize < 3) {
                console.error("The minimum patch size is 3 (%d)\n", this._patchSize);
                throw new Error();
            }
            if (this._patchSize % 2 === 0) {
                console.error("Patch size must be an odd number (%d)\n", this._patchSize);
                throw new Error();
            }
            this._buildLodsAndIndices();
        }
        _buildLodsAndIndices() {
            this._lodEstimator = new LodEstimator_mjs_1.default(this._patchSize, this._numPatchesX, this._numPatchesZ);
            this._lodInfo = new Array(this._lodEstimator.count);
            for (let i = 0; i < this._lodInfo.length; i++) {
                this._lodInfo[i] = new LodInfo_mjs_1.LodInfo();
            }
            let numIndices = this._calcNumIndices();
            this._indices = new Uint32Array(numIndices);
            numIndices = this._initIndices(this._indices);
            //console.log("Final number of indices %d\n", numIndices);
        }
        _calcNumIndices() {
            let numQuads = Math.pow((this.patchSize - 1), 2);
            let numIndices = 0;
            const maxPermutationsPerLevel = 16; // true/false for each of the four sides
            const indicesPerQuad = 6; // two triangles
            for (let lod = 0; lod < this.lodCount; lod++) {
                //console.log("LOD %d: num quads %d\n", lod, numQuads);
                numIndices += numQuads * indicesPerQuad * maxPermutationsPerLevel;
                numQuads /= 4;
            }
            //console.log("Initial number of indices %d\n", numIndices);
            return numIndices;
        }
        _initIndices(indices) {
            let index = 0;
            for (let lod = 0; lod < this.lodCount; lod++) {
                //console.log("*** Init indices lod %d ***\n", lod);
                index = this._initIndicesLOD(index, indices, lod);
            }
            return index;
        }
        _initIndicesLOD(index, indices, lod) {
            let totalIndicesForLOD = 0;
            for (let l = 0; l < LodInfo_mjs_1.LEFT; l++) {
                for (let r = 0; r < LodInfo_mjs_1.RIGHT; r++) {
                    for (let t = 0; t < LodInfo_mjs_1.TOP; t++) {
                        for (let b = 0; b < LodInfo_mjs_1.BOTTOM; b++) {
                            const info = this._lodInfo[lod].info[l][r][t][b];
                            const start = index;
                            index = this._initIndicesLODSingle(index, indices, lod, lod + l, lod + r, lod + t, lod + b);
                            info.start = start;
                            info.count = index - start;
                            totalIndicesForLOD += info.count;
                        }
                    }
                }
            }
            //console.log("Total indices for LOD: %d\n", totalIndicesForLOD);
            return index;
        }
        _initIndicesLODSingle(index, indices, lodCore, lodLeft, lodRight, lodTop, lodBottom) {
            const width = this.patchSize;
            const fanStep = Math.pow(2, lodCore + 1); // lod = 0 --> 2, lod = 1 --> 4, lod = 2 --> 8, etc
            const endPos = this.patchSize - 1 - fanStep; // patch size 5, fan step 2 --> EndPos = 2; patch size 9, fan step 2 --> EndPos = 6
            for (let z = 0; z <= endPos; z += fanStep) {
                for (let x = 0; x <= endPos; x += fanStep) {
                    const lLeft = x == 0 ? lodLeft : lodCore;
                    const lRight = x == endPos ? lodRight : lodCore;
                    const lBottom = z == 0 ? lodBottom : lodCore;
                    const lTop = z == endPos ? lodTop : lodCore;
                    index = this._createTriangleFan(index, indices, lodCore, lLeft, lRight, lTop, lBottom, x, z, width);
                }
            }
            return index;
        }
        _createTriangleFan(index, indices, lodCore, lodLeft, lodRight, lodTop, lodBottom, x, z, width) {
            const stepLeft = Math.pow(2, lodLeft); // because LOD starts at zero...
            const stepRight = Math.pow(2, lodRight);
            const stepTop = Math.pow(2, lodTop);
            const stepBottom = Math.pow(2, lodBottom);
            const stepCenter = Math.pow(2, lodCore);
            const indexCenter = (z + stepCenter) * width + x + stepCenter;
            // first up
            let indexTemp1 = z * width + x;
            let indexTemp2 = (z + stepLeft) * width + x;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second up
            if (lodLeft == lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 += stepLeft * width;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first right
            indexTemp1 = indexTemp2;
            indexTemp2 += stepTop;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second right
            if (lodTop === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 += stepTop;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first down
            indexTemp1 = indexTemp2;
            indexTemp2 -= stepRight * width;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second down
            if (lodRight === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 -= stepRight * width;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            // first left
            indexTemp1 = indexTemp2;
            indexTemp2 -= stepBottom;
            index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            // second left
            if (lodBottom === lodCore) {
                indexTemp1 = indexTemp2;
                indexTemp2 -= stepBottom;
                index = this._addTriangle(index, indices, indexCenter, indexTemp1, indexTemp2);
            }
            return index;
        }
        _addTriangle(index, indices, v1, v2, v3) {
            indices[index++] = v1;
            indices[index++] = v2;
            indices[index++] = v3;
            return index;
        }
    }
    exports.GridBuilder = GridBuilder;
    exports.default = GridBuilder;
});
define("src/Core/Heightfield", ["require", "exports", "src/Core/CoordsBuffer", "src/Core/GridBuilder"], function (require, exports, CoordsBuffer_mjs_1, GridBuilder_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    CoordsBuffer_mjs_1 = __importDefault(CoordsBuffer_mjs_1);
    GridBuilder_mjs_1 = __importDefault(GridBuilder_mjs_1);
    class Heightfield extends GridBuilder_mjs_1.default {
        get patchVertices() { return this._vertices; }
        get heightMap() { return this._heightMap; }
        get maxHeight() { return this.heightMap.maxHeight; }
        constructor(heightMap) {
            super(heightMap);
            this._heightMap = heightMap;
            this._vertices = new CoordsBuffer_mjs_1.default(this._heightMap, this._heightMap.patchSize);
            this._vertices.init();
        }
        setHeight(x, z, value) {
            this._heightMap.set(x, z, value);
        }
        appendToHeight(x, z, value) {
            this._heightMap.append(x, z, value);
        }
        multiplyToHeight(x, z, value, defaultHeight = 0) {
            this._heightMap.multiply(x, z, value, defaultHeight);
        }
        smoothHeightsZone(zone, np, radius) {
            this._heightMap.smoothZone(zone, np, radius);
        }
        loadHeightMapFromFile(buffer_1, options_1) {
            return __awaiter(this, arguments, void 0, function* (buffer, options, np = -1, radius = 0) {
                const header = yield this._heightMap.fromFile(buffer, options);
                this._heightMap.smooth(np, radius);
                this._heightMap.recalculateMinMax(this._heightMap);
                this._heightMap.recalculateAABB();
                return header;
            });
        }
        loadHeightMapFromImg(img, np = -1, radius = 0) {
            this._heightMap.fromImage(img);
            this._heightMap.smooth(np, radius);
            this._heightMap.recalculateMinMax(this._heightMap);
            this._heightMap.recalculateAABB();
        }
        normalizeHeightMap(maxHeight) {
            maxHeight !== null && maxHeight !== void 0 ? maxHeight : (maxHeight = this._heightMap.maxHeight);
            this._heightMap.normalize(maxHeight);
        }
        setMaxHeight(maxHeight) {
            this._heightMap.setMaxHeight(maxHeight);
        }
        appendHeightMap(heightMap, value, zone, minHeight = null, maxHeight = null) {
            this._heightMap.combineHeights('+', heightMap, value, zone, 0, minHeight, maxHeight);
        }
        recalculateMinMax(zone, aabb = true) {
            this._heightMap.recalculateMinMax(zone);
            if (aabb) {
                this._heightMap.recalculateAABB();
            }
        }
    }
    exports.default = Heightfield;
});
// Our system is divided into a general part and an engine part,
// for optimization we use the engine part in this file. (playcanvas Vec3)
define("src/Core/HeightfieldRaycastResult", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class HeightfieldRaycastResult {
        constructor() {
            this.vertexIndex = 0;
            this.distance = Number.MAX_VALUE;
            this.localNormal = new pc.Vec3(0, 1, 0);
            this.normal = new pc.Vec3(0, 1, 0);
            this.localPoint = new pc.Vec3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            this.point = new pc.Vec3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
        }
        clear() {
            this.vertexIndex = 0;
            this.distance = Number.MAX_VALUE;
            this.localNormal.set(0, 1, 0);
            this.normal.set(0, 1, 0);
            this.localPoint.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            this.point.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
        }
    }
    exports.default = HeightfieldRaycastResult;
});
define("src/Core/Triangle", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Triangle = void 0;
    const tmpTriVecA = new pc.Vec3();
    const tmpTriVecB = new pc.Vec3();
    class Triangle extends pc.Tri {
        getNormal(rsh) {
            tmpTriVecA.sub2(this.v1, this.v0);
            tmpTriVecB.sub2(this.v2, this.v0);
            rsh.cross(tmpTriVecA, tmpTriVecB).normalize();
        }
    }
    exports.Triangle = Triangle;
    exports.default = Triangle;
});
define("src/Core/HeightfieldShape", ["require", "exports", "src/Core/HeightfieldRaycastResult", "src/Core/Triangle"], function (require, exports, HeightfieldRaycastResult_mjs_1, Triangle_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.intersectsRayBox = intersectsRayBox;
    HeightfieldRaycastResult_mjs_1 = __importDefault(HeightfieldRaycastResult_mjs_1);
    Triangle_mjs_1 = __importDefault(Triangle_mjs_1);
    const infinite = 9999999;
    const modelTransform = new pc.Mat4();
    const tmpRay = new pc.Ray();
    const tmpRaycastVec = new pc.Vec3();
    const tmpPos1 = new pc.Vec3();
    const tmpPos2 = new pc.Vec3();
    const tmpPos3 = new pc.Vec3();
    const triangle = new Triangle_mjs_1.default();
    const debugTmpVec = new pc.Vec3();
    const debugTransform = new pc.Mat4();
    const debugPositions = new Array(16);
    let debugTransformIsIdentity = true;
    function debugDrawTriangleLines(tri, color = pc.Color.YELLOW) {
        var _a;
        /*
        [
            tri.v0.x, tri.v0.y, tri.v0.z, tri.v1.x, tri.v1.y, tri.v1.z,
            tri.v1.x, tri.v1.y, tri.v1.z, tri.v2.x, tri.v2.y, tri.v2.z,
            tri.v2.x, tri.v2.y, tri.v2.z, tri.v0.x, tri.v0.y, tri.v0.z,
        ], color, false);
        ]
        */
        debugTransform.transformPoint(tri.v0, debugTmpVec);
        debugPositions[0] = debugPositions[15] = debugTmpVec.x;
        debugPositions[1] = debugPositions[16] = debugTmpVec.y;
        debugPositions[2] = debugPositions[17] = debugTmpVec.z;
        debugTransform.transformPoint(tri.v1, debugTmpVec);
        debugPositions[3] = debugPositions[6] = debugTmpVec.x;
        debugPositions[4] = debugPositions[7] = debugTmpVec.y;
        debugPositions[5] = debugPositions[8] = debugTmpVec.z;
        debugTransform.transformPoint(tri.v2, debugTmpVec);
        debugPositions[9] = debugPositions[12] = debugTmpVec.x;
        debugPositions[10] = debugPositions[13] = debugTmpVec.y;
        debugPositions[11] = debugPositions[14] = debugTmpVec.z;
        (_a = pc.app) === null || _a === void 0 ? void 0 : _a.drawLineArrays(debugPositions, color, false);
    }
    function intersectsRayBox(aabb, ray) {
        const rayOrigin = ray.origin;
        const rayDirection = ray.direction;
        const minX = aabb.minX;
        const maxX = aabb.maxX;
        const minY = aabb.minY;
        const maxY = aabb.maxY;
        const minZ = aabb.minZ;
        const maxZ = aabb.maxZ;
        let tmin = (minX - rayOrigin.x) / rayDirection.x;
        let tmax = (maxX - rayOrigin.x) / rayDirection.x;
        if (tmin > tmax) {
            let temp = tmin;
            tmin = tmax;
            tmax = temp;
        }
        let tymin = (minY - rayOrigin.y) / rayDirection.y;
        let tymax = (maxY - rayOrigin.y) / rayDirection.y;
        if (tymin > tymax) {
            let temp = tymin;
            tymin = tymax;
            tymax = temp;
        }
        if ((tmin > tymax) || (tymin > tmax)) {
            return false;
        }
        if (tymin > tmin) {
            tmin = tymin;
        }
        if (tymax < tmax) {
            tmax = tymax;
        }
        let tzmin = (minZ - rayOrigin.z) / rayDirection.z;
        let tzmax = (maxZ - rayOrigin.z) / rayDirection.z;
        if (tzmin > tzmax) {
            let temp = tzmin;
            tzmin = tzmax;
            tzmax = temp;
        }
        if ((tmin > tzmax) || (tzmin > tmax)) {
            return false;
        }
        return true;
    }
    class HeightfieldShape {
        constructor(heightMap) {
            this._heightMap = heightMap;
            this._beginPos = new pc.Vec3();
            this._endPos = new pc.Vec3();
            this.updateBoundingBox();
        }
        updateBoundingBox() {
            const halfWidth = this._heightMap.width / 2;
            const halfDepth = this._heightMap.depth / 2;
            this._boundingBox = {
                minX: -halfWidth,
                minY: 0,
                minZ: -halfDepth,
                maxX: halfWidth,
                maxY: this._heightMap.maxHeight,
                maxZ: halfDepth,
            };
        }
        _triangleIntersectsRay(tri, ray, bestResult) {
            if (tri.intersectsRay(ray, tmpRaycastVec)) {
                const distance = tmpRaycastVec.distance(ray.origin);
                if (bestResult.distance > distance) {
                    bestResult.distance = distance;
                    tri.getNormal(bestResult.localNormal);
                    bestResult.normal.copy(bestResult.localNormal);
                    bestResult.localPoint.copy(tmpRaycastVec);
                    bestResult.point.copy(tmpRaycastVec);
                    debugDrawTriangleLines(tri, pc.Color.RED);
                    const distanceP0 = bestResult.point.distance(tri.v0);
                    const distanceP1 = bestResult.point.distance(tri.v1);
                    const distanceP2 = bestResult.point.distance(tri.v2);
                    if (distanceP0 > distanceP1) {
                        if (distanceP1 > distanceP2) {
                            bestResult.vertexIndex = tri.index2;
                        }
                        else {
                            bestResult.vertexIndex = tri.index1;
                        }
                    }
                    else {
                        if (distanceP0 > distanceP2) {
                            bestResult.vertexIndex = tri.index2;
                        }
                        else {
                            bestResult.vertexIndex = tri.index0;
                        }
                    }
                    return true;
                }
            }
            //debugDrawTriangleLines(tri);
            return false;
        }
        _assignPosition(index, buf) {
            const x = index % this._heightMap.width | 0;
            const z = index / this._heightMap.width | 0;
            buf.x = (-this._heightMap.width / 2) + x;
            buf.y = this._heightMap.get(x, z);
            buf.z = (-this._heightMap.depth / 2) + z;
        }
        _quadAction(rs, ray, result) {
            const x = rs.prevX;
            const z = rs.prevZ;
            if (x < 0 || z < 0 || x >= this._heightMap.width - 1 || z >= this._heightMap.depth - 1) {
                return false;
            }
            const xFan2 = x % 2 === 0;
            const zFan2 = z % 2 === 0;
            let index0, index1, index2;
            {
                if (xFan2 !== zFan2) {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 0) * this._heightMap.width + (x + 1);
                }
                else {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 1);
                    index2 = (z + 0) * this._heightMap.width + (x + 1);
                }
                this._assignPosition(index0, tmpPos1);
                this._assignPosition(index1, tmpPos2);
                this._assignPosition(index2, tmpPos3);
                triangle.index0 = index0;
                triangle.index1 = index1;
                triangle.index2 = index2;
                triangle.set(tmpPos1, tmpPos2, tmpPos3);
            }
            if (this._triangleIntersectsRay(triangle, ray, result)) {
                return true;
            }
            {
                if (xFan2 !== zFan2) {
                    index0 = (z + 0) * this._heightMap.width + (x + 1);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 1) * this._heightMap.width + (x + 1);
                }
                else {
                    index0 = (z + 0) * this._heightMap.width + (x + 0);
                    index1 = (z + 1) * this._heightMap.width + (x + 0);
                    index2 = (z + 1) * this._heightMap.width + (x + 1);
                }
                this._assignPosition(index0, tmpPos1);
                this._assignPosition(index1, tmpPos2);
                this._assignPosition(index2, tmpPos3);
                triangle.index0 = index0;
                triangle.index1 = index1;
                triangle.index2 = index2;
                triangle.set(tmpPos1, tmpPos2, tmpPos3);
            }
            if (this._triangleIntersectsRay(triangle, ray, result)) {
                return true;
            }
            return false;
        }
        _intersectsRay(localRay, result = new HeightfieldRaycastResult_mjs_1.default()) {
            if (!intersectsRayBox(this._boundingBox, localRay)) {
                return false;
            }
            this._beginPos.copy(localRay.origin);
            this._beginPos.x += this._boundingBox.maxX;
            this._beginPos.z += this._boundingBox.maxZ;
            this._endPos.copy(localRay.direction).add(this._beginPos);
            let rayDirectionFlatX = this._endPos.x - this._beginPos.x;
            let rayDirectionFlatZ = this._endPos.z - this._beginPos.z;
            const maxDistanceFlat = Math.sqrt(Math.pow(rayDirectionFlatX, 2) + Math.pow(rayDirectionFlatZ, 2));
            if (maxDistanceFlat < 0.0001) {
                // Consider the ray vertical
                rayDirectionFlatX = 0;
                rayDirectionFlatZ = 0;
            }
            else {
                rayDirectionFlatX /= maxDistanceFlat;
                rayDirectionFlatZ /= maxDistanceFlat;
            }
            const xiStep = rayDirectionFlatX > 0 ? 1 : rayDirectionFlatX < 0 ? -1 : 0;
            const ziStep = rayDirectionFlatZ > 0 ? 1 : rayDirectionFlatZ < 0 ? -1 : 0;
            const paramDeltaX = xiStep !== 0 ? 1 / Math.abs(rayDirectionFlatX) : infinite;
            const paramDeltaZ = ziStep !== 0 ? 1 / Math.abs(rayDirectionFlatZ) : infinite;
            let paramCrossX;
            let paramCrossZ;
            if (xiStep !== 0) {
                paramCrossX = xiStep === 1
                    ? (Math.ceil(this._beginPos.x) - this._beginPos.x) * paramDeltaX
                    : (this._beginPos.x - Math.floor(this._beginPos.x)) * paramDeltaX;
            }
            else {
                paramCrossX = infinite; // Will never cross on X
            }
            if (ziStep !== 0) {
                paramCrossZ = ziStep === 1
                    ? (Math.ceil(this._beginPos.z) - this._beginPos.z) * paramDeltaZ
                    : (this._beginPos.z - Math.floor(this._beginPos.z)) * paramDeltaZ;
            }
            else {
                paramCrossZ = infinite; // Will never cross on Z
            }
            const rs = {
                x: this._beginPos.x | 0,
                z: this._beginPos.z | 0,
                param: 0,
                prevX: 0,
                prevZ: 0,
                prevParam: 0,
                maxDistanceFlat: maxDistanceFlat,
            };
            // Workaround cases where the ray starts at an integer position
            if (paramCrossX === 0.0) {
                paramCrossX += paramDeltaX;
                // If going backwards, we should ignore the position we would get by the above flooring,
                // because the ray is not heading in that direction
                if (xiStep === -1) {
                    rs.x -= 1;
                }
            }
            if (paramCrossZ === 0.0) {
                paramCrossZ += paramDeltaZ;
                if (ziStep === -1)
                    rs.z -= 1;
            }
            let hasHit = false;
            while (!hasHit) {
                rs.prevX = rs.x;
                rs.prevZ = rs.z;
                rs.prevParam = rs.param;
                if (paramCrossX < paramCrossZ) {
                    // X lane
                    rs.x += xiStep;
                    // Assign before advancing the param,
                    // to be in sync with the initialization step
                    rs.param = paramCrossX;
                    paramCrossX += paramDeltaX;
                }
                else {
                    // Z lane
                    rs.z += ziStep;
                    rs.param = paramCrossZ;
                    paramCrossZ += paramDeltaZ;
                }
                if (this._quadAction(rs, localRay, result)) {
                    hasHit = true;
                }
                if (rs.param > rs.maxDistanceFlat) {
                    rs.param = rs.maxDistanceFlat;
                    break;
                }
            }
            return hasHit;
        }
        intersectsRay(worldTranform, ray, result = new HeightfieldRaycastResult_mjs_1.default()) {
            if (worldTranform) {
                modelTransform.copy(worldTranform).invert();
                modelTransform.transformPoint(ray.origin, tmpRay.origin);
                modelTransform.transformVector(ray.direction, tmpRay.direction);
                debugTransform.copy(worldTranform);
                debugTransformIsIdentity = false;
            }
            else if (!debugTransformIsIdentity) {
                debugTransform.setIdentity();
                debugTransformIsIdentity = true;
            }
            const hit = this._intersectsRay(worldTranform ? tmpRay : ray, result);
            if (hit && worldTranform) {
                // update world point and normal, but save local
                worldTranform.transformPoint(result.point, result.point);
                worldTranform.transformVector(result.normal, result.normal);
            }
            return !!hit;
        }
    }
    exports.default = HeightfieldShape;
});
define("src/Core/IPatch", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Core/IPatchInstancing", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Extras/Utils", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.checkSupportR32FTexture = exports.littleEndian = exports.setPrecision = void 0;
    exports.getText = getText;
    exports.clamp = clamp;
    exports.randomFloat = randomFloat;
    exports.randomFloatRange = randomFloatRange;
    exports.calcNextPowerOfTwo = calcNextPowerOfTwo;
    exports.nrand = nrand;
    function getText(val, minWidth, prefix) {
        const str = val.toString();
        const strLen = str.length;
        const appendCount = minWidth - strLen;
        let result = str;
        for (let i = 0; i < appendCount; i++) {
            result = prefix + result;
        }
        return result;
    }
    function clamp(value, min, max) {
        return Math.max(min, Math.min(max, value));
    }
    function randomFloat() {
        return Math.random();
    }
    function randomFloatRange(start, end) {
        if (end == start) {
            throw new Error("Invalid random range");
        }
        const delta = end - start;
        const randomValue = randomFloat() * delta + start;
        return randomValue;
    }
    function calcNextPowerOfTwo(x) {
        let ret = 1;
        if (x == 1) {
            return 2;
        }
        while (ret < x) {
            ret = ret * 2;
        }
        return ret;
    }
    /** A random number from -1.0 to 1.0 */
    function nrand() {
        return Math.random() * 2.0 - 1.0;
    }
    const setPrecision = (graphicsDevice, shaderCode) => {
        return "precision " + graphicsDevice.precision + " float;\n" + shaderCode;
    };
    exports.setPrecision = setPrecision;
    exports.littleEndian = (() => {
        const uint8Array = new Uint8Array([0xAA, 0xBB]);
        const uint16array = new Uint16Array(uint8Array.buffer);
        return uint16array[0] === 0xBBAA;
    })();
    const checkSupportR32FTexture = (graphicsDevice) => {
        try {
            // TODO: need more test...
            // TODO: on iphone not work r32f textures
            if (navigator.platform.match(/iPhone|iPod|iPad/) !== null ||
                navigator.platform.startsWith("Mac") && navigator.maxTouchPoints > 4) {
                return false;
            }
            if (graphicsDevice.isWebGL2) {
                const gl = graphicsDevice.gl;
                let result = gl.getExtension("EXT_color_buffer_float");
                if (result) {
                    result = gl.getExtension("OES_texture_float");
                }
                if (!!result) {
                    return false;
                }
            }
            return true;
        }
        catch (ex) {
            return false;
        }
    };
    exports.checkSupportR32FTexture = checkSupportR32FTexture;
});
define("src/Extras/Store2D", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ObjStore2D = exports.AbsStore2D = void 0;
    class AbsStore2D {
        constructor() {
            this._cols = 0;
            this._rows = 0;
        }
        init(cols, rows) {
            this._cols = cols;
            this._rows = rows;
            const size = cols * rows;
            this._p = this._initArrayType(size);
        }
        initByVal(cols, rows, val) {
            this.init(cols, rows);
            const size = cols * rows;
            const valIsFunc = typeof val === 'function';
            for (let i = 0; i < size; i++) {
                this._p[i] = valIsFunc ? val() : val;
            }
        }
        initByStore(cols, rows, val) {
            this._cols = cols;
            this._rows = rows;
            this._p = val;
        }
        addr() {
            return this._p;
        }
        size() {
            return this._rows * this._cols;
        }
        get(col, row) {
            return this._p[row * this._cols + col];
        }
        set(col, row, value) {
            this._p[row * this._cols + col] = value;
        }
        getByIndex(index) {
            return this._p[index];
        }
        setByIndex(index, value) {
            this._p[index] = value;
        }
    }
    exports.AbsStore2D = AbsStore2D;
    class ObjStore2D extends AbsStore2D {
        _initArrayType(size) {
            return new Array(size);
        }
    }
    exports.ObjStore2D = ObjStore2D;
});
define("src/Core/LodState", ["require", "exports", "src/Extras/Utils", "src/Extras/Store2D"], function (require, exports, Utils_mjs_1, Store2D_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.defaultPatchLod = void 0;
    exports.defaultPatchLod = {
        distance: 0,
        core: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
    };
    const getZeroPatchLod = () => ({
        distance: 0,
        core: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
    });
    class LodState {
        get lodManager() { return this._lodManager; }
        get zFar() { return this._zFar; }
        get regions() { return this._regions; }
        get map() { return this._map; }
        constructor(lodManager, zFar) {
            this.setLodManager(lodManager);
            this.setZFar(zFar);
        }
        setLodManager(lodManager, removeFromPrev = true) {
            if (this._lodManager && removeFromPrev) {
                this._lodManager.removeState(this);
            }
            this._lodManager = lodManager;
            this._lodManager.addState(this);
            this._regions = new Array(this._lodManager.count);
            this._map = new Store2D_mjs_1.ObjStore2D();
            this._map.initByVal(this._lodManager.numPatchesX, this._lodManager.numPatchesZ, getZeroPatchLod);
        }
        destroy() {
            var _a;
            (_a = this._lodManager) === null || _a === void 0 ? void 0 : _a.removeState(this);
            this._lodManager = null;
        }
        setZFar(zFar) {
            this._zFar = zFar;
            this._calcLodRegions();
        }
        _calcLodRegions() {
            // TODO: We can use the ring system to determine the LOD.
            // TODO: Based on the heights we can calculate the optimal lods
            let sum = 0;
            for (let i = 0; i < this._regions.length; i++) {
                sum += i + 1;
            }
            let x = this._zFar / sum;
            let temp = 0;
            for (let i = 0; i < this._regions.length; i++) {
                const curRange = (x * (i + 1)) | 0;
                this._regions[i] = temp + curRange;
                temp += curRange;
            }
        }
        getPatchLod(patchX, patchZ) {
            return this._map.get(patchX, patchZ);
        }
        getPatchLodByIndex(index) {
            return this._map.getByIndex(index);
        }
        getLodForDistance(distance) {
            let lod = this._regions.length - 1;
            for (let i = 0; i < this._regions.length; i++) {
                if (distance < this._regions[i]) {
                    lod = i;
                    break;
                }
            }
            return lod;
        }
        updatePatchLod(patchX, patchZ) {
            const item = this._map.get(patchX, patchZ);
            const coreLod = item.core;
            let hasChange = false;
            let indexLeft = patchX;
            let indexRight = patchX;
            let indexTop = patchZ;
            let indexBottom = patchZ;
            if (patchX > 0) {
                indexLeft--;
                const prev = item.left;
                const next = this._map.get(indexLeft, patchZ).core > coreLod ? 1 : 0;
                if (prev !== next) {
                    item.left = next;
                    hasChange = true;
                }
            }
            if (patchX < this._lodManager.numPatchesX - 1) {
                indexRight++;
                const prev = item.right;
                const next = this._map.get(indexRight, patchZ).core > coreLod ? 1 : 0;
                if (prev !== next) {
                    item.right = next;
                    hasChange = true;
                }
            }
            if (patchZ > 0) {
                indexBottom--;
                const prev = item.bottom;
                const next = this._map.get(patchX, indexBottom).core > coreLod ? 1 : 0;
                if (prev !== next) {
                    item.bottom = next;
                    hasChange = true;
                }
            }
            if (patchZ < this._lodManager.numPatchesZ - 1) {
                indexTop++;
                const prev = item.top;
                const next = this._map.get(patchX, indexTop).core > coreLod ? 1 : 0;
                if (prev !== next) {
                    item.top = next;
                    hasChange = true;
                }
            }
            return hasChange;
        }
        printLodMap() {
            const maxLodMaxZ = this._lodManager.numPatchesZ - 1;
            const maxLodMaxX = this._lodManager.numPatchesX;
            let maxCore = 0;
            let str = '';
            for (let lodMapZ = maxLodMaxZ; lodMapZ > -1; lodMapZ--) {
                for (let lodMapX = 0; lodMapX < maxLodMaxX; lodMapX++) {
                    const value = this._map.get(lodMapX, lodMapZ).core;
                    if (maxCore < value) {
                        maxCore = value;
                    }
                }
            }
            const lodMaxNumberCount = maxLodMaxZ.toString().length;
            const coreMaxNumberCount = maxCore.toString().length;
            for (let lodMapZ = maxLodMaxZ; lodMapZ > -1; lodMapZ--) {
                str += (0, Utils_mjs_1.getText)(lodMapZ, lodMaxNumberCount, ' ') + ': ';
                for (let lodMapX = 0; lodMapX < maxLodMaxX; lodMapX++) {
                    const value = this._map.get(lodMapX, lodMapZ).core;
                    str += (0, Utils_mjs_1.getText)(value, coreMaxNumberCount, ' ') + ' ';
                }
                str += '\n';
            }
            console.log(str);
        }
    }
    exports.default = LodState;
});
define("src/Core/LodManager", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class LodManager {
        get states() { return this._states; }
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        get count() { return this._lodCount; }
        get max() { return this._lodCount - 1; }
        constructor(lodEstimator) {
            this._states = [];
            this._patchSize = lodEstimator.patchSize;
            this._numPatchesX = lodEstimator.numPatchesX;
            this._numPatchesZ = lodEstimator.numPatchesZ;
            this._lodCount = lodEstimator.count;
        }
        hasState(state) {
            return this._states.indexOf(state) !== -1;
        }
        addState(state) {
            if (this._states.indexOf(state) === -1) {
                this._states.push(state);
            }
        }
        removeState(state) {
            const idx = this._states.indexOf(state);
            if (idx !== -1) {
                this._states.splice(idx, 1);
            }
        }
        update(localViewPos, heightMap, useYPos = true) {
            const a = this._updateLodMapPass1(localViewPos, heightMap, useYPos);
            const b = this._updateLodMapPass2();
            return a || b;
        }
        _updateLodMapPass1(localViewPos, heightMap, useYPos) {
            const widthM1 = heightMap.width - 1;
            const depthM1 = heightMap.depth - 1;
            const patchSizeM1 = this.patchSize - 1;
            const halfWidth = widthM1 / 2;
            const halfDepth = depthM1 / 2;
            const centerStep = this.patchSize / 2 | 0;
            let proxyPatchCenterY = 0;
            let hasChange = false;
            if (useYPos) {
                const normalizeCameraX = Math.min(Math.max(localViewPos.x + halfWidth, 0), widthM1);
                const normalizeCameraZ = Math.min(Math.max(localViewPos.z + halfDepth, 0), depthM1);
                const cameraPosAltitude = heightMap.get(normalizeCameraX | 0, normalizeCameraZ | 0);
                proxyPatchCenterY = Math.pow((localViewPos.y - cameraPosAltitude), 2);
            }
            for (let lodMapZ = 0; lodMapZ < this.numPatchesZ; lodMapZ++) {
                for (let lodMapX = 0; lodMapX < this.numPatchesX; lodMapX++) {
                    const x = lodMapX * patchSizeM1 + centerStep;
                    const z = lodMapZ * patchSizeM1 + centerStep;
                    const patchCenterX = -halfWidth + x;
                    const patchCenterZ = -halfDepth + z;
                    const distanceToCamera = Math.sqrt(Math.pow((localViewPos.x - patchCenterX), 2) +
                        Math.pow((localViewPos.z - patchCenterZ), 2) +
                        proxyPatchCenterY);
                    for (const state of this._states) {
                        const coreLod = state.getLodForDistance(distanceToCamera);
                        const patchLod = state.getPatchLod(lodMapX, lodMapZ);
                        patchLod.distance = distanceToCamera;
                        if (patchLod.core !== coreLod) {
                            patchLod.core = coreLod;
                            hasChange = true;
                        }
                    }
                }
            }
            return hasChange;
        }
        _updateLodMapPass2() {
            let hasChange = false;
            for (let lodMapZ = 0; lodMapZ < this.numPatchesZ; lodMapZ++) {
                for (let lodMapX = 0; lodMapX < this.numPatchesX; lodMapX++) {
                    for (const state of this._states) {
                        if (state.updatePatchLod(lodMapX, lodMapZ)) {
                            hasChange = true;
                        }
                    }
                }
            }
            return hasChange;
        }
    }
    exports.default = LodManager;
});
define("src/Core/MidpointDispHeightfield", ["require", "exports", "src/Extras/Utils", "src/Core/Heightfield"], function (require, exports, Utils_mjs_2, Heightfield_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    Heightfield_mjs_1 = __importDefault(Heightfield_mjs_1);
    class MidpointDispHeightfield extends Heightfield_mjs_1.default {
        createMidpointDisplacement(roughness) {
            if (roughness < 0.0) {
                throw Error("roughness must be positive");
            }
            this._createMidpointDisplacementF32(roughness);
            this.normalizeHeightMap();
        }
        _createMidpointDisplacementF32(roughness) {
            let rectSize = (0, Utils_mjs_2.calcNextPowerOfTwo)(this.width);
            let curHeight = rectSize / 2.0;
            const heightReduce = Math.pow(2.0, -roughness);
            while (rectSize > 0) {
                this._diamondStep(rectSize, curHeight);
                this._squareStep(rectSize, curHeight);
                rectSize = (rectSize / 2) | 0;
                curHeight *= heightReduce;
            }
        }
        _diamondStep(rectSize, curHeight) {
            const HalfRectSize = Math.floor(rectSize / 2);
            for (let y = 0; y < this.depth; y += rectSize) {
                for (let x = 0; x < this.width; x += rectSize) {
                    let nextX = (x + rectSize) % this.width;
                    let nextY = (y + rectSize) % this.depth;
                    if (nextX < x) {
                        nextX = this.width - 1;
                    }
                    if (nextY < y) {
                        nextY = this.depth - 1;
                    }
                    const topLeft = this.heightMap.get(x, y);
                    const topRight = this.heightMap.get(nextX, y);
                    const bottomLeft = this.heightMap.get(x, nextY);
                    const bottomRight = this.heightMap.get(nextX, nextY);
                    const midX = (x + HalfRectSize) % this.width;
                    const midY = (y + HalfRectSize) % this.depth;
                    const randValue = (0, Utils_mjs_2.randomFloatRange)(curHeight, -curHeight);
                    const midPoint = (topLeft + topRight + bottomLeft + bottomRight) / 4.0;
                    this.setHeight(midX, midY, midPoint + randValue);
                }
            }
        }
        _squareStep(rectSize, curHeight) {
            const halfRectSize = (rectSize / 2) | 0;
            for (let y = 0; y < this.depth; y += rectSize) {
                for (let x = 0; x < this.width; x += rectSize) {
                    let nextX = (x + rectSize) % this.width;
                    let nextY = (y + rectSize) % this.depth;
                    if (nextX < x) {
                        nextX = this.width - 1;
                    }
                    if (nextY < y) {
                        nextY = this.depth - 1;
                    }
                    const midX = (x + halfRectSize) % this.width;
                    const midY = (y + halfRectSize) % this.depth;
                    const prevMidX = (x - halfRectSize + this.width) % this.width;
                    const prevMidY = (y - halfRectSize + this.depth) % this.depth;
                    const curTopLeft = this.heightMap.get(x, y);
                    const curTopRight = this.heightMap.get(nextX, y);
                    const curCenter = this.heightMap.get(midX, midY);
                    const prevYCenter = this.heightMap.get(midX, prevMidY);
                    const curBotLeft = this.heightMap.get(x, nextY);
                    const prevXCenter = this.heightMap.get(prevMidX, midY);
                    const curLeftMid = (curTopLeft + curCenter + curBotLeft + prevXCenter) / 4.0 + (0, Utils_mjs_2.randomFloatRange)(-curHeight, curHeight);
                    const curTopMid = (curTopLeft + curCenter + curTopRight + prevYCenter) / 4.0 + (0, Utils_mjs_2.randomFloatRange)(-curHeight, curHeight);
                    this.setHeight(midX, y, curTopMid);
                    this.setHeight(x, midY, curLeftMid);
                }
            }
        }
    }
    exports.default = MidpointDispHeightfield;
});
define("src/Core/PatchCombineInstancing", ["require", "exports", "src/Core/LodEstimator", "src/Core/LodInfo"], function (require, exports, LodEstimator_mjs_2, LodInfo_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.TComInstCoordsOffsetArrType = exports.combineGroupLen = exports.comInstDataSize = void 0;
    exports.getLodCombineData = getLodCombineData;
    exports.comInstDataSize = 4;
    exports.combineGroupLen = 6;
    exports.TComInstCoordsOffsetArrType = Uint8Array;
    class PatchCombineInstancing {
        get patchCount() { return this._patchCount; }
        constructor() {
            this.data = [];
            this._patchCount = 0;
        }
        forEach(fn) {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < exports.combineGroupLen; i++) {
                    const segment = this.data[c].groups[i];
                    fn(segment);
                }
            }
        }
        destroySegmentObjects(index, destructor) {
            for (let i = 0; i < exports.combineGroupLen; i++) {
                const segment = this.data[index].groups[i];
                if (segment.object) {
                    destructor(segment.object);
                    segment.object = null;
                }
            }
        }
        destroy(destructor) {
            for (let i = 0; i < this.data.length; i++) {
                this.destroySegmentObjects(i, destructor);
            }
            this.data.length = 0;
        }
        build(grid, objectBuilder) {
            this._patchCount = grid.numPatchesX * grid.numPatchesZ;
            this.data = new Array(grid.lodInfo.length);
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                this.data[lodCore] = this._buildInfo(lodCore, grid.lodInfo[lodCore], this._patchCount, objectBuilder);
            }
        }
        _buildInfo(lodCore, lodInfo, patchCount, objectBuilder) {
            const groups = new Array(exports.combineGroupLen);
            const items = new Array(LodInfo_mjs_2.LEFT);
            for (let l = 0; l < LodInfo_mjs_2.LEFT; l++) {
                items[l] = new Array(LodInfo_mjs_2.RIGHT);
                for (let r = 0; r < LodInfo_mjs_2.RIGHT; r++) {
                    items[l][r] = new Array(LodInfo_mjs_2.TOP);
                    for (let t = 0; t < LodInfo_mjs_2.TOP; t++) {
                        items[l][r][t] = new Array(LodInfo_mjs_2.BOTTOM);
                        for (let b = 0; b < LodInfo_mjs_2.BOTTOM; b++) {
                            const id = (0, LodEstimator_mjs_2.getLodId)(lodCore, l, r, t, b);
                            const vl = getLodCombineData(lodCore, l, r, t, b);
                            const { mainId, groupId } = vl;
                            items[l][r][t][b] = vl;
                            // build data for main case
                            if (id === mainId) {
                                const info = lodInfo.info[l][r][t][b];
                                const lod = {
                                    core: lodCore,
                                    left: l,
                                    right: r,
                                    top: t,
                                    bottom: b
                                };
                                const data = new exports.TComInstCoordsOffsetArrType(patchCount * exports.comInstDataSize);
                                const object = objectBuilder ? objectBuilder(lod, info, data, patchCount) : null;
                                groups[groupId] = {
                                    vertexBaseIndex: info.start,
                                    vertexCount: info.count,
                                    count: 0,
                                    lod: lod,
                                    data: data,
                                    object: object,
                                    hasChanges: false,
                                };
                            }
                        }
                    }
                }
            }
            return {
                groups,
                items
            };
        }
        get(lod) {
            const data = this.data[lod.core];
            const groupId = data.items[lod.left][lod.right][lod.top][lod.bottom].groupId;
            return data.groups[groupId];
        }
        increment(lod, patch) {
            const data = this.data[lod.core];
            const item = data.items[lod.left][lod.right][lod.top][lod.bottom];
            const single = data.groups[item.groupId];
            const prevIndex = single.count;
            const index = prevIndex * exports.comInstDataSize;
            if (single.data[index + 0] !== patch.x ||
                single.data[index + 1] !== patch.z ||
                single.data[index + 2] !== item.angle) {
                single.data[index + 0] = patch.x;
                single.data[index + 1] = patch.z;
                single.data[index + 2] = item.angle;
                single.hasChanges = true;
            }
            single.count++;
            return single;
        }
        zeroAll() {
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                for (let i = 0; i < exports.combineGroupLen; i++) {
                    const single = this.data[lodCore].groups[i];
                    single.count = 0;
                }
            }
        }
    }
    exports.default = PatchCombineInstancing;
    function getLodCombineData(lodCore, l, r, t, b) {
        // We are looking for which shape can be replaced by rotation.
        // Angle 1 = 90, 2 = 180, 3 = 270
        // |\|/|/                   |\|/|\|
        // |\|/|\  => rotate(90) => |/|\|/|
        // |/|\|/                    \ / \
        let mainId;
        let groupId;
        let angle;
        if (l === 0 && r === 0 && t === 0 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 0, 0, 0, 0);
            groupId = 0;
            angle = 0;
        }
        else if (l === 1 && r === 0 && t === 0 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 0, 0);
            groupId = 1;
            angle = 0;
        }
        else if (l === 0 && r === 0 && t === 1 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 0, 0);
            groupId = 1;
            angle = 90;
        }
        else if (l === 0 && r === 1 && t === 0 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 0, 0);
            groupId = 1;
            angle = 180;
        }
        else if (l === 0 && r === 0 && t === 0 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 0, 0);
            groupId = 1;
            angle = 270;
        }
        else if (l === 1 && r === 0 && t === 1 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 0);
            groupId = 2;
            angle = 0;
        }
        else if (l === 0 && r === 1 && t === 1 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 0);
            groupId = 2;
            angle = 90;
        }
        else if (l === 0 && r === 1 && t === 0 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 0);
            groupId = 2;
            angle = 180;
        }
        else if (l === 1 && r === 0 && t === 0 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 0);
            groupId = 2;
            angle = 270;
        }
        else if (l === 1 && r === 1 && t === 0 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 1, 0, 0);
            groupId = 3;
            angle = 0;
        }
        else if (l === 0 && r === 0 && t === 1 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 1, 0, 0);
            groupId = 3;
            angle = 90;
        }
        else if (l === 1 && r === 0 && t === 1 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 1);
            groupId = 4;
            angle = 0;
        }
        else if (l === 1 && r === 1 && t === 1 && b === 0) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 1);
            groupId = 4;
            angle = 90;
        }
        else if (l === 0 && r === 1 && t === 1 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 1);
            groupId = 4;
            angle = 180;
        }
        else if (l === 1 && r === 1 && t === 0 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 0, 1, 1);
            groupId = 4;
            angle = 270;
        }
        else if (l === 1 && r === 1 && t === 1 && b === 1) {
            mainId = (0, LodEstimator_mjs_2.getLodId)(lodCore, 1, 1, 1, 1);
            groupId = 5;
            angle = 0;
        }
        else {
            throw new Error(`Can\'t combine ${lodCore},${l},${r},${t},${b}`);
        }
        return {
            mainId,
            groupId,
            angle: angle / 90, // save for uint8
        };
    }
});
define("src/Core/PatchInstancing", ["require", "exports", "src/Core/LodInfo"], function (require, exports, LodInfo_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchInstancing = exports.TInstCoordsOffsetArrType = exports.instDataSize = void 0;
    exports.instDataSize = 2;
    exports.TInstCoordsOffsetArrType = Uint16Array;
    class PatchInstancing {
        get patchCount() { return this._patchCount; }
        constructor() {
            this.data = [];
            this._patchCount = 0;
        }
        forEach(fn) {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                                const segment = this.data[c][l][r][t][b];
                                fn(segment);
                            }
                        }
                    }
                }
            }
        }
        destroySegmentObjects(index, destructor) {
            for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                    for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                        for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                            const segment = this.data[index][l][r][t][b];
                            if (segment.object) {
                                destructor(segment.object);
                                segment.object = null;
                            }
                        }
                    }
                }
            }
        }
        destroy(destructor) {
            for (let i = 0; i < this.data.length; i++) {
                this.destroySegmentObjects(i, destructor);
            }
            this.data.length = 0;
        }
        build(grid, objectBuilder) {
            this._patchCount = grid.numPatchesX * grid.numPatchesZ;
            this.data = new Array(grid.lodInfo.length);
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                this.data[lodCore] = this._buildInfo(lodCore, grid.lodInfo[lodCore], this._patchCount, objectBuilder);
            }
        }
        _buildInfo(lodCore, lodInfo, patchCount, objectBuilder) {
            const arr = new Array(LodInfo_mjs_3.LEFT);
            for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                arr[l] = new Array(LodInfo_mjs_3.RIGHT);
                for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                    arr[l][r] = new Array(LodInfo_mjs_3.TOP);
                    for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                        arr[l][r][t] = new Array(LodInfo_mjs_3.BOTTOM);
                        for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                            const info = lodInfo.info[l][r][t][b];
                            const lod = {
                                core: lodCore,
                                left: l,
                                right: r,
                                top: t,
                                bottom: b
                            };
                            const data = new exports.TInstCoordsOffsetArrType(patchCount * exports.instDataSize);
                            const object = objectBuilder ? objectBuilder(lod, info, data, patchCount) : null;
                            arr[l][r][t][b] = {
                                vertexBaseIndex: info.start,
                                vertexCount: info.count,
                                count: 0,
                                lod: lod,
                                data: data,
                                object: object,
                                hasChanges: false,
                            };
                        }
                    }
                }
            }
            return arr;
        }
        get(lod) {
            return this.data[lod.core][lod.left][lod.right][lod.top][lod.bottom];
        }
        increment(lod, patch) {
            const single = this.get(lod);
            const prevIndex = single.count;
            const index = prevIndex * exports.instDataSize;
            if (single.data[index + 0] !== patch.minX ||
                single.data[index + 1] !== patch.minZ) {
                single.data[index + 0] = patch.minX;
                single.data[index + 1] = patch.minZ;
                single.hasChanges = true;
            }
            single.count++;
            return single;
        }
        zeroAll() {
            for (let lodCore = 0; lodCore < this.data.length; lodCore++) {
                for (let l = 0; l < LodInfo_mjs_3.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_3.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_3.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_3.BOTTOM; b++) {
                                const single = this.data[lodCore][l][r][t][b];
                                single.count = 0;
                            }
                        }
                    }
                }
            }
        }
    }
    exports.PatchInstancing = PatchInstancing;
});
define("src/Core/PatchesSphereBuffer", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.bufferItemSize = void 0;
    exports.bufferItemSize = 5; // (x, y, z, radiusWithMargin, originalRadius)
    // Our system is divided into a general part and an engine part,
    // for optimization we use the engine part in this file. (playcanvas Vec3, Mat4, BoundingSphere)
    class PatchesSphereBuffer {
        get heightMap() { return this._heightMap; }
        get buffer() { return this._localBuffer; }
        get spheres() { return this._worldSpheres; }
        get margins() { return this._margins; }
        constructor(heightMap, matrix) {
            this._heightMap = heightMap;
            this._localBuffer = new Array(this._heightMap.numPatchesX * this._heightMap.numPatchesZ * exports.bufferItemSize);
            this._margins = new Array(this._heightMap.numPatchesX * this._heightMap.numPatchesZ);
            this._localBuffer.fill(0);
            this._scale = new pc.Vec3();
            this._matrix = new pc.Mat4();
            this._initWorldSpheres();
            this.setMatrix(matrix !== null && matrix !== void 0 ? matrix : pc.Mat4.IDENTITY, false);
        }
        _initWorldSpheres() {
            this._worldSpheres = new Array(this._heightMap.numPatchesX * this._heightMap.numPatchesZ);
            for (let patchZ = 0; patchZ < this._heightMap.numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this._heightMap.numPatchesX; patchX++) {
                    const index = patchX + patchZ * this._heightMap.numPatchesX;
                    this._worldSpheres[index] = new pc.BoundingSphere();
                }
            }
        }
        setPatchMargin(patchX, patchZ, margin, recalculate = true) {
            const sphereIdx = patchX + patchZ * this._heightMap.numPatchesX;
            this._margins[sphereIdx] = margin;
            if (recalculate) {
                this.recalculateBoundingSphere(patchX, patchZ);
            }
        }
        setMatrix(matrix, recalculate = true) {
            this._matrix.copy(matrix);
            this._matrix.getScale(this._scale);
            if (recalculate) {
                this._recalculateWorldBoundingSpheres();
            }
        }
        patchVisible(patchX, patchZ, margin, frustum) {
            const sphereIdx = patchX + patchZ * this._heightMap.numPatchesX;
            const sphere = this._worldSpheres[sphereIdx];
            const prevRadius = sphere.radius;
            sphere.radius *= margin;
            const result = frustum.containsSphere(sphere);
            sphere.radius = prevRadius;
            return result > 0;
        }
        recalculate() {
            for (let patchZ = 0; patchZ < this._heightMap.numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this._heightMap.numPatchesX; patchX++) {
                    this.recalculateBoundingSphere(patchX, patchZ);
                }
            }
        }
        recalculateZone(zone) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const fixedMinX = Math.max(zone.minX, 0);
            const fixedMinZ = Math.max(zone.minZ, 0);
            const fixedMaxX = Math.min(zone.maxX, this._heightMap.width);
            const fixedMaxZ = Math.min(zone.maxZ, this._heightMap.depth);
            for (let z = fixedMinZ; z < fixedMaxZ; z += this._heightMap.patchSize) {
                for (let x = fixedMinX; x < fixedMaxX; x += this._heightMap.patchSize) {
                    const patchX = x / this._heightMap.patchSize | 0;
                    const patchZ = z / this._heightMap.patchSize | 0;
                    this.recalculateBoundingSphere(patchX, patchZ);
                }
            }
        }
        recalculateBoundingSphere(patchX, patchZ) {
            const sphereIdx = patchX + patchZ * this._heightMap.numPatchesX;
            const bufferIndex = sphereIdx * exports.bufferItemSize;
            const patchMinHeight = this._heightMap.getPerformPatchMin(patchX, patchZ);
            const patchMaxHeight = this._heightMap.getPerformPatchMax(patchX, patchZ);
            const square = this._heightMap.patchSize - 1;
            const patchRadiusBySize = square / 2;
            const patchRediusByHeight = (patchMaxHeight - patchMinHeight) / 2;
            const patchCenterX = (patchX * square) + patchRadiusBySize;
            const patchCenterY = (patchMaxHeight + patchMinHeight) / 2;
            const patchCenterZ = (patchZ * square) + patchRadiusBySize;
            const radius = (patchRadiusBySize > patchRediusByHeight ? patchRadiusBySize : patchRediusByHeight) * Math.SQRT2;
            const margin = this._margins[sphereIdx] || 1;
            // We construct coordinates relative to the center of the height map
            this._localBuffer[bufferIndex + 0] = patchCenterX + this._heightMap.width / -2;
            this._localBuffer[bufferIndex + 1] = patchCenterY;
            this._localBuffer[bufferIndex + 2] = patchCenterZ + this._heightMap.depth / -2;
            this._localBuffer[bufferIndex + 3] = radius * margin;
            this._localBuffer[bufferIndex + 4] = radius;
            this._recalculateWorldBoundingSphere(patchX, patchZ);
        }
        _recalculateWorldBoundingSpheres() {
            for (let patchZ = 0; patchZ < this._heightMap.numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < this._heightMap.numPatchesX; patchX++) {
                    this._recalculateWorldBoundingSphere(patchX, patchZ);
                }
            }
        }
        _recalculateWorldBoundingSphere(patchX, patchZ) {
            const sphereIdx = patchX + patchZ * this._heightMap.numPatchesX;
            const bufferIdx = sphereIdx * exports.bufferItemSize;
            const locRadius = this._localBuffer[bufferIdx + 3]; // take radius with custom margin
            const wrlSphere = this._worldSpheres[sphereIdx];
            wrlSphere.center.set(this._localBuffer[bufferIdx + 0], this._localBuffer[bufferIdx + 1], this._localBuffer[bufferIdx + 2]);
            // TODO: need more test
            wrlSphere.radius = locRadius * Math.sqrt((Math.pow(this._scale.x, 2) + Math.pow(this._scale.y, 2) + Math.pow(this._scale.z, 2)) / 3);
            this._matrix.transformPoint(wrlSphere.center, wrlSphere.center);
        }
    }
    exports.default = PatchesSphereBuffer;
});
define("src/Core/PatchesManager", ["require", "exports", "src/Core/LodState", "src/Core/LodManager"], function (require, exports, LodState_mjs_1, LodManager_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    LodManager_mjs_1 = __importDefault(LodManager_mjs_1);
    class PatchesManager {
        get grid() { return this._grid; }
        get spheres() { return this._spheres; }
        get lodManager() { return this._lodManager; }
        get states() { return this._states; }
        constructor(grid, spheres) {
            this._grid = grid;
            this._spheres = spheres;
            this._lodManager = new LodManager_mjs_1.default(grid.lodEstimator);
            this._states = [];
        }
        hasState(state) {
            return this._states.indexOf(state) !== -1;
        }
        addState(state) {
            if (!this._lodManager.hasState(state.lodState)) {
                console.warn("Lod state has different lod manager with patches manager");
                return;
            }
            if (this._states.indexOf(state) === -1) {
                this._states.push(state);
            }
            this._initSingleState(state);
        }
        removeState(state) {
            const idx = this._states.indexOf(state);
            if (idx !== -1) {
                this._states.splice(idx, 1);
            }
        }
        _initSingleState(state) {
            const numPatchesX = this._grid.numPatchesX;
            const numPatchesZ = this._grid.numPatchesZ;
            const patchSize = this._grid.patchSize;
            for (let patchZ = 0; patchZ < numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < numPatchesX; patchX++) {
                    const minX = patchX * (patchSize - 1);
                    const minZ = patchZ * (patchSize - 1);
                    const info = this._grid.lodInfo[0].info[0][0][0][0];
                    state.initPatch(patchX, patchZ, patchSize, minX, minZ, info, LodState_mjs_1.defaultPatchLod);
                }
            }
        }
        update(frustum, frustumMargin = 1) {
            const numStates = this._states.length;
            const numPatchesX = this._grid.numPatchesX;
            const numPatchesZ = this._grid.numPatchesZ;
            for (let i = 0; i < numStates; i++) {
                this._states[i].beforeUpdate();
            }
            for (let patchZ = 0; patchZ < numPatchesZ; patchZ++) {
                for (let patchX = 0; patchX < numPatchesX; patchX++) {
                    const visible = !!frustum && this._spheres.patchVisible(patchX, patchZ, frustumMargin, frustum);
                    for (let i = 0; i < numStates; i++) {
                        const state = this._states[i];
                        const plod = state.lodState.getPatchLod(patchX, patchZ);
                        const info = this._grid.lodInfo[plod.core].info[plod.left][plod.right][plod.top][plod.bottom];
                        state.updatePatch(patchX, patchZ, visible, info, plod);
                    }
                }
            }
            for (let i = 0; i < numStates; i++) {
                this._states[i].afterUpdate();
            }
        }
        updateLods(localViewPos, useYPos = true) {
            this.lodManager.update(localViewPos, this._spheres.heightMap, useYPos);
        }
    }
    exports.default = PatchesManager;
});
define("src/Core/SquareIterator", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class SquareIterator {
        get field() { return this._field; }
        constructor(field) {
            this._field = field;
        }
        _forEach(zone, squareSize, numSquareX, numSquareZ, callback) {
            if (zone.maxX < 0)
                return;
            if (zone.maxZ < 0)
                return;
            const minX = Math.max(zone.minX, 0);
            const minZ = Math.max(zone.minZ, 0);
            const maxX = Math.min(zone.maxX, this.field.width);
            const maxZ = Math.min(zone.maxZ, this.field.depth);
            const minPatchX = minX / squareSize | 0;
            const minPatchZ = minZ / squareSize | 0;
            const maxPatchX = maxX / squareSize | 0;
            const maxPatchZ = maxZ / squareSize | 0;
            const normalizeMinX = Math.max(minPatchX, 0);
            const normalizeMinZ = Math.max(minPatchZ, 0);
            const normalizeMaxX = Math.min(maxPatchX + 1, numSquareX);
            const normalizeMaxZ = Math.min(maxPatchZ + 1, numSquareZ);
            for (let z = normalizeMinZ; z < normalizeMaxZ; z++) {
                for (let x = normalizeMinX; x < normalizeMaxX; x++) {
                    const patchIndex = z * numSquareX + x;
                    if (callback(patchIndex, x, z) === false) {
                        return;
                    }
                }
            }
        }
    }
    exports.default = SquareIterator;
});
define("src/Extras/Debug", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.drawDirectionVector = drawDirectionVector;
    exports.drawPoint = drawPoint;
    exports.drawBox = drawBox;
    const tmpVec = new pc.Vec3();
    function drawDirectionVector(position, dir, color = pc.Color.RED) {
        // Draw the vector
        const start = position;
        const end = tmpVec.add2(position, dir);
        pc.app.drawLine(start, end, color, false);
    }
    function drawPoint({ center, radius = 0.1, numSegments = 4, color = pc.Color.RED, layer, depthTest = false }) {
        const block = 6 * 3;
        const points = new Array(numSegments * block);
        const step = 2 * Math.PI / numSegments;
        let angle = 0;
        for (let i = 0; i < numSegments; i++) {
            const sin0 = Math.sin(angle);
            const cos0 = Math.cos(angle);
            angle += step;
            const sin1 = Math.sin(angle);
            const cos1 = Math.cos(angle);
            const j = i * block;
            points[j + 0] = center.x + radius * sin0;
            points[j + 1] = center.y;
            points[j + 2] = center.z + radius * cos0;
            points[j + 3] = center.x + radius * sin1;
            points[j + 4] = center.y;
            points[j + 5] = center.z + radius * cos1;
            points[j + 6] = center.x;
            points[j + 7] = center.y + radius * sin0;
            points[j + 8] = center.z + radius * cos0;
            points[j + 9] = center.x;
            points[j + 10] = center.y + radius * sin1;
            points[j + 11] = center.z + radius * cos1;
            points[j + 12] = center.x + radius * cos0;
            points[j + 13] = center.y + radius * sin0;
            points[j + 14] = center.z;
            points[j + 15] = center.x + radius * cos1;
            points[j + 16] = center.y + radius * sin1;
            points[j + 17] = center.z;
        }
        pc.app.drawLineArrays(points, color, depthTest, layer);
    }
    function drawBox({ min, max, color = pc.Color.RED, layer, depthTest = false }) {
        var _a;
        (_a = pc.app) === null || _a === void 0 ? void 0 : _a.drawWireAlignedBox(min, max, color, depthTest, layer);
    }
});
define("src/Extras/EnumConverter", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.isNumeric = isNumeric;
    exports.mapTitleEnum = mapTitleEnum;
    exports.mapEnum = mapEnum;
    function isNumeric(value) {
        return /^-?\d+$/.test(value);
    }
    function mapTitleEnum(someEnum) {
        const result = [];
        for (let value in someEnum) {
            // Skip number values
            if (!someEnum.hasOwnProperty(value) ||
                isNumeric(value)) {
                continue;
            }
            const enumEntry = {};
            enumEntry[value] = someEnum[value];
            result.push(enumEntry);
        }
        return result;
    }
    function mapEnum(someEnum) {
        const result = [];
        for (let value in someEnum) {
            if (!someEnum.hasOwnProperty(value)) {
                continue;
            }
            const enumEntry = {};
            enumEntry[value] = someEnum[value];
            result.push(enumEntry);
        }
        return result;
    }
});
define("src/Extras/Random", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class Random {
        constructor(seed) {
            this.seed = seed;
            this._tmp = seed;
        }
        reset() {
            this._tmp = this.seed;
        }
        next() {
            this._tmp = (this._tmp * Random.M2) % Random.M1;
            this._tick = this._tmp / Random.M1;
            return this._tick;
        }
        nextFloat(min, max) {
            return this.next() * (max - min) + min;
        }
        nextInt(min, max) {
            return this.nextFloat(min, max) | 0;
        }
        random() {
            return this.next();
        }
        nrand() {
            return this.nextFloat(-1, 1);
        }
    }
    Random.M1 = 268435456;
    Random.M2 = 941205;
    exports.default = Random;
});
/*
 * A speed-improved perlin and simplex noise algorithms for 2D.
 *
 * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
 * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
 * Better rank ordering method by Stefan Gustavson in 2012.
 * Converted to Javascript by Joseph Gentle.
 *
 * Version 2012-03-09
 *
 * This code was placed in the public domain by its original author,
 * Stefan Gustavson. You may use it as you see fit, but
 * attribution is appreciated.
 *
 * --------------------
 * TypeScriptified 2016
 */
define("src/Extras/Simplex", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.default = simplex;
    class Grad {
        constructor(x, y, z) {
            this.x = x;
            this.y = y;
            this.z = z;
        }
        dot2(x, y) {
            return this.x * x + this.y * y;
        }
        dot3(x, y, z) {
            return this.x * x + this.y * y + this.z * z;
        }
    }
    const F2 = 0.5 * (Math.sqrt(3) - 1);
    const G2 = (3 - Math.sqrt(3)) / 6;
    const perm = new Array(512);
    const gradP = new Array(512);
    const grad3 = [
        new Grad(1, 1, 0), new Grad(-1, 1, 0), new Grad(1, -1, 0), new Grad(-1, -1, 0),
        new Grad(1, 0, 1), new Grad(-1, 0, 1), new Grad(1, 0, -1), new Grad(-1, 0, -1),
        new Grad(0, 1, 1), new Grad(0, -1, 1), new Grad(0, 1, -1), new Grad(0, -1, -1)
    ];
    const p = [
        151, 160, 137, 91, 90, 15,
        131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,
        190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,
        88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,
        77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,
        102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,
        135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,
        5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,
        223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,
        129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,
        251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,
        49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,
        138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180
    ];
    // This isn't a very good seeding function, but it works ok. It supports 2^16
    // different seed values. Write something better if you need more seeds.
    function seed(seed) {
        if (seed > 0 && seed < 1) {
            // Scale the seed out
            seed *= 65536;
        }
        seed = Math.floor(seed);
        if (seed < 256) {
            seed |= seed << 8;
        }
        for (let i = 0; i < 256; i++) {
            let v;
            if (i & 1) {
                v = p[i] ^ (seed & 255);
            }
            else {
                v = p[i] ^ ((seed >> 8) & 255);
            }
            perm[i] = perm[i + 256] = v;
            gradP[i] = gradP[i + 256] = grad3[v % 12];
        }
    }
    seed(0);
    // 2D simplex noise
    function simplex(xin, yin) {
        let n0, n1, n2; // Noise contributions from the three corners
        // Skew the input space to determine which simplex cell we're in
        const s = (xin + yin) * F2; // Hairy factor for 2D
        let i = Math.floor(xin + s);
        let j = Math.floor(yin + s);
        const t = (i + j) * G2;
        const x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.
        const y0 = yin - j + t;
        // For the 2D case, the simplex shape is an equilateral triangle.
        // Determine which simplex we are in.
        let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords
        if (x0 > y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)
            i1 = 1;
            j1 = 0;
        }
        else { // upper triangle, YX order: (0,0)->(0,1)->(1,1)
            i1 = 0;
            j1 = 1;
        }
        // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and
        // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where
        // c = (3-sqrt(3))/6
        const x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords
        const y1 = y0 - j1 + G2;
        const x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords
        const y2 = y0 - 1 + 2 * G2;
        // Work out the hashed gradient indices of the three simplex corners
        i &= 255;
        j &= 255;
        const gi0 = gradP[i + perm[j]];
        const gi1 = gradP[i + i1 + perm[j + j1]];
        const gi2 = gradP[i + 1 + perm[j + 1]];
        // Calculate the contribution from the three corners
        let t0 = 0.5 - x0 * x0 - y0 * y0;
        if (t0 < 0) {
            n0 = 0;
        }
        else {
            t0 *= t0;
            n0 = t0 * t0 * gi0.dot2(x0, y0); // (x,y) of grad3 used for 2D gradient
        }
        let t1 = 0.5 - x1 * x1 - y1 * y1;
        if (t1 < 0) {
            n1 = 0;
        }
        else {
            t1 *= t1;
            n1 = t1 * t1 * gi1.dot2(x1, y1);
        }
        let t2 = 0.5 - x2 * x2 - y2 * y2;
        if (t2 < 0) {
            n2 = 0;
        }
        else {
            t2 *= t2;
            n2 = t2 * t2 * gi2.dot2(x2, y2);
        }
        // Add contributions from each corner to get the final noise value.
        // The result is scaled to return values in the interval [-1,1].
        return 70 * (n0 + n1 + n2);
    }
});
define("src/Heightfield/ShaderChunks", ["require", "exports", "src/Extras/Utils"], function (require, exports, Utils_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.chunks = exports.getAltitudeFromTextureChunks = exports.diffusePS = exports.layersOffsetParamName = exports.layersScaleParamName = exports.layersFlagsParamName = exports.layersNormalsParamName = exports.layersDiffuseParamName = exports.maxLayersCount = exports.gammaNormalizeChunkPS = exports.gammaNormalizeHeaderPS = exports.startVS = exports.normalCoreVS = exports.normalVS = exports.normalByHeightMapVS = exports.startUv0VS = exports.uv0VS = exports.transformVS = exports.transformDeclVS = exports.transformInstancingVS = exports.instancingVS = exports.getAltitudeFromTextureVS = exports.getFieldChunkBufferCoordVS = exports.getAltitudeFromR8UVS = exports.getAltitudeFromR16UVS = exports.getAltitudeFromRGBA8UVS = exports.getAltitudeFromR32FVS = exports.getFieldCoordsChunkVS = exports.getCurrentFieldXZForCombineInstancingChunkVS = exports.getCurrentFieldXZForInstancingChunkVS = exports.getCurrentFieldXZChunkVS = exports.baseClearSubVS = exports.baseClearVS = exports.heightMapSampler = exports.baseForCombineInstancingVS = exports.baseForInstancingVS = exports.baseOriginalVS = exports.definesVS = exports.littleEndianValue = exports.cameraPositionParamName = exports.splatMapParamName = exports.maxHeightParamName = exports.heightMapParamName = exports.patchLodCoreParamName = exports.patchCoordOffsetParamName = exports.patchInstCoordOffsetAttrName = exports.vertexNormalAttrName = exports.vertexHeightAttrName = exports.vertexCoordAttrName = void 0;
    exports.getAltitudeFromTextureVSCode = getAltitudeFromTextureVSCode;
    exports.getTextureType = getTextureType;
    exports.getSamplerType = getSamplerType;
    exports.getFieldShaderChunks = getFieldShaderChunks;
    exports.vertexCoordAttrName = "vertex_position";
    exports.vertexHeightAttrName = "vertex_height";
    exports.vertexNormalAttrName = "vertex_normal";
    exports.patchInstCoordOffsetAttrName = "vertex_postion_offset";
    exports.patchCoordOffsetParamName = "uPatchCoordOffset";
    exports.patchLodCoreParamName = "uPatchLodCore";
    exports.heightMapParamName = "uHeightMap";
    exports.maxHeightParamName = "uMaxHeight";
    exports.splatMapParamName = "uSplatMap";
    exports.cameraPositionParamName = "uCameraPos";
    exports.littleEndianValue = Utils_mjs_3.littleEndian ? 'true' : 'false';
    exports.definesVS = `
    #define HM_NUM_CHUNKS_X        (%%HM_NUM_CHUNKS_X%%)
    #define HM_NUM_CHUNKS_X_U      (uint(HM_NUM_CHUNKS_X))
    #define HM_CHUNK_SIZE          (%%HM_CHUNK_SIZE%%)
    #define HM_CHUNK_SIZE_U        (uint(HM_CHUNK_SIZE))
    #define HM_CHUNK_SIZE_M1_U     (HM_CHUNK_SIZE_U - 1u)
    #define HM_CHUNK_SIZE_F        (float(HM_CHUNK_SIZE))
    #define FIELD_SIZE             (ivec2(%%FIELD_SIZE_X%%, %%FIELD_SIZE_Z%%))
    #define FIELD_SIZE_F           (vec2(%%FIELD_SIZE_X_F%%, %%FIELD_SIZE_Z_F%%))
    #define FIELD_SIZE_U           (uvec2(FIELD_SIZE))
    #define FIELD_SIZE_H_F         (FIELD_SIZE_F / 2.0)
    #define FIELD_SIZE_H_N_F       (-FIELD_SIZE_H_F)
    #define FIELD_PATCH_SIZE_X     (%%FIELD_PATCH_SIZE_X%%)
    #define FIELD_PATCH_SIZE_M1    (FIELD_PATCH_SIZE_X - 1.0)
    #define FIELD_PATCH_SIZE_M1_H  (FIELD_PATCH_SIZE_M1 / 2.0)
    #define FIELD_PATCH_SIZE_M1_F  (vec2(FIELD_PATCH_SIZE_M1_H, FIELD_PATCH_SIZE_M1_H))
`;
    exports.baseOriginalVS = `
    uniform vec2 ${exports.patchCoordOffsetParamName};

    attribute uvec2 ${exports.vertexCoordAttrName};
`;
    exports.baseForInstancingVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
    attribute uvec2 ${exports.patchInstCoordOffsetAttrName};
`;
    exports.baseForCombineInstancingVS = `
    attribute uvec2 ${exports.vertexCoordAttrName};
    attribute uvec4 ${exports.patchInstCoordOffsetAttrName};
`;
    exports.heightMapSampler = `
    uniform highp %%HEIGHT_MAP_SAMPLER%% ${exports.heightMapParamName};
`;
    exports.baseClearVS = `
    uniform mat4 matrix_viewProjection;
    uniform mat4 matrix_model;
    uniform mat3 matrix_normal;

    uniform vec3 ${exports.cameraPositionParamName};
    
    uniform float ${exports.maxHeightParamName};
    uniform float ${exports.patchLodCoreParamName};

    vec2 dCurrentFieldXZ;
    float dCurrentAltitude;
`;
    exports.baseClearSubVS = `
    vec3 dPositionW;
    mat4 dModelMatrix;
    mat3 dNormalMatrix;

    vec3 dCurrentFieldNormal;
`;
    exports.getCurrentFieldXZChunkVS = `
    vec2 getCurrentFieldXZ() {
        return vec2(${exports.vertexCoordAttrName}) + ${exports.patchCoordOffsetParamName};
    }
`;
    exports.getCurrentFieldXZForInstancingChunkVS = `
    vec2 getCurrentFieldXZ() {
        return vec2(${exports.vertexCoordAttrName} + ${exports.patchInstCoordOffsetAttrName});
    }
`;
    exports.getCurrentFieldXZForCombineInstancingChunkVS = `
    const vec4 rotatePatchXZCoff[4] = vec4[4](
        vec4( 1.0,  0.0,  0.0,  1.0),
        vec4( 0.0,  1.0, -1.0,  0.0),
        vec4(-1.0,  0.0,  0.0, -1.0),
        vec4( 0.0, -1.0,  1.0,  0.0)
    );

    vec2 rotatePatchXZ(vec2 coord, uint angle) {
        vec2 offset = coord - FIELD_PATCH_SIZE_M1_H;
        vec4 transf = rotatePatchXZCoff[angle];
        return FIELD_PATCH_SIZE_M1_H + offset.xx * transf.xz + offset.yy * transf.yw;
    }

    vec2 getCurrentFieldXZ() {
        uint angle = ${exports.patchInstCoordOffsetAttrName}.z;
        vec2 orgXZ = vec2(${exports.vertexCoordAttrName});
        vec2 rotXZ = rotatePatchXZ(orgXZ, angle);
        return rotXZ + vec2(${exports.patchInstCoordOffsetAttrName}.xy) * FIELD_PATCH_SIZE_M1;
    }
`;
    exports.getFieldCoordsChunkVS = `
    vec2 getCurrentFieldUvCoord() {
        vec2 xz = dCurrentFieldXZ;
        vec2 uv = (xz + 0.5) / FIELD_SIZE_F;
        return uv;
    }
    
    uvec2 clampFieldXZ(vec2 xz) {
        return uvec2(clamp(xz, vec2(0.0), FIELD_SIZE_F));
    }
    
    vec2 getFieldXZ(ivec2 offset) {
        return dCurrentFieldXZ + vec2(offset);
    }
`;
    exports.getAltitudeFromR32FVS = `
    float getAltitudeFromTexture(uvec3 coord) {
        return texelFetch(${exports.heightMapParamName}, ivec3(coord), 0).r;
    }
`;
    exports.getAltitudeFromRGBA8UVS = `
    float rgba8uToFloat(uvec4 v) {
        uvec4 bits = ${Utils_mjs_3.littleEndian ? 'v' : 'v.abgr'};
        float sign = 2.0 * step(float(bits[3]), 128.0) - 1.0;
        float expo = float((bits[3] & 127u) * 2u + bits[2] / 128u) - 127.0;
        float sig  = float(bits[0] + bits[1] * 256u + (bits[2] & 127u) * 65536u);
        return sign * (1.0 + sig / 8388607.0) * pow(2.0, expo);
    }

    float getAltitudeFromTexture(uvec3 coord) {
        uvec4 rgba = texelFetch(${exports.heightMapParamName}, ivec3(coord), 0);
        return rgba8uToFloat(rgba);
    }
`;
    exports.getAltitudeFromR16UVS = `
    float getAltitudeFromTexture(uvec3 coord) {
        uvec4 rgba = texelFetch(${exports.heightMapParamName}, ivec3(coord), 0);
        return float(rgba.r) * (${exports.maxHeightParamName} / 65535.0);
    }
`;
    exports.getAltitudeFromR8UVS = `
    float getAltitudeFromTexture(uvec3 coord) {
        uvec4 rgba = texelFetch(${exports.heightMapParamName}, ivec3(coord), 0);
        return float(rgba.r) * (${exports.maxHeightParamName} / 255.0);
    }
`;
    exports.getFieldChunkBufferCoordVS = `
    uvec3 getFieldChunkBufferCoord(uvec2 xz) {
        uvec2 ck    = xz / HM_CHUNK_SIZE_U;
        uvec2 local = xz % HM_CHUNK_SIZE_U;
        uint level  = ck.y * HM_NUM_CHUNKS_X_U + ck.x;
        return uvec3(local, level);
    }

    uvec3 getFieldChunkBufferRelativeCoord(ivec2 offset) {
        vec2  oc = getFieldXZ(offset);
        uvec2 xz = clampFieldXZ(oc);
        return getFieldChunkBufferCoord(xz);
    }
`;
    exports.getAltitudeFromTextureVS = `
    float getAltitude(ivec2 offset) {
        uvec3 coord = getFieldChunkBufferRelativeCoord(offset);
        return getAltitudeFromTexture(coord);
    }
    
    float getCurrentAltitude() {
        uvec2 currn = uvec2(dCurrentFieldXZ);
        uvec3 coord = getFieldChunkBufferCoord(currn);
        return getAltitudeFromTexture(coord);
    }
`;
    exports.instancingVS = ``;
    exports.transformInstancingVS = ``;
    exports.transformDeclVS = ``;
    exports.transformVS = `
#if defined(SHADOW_PASS)
#else
    varying float vPatchLod;
    varying vec2 vUvCoord;
    varying vec2 vFieldPosition;

    varying float vCloseMask;
    varying float vMiddleMask;
#endif

    mat4 getModelMatrix() {
        return matrix_model;
    }

    vec3 getWorldPosition() {
        return dPositionW;
    }
    
    vec4 getPosition() {

        dModelMatrix = getModelMatrix();
        dCurrentFieldXZ = getCurrentFieldXZ();
        dCurrentAltitude = getCurrentAltitude();

        vec2 centeredXZ = FIELD_SIZE_H_N_F + dCurrentFieldXZ;
        vec4 localPos   = vec4(centeredXZ.x, dCurrentAltitude, centeredXZ.y, 1.0);
        
        vec4 posW      = dModelMatrix * localPos;
        vec4 screenPos = matrix_viewProjection * posW;

        dPositionW = posW.xyz;

#if defined(SHADOW_PASS)
#else
        float dis = length(${exports.cameraPositionParamName} - dPositionW);

        vMiddleMask = smoothstep(600.0 + 100.0, 600.0, dis);
        vCloseMask  = smoothstep(200.0 + 50.0, 200.0, dis);

        vFieldPosition = dCurrentFieldXZ;
        vUvCoord       = getCurrentFieldUvCoord();
        vPatchLod      = ${exports.patchLodCoreParamName};
#endif

        return screenPos;
    }
`;
    exports.uv0VS = `
`;
    // FIX: bug with getUv0 for V1 Engine
    exports.startUv0VS = `
    vec2 getUv0() {
        return vec2(0.0);
    }
`;
    exports.normalByHeightMapVS = `
    vec3 getCurrentFieldNormal() {

        float diam  = pow(2.0, ${exports.patchLodCoreParamName} + 1.0);
        float step  = diam / 2.0;
        float left  = getAltitude(ivec2( step,  0));
        float right = getAltitude(ivec2(-step,  0));
        float up    = getAltitude(ivec2( 0,     step));
        float down  = getAltitude(ivec2( 0,    -step));

        vec3 normal = vec3(left, diam, down) - vec3(right, 0, up);

        return normalize(normal);
    }
`;
    exports.normalVS = `
    vec3 getNormal() {
        dNormalMatrix = matrix_normal;
        return normalize(dNormalMatrix * dCurrentFieldNormal);
    }
`;
    exports.normalCoreVS = `
    // FIX: vertex_normal undeclaration
    vec3 vertex_normal;
    vec3 dCurrentFieldNormal;

    vec3 getLocalNormal(vec3 vertexNormal) {

        dCurrentFieldNormal = getCurrentFieldNormal();
        vertex_normal = dCurrentFieldNormal;

        return dCurrentFieldNormal;
    }

    mat3 getNormalMatrix(mat4 modelMatrix) {
        return matrix_normal;
    }
`;
    exports.startVS = `
    void main(void) {

        gl_Position = getPosition();

    #if defined(SHADOW_PASS)
    #else
        dCurrentFieldNormal = getCurrentFieldNormal();
    #endif
`;
    exports.gammaNormalizeHeaderPS = `
    #define GAMMA_NORMALIZE
`;
    exports.gammaNormalizeChunkPS = `
    vec3 autoGammaCorrectInput(vec3 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    vec4 autoGammaCorrectInput(vec4 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }
`;
    exports.maxLayersCount = 5; // Default + R + G + B + A
    exports.layersDiffuseParamName = "uLayersDiffuse";
    exports.layersNormalsParamName = "uLayersNormals";
    exports.layersFlagsParamName = "uLayersFlags";
    exports.layersScaleParamName = "uLayersScale";
    exports.layersOffsetParamName = "uLayersOffset";
    exports.diffusePS = `
    uniform mediump sampler2D ${exports.splatMapParamName};
    uniform mediump sampler2DArray ${exports.layersDiffuseParamName};
    //uniform mediump sampler2DArray ${exports.layersNormalsParamName};
    uniform float ${exports.layersFlagsParamName}[${exports.maxLayersCount}];
    uniform vec2 ${exports.layersScaleParamName}[${exports.maxLayersCount}];
    uniform vec2 ${exports.layersOffsetParamName}[${exports.maxLayersCount}];

    varying float vPatchLod;
    varying vec2 vUvCoord;
    varying vec2 vFieldPosition;

    varying float vCloseMask;
    varying float vMiddleMask;

    const float closeUvScale  = 1.0;
    const float middleUvScale = 0.6;
    const float farUvScale    = 0.3;

    vec3 distanceDiffuseTexture(vec2 uv, int level) {
        vec3 finalUv = vec3(${exports.layersOffsetParamName}[level] + uv * ${exports.layersScaleParamName}[level], level);
        //vec3 finalTx = texture(${exports.layersDiffuseParamName}, finalUv * vec3(farUvScale, farUvScale, 1.0)).rgb;
        //finalTx = mix(finalTx, texture(${exports.layersDiffuseParamName}, finalUv * vec3(middleUvScale, middleUvScale, 1.0)).rgb, vMiddleMask);
        //finalTx = mix(finalTx, texture(${exports.layersDiffuseParamName}, finalUv * vec3(closeUvScale, closeUvScale, 1.0)).rgb, vCloseMask);
        return texture(${exports.layersDiffuseParamName}, finalUv).rgb;
    }

    void getAlbedo() {

        vec4 splatMap = texture2D(${exports.splatMapParamName}, vUvCoord);
        vec3 albedo   = distanceDiffuseTexture(vUvCoord, 0);

        for (int i = 1; i < ${exports.maxLayersCount}; ++i) {

            float splatFactor = splatMap[i - 1];

#if defined(WEBGPU)
            if (${exports.layersFlagsParamName}[i] > 0.0) {
#else
            if (${exports.layersFlagsParamName}[i] > 0.0 && splatFactor > 0.0) {
#endif
                albedo = mix(albedo, distanceDiffuseTexture(vUvCoord, i), splatFactor);
            }
        }
        
        dAlbedo = autoGammaCorrectInput(albedo);
    }
`;
    exports.getAltitudeFromTextureChunks = {
        getAltitudeFromR32FVS: exports.getAltitudeFromR32FVS,
        getAltitudeFromRGBA8UVS: exports.getAltitudeFromRGBA8UVS,
        getAltitudeFromR16UVS: exports.getAltitudeFromR16UVS,
        getAltitudeFromR8UVS: exports.getAltitudeFromR8UVS,
    };
    exports.chunks = Object.assign(Object.assign({}, exports.getAltitudeFromTextureChunks), { heightMapSampler: exports.heightMapSampler,
        getCurrentFieldXZForCombineInstancingChunkVS: exports.getCurrentFieldXZForCombineInstancingChunkVS,
        getCurrentFieldXZForInstancingChunkVS: exports.getCurrentFieldXZForInstancingChunkVS,
        getCurrentFieldXZChunkVS: exports.getCurrentFieldXZChunkVS,
        getAltitudeFromTextureVS: exports.getAltitudeFromTextureVS,
        getFieldCoordsChunkVS: exports.getFieldCoordsChunkVS,
        getFieldChunkBufferCoordVS: exports.getFieldChunkBufferCoordVS,
        normalByHeightMapVS: exports.normalByHeightMapVS,
        // Vertex
        definesVS: exports.definesVS,
        baseForCombineInstancingVS: exports.baseForCombineInstancingVS,
        baseForInstancingVS: exports.baseForInstancingVS,
        baseOriginalVS: exports.baseOriginalVS,
        baseClearVS: exports.baseClearVS,
        baseClearSubVS: exports.baseClearSubVS,
        transformDeclVS: exports.transformDeclVS,
        transformVS: exports.transformVS,
        instancingVS: exports.instancingVS,
        transformInstancingVS: exports.transformInstancingVS,
        normalVS: exports.normalVS,
        normalCoreVS: exports.normalCoreVS,
        uv0VS: exports.uv0VS,
        startVS: exports.startVS,
        startUv0VS: exports.startUv0VS,
        // Fragment
        gammaNormalizeHeaderPS: exports.gammaNormalizeHeaderPS,
        gammaNormalizeChunkPS: exports.gammaNormalizeChunkPS,
        diffusePS: exports.diffusePS });
    function getAltitudeFromTextureVSCode(format, chunksStore) {
        switch (format) {
            case 'r32f': return chunksStore.getAltitudeFromR32FVS;
            case 'rgba': return chunksStore.getAltitudeFromRGBA8UVS;
            case 'r16u': return chunksStore.getAltitudeFromR16UVS;
            case 'r8u': return chunksStore.getAltitudeFromR8UVS;
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getTextureType(format) {
        switch (format) {
            case 'r32f': return pc.PIXELFORMAT_R32F;
            case 'rgba': return pc.PIXELFORMAT_RGBA8U;
            case 'r16u': return pc.PIXELFORMAT_R16U;
            case 'r8u': return pc.PIXELFORMAT_R8U;
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getSamplerType(format) {
        switch (format) {
            case 'r32f': return 'sampler2DArray';
            case 'rgba': return 'usampler2DArray';
            case 'r16u': return 'usampler2DArray';
            case 'r8u': return 'usampler2DArray';
            default: break;
        }
        throw new Error('Format not supported');
    }
    function getFieldShaderChunks({ width, depth, patchSize, heightMapChunkSize, instancing, heightMapFormat, chunksStore = exports.chunks, engineVersion = 'v1', }) {
        const definesVS = chunksStore.definesVS
            .replace('%%HM_NUM_CHUNKS_X%%', String((width - 1) / (heightMapChunkSize - 1) | 0))
            .replace('%%HM_CHUNK_SIZE%%', String(heightMapChunkSize | 0))
            .replace('%%FIELD_SIZE_X%%', String(width))
            .replace('%%FIELD_SIZE_Z%%', String(depth))
            .replace('%%FIELD_SIZE_X_F%%', width.toFixed(1))
            .replace('%%FIELD_SIZE_Z_F%%', depth.toFixed(1))
            .replace('%%FIELD_PATCH_SIZE_X%%', patchSize.toFixed(1));
        const getAltitudeFromTextureVS = getAltitudeFromTextureVSCode(heightMapFormat, chunksStore);
        const hmVS = chunksStore.heightMapSampler.replaceAll('%%HEIGHT_MAP_SAMPLER%%', getSamplerType(heightMapFormat));
        const baseClearVS = chunksStore.baseClearVS + hmVS;
        const baseCoordVS = instancing === 'combine' ? chunksStore.baseForCombineInstancingVS :
            instancing === 'simple' ? chunksStore.baseForInstancingVS :
                chunksStore.baseOriginalVS;
        const currentFieldXZVS = instancing === 'combine' ? chunksStore.getCurrentFieldXZForCombineInstancingChunkVS :
            instancing === 'simple' ? chunksStore.getCurrentFieldXZForInstancingChunkVS :
                chunksStore.getCurrentFieldXZChunkVS;
        if (engineVersion === 'v2') {
            const normalCoreVS = chunksStore.normalByHeightMapVS + chunksStore.normalCoreVS;
            const transformVS = definesVS
                + baseCoordVS
                + baseClearVS
                + currentFieldXZVS
                + getAltitudeFromTextureVS
                + chunksStore.getFieldCoordsChunkVS
                + chunksStore.getFieldChunkBufferCoordVS
                + chunksStore.getAltitudeFromTextureVS
                + chunksStore.transformVS;
            const diffusePS = chunksStore.gammaNormalizeChunkPS
                + chunksStore.diffusePS;
            return {
                // Vertex
                normalCoreVS,
                transformVS,
                transformCoreVS: '',
                transformInstancingVS: '',
                // Fragment
                diffusePS,
            };
        }
        const startVS = chunksStore.normalByHeightMapVS + chunksStore.startUv0VS + chunksStore.startVS;
        const baseVS = baseCoordVS + baseClearVS + chunksStore.baseClearSubVS;
        const transformVS = definesVS
            + currentFieldXZVS
            + getAltitudeFromTextureVS
            + chunksStore.getFieldCoordsChunkVS
            + chunksStore.getFieldChunkBufferCoordVS
            + chunksStore.getAltitudeFromTextureVS
            + chunksStore.transformVS;
        const diffusePS = chunksStore.gammaNormalizeHeaderPS
            + chunksStore.gammaNormalizeChunkPS
            + chunksStore.diffusePS;
        return {
            // Vertex
            baseVS,
            transformVS,
            normalVS: chunksStore.normalVS,
            uv0VS: chunksStore.uv0VS,
            startVS,
            transformDeclVS: chunksStore.transformDeclVS,
            instancingVS: chunksStore.instancingVS,
            // Fragment
            diffusePS,
        };
    }
});
define("src/Heightfield/GPUHeightMapBuffer", ["require", "exports", "src/Extras/Utils", "src/Core/SquareIterator", "src/Heightfield/ShaderChunks", "src/Core/PatchedHeightMap"], function (require, exports, Utils_mjs_4, SquareIterator_mjs_1, ShaderChunks_mjs_1, PatchedHeightMap_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getHeightMapFormat = getHeightMapFormat;
    exports.getHeightMapChunkBufferType = getHeightMapChunkBufferType;
    SquareIterator_mjs_1 = __importDefault(SquareIterator_mjs_1);
    PatchedHeightMap_mjs_1 = __importDefault(PatchedHeightMap_mjs_1);
    class GPUHeightMapBuffer extends SquareIterator_mjs_1.default {
        get app() { return this._app; }
        get format() { return this._format; }
        get texture() { return this._texture; }
        constructor(app, field) {
            super(field);
            this._app = app;
            this._init();
        }
        destroy() {
            var _a;
            (_a = this._texture) === null || _a === void 0 ? void 0 : _a.destroy();
        }
        _init() {
            var _a;
            (_a = this._texture) === null || _a === void 0 ? void 0 : _a.destroy();
            const device = this._app.graphicsDevice;
            const heightFormat = getHeightMapFormat(device, this.field.heightMap);
            const format = (0, ShaderChunks_mjs_1.getTextureType)(heightFormat);
            const bufFormat = getHeightMapChunkBufferType(device, format);
            const dataChunkSize = this.field.heightMap.dataChunkSize;
            const chunks = this.field.heightMap.getChunksBuffers(bufFormat);
            this._format = heightFormat;
            this._textureLevelsType = bufFormat;
            this._texture = new pc.Texture(device, {
                width: dataChunkSize,
                height: dataChunkSize,
                format: format,
                mipmaps: false,
                minFilter: pc.FILTER_NEAREST,
                magFilter: pc.FILTER_NEAREST,
                addressU: pc.ADDRESS_CLAMP_TO_EDGE,
                addressV: pc.ADDRESS_CLAMP_TO_EDGE,
                addressW: pc.ADDRESS_CLAMP_TO_EDGE,
                flipY: !device.isWebGPU,
                arrayLength: chunks.length,
                levels: [chunks]
            });
        }
        updateHeightMapChunk(chunkX, chunkZ) {
            // The height map is updated by updating the entire chunk,
            // which is sufficient if the chunk size is not large.
            const dataChunkSize = this.field.heightMap.dataChunkSize;
            const level = this.field.heightMap.getChunkIndex(chunkX, chunkZ);
            const buffer = this.field.heightMap.getChunkBuffer(this._textureLevelsType, chunkX, chunkZ);
            if (this._app.graphicsDevice.isWebGL2) {
                const gl = this._app.graphicsDevice.gl;
                const textureFormat = this._texture.impl._glFormat;
                const texturePixelT = this._texture.impl._glPixelType;
                const textureTarget = this._texture.impl._glTarget;
                const textureObject = this._texture.impl._glTexture;
                gl.bindTexture(textureTarget, textureObject);
                gl.texSubImage3D(gl.TEXTURE_2D_ARRAY, 0, 0, 0, level, dataChunkSize, dataChunkSize, 1, textureFormat, texturePixelT, buffer);
            }
            else if (this._app.graphicsDevice.isWebGPU) {
                const webgpu = this._app.graphicsDevice.wgpu;
                const texture = (this._texture.impl.gpuTexture);
                const formatInfo = pc.pixelFormatInfo.get(this._texture.format);
                if (!formatInfo || !formatInfo.size) {
                    throw new Error("Invalid texture format");
                }
                webgpu.queue.writeTexture({
                    texture: texture,
                    origin: [0, 0, level]
                }, buffer, {
                    offset: 0,
                    bytesPerRow: dataChunkSize * formatInfo.size,
                    rowsPerImage: dataChunkSize
                }, {
                    width: dataChunkSize,
                    height: dataChunkSize,
                    depthOrArrayLayers: 1
                });
            }
        }
        updateHeightMap(zone) {
            // Ignore update if height map need upload
            if (this._texture._needsUpload) {
                return;
            }
            this._forEach(zone, this.field.heightMap.dataChunkSize, this.field.heightMap.dataNumChunksX, this.field.heightMap.dataNumChunksZ, (patchIndex, x, z) => {
                this.updateHeightMapChunk(x, z);
            });
        }
    }
    exports.default = GPUHeightMapBuffer;
    function getHeightMapFormat(graphicsDevice, heightMap) {
        let hmFormat = 'r32f';
        if (heightMap instanceof PatchedHeightMap_mjs_1.default) {
            switch (heightMap.valueType) {
                case '32f':
                    hmFormat = 'r32f';
                    break;
                case '16u':
                    hmFormat = 'r16u';
                    break;
                case '8u':
                    hmFormat = 'r8u';
                    break;
                default: throw new Error("Unsupported value type");
            }
        }
        // Use polyfill float texture by rgba->float converter by shader
        if (hmFormat === 'r32f' && !(0, Utils_mjs_4.checkSupportR32FTexture)(graphicsDevice)) {
            hmFormat = 'rgba';
        }
        return hmFormat;
    }
    function getHeightMapChunkBufferType(graphicsDevice, format) {
        if (format === pc.PIXELFORMAT_R32F) {
            return Float32Array;
        }
        if (format === pc.PIXELFORMAT_R16U) {
            return Uint16Array;
        }
        if (format === pc.PIXELFORMAT_R8U) {
            return Uint8Array;
        }
        throw new Error('Unsupported format');
    }
});
define("src/Heightfield/Brush", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
define("src/Heightfield/ColorPainterShaders", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.fragmentInvertShader = exports.fragmentShader = exports.factorMethod = exports.vertexShader = void 0;
    exports.vertexShader = `
    attribute vec3 aPosition;
    attribute vec2 aUv0;

    uniform mat4 matrix_model;
    uniform mat4 matrix_viewProjection;

    varying vec2 vUv0;

    void main(void)
    {
        vUv0 = aUv0;
        gl_Position = matrix_viewProjection * matrix_model * vec4(aPosition, 1.0);
    }
`;
    exports.factorMethod = `
    varying vec2 vUv0;

    uniform sampler2D uHeightMap;
    uniform float uBrushOpacity;
    uniform vec4 uBrushMask;

    float getFactor() {
        vec4 heightMap = texture2D(uHeightMap, vUv0);
        float height   = (heightMap.r + heightMap.g + heightMap.b) / 3.0 / heightMap.a;
        float factor   = height * uBrushOpacity;
        return factor;
    }
`;
    exports.fragmentShader = `
    ${exports.factorMethod}

    void main(void)
    {
        float factor = getFactor();
        vec4 color = vec4(uBrushMask * factor);

        gl_FragColor = color;
    }
`;
    exports.fragmentInvertShader = `
    ${exports.factorMethod}

    void main(void)
    {
        float levels = 4.0;
        float factor = getFactor();
        vec4 color   = vec4(factor);

        if (uBrushMask.r > 0.0) { color.r = 0.0; levels -= 1.0; }
        if (uBrushMask.g > 0.0) { color.g = 0.0; levels -= 1.0; }
        if (uBrushMask.b > 0.0) { color.b = 0.0; levels -= 1.0; }
        if (uBrushMask.a > 0.0) { color.a = 0.0; levels -= 1.0; }

        gl_FragColor = color / levels;
    }
`;
});
define("src/Heightfield/ColorPainter", ["require", "exports", "src/Heightfield/ColorPainterShaders", "src/Extras/Utils"], function (require, exports, ColorPainterShaders_mjs_1, Utils_mjs_5) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.painterCameraFar = void 0;
    exports.painterCameraFar = 10;
    class ColorPainter {
        get painting() { return this._painting; }
        get cameraFar() { return exports.painterCameraFar; }
        get background() { return this._buffer; }
        constructor(app, buffer, layerName) {
            this._painting = false;
            this._painterMask = new Float32Array(4);
            this._layerName = layerName;
            this._buffer = buffer;
            this._app = app;
            this._initCamera();
            this._initShaders();
            this._initMaterials();
            this._initEntities();
        }
        _initCamera() {
            const painterLayer = this._app.scene.layers.getLayerByName(this._layerName);
            this._painterRenderTarget = new pc.RenderTarget({
                colorBuffer: this._buffer,
                flipY: this._app.graphicsDevice.isWebGPU,
                depth: false,
            });
            this._painterCameraEntity = new pc.Entity('TerrainPainterCamera');
            this._painterCameraEntity.setLocalPosition(0, 0, exports.painterCameraFar);
            this._painterCameraEntity.lookAt(0, 0, 0);
            this._painterCameraEntity.addComponent('camera', {
                projection: pc.PROJECTION_ORTHOGRAPHIC,
                clearColorBuffer: false,
                clearDepthBuffer: false,
                priority: -1,
                layers: [painterLayer.id],
                nearClip: 0.1,
                farClip: exports.painterCameraFar * 2,
                renderTarget: this._painterRenderTarget,
            });
            this._app.root.addChild(this._painterCameraEntity);
            this._painterCameraEntity.enabled = false;
            this._painterCameraEntity.camera.frustumCulling = false;
            this._painterCameraEntity.camera.orthoHeight = exports.painterCameraFar;
        }
        _initEntities() {
            const painterLayer = this._app.scene.layers.getLayerByName(this._layerName);
            painterLayer.transparentSortMode = pc.SORTMODE_MANUAL;
            this._painterEntity = new pc.Entity('TerrainBrushPainter');
            this._painterEntity.addComponent('render', {
                type: 'plane',
                layers: [painterLayer.id],
                material: this._painterMaterial,
                castShadows: false,
                castShadowsLightmap: false,
                receiveShadows: false
            });
            this._painterInvertEntity = new pc.Entity('TerrainBrushPainterInvert');
            this._painterInvertEntity.addComponent('render', {
                type: 'plane',
                layers: [painterLayer.id],
                material: this._painterInvertMaterial,
                castShadows: false,
                castShadowsLightmap: false,
                receiveShadows: false,
            });
            this._painterEntity.render.meshInstances[0].drawOrder = 1;
            this._painterInvertEntity.render.meshInstances[0].drawOrder = 0;
            this._app.root.addChild(this._painterInvertEntity);
            this._app.root.addChild(this._painterEntity);
            this._painterInvertEntity.setLocalEulerAngles(90, 0, 0);
            this._painterEntity.setLocalEulerAngles(90, 0, 0);
            this._painterInvertEntity.enabled = false;
            this._painterEntity.enabled = false;
        }
        _initShaders() {
            const vertex = ColorPainterShaders_mjs_1.vertexShader;
            const fragment = (0, Utils_mjs_5.setPrecision)(this._app.graphicsDevice, ColorPainterShaders_mjs_1.fragmentShader);
            const fragmentInvert = (0, Utils_mjs_5.setPrecision)(this._app.graphicsDevice, ColorPainterShaders_mjs_1.fragmentInvertShader);
            if (pc.ShaderMaterial) {
                this._painterMaterial = new pc.ShaderMaterial({
                    uniqueName: 'TerrainPainterFragmentShader',
                    vertexGLSL: vertex,
                    fragmentGLSL: fragment,
                    attributes: {
                        aPosition: pc.SEMANTIC_POSITION,
                        aUv0: pc.SEMANTIC_TEXCOORD0
                    }
                });
                this._painterInvertMaterial = new pc.ShaderMaterial({
                    uniqueName: 'TerrainPainterInvertFragmentShader',
                    vertexGLSL: vertex,
                    fragmentGLSL: fragmentInvert,
                    attributes: {
                        aPosition: pc.SEMANTIC_POSITION,
                        aUv0: pc.SEMANTIC_TEXCOORD0
                    }
                });
                return;
            }
            this._painterShader = pc.createShaderFromCode(this._app.graphicsDevice, vertex, fragment, 'TerrainPainterFragmentShader', {
                aPosition: pc.SEMANTIC_POSITION,
                aUv0: pc.SEMANTIC_TEXCOORD0
            });
            this._painterInvertShader = pc.createShaderFromCode(this._app.graphicsDevice, vertex, fragmentInvert, 'TerrainPainterInvertFragmentShader', {
                aPosition: pc.SEMANTIC_POSITION,
                aUv0: pc.SEMANTIC_TEXCOORD0
            });
        }
        _initMaterials() {
            // Engine v1 not support ShaderMaterial
            // use old methods
            if (!pc.ShaderMaterial) {
                this._painterMaterial = new pc.Material();
                this._painterInvertMaterial = new pc.Material();
                /* @ts-ignore */
                this._painterMaterial.shader = this._painterShader;
                /* @ts-ignore */
                this._painterInvertMaterial.shader = this._painterInvertShader;
            }
            this._painterMaterial.name = 'BrushPainterMaterial';
            this._painterMaterial.blendType = pc.BLEND_ADDITIVE;
            this._painterMaterial.update();
            this._painterInvertMaterial.name = 'BrushPainterInvertMaterial';
            this._painterInvertMaterial.blendType = pc.BLEND_SUBTRACTIVE;
            this._painterInvertMaterial.update();
        }
        _updateRuntimeSettings(dt) {
            const originalOpacity = this._brushSettings.opacity;
            const opacity = originalOpacity;
            this._painterMaterial.setParameter('uBrushOpacity', opacity);
            this._painterInvertMaterial.setParameter('uBrushOpacity', opacity);
        }
        _updatePositionAndScale(x, y, scaleWidth, scaleHeight) {
            const far = this.cameraFar * 2;
            const ration = this.background.width / this.background.height;
            x = x * far * ration - this.cameraFar * ration;
            y = y * far - this.cameraFar;
            scaleWidth = scaleWidth * this.background.width / far / 2.5;
            scaleHeight = scaleHeight * this.background.height / far / 2.5;
            this._setScale(scaleWidth, scaleHeight);
            this._setPosition(x, y);
        }
        startPaint(dt, x, y, scaleWidth, scaleHeight) {
            this._updateRuntimeSettings(dt);
            this._updatePositionAndScale(x, y, scaleWidth, scaleHeight);
            this._painting = true;
            this._painterInvertEntity.enabled = true;
            this._painterEntity.enabled = true;
            this._painterCameraEntity.enabled = true;
        }
        stopPaint() {
            this._painting = false;
            this._painterInvertEntity.enabled = false;
            this._painterEntity.enabled = false;
            this._painterCameraEntity.enabled = false;
        }
        _setScale(x, y) {
            this._painterEntity.setLocalScale(x, 1, y);
            this._painterInvertEntity.setLocalScale(x, 1, y);
        }
        _setPosition(x, y) {
            this._painterEntity.setLocalPosition(x, y, 0);
            this._painterInvertEntity.setLocalPosition(x, y, 0);
        }
        updateSettings(brushSettings, activeLayer) {
            this._painterMask.fill(0);
            if (activeLayer > 0) {
                this._painterMask[activeLayer - 1] = 1;
            }
            const brushTexture = brushSettings.textures[brushSettings.active].resource;
            this._painterMaterial.setParameter('uBrushMask', this._painterMask);
            this._painterMaterial.setParameter('uHeightMap', brushTexture);
            this._painterInvertMaterial.setParameter('uBrushMask', this._painterMask);
            this._painterInvertMaterial.setParameter('uHeightMap', brushTexture);
            this._brushSettings = brushSettings;
        }
    }
    exports.default = ColorPainter;
});
define("src/Heightfield/Enums", ["require", "exports", "src/Extras/EnumConverter"], function (require, exports, EnumConverter_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.fieldHeightValueTypeEnum = exports.fieldHeightValueTypeDefault = exports.fieldPatchSizeEnum = exports.fieldPatchSizeEnumDefault = exports.fieldSizeEnum = exports.fieldSizeEnumDefault = void 0;
    exports.fieldSizeEnumDefault = 513;
    exports.fieldSizeEnum = (0, EnumConverter_mjs_1.mapEnum)({
        '128': 129,
        '256': 257,
        '512': 513,
        '1024': 1025,
        '2048': 2049,
        '4096': 4097,
        '8192': 8193,
        '16384': 16385,
    });
    exports.fieldPatchSizeEnumDefault = 33;
    exports.fieldPatchSizeEnum = (0, EnumConverter_mjs_1.mapEnum)({
        '16': 17,
        '32': 33,
        '64': 65,
        '128': 129,
        '256': 257,
        '512': 513,
        '1024': 1025,
        '2048': 2049,
    });
    exports.fieldHeightValueTypeDefault = '32f';
    exports.fieldHeightValueTypeEnum = (0, EnumConverter_mjs_1.mapEnum)({
        '32F': '32f',
        '16U': '16u',
        '8U': '8u'
    });
});
define("src/Heightfield/IPatchInstancing", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.updateBuffer = updateBuffer;
    function updateBuffer(vertexBuffer, data, length) {
        if (vertexBuffer) {
            const device = vertexBuffer.device;
            if (device.isWebGL2) {
                const gl = device.gl;
                gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer.impl.bufferId);
                gl.bufferSubData(gl.ARRAY_BUFFER, 0, data, 0, length);
            }
            else if (device.isWebGPU) {
                const wgpu = device.wgpu;
                const buffer = vertexBuffer.impl.buffer;
                wgpu.queue.writeBuffer(buffer, 0, data, 0, length);
            }
            else {
                console.error('Unsupported device');
            }
        }
    }
});
define("src/Heightfield/PatchCombineInstancing", ["require", "exports", "src/Core/PatchCombineInstancing", "src/Heightfield/IPatchInstancing"], function (require, exports, PatchCombineInstancing_mjs_1, IPatchInstancing_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    PatchCombineInstancing_mjs_1 = __importStar(PatchCombineInstancing_mjs_1);
    class PatchCombineInstancing extends PatchCombineInstancing_mjs_1.default {
        constructor() {
            super(...arguments);
            this.bufferType = PatchCombineInstancing_mjs_1.TComInstCoordsOffsetArrType;
            this.itemBufferSize = 4;
        }
        get meshInstanceCount() { return this.data.length * PatchCombineInstancing_mjs_1.combineGroupLen; }
        appendMeshInstances(arr, offset = 0) {
            let meshIndex = 0;
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    if (chunk.object) {
                        arr[meshIndex++ + offset] = chunk.object;
                    }
                }
            }
            return meshIndex;
        }
        begin(castShadow = false) {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    const chunkObject = chunk.object;
                    chunk.count = 0;
                    chunk.hasChanges = false;
                    if (chunkObject) {
                        chunkObject.visible = false;
                        chunkObject.castShadow = castShadow;
                    }
                }
            }
        }
        end() {
            for (let c = 0; c < this.data.length; c++) {
                for (let i = 0; i < PatchCombineInstancing_mjs_1.combineGroupLen; i++) {
                    const chunk = this.data[c].groups[i];
                    const chunkObject = chunk.object;
                    if (chunkObject && chunk.count > 0) {
                        chunkObject.instancingCount = chunk.count;
                        if (chunk.hasChanges && chunkObject.instancingData) {
                            // TODO: performance improvement
                            //chunkObject.instancingData.vertexBuffer?.unlock();
                            const length = chunk.count * PatchCombineInstancing_mjs_1.comInstDataSize;
                            const vertexBuffer = chunkObject.instancingData.vertexBuffer;
                            (0, IPatchInstancing_mjs_1.updateBuffer)(vertexBuffer, chunk.data, length);
                        }
                    }
                }
            }
        }
    }
    exports.default = PatchCombineInstancing;
});
define("src/Heightfield/PatchInstancing", ["require", "exports", "src/Core/LodInfo", "src/Core/PatchInstancing", "src/Heightfield/IPatchInstancing"], function (require, exports, LodInfo_mjs_4, PatchInstancing_mjs_1, IPatchInstancing_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class PatchInstancing extends PatchInstancing_mjs_1.PatchInstancing {
        constructor() {
            super(...arguments);
            this.bufferType = PatchInstancing_mjs_1.TInstCoordsOffsetArrType;
            this.itemBufferSize = 2;
        }
        get meshInstanceCount() { return this.data.length * LodInfo_mjs_4.LEFT * LodInfo_mjs_4.RIGHT * LodInfo_mjs_4.TOP * LodInfo_mjs_4.BOTTOM; }
        appendMeshInstances(arr, offset = 0) {
            let i = 0;
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                if (chunk.object) {
                                    arr[i++ + offset] = chunk.object;
                                }
                            }
                        }
                    }
                }
            }
            return i;
        }
        begin(castShadow = false) {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                const chunkObject = chunk.object;
                                chunk.count = 0;
                                chunk.hasChanges = false;
                                if (chunkObject) {
                                    chunkObject.visible = false;
                                    chunkObject.castShadow = castShadow;
                                }
                            }
                        }
                    }
                }
            }
        }
        end() {
            for (let c = 0; c < this.data.length; c++) {
                for (let l = 0; l < LodInfo_mjs_4.LEFT; l++) {
                    for (let r = 0; r < LodInfo_mjs_4.RIGHT; r++) {
                        for (let t = 0; t < LodInfo_mjs_4.TOP; t++) {
                            for (let b = 0; b < LodInfo_mjs_4.BOTTOM; b++) {
                                const chunk = this.data[c][l][r][t][b];
                                const chunkObject = chunk.object;
                                if (chunkObject && chunk.count > 0) {
                                    chunkObject.instancingCount = chunk.count;
                                    if (chunk.hasChanges && chunkObject.instancingData) {
                                        // TODO: performance improvement
                                        //chunkObject.instancingData.vertexBuffer?.unlock();
                                        const length = chunk.count * PatchInstancing_mjs_1.instDataSize;
                                        const vertexBuffer = chunkObject.instancingData.vertexBuffer;
                                        (0, IPatchInstancing_mjs_2.updateBuffer)(vertexBuffer, chunk.data, length);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    exports.default = PatchInstancing;
});
define("src/Heightfield/GPUBuffersManager", ["require", "exports", "src/Core/CoordsBuffer"], function (require, exports, CoordsBuffer_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class GPUBuffersManager {
        get heightMap() { return this._heightMap; }
        get sharedIndexBuffer() { return this._sharedIndexBuffer; }
        get sharedVertexBuffer() { return this._sharedVertexBuffer; }
        constructor(heightMap) {
            this._heightMap = heightMap;
            this.updateIndexBuffer();
            this.updateVertexBuffer();
        }
        destroy() {
            var _a, _b;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._sharedVertexBuffer) === null || _b === void 0 ? void 0 : _b.destroy();
        }
        _buildVertexFormat(graphicsDevice, vertexBuffer) {
            const coordsFormat = (vertexBuffer.patchVertexBufferTyped instanceof Uint8Array) ? pc.TYPE_UINT8 : pc.TYPE_UINT16;
            const vertexDesc = [{
                    semantic: pc.SEMANTIC_POSITION,
                    components: CoordsBuffer_mjs_2.coordsVertexSize,
                    type: coordsFormat,
                    normalize: false,
                    asInt: true
                }];
            return new pc.VertexFormat(graphicsDevice, vertexDesc, vertexBuffer.patchVertexBufferLength);
        }
        updateIndexBuffer() {
            var _a;
            const graphicsDevice = this._heightMap.app.graphicsDevice;
            const patchIndices = this._heightMap.field.patchIndices;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            this._sharedIndexBuffer = new pc.IndexBuffer(graphicsDevice, pc.INDEXFORMAT_UINT32, patchIndices.length, pc.BUFFER_STATIC, patchIndices, { storage: false });
        }
        updateVertexBuffer() {
            var _a;
            const graphicsDevice = this._heightMap.app.graphicsDevice;
            const coordBuffer = this._heightMap.field.patchVertices;
            const bufferData = coordBuffer.patchVertexBufferData;
            const format = this._buildVertexFormat(graphicsDevice, coordBuffer);
            (_a = this._sharedVertexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            this._sharedVertexBuffer = new pc.VertexBuffer(graphicsDevice, format, format.vertexCount, {
                usage: pc.BUFFER_STATIC,
                storage: false,
                data: bufferData,
            });
        }
        _buildInstancingVertexFormat(instancer) {
            const graphicsDevice = this._heightMap.app.graphicsDevice;
            const type = instancer.bufferType === Uint16Array ? pc.TYPE_UINT16 :
                instancer.bufferType === Uint8Array ? pc.TYPE_UINT8 :
                    pc.TYPE_FLOAT32;
            return new pc.VertexFormat(graphicsDevice, [{
                    semantic: pc.SEMANTIC_ATTR10,
                    components: instancer.itemBufferSize,
                    type: type,
                    normalize: false,
                    asInt: true
                }]);
        }
        buildInstancingVertexBuffer(instancer, data) {
            const vertexFormat = this._buildInstancingVertexFormat(instancer);
            const numVertices = data.length / instancer.itemBufferSize;
            return new pc.VertexBuffer(vertexFormat.device, vertexFormat, numVertices, {
                usage: pc.BUFFER_GPUDYNAMIC,
                data: data,
                storage: false,
            });
        }
    }
    exports.default = GPUBuffersManager;
});
define("src/Heightfield/GPUWireframeBuffersManager", ["require", "exports", "src/Core/LodInfo"], function (require, exports, LodInfo_mjs_5) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    const offsets = [[0, 1], [1, 2], [2, 0]];
    class GPUWireframeBufferManager {
        get lodInfo() { return this._lodInfo; }
        get buffersManager() { return this._byffersManager; }
        constructor(byffersManager, lodInfo) {
            this._byffersManager = byffersManager;
            this._lodInfo = lodInfo;
            this._initData();
        }
        _initData() {
            this._data = new Array(this._lodInfo.length);
            for (let lodCore = 0; lodCore < this._data.length; lodCore++) {
                const arr = new Array(LodInfo_mjs_5.LEFT);
                for (let l = 0; l < LodInfo_mjs_5.LEFT; l++) {
                    arr[l] = new Array(LodInfo_mjs_5.RIGHT);
                    for (let r = 0; r < LodInfo_mjs_5.RIGHT; r++) {
                        arr[l][r] = new Array(LodInfo_mjs_5.TOP);
                        for (let t = 0; t < LodInfo_mjs_5.TOP; t++) {
                            arr[l][r][t] = new Array(LodInfo_mjs_5.BOTTOM);
                            for (let b = 0; b < LodInfo_mjs_5.BOTTOM; b++) {
                                arr[l][r][t][b] = {
                                    buffer: null,
                                    primitive: {
                                        type: pc.PRIMITIVE_LINES,
                                        base: 0,
                                        baseVertex: 0,
                                        count: 0,
                                        indexed: true
                                    }
                                };
                            }
                        }
                    }
                }
                this._data[lodCore] = arr;
            }
        }
        _recreateWireframeData(lod) {
            var _a;
            const lodInfo = this._lodInfo[lod.core].info[lod.left][lod.right][lod.top][lod.bottom];
            const bufferScope = this._data[lod.core][lod.left][lod.right][lod.top][lod.bottom];
            (_a = bufferScope.buffer) === null || _a === void 0 ? void 0 : _a.destroy();
            const indexBuffer = this._byffersManager.sharedIndexBuffer;
            const numVertices = this._byffersManager.sharedVertexBuffer.numVertices;
            const seen = new Set();
            const base = lodInfo.start;
            const count = lodInfo.count;
            const srcIndices = new Uint32Array(indexBuffer.storage);
            const tmpIndices = [];
            for (let j = base; j < base + count; j += 3) {
                for (let k = 0; k < 3; k++) {
                    const i1 = srcIndices[j + offsets[k][0]];
                    const i2 = srcIndices[j + offsets[k][1]];
                    const hash = (i1 > i2) ? ((i2 * numVertices) + i1) : ((i1 * numVertices) + i2);
                    if (!seen.has(hash)) {
                        seen.add(hash);
                        tmpIndices.push(i1, i2);
                    }
                }
            }
            const dstIndices = new Uint32Array(tmpIndices);
            bufferScope.primitive.count = dstIndices.length;
            bufferScope.buffer = new pc.IndexBuffer(indexBuffer.device, pc.INDEXFORMAT_UINT32, dstIndices.length, pc.BUFFER_STATIC, dstIndices.buffer, { storage: false });
        }
        _getOrCreateWireframeData(lod) {
            const bufferScope = this._data[lod.core][lod.left][lod.right][lod.top][lod.bottom];
            if (!bufferScope.buffer) {
                this._recreateWireframeData(lod);
            }
            return bufferScope;
        }
        get(lod) {
            return this._getOrCreateWireframeData(lod);
        }
        freeData(lod) {
            var _a;
            const bufferScope = this._data[lod.core][lod.left][lod.right][lod.top][lod.bottom];
            (_a = bufferScope.buffer) === null || _a === void 0 ? void 0 : _a.destroy();
            bufferScope.buffer = null;
        }
        free() {
            for (let core = 0; core < this._data.length; core++) {
                for (let left = 0; left < LodInfo_mjs_5.LEFT; left++) {
                    for (let right = 0; right < LodInfo_mjs_5.RIGHT; right++) {
                        for (let top = 0; top < LodInfo_mjs_5.TOP; top++) {
                            for (let bottom = 0; bottom < LodInfo_mjs_5.BOTTOM; bottom++) {
                                this.freeData({ core, left, right, top, bottom });
                            }
                        }
                    }
                }
            }
        }
        destroy() {
            this.free();
        }
    }
    exports.default = GPUWireframeBufferManager;
});
define("src/Heightfield/MeshInstanceFactory", ["require", "exports", "src/Heightfield/ShaderChunks", "src/Heightfield/PatchCombineInstancing", "src/Heightfield/PatchInstancing"], function (require, exports, ShaderChunks_mjs_2, PatchCombineInstancing_mjs_2, PatchInstancing_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    PatchCombineInstancing_mjs_2 = __importDefault(PatchCombineInstancing_mjs_2);
    PatchInstancing_mjs_2 = __importDefault(PatchInstancing_mjs_2);
    class MeshInstanceFactory {
        get aabb() { return this._aabb; }
        get buffersManager() { return this._buffersManager; }
        get wireframeBuffersManager() { return this._wireframeBuffersManager; }
        constructor(buffersManager, wireframeBuffersManager) {
            this._aabb = new pc.BoundingBox();
            this._buffersManager = buffersManager;
            this._wireframeBuffersManager = wireframeBuffersManager;
            this.updateAabb();
        }
        updateAabb() {
            const field = this._buffersManager.heightMap.field;
            const halfWidth = field.width / 2;
            const halfDepth = field.depth / 2;
            this._aabb.setMinMax(new pc.Vec3(-halfWidth, 0, -halfDepth), new pc.Vec3(+halfWidth, field.maxHeight, +halfDepth));
        }
        createInstancingMesh(entity, material, lodInfo, primitiveInfo, instancer, data) {
            const graphicsDevice = this._buffersManager.heightMap.app.graphicsDevice;
            const patchMesh = new pc.Mesh(graphicsDevice);
            const primitive = patchMesh.primitive[0];
            const instancingBuf = this._buffersManager.buildInstancingVertexBuffer(instancer, data);
            patchMesh.aabb = this.aabb;
            patchMesh.indexBuffer[0] = this._buffersManager.sharedIndexBuffer;
            patchMesh.vertexBuffer = this._buffersManager.sharedVertexBuffer;
            primitive.type = pc.PRIMITIVE_TRIANGLES;
            primitive.base = primitiveInfo.start;
            primitive.count = primitiveInfo.count;
            primitive.indexed = true;
            const patchMeshInstance = new pc.MeshInstance(patchMesh, material, entity);
            patchMeshInstance.cull = false;
            patchMeshInstance.visible = false;
            patchMeshInstance.visibleThisFrame = false;
            patchMeshInstance.castShadow = false;
            patchMeshInstance.receiveShadow = false;
            patchMeshInstance.setParameter(ShaderChunks_mjs_2.patchLodCoreParamName, lodInfo.core, 0xffffffff);
            patchMeshInstance.setInstancing(instancingBuf, false);
            return patchMeshInstance;
        }
        createPatchMesh(patchIndex, entity, material) {
            const field = this._buffersManager.heightMap.field;
            const graphicsDevice = this._buffersManager.heightMap.app.graphicsDevice;
            const patchMesh = new pc.Mesh(graphicsDevice);
            const primitive = patchMesh.primitive[0];
            patchMesh.aabb = this.aabb;
            patchMesh.indexBuffer[0] = this._buffersManager.sharedIndexBuffer;
            patchMesh.vertexBuffer = this._buffersManager.sharedVertexBuffer;
            primitive.type = pc.PRIMITIVE_TRIANGLES;
            primitive.base = 0;
            primitive.count = 0;
            primitive.indexed = true;
            const patchMeshInstance = new pc.MeshInstance(patchMesh, material, entity);
            patchMeshInstance.cull = false;
            patchMeshInstance.visible = false;
            patchMeshInstance.visibleThisFrame = false;
            patchMeshInstance.castShadow = false;
            patchMeshInstance.receiveShadow = false;
            const patchX = patchIndex % field.numPatchesX;
            const patchZ = patchIndex / field.numPatchesX | 0;
            const minX = patchX * (field.patchSize - 1);
            const minZ = patchZ * (field.patchSize - 1);
            patchMeshInstance.setParameter(ShaderChunks_mjs_2.patchCoordOffsetParamName, [minX, minZ], 0xffffffff);
            patchMeshInstance.setInstancing(null);
            return patchMeshInstance;
        }
        destroyMesh(meshInstance) {
            var _a, _b, _c, _d;
            // dont destroy shared index and vertex buffers and wireframe shared index buffer
            if (meshInstance.mesh) {
                meshInstance.mesh.indexBuffer = [null];
                meshInstance.mesh.vertexBuffer = null;
            }
            meshInstance.destroy();
            (_a = meshInstance.mesh) === null || _a === void 0 ? void 0 : _a.destroy();
            if (meshInstance.instancingData) {
                (_c = (_b = meshInstance.instancingData).destroy) === null || _c === void 0 ? void 0 : _c.call(_b);
                (_d = meshInstance.instancingData.vertexBuffer) === null || _d === void 0 ? void 0 : _d.destroy();
            }
        }
        bindDependenciesToMaterial(instancing, material, update = true) {
            var _a;
            const heightMapBuffer = this._buffersManager.heightMap;
            const instancingType = instancing instanceof PatchCombineInstancing_mjs_2.default ? 'combine' :
                instancing instanceof PatchInstancing_mjs_2.default ? 'simple' :
                    false;
            material.setAttribute(ShaderChunks_mjs_2.patchInstCoordOffsetAttrName, pc.SEMANTIC_ATTR10);
            material.setAttribute(ShaderChunks_mjs_2.vertexCoordAttrName, pc.SEMANTIC_POSITION);
            material.setParameter(ShaderChunks_mjs_2.heightMapParamName, heightMapBuffer.texture);
            material.setParameter(ShaderChunks_mjs_2.patchLodCoreParamName, 0);
            if (instancingType) {
                material.deleteParameter(ShaderChunks_mjs_2.patchCoordOffsetParamName);
            }
            else {
                material.setParameter(ShaderChunks_mjs_2.patchCoordOffsetParamName, [0, 0]);
            }
            const pcVersion = `v${pc.version[0]}`;
            const field = heightMapBuffer.field;
            const chunksStore = (0, ShaderChunks_mjs_2.getFieldShaderChunks)({
                width: field.width,
                depth: field.depth,
                patchSize: field.patchSize,
                heightMapChunkSize: field.heightMap.dataChunkSize,
                heightMapFormat: heightMapBuffer.format,
                engineVersion: pcVersion,
                instancing: instancingType,
            });
            const chunkNames = Object.keys(chunksStore);
            const shaderChunks = (_a = material.getShaderChunks) === null || _a === void 0 ? void 0 : _a.call(material, pc.SHADERLANGUAGE_GLSL);
            if (shaderChunks) {
                for (let chunkName of chunkNames) {
                    shaderChunks.set(chunkName, chunksStore[chunkName]);
                }
                material.shaderChunksVersion = pc.CHUNKAPI_1_70;
            }
            else {
                const chunks = material.chunks;
                for (let chunkName of chunkNames) {
                    chunks[chunkName] = chunksStore[chunkName];
                }
                chunks.APIVersion = pc.CHUNKAPI_1_70;
            }
            if (update) {
                material.update();
            }
        }
    }
    exports.default = MeshInstanceFactory;
});
define("src/Heightfield/EntityPatchesMesh", ["require", "exports", "src/Core/SquareIterator", "src/Heightfield/PatchCombineInstancing", "src/Heightfield/PatchInstancing", "src/Heightfield/ShaderChunks"], function (require, exports, SquareIterator_mjs_2, PatchCombineInstancing_mjs_3, PatchInstancing_mjs_3, ShaderChunks_mjs_3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    SquareIterator_mjs_2 = __importDefault(SquareIterator_mjs_2);
    PatchCombineInstancing_mjs_3 = __importDefault(PatchCombineInstancing_mjs_3);
    PatchInstancing_mjs_3 = __importDefault(PatchInstancing_mjs_3);
    class EntityPatchesMesh extends SquareIterator_mjs_2.default {
        static createMaterial() {
            const material = new pc.StandardMaterial();
            material.name = "HeightfieldMaterial";
            material.setAttribute(ShaderChunks_mjs_3.patchInstCoordOffsetAttrName, pc.SEMANTIC_ATTR10);
            material.setAttribute(ShaderChunks_mjs_3.vertexCoordAttrName, pc.SEMANTIC_POSITION);
            return material;
        }
        get instancing() { return this._instancing; }
        get meshFactory() { return this._meshFactory; }
        get meshInstanceArray() { return this._meshInstanceArray; }
        get aabb() { return this._meshFactory.aabb; }
        get material() { return this._material; }
        get entity() { return this._entity; }
        get patchSize() { return this._patchSize; }
        get numPatchesX() { return this._numPatchesX; }
        get numPatchesZ() { return this._numPatchesZ; }
        get layerName() { return this._layerName; }
        set layerName(value) {
            const update = this._layerName !== value;
            this._layerName = value;
            if (update) {
                this._forceUpdateRenderComponent();
                this._updateLayer();
            }
        }
        constructor(meshFactory, entity, layerName) {
            super(meshFactory.buffersManager.heightMap.field);
            this._patchSize = this.field.patchSize;
            this._numPatchesX = this.field.numPatchesX;
            this._numPatchesZ = this.field.numPatchesZ;
            this._layerName = layerName;
            this._entity = entity;
            this._material = EntityPatchesMesh.createMaterial();
            this._meshFactory = meshFactory;
            this._patchAvalableCount = 0;
            this._changesIds = [];
            this._instancingType = false;
            this._prevUseMeshBag = false;
            this._meshInstanceArray = new Array(this._numPatchesX * this._numPatchesZ);
            this._meshFactory.bindDependenciesToMaterial(this.instancing, this._material, true);
        }
        _updateLayer() {
            if (this._entity.render) {
                const app = this._meshFactory.buffersManager.heightMap.app;
                const layer = app.scene.layers.getLayerByName(this._layerName);
                this._entity.render.layers = [layer.id];
            }
        }
        _updateMeshInstanceForRender(meshInstances) {
            for (let i = 0; i < meshInstances.length; i++) {
                const meshInstance = meshInstances[i];
                meshInstance.cull = false;
                meshInstance.visible = false;
                meshInstance.castShadow = false;
                meshInstance.receiveShadow = true;
            }
        }
        _createRenderComponent(meshInstances) {
            this._entity.addComponent('render', {
                meshInstances: meshInstances,
                castShadows: false,
                castShadowsLightmap: false,
                receiveShadows: true,
            });
        }
        _updateRenderComponent(append, meshInstances) {
            // TODO: https://github.com/playcanvas/engine/issues/6680
            if (append) {
                this._entity.render._meshInstances.length = 0;
            }
            this._entity.render.meshInstances = meshInstances;
        }
        _forceUpdateRenderComponent() {
            let append = false; // destroy prev meshInstances by default
            const count = this.instancing
                ? this.instancing.meshInstanceCount
                : this._patchAvalableCount;
            const meshInstances = new Array(count);
            if (this.instancing) {
                this.instancing.appendMeshInstances(meshInstances);
            }
            else {
                // if instancing was used, then we delete all previous instances
                // or use custom renderer
                append = !this._prevUseMeshBag;
                let i = 0;
                for (let patchIndex = 0; patchIndex < this._meshInstanceArray.length; patchIndex++) {
                    const patchMeshInstance = this._meshInstanceArray[patchIndex];
                    if (patchMeshInstance) {
                        meshInstances[i++] = patchMeshInstance;
                    }
                }
                this._changesIds.length = 0;
            }
            this._prevUseMeshBag = !!this.instancing;
            if (this._entity.render) {
                this._updateRenderComponent(append, meshInstances);
            }
            else {
                this._createRenderComponent(meshInstances);
                this._updateLayer();
            }
            this._updateMeshInstanceForRender(meshInstances);
        }
        updateAabb() {
            var _a;
            for (const meshInstance of this._meshInstanceArray) {
                if (meshInstance) {
                    meshInstance.mesh.aabb = this._meshFactory.aabb;
                }
            }
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.forEach(item => {
                if (item.object) {
                    item.object.mesh.aabb = this._meshFactory.aabb;
                }
            });
        }
        updateRenderComponent() {
            if (this.instancing || this._changesIds.length === 0 || !this._entity.enabled) {
                return;
            }
            this._forceUpdateRenderComponent();
        }
        _addPatchMeshInstance(patchIndex, meshInstance) {
            if (this._meshInstanceArray[patchIndex]) {
                throw new Error('Mesh instance has already been added');
            }
            this._meshInstanceArray[patchIndex] = meshInstance;
            this._changesIds.push(patchIndex);
            this._patchAvalableCount++;
        }
        getOrCreatePatchMesh(patchIndex) {
            let patch = this._meshInstanceArray[patchIndex];
            if (!patch) {
                patch = this._meshFactory.createPatchMesh(patchIndex, this._entity, this._material);
                this._addPatchMeshInstance(patchIndex, patch);
            }
            return patch;
        }
        destroyPatchMesh(patchIndex) {
            const patchMeshInstance = this._meshInstanceArray[patchIndex];
            if (patchMeshInstance) {
                this._meshFactory.destroyMesh(patchMeshInstance);
                this._patchAvalableCount--;
                this._changesIds.push(patchIndex);
                delete this._meshInstanceArray[patchIndex];
            }
        }
        destroyInstancingPatchesMesh() {
            var _a;
            (_a = this._instancing) === null || _a === void 0 ? void 0 : _a.destroy((mesh) => {
                this._meshFactory.destroyMesh(mesh);
            });
        }
        destroyPatchesMesh() {
            for (let i = 0; i < this._meshInstanceArray.length; i++) {
                this.destroyPatchMesh(i);
            }
        }
        _clearMeshes() {
            // Destroy for recreate
            this.destroyInstancingPatchesMesh();
            // Destroy patches meshes, they will not be used in custom or instanced rendering
            if (this._instancing) {
                this.destroyPatchesMesh();
            }
        }
        setInstancingType(type) {
            if (this._instancingType === type) {
                return;
            }
            this._clearMeshes();
            this._instancingType = type;
            this._instancing = type === 'combine' ? new PatchCombineInstancing_mjs_3.default() :
                type === 'simple' ? new PatchInstancing_mjs_3.default() :
                    undefined;
            this._meshFactory.bindDependenciesToMaterial(this._instancing, this._material, true);
            this.updateMeshes();
        }
        updatePatchesMeshMaterial() {
            const field = this._meshFactory.buffersManager.heightMap.field;
            const numPatchesX = field.numPatchesX;
            const numPatchesZ = field.numPatchesZ;
            for (let z = 0; z < numPatchesZ; z++) {
                for (let x = 0; x < numPatchesX; x++) {
                    const index = z * numPatchesX + x;
                    const meshInstance = this._meshInstanceArray[index];
                    if (meshInstance) {
                        meshInstance.material = this._material;
                    }
                }
            }
        }
        updateMeshes() {
            this._clearMeshes();
            if (this.instancing) {
                this.instancing.build(this._meshFactory.buffersManager.heightMap.field, (lodInfo, primitiveInfo, data) => {
                    return this._meshFactory.createInstancingMesh(this._entity, this._material, lodInfo, primitiveInfo, this.instancing, data);
                });
            }
            else {
                this.updatePatchesMeshMaterial();
            }
            this._forceUpdateRenderComponent();
        }
        destroy() {
            this.destroyPatchesMesh();
            this.destroyInstancingPatchesMesh();
            this._material.destroy();
            this._entity.destroy();
        }
    }
    exports.default = EntityPatchesMesh;
});
define("src/Heightfield/Patch", ["require", "exports", "src/Core/LodState"], function (require, exports, LodState_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PatchState = void 0;
    class PatchState {
        constructor() {
            this.visible = false;
            this.lod = LodState_mjs_2.defaultPatchLod;
            this.indicesBaseIndex = 0;
            this.indicesCount = 0;
        }
    }
    exports.PatchState = PatchState;
    class Patch extends PatchState {
        constructor(index, x, z, minX, minZ, size) {
            super();
            this.index = index;
            this.size = size;
            this.x = x;
            this.z = z;
            this.minX = minX;
            this.minZ = minZ;
        }
    }
    exports.default = Patch;
});
define("src/Heightfield/ViewPatchesRenderPreparer", ["require", "exports", "src/Heightfield/ShaderChunks", "src/Heightfield/EntityPatchesMesh", "src/Heightfield/Patch"], function (require, exports, ShaderChunks_mjs_4, EntityPatchesMesh_mjs_1, Patch_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    EntityPatchesMesh_mjs_1 = __importDefault(EntityPatchesMesh_mjs_1);
    Patch_mjs_1 = __importDefault(Patch_mjs_1);
    class ViewPatchesRenderPreparer extends EntityPatchesMesh_mjs_1.default {
        get lodState() { return this._lodState; }
        get bufferArray() { return this._bufferArray; }
        get wireframe() { return this._wireframe; }
        set wireframe(v) {
            this._wireframe = v;
            this._updateMeshes();
        }
        get castShadow() { return this._castShadow; }
        set castShadow(v) {
            this._castShadow = v;
            this._updateMeshes();
        }
        get receiveShadow() { return this._receiveShadow; }
        set receiveShadow(v) {
            this._receiveShadow = v;
            this._updateMeshes();
        }
        constructor(lodSate, meshFactory, entity, layerName, options) {
            var _a, _b, _c;
            super(meshFactory, entity, layerName);
            this._lodState = lodSate;
            this._wireframe = (_a = options === null || options === void 0 ? void 0 : options.wireframe) !== null && _a !== void 0 ? _a : false;
            this._castShadow = (_b = options === null || options === void 0 ? void 0 : options.castShadow) !== null && _b !== void 0 ? _b : false;
            this._receiveShadow = (_c = options === null || options === void 0 ? void 0 : options.receiveShadow) !== null && _c !== void 0 ? _c : false;
            this._bufferArray = new Array(this.meshInstanceArray.length);
        }
        _updateMesh(meshInstance, lod) {
            if (meshInstance) {
                meshInstance.castShadow = this._castShadow;
                meshInstance.receiveShadow = this._receiveShadow;
                const newRenderStyle = this._wireframe ? pc.RENDERSTYLE_WIREFRAME : pc.RENDERSTYLE_SOLID;
                // @ts-ignore
                meshInstance._renderStyle = newRenderStyle;
                if (this._wireframe) {
                    const wireframeData = this.meshFactory.wireframeBuffersManager.get(lod);
                    meshInstance.mesh.indexBuffer[pc.RENDERSTYLE_WIREFRAME] = wireframeData.buffer;
                    meshInstance.mesh.primitive[pc.RENDERSTYLE_WIREFRAME] = wireframeData.primitive;
                }
            }
        }
        _unsetIfNeedWireframe(meshInstance, lod) {
            if (meshInstance && !this._wireframe) {
                delete meshInstance.mesh.indexBuffer[pc.RENDERSTYLE_WIREFRAME];
                delete meshInstance.mesh.primitive[pc.RENDERSTYLE_WIREFRAME];
            }
        }
        _updateMeshes() {
            var _a;
            for (let i = 0; i < this.meshInstanceArray.length; i++) {
                const meshInstance = this.meshInstanceArray[i];
                const buffer = this._bufferArray[i];
                this._updateMesh(meshInstance, buffer.lod);
                this._unsetIfNeedWireframe(meshInstance, buffer.lod);
            }
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.forEach(item => {
                this._updateMesh(item.object, item.lod);
                this._unsetIfNeedWireframe(item.object, item.lod);
            });
        }
        updateMeshes() {
            super.updateMeshes();
            this._updateMeshes();
        }
        initPatch(patchX, patchZ, size, minX, minZ, info, lodInfo) {
            const index = patchZ * this._numPatchesX + patchX;
            const buffer = new Patch_mjs_1.default(index, patchX, patchZ, minX, minZ, size);
            buffer.lod = lodInfo;
            buffer.indicesBaseIndex = info.start;
            buffer.indicesCount = info.count;
            this._bufferArray[index] = buffer;
        }
        updatePatch(patchX, patchZ, visible, info, lod) {
            const index = patchZ * this._numPatchesX + patchX;
            const buffer = this._bufferArray[index];
            buffer.visible = visible;
            buffer.indicesBaseIndex = info.start;
            buffer.indicesCount = info.count;
            buffer.lod = lod;
            if (this.instancing) {
                if (visible) {
                    const inst = this.instancing.increment(lod, buffer);
                    if (inst.count === 1 && inst.object) {
                        const meshInstance = inst.object;
                        meshInstance.visible = true;
                    }
                }
            }
            else {
                const meshInstance = this.getOrCreatePatchMesh(index);
                meshInstance.visible = visible;
                if (visible) {
                    const mesh = meshInstance.mesh;
                    const primitive = mesh.primitive[0];
                    primitive.base = info.start;
                    primitive.count = info.count;
                    meshInstance.setParameter(ShaderChunks_mjs_4.patchLodCoreParamName, lod.core);
                    this._updateMesh(meshInstance, lod);
                }
            }
        }
        beforeUpdate() {
            var _a;
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.begin(false);
        }
        afterUpdate() {
            var _a;
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.end();
            this.updateRenderComponent();
        }
    }
    exports.default = ViewPatchesRenderPreparer;
});
define("src/Heightfield/ShadowPatchesRenderPreparer", ["require", "exports", "src/Heightfield/EntityPatchesMesh", "src/Heightfield/Patch", "src/Heightfield/ShaderChunks"], function (require, exports, EntityPatchesMesh_mjs_2, Patch_mjs_2, ShaderChunks_mjs_5) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    EntityPatchesMesh_mjs_2 = __importDefault(EntityPatchesMesh_mjs_2);
    Patch_mjs_2 = __importDefault(Patch_mjs_2);
    class ShadowPatchesRenderPreparer extends EntityPatchesMesh_mjs_2.default {
        get lodState() { return this._lodState; }
        get bufferArray() { return this._bufferArray; }
        constructor(lodSate, meshFactory, entity, layerName) {
            super(meshFactory, entity, layerName);
            this._lodState = lodSate;
            this._bufferArray = new Array(this.meshInstanceArray.length);
        }
        _createRenderComponent(meshInstances) {
            this.entity.addComponent('render', {
                meshInstances: meshInstances,
                castShadows: true,
                castShadowsLightmap: true,
                receiveShadows: false,
            });
        }
        _updateMeshInstanceForRender(meshInstances) {
            for (let i = 0; i < meshInstances.length; i++) {
                const meshInstance = meshInstances[i];
                meshInstance.cull = false;
                meshInstance.visible = true;
                meshInstance.castShadow = true;
                meshInstance.receiveShadow = false;
            }
        }
        initPatch(patchX, patchZ, size, minX, minZ, info, lodInfo) {
            const index = patchZ * this._numPatchesX + patchX;
            const buffer = new Patch_mjs_2.default(index, patchX, patchZ, minX, minZ, size);
            buffer.lod = lodInfo;
            buffer.indicesBaseIndex = info.start;
            buffer.indicesCount = info.count;
            this._bufferArray[index] = buffer;
        }
        updatePatch(patchX, patchZ, visible, info, lod) {
            const index = patchZ * this._numPatchesX + patchX;
            const buffer = this._bufferArray[index];
            buffer.visible = visible;
            buffer.indicesBaseIndex = info.start;
            buffer.indicesCount = info.count;
            buffer.lod = lod;
            if (this.instancing) {
                const inst = this.instancing.increment(lod, buffer);
                if (inst.object && inst.count === 1) {
                    inst.object.castShadow = true;
                }
            }
            else {
                const meshInstance = this.getOrCreatePatchMesh(index);
                const mesh = meshInstance.mesh;
                const primitive = mesh.primitive[0];
                primitive.base = info.start;
                primitive.count = info.count;
                meshInstance.castShadow = true;
                meshInstance.setParameter(ShaderChunks_mjs_5.patchLodCoreParamName, lod.core);
            }
        }
        beforeUpdate() {
            var _a;
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.begin(false);
        }
        afterUpdate() {
            var _a;
            (_a = this.instancing) === null || _a === void 0 ? void 0 : _a.end();
            this.updateRenderComponent();
        }
    }
    exports.default = ShadowPatchesRenderPreparer;
});
define("src/Scripts/Terrain", ["require", "exports", "src/Extras/Debug", "src/Core/MidpointDispHeightfield", "src/Core/HeightfieldRaycastResult", "src/Core/HeightMap", "src/Heightfield/ColorPainter", "src/Heightfield/Enums", "src/Heightfield/ShaderChunks", "src/Core/HeightfieldShape", "src/Core/PatchedHeightMap", "src/Extras/EnumConverter", "src/AmmoIntegration/AmmoIntegration", "src/Core/LodState", "src/Heightfield/GPUHeightMapBuffer", "src/Core/PatchesSphereBuffer", "src/Core/PatchesManager", "src/Heightfield/MeshInstanceFactory", "src/Heightfield/GPUBuffersManager", "src/Heightfield/ViewPatchesRenderPreparer", "src/Heightfield/GPUWireframeBuffersManager", "src/Heightfield/ShadowPatchesRenderPreparer"], function (require, exports, Debug_mjs_1, MidpointDispHeightfield_mjs_1, HeightfieldRaycastResult_mjs_2, HeightMap_mjs_4, ColorPainter_mjs_1, Enums_mjs_1, ShaderChunks_mjs_6, HeightfieldShape_mjs_1, PatchedHeightMap_mjs_2, EnumConverter_mjs_2, AmmoIntegration_mjs_1, LodState_mjs_3, GPUHeightMapBuffer_mjs_1, PatchesSphereBuffer_mjs_1, PatchesManager_mjs_1, MeshInstanceFactory_mjs_1, GPUBuffersManager_mjs_1, ViewPatchesRenderPreparer_mjs_1, GPUWireframeBuffersManager_mjs_1, ShadowPatchesRenderPreparer_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.bigTerrainEditorScriptName = exports.terrainScriptName = exports.Terrain = exports.RenderMode = void 0;
    MidpointDispHeightfield_mjs_1 = __importDefault(MidpointDispHeightfield_mjs_1);
    HeightfieldRaycastResult_mjs_2 = __importDefault(HeightfieldRaycastResult_mjs_2);
    HeightMap_mjs_4 = __importDefault(HeightMap_mjs_4);
    ColorPainter_mjs_1 = __importDefault(ColorPainter_mjs_1);
    HeightfieldShape_mjs_1 = __importDefault(HeightfieldShape_mjs_1);
    PatchedHeightMap_mjs_2 = __importDefault(PatchedHeightMap_mjs_2);
    LodState_mjs_3 = __importDefault(LodState_mjs_3);
    GPUHeightMapBuffer_mjs_1 = __importDefault(GPUHeightMapBuffer_mjs_1);
    PatchesSphereBuffer_mjs_1 = __importDefault(PatchesSphereBuffer_mjs_1);
    PatchesManager_mjs_1 = __importDefault(PatchesManager_mjs_1);
    MeshInstanceFactory_mjs_1 = __importDefault(MeshInstanceFactory_mjs_1);
    GPUBuffersManager_mjs_1 = __importDefault(GPUBuffersManager_mjs_1);
    ViewPatchesRenderPreparer_mjs_1 = __importDefault(ViewPatchesRenderPreparer_mjs_1);
    GPUWireframeBuffersManager_mjs_1 = __importDefault(GPUWireframeBuffersManager_mjs_1);
    ShadowPatchesRenderPreparer_mjs_1 = __importDefault(ShadowPatchesRenderPreparer_mjs_1);
    const brushMinSize = 2;
    const brushMaxSize = 250;
    const tmpMat = new pc.Mat4();
    const terrainLocalVertexPos = new pc.Vec3();
    const heightMapExt = '.hm';
    var RenderMode;
    (function (RenderMode) {
        RenderMode[RenderMode["Standard"] = 1] = "Standard";
        RenderMode[RenderMode["InstancingAccelerator"] = 2] = "InstancingAccelerator";
        RenderMode[RenderMode["CombineInstancingAccelerator"] = 3] = "CombineInstancingAccelerator";
    })(RenderMode || (exports.RenderMode = RenderMode = {}));
    class Terrain extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this._lock = 0;
            this._localCameraPosition = new pc.Vec3();
            this._roughness = 1.0;
            this._rayStart = new pc.Vec3();
            this._rayEnd = new pc.Vec3();
            this._rayDirection = new pc.Vec3();
            this._ray = new pc.Ray();
            this._cameraPos = new Array(3);
            this._lastLodGridUpdate = 0;
            this._brushSizeStep = 1;
            this._brushOpacityStep = 0.01;
            this._intersectsRayResult = false;
            this._directionLightShadowScopes = [];
            this._keyAddLock = true;
            this._keySubLock = true;
        }
        get shape() { return this._heightFieldShape; }
        get object() { return this._terrain; }
        get lock() { return this._lock; }
        addLock() {
            this._lock++;
        }
        freeLock() {
            this._lock--;
        }
        postInitialize() {
            this._initializeMouse();
            this._initializeKeyboard();
            this._initBrush();
            this._initTerrain();
            this._updateDirectionLightShadows();
            this._updateBrush();
            this._updatePainterMaterial();
            this._updateHeightMapFromAttr();
            this.on('attr:renderMode', () => {
                this._viewPatchesPreparer.setInstancingType(this.renderMode === RenderMode.CombineInstancingAccelerator ? 'combine' :
                    this.renderMode === RenderMode.InstancingAccelerator ? 'simple' :
                        false);
            });
            this.on('attr:receiveShadow', () => {
                this._viewPatchesPreparer.receiveShadow = this.receiveShadow;
            });
            this.on('attr:wireframe', () => {
                this._viewPatchesPreparer.wireframe = this.wireframe;
                if (!this.wireframe) {
                    this._wireframeBuffersManager.free();
                }
            });
            this.on('attr:activeLayer', () => {
                this._updatePainterMaterial();
            });
            this.on('attr:layers', () => {
                this._updateLayers();
            });
            this.on('attr:brush', () => {
                this._updateBrush();
                this._updatePainterMaterial();
            });
            this.on('attr:height', () => {
                this._terrain.setMaxHeight(this.height);
                this._spheresBuffer.recalculate();
                this._meshFactory.updateAabb();
                this._viewPatchesPreparer.updateAabb();
                this._updateMaterialParameters();
            });
            this.on('attr:zFar', () => {
                this._viewPatchesLodState.setZFar(this.zFar);
            });
            this.on('attr:directionLightShadowSettings', () => {
                this._updateDirectionLightShadows();
            });
        }
        _initBrush() {
            const splatMap = this.painterSettings.splatMap.resource;
            this._brushHeightMap = new HeightMap_mjs_4.default(256, 256, 100);
            this._colorPainter = new ColorPainter_mjs_1.default(this.app, splatMap, this.paintLayerName);
        }
        _updatePainterMaterial() {
            this._colorPainter.updateSettings(this.brush, this.activeLayer);
        }
        _updateBrush() {
            this._brushSize = this.brush.size | 0;
            this._brushOpacity = this.brush.opacity;
            const activeBrush = this.brush.active | 0;
            if (activeBrush === this._activeBrush) {
                return;
            }
            if (!this.brush.textures[activeBrush]) {
                console.error('Brush image unset.');
                return;
            }
            const brushTexture = this.brush.textures[activeBrush].resource;
            const brushImg = brushTexture.getSource();
            if (!brushImg) {
                console.error('Brush image unset.');
                return;
            }
            this._activeBrush = activeBrush;
            this._brushHeightMap.fromImage(brushImg);
            this._brushHeightMap.smooth(1, 1);
            console.log(this._brushHeightMap);
        }
        _initHeightMapBuffer(chunkSize) {
            // TODO: Move to terrain collider
            // TODO: Ammo js integration
            let buffer = undefined;
            if (typeof Ammo !== 'undefined') {
                buffer = (0, AmmoIntegration_mjs_1.getBuffer)(this.width, this.depth, this.patchSize, chunkSize, this.valueType);
                const ht = this.valueType === '32f' ? 0 :
                    this.valueType === '16u' ? 1 :
                        2;
                const hm = new Ammo.btAlexTerrainPatchedHeightMap(this.width, this.depth, this.patchSize, chunkSize, 0, this.height, ht, buffer.byteOffset);
                const shape = new Ammo.btAlexHeightfieldTerrainShape(hm, false);
                const groundTransform = new Ammo.btTransform();
                const position = new Ammo.btVector3(0, this.height / 2, 0);
                groundTransform.setIdentity();
                groundTransform.setOrigin(position);
                const groundMass = Number.MAX_SAFE_INTEGER;
                const groundLocalInertia = new Ammo.btVector3(0, 0, 0);
                const groundMotionState = new Ammo.btDefaultMotionState(groundTransform);
                const groundConstrInfo = new Ammo.btRigidBodyConstructionInfo(groundMass, groundMotionState, shape, groundLocalInertia);
                const groundBody = new Ammo.btRigidBody(groundConstrInfo);
                this.app.systems.rigidbody.dynamicsWorld.addRigidBody(groundBody);
                Ammo.destroy(position);
                Ammo.destroy(groundTransform);
            }
            return buffer;
        }
        get heightMapTexture() { return this._heightMapBuffer.texture; }
        get aabb() { return this._meshFactory.aabb; }
        _destroyDirectionLightScopes() {
            for (let i = 0; i < this._directionLightShadowScopes.length; i++) {
                const scope = this._directionLightShadowScopes[i];
                if (scope) {
                    scope.preparer.destroy();
                    scope.lodState.destroy();
                    scope.entity.destroy();
                    this._patchesManager.removeState(scope.preparer);
                    this.entity.removeChild(scope.entity);
                }
                delete this._directionLightShadowScopes[i];
            }
        }
        _updateDirectionLightShadows() {
            this._destroyDirectionLightScopes();
            if (this._directionLightShadowScopes.length < this.directionLightShadowSettings.length) {
                this._directionLightShadowScopes.length = this.directionLightShadowSettings.length;
            }
            const lodManager = this._patchesManager.lodManager;
            for (let i = 0; i < this.directionLightShadowSettings.length; i++) {
                const directionLightShadow = this.directionLightShadowSettings[i];
                if (directionLightShadow.visible) {
                    const entity = new pc.Entity(`TerrainDirectionLightShadow_${i}`);
                    const lodState = new LodState_mjs_3.default(lodManager, directionLightShadow.zFar);
                    const preparer = new ShadowPatchesRenderPreparer_mjs_1.default(lodState, this._meshFactory, entity, directionLightShadow.layerName);
                    this._patchesManager.addState(preparer);
                    preparer.updateAabb();
                    preparer.setInstancingType(this.renderMode === RenderMode.CombineInstancingAccelerator ? 'combine' :
                        this.renderMode === RenderMode.InstancingAccelerator ? 'simple' :
                            false);
                    this._directionLightShadowScopes[i] = {
                        preparer,
                        lodState,
                        entity
                    };
                    this.entity.addChild(entity);
                }
            }
            this._directionLightShadowScopes.length = this.directionLightShadowSettings.length;
            this._updateMaterialParameters();
            this._updateLayers();
        }
        _initTerrain() {
            const tmpChunkSize = this.patchSize * 2 - 1;
            const chunkSize = Math.min(this.width, this.depth, tmpChunkSize);
            const buffer = this._initHeightMapBuffer(chunkSize);
            const heightMap = new PatchedHeightMap_mjs_2.default(this.width, this.depth, this.patchSize, chunkSize, this.height, this.valueType, buffer);
            this._terrain = new MidpointDispHeightfield_mjs_1.default(heightMap);
            this._heightFieldShape = new HeightfieldShape_mjs_1.default(heightMap);
            this._raycastResult = new HeightfieldRaycastResult_mjs_2.default();
            this._spheresBuffer = new PatchesSphereBuffer_mjs_1.default(heightMap, this.entity.getWorldTransform());
            this._heightMapBuffer = new GPUHeightMapBuffer_mjs_1.default(this.app, this._terrain);
            this._buffersManager = new GPUBuffersManager_mjs_1.default(this._heightMapBuffer);
            this._wireframeBuffersManager = new GPUWireframeBuffersManager_mjs_1.default(this._buffersManager, this._terrain.lodInfo);
            this._meshFactory = new MeshInstanceFactory_mjs_1.default(this._buffersManager, this._wireframeBuffersManager);
            this._patchesManager = new PatchesManager_mjs_1.default(this._terrain, this._spheresBuffer);
            this._viewPatchesLodState = new LodState_mjs_3.default(this._patchesManager.lodManager, this.zFar);
            this._viewPatchesPreparer = new ViewPatchesRenderPreparer_mjs_1.default(this._viewPatchesLodState, this._meshFactory, this.entity, this.layerName, {
                wireframe: this.wireframe,
                castShadow: false,
                receiveShadow: this.receiveShadow,
            });
            this._patchesManager.addState(this._viewPatchesPreparer);
            this._viewPatchesPreparer.setInstancingType(this.renderMode === RenderMode.CombineInstancingAccelerator ? 'combine' :
                this.renderMode === RenderMode.InstancingAccelerator ? 'simple' :
                    false);
            console.log(this._terrain, this._heightFieldShape, this._patchesManager);
        }
        _updateMaterialParameters() {
            this._viewPatchesPreparer.material.setParameter(ShaderChunks_mjs_6.splatMapParamName, this._colorPainter.background);
            this._viewPatchesPreparer.material.setParameter(ShaderChunks_mjs_6.maxHeightParamName, this._terrain.maxHeight);
            for (let i = 0; i < this._directionLightShadowScopes.length; i++) {
                const item = this._directionLightShadowScopes[i];
                if (item) {
                    item.preparer.material.setParameter(ShaderChunks_mjs_6.splatMapParamName, this._colorPainter.background);
                    item.preparer.material.setParameter(ShaderChunks_mjs_6.maxHeightParamName, this._terrain.maxHeight);
                }
            }
        }
        _updateMaterialCameraPos() {
            if (this.cameraEntity) {
                const cameraPos = this.cameraEntity.getPosition();
                this._cameraPos[0] = cameraPos.x;
                this._cameraPos[1] = cameraPos.y;
                this._cameraPos[2] = cameraPos.z;
                this._viewPatchesPreparer.material.setParameter(ShaderChunks_mjs_6.cameraPositionParamName, this._cameraPos);
                for (let i = 0; i < this._directionLightShadowScopes.length; i++) {
                    const item = this._directionLightShadowScopes[i];
                    if (item) {
                        item.preparer.material.setParameter(ShaderChunks_mjs_6.cameraPositionParamName, this._cameraPos);
                    }
                }
            }
        }
        _updateLayers() {
            var _a;
            // TODO
            const maxCount = 5;
            const width = 1024;
            const height = 1024;
            let length = 0;
            let flags = [];
            let scales = [];
            let offsets = [];
            let diffuses = [];
            let normals = [];
            for (let i = 0; i < maxCount; i++) {
                let flag = 0;
                if (i < this.layers.length) {
                    const layer = this.layers[i];
                    const diffuse = layer.diffuse;
                    const normalMap = layer.normalMap;
                    if (diffuse) {
                        const diffuseTexture = diffuse.resource;
                        flag++;
                        length++;
                        diffuses.push(diffuseTexture.getSource());
                        scales.push(layer.size.x, layer.size.y);
                        offsets.push(layer.offset.x, layer.offset.y);
                        if (normalMap) {
                            const normalTexture = normalMap.resource;
                            flag++;
                            normals.push(normalTexture.getSource());
                        }
                    }
                }
                flags.push(flag);
            }
            (_a = this._layersDiffuse) === null || _a === void 0 ? void 0 : _a.destroy();
            //this._layersDiffuse = this.layers[0].diffuse.resource as pcx.Texture;
            this._layersDiffuse = new pc.Texture(this.app.graphicsDevice, {
                name: 'terrainLayersDiffuse',
                format: pc.PIXELFORMAT_SRGBA8,
                width: width,
                height: height,
                arrayLength: length,
                flipY: !this.app.graphicsDevice.isWebGPU,
                mipmaps: true,
                addressU: pc.ADDRESS_REPEAT,
                addressV: pc.ADDRESS_REPEAT,
                addressW: pc.ADDRESS_CLAMP_TO_EDGE,
                levels: [diffuses]
            });
            this._layersDiffuse.upload();
            console.log(this._layersDiffuse);
            this._viewPatchesPreparer.material.setParameter(ShaderChunks_mjs_6.layersDiffuseParamName, this._layersDiffuse);
            this._viewPatchesPreparer.material.setParameter(`${ShaderChunks_mjs_6.layersFlagsParamName}[0]`, flags);
            this._viewPatchesPreparer.material.setParameter(`${ShaderChunks_mjs_6.layersScaleParamName}[0]`, scales);
            this._viewPatchesPreparer.material.setParameter(`${ShaderChunks_mjs_6.layersOffsetParamName}[0]`, offsets);
            for (let i = 0; i < this._directionLightShadowScopes.length; i++) {
                const item = this._directionLightShadowScopes[i];
                if (item) {
                    const material = item.preparer.material;
                    material.setParameter(ShaderChunks_mjs_6.layersDiffuseParamName, this._layersDiffuse);
                    material.setParameter(`${ShaderChunks_mjs_6.layersFlagsParamName}[0]`, flags);
                    material.setParameter(`${ShaderChunks_mjs_6.layersScaleParamName}[0]`, scales);
                    material.setParameter(`${ShaderChunks_mjs_6.layersOffsetParamName}[0]`, offsets);
                }
            }
        }
        _initializeMouse() {
            var _a, _b;
            (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.on(pc.EVENT_MOUSEMOVE, this._onMouseMove, this);
            (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.on(pc.EVENT_MOUSEWHEEL, this._onMouseWheel, this);
            this.on('destroy', () => {
                var _a, _b;
                (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.off(pc.EVENT_MOUSEMOVE, this._onMouseMove, this);
                (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.off(pc.EVENT_MOUSEWHEEL, this._onMouseWheel, this);
            });
        }
        _onMouseMove(event) {
            this._lastMouseMoveEvent = event;
        }
        _onMouseWheel(event) {
            const candidate = this._brushSize + event.wheelDelta * this._brushSizeStep;
            this._brushSize = Math.min(Math.max(candidate, brushMinSize), brushMaxSize);
        }
        _initializeKeyboard() {
            var _a, _b;
            (_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.on(pc.EVENT_KEYDOWN, this._onKeyboardDown, this);
            (_b = this.app.keyboard) === null || _b === void 0 ? void 0 : _b.on(pc.EVENT_KEYUP, this._onKeyboardUp, this);
            this.on('destroy', () => {
                var _a, _b;
                (_a = this.app.mouse) === null || _a === void 0 ? void 0 : _a.off(pc.EVENT_KEYDOWN, this._onKeyboardDown, this);
                (_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.off(pc.EVENT_KEYUP, this._onKeyboardUp, this);
            });
        }
        _onKeyboardDown(event) {
            if (this._keyAddLock === false && event.key === pc.KEY_ADD) {
                this._keyAddLock = true;
                this._brushOpacity = Math.max(this._brushOpacity + this._brushOpacityStep, 0);
            }
            if (this._keySubLock === false && event.key === pc.KEY_SUBTRACT) {
                this._keySubLock = true;
                this._brushOpacity = Math.min(this._brushOpacity - this._brushOpacityStep, 1);
            }
        }
        _onKeyboardUp(event) {
            if (event.key === pc.KEY_ADD) {
                this._keyAddLock = false;
            }
            else if (event.key === pc.KEY_SUBTRACT) {
                this._keySubLock = false;
            }
        }
        _updateHeightMapFromAttr() {
            return __awaiter(this, void 0, void 0, function* () {
                if (this.heightMap.file) {
                    if (!this.heightMap.file.resource) {
                        console.warn('Height map file unset.');
                        return;
                    }
                    const data = this.heightMap.file.resource;
                    const settings = {
                        adaptiveMaxHeight: true,
                        adaptiveWidthAndDepth: true,
                    };
                    yield this._terrain.loadHeightMapFromFile(data, settings, this.heightMap.smoothFactor, this.heightMap.smoothRadius);
                }
                else {
                    const texture = this.heightMap.texture;
                    if (!texture) {
                        console.warn('Height map image unset.');
                        return;
                    }
                    const resource = texture.resource;
                    const img = resource.getSource();
                    if (!img) {
                        console.warn('Height map image unset.');
                        return;
                    }
                    this._terrain.loadHeightMapFromImg(img, this.heightMap.smoothFactor, this.heightMap.smoothRadius);
                    // TODO: clear heightmap
                    resource.destroy();
                }
                this._heightMapBuffer.updateHeightMap({ minX: 0, maxX: this.width, minZ: 0, maxZ: this.depth });
                this._spheresBuffer.recalculate();
                this._meshFactory.updateAabb();
                this._viewPatchesPreparer.updateAabb();
            });
        }
        _saveHeightMapToImg() {
            const base64 = this._terrain.heightMap.toImage();
            const image = new Image();
            image.src = base64;
            const w = window.open(undefined, '_blank');
            w.document.write(image.outerHTML);
        }
        _saveHeightMapToFile() {
            return __awaiter(this, void 0, void 0, function* () {
                const blob = yield this._terrain.heightMap.toFile();
                const blobUrl = URL.createObjectURL(blob);
                const a = document.createElement("a");
                const timestamp = new Date();
                document.body.appendChild(a);
                a.href = blobUrl;
                a.download = `hm_${+timestamp}${heightMapExt}`;
                a.click();
                URL.revokeObjectURL(blobUrl);
            });
        }
        update(dt) {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            if (this._colorPainter.painting) {
                this._colorPainter.stopPaint();
            }
            if (this.autoRender &&
                this.cameraEntity &&
                this.cameraEntity.camera) {
                const camera = this.cameraEntity.camera;
                const mat = this.entity.getWorldTransform();
                const scale = mat.getScale();
                this._updateMaterialCameraPos();
                if (this._lastMouseMoveEvent) {
                    let hasChanges = false;
                    camera.screenToWorld(this._lastMouseMoveEvent.x, this._lastMouseMoveEvent.y, camera.nearClip, this._rayStart);
                    camera.screenToWorld(this._lastMouseMoveEvent.x, this._lastMouseMoveEvent.y, camera.farClip, this._rayEnd);
                    this._rayDirection.sub2(this._rayEnd, this._rayStart);
                    const changeRay = !this._ray.origin.equals(this._rayStart) || !this._ray.direction.equals(this._rayDirection);
                    if (changeRay) {
                        this._ray.set(this._rayStart, this._rayDirection);
                        this._raycastResult.clear();
                        this._intersectsRayResult = this._heightFieldShape.intersectsRay(mat, this._ray, this._raycastResult);
                    }
                    if (this._intersectsRayResult) {
                        const brushSizeX = this._brushSize / scale.x | 0;
                        const brushSizeZ = this._brushSize / scale.z | 0;
                        this._terrain.patchVertices.getPosition(this._raycastResult.vertexIndex, terrainLocalVertexPos);
                        if ((_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.wasPressed(pc.KEY_I)) {
                            console.log(this._raycastResult, this._localCameraPosition, terrainLocalVertexPos);
                        }
                        (0, Debug_mjs_1.drawPoint)({ center: this._raycastResult.point, radius: this._brushSize, numSegments: 10, depthTest: true, color: pc.Color.GRAY });
                        (0, Debug_mjs_1.drawDirectionVector)(this._raycastResult.point, this._raycastResult.normal, pc.Color.MAGENTA);
                        if (this._lock < 1 &&
                            ((_b = this.app.mouse) === null || _b === void 0 ? void 0 : _b.isPressed(pc.MOUSEBUTTON_LEFT))) {
                            if (this.painting) {
                                const width = this._terrain.width - 1;
                                const depth = this._terrain.depth - 1;
                                const x = terrainLocalVertexPos.x / width;
                                const y = terrainLocalVertexPos.z / depth;
                                const scaleW = brushSizeX / width;
                                const scaleH = brushSizeZ / depth;
                                this._colorPainter.startPaint(dt, x, y, scaleW, scaleH);
                            }
                            else {
                                const average = (brushSizeX + brushSizeZ) / 2;
                                const centerX = terrainLocalVertexPos.x | 0;
                                const centerZ = terrainLocalVertexPos.z | 0;
                                const zone = {
                                    minX: centerX - brushSizeX,
                                    maxX: centerX + brushSizeX + 1,
                                    minZ: centerZ - brushSizeZ,
                                    maxZ: centerZ + brushSizeZ + 1,
                                };
                                if ((_c = this.app.keyboard) === null || _c === void 0 ? void 0 : _c.isPressed(pc.KEY_ALT)) {
                                    this._terrain.smoothHeightsZone(zone, average * this._brushOpacity * dt / 10, 1);
                                }
                                else {
                                    const negative = !!((_d = this.app.keyboard) === null || _d === void 0 ? void 0 : _d.isPressed(pc.KEY_CONTROL));
                                    const appendValue = (negative ? -average : average) * this._brushOpacity * dt / 10;
                                    this._terrain.appendHeightMap(this._brushHeightMap, appendValue, zone);
                                }
                                if ((_e = this.app.keyboard) === null || _e === void 0 ? void 0 : _e.wasPressed(pc.KEY_I)) {
                                    console.log(zone);
                                }
                                this._terrain.recalculateMinMax(zone);
                                this._heightMapBuffer.updateHeightMap(zone);
                                this._spheresBuffer.recalculateZone(zone);
                                hasChanges = true;
                            }
                        }
                    }
                }
                tmpMat.invert(mat);
                tmpMat.transformPoint(camera.entity.getPosition(), this._localCameraPosition);
                this._patchesManager.updateLods(this._localCameraPosition, this.lodByYPos);
                this._patchesManager.update(camera.frustum);
                /*
                const spheres = this._spheresBuffer.spheres;
                for (let i = 0; i < spheres.length; i++) {
                    const sphere = spheres[i];
                    drawPoint({ center: sphere.center, radius: sphere.radius, numSegments: 10, depthTest: false, color: pc.Color.YELLOW });
                }
                //*/
            }
            if ((_f = this.app.keyboard) === null || _f === void 0 ? void 0 : _f.wasPressed(pc.KEY_L)) {
                this._viewPatchesLodState.printLodMap();
            }
            if ((_g = this.app.keyboard) === null || _g === void 0 ? void 0 : _g.wasPressed(pc.KEY_P)) {
                this._saveHeightMapToImg();
            }
            if ((_h = this.app.keyboard) === null || _h === void 0 ? void 0 : _h.wasPressed(pc.KEY_O)) {
                this._saveHeightMapToFile();
            }
            // Debug
            // this.app.drawTexture( 0.5, -0.6, -0.5, 0.3, this.heightMapTexture, undefined as any);
        }
    }
    exports.Terrain = Terrain;
    exports.default = Terrain;
    exports.terrainScriptName = "Terrain";
    exports.bigTerrainEditorScriptName = "bigTerrainEditor";
    pc.registerScript(Terrain, exports.terrainScriptName);
    pc.registerScript(Terrain, exports.bigTerrainEditorScriptName);
    Terrain.attributes.add("renderMode", { type: "number", enum: (0, EnumConverter_mjs_2.mapTitleEnum)(RenderMode), default: RenderMode.Standard, });
    Terrain.attributes.add("receiveShadow", { type: "boolean", default: true, });
    Terrain.attributes.add("lodByYPos", { type: "boolean", default: true, });
    Terrain.attributes.add("zFar", { type: "number", default: 5000, min: 1, step: 1, precision: 0, });
    Terrain.attributes.add("width", { type: "number", enum: Enums_mjs_1.fieldSizeEnum, default: Enums_mjs_1.fieldSizeEnumDefault, });
    Terrain.attributes.add("depth", { type: "number", enum: Enums_mjs_1.fieldSizeEnum, default: Enums_mjs_1.fieldSizeEnumDefault, });
    Terrain.attributes.add("patchSize", { type: "number", enum: Enums_mjs_1.fieldPatchSizeEnum, default: Enums_mjs_1.fieldPatchSizeEnumDefault, });
    Terrain.attributes.add("height", { type: "number", default: 10, min: 1, });
    Terrain.attributes.add("valueType", { type: "string", enum: Enums_mjs_1.fieldHeightValueTypeEnum, default: Enums_mjs_1.fieldHeightValueTypeDefault, });
    Terrain.attributes.add("layerName", { type: "string", default: 'World', });
    Terrain.attributes.add("paintLayerName", { type: "string", default: 'TerrainEditor', });
    Terrain.attributes.add("cameraEntity", { type: "entity" });
    Terrain.attributes.add("autoRender", { type: "boolean", default: true, });
    Terrain.attributes.add("painting", { type: "boolean", default: false, });
    Terrain.attributes.add("wireframe", { type: "boolean", default: false, });
    Terrain.attributes.add("directionLightShadowSettings", {
        type: "json",
        array: true,
        max: 4,
        schema: [
            {
                name: "zFar",
                type: "number",
                default: 5000,
                min: 1,
                step: 1,
                precision: 0,
            },
            {
                name: "layerName",
                type: "string",
                default: 'WorldShadow',
            },
            {
                name: "visible",
                type: "boolean",
                default: true,
            }
        ]
    });
    Terrain.attributes.add("heightMap", {
        type: 'json',
        schema: [
            {
                name: 'file',
                type: 'asset',
                assetType: 'binary',
            },
            {
                name: 'texture',
                type: "asset",
                assetType: 'texture',
            },
            {
                name: 'smoothFactor',
                description: `
                To what extent neighbors influence the new height:
                Value of 0 will ignore neighbors (no smoothing).
                Value of 1 will ignore the node old height.
            `,
                type: "number",
                default: 1,
                min: 0,
                max: 1,
            },
            {
                name: 'smoothRadius',
                description: `The radius of factor smooth.`,
                type: "number",
                default: 1,
                step: 1,
                min: 1,
            }
        ]
    });
    Terrain.attributes.add("brush", {
        type: "json",
        schema: [
            {
                name: "active",
                description: "The brush texture index.",
                type: "number",
                default: 0,
                min: 0,
                step: 1,
                precision: 0,
            },
            {
                name: "size",
                description: "The brush size",
                type: "number",
                default: 10,
                min: brushMinSize,
                max: brushMaxSize,
                step: 1,
                precision: 0,
            },
            {
                name: "opacity",
                description: "The brush opacity",
                type: "number",
                default: 0.5,
                min: 0,
                max: 1,
            },
            {
                name: "textures",
                description: "The brush textures",
                type: "asset",
                assetType: 'texture',
                array: true,
            }
        ]
    });
    Terrain.attributes.add("activeLayer", { type: 'number', default: 0, min: 0, max: 32, step: 1, precision: 0, });
    Terrain.attributes.add("layers", {
        type: "json",
        array: true,
        schema: [
            {
                name: "name",
                title: "Name",
                type: "string",
            },
            {
                name: "diffuse",
                title: "Diffuse",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "normalMap",
                title: "Normal Map",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "size",
                title: "Size",
                type: "vec2",
                default: [1, 1]
            },
            {
                name: "offset",
                title: "Offset",
                type: "vec2",
                default: [0, 0]
            },
        ]
    });
    Terrain.attributes.add("painterSettings", {
        type: "json",
        schema: [
            {
                name: "splatMap",
                type: "asset",
                assetType: "texture",
                title: "Splat Map",
            },
        ]
    });
});
define("src/GrassField/GrassFieldCompute", ["require", "exports", "src/Heightfield/GPUHeightMapBuffer", "src/Heightfield/ShaderChunks"], function (require, exports, GPUHeightMapBuffer_mjs_2, ShaderChunks_mjs_7) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    const defines = `
    #define HM_NUM_CHUNKS_X       (%%HM_NUM_CHUNKS_X%%)
    #define HM_NUM_CHUNKS_X_U     (uint(HM_NUM_CHUNKS_X))
    #define HM_CHUNK_SIZE         (%%HM_CHUNK_SIZE%%)
    #define HM_CHUNK_SIZE_F       (float(HM_CHUNK_SIZE))
    #define HM_CHUNK_SIZE_U       (uint(HM_CHUNK_SIZE))

    #define FIELD_SIZE            (ivec2(%%FIELD_SIZE_X%%, %%FIELD_SIZE_Z%%))
    #define FIELD_SIZE_F          (vec2(%%FIELD_SIZE_X_F%%, %%FIELD_SIZE_Z_F%%))
    #define FIELD_SIZE_BOUND_F    (FIELD_SIZE_F - 2.0)      
    #define FIELD_SIZE_H_F        (FIELD_SIZE_F / 2.0)

    #define GRASS_FIELD_SIZE_F    (vec2(%%GRASS_FIELD_SIZE_X%%, %%GRASS_FIELD_SIZE_Z%%))
    #define GRASS_FIELD_SIZE_H_F  (GRASS_FIELD_SIZE_F / 2.0)
`;
    const uniforms = `
    uniform float ${ShaderChunks_mjs_7.maxHeightParamName};
`;
    const heightMapDecoder = `
    uvec3 getFieldChunkBufferCoord(vec2 nXZ) {
        uvec2 xz = uvec2(clamp(nXZ, vec2(0.0), FIELD_SIZE_F));
        uvec2 ck = xz / HM_CHUNK_SIZE_U, local = xz % HM_CHUNK_SIZE_U;
        return uvec3(local, ck.y * HM_NUM_CHUNKS_X_U + ck.x);
    }
    
    float getAltitude(vec2 xz) {
        uvec3 coord = getFieldChunkBufferCoord(xz);
        return getAltitudeFromTexture(coord);
    }

    float getAltitudeInterpolatedAndNormal(vec2 xz, out vec3 surfaceNormal) {

        float x0z0 = getAltitude(xz);
        float x1z0 = getAltitude(xz + vec2(1.0, 0.0));
        float x0z1 = getAltitude(xz + vec2(0.0, 1.0));
        float x1z1 = getAltitude(xz + vec2(1.0, 1.0));

        float factorX = xz[0] - floor(xz[0]);
        float factorZ = xz[1] - floor(xz[1]);

        float interpolatedBottom = (x1z0 - x0z0) * factorX + x0z0;
        float interpolatedTop    = (x1z1 - x0z1) * factorX + x0z1;
        float finalHeight        = (interpolatedTop - interpolatedBottom) * factorZ + interpolatedBottom;

        float left  = x1z0;
        float right = getAltitude(xz + vec2(-1.0, 0));
        float up    = x0z1;
        float down  = getAltitude(xz + vec2(0, -1.0));

        surfaceNormal = normalize(vec3(left, 2.0, down) - vec3(right, 0.0, up));

        return finalHeight;
    }
`;
    const vshader = `
    attribute vec2 vertex_position;

    uniform vec3 uViewerPosition;
    uniform vec3 uTerrainScale;

    varying vec2 vOffset;

    void main(void)
    {
        gl_Position = vec4(vertex_position, 0.5, 1.0);

        vOffset = floor(uViewerPosition.xz / uTerrainScale.xz) + FIELD_SIZE_H_F - GRASS_FIELD_SIZE_H_F;
    }
`;
    const fshader = `
    uniform vec3 uTerrainScale;

    varying vec2 vOffset;

    vec4 packFloatFrom0To1ToRGBA(float value) {
        float r = floor(value * 255.0);
        float g = floor(fract(value * 255.0) * 255.0);
        float b = floor(fract(value * 255.0 * 255.0) * 255.0);
        float a = floor(fract(value * 255.0 * 255.0 * 255.0) * 255.0);
        return vec4(r, g, b, a) / 255.0;
    }
    
    void main(void) {

        vec2 pixelXY = gl_FragCoord.xy;
        vec2 fieldPointXZ = vOffset + pixelXY;
        vec3 fieldPointNormal;

        float fieldPointAltitude = getAltitudeInterpolatedAndNormal(fieldPointXZ, fieldPointNormal);
        float fieldPointFactor = fieldPointAltitude / ${ShaderChunks_mjs_7.maxHeightParamName};

        pcFragColor0 = packFloatFrom0To1ToRGBA(fieldPointFactor);
        pcFragColor1 = vec4(fieldPointNormal, 1.0);
    }
`;
    class GrassFieldCompute {
        get bufferHeightMap() { return this._bufferHm; }
        get bufferNormalMap() { return this._bufferNm; }
        static getNormalizeRadius(radius) {
            return Math.floor(radius);
        }
        constructor(graphicsDevice, radius, terrain) {
            this.graphicsDevice = graphicsDevice;
            this.radius = radius;
            this.terrain = terrain;
            this.accuracy = 1.0;
            this.normalizeRadius = GrassFieldCompute.getNormalizeRadius(this.radius);
            this.patchRadius = this.normalizeRadius / 5;
            // Add pixel for render far blade pos more (radius + randValue)
            this.size = this.normalizeRadius * 2.0;
            this._initShader();
            this._initRenderTarget();
            this._viewport = new pc.Vec4(0, 0, this.size * this.accuracy, this.size * this.accuracy);
            this._quadRenderPass = new pc.RenderPassShaderQuad(this.graphicsDevice);
            this._quadRenderPass.shader = this._shader;
            this._quadRenderPass.init(this._renderTarget);
        }
        destroy() {
            var _a, _b, _c, _d, _e;
            (_a = this._quadRenderPass) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._renderTarget) === null || _b === void 0 ? void 0 : _b.destroy();
            (_c = this._bufferHm) === null || _c === void 0 ? void 0 : _c.destroy();
            (_d = this._bufferNm) === null || _d === void 0 ? void 0 : _d.destroy();
            (_e = this._shader) === null || _e === void 0 ? void 0 : _e.destroy();
        }
        update(localPosition) {
            const graphicsDevice = this.graphicsDevice;
            graphicsDevice.scope.resolve(ShaderChunks_mjs_7.heightMapParamName).setValue(this.terrain.heightMapTexture);
            graphicsDevice.scope.resolve(ShaderChunks_mjs_7.maxHeightParamName).setValue(this.terrain.height);
            graphicsDevice.scope.resolve('uViewerPosition').setValue(localPosition.toArray());
            graphicsDevice.scope.resolve('uTerrainScale').setValue(this.terrain.entity.getScale().toArray());
            // backup current settings
            const { vx, vy, vw, vh, sx, sy, sw, sh } = graphicsDevice;
            // set new values
            graphicsDevice.setViewport(this._viewport.x, this._viewport.y, this._viewport.z, this._viewport.w);
            graphicsDevice.setScissor(this._viewport.x, this._viewport.y, this._viewport.z, this._viewport.w);
            this._quadRenderPass.render();
            graphicsDevice.setViewport(vx, vy, vw, vh);
            graphicsDevice.setScissor(sx, sy, sw, sh);
            // debug
            // pc!.app!.drawTexture( 0.5, -0.6, 0.5, 0.3, this._buffer, undefined as any);
        }
        _initShader() {
            const heightMap = this.terrain.object.heightMap;
            const hmFormat = (0, GPUHeightMapBuffer_mjs_2.getHeightMapFormat)(this.graphicsDevice, heightMap);
            const heightMapFragment = ShaderChunks_mjs_7.heightMapSampler.replaceAll('%%HEIGHT_MAP_SAMPLER%%', (0, ShaderChunks_mjs_7.getSamplerType)(hmFormat));
            const altitudeFromTextureFragment = (0, ShaderChunks_mjs_7.getAltitudeFromTextureVSCode)(hmFormat, ShaderChunks_mjs_7.getAltitudeFromTextureChunks);
            const definesFragment = defines
                .replace('%%HM_NUM_CHUNKS_X%%', String(heightMap.dataNumChunksX))
                .replace('%%HM_CHUNK_SIZE%%', String(heightMap.dataChunkSize))
                .replace('%%FIELD_SIZE_X%%', String(heightMap.width))
                .replace('%%FIELD_SIZE_Z%%', String(heightMap.depth))
                .replace('%%FIELD_SIZE_X_F%%', heightMap.width.toFixed(1))
                .replace('%%FIELD_SIZE_Z_F%%', heightMap.depth.toFixed(1))
                .replace('%%GRASS_FIELD_SIZE_X%%', String(this.size))
                .replace('%%GRASS_FIELD_SIZE_Z%%', String(this.size));
            const vertexShader = definesFragment
                + vshader;
            const fragmentShader = definesFragment
                + uniforms
                + heightMapFragment
                + altitudeFromTextureFragment
                + heightMapDecoder
                + fshader;
            this._shader = pc.ShaderUtils.createShader(this.graphicsDevice, {
                uniqueName: "GrassFieldComputeShader",
                useTransformFeedback: false,
                vertexGLSL: vertexShader,
                fragmentGLSL: fragmentShader,
                attributes: {
                    vertex_position: pc.SEMANTIC_POSITION
                },
            });
        }
        _initBufferTexture(name, format = pc.PIXELFORMAT_RGBA8) {
            return new pc.Texture(this.graphicsDevice, {
                name,
                format,
                width: this.size * this.accuracy,
                height: this.size * this.accuracy,
                mipmaps: false,
                storage: true,
                type: pc.TEXTURETYPE_DEFAULT,
                addressU: pc.ADDRESS_CLAMP_TO_EDGE,
                addressV: pc.ADDRESS_CLAMP_TO_EDGE,
                minFilter: pc.FILTER_LINEAR_MIPMAP_LINEAR,
                magFilter: pc.FILTER_LINEAR,
                flipY: !this.graphicsDevice.isWebGPU
            });
        }
        _initRenderTarget() {
            this._bufferHm = this._initBufferTexture('GrassBufferHM');
            this._bufferNm = this._initBufferTexture('GrassBufferNM');
            this._renderTarget = new pc.RenderTarget({
                colorBuffers: [this._bufferHm, this._bufferNm],
                flipY: !this.graphicsDevice.isWebGPU,
                stencil: false,
                depth: false
            });
        }
    }
    exports.default = GrassFieldCompute;
});
define("src/GrassField/GrassFieldTexture", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.GrassFieldData = void 0;
    class GrassFieldData {
        get texture() { return this._texture; }
        constructor(graphicsDevice, width, depth, buffer) {
            this._width = width;
            this._depth = depth;
            const w = (width - 1) / 4 + 1;
            const d = (depth - 1) / 4 + 1;
            this._buffer = buffer !== null && buffer !== void 0 ? buffer : new Uint8Array(w * d * 4);
            this._texture = new pc.Texture(graphicsDevice, {
                width: w,
                height: d,
                format: pc.PIXELFORMAT_RGBA8U,
                mipmaps: false,
                minFilter: pc.FILTER_NEAREST,
                magFilter: pc.FILTER_NEAREST,
                addressU: pc.ADDRESS_CLAMP_TO_EDGE,
                addressV: pc.ADDRESS_CLAMP_TO_EDGE,
                flipY: !graphicsDevice.isWebGPU,
                levels: [this._buffer]
            });
        }
        destroy() {
            var _a;
            (_a = this._texture) === null || _a === void 0 ? void 0 : _a.destroy();
        }
        setChannel(x, z, channel) {
            const index = (x + z * this._width) / 4 | 0;
            const value = this._buffer[index];
        }
        setPixel() {
            if (this._texture) {
                const device = this._texture.device;
                const dataChunkSize = 1;
                const buffer = new Uint8Array(4);
                if (device.isWebGL2) {
                    const gl = device.gl;
                    const textureFormat = this._texture.impl._glFormat;
                    const texturePixelT = this._texture.impl._glPixelType;
                    const textureTarget = this._texture.impl._glTarget;
                    const textureObject = this._texture.impl._glTexture;
                    gl.bindTexture(textureTarget, textureObject);
                    gl.texSubImage3D(gl.TEXTURE_2D_ARRAY, 0, 0, 0, 0, dataChunkSize, dataChunkSize, 1, textureFormat, texturePixelT, buffer);
                }
                else if (device.isWebGPU) {
                    const webgpu = device.wgpu;
                    const texture = (this._texture.impl.gpuTexture);
                    webgpu.queue.writeTexture({
                        texture: texture,
                        origin: [0, 0, 0],
                        mipLevel: 0
                    }, buffer, {
                        offset: 0,
                        bytesPerRow: 4 * dataChunkSize, // always 4 for rgba format
                        rowsPerImage: dataChunkSize
                    }, {
                        width: dataChunkSize,
                        height: dataChunkSize
                    });
                }
            }
        }
    }
    exports.GrassFieldData = GrassFieldData;
    GrassFieldData.MAX_CHANEL = 8;
});
define("src/GrassField/GrassShaderChunk", ["require", "exports", "src/Heightfield/ShaderChunks"], function (require, exports, ShaderChunks_mjs_8) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.chunks = exports.diffusePS = exports.startVS = exports.calculateLocalVS = exports.bladeDecoderVS = exports.baseClearSubVS = exports.baseVS = exports.startUv0VS = exports.uv0VS = exports.normalVS = exports.transformVS = exports.normalCoreVS = exports.definesBladeVS = exports.definesVS = exports.transformDeclVS = exports.transformInstancingVS = exports.instancingVS = exports.maxSlopeFactorParamName = exports.circleSmoothingParamName = exports.windIntensityParamName = exports.drawPosParamName = exports.lod2OffsetXZParamName = exports.lod1OffsetXZParamName = exports.fieldScaleParamName = exports.timeParamName = exports.shapeAttrName = exports.offsetAttrName = exports.vindexAttrName = void 0;
    exports.getGrassShaderChunks = getGrassShaderChunks;
    exports.vindexAttrName = "vertex_position";
    exports.offsetAttrName = "vertex_offset";
    exports.shapeAttrName = "vertex_shape";
    exports.timeParamName = "uTime";
    exports.fieldScaleParamName = "uFieldScale";
    exports.lod1OffsetXZParamName = "uLod1OffsetXZ";
    exports.lod2OffsetXZParamName = "uLod2OffsetXZ";
    exports.drawPosParamName = "uDrawPosition";
    exports.windIntensityParamName = "uWindIntensity";
    exports.circleSmoothingParamName = "uCircleSmoothing";
    exports.maxSlopeFactorParamName = "uMaxSlopeFactor";
    exports.instancingVS = ``;
    exports.transformInstancingVS = ``;
    exports.transformDeclVS = ``;
    exports.definesVS = `
    #define HM_NUM_CHUNKS_X       (%%HM_NUM_CHUNKS_X%%)
    #define HM_NUM_CHUNKS_X_U     (uint(HM_NUM_CHUNKS_X))
    #define HM_CHUNK_SIZE         (%%HM_CHUNK_SIZE%%)
    #define HM_CHUNK_SIZE_F       (float(HM_CHUNK_SIZE))
    #define HM_CHUNK_SIZE_U       (uint(HM_CHUNK_SIZE))

    #define FIELD_SIZE            (ivec2(%%FIELD_SIZE_X%%, %%FIELD_SIZE_Z%%))
    #define FIELD_SIZE_F          (vec2(%%FIELD_SIZE_X_F%%, %%FIELD_SIZE_Z_F%%))
    #define FIELD_SIZE_BOUND_F    (FIELD_SIZE_F - 2.0)      
    #define FIELD_SIZE_H_F        (FIELD_SIZE_F / 2.0)
    #define FIELD_SIZE_H_N_F      (-FIELD_SIZE_H_F)

    #define GRASS_FIELD_RADIUS      (%%GRASS_FIELD_RADIUS%%)
    #define GRASS_FIELD_SIZE_F      (GRASS_FIELD_RADIUS * 2.0)
    #define GRASS_PATCH_SIZE_F      (GRASS_FIELD_RADIUS / 2.5)
    #define GRASS_HALF_PATCH_SIZE_F (GRASS_FIELD_RADIUS / 5.0)
    #define GRASS_FIELD_SIZE        (vec2(GRASS_FIELD_SIZE_F))

    #define MAX_ZINIT_DISTANCE (300.0)
`;
    exports.definesBladeVS = `
    #define SIDE_COUNT             (%%SIDE_COUNT%%) // # blade side count [1 or 2]

    #define LOD0_BLADE_SEGS        (%%LOD0_BLADE_SEGS%%) // # of blade segments lod 0
    #define LOD1_BLADE_SEGS        (%%LOD1_BLADE_SEGS%%) // # of blade segments lod 1
    #define LOD2_BLADE_SEGS        (%%LOD2_BLADE_SEGS%%) // # of blade segments lod 2

    #define LOD0_BLADE_DIVS        (LOD0_BLADE_SEGS + 1.0)  // # of divisions
    #define LOD0_BLADE_VERTS       (LOD0_BLADE_DIVS * 2.0)  // # of vertices (per side, so 1/2 total)
    #define LOD0_BLADE_VERTS_COUNT (LOD0_BLADE_VERTS * SIDE_COUNT) // # of vertices

    #define LOD1_BLADE_DIVS        (LOD1_BLADE_SEGS > 0.0 ? LOD1_BLADE_SEGS + 1.0 : 0.0) // # of divisions
    #define LOD1_BLADE_VERTS       (LOD1_BLADE_DIVS * 2.0)                               // # of vertices (per side, so 1/2 total)
    #define LOD1_BLADE_VERTS_COUNT (LOD1_BLADE_VERTS * SIDE_COUNT)                       // # of vertices

    #define LOD2_BLADE_DIVS        (LOD2_BLADE_SEGS > 0.0 ? LOD2_BLADE_SEGS + 1.0 : 0.0) // # of divisions
    #define LOD2_BLADE_VERTS       (LOD2_BLADE_DIVS * 2.0)                               // # of vertices (per side, so 1/2 total)
    #define LOD2_BLADE_VERTS_COUNT (LOD2_BLADE_VERTS * SIDE_COUNT)                       // # of vertices
    
    #define LOD2_BLADE_VERTS_ALL_COUNT (LOD2_BLADE_VERTS_COUNT * 16.0) // # of vertices all fragments for LOD2

    #define LOD0_GRASS_PATCH_CENTER_OFFSET   (vec2(GRASS_HALF_PATCH_SIZE_F)) // offset for lod0 patch start
`;
    exports.normalCoreVS = `
    // FIX: vertex_normal undeclaration
    vec3 vertex_normal;

    vec3 getLocalNormal(vec3 vertexNormal) {

        // Set default shader normal
        vertex_normal = dVertexNormal;

        return dVertexNormal;
    }

    mat3 getNormalMatrix(mat4 modelMatrix) {
        return matrix_normal;
    }
`;
    exports.transformVS = `
    vec3 getWorldPosition() {
        return dPositionW;
    }

    mat4 getModelMatrix() {
        return matrix_model;
    }

    vec4 getPosition() {

        decodeBlade();
        calculateBladeVertex();

        dModelMatrix = getModelMatrix();

        vec4 posW      = dModelMatrix * vec4(dVertexPosition, 1.0);
        vec4 screenPos = matrix_viewProjection * posW;

        dPositionW = posW.xyz;

        return screenPos;
    }
`;
    exports.normalVS = `
    vec3 getNormal() {
        dNormalMatrix = matrix_normal;
        return normalize(dNormalMatrix * dVertexNormal);
    }
`;
    exports.uv0VS = `
    vec2 getUv0() {
        return vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);
    }
`;
    // bug with getUv0
    exports.startUv0VS = `    
    vec2 getUv0() {
        return vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);
    }
`;
    exports.baseVS = `
    uniform mat4 matrix_viewProjection;
    uniform mat4 matrix_model;
    uniform mat3 matrix_normal;

    uniform highp usampler2D uDataMap;
    uniform highp sampler2D uComputeHMData;
    uniform highp sampler2D uComputeNMData;

    uniform vec3  ${exports.fieldScaleParamName};
    uniform float ${ShaderChunks_mjs_8.maxHeightParamName};

    uniform vec3  ${exports.drawPosParamName};       // centre of where we want to draw
    uniform float ${exports.timeParamName};          // used to animate blades
    uniform float ${exports.windIntensityParamName};
    uniform float ${exports.circleSmoothingParamName};
    uniform float ${exports.maxSlopeFactorParamName};

    uniform vec2 ${exports.lod1OffsetXZParamName}[8];  // center offset from draw pos lod 1
    uniform vec2 ${exports.lod2OffsetXZParamName}[16]; // center offset from draw pos lod 2

    attribute float ${exports.vindexAttrName};
    attribute vec4 ${exports.offsetAttrName};
    attribute vec4 ${exports.shapeAttrName};

    float dVertexIndex;           // vertex index for this side of the blade
    float dDivVertexIndex;        // div index (0 .. BLADE_DIVS)
    float dPercentOfBladeHeight;  // percent of height of blade this vertex is at
    float dSideOfBlade;           // front/back side of blade
    float dEdgeOfBlade;           // left/right edge (x=0 or x=1)
    vec2 dBladeFieldXZPos;        // blade xz position on field
    vec3 dVertexPosition;         // vertex position - start with 2D shape, no bend applied
    vec3 dVertexNormal;           // vertex normal
    vec2 dGrassPatchOffsetXZ;     // grass patch center
    vec3 dFieldSurfaceNormal;     // field surface normal
    float dFieldSurfaceAltitude;  // field surface altitude
`;
    exports.baseClearSubVS = `
    vec3 dPositionW;
    mat4 dModelMatrix;
    mat3 dNormalMatrix;
`;
    exports.bladeDecoderVS = `
    void decodeBlade() {

#if defined(USE_LOD2)

        float nnVi = ${exports.vindexAttrName} - LOD2_BLADE_VERTS_ALL_COUNT;

        if (nnVi < 0.0) {

            float lod2nVi  = mod(${exports.vindexAttrName}, LOD2_BLADE_VERTS_COUNT);
            int patchIndex = int(${exports.vindexAttrName} / LOD2_BLADE_VERTS_COUNT);

            dVertexIndex          = mod(lod2nVi, LOD2_BLADE_VERTS);
            dDivVertexIndex       = floor(dVertexIndex / 2.0);
            dPercentOfBladeHeight = dDivVertexIndex / LOD2_BLADE_SEGS;
            dSideOfBlade          = floor(lod2nVi / LOD2_BLADE_VERTS);

            dGrassPatchOffsetXZ = ${exports.lod2OffsetXZParamName}[patchIndex];
        }
        else {
#else

        float nnVi = ${exports.vindexAttrName};

#endif

#if defined(USE_LOD1)

            if (nnVi < LOD0_BLADE_VERTS_COUNT) {

#endif
                dVertexIndex          = mod(nnVi, LOD0_BLADE_VERTS);
                dDivVertexIndex       = floor(dVertexIndex / 2.0);
                dPercentOfBladeHeight = dDivVertexIndex / LOD0_BLADE_SEGS;
                dSideOfBlade          = floor(nnVi / LOD0_BLADE_VERTS);

                dGrassPatchOffsetXZ = LOD0_GRASS_PATCH_CENTER_OFFSET;

#if defined(USE_LOD1)

            }
            else {
            
                float lod1nnVi = nnVi - LOD0_BLADE_VERTS_COUNT;
                float lod1nVi  = mod(lod1nnVi, LOD1_BLADE_VERTS_COUNT);
                int patchIndex = int(lod1nnVi / LOD1_BLADE_VERTS_COUNT);

                dVertexIndex          = mod(lod1nVi, LOD1_BLADE_VERTS);
                dDivVertexIndex       = floor(dVertexIndex / 2.0);
                dPercentOfBladeHeight = dDivVertexIndex / LOD1_BLADE_SEGS;
                dSideOfBlade          = floor(lod1nVi / LOD1_BLADE_VERTS);

                dGrassPatchOffsetXZ = ${exports.lod1OffsetXZParamName}[patchIndex];
            }
#endif

#if defined(USE_LOD2)

        }

#endif

        dEdgeOfBlade = mod(dVertexIndex, 2.0);
    }
`;
    exports.calculateLocalVS = `
    // Rotate by an angle
    vec2 rotate(float x, float y, float r) {
        float c = cos(r);
        float s = sin(r);
        return vec2(x * c - y * s, x * s + y * c);
    }

    // Rotate by a vector
    vec2 rotate(float x, float y, vec2 r) {
        return vec2(x * r.x - y * r.y, x * r.y + y * r.x);
    }
    
    mat3 getSurfaceRotationMatrix(vec3 surfaceNormal) {

        vec3 initialNormal = vec3(0.0, 1.0, 0.0);
        vec3 targetNormal = normalize(surfaceNormal);

        float dotProd = dot(initialNormal, targetNormal);
        
        // we do not consider negative parallel normal (if dotProd < -0.9999)
        if (dotProd > 0.9999) {
            return mat3(1.0);
        }

        vec3 axis = normalize(cross(initialNormal, targetNormal));
        float angle = acos(dotProd);
        
        float s = sin(angle);
        float c = cos(angle);
        float t = 1.0 - c;

        return mat3(
            t * axis.x * axis.x + c,
            t * axis.x * axis.y - s * axis.z,
            t * axis.x * axis.z + s * axis.y,
            
            t * axis.x * axis.y + s * axis.z,
            t * axis.y * axis.y + c,
            t * axis.y * axis.z - s * axis.x,
            
            t * axis.x * axis.z - s * axis.y,
            t * axis.y * axis.z + s * axis.x,
            t * axis.z * axis.z + c
        );
    }

    float getGrassFactor(vec2 xz, vec3 surfaceNormal) {
        return (all(greaterThanEqual(xz, vec2(0.0))) &&
                all(lessThanEqual(xz, FIELD_SIZE_BOUND_F)) &&
                surfaceNormal.y >= ${exports.maxSlopeFactorParamName})
                ? surfaceNormal.y : 0.0;
    }
    
    float unpackFactorFromRGBA(vec4 rgba) {
        // TODO: optimization
        const vec4 bitShifts = vec4(1.0, 1.0 / (255.0), 1.0 / (255.0 * 255.0), 1.0 / (255.0 * 255.0 * 255.0)); 
        return dot(rgba, bitShifts);
    }

    varying vec2 vUvFieldCoord;
    varying vec2 vUvCoord;
    varying vec3 vColor;

    void calculateBladeVertex() {

        vec4 offset = ${exports.offsetAttrName};
        vec4 shape  = ${exports.shapeAttrName};

        // vec4 offset = vec4(${exports.offsetAttrName}.xyz, 0.0);
        // vec4 shape = vec4(0.05, 1.5, 0.0, 0.0);

        // Based on centre of view cone position, what grid tile should
        // this piece of grass be drawn at?
        vec2 viewerPos   = ${exports.drawPosParamName}.xz;
        vec2 bladeOffset = offset.xy;

        // Find the virtual patch center
        vec2 virtualPatchCenter = floor((viewerPos - bladeOffset) / GRASS_PATCH_SIZE_F) * GRASS_PATCH_SIZE_F + dGrassPatchOffsetXZ;

        // Find the blade mesh x,y position
        vec2 bladePos = virtualPatchCenter + bladeOffset;

        // Local blade position in field
        // because the positions are shifted by half the size of the field
        dBladeFieldXZPos = bladePos / ${exports.fieldScaleParamName}.xz + FIELD_SIZE_H_F;

        // Find the blade pos in compute data
        vec2 grassFieldBladePos = bladePos / ${exports.fieldScaleParamName}.xz - floor(viewerPos / ${exports.fieldScaleParamName}.xz) + GRASS_FIELD_RADIUS;
        vec2 grassFieldBladeClampPos = clamp(grassFieldBladePos, vec2(0.0), GRASS_FIELD_SIZE);

        vec2 grassFieldBladeUV = grassFieldBladeClampPos / GRASS_FIELD_SIZE_F;
        vec4 bladeComputeHMData = texture2D(uComputeHMData, grassFieldBladeUV);
        vec4 bladeComputeNMData = texture2D(uComputeNMData, grassFieldBladeUV);

        dFieldSurfaceAltitude = unpackFactorFromRGBA(bladeComputeHMData.rgba) * ${ShaderChunks_mjs_8.maxHeightParamName};
        dFieldSurfaceNormal = bladeComputeNMData.rgb;

        dFieldSurfaceAltitude *= ${exports.fieldScaleParamName}.y;

        // Sample the heightfield data texture to get altitude for this blade position
        float grassFactor = getGrassFactor(dBladeFieldXZPos, dFieldSurfaceNormal);

        float distanceFromBladeToQuadCenter = distance(bladePos, viewerPos);
        float degenerateByDistanceFromBladeToQuadCenter = smoothstep(0.92, 1.0, GRASS_PATCH_SIZE_F * ${exports.circleSmoothingParamName} / distanceFromBladeToQuadCenter);

        // Vertex position - start with 2D shape, no bend applied
        dVertexPosition = vec3(
            shape.x * (dEdgeOfBlade - 0.5) * (1.0 - pow(dPercentOfBladeHeight, 3.0)), // taper blade edges as approach tip
            0.0, // flat y, unbent
            shape.y * dPercentOfBladeHeight // height of vtx, unbent
        );

        // Start computing a normal for this vertex
        dVertexNormal = vec3(0.0, dSideOfBlade * -2.0 + 1.0, 0.0);

        // Apply blade's natural curve amount
        // Then add animated curve amount by time using this blade's
        // unique properties to randomize its oscillation
        float curve = shape.w * 2.0 + 0.125 * sin(${exports.timeParamName} * 4.0 + offset.w * 0.2 * shape.y + offset.x + offset.y);

        // TODO
        float wind = 0.5;

        wind = (clamp(wind, 0.25, 1.0) - 0.25) * (1.0 / 0.75);
        wind = wind * wind * ${exports.windIntensityParamName};
        wind *= dPercentOfBladeHeight; // scale wind by height of blade
        wind = -wind;

        // put lean and curve together
        float rot = shape.z + curve * dPercentOfBladeHeight;
        vec2 rotv = vec2(cos(rot), sin(rot));

        dVertexPosition.yz = rotate(dVertexPosition.y, dVertexPosition.z, rotv);
        dVertexNormal.yz   = rotate(dVertexNormal.y, dVertexNormal.z, rotv);

        // rotation of this blade as a vector
        rotv = vec2(cos(offset.w), sin(offset.w));

        dVertexPosition.xy = rotate(dVertexPosition.x, dVertexPosition.y, rotv);
        dVertexNormal.xy   = rotate(dVertexNormal.x, dVertexNormal.y, rotv);

        // wind blows in axis-aligned direction to make things simpler
        rotv = vec2(cos(wind), sin(wind));
        
        dVertexPosition.yz = rotate(dVertexPosition.y, dVertexPosition.z, rotv);
        dVertexNormal.yz   = rotate(dVertexNormal.y, dVertexNormal.z, rotv);

        // rotation of surface normal
        mat3 surfaceRotationMat = getSurfaceRotationMatrix(dFieldSurfaceNormal);
        dVertexPosition = surfaceRotationMat * dVertexPosition;
        dVertexNormal   = surfaceRotationMat * dVertexNormal;

        float drawPosAltitude = ${exports.drawPosParamName}.y;
        float distanceQuadCenterToDraw = distance(dFieldSurfaceAltitude, drawPosAltitude);
        float degenerateByDistanceFromBladeToDraw = smoothstep(0.81, 1.0, MAX_ZINIT_DISTANCE / distanceQuadCenterToDraw);

        // Transition geometry toward degenerate as we approach field altitude
        float degenerateFactor = grassFactor * degenerateByDistanceFromBladeToDraw * degenerateByDistanceFromBladeToQuadCenter;

        dVertexPosition *= degenerateFactor;
        dVertexNormal *= degenerateFactor;

        // Translate to world coordinates
        dVertexPosition.x += bladePos.x;
        dVertexPosition.y += bladePos.y;
        dVertexPosition.z += dFieldSurfaceAltitude;
        
        // Translate to xz plane
        dVertexPosition = dVertexPosition.xzy;
        dVertexNormal   = normalize(dVertexNormal.xzy);

        // grass texture coordinate for this vertex
        vUvCoord = vec2(dEdgeOfBlade, dDivVertexIndex * 2.0);

        // field texture coordinate for this vertex
        vUvFieldCoord = dBladeFieldXZPos / FIELD_SIZE_F;

        // Vertex color must be brighter because it is multiplied with blade texture
        // Each blade is randomly colourized a bit by its position
        vColor = vec3(cos(${exports.offsetAttrName}.x), sin(${exports.offsetAttrName}.y), sin(${exports.offsetAttrName}.x));
    }
`;
    // https://community.khronos.org/t/discarding-polygons-in-vertex-shader/103839/9
    exports.startVS = `
    ${exports.startUv0VS}

    void main(void) {

        gl_Position = getPosition();
`;
    exports.diffusePS = `
    uniform sampler2D uDiffuseTex;
    uniform vec3 uDiffuseColor;
    uniform vec3 uDiffuseColorRandom;

    varying vec2 vUvFieldCoord;
    varying vec2 vUvCoord;
    varying vec3 vColor;

    vec3 autoGammaCorrectInput(vec3 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    vec4 autoGammaCorrectInput(vec4 v) {
        #if defined(GAMMA_NORMALIZE)
            return gammaCorrectInput(v);
        #else
            return v;
        #endif
    }

    void getAlbedo() {

        vec3 tex = autoGammaCorrectInput(texture2D(uDiffuseTex, vUvCoord).rgb);

        dAlbedo = tex * uDiffuseColor + vColor * uDiffuseColorRandom;
    }
`;
    exports.chunks = {
        heightMapSampler: ShaderChunks_mjs_8.heightMapSampler,
        definesVS: exports.definesVS,
        definesBladeVS: exports.definesBladeVS,
        bladeDecoderVS: exports.bladeDecoderVS,
        calculateLocalVS: exports.calculateLocalVS,
        // Vertex
        baseVS: exports.baseVS,
        baseClearSubVS: exports.baseClearSubVS,
        transformVS: exports.transformVS,
        transformDeclVS: exports.transformDeclVS,
        instancingVS: exports.instancingVS,
        transformInstancingVS: exports.transformInstancingVS,
        normalCoreVS: exports.normalCoreVS,
        normalVS: exports.normalVS,
        uv0VS: exports.uv0VS,
        startVS: exports.startVS,
        // Fragment
        diffusePS: exports.diffusePS,
    };
    function getGrassShaderChunks({ width, depth, heightMapChunkSize, heightMapFormat, lod0BladeSegs, lod1BladeSegs, lod2BladeSegs, sideCount, radius, chunksStore = exports.chunks, engineVersion = 'v1', }) {
        const definesVS = chunksStore.definesVS
            .replace('%%HM_NUM_CHUNKS_X%%', String((width - 1) / (heightMapChunkSize - 1) | 0))
            .replace('%%HM_CHUNK_SIZE%%', String(heightMapChunkSize | 0))
            .replace('%%FIELD_SIZE_X%%', String(width))
            .replace('%%FIELD_SIZE_Z%%', String(depth))
            .replace('%%FIELD_SIZE_X_F%%', width.toFixed(1))
            .replace('%%FIELD_SIZE_Z_F%%', depth.toFixed(1))
            .replace('%%GRASS_FIELD_RADIUS%%', radius.toFixed(1));
        const definesBladeVS = chunksStore.definesBladeVS
            .replace('%%SIDE_COUNT%%', sideCount.toFixed(1))
            .replace('%%LOD0_BLADE_SEGS%%', lod0BladeSegs.toFixed(1))
            .replace('%%LOD1_BLADE_SEGS%%', lod1BladeSegs.toFixed(1))
            .replace('%%LOD2_BLADE_SEGS%%', lod2BladeSegs.toFixed(1))
            + (lod1BladeSegs > 0 ? '\r\n#define USE_LOD1\r\n' : '')
            + (lod2BladeSegs > 0 ? '\r\n#define USE_LOD2\r\n' : '');
        const heightMapVS = chunksStore.heightMapSampler.replaceAll('%%HEIGHT_MAP_SAMPLER%%', (0, ShaderChunks_mjs_8.getSamplerType)(heightMapFormat));
        const baseClearVS = chunksStore.baseVS + heightMapVS;
        const transformVS = chunksStore.bladeDecoderVS
            + chunksStore.calculateLocalVS
            + chunksStore.transformVS;
        const diffusePS = '#define GAMMA_NORMALIZE\r\n'
            + chunksStore.diffusePS;
        if (engineVersion === 'v2') {
            const transform2VS = definesVS + definesBladeVS + baseClearVS + transformVS;
            return {
                // Vertex
                transformVS: transform2VS,
                transformCoreVS: "",
                transformInstancingVS: "",
                normalCoreVS: chunksStore.normalCoreVS,
                // Fragment
                diffusePS: diffusePS,
            };
        }
        const baseVS = definesVS +
            definesBladeVS +
            baseClearVS +
            chunksStore.baseClearSubVS;
        return {
            // Vertex
            baseVS,
            startVS: chunksStore.startVS,
            transformVS: transformVS,
            transformDeclVS: chunksStore.transformDeclVS,
            instancingVS: chunksStore.instancingVS,
            normalVS: chunksStore.normalVS,
            uv0VS: chunksStore.uv0VS,
            // Fragment
            diffusePS: diffusePS,
        };
    }
});
define("src/Scripts/GrassField", ["require", "exports", "src/GrassField/GrassFieldTexture", "src/GrassField/GrassShaderChunk", "src/Extras/Random", "src/Heightfield/GPUHeightMapBuffer", "src/Heightfield/ShaderChunks", "src/Scripts/Terrain", "src/GrassField/GrassFieldCompute", "src/GrassField/GrassFieldFrustum"], function (require, exports, GrassFieldTexture_mjs_1, GrassShaderChunk_mjs_1, Random_mjs_1, GPUHeightMapBuffer_mjs_3, ShaderChunks_mjs_9, Terrain_mjs_1, GrassFieldCompute_mjs_1, GrassFieldFrustum_mjs_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.grassFieldScriptName = exports.GrassField = exports.bufferItemSize = void 0;
    Random_mjs_1 = __importDefault(Random_mjs_1);
    Terrain_mjs_1 = __importDefault(Terrain_mjs_1);
    GrassFieldCompute_mjs_1 = __importDefault(GrassFieldCompute_mjs_1);
    GrassFieldFrustum_mjs_1 = __importStar(GrassFieldFrustum_mjs_1);
    exports.bufferItemSize = 8;
    const tmpMat = new pc.Mat4();
    class GrassField extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this._bufferStore = {};
            this._time = 0;
            this._lastDrawPos = new pc.Vec3();
        }
        get patchNumBlades() {
            const unsafe = (this.numBlades / (GrassFieldFrustum_mjs_1.lod0PatchCount + GrassFieldFrustum_mjs_1.lod1PatchCount + GrassFieldFrustum_mjs_1.lod2PatchCount)) | 0;
            const root = Math.sqrt(unsafe) | 0;
            return root * root;
        }
        destroy() {
            var _a, _b, _c, _d, _e, _f;
            (_a = this._compute) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._sharedIndexBuffer) === null || _b === void 0 ? void 0 : _b.destroy();
            (_c = this._sharedVertexBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
            (_d = this._sharedInstancingBuffer) === null || _d === void 0 ? void 0 : _d.destroy();
            if (this._meshInst) {
                (_f = (_e = this._meshInst.instancingData) === null || _e === void 0 ? void 0 : _e.vertexBuffer) === null || _f === void 0 ? void 0 : _f.destroy();
                this._meshInst.destroy();
                if (this._meshInst.mesh) {
                    this._meshInst.mesh.destroy();
                }
                if (this._material) {
                    this._material.destroy();
                }
            }
            if (this.entity.render) {
                this.entity.render.meshInstances = [];
            }
        }
        _initBladesAndEditMode() {
            this._updateGrassMesh(this.app.graphicsDevice);
            if (this.painting) {
                this._terrain.addLock();
            }
        }
        postInitialize() {
            var _a;
            const terrainEntity = this.entity.root.findByName('Terrain');
            const terrainScript = (_a = terrainEntity.script) === null || _a === void 0 ? void 0 : _a.get(Terrain_mjs_1.default);
            this._terrain = terrainScript;
            this._cameraEntity = terrainScript.cameraEntity;
            this._dataTexture = new GrassFieldTexture_mjs_1.GrassFieldData(this.app.graphicsDevice, this._terrain.width, this._terrain.depth);
            this._frustum = new GrassFieldFrustum_mjs_1.default(this._terrain, this._cameraEntity.camera.camera);
            this._initBladesAndEditMode();
            this.on('enable', () => this._initBladesAndEditMode());
            this.on('disable', () => {
                this.destroy();
                this._terrain.freeLock();
            });
            this.on('attr:painting', () => {
                if (this.painting) {
                    this._terrain.addLock();
                }
                else {
                    this._terrain.freeLock();
                }
            });
            this.on('attr:wireframe', () => {
                var _a, _b;
                const primitive = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.mesh) === null || _b === void 0 ? void 0 : _b.primitive;
                if (primitive && primitive[0]) {
                    primitive[0].type = this.wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
                }
            });
            this.on('attr:castShadow', () => {
                this._meshInst.castShadow = this.castShadow;
            });
            this.on('attr:receiveShadow', () => {
                this._meshInst.receiveShadow = this.receiveShadow;
            });
            this.on('attr:seed', () => this._updateMeshInstancing(this.app.graphicsDevice));
            this.on('attr:numBlades', () => this._updateMeshInstancing(this.app.graphicsDevice));
            this.on('attr:bunchWidth', () => this._updateMeshInstancing(this.app.graphicsDevice));
            this.on('attr:bunchDepth', () => this._updateMeshInstancing(this.app.graphicsDevice));
            this.on('attr:bladeWidth', () => this._updateMeshInstancing(this.app.graphicsDevice));
            this.on('attr:bladeMinHeight', () => this._updateMeshInstancing(this.app.graphicsDevice));
            this.on('attr:bladeMaxHeight', () => this._updateMeshInstancing(this.app.graphicsDevice));
            this.on('attr:bunchRandRadius', () => this._updateMeshInstancing(this.app.graphicsDevice));
            this.on('attr:radius', () => this._updateGrassMesh(this.app.graphicsDevice));
            this.on('attr:lod0BladeSegs', () => this._updateGrassMesh(this.app.graphicsDevice));
            this.on('attr:lod1BladeSegs', () => this._updateGrassMesh(this.app.graphicsDevice));
            this.on('attr:lod2BladeSegs', () => this._updateGrassMesh(this.app.graphicsDevice));
            this.on('attr:bladeSideCount', () => this._updateGrassMesh(this.app.graphicsDevice));
            this.on('attr:circleSmoothing', () => {
                this._material.setParameter(GrassShaderChunk_mjs_1.circleSmoothingParamName, this.circleSmoothing);
            });
            this.on('attr:maxSlopeFactor', () => {
                this._material.setParameter(GrassShaderChunk_mjs_1.maxSlopeFactorParamName, this.maxSlopeFactor);
            });
            this.on('attr:windIntensity', () => {
                this._material.setParameter(GrassShaderChunk_mjs_1.windIntensityParamName, this.windIntensity);
            });
            this.on('attr:textures', () => {
                this._updateMaterialDiffuseData();
            });
        }
        _updateMaterialDiffuseData() {
            const existsTexs = !!this.textures && this.textures.length > 0;
            const color = existsTexs ? this.textures[0].color : pc.Color.WHITE;
            const rand = existsTexs ? this.textures[0].colorRandom : pc.Vec3.ZERO;
            const tex = existsTexs ? this.textures[0].diffuse.resource : null;
            this._material.setParameter('uDiffuseColor', [color.r, color.g, color.b]);
            this._material.setParameter('uDiffuseColorRandom', [rand.x, rand.y, rand.z]);
            this._material.setParameter('uDiffuseTex', tex);
        }
        update(dt) {
            var _a;
            this._time += dt;
            const cameraPos = this._cameraEntity.getPosition();
            const camera = this._cameraEntity.camera.camera;
            if (!this.freezeDrawPos) {
                const mat = this.entity.getWorldTransform();
                tmpMat.invert(mat);
                tmpMat.transformPoint(cameraPos, this._lastDrawPos);
            }
            const visibleLod1Count = this.lod1BladeSegs < 1 ? 0 : this._frustum.frustumLod1(cameraPos, this._compute.patchRadius, this.freezeDrawPos);
            const visibleLod2Count = this.lod2BladeSegs < 1 ? 0 : this._frustum.frustumLod2(cameraPos, this._compute.patchRadius, this.freezeDrawPos);
            const bladeSegsNum = this.bladeSideCount * 6;
            const base = this.lod2BladeSegs * bladeSegsNum * (GrassFieldFrustum_mjs_1.lod2PatchCount - visibleLod2Count);
            const count = this.lod0BladeSegs * bladeSegsNum
                + this.lod1BladeSegs * bladeSegsNum * visibleLod1Count
                + this.lod2BladeSegs * bladeSegsNum * visibleLod2Count;
            const mesh = this._meshInst.mesh;
            const primitive = mesh.primitive[0];
            primitive.base = base;
            primitive.count = count;
            // always true for lod 0
            this._meshInst.visible = this.autoRender || this.freezeDrawPos;
            this._meshInst.visibleThisFrame = this.autoRender || this.freezeDrawPos;
            this._meshInst.setParameter(`${GrassShaderChunk_mjs_1.lod1OffsetXZParamName}[0]`, this._frustum.lod1Offsets);
            this._meshInst.setParameter(`${GrassShaderChunk_mjs_1.lod2OffsetXZParamName}[0]`, this._frustum.lod2Offsets);
            this._material.setParameter(GrassShaderChunk_mjs_1.timeParamName, this._time);
            this._material.setParameter(GrassShaderChunk_mjs_1.drawPosParamName, [this._lastDrawPos.x, this._lastDrawPos.y, this._lastDrawPos.z]);
            if ((_a = this.app.keyboard) === null || _a === void 0 ? void 0 : _a.wasReleased(pc.KEY_V)) {
                console.log(visibleLod1Count);
                console.log(visibleLod2Count);
            }
            this._frustum.drawCornes(this.freezeDrawPos);
            this._compute.update(this._lastDrawPos);
        }
        updateAabb() {
            var _a;
            if (this._meshInst) {
                const scale = this.entity.getScale();
                const terrainScale = this._terrain.entity.getScale();
                const worldRadius = this.radius * Math.max(scale.x, scale.z);
                const maxHeight = this._terrain.object.maxHeight * terrainScale.y;
                (_a = this._aabb) !== null && _a !== void 0 ? _a : (this._aabb = new pc.BoundingBox());
                this._aabb.setMinMax(new pc.Vec3(-worldRadius, 0, -worldRadius), new pc.Vec3(worldRadius, maxHeight, worldRadius));
                this._meshInst.mesh.aabb = this._aabb;
            }
        }
        _updateCompute() {
            var _a;
            if (!this._compute ||
                this._compute.radius !== this.radius) {
                (_a = this._compute) === null || _a === void 0 ? void 0 : _a.destroy();
                this._compute = new GrassFieldCompute_mjs_1.default(this.app.graphicsDevice, this.radius, this._terrain);
            }
            this._material.setParameter("uComputeHMData", this._compute.bufferHeightMap);
            this._material.setParameter("uComputeNMData", this._compute.bufferNormalMap);
        }
        _updateGrassMesh(graphicsDevice) {
            this._updateMeshBuffers(graphicsDevice);
            this._updateMeshMaterial(graphicsDevice);
            this._updateMeshInstance(graphicsDevice);
            this._updateMeshInstancing(graphicsDevice);
            this.updateAabb();
            const meshInstances = [this._meshInst];
            if (this.entity.render) {
                this.entity.render.meshInstances = meshInstances;
            }
            else {
                this.entity.addComponent('render', {
                    meshInstances: meshInstances,
                    castShadows: this.castShadow,
                    receiveShadows: this.receiveShadow,
                    cull: false,
                });
            }
            this._meshInst.cull = false;
            this._meshInst.castShadow = this.castShadow;
            this._meshInst.receiveShadow = this.receiveShadow;
        }
        _updateMeshInstancing(graphicsDevice) {
            var _a, _b, _c;
            if (this._meshInst) {
                this._updateInstancingBuffer(graphicsDevice);
                (_c = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.instancingData) === null || _b === void 0 ? void 0 : _b.vertexBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
                this._meshInst.setInstancing(this._sharedInstancingBuffer);
            }
            this._updateCompute();
        }
        _updateMeshInstance(graphicsDevice) {
            var _a, _b, _c, _d;
            (_c = (_b = (_a = this._meshInst) === null || _a === void 0 ? void 0 : _a.instancingData) === null || _b === void 0 ? void 0 : _b.vertexBuffer) === null || _c === void 0 ? void 0 : _c.destroy();
            (_d = this._meshInst) === null || _d === void 0 ? void 0 : _d.destroy();
            const mesh = new pc.Mesh(graphicsDevice);
            const primitive = mesh.primitive[0];
            mesh.indexBuffer[0] = this._sharedIndexBuffer;
            mesh.vertexBuffer = this._sharedVertexBuffer;
            primitive.type = this.wireframe ? pc.PRIMITIVE_LINES : pc.PRIMITIVE_TRIANGLES;
            primitive.base = 0;
            primitive.count = this._bufferStore.index.length;
            primitive.indexed = true;
            this._meshInst = new pc.MeshInstance(mesh, this._material, this.entity);
        }
        /**
        * Sets up indices for single blade mesh.
        * @param id array of indices
        * @param vc1 vertex start offset for front side of blade
        * @param vc2 vertex start offset for back side of blade
        * @param i index offset
        */
        _initBladeIndices(id, vc1, vc2, i, bladeSegs) {
            let seg;
            const addBackSide = vc1 !== vc2;
            // blade front side
            for (seg = 0; seg < bladeSegs; ++seg) {
                id[i++] = vc1 + 0; // tri 1
                id[i++] = vc1 + 1;
                id[i++] = vc1 + 2;
                id[i++] = vc1 + 2; // tri 2
                id[i++] = vc1 + 1;
                id[i++] = vc1 + 3;
                vc1 += 2;
            }
            if (addBackSide) {
                // blade back side
                for (seg = 0; seg < bladeSegs; ++seg) {
                    id[i++] = vc2 + 2; // tri 1
                    id[i++] = vc2 + 1;
                    id[i++] = vc2 + 0;
                    id[i++] = vc2 + 3; // tri 2
                    id[i++] = vc2 + 1;
                    id[i++] = vc2 + 2;
                    vc2 += 2;
                }
            }
            return i;
        }
        /** Set up indices for 1 blade */
        _initBladeIndexVerts(vindex) {
            for (let i = 0; i < vindex.length; ++i) {
                vindex[i] = i;
            }
        }
        _initPatchBladeOffsetShapeVerts(offsetShape, patchSize, patchNumBlades) {
            const size = Math.sqrt(patchNumBlades);
            if (size !== Math.ceil(size)) {
                throw new Error("numBlades must be the largest square");
            }
            const normalizeValue = offsetShape instanceof Uint16Array ? pc.FloatPacking.float2Half : (x) => x;
            const random = new Random_mjs_1.default(this.seed);
            const heightFactor = this.bladeMaxHeight - this.bladeMinHeight;
            const bunchSizeX = this.bunchWidth || 1;
            const bunchSizeZ = this.bunchDepth || 1;
            //let noise = 0;
            for (let z = 0; z < size; z += bunchSizeZ) {
                for (let x = 0; x < size; x += bunchSizeX) {
                    const tmp = 0;
                    const randBunchX = random.nextFloat(0, size);
                    const randBunchZ = random.nextFloat(0, size);
                    for (let bunchZ = 0; bunchZ < bunchSizeZ; bunchZ++) {
                        for (let bunchX = 0; bunchX < bunchSizeX; bunchX++) {
                            const index = (x + bunchX) + (z + bunchZ) * size;
                            const theta = random.nextFloat(0, Math.PI * 2);
                            const randRadius = this.bunchRandRadius * Math.sqrt(random.random());
                            const resultFloatX = randBunchX + randRadius * Math.cos(theta);
                            const resultFloatZ = randBunchZ + randRadius * Math.sin(theta);
                            // clamp by patch size and transform to [-1, 1]
                            const normalizeForPSX = resultFloatX / size * patchSize - patchSize / 2;
                            const normalizeForPSZ = resultFloatZ / size * patchSize - patchSize / 2;
                            const rotation = Math.PI * 2.0 * random.random();
                            const width = this.bladeWidth + random.random() * this.bladeWidth * 0.5;
                            const height = this.bladeMinHeight + Math.pow(random.random(), 4.0) * heightFactor;
                            const lean = 0.01 + random.random() * 0.3;
                            const curve = 0.05 + random.random() * 0.3;
                            offsetShape[index * exports.bufferItemSize + 0] = normalizeValue(normalizeForPSX); // x
                            offsetShape[index * exports.bufferItemSize + 1] = normalizeValue(normalizeForPSZ); // y
                            offsetShape[index * exports.bufferItemSize + 2] = normalizeValue(tmp);
                            offsetShape[index * exports.bufferItemSize + 3] = normalizeValue(rotation); // rot
                            //noise = Math.abs(simplex(floatX * 0.03, floatY * 0.03));
                            //noise = noise * noise * noise;
                            //noise *= 5.0;
                            offsetShape[index * exports.bufferItemSize + 4] = normalizeValue(width); // width
                            offsetShape[index * exports.bufferItemSize + 5] = normalizeValue(height /* + noise */); // height
                            offsetShape[index * exports.bufferItemSize + 6] = normalizeValue(lean); // lean
                            offsetShape[index * exports.bufferItemSize + 7] = normalizeValue(curve); // curve
                        }
                    }
                }
            }
        }
        _updateInstancingBuffer(graphicsDevice) {
            var _a;
            (_a = this._sharedInstancingBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            const patchNumBlades = this.patchNumBlades;
            const patchSize = GrassFieldCompute_mjs_1.default.getNormalizeRadius(this.radius) / 2.5;
            const offsetAndShapeLength = patchNumBlades * exports.bufferItemSize;
            if (this._bufferStore.offsetAndShape === undefined ||
                this._bufferStore.offsetAndShape.length !== offsetAndShapeLength) {
                this._bufferStore.offsetAndShape = new Float32Array(offsetAndShapeLength);
            }
            this._initPatchBladeOffsetShapeVerts(this._bufferStore.offsetAndShape, patchSize, patchNumBlades);
            const type = this._bufferStore.offsetAndShape instanceof Uint16Array ? pc.TYPE_FLOAT16 : pc.TYPE_FLOAT32;
            const instancingFormat = new pc.VertexFormat(graphicsDevice, [
                {
                    semantic: pc.SEMANTIC_ATTR10,
                    components: 4,
                    type: type,
                    normalize: false,
                    asInt: false
                },
                {
                    semantic: pc.SEMANTIC_ATTR11,
                    components: 4,
                    type: type,
                    normalize: false,
                    asInt: false,
                },
            ]);
            this._sharedInstancingBuffer = new pc.VertexBuffer(graphicsDevice, instancingFormat, patchNumBlades, {
                usage: pc.BUFFER_STATIC,
                data: this._bufferStore.offsetAndShape,
                storage: false,
            });
        }
        _getVertexFormat(graphicsDevice) {
            return new pc.VertexFormat(graphicsDevice, [{
                    semantic: pc.SEMANTIC_POSITION,
                    components: 1,
                    type: pc.TYPE_FLOAT32,
                    normalize: false,
                    asInt: false
                }]);
        }
        _updateMeshBuffers(graphicsDevice) {
            var _a, _b;
            (_a = this._sharedIndexBuffer) === null || _a === void 0 ? void 0 : _a.destroy();
            (_b = this._sharedVertexBuffer) === null || _b === void 0 ? void 0 : _b.destroy();
            const lod0VC = (this.lod0BladeSegs + 1) * 2;
            const lod1VC = this.lod1BladeSegs > 0 ? (this.lod1BladeSegs + 1) * 2 : 0;
            const lod2VC = this.lod2BladeSegs > 0 ? (this.lod2BladeSegs + 1) * 2 : 0;
            const bladeSegsNum = this.bladeSideCount * 6;
            const indexLength = this.lod0BladeSegs * bladeSegsNum + this.lod1BladeSegs * bladeSegsNum * GrassFieldFrustum_mjs_1.lod1PatchCount + this.lod2BladeSegs * bladeSegsNum * GrassFieldFrustum_mjs_1.lod2PatchCount;
            const indexVertsLength = lod0VC * this.bladeSideCount + lod1VC * this.bladeSideCount * GrassFieldFrustum_mjs_1.lod1PatchCount + lod2VC * this.bladeSideCount * GrassFieldFrustum_mjs_1.lod2PatchCount;
            if (this._bufferStore.index === undefined ||
                this._bufferStore.index.length !== indexLength) {
                this._bufferStore.index = new Uint16Array(indexLength);
                let index = 0;
                if (this.lod2BladeSegs > 0) {
                    for (let i = 0; i < GrassFieldFrustum_mjs_1.lod2PatchCount; i++) {
                        const lod2VC1 = i * lod2VC * this.bladeSideCount;
                        const lod2VC2 = lod2VC1 + lod2VC * (this.bladeSideCount - 1);
                        index = this._initBladeIndices(this._bufferStore.index, lod2VC1, lod2VC2, index, this.lod2BladeSegs);
                    }
                }
                const lod0VC1 = lod2VC * GrassFieldFrustum_mjs_1.lod2PatchCount * this.bladeSideCount;
                const lod0VC2 = lod0VC1 + lod0VC * (this.bladeSideCount - 1);
                index = this._initBladeIndices(this._bufferStore.index, lod0VC1, lod0VC2, index, this.lod0BladeSegs);
                if (this.lod1BladeSegs > 0) {
                    for (let i = 0; i < GrassFieldFrustum_mjs_1.lod1PatchCount; i++) {
                        const lod1VC1 = lod0VC2 + lod0VC + i * lod1VC * this.bladeSideCount;
                        const lod1VC2 = lod1VC1 + lod1VC * (this.bladeSideCount - 1);
                        index = this._initBladeIndices(this._bufferStore.index, lod1VC1, lod1VC2, index, this.lod1BladeSegs);
                    }
                }
            }
            if (this._bufferStore.indexVerts === undefined ||
                this._bufferStore.indexVerts.length !== indexVertsLength) {
                this._bufferStore.indexVerts = new Float32Array(indexVertsLength);
                this._initBladeIndexVerts(this._bufferStore.indexVerts);
            }
            this._sharedIndexBuffer = new pc.IndexBuffer(graphicsDevice, pc.INDEXFORMAT_UINT16, this._bufferStore.index.length, pc.BUFFER_STATIC, this._bufferStore.index, { storage: false });
            this._sharedVertexBuffer = new pc.VertexBuffer(graphicsDevice, this._getVertexFormat(graphicsDevice), this._bufferStore.indexVerts.length, {
                usage: pc.BUFFER_STATIC,
                data: this._bufferStore.indexVerts,
                storage: false,
            });
        }
        _updateMeshMaterial(graphicsDevice) {
            var _a, _b, _c;
            (_a = this._material) === null || _a === void 0 ? void 0 : _a.destroy();
            this._material = new pc.StandardMaterial();
            this._material.name = "GrassFieldMaterial";
            //this._material.useMetalness = true;
            // Useful for bladeSideCount == 1
            // this._material.cull = pc.CULLFACE_NONE;
            /*
            this._material.depthTest = false;
            this._material.depthWrite = true;
            this._material.blendType = pc.BLEND_NONE;
            this._material.alphaTest = 0;
            this._material.alphaWrite = false;
            this._material.alphaFade = false;
            this._material.alphaToCoverage = false;
            */
            const terrain = this._terrain.object;
            const heightMap = this._terrain.heightMapTexture;
            const terrainScale = this._terrain.entity.getScale();
            this._material.setAttribute(GrassShaderChunk_mjs_1.vindexAttrName, pc.SEMANTIC_POSITION);
            this._material.setAttribute(GrassShaderChunk_mjs_1.offsetAttrName, pc.SEMANTIC_ATTR10);
            this._material.setAttribute(GrassShaderChunk_mjs_1.shapeAttrName, pc.SEMANTIC_ATTR11);
            this._material.setParameter('uDataMap', this._dataTexture.texture);
            this._material.setParameter(ShaderChunks_mjs_9.heightMapParamName, heightMap);
            this._material.setParameter(GrassShaderChunk_mjs_1.fieldScaleParamName, [terrainScale.x, terrainScale.y, terrainScale.z]);
            this._material.setParameter(ShaderChunks_mjs_9.maxHeightParamName, terrain.maxHeight);
            this._material.setParameter(`${GrassShaderChunk_mjs_1.lod1OffsetXZParamName}[0]`, this._frustum.lod1Offsets);
            this._material.setParameter(`${GrassShaderChunk_mjs_1.lod2OffsetXZParamName}[0]`, this._frustum.lod2Offsets);
            this._material.setParameter(GrassShaderChunk_mjs_1.drawPosParamName, [0, 0, 0]);
            this._material.setParameter(GrassShaderChunk_mjs_1.timeParamName, this._time);
            this._material.setParameter(GrassShaderChunk_mjs_1.windIntensityParamName, 0);
            this._material.setParameter(GrassShaderChunk_mjs_1.circleSmoothingParamName, this.circleSmoothing);
            this._material.setParameter(GrassShaderChunk_mjs_1.maxSlopeFactorParamName, this.maxSlopeFactor);
            this._updateMaterialDiffuseData();
            const hmFormat = (0, GPUHeightMapBuffer_mjs_3.getHeightMapFormat)(graphicsDevice, terrain.heightMap);
            const pcVersion = `v${pc.version[0]}`;
            const normalizeRadius = GrassFieldCompute_mjs_1.default.getNormalizeRadius(this.radius);
            const chunksStore = (0, GrassShaderChunk_mjs_1.getGrassShaderChunks)({
                width: terrain.width,
                depth: terrain.depth,
                heightMapChunkSize: terrain.heightMap.dataChunkSize,
                heightMapFormat: hmFormat,
                lod0BladeSegs: this.lod0BladeSegs,
                lod1BladeSegs: this.lod1BladeSegs,
                lod2BladeSegs: this.lod2BladeSegs,
                sideCount: this.bladeSideCount,
                radius: normalizeRadius,
                engineVersion: pcVersion,
            });
            const chunkNames = Object.keys(chunksStore);
            const shaderChunks = (_c = (_b = this._material).getShaderChunks) === null || _c === void 0 ? void 0 : _c.call(_b, pc.SHADERLANGUAGE_GLSL);
            if (shaderChunks) {
                for (let chunkName of chunkNames) {
                    shaderChunks.set(chunkName, chunksStore[chunkName]);
                }
                this._material.shaderChunksVersion = pc.CHUNKAPI_1_70;
            }
            else {
                const chunks = this._material.chunks;
                chunks.APIVersion = pc.CHUNKAPI_1_70;
                for (let chunkName of chunkNames) {
                    chunks[chunkName] = chunksStore[chunkName];
                }
            }
            this._material.update();
        }
    }
    exports.GrassField = GrassField;
    exports.default = GrassField;
    exports.grassFieldScriptName = "grassField";
    pc.registerScript(GrassField, exports.grassFieldScriptName);
    GrassField.attributes.add("painting", { type: "boolean", default: false });
    GrassField.attributes.add("castShadow", { type: "boolean", default: true, });
    GrassField.attributes.add("receiveShadow", { type: "boolean", default: true, });
    GrassField.attributes.add("wireframe", { type: "boolean", default: false });
    GrassField.attributes.add("freezeDrawPos", { type: "boolean", default: false });
    GrassField.attributes.add("autoRender", { type: "boolean", default: true });
    GrassField.attributes.add("circleSmoothing", { type: "number", default: 2.4, min: 0.5, max: 3.5 });
    GrassField.attributes.add("maxSlopeFactor", { type: "number", default: 0.85, min: 0.001, max: 1.0 });
    GrassField.attributes.add("seed", { type: "number", default: 919191, min: 1, step: 1, precision: 0 });
    GrassField.attributes.add("windIntensity", { type: "number", default: 0, min: -30, max: 30 });
    GrassField.attributes.add("radius", { type: "number", default: 80, min: 1, max: 300, step: 1, precision: 0 });
    GrassField.attributes.add("numBlades", { type: "number", default: 4000, min: 0, max: 8000000, step: 1, precision: 0 });
    GrassField.attributes.add("bunchWidth", { type: "number", default: 4, min: 1, max: 20, step: 1, precision: 0 });
    GrassField.attributes.add("bunchDepth", { type: "number", default: 4, min: 1, max: 20, step: 1, precision: 0 });
    GrassField.attributes.add("bunchRandRadius", { type: "number", default: 0, min: 0, max: 10 });
    GrassField.attributes.add("lod0BladeSegs", { type: "number", default: 3, min: 1, max: 20, step: 1, precision: 0 });
    GrassField.attributes.add("lod1BladeSegs", { type: "number", default: 2, min: 0, max: 20, step: 1, precision: 0 });
    GrassField.attributes.add("lod2BladeSegs", { type: "number", default: 1, min: 0, max: 20, step: 1, precision: 0 });
    GrassField.attributes.add("bladeSideCount", { type: "number", default: 2, min: 1, max: 2, step: 1, precision: 0 });
    GrassField.attributes.add("bladeWidth", { type: "number", default: 0.04, min: 0.01, max: 5 });
    GrassField.attributes.add("bladeMinHeight", { type: "number", default: 0.25, min: 0.01, max: 10 });
    GrassField.attributes.add("bladeMaxHeight", { type: "number", default: 1, min: 0.01, max: 20 });
    GrassField.attributes.add("textures", {
        type: "json",
        array: true,
        schema: [
            {
                name: "name",
                title: "Name",
                type: "string",
            },
            {
                name: "diffuse",
                title: "Diffuse",
                type: "asset",
                assetType: "texture",
            },
            {
                name: "color",
                title: "Color",
                type: "rgb"
            },
            {
                name: "colorRandom",
                title: "Color Random",
                type: "vec3",
                default: [0.01, 0.01, 0.01]
            }
        ]
    });
});
define("src/GrassField/GrassFieldFrustum", ["require", "exports", "src/Extras/Utils", "src/Extras/Debug"], function (require, exports, Utils_mjs_6, Debug_mjs_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.patchLod2Matrix = exports.patchLod1Matrix = exports.cameraCornersIndices = exports.cameraCornersColor = exports.lod2PatchCount = exports.lod1PatchCount = exports.lod0PatchCount = void 0;
    exports.lod0PatchCount = 1;
    exports.lod1PatchCount = 8;
    exports.lod2PatchCount = 16;
    exports.cameraCornersColor = pc.Color.YELLOW;
    exports.cameraCornersIndices = [
        [0, 1], [1, 2], [2, 3], [3, 0],
        [4, 5], [5, 6], [6, 7], [7, 4],
        [0, 4], [1, 5], [2, 6], [3, 7]
    ];
    exports.patchLod1Matrix = [
        2, 2, 1, 2, 0, 2,
        0, 1, 0, 0, 1, 0,
        2, 0, 2, 1, 1, 1
    ];
    exports.patchLod2Matrix = [
        4, 4, 3, 4, 2, 4, 1, 4,
        0, 4, 0, 3, 0, 2, 0, 1,
        0, 0, 1, 0, 2, 0, 3, 0,
        4, 0, 4, 1, 4, 2, 4, 3
    ];
    class GrassFieldFrustum {
        get lod1Offsets() { return this._lod1Offsets; }
        get lod2Offsets() { return this._lod2Offsets; }
        constructor(terrain, camera) {
            var _a;
            this.terrain = terrain;
            this.camera = camera;
            this._lod1Offsets = [
                0, 0, 0, 0,
                0, 0, 0, 0,
                0, 0, 0, 0,
                0, 0, 0, 0,
            ];
            this._lod2Offsets = [
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0,
            ];
            this._lod1MinMaxStore = [];
            this._lod2MinMaxStore = [];
            this._worldCornes = [new pc.Vec3(), new pc.Vec3(), new pc.Vec3(), new pc.Vec3(), new pc.Vec3(), new pc.Vec3(), new pc.Vec3(), new pc.Vec3()];
            this._bufferedCornes = false;
            // update set check is visible for version 2
            if (((_a = this.camera) === null || _a === void 0 ? void 0 : _a.frustum.planes) &&
                this.camera.frustum.planes[0] instanceof pc.Plane) {
                this._checkIsVisible = this._checkIsVisibleNew;
            }
            else {
                this._checkIsVisible = this._checkIsVisibleOld;
            }
        }
        _checkIsVisible(min, max, frustumPlanes) {
            return false;
        }
        _checkIsVisibleOld(min, max, frustumPlanes) {
            for (let p = 0; p < 6; p++) {
                const frustumPlane = frustumPlanes[p];
                const d = Math.max(min.x * frustumPlane[0], max.x * frustumPlane[0])
                    + Math.max(min.y * frustumPlane[1], max.y * frustumPlane[1])
                    + Math.max(min.z * frustumPlane[2], max.z * frustumPlane[2])
                    + frustumPlane[3];
                if (d <= 0) {
                    return false;
                }
            }
            return true;
        }
        _checkIsVisibleNew(min, max, frustumPlanes) {
            for (let p = 0; p < 6; p++) {
                const frustumPlane = frustumPlanes[p];
                const d = Math.max(min.x * frustumPlane.normal.x, max.x * frustumPlane.normal.x)
                    + Math.max(min.y * frustumPlane.normal.y, max.y * frustumPlane.normal.y)
                    + Math.max(min.z * frustumPlane.normal.z, max.z * frustumPlane.normal.z)
                    + frustumPlane.distance;
                if (d <= 0) {
                    return false;
                }
            }
            return true;
        }
        _updateMinMaxFromPatches(min, max) {
            const width = this.terrain.object.width;
            const depth = this.terrain.object.depth;
            const patchSize = this.terrain.object.patchSize;
            const heightMap = this.terrain.object.heightMap;
            const minPatchX = (0, Utils_mjs_6.clamp)(min.x, 0, width) / patchSize | 0;
            const minPatchZ = (0, Utils_mjs_6.clamp)(min.z, 0, depth) / patchSize | 0;
            const maxPatchX = (0, Utils_mjs_6.clamp)(max.x, 0, width) / patchSize | 0;
            const maxPatchZ = (0, Utils_mjs_6.clamp)(max.z, 0, depth) / patchSize | 0;
            const min00 = heightMap.getPerformPatchMin(minPatchX, minPatchZ);
            const min01 = heightMap.getPerformPatchMin(minPatchX, maxPatchZ);
            const min10 = heightMap.getPerformPatchMin(maxPatchX, minPatchZ);
            const min11 = heightMap.getPerformPatchMin(maxPatchX, maxPatchZ);
            const max00 = heightMap.getPerformPatchMax(minPatchX, minPatchZ);
            const max01 = heightMap.getPerformPatchMax(minPatchX, maxPatchZ);
            const max10 = heightMap.getPerformPatchMax(maxPatchX, minPatchZ);
            const max11 = heightMap.getPerformPatchMax(maxPatchX, maxPatchZ);
            min.y = Math.min(min00, min01, min10, min11);
            max.y = Math.max(max00, max01, max10, max11);
        }
        _internalFrustum(count, patchSize, patchMatrix, patchOffset, minMaxStore, offsetArr, inverse, cameraPos, freeze) {
            let visibleCount = 0;
            const terrainScale = this.terrain.entity.getScale();
            const frustumPlanes = this.camera.frustum.planes;
            // 5 because lod0 + lod1 + lod2
            const step = patchSize * 2;
            // local - relative of start terrain xz
            const terrainWidth = this.terrain.object.width;
            const terrainDepth = this.terrain.object.depth;
            for (let i = 0; i < count; i++) {
                if (!minMaxStore[i])
                    minMaxStore[i] = [new pc.Vec3(), new pc.Vec3(), false];
                if (!freeze) {
                    const patchX = patchMatrix[i * 2 + 0];
                    const patchZ = patchMatrix[i * 2 + 1];
                    const relativeCenterX = step * (patchX - patchOffset);
                    const relativeCenterZ = step * (patchZ - patchOffset);
                    const worldCenterX = cameraPos.x + relativeCenterX;
                    const worldCenterZ = cameraPos.z + relativeCenterZ;
                    const worldMinX = worldCenterX - patchSize;
                    const worldMinZ = worldCenterZ - patchSize;
                    const worldMaxX = worldCenterX + patchSize;
                    const worldMaxZ = worldCenterZ + patchSize;
                    const localMinX = worldMinX / terrainScale.x + terrainWidth / 2;
                    const localMinZ = worldMinZ / terrainScale.z + terrainDepth / 2;
                    const localMaxX = worldMaxX / terrainScale.x + terrainWidth / 2;
                    const localMaxZ = worldMaxZ / terrainScale.z + terrainDepth / 2;
                    let visible = false;
                    if (localMaxX > 0 &&
                        localMaxZ > 0 &&
                        localMinX < terrainWidth &&
                        localMinZ < terrainDepth) {
                        minMaxStore[i][0].set(localMinX, 0, localMinZ);
                        minMaxStore[i][1].set(localMaxX, 0, localMaxZ);
                        this._updateMinMaxFromPatches(minMaxStore[i][0], minMaxStore[i][1]);
                        const worldMinY = minMaxStore[i][0].y * terrainScale.y;
                        const worldMaxY = minMaxStore[i][1].y * terrainScale.y;
                        minMaxStore[i][0].set(worldMinX, worldMinY, worldMinZ);
                        minMaxStore[i][1].set(worldMaxX, worldMaxY, worldMaxZ);
                        visible = this._checkIsVisible(minMaxStore[i][0], minMaxStore[i][1], frustumPlanes);
                        if (visible) {
                            // add start offset for patch center
                            offsetArr[visibleCount * 2 + 0] = relativeCenterX + patchSize;
                            offsetArr[visibleCount * 2 + 1] = relativeCenterZ + patchSize;
                        }
                    }
                    else {
                        minMaxStore[i][0].set(worldMinX, 0, worldMinZ);
                        minMaxStore[i][1].set(worldMaxX, 0, worldMaxZ);
                    }
                    minMaxStore[i][2] = visible;
                }
                const min = minMaxStore[i][0];
                const max = minMaxStore[i][1];
                const vis = minMaxStore[i][2];
                //if (freeze) {
                (0, Debug_mjs_2.drawBox)({ min, max, color: vis ? pc.Color.GREEN : pc.Color.RED });
                //}
                visibleCount += Number(vis);
            }
            if (!freeze && inverse && visibleCount > 0) {
                const hiddenCount = count - visibleCount;
                for (let i = visibleCount; i > -1; i--) {
                    const indexIn = (hiddenCount + i) * 2;
                    const indexOr = i * 2;
                    offsetArr[indexIn + 0] = offsetArr[indexOr + 0];
                    offsetArr[indexIn + 1] = offsetArr[indexOr + 1];
                }
            }
            return visibleCount;
        }
        frustumLod1(cameraPos, patchSize, freeze) {
            return this._internalFrustum(exports.lod1PatchCount, patchSize, exports.patchLod1Matrix, 1, this._lod1MinMaxStore, this._lod1Offsets, false, cameraPos, freeze);
        }
        frustumLod2(cameraPos, patchSize, freeze) {
            return this._internalFrustum(exports.lod2PatchCount, patchSize, exports.patchLod2Matrix, 2, this._lod2MinMaxStore, this._lod2Offsets, true, cameraPos, freeze);
        }
        drawCornes(freeze) {
            if (freeze) {
                if (!this._bufferedCornes) {
                    this._bufferedCornes = true;
                    const cornes = this.camera.getFrustumCorners();
                    const cameraMat = this.camera.node.getWorldTransform();
                    for (let i = 0; i < cornes.length; i++) {
                        const ref = this._worldCornes[i].copy(cornes[i]);
                        cameraMat.transformPoint(ref, ref);
                    }
                }
                for (let i = 0; i < exports.cameraCornersIndices.length; i++) {
                    const start = this._worldCornes[exports.cameraCornersIndices[i][0]];
                    const end = this._worldCornes[exports.cameraCornersIndices[i][1]];
                    this.terrain.app.drawLine(start, end, exports.cameraCornersColor, false);
                }
            }
            else {
                this._bufferedCornes = false;
            }
        }
    }
    exports.default = GrassFieldFrustum;
});
define("src/Scripts/FlyCamera", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.flyCameraScriptName = exports.FlyCamera = void 0;
    class FlyCamera extends pc.ScriptType {
        constructor() {
            super(...arguments);
            this.mobileControl = false;
        }
        initialize() {
            // Camera euler angle rotation around x and y axes
            const eulers = this.entity.getLocalEulerAngles();
            this.ex = (eulers.z - eulers.x);
            this.ey = (eulers.z - eulers.y);
            this.translateLoc = pc.Vec3.ZERO.clone();
            this.moved = false;
            this.rightDown = false;
            this.middleDown = false;
            // Disabling the context menu stops the browser displaying a menu when
            // you right-click the page
            if (this.app.mouse) {
                this.app.mouse.disableContextMenu();
                this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);
                this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);
                this.app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);
            }
            //this.entity.camera!.setShaderPass(pc.SHADERPASS_WORLDNORMAL);
        }
        append(x, y) {
            this.ex += x;
            this.ey += y;
            this.ex = pc.math.clamp(this.ex, -90, 90);
        }
        translate(x, y, z) {
            this.translateLoc.x += x;
            this.translateLoc.y += y;
            this.translateLoc.z += z;
        }
        update(dt) {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
            const app = this.app;
            let speed = this.speed;
            if ((_a = app.keyboard) === null || _a === void 0 ? void 0 : _a.isPressed(pc.KEY_SPACE)) {
                speed = this.slowSpeed;
            }
            if ((_b = app.keyboard) === null || _b === void 0 ? void 0 : _b.isPressed(pc.KEY_SHIFT)) {
                speed = this.fastSpeed;
            }
            // Joypad control
            const joystickMover = touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.sticks['joystick0'];
            const joystickRoter = touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.sticks['joystick1'];
            if (this.mobileControls && (touchJoypad === null || touchJoypad === void 0 ? void 0 : touchJoypad.buttons.wasPressed('button2'))) {
                this.mobileControl = !this.mobileControl;
                this.mobileControls.enabled = this.mobileControl;
            }
            if (joystickRoter) {
                this.append(joystickRoter.y, -joystickRoter.x);
            }
            if (joystickMover) {
                this.translate(speed * joystickMover.x * dt, 0, -speed * joystickMover.y * dt);
            }
            // Update the camera's position
            if (((_c = app.keyboard) === null || _c === void 0 ? void 0 : _c.isPressed(pc.KEY_UP)) || ((_d = app.keyboard) === null || _d === void 0 ? void 0 : _d.isPressed(pc.KEY_W))) {
                this.translate(0, 0, -speed * dt);
            }
            else if (((_e = app.keyboard) === null || _e === void 0 ? void 0 : _e.isPressed(pc.KEY_DOWN)) || ((_f = app.keyboard) === null || _f === void 0 ? void 0 : _f.isPressed(pc.KEY_S))) {
                this.translate(0, 0, speed * dt);
            }
            if (((_g = app.keyboard) === null || _g === void 0 ? void 0 : _g.isPressed(pc.KEY_LEFT)) || ((_h = app.keyboard) === null || _h === void 0 ? void 0 : _h.isPressed(pc.KEY_A))) {
                this.translate(-speed * dt, 0, 0);
            }
            else if (((_j = app.keyboard) === null || _j === void 0 ? void 0 : _j.isPressed(pc.KEY_RIGHT)) || ((_k = app.keyboard) === null || _k === void 0 ? void 0 : _k.isPressed(pc.KEY_D))) {
                this.translate(speed * dt, 0, 0);
            }
            // Update the camera's TRS
            this.entity.setLocalEulerAngles(this.ex, this.ey, 0);
            this.entity.translateLocal(this.translateLoc);
            this.translateLoc.set(0, 0, 0);
            // Update frustum by actual matrix
            this.app.renderer.updateCameraFrustum((_l = this.entity.camera) === null || _l === void 0 ? void 0 : _l.camera);
        }
        onMouseMove(event) {
            if (!this.mode && !pc.Mouse.isPointerLocked()) {
                return;
            }
            if (!this.rightDown &&
                !this.middleDown)
                return;
            // Update the current Euler angles, clamp the pitch.
            if (!this.moved) {
                // first move event can be very large
                this.moved = true;
                return;
            }
            if (this.rightDown) {
                this.append(-event.dy / this.sensitivity, -event.dx / this.sensitivity);
            }
            if (this.middleDown) {
                let speed = this.speed;
                if (this.app.keyboard.isPressed(pc.KEY_SHIFT)) {
                    speed = this.fastSpeed;
                }
                this.translate(-(event.dx / 5) * speed, (event.dy / 5) * speed, 0);
            }
        }
        onMouseDown(event) {
            // When the mouse button is clicked try and capture the pointer
            if (!this.mode && !pc.Mouse.isPointerLocked()) {
                this.app.mouse.enablePointerLock();
            }
            if (event.button === pc.MOUSEBUTTON_RIGHT) {
                this.rightDown = true;
            }
            if (event.button === pc.MOUSEBUTTON_MIDDLE) {
                this.middleDown = true;
            }
        }
        onMouseUp(event) {
            if (event.button === pc.MOUSEBUTTON_RIGHT) {
                this.rightDown = false;
            }
            if (event.button === pc.MOUSEBUTTON_MIDDLE) {
                this.middleDown = false;
            }
        }
    }
    exports.FlyCamera = FlyCamera;
    exports.default = FlyCamera;
    exports.flyCameraScriptName = 'flyCamera';
    pc.registerScript(FlyCamera, exports.flyCameraScriptName);
    FlyCamera.attributes.add('mobileControls', {
        type: 'entity',
    });
    FlyCamera.attributes.add('speed', {
        type: 'number',
        default: 10
    });
    FlyCamera.attributes.add('slowSpeed', {
        type: 'number',
        default: 1
    });
    FlyCamera.attributes.add('fastSpeed', {
        type: 'number',
        default: 20
    });
    FlyCamera.attributes.add('sensitivity', {
        type: 'number',
        min: 1,
        default: 5
    });
    FlyCamera.attributes.add('mode', {
        type: 'number',
        default: 0,
        enum: [{
                "Lock": 0
            }, {
                "Drag": 1
            }]
    });
});
define("src/Scripts/FpsCounter", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.fpsCounterScriptName = void 0;
    class FpsCounter extends pc.ScriptType {
        initialize() {
            const constr = window.FPSMeter;
            if (constr) {
                this.fps = new constr({
                    heat: true,
                    graph: true
                });
            }
        }
        update(dt) {
            var _a;
            (_a = this.fps) === null || _a === void 0 ? void 0 : _a.tick();
        }
    }
    exports.default = FpsCounter;
    exports.fpsCounterScriptName = 'FpsCounter';
    pc.registerScript(FpsCounter, exports.fpsCounterScriptName);
});
;
(() => {
    if (window.___amd___requireResolver) {
        window.___amd___requireResolver();
    }
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVycmFpbi1zeXN0ZW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zYXNyYy9yZXF1cmVkU3RhcnQuanMiLCIuLi8uLi9zcmMvRXh0cmFzL1R5cGVzLm10cyIsIi4uLy4uL3NyYy9Db3JlL0lab25lLm10cyIsIi4uLy4uL3NyYy9FeHRyYXMvQ29tcHJlc3Nvci5tdHMiLCIuLi8uLi9zcmMvQ29yZS9BYnNIZWlnaHRNYXBGaWxlSU8ubXRzIiwiLi4vLi4vc3JjL0NvcmUvQWJzSGVpZ2h0TWFwLm10cyIsIi4uLy4uL3NyYy9Db3JlL0hlaWdodE1hcC5tdHMiLCIuLi8uLi9zcmMvQ29yZS9BYnNTaGF0dGVyZWRIZWlnaHRNYXAubXRzIiwiLi4vLi4vc3JjL0NvcmUvQWJzQ2h1bmtlZEhlaWdodE1hcC5tdHMiLCIuLi8uLi9zcmMvQ29yZS9QYXRjaGVkSGVpZ2h0TWFwLm10cyIsIi4uLy4uL3NyYy9BbW1vSW50ZWdyYXRpb24vQW1tb0ludGVncmF0aW9uLm10cyIsIi4uLy4uL3NyYy9Db3JlL0Nvb3Jkc0J1ZmZlci5tdHMiLCIuLi8uLi9zcmMvQ29yZS9Mb2RJbmZvLm10cyIsIi4uLy4uL3NyYy9Db3JlL0lQYXRjaExvZC5tdHMiLCIuLi8uLi9zcmMvQ29yZS9Mb2RFc3RpbWF0b3IubXRzIiwiLi4vLi4vc3JjL0NvcmUvR3JpZEJ1aWxkZXIubXRzIiwiLi4vLi4vc3JjL0NvcmUvSGVpZ2h0ZmllbGQubXRzIiwiLi4vLi4vc3JjL0NvcmUvSGVpZ2h0ZmllbGRSYXljYXN0UmVzdWx0Lm10cyIsIi4uLy4uL3NyYy9Db3JlL1RyaWFuZ2xlLm10cyIsIi4uLy4uL3NyYy9Db3JlL0hlaWdodGZpZWxkU2hhcGUubXRzIiwiLi4vLi4vc3JjL0NvcmUvSVBhdGNoLm10cyIsIi4uLy4uL3NyYy9Db3JlL0lQYXRjaEluc3RhbmNpbmcubXRzIiwiLi4vLi4vc3JjL0V4dHJhcy9VdGlscy5tdHMiLCIuLi8uLi9zcmMvRXh0cmFzL1N0b3JlMkQubXRzIiwiLi4vLi4vc3JjL0NvcmUvTG9kU3RhdGUubXRzIiwiLi4vLi4vc3JjL0NvcmUvTG9kTWFuYWdlci5tdHMiLCIuLi8uLi9zcmMvQ29yZS9NaWRwb2ludERpc3BIZWlnaHRmaWVsZC5tdHMiLCIuLi8uLi9zcmMvQ29yZS9QYXRjaENvbWJpbmVJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9Db3JlL1BhdGNoSW5zdGFuY2luZy5tdHMiLCIuLi8uLi9zcmMvQ29yZS9QYXRjaGVzU3BoZXJlQnVmZmVyLm10cyIsIi4uLy4uL3NyYy9Db3JlL1BhdGNoZXNNYW5hZ2VyLm10cyIsIi4uLy4uL3NyYy9Db3JlL1NxdWFyZUl0ZXJhdG9yLm10cyIsIi4uLy4uL3NyYy9FeHRyYXMvRGVidWcubXRzIiwiLi4vLi4vc3JjL0V4dHJhcy9FbnVtQ29udmVydGVyLm10cyIsIi4uLy4uL3NyYy9FeHRyYXMvUmFuZG9tLm10cyIsIi4uLy4uL3NyYy9FeHRyYXMvU2ltcGxleC5tdHMiLCIuLi8uLi9zcmMvSGVpZ2h0ZmllbGQvU2hhZGVyQ2h1bmtzLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9HUFVIZWlnaHRNYXBCdWZmZXIubXRzIiwiLi4vLi4vc3JjL0hlaWdodGZpZWxkL0JydXNoLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9Db2xvclBhaW50ZXJTaGFkZXJzLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9Db2xvclBhaW50ZXIubXRzIiwiLi4vLi4vc3JjL0hlaWdodGZpZWxkL0VudW1zLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9JUGF0Y2hJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9QYXRjaENvbWJpbmVJbnN0YW5jaW5nLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9QYXRjaEluc3RhbmNpbmcubXRzIiwiLi4vLi4vc3JjL0hlaWdodGZpZWxkL0dQVUJ1ZmZlcnNNYW5hZ2VyLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9HUFVXaXJlZnJhbWVCdWZmZXJzTWFuYWdlci5tdHMiLCIuLi8uLi9zcmMvSGVpZ2h0ZmllbGQvTWVzaEluc3RhbmNlRmFjdG9yeS5tdHMiLCIuLi8uLi9zcmMvSGVpZ2h0ZmllbGQvRW50aXR5UGF0Y2hlc01lc2gubXRzIiwiLi4vLi4vc3JjL0hlaWdodGZpZWxkL1BhdGNoLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9WaWV3UGF0Y2hlc1JlbmRlclByZXBhcmVyLm10cyIsIi4uLy4uL3NyYy9IZWlnaHRmaWVsZC9TaGFkb3dQYXRjaGVzUmVuZGVyUHJlcGFyZXIubXRzIiwiLi4vLi4vc3JjL1NjcmlwdHMvVGVycmFpbi5tdHMiLCIuLi8uLi9zcmMvR3Jhc3NGaWVsZC9HcmFzc0ZpZWxkQ29tcHV0ZS5tdHMiLCIuLi8uLi9zcmMvR3Jhc3NGaWVsZC9HcmFzc0ZpZWxkVGV4dHVyZS5tdHMiLCIuLi8uLi9zcmMvR3Jhc3NGaWVsZC9HcmFzc1NoYWRlckNodW5rLm10cyIsIi4uLy4uL3NyYy9TY3JpcHRzL0dyYXNzRmllbGQubXRzIiwiLi4vLi4vc3JjL0dyYXNzRmllbGQvR3Jhc3NGaWVsZEZydXN0dW0ubXRzIiwiLi4vLi4vc3JjL1NjcmlwdHMvRmx5Q2FtZXJhLm10cyIsIi4uLy4uL3NyYy9TY3JpcHRzL0Zwc0NvdW50ZXIubXRzIiwiLi4vLi4vc3pzcmMvcmVxdXJlZEZpbmlzaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsQ0FBQztBQUFBLENBQUMsR0FBRyxFQUFFO0lBRU4sTUFBTSxJQUFJLEdBQU8sRUFBRSxDQUFDO0lBQ3BCLE1BQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUVwQixtQ0FBbUM7SUFDbkMsTUFBTSxDQUFDLHVCQUF1QixHQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7SUFDaEQsTUFBTSxDQUFDLHdCQUF3QixHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFFakQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUks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LEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUU3QixLQUFLLElBQUksSUFBSSxDQUFDO1lBRWQsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM3QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7WUFFcEIsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDekMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQztZQUV6QyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDekIsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDekMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFFekMsTUFBTSxDQUFDLENBQUMsR0FBRyxD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SUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztRQUN0RSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RFLElBQUksSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7S0FDdEUsQ0FBQTtJQUVELE1BQU0sQ0FBQyxHQUFHO1FBQ1QsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFO1FBQ3BCLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFO1FBQzNFLEdBQUcsRUFBRSxDQUFDLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUU7UUFDM0UsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHO1FBQzNFLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRztRQUMzRSxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUc7UUFDM0UsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUc7UUFDM0UsQ0FBQyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsRUFBRTtRQUMzRSxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxHQUFHLEVBQUMsQ0FBQztRQUMzRSxHQUFHLEVBQUMsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFFLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxFQUFFLEVBQUMsR0FBRztRQUMzRSxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsR0FBRztRQUMzRSxF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QU0sRUFBRTtRQUM3QixJQUFJLEVBQUUsUUFBUTtRQUNkLE9BQU8sRUFBRSxDQUFDO1FBQ1YsSUFBSSxFQUFFLENBQUM7Z0JBQ0gsTUFBTSxFQUFFLENBQUM7YUFDWixFQUFFO2dCQUNDLE1BQU0sRUFBRSxDQUFDO2FBQ1osQ0FBQztLQUNMLENBQUMsQ0FBQzs7Ozs7O0lDL01ILE1BQU0sVUFBVyxTQUFRLEVBQUUsQ0FBQyxVQUFVO1FBSWxDLFVBQVU7WUFFTixNQUFNLE1BQU0sR0FBSSxNQUFjLENBQUMsUUFBUSxDQUFDO1lBRXhDLElBQUksTUFBTSxFQUFFLENBQUM7Z0JBQ1QsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLE1BQU0sQ0FBQztvQkFDbEIsSUFBSSxFQUFFLElBQUk7b0JBQ1YsS0FBSyxFQUFFLElBQUk7aUJBQ2QsQ0FBQyxDQUFDO1lBQ1AsQ0FBQztRQUNMLENBQUM7UUFFRCxNQUFNLENBQUMsRUFBVTs7WUFDYixNQUFBLElBQUksQ0FBQyxHQUFHLDBDQUFFLElBQUksRUFBRSxDQUFDO1FBQ3JCLENBQUM7S0FDSjtJQUVELGtCQUFlLFVBQVUsQ0FBQztJQUNiLFFBQUEsb0JBQW9CLEdBQUcsWUFBWSxDQUFDO0lBRWpELEVBQUUsQ0FBQyxjQUFjLENBQUMsVUFBVSxFQUFFLDRCQUFvQixDQUFDLENBQUM7O0FDeEJwRCxDQUFDO0FBQUEsQ0FBQyxHQUFHLEVBQUU7SUFDSCxJQUFJLE1BQU0sQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO1FBQ2xDLE1BQU0sQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO0lBQ3RDLENBQUM7QUFDTCxDQUFDLENBQUMsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiOygoKSA9PiB7XHJcblxyXG5cdGNvbnN0IGRlZnMgICAgID0ge307XHJcblx0Y29uc3QgcmVzb2x2ZWQgPSB7fTtcclxuXHJcblx0Ly8gc2F2ZSBvcmlnaW5hbCBkZWZpbmUgYW5kIHJlcXVpcmVcclxuXHR3aW5kb3cuX19fYW1kX19fT3JpZ2luYWxEZWZpbmUgID0gd2luZG93LmRlZmluZTtcclxuXHR3aW5kb3cuX19fYW1kX19fT3JpZ2luYWxSZXF1aXJlID0gd2luZG93LnJlcXVpcmU7XHJcblxyXG5cdGlmICghd2luZG93LmRlZmluZSAmJiAhd2luZG93LnJlcXVpcmUpIHtcclxuXHJcblx0XHRjb25zdCBkZWZpbmUgPSAoaWQsIGRlcHMsIGZhY3RvcnkpID0+IHtcclxuXHJcblx0XHRcdGlmIChkZWZzW2lkXSkge1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignRHVwbGljYXRlIGRlZmluaXRpb24gZm9yICcgKyBpZCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGRlZnNbaWRdID0gW2RlcHMsIGZhY3RvcnldO1xyXG5cdFx0fVxyXG5cclxuXHRcdGRlZmluZS5hbWQgPSB7XHJcblx0XHRcdGJ1bmRsZTogdHJ1ZSwgICAvLyB0aGlzIGltcGxlbWVudGF0aW9uIHdvcmtzIG9ubHkgd2l0aCBidW5kbGVkIGFtZCBtb2R1bGVzXHJcblx0XHRcdGR5bmFtaWM6IGZhbHNlLCAvLyBkb2VzIG5vdCBzdXBwb3J0IGR5bmFtaWMgb3IgYXN5bmMgbG9hZGluZ1xyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCByZXF1aXJlID0gKGlkKSA9PiB7XHJcblxyXG5cdFx0XHRpZiAoaWQgPT09ICdyZXF1aXJlJykgcmV0dXJuIHJlcXVpcmU7XHJcblx0XHRcdGlmIChpZCA9PT0gJ2V4cG9ydHMnKSByZXR1cm4ge307XHJcblx0XHRcdGlmIChyZXNvbHZlZFtpZF0pICAgICByZXR1cm4gcmVzb2x2ZWRbaWRdO1xyXG5cclxuXHRcdFx0aWYgKCFkZWZzW2lkXSkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGRlZnMsIGlkKTtcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIGRlZmluaXRpb24gZm9yICcgKyBpZCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IG1vZHVsZUV4cG9ydHMgPSB7fTtcclxuXHRcdFx0Y29uc3QgZGVwcyAgICA9IGRlZnNbaWRdWzBdO1xyXG5cdFx0XHRjb25zdCBmYWN0b3J5ID0gZGVmc1tpZF1bMV07XHJcblx0XHRcdGNvbnN0IGFyZ3MgPSBkZXBzLm1hcChkZXAgPT4ge1xyXG5cclxuXHRcdFx0XHRpZiAoZGVwID09PSAnZXhwb3J0cycpIHtcclxuXHRcdFx0XHRcdHJldHVybiBtb2R1bGVFeHBvcnRzO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHJlcXVpcmUoZGVwKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRmYWN0b3J5LmFwcGx5KG51bGwsIGFyZ3MpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHJlc29sdmVkW2lkXSA9IG1vZHVsZUV4cG9ydHM7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHdpbmRvdy5kZWZpbmUgID0gZGVmaW5lO1xyXG5cdFx0d2luZG93LnJlcXVpcmUgPSByZXF1aXJlO1xyXG5cdH1cclxuXHJcblx0d2luZG93Ll9fX2FtZF9fX3JlcXVpcmVSZXNvbHZlciA9ICgpID0+IHtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGlkIGluIGRlZnMpIHtcclxuXHJcblx0XHRcdGlmIChkZWZzLmhhc093blByb3BlcnR5KGlkKSkge1xyXG5cclxuXHRcdFx0XHRjb25zdCBkZXBzID0gZGVmc1tpZF1bMF07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGRlcHMpIHtcclxuXHRcdFx0XHRcdGRlcHMubWFwKGRlcCA9PiB7XHJcblx0XHJcblx0XHRcdFx0XHRcdGlmIChkZXAgIT09ICdyZXF1aXJlJyAmJlxyXG5cdFx0XHRcdFx0XHRcdGRlcCAhPT0gJ2V4cG9ydHMnKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmICghcmVzb2x2ZWQuaGFzT3duUHJvcGVydHkoZGVwKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWlyZShkZXApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKCFkZWZzLmhhc093blByb3BlcnR5KGRlcCkgJiZcclxuXHRcdFx0XHRcdFx0XHRcdCFyZXNvbHZlZC5oYXNPd25Qcm9wZXJ0eShkZXApKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIGRlZmluZSAnJHtpZH0nIGRlcCBub3QgZm91bmQgJyR7ZGVwfSdgKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmVxdWlyZShpZCk7XHJcblxyXG5cdFx0XHRcdGRlbGV0ZSBkZWZzW2lkXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyByZXR1cm4gb3JpZ2luYWwgZGVmaW5lIGFuZCByZXF1aXJlXHJcblx0XHR3aW5kb3cuZGVmaW5lICA9IHdpbmRvdy5fX19hbWRfX19PcmlnaW5hbERlZmluZTtcclxuXHRcdHdpbmRvdy5yZXF1aXJlID0gd2luZG93Ll9fX2FtZF9fX09yaWdpbmFsUmVxdWlyZTtcclxuXHJcblx0XHQvLyBjbGVhclxyXG5cdFx0ZGVsZXRlIHdpbmRvdy5fX19hbWRfX19yZXF1aXJlUmVzb2x2ZXI7XHJcblx0XHRkZWxldGUgd2luZG93Ll9fX2FtZF9fX09yaWdpbmFsRGVmaW5lO1xyXG5cdFx0ZGVsZXRlIHdpbmRvdy5fX19hbWRfX19PcmlnaW5hbFJlcXVpcmU7XHJcblx0fTtcclxufSkoKTsiLCJleHBvcnQgdHlwZSBpbnQgPSBudW1iZXI7XG5leHBvcnQgdHlwZSB1bnNpZ25lZF9pbnQgPSBudW1iZXI7XG5leHBvcnQgdHlwZSBmbG9hdCA9IG51bWJlcjtcbmV4cG9ydCB0eXBlIFJlZk9iamVjdDxUIGV4dGVuZHMgb2JqZWN0PiA9IFQ7XG5leHBvcnQgdHlwZSBJVmVjdG9yMiA9IHsgeDogZmxvYXQsIHk6IGZsb2F0IH07XG5leHBvcnQgdHlwZSBJVmVjdG9yMyA9IHsgeDogZmxvYXQsIHk6IGZsb2F0LCB6OiBmbG9hdCB9O1xuZXhwb3J0IHR5cGUgSVZlY3RvcjQgPSB7IHg6IGZsb2F0LCB5OiBmbG9hdCwgejogZmxvYXQsIHc6IGZsb2F0IH07XG5leHBvcnQgdHlwZSBJTWF0cml4NCA9IHsgZGF0YTogRmxvYXQzMkFycmF5IH07IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElab25lIHtcbiAgICBtaW5YOiBpbnQ7XG4gICAgbWF4WDogaW50O1xuICAgIG1pblo6IGludDtcbiAgICBtYXhaOiBpbnQ7XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcHJlc3NvciB7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2NvbmNhdENodW5rcyhjaHVua3M6IFVpbnQ4QXJyYXlbXSwgdG90YWxMZW5ndGg6IG51bWJlcikge1xyXG5cclxuICAgICAgICBsZXQgcG9zaXRpb24gPSAwO1xyXG5cclxuICAgICAgICAvLyBDb25jYXRlbmF0ZSBhbGwgVWludDhBcnJheSBjaHVua3MgaW50byBhIHNpbmdsZSBBcnJheUJ1ZmZlclxyXG4gICAgICAgIGNvbnN0IHJlc3VsdEJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KHRvdGFsTGVuZ3RoKTsgICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgY2h1bmtzKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdEJ1ZmZlci5zZXQoY2h1bmssIHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgcG9zaXRpb24gKz0gY2h1bmsubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdEJ1ZmZlci5idWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgX2dldFJlc3VsdChyZWFkZXI6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcjxhbnk+KSB7XHJcblxyXG4gICAgICAgIGxldCB0b3RhbExlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGNodW5rczogVWludDhBcnJheVtdID0gW107XHJcblxyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XHJcbiAgICAgICAgICAgIGlmIChkb25lKSBicmVhaztcclxuICAgICAgICAgICAgY2h1bmtzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICB0b3RhbExlbmd0aCArPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uY2F0Q2h1bmtzKGNodW5rcywgdG90YWxMZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgY29tcHJlc3NCdWZmZXIoYnVmZmVyOiBBcnJheUJ1ZmZlciwgZm9ybWF0OiBDb21wcmVzc2lvbkZvcm1hdCA9ICdnemlwJykge1xyXG5cclxuICAgICAgICBjb25zdCBjb21wcmVzc2VkU3RyZWFtID0gbmV3IENvbXByZXNzaW9uU3RyZWFtKGZvcm1hdCk7XHJcbiAgICAgICAgY29uc3Qgd3JpdGVyID0gY29tcHJlc3NlZFN0cmVhbS53cml0YWJsZS5nZXRXcml0ZXIoKTtcclxuICAgICAgICBcclxuICAgICAgICB3cml0ZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XHJcbiAgICAgICAgd3JpdGVyLmNsb3NlKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGNvbXByZXNzZWRTdHJlYW0ucmVhZGFibGUuZ2V0UmVhZGVyKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXN1bHQocmVhZGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGRlY29tcHJlc3NCdWZmZXIoYnVmZmVyOiBBcnJheUJ1ZmZlciwgZm9ybWF0OiBDb21wcmVzc2lvbkZvcm1hdCA9ICdnemlwJykge1xyXG5cclxuICAgICAgICBjb25zdCBkZWNvbXByZXNzZWRTdHJlYW0gPSBuZXcgRGVjb21wcmVzc2lvblN0cmVhbShmb3JtYXQpO1xyXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGRlY29tcHJlc3NlZFN0cmVhbS5yZWFkYWJsZS5nZXRSZWFkZXIoKTtcclxuICAgICAgICBjb25zdCB3cml0ZXIgPSBkZWNvbXByZXNzZWRTdHJlYW0ud3JpdGFibGUuZ2V0V3JpdGVyKCk7XHJcbiAgICBcclxuICAgICAgICAvLyBXcml0ZSB0aGUgY29tcHJlc3NlZCBidWZmZXIgdG8gdGhlIHdyaXRlclxyXG4gICAgICAgIHdyaXRlci53cml0ZShuZXcgVWludDhBcnJheShidWZmZXIpKTtcclxuICAgICAgICB3cml0ZXIuY2xvc2UoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3VsdChyZWFkZXIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IENvbXByZXNzb3IgZnJvbSBcIi4uL0V4dHJhcy9Db21wcmVzc29yLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IGZsb2F0LCBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSBBYnNIZWlnaHRNYXAgZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBJUmVhZG9ubHlBYnNIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNIZWlnaHRNYXAubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgaGVpZ2h0TWFwVmVyc2lvbiA9IDk5O1xyXG5leHBvcnQgY29uc3QgZmFjdG9yU2l6ZSA9IDM7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElIZWlnaHRNYXBGaWxlSW1wb3J0T3B0aW9ucyB7XHJcbiAgICBhZGFwdGl2ZVdpZHRoQW5kRGVwdGg/OiBib29sZWFuLFxyXG4gICAgYWRhcHRpdmVNYXhIZWlnaHQ/OiBib29sZWFuLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElJbXBvcnRGaWxlSGVhZGVyIHtcclxuICAgIHdpZHRoOiBpbnQsXHJcbiAgICBkZXB0aDogaW50LFxyXG4gICAgbWF4SGVpZ2h0OiBmbG9hdFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaGVpZ2h0TWFwRmlsZUNvbXByZXNzZWRGb3JtYXQ6IENvbXByZXNzaW9uRm9ybWF0ID0gJ2d6aXAnO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic0hlaWdodE1hcEZpbGVJTyB7XHJcblxyXG4gICAgcHJpdmF0ZSBfX3JlYWRIZWlnaHRGYWN0b3IodmlldzogRGF0YVZpZXcsIGhlYWRlclNpemU6IGludCwgd2lkdGg6IGludCwgeDogaW50LCB6OiBpbnQpIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB6ICogd2lkdGggKyB4O1xyXG4gICAgICAgIGNvbnN0IHIgPSB2aWV3LmdldFVpbnQ4KGhlYWRlclNpemUgKyBpbmRleCAqIGZhY3RvclNpemUgKyAwKTtcclxuICAgICAgICBjb25zdCBnID0gdmlldy5nZXRVaW50OChoZWFkZXJTaXplICsgaW5kZXggKiBmYWN0b3JTaXplICsgMSk7XHJcbiAgICAgICAgY29uc3QgYiA9IHZpZXcuZ2V0VWludDgoaGVhZGVyU2l6ZSArIGluZGV4ICogZmFjdG9yU2l6ZSArIDIpO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3Qgc2NhbGVkID0gKHIgPDwgMTYpIHwgKGcgPDwgOCkgfCBiO1xyXG4gICAgICAgIGNvbnN0IGZhY3RvciA9IHNjYWxlZCAvIDB4ZmZmZmZmO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmYWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfX3dyaXRlSGVpZ2h0RmFjdG9yKHZpZXc6IERhdGFWaWV3LCBoZWFkZXJTaXplOiBpbnQsIGhlaWdodE1hcDogSVJlYWRvbmx5QWJzSGVpZ2h0TWFwLCB4OiBpbnQsIHo6IGludCkge1xyXG5cclxuICAgICAgICBjb25zdCBpbmRleCAgPSB6ICogaGVpZ2h0TWFwLndpZHRoICsgeDtcclxuICAgICAgICBjb25zdCBmYWN0b3IgPSBoZWlnaHRNYXAuZ2V0RmFjdG9yKHgsIHopO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlZCA9IE1hdGguZmxvb3IoZmFjdG9yICogMHhmZmZmZmYpO1xyXG4gICAgICAgIGNvbnN0IHIgPSAoc2NhbGVkID4+IDE2KSAmIDB4ZmY7XHJcbiAgICAgICAgY29uc3QgZyA9IChzY2FsZWQgPj4gOCkgJiAweGZmO1xyXG4gICAgICAgIGNvbnN0IGIgPSAoc2NhbGVkICYgMHhmZik7XHJcblxyXG4gICAgICAgIHZpZXcuc2V0VWludDgoaGVhZGVyU2l6ZSArIGluZGV4ICogZmFjdG9yU2l6ZSArIDAsIHIpO1xyXG4gICAgICAgIHZpZXcuc2V0VWludDgoaGVhZGVyU2l6ZSArIGluZGV4ICogZmFjdG9yU2l6ZSArIDEsIGcpO1xyXG4gICAgICAgIHZpZXcuc2V0VWludDgoaGVhZGVyU2l6ZSArIGluZGV4ICogZmFjdG9yU2l6ZSArIDIsIGIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBfX2ltcG9ydEZyb21GaWxlKGhlaWdodE1hcDogQWJzSGVpZ2h0TWFwLCBidWZmZXI6IEFycmF5QnVmZmVyLCBvcHRpb25zPzogSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zKTogUHJvbWlzZTxJSW1wb3J0RmlsZUhlYWRlciB8IG51bGw+IHtcclxuXHJcbiAgICAgICAgLy8gVE9ETzpcclxuICAgICAgICAvLyBoZWFkZXIgdmVyc2lvbiA5OVxyXG4gICAgICAgIC8vIGhlYWRlckJ5dGVTaXplLCB2ZXJzaW9uLCB3aWR0aCwgZGVwdGgsIG1heEhlaWdodFxyXG5cclxuICAgICAgICBjb25zdCBuQnVmZmVyID0gYXdhaXQgQ29tcHJlc3Nvci5kZWNvbXByZXNzQnVmZmVyKGJ1ZmZlciwgaGVpZ2h0TWFwRmlsZUNvbXByZXNzZWRGb3JtYXQpO1xyXG4gICAgICAgIGNvbnN0IHZpZXcgICAgPSBuZXcgRGF0YVZpZXcobkJ1ZmZlcik7XHJcbiAgICAgICAgY29uc3QgdmVyc2lvbiA9IHZpZXcuZ2V0VWludDMyKDEsIHRydWUpO1xyXG5cclxuICAgICAgICBpZiAodmVyc2lvbiAhPT0gaGVpZ2h0TWFwVmVyc2lvbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0hlaWdodCBtYXAgdmVyc2lvbjogJWYgbm8gc3VwcG9ydC4nLCB2ZXJzaW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgY29uc3QgaGVhZGVyU2l6ZSA9IHZpZXcuZ2V0VWludDgoMCk7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggICAgICA9IHZpZXcuZ2V0VWludDMyKDUsIHRydWUpO1xyXG4gICAgICAgIGNvbnN0IGRlcHRoICAgICAgPSB2aWV3LmdldFVpbnQzMig5LCB0cnVlKTtcclxuICAgICAgICBjb25zdCBtYXhIZWlnaHQgID0gdmlldy5nZXRGbG9hdDMyKDEzLCB0cnVlKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGZpbmFsTWF4SGVpZ2h0ID0gb3B0aW9ucz8uYWRhcHRpdmVNYXhIZWlnaHQgPyBoZWlnaHRNYXAubWF4SGVpZ2h0IDogbWF4SGVpZ2h0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICgoaGVpZ2h0TWFwLndpZHRoICE9PSB3aWR0aCB8fCBoZWlnaHRNYXAuZGVwdGggIT09IGRlcHRoKSAmJiBvcHRpb25zPy5hZGFwdGl2ZVdpZHRoQW5kRGVwdGgpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFRPRE86IGl0cyB3b3JrIGZvciB4Xm4gKyAxLCB6Xm4gKyAxXHJcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvclggPSAod2lkdGggLSAxKSAvIChoZWlnaHRNYXAud2lkdGggLSAxKTtcclxuICAgICAgICAgICAgY29uc3QgZmFjdG9yWiA9IChkZXB0aCAtIDEpIC8gKGhlaWdodE1hcC5kZXB0aCAtIDEpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCBkZXB0aDsgeiArPSBmYWN0b3JaKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCArPSBmYWN0b3JYKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHNtb290aCBmb3IgaGVpZ2h0TWFwIG1vcmUgaW1wb3J0IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWN0b3IgPSB0aGlzLl9fcmVhZEhlaWdodEZhY3Rvcih2aWV3LCBoZWFkZXJTaXplLCB3aWR0aCwgeCB8IDAsIHogfCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBmYWN0b3IgKiBmaW5hbE1heEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0TWFwLnNldCh4IC8gZmFjdG9yWCwgeiAvIGZhY3RvclosIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IHogPSAwOyAoeiA8IGRlcHRoKSAmJiAoeiA8IGhlaWdodE1hcC5kZXB0aCk7IHorKykge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7ICh4IDwgd2lkdGgpICYmICh4IDwgaGVpZ2h0TWFwLndpZHRoKTsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IHRoaXMuX19yZWFkSGVpZ2h0RmFjdG9yKHZpZXcsIGhlYWRlclNpemUsIHdpZHRoLCB4LCB6KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBmYWN0b3IgKiBmaW5hbE1heEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRNYXAuc2V0KHgsIHosIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICBkZXB0aCxcclxuICAgICAgICAgICAgbWF4SGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBfX2V4cG9ydFRvQnVmZmVyKGhlaWdodE1hcDogQWJzSGVpZ2h0TWFwKSB7XHJcbiAgICBcclxuICAgICAgICAvLyBUT0RPOlxyXG4gICAgICAgIC8vIGhlYWRlciB2ZXJzaW9uIDk5XHJcbiAgICAgICAgLy8gaGVhZGVyQnl0ZVNpemUsIHZlcnNpb24sIHdpZHRoLCBkZXB0aCwgbWF4SGVpZ2h0XHJcbiAgICBcclxuICAgICAgICBjb25zdCBoZWFkZXJTaXplID0gMSArIDQgKyA0ICsgNCArIDQ7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyICAgICA9IG5ldyBBcnJheUJ1ZmZlcihoZWFkZXJTaXplICsgZmFjdG9yU2l6ZSAqIGhlaWdodE1hcC53aWR0aCAqIGhlaWdodE1hcC5kZXB0aCk7XHJcbiAgICAgICAgY29uc3QgdmlldyAgICAgICA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xyXG4gICAgXHJcbiAgICAgICAgdmlldy5zZXRVaW50OCAgKDAsIGhlYWRlclNpemUpO1xyXG4gICAgICAgIHZpZXcuc2V0VWludDMyICgxLCBoZWlnaHRNYXBWZXJzaW9uLCB0cnVlKTtcclxuICAgICAgICB2aWV3LnNldFVpbnQzMiAoNSwgaGVpZ2h0TWFwLndpZHRoLCB0cnVlKTtcclxuICAgICAgICB2aWV3LnNldFVpbnQzMiAoOSwgaGVpZ2h0TWFwLmRlcHRoLCB0cnVlKTtcclxuICAgICAgICB2aWV3LnNldEZsb2F0MzIoMTMsIGhlaWdodE1hcC5tYXhIZWlnaHQsIHRydWUpO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCBoZWlnaHRNYXAuZGVwdGg7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBoZWlnaHRNYXAud2lkdGg7IHgrKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuX193cml0ZUhlaWdodEZhY3Rvcih2aWV3LCBoZWFkZXJTaXplLCBoZWlnaHRNYXAsIHgsIHopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gQ29tcHJlc3Nvci5jb21wcmVzc0J1ZmZlcihidWZmZXIsIGhlaWdodE1hcEZpbGVDb21wcmVzc2VkRm9ybWF0KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWJzSGVpZ2h0TWFwRmlsZUlPOyIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVpvbmUgfSBmcm9tIFwiLi9JWm9uZS5tanNcIjtcclxuaW1wb3J0IEFic0hlaWdodE1hcEZpbGVJTywgeyB0eXBlIElIZWlnaHRNYXBGaWxlSW1wb3J0T3B0aW9ucyB9IGZyb20gXCIuL0Fic0hlaWdodE1hcEZpbGVJTy5tanNcIjtcclxuXHJcbi8qKlxyXG4gKiBAdmFyaWFudCByZ2JhIC0gZm9yYW10IGJ5IHVpbnQ4WzRdIHRleHR1cmUgKGZvciBwb2x5ZmlsbCBzdXBwb3J0IGZsb2F0MzIpXHJcbiAqIEB2YXJpYW50IHIzMmYgLSBmb3JtYXQgYnkgZmxvYXQzMiB0ZXh0dXJlXHJcbiAqIEB2YXJpYW50IHIxNnUgLSBmb3JtYXQgYnkgdWludDE2IHRleHR1cmVcclxuICogQHZhcmlhbnQgcjh1ICAtIGZvcm1hdCBieSB1aW50OCB0ZXh0dXJlXHJcbiAqIEBzZWUgUGF0Y2hlZEhlaWdodE1hcFxyXG4gKi9cclxuZXhwb3J0IHR5cGUgVEhlaWdodE1hcEZvcm1hdCA9ICdyZ2JhJyB8ICdyMzJmJyB8ICdyMTZ1JyB8ICdyOHUnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlBYnNIZWlnaHRNYXAge1xyXG5cclxuICAgIHJlYWRvbmx5IHdpZHRoOiBpbnQ7XHJcbiAgICByZWFkb25seSBkZXB0aDogaW50O1xyXG5cclxuICAgIHJlYWRvbmx5IG1heEhlaWdodDogZmxvYXQ7XHJcblxyXG4gICAgZ2V0KHg6IGludCwgejogaW50KTogZmxvYXQ7XHJcbiAgICBnZXRGYWN0b3IoeDogaW50LCB6OiBpbnQpOiBmbG9hdDtcclxuICAgIGdldEhlaWdodEludGVycG9sYXRlZCh4OiBmbG9hdCwgejogZmxvYXQpOiBmbG9hdDtcclxuICAgIHRvRmlsZSgpOiBQcm9taXNlPEJsb2I+O1xyXG4gICAgdG9DYW52YXMoKTogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICB0b0J1ZmZlcihidWZmZXI6IFVpbnQ4QXJyYXkgfCBVaW50OENsYW1wZWRBcnJheSk6IHZvaWQ7XHJcbiAgICB0b0ltYWdlKHR5cGU/OiBzdHJpbmcgfCB1bmRlZmluZWQsIHF1YWxpdHk/OiBhbnkpOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnNIZWlnaHRNYXAgZXh0ZW5kcyBBYnNIZWlnaHRNYXBGaWxlSU8gaW1wbGVtZW50cyBJUmVhZG9ubHlBYnNIZWlnaHRNYXAsIElab25lIHtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3Qgd2lkdGg6IGludDtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBkZXB0aDogaW50O1xyXG4gICAgcHVibGljIGFic3RyYWN0IG1heEhlaWdodDogZmxvYXQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGdldCh4OiBpbnQsIHo6IGludCk6IGZsb2F0O1xyXG4gICAgcHVibGljIGFic3RyYWN0IHNldCh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0KTogZmxvYXQ7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0RmFjdG9yKHg6IGludCwgejogaW50KTogZmxvYXQ7XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IG1pblggPSAwO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG1pblogPSAwO1xyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0IG1heFgoKSB7IHJldHVybiB0aGlzLndpZHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG1heFooKSB7IHJldHVybiB0aGlzLmRlcHRoOyB9XHJcblxyXG4gICAgcHVibGljIGdldEhlaWdodEludGVycG9sYXRlZCh4OiBmbG9hdCwgejogZmxvYXQpIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW50WCA9IHggfCAwO1xyXG4gICAgICAgIGNvbnN0IGludFogPSB6IHwgMDtcclxuICAgICAgICBjb25zdCB4MHowID0gdGhpcy5nZXQoaW50WCwgaW50Wik7XHJcblxyXG4gICAgICAgIGlmICgoaW50WCArIDEgPj0gdGhpcy53aWR0aCkgfHxcclxuICAgICAgICAgICAgKGludFogKyAxID49IHRoaXMuZGVwdGgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB4MHowO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeDF6MCA9IHRoaXMuZ2V0KGludFggKyAxLCBpbnRaKTtcclxuICAgICAgICBjb25zdCB4MHoxID0gdGhpcy5nZXQoaW50WCwgICAgIGludFogKyAxKTtcclxuICAgICAgICBjb25zdCB4MXoxID0gdGhpcy5nZXQoaW50WCArIDEsIGludFogKyAxKTtcclxuXHJcbiAgICAgICAgY29uc3QgZmFjdG9yWCA9IHggLSBpbnRYO1xyXG5cclxuICAgICAgICBjb25zdCBpbnRlcnBvbGF0ZWRCb3R0b20gPSAoeDF6MCAtIHgwejApICogZmFjdG9yWCArIHgwejA7XHJcbiAgICAgICAgY29uc3QgaW50ZXJwb2xhdGVkVG9wICAgID0gKHgxejEgLSB4MHoxKSAqIGZhY3RvclggKyB4MHoxO1xyXG5cclxuICAgICAgICBjb25zdCBmYWN0b3JaID0geiAtIGludFo7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbmFsSGVpZ2h0ID0gKGludGVycG9sYXRlZFRvcCAtIGludGVycG9sYXRlZEJvdHRvbSkgKiBmYWN0b3JaICsgaW50ZXJwb2xhdGVkQm90dG9tO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGZpbmFsSGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBhcHBlbmQoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCk6IGZsb2F0O1xyXG5cclxuICAgIHB1YmxpYyBzdWJzdHJhY3QoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGVuZCh4LCB6LCAtdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBtdWx0aXBseSh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0LCBoZWlnaHRJZlplcm8/OiBmbG9hdCk6IGZsb2F0O1xyXG5cclxuICAgIHB1YmxpYyBkaXZpZGUoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCwgaGVpZ2h0SWZaZXJvOiBmbG9hdCA9IDApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseSh4LCB6LCAxIC8gdmFsdWUsIGhlaWdodElmWmVybyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGZyb21GaWxlKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIG9wdGlvbnM/OiBJSGVpZ2h0TWFwRmlsZUltcG9ydE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fX2ltcG9ydEZyb21GaWxlKHRoaXMsIGJ1ZmZlciwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHRvRmlsZSgpIHtcclxuICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCB0aGlzLl9fZXhwb3J0VG9CdWZmZXIodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtidWZmZXJdLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvQnVmZmVyKGJ1ZmZlcjogVWludDhBcnJheSB8IFVpbnQ4Q2xhbXBlZEFycmF5KTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IHdpZHRoICA9IHRoaXMud2lkdGg7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSAwOyB6IDwgdGhpcy5kZXB0aDsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGYgICA9IHRoaXMuZ2V0RmFjdG9yKHgsIHopO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdiAgID0gZiAqIDI1NTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9ICh4ICsgeiAqIHdpZHRoKSAqIDQ7XHJcblxyXG4gICAgICAgICAgICAgICAgYnVmZmVyW3BvcyArIDBdID0gdjtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlcltwb3MgKyAxXSA9IHY7XHJcbiAgICAgICAgICAgICAgICBidWZmZXJbcG9zICsgMl0gPSB2O1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyW3BvcyArIDNdID0gMjU1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0b0NhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgIGNvbnN0IHdpZHRoICA9IHRoaXMud2lkdGg7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5kZXB0aDtcclxuXHJcbiAgICAgICAgY2FudmFzLndpZHRoICA9IHdpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICBpZiAoIWN0eCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCBjcmVhdGUgY2FudmFzIDJkIGNvbnRleHQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyICAgID0gaW1hZ2VEYXRhLmRhdGE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy50b0J1ZmZlcihidWZmZXIpO1xyXG4gICAgICAgIGN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhdmUgaGVpZ2h0IG1hcCB0byBpbWFnZSBvZiBiYXNlNjRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRvSW1hZ2UodHlwZT86IHN0cmluZyB8IHVuZGVmaW5lZCwgcXVhbGl0eT86IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy50b0NhbnZhcygpO1xyXG4gICAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKHR5cGUsIHF1YWxpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBoZWlnaHQgbWFwIGZyb20gaW1hZ2VcclxuICAgICAqIEBwYXJhbSBpbWcgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmcm9tSW1hZ2UoaW1nOiBJbWFnZUJpdG1hcCkge1xyXG5cclxuICAgICAgICBjb25zdCBidWZmZXJXaWR0aCAgPSBpbWcud2lkdGg7XHJcbiAgICAgICAgY29uc3QgYnVmZmVySGVpZ2h0ID0gaW1nLmhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKGJ1ZmZlcldpZHRoICUgMiAhPT0gMCB8fCBidWZmZXJIZWlnaHQgJSAyICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hcCBzaXplcyBub3QgZGl2aXNpYmxlIGJ5IDIgYXJlIG5vdCBzdXBwb3J0ZWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjYW52YXMgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSE7XHJcblxyXG4gICAgICAgIGNhbnZhcy53aWR0aCAgPSBidWZmZXJXaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gYnVmZmVySGVpZ2h0O1xyXG4gICAgXHJcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW1hZ2VEYXRhICAgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBidWZmZXJXaWR0aCwgYnVmZmVySGVpZ2h0KTtcclxuICAgICAgICBjb25zdCBpbWFnZUJ1ZmZlciA9IGltYWdlRGF0YS5kYXRhO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhTZWdtZW50WCA9IHRoaXMud2lkdGggLSAxO1xyXG4gICAgICAgIGNvbnN0IG1heFNlZ21lbnRaID0gdGhpcy5kZXB0aCAtIDE7XHJcbiAgICAgICAgY29uc3QgZmFjdG9yWCAgICAgPSBidWZmZXJXaWR0aCAgLyBtYXhTZWdtZW50WDtcclxuICAgICAgICBjb25zdCBmYWN0b3JaICAgICA9IGJ1ZmZlckhlaWdodCAvIG1heFNlZ21lbnRaO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHRoaXMuZGVwdGg7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IG5vcm1hbGl6ZVggPSB4ID09PSBtYXhTZWdtZW50WCA/IHggLSAxIDogeDtcclxuICAgICAgICAgICAgICAgIGxldCBub3JtYWxpemVaID0geiA9PT0gbWF4U2VnbWVudFogPyB6IC0gMSA6IHo7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0TWFwWCA9IChub3JtYWxpemVYICogZmFjdG9yWCkgfCAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0TWFwWiA9IChub3JtYWxpemVaICogZmFjdG9yWikgfCAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9IChoZWlnaHRNYXBYICsgaGVpZ2h0TWFwWiAqIGJ1ZmZlcldpZHRoKSAqIDQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gaW1hZ2VCdWZmZXJbcG9zXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGcgPSBpbWFnZUJ1ZmZlcltwb3MgKyAxXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBpbWFnZUJ1ZmZlcltwb3MgKyAyXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBpbWFnZUJ1ZmZlcltwb3MgKyAzXTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2VmZiAgPSAociArIGcgKyBiKSAvIDMgLyBhO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gY29lZmYgKiB0aGlzLm1heEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh4LCB6LCBoZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgc21vb3RoWm9uZSh6b25lOiBJWm9uZSwgbnA6IGZsb2F0LCByYWRpdXM6IGludCkge1xyXG5cclxuICAgICAgICBpZiAoem9uZS5tYXhYIDwgMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh6b25lLm1heFogPCAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChucCA8IDAgfHwgbnAgPiAxKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHJhZGl1cyA8IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbWluWCA9IE1hdGgubWF4KHpvbmUubWluWCwgMCk7XHJcbiAgICAgICAgY29uc3QgbWluWiA9IE1hdGgubWF4KHpvbmUubWluWiwgMCk7XHJcbiAgICAgICAgY29uc3QgbWF4WCA9IE1hdGgubWluKHpvbmUubWF4WCwgdGhpcy53aWR0aCk7XHJcbiAgICAgICAgY29uc3QgbWF4WiA9IE1hdGgubWluKHpvbmUubWF4WiwgdGhpcy5kZXB0aCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNwID0gMSAtIG5wO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB4ID0gbWluWDsgeCA8IG1heFg7IHgrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeiA9IG1pblo7IHogPCBtYXhaOyB6KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2SGVpZ2h0ID0gdGhpcy5nZXQoeCwgeik7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHVwZHRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmVpZ2hOdW1iZXIgID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBuZWlnaEF2ZXJhZ2UgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHJ4ID0gLXJhZGl1czsgcnggPD0gcmFkaXVzOyByeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHJ6ID0gLXJhZGl1czsgcnogPD0gcmFkaXVzOyByeisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lclggPSAoeCArIHJ4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5uZXJaID0gKHogKyByeik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJYIDwgMCB8fCBpbm5lclggPj0gdGhpcy53aWR0aCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbm5lclogPCAwIHx8IGlubmVyWiA+PSB0aGlzLmRlcHRoKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IChpbm5lclggPT09IHggJiYgaW5uZXJaID09PSB6KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBwcmV2SGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZ2V0KGlubmVyWCwgaW5uZXJaKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoTnVtYmVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoQXZlcmFnZSArPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG5laWdoQXZlcmFnZSAvPSBuZWlnaE51bWJlcjtcclxuICAgICAgICAgICAgICAgIHVwZHRIZWlnaHQgPSBuZWlnaEF2ZXJhZ2UgKiBucCArIHByZXZIZWlnaHQgKiBjcDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh4LCB6LCB1cGR0SGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc21vb3RoKG5wOiBmbG9hdCwgcmFkaXVzOiBpbnQpIHtcclxuICAgICAgICB0aGlzLnNtb290aFpvbmUodGhpcywgbnAsIHJhZGl1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG5vcm1hbGl6ZShtYXhIZWlnaHQ6IGZsb2F0KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCB0aGlzLmRlcHRoOyB6KyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEhlaWdodCAgID0gdGhpcy5nZXQoeCwgeik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVIZWlnaHQgPSAoY3VycmVudEhlaWdodCAvIHRoaXMubWF4SGVpZ2h0KSAqIG1heEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh4LCB6LCBub3JtYWxpemVIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb21iaW5lSGVpZ2h0cyhcclxuICAgICAgICB0eXBlOiAnKycgfCAnLScgfCAnKicgfCAnLycsXHJcbiAgICAgICAgaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNIZWlnaHRNYXAsXHJcbiAgICAgICAgdmFsdWU6IGZsb2F0LFxyXG4gICAgICAgIHpvbmU6IElab25lLFxyXG4gICAgICAgIGhlaWdodElmWmVybzogZmxvYXQgPSAwLFxyXG4gICAgICAgIG1pbkhlaWdodDogZmxvYXQgfCBudWxsID0gbnVsbCxcclxuICAgICAgICBtYXhIZWlnaHQ6IGZsb2F0IHwgbnVsbCA9IG51bGxcclxuICAgICkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh6b25lLm1heFggPCAwKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHpvbmUubWF4WiA8IDApIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBsZW5YID0gem9uZS5tYXhYIC0gem9uZS5taW5YO1xyXG4gICAgICAgIGNvbnN0IGxlblogPSB6b25lLm1heFogLSB6b25lLm1pblo7XHJcblxyXG4gICAgICAgIGlmIChsZW5YIDwgMSB8fCBsZW5aIDwgMSB8fCB2YWx1ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmaXhlZE1pblggPSBNYXRoLm1heCh6b25lLm1pblgsIDApO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTWluWiA9IE1hdGgubWF4KHpvbmUubWluWiwgMCk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRNYXhYID0gTWF0aC5taW4oem9uZS5tYXhYLCB0aGlzLndpZHRoKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1heFogPSBNYXRoLm1pbih6b25lLm1heFosIHRoaXMuZGVwdGgpO1xyXG5cclxuICAgICAgICBjb25zdCBjb2VmZkZhY3RvclggPSAoaGVpZ2h0TWFwLndpZHRoIC0gMSkgLyBsZW5YO1xyXG4gICAgICAgIGNvbnN0IGNvZWZmRmFjdG9yWiA9IChoZWlnaHRNYXAuZGVwdGggLSAxKSAvIGxlblo7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSBmaXhlZE1pblo7IHogPCBmaXhlZE1heFo7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IGZpeGVkTWluWDsgeCA8IGZpeGVkTWF4WDsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgeDIgPSAoY29lZmZGYWN0b3JYICogKHggLSB6b25lLm1pblgpKSB8IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB6MiA9IChjb2VmZkZhY3RvclogKiAoeiAtIHpvbmUubWluWikpIHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGhlaWdodE1hcC5nZXQoeDIsIHoyKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNtb290aEFwcGVuZFZhbHVlID0gaGVpZ2h0ICogdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkSGVpZ2h0ID0gdGhpcy5nZXQoeCwgeikgfHwgaGVpZ2h0SWZaZXJvO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBjYW5kaWRhdGUgPSB0eXBlID09PSAnKycgPyBvbGRIZWlnaHQgKyBzbW9vdGhBcHBlbmRWYWx1ZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9PT0gJy0nID8gb2xkSGVpZ2h0IC0gc21vb3RoQXBwZW5kVmFsdWUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPT09ICcqJyA/IG9sZEhlaWdodCAqIHNtb290aEFwcGVuZFZhbHVlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID09PSAnLycgPyBvbGRIZWlnaHQgLyBzbW9vdGhBcHBlbmRWYWx1ZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobWluSGVpZ2h0ICE9PSBudWxsICYmIGNhbmRpZGF0ZSA8IG1pbkhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZSA9IG1pbkhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG1heEhlaWdodCAhPT0gbnVsbCAmJiBjYW5kaWRhdGUgPiBtYXhIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUgPSBtYXhIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoeCwgeiwgY2FuZGlkYXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWJzSGVpZ2h0TWFwOyIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCBBYnNIZWlnaHRNYXAsIHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgIEhlaWdodE1hcEFyclR5cGUgPSBGbG9hdDMyQXJyYXk7XHJcbmV4cG9ydCBjb25zdCBIZWlnaHRNYXBBcnJUeXBlID0gRmxvYXQzMkFycmF5O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplOiBpbnQgPSAxO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlIZWlnaHRNYXA8VERhdGEgPSBIZWlnaHRNYXBBcnJUeXBlPiBleHRlbmRzIElSZWFkb25seUFic0hlaWdodE1hcCB7XHJcbiAgICByZWFkb25seSBpdGVtU2l6ZTogaW50O1xyXG4gICAgcmVhZG9ubHkgaXRlbUhlaWdodEluZGV4T2Zmc2V0OiBpbnQ7XHJcbiAgICByZWFkb25seSBkYXRhOiBURGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhlaWdodE1hcDxURGF0YSBleHRlbmRzIEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSA9IEhlaWdodE1hcEFyclR5cGU+IGV4dGVuZHMgQWJzSGVpZ2h0TWFwIGltcGxlbWVudHMgSVJlYWRvbmx5SGVpZ2h0TWFwPFREYXRhPiB7XHJcblxyXG4gICAgcHJpdmF0ZSBfd2lkdGg6IGludCA9IDA7XHJcbiAgICBwcml2YXRlIF9kZXB0aDogaW50ID0gMDtcclxuICAgIHByaXZhdGUgX21heEhlaWdodDogZmxvYXQgPSAwO1xyXG4gICAgcHJpdmF0ZSBfZGF0YTogVERhdGE7XHJcbiAgICBcclxuICAgIHByaXZhdGUgX2l0ZW1TaXplOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9pdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludDtcclxuICAgIFxyXG4gICAgcHVibGljIGdldCBzaXplKCkgIHsgcmV0dXJuIHRoaXMuX3dpZHRoICogdGhpcy5fZGVwdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgd2lkdGgoKSB7IHJldHVybiB0aGlzLl93aWR0aDsgfVxyXG4gICAgcHVibGljIGdldCBkZXB0aCgpIHsgcmV0dXJuIHRoaXMuX2RlcHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRhdGEoKSAgeyByZXR1cm4gdGhpcy5fZGF0YTsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXRlbVNpemUoKSAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5faXRlbVNpemU7IH1cclxuICAgIHB1YmxpYyBnZXQgaXRlbUhlaWdodEluZGV4T2Zmc2V0KCkgeyByZXR1cm4gdGhpcy5faXRlbUhlaWdodEluZGV4T2Zmc2V0OyB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXQgbWF4SGVpZ2h0KCkgIHsgcmV0dXJuIHRoaXMuX21heEhlaWdodDsgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0KTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI6IFREYXRhLCBpdGVtU2l6ZT86IGludCwgaXRlbUhlaWdodEluZGV4T2Zmc2V0PzogaW50KTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI/OiBURGF0YSB8IHVuZGVmaW5lZCwgaXRlbVNpemU6IGludCA9IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludCA9IDApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX2luaXQod2lkdGgsIGRlcHRoLCBtYXhIZWlnaHQsIGJ1ZmZlciEsIGl0ZW1TaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfaW5pdCh3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0KTogdm9pZDtcclxuICAgIHByb3RlY3RlZCBfaW5pdCh3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI6IFREYXRhLCBpdGVtU2l6ZT86IGludCwgaXRlbUhlaWdodEluZGV4T2Zmc2V0PzogaW50KTogdm9pZDtcclxuICAgIHByb3RlY3RlZCBfaW5pdCh3aWR0aDogaW50LCBkZXB0aDogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI/OiBURGF0YSB8IHVuZGVmaW5lZCwgaXRlbVNpemU6IGludCA9IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludCA9IDApOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLl9kZXB0aCA9IGRlcHRoO1xyXG4gICAgICAgIHRoaXMuX21heEhlaWdodCA9IG1heEhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKGJ1ZmZlcikge1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW1TaXplIDwgaXRlbUhlaWdodEluZGV4T2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJdGVtU2l6ZSBjYW4ndCBsZXNzIG9yIGVxIEl0ZW1IZWlnaHRJbmRleE9mZnNldFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPCAod2lkdGggKiBkZXB0aCkgKiBpdGVtU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnVmZmVyIGhhcyBpbnZhbGlkIGxlbmd0aFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IGJ1ZmZlcjtcclxuICAgICAgICAgICAgdGhpcy5faXRlbVNpemUgPSBpdGVtU2l6ZTtcclxuICAgICAgICAgICAgdGhpcy5faXRlbUhlaWdodEluZGV4T2Zmc2V0ID0gaXRlbUhlaWdodEluZGV4T2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogdHlwZSBjaGVja2VyXHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSBuZXcgSGVpZ2h0TWFwQXJyVHlwZSh3aWR0aCAqIGRlcHRoICogZGVmYXVsdEhlaWdodFZlcnRleFNpemUpIGFzIHVua25vd24gYXMgVERhdGE7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1TaXplID0gZGVmYXVsdEhlaWdodFZlcnRleFNpemU7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1IZWlnaHRJbmRleE9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfZW5jb2RlSGVpZ2h0KHN0b3JlOiBURGF0YSwgaW5kZXg6IGludCwgdmFsdWU6IGZsb2F0LCBtYXg6IGZsb2F0KSB7XHJcbiAgICAgICAgc3RvcmVbaW5kZXhdID0gTWF0aC5tYXgoTWF0aC5taW4odmFsdWUsIG1heCksIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfZGVjb2RlSGVpZ2h0KHN0b3JlOiBURGF0YSwgaW5kZXg6IGludCwgbWF4OiBmbG9hdCkge1xyXG4gICAgICAgIHJldHVybiBzdG9yZVtpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9kZWNvZGVIZWlnaHRGYWN0b3Ioc3RvcmU6IFREYXRhLCBpbmRleDogaW50LCBtYXg6IGZsb2F0KSB7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlW2luZGV4XSAvIG1heDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2VuY29kZUFuZFNldChzdG9yZTogVERhdGEsIGluZGV4OiBpbnQsIHZhbHVlOiBmbG9hdCwgbWF4OiBmbG9hdCkgeyAgICBcclxuICAgICAgICB0aGlzLl9lbmNvZGVIZWlnaHQoc3RvcmUsIGluZGV4LCB2YWx1ZSwgbWF4KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVjb2RlSGVpZ2h0KHN0b3JlLCBpbmRleCwgbWF4KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGdldEluZGV4KHg6IGludCwgejogaW50KSB7XHJcbiAgICAgICAgcmV0dXJuICh6ICogdGhpcy5fd2lkdGggKyB4KSAqIHRoaXMuX2l0ZW1TaXplICsgdGhpcy5faXRlbUhlaWdodEluZGV4T2Zmc2V0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGYWN0b3IoeDogaW50LCB6OiBpbnQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0SW5kZXgoeCwgeik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlY29kZUhlaWdodEZhY3Rvcih0aGlzLl9kYXRhLCBpbmRleCwgdGhpcy5fbWF4SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgZ2V0KHg6IGludCwgejogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldEluZGV4KHgsIHopO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWNvZGVIZWlnaHQodGhpcy5fZGF0YSwgaW5kZXgsIHRoaXMuX21heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHNldCh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldEluZGV4KHgsIHopO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVBbmRTZXQodGhpcy5fZGF0YSwgaW5kZXgsIHZhbHVlLCB0aGlzLl9tYXhIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRNYXhIZWlnaHQobWF4SGVpZ2h0OiBmbG9hdCkge1xyXG4gICAgICAgIHRoaXMuX21heEhlaWdodCA9IG1heEhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgYXBwZW5kKHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQpIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXggICAgID0gdGhpcy5nZXRJbmRleCh4LCB6KTtcclxuICAgICAgICBjb25zdCBvbGRWYWx1ZSAgPSB0aGlzLl9kZWNvZGVIZWlnaHQodGhpcy5fZGF0YSwgaW5kZXgsIHRoaXMuX21heEhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgY2FuVmFsdWUgID0gb2xkVmFsdWUgKyB2YWx1ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuY29kZUFuZFNldCh0aGlzLl9kYXRhLCBpbmRleCwgY2FuVmFsdWUsIHRoaXMuX21heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIG11bHRpcGx5KHg6IGludCwgejogaW50LCB2YWx1ZTogZmxvYXQsIGhlaWdodElmWmVybzogZmxvYXQgPSAwKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGluZGV4ICAgICA9IHRoaXMuZ2V0SW5kZXgoeCwgeik7XHJcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgID0gdGhpcy5fZGVjb2RlSGVpZ2h0KHRoaXMuX2RhdGEsIGluZGV4LCB0aGlzLl9tYXhIZWlnaHQpIHx8IGhlaWdodElmWmVybztcclxuICAgICAgICBjb25zdCBjYW5WYWx1ZSAgPSBvbGRWYWx1ZSAqIHZhbHVlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZW5jb2RlQW5kU2V0KHRoaXMuX2RhdGEsIGluZGV4LCBjYW5WYWx1ZSwgdGhpcy5fbWF4SGVpZ2h0KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSGVpZ2h0TWFwOyIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElab25lIH0gZnJvbSBcIi4vSVpvbmUubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRNYXAsIHsgZGVmYXVsdEhlaWdodFZlcnRleFNpemUsIHR5cGUgSGVpZ2h0TWFwQXJyVHlwZSwgdHlwZSBJUmVhZG9ubHlIZWlnaHRNYXAgfSBmcm9tIFwiLi9IZWlnaHRNYXAubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgbWluTWF4U3RhY2tTaXplICA9IDI7XHJcbmV4cG9ydCBjb25zdCBtaW5NYXhHbG9iYWxTaXplID0gMiAqIG1pbk1heFN0YWNrU2l6ZTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwIGV4dGVuZHMgSVJlYWRvbmx5QWJzSGVpZ2h0TWFwIHtcclxuXHJcbiAgICByZWFkb25seSBwYXRjaFNpemU6IGludDtcclxuICAgIHJlYWRvbmx5IG51bVBhdGNoZXNYOiBpbnQ7XHJcbiAgICByZWFkb25seSBudW1QYXRjaGVzWjogaW50O1xyXG5cclxuICAgIGdldE1pbigpOiBmbG9hdDtcclxuICAgIGdldE1heCgpOiBmbG9hdDtcclxuICAgIGdldE1pbkZhY3RvcigpOiBmbG9hdDtcclxuICAgIGdldE1heEZhY3RvcigpOiBmbG9hdDtcclxuICAgIGdldEVudHJpZXNQYXRjaE1pbih4OiBmbG9hdCwgejogZmxvYXQpOiBmbG9hdDtcclxuICAgIGdldEVudHJpZXNQYXRjaE1heCh4OiBmbG9hdCwgejogZmxvYXQpOiBmbG9hdDtcclxuICAgIGdldEVudHJpZXNQYXRjaE1pbkZhY3Rvcih4OiBmbG9hdCwgejogZmxvYXQpOiBmbG9hdDtcclxuICAgIGdldEVudHJpZXNQYXRjaE1heEZhY3Rvcih4OiBmbG9hdCwgejogZmxvYXQpOiBmbG9hdDtcclxuICAgIGdldFBhdGNoTWluKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KTogZmxvYXQ7XHJcbiAgICBnZXRQYXRjaE1heChwYXRjaEJhc2VYOiBpbnQsIHBhdGNoQmFzZVo6IGludCk6IGZsb2F0O1xyXG4gICAgZ2V0UGF0Y2hNaW5GYWN0b3IocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpOiBmbG9hdDtcclxuICAgIGdldFBhdGNoTWF4RmFjdG9yKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KTogZmxvYXQ7XHJcbiAgICBnZXRQZXJmb3JtUGF0Y2hNaW4ocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpOiBmbG9hdDtcclxuICAgIGdldFBlcmZvcm1QYXRjaE1heChwYXRjaEJhc2VYOiBpbnQsIHBhdGNoQmFzZVo6IGludCk6IGZsb2F0O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZWFkb25seUFic1NoYXR0ZXJlZEhlaWdodE1hcFR5cHBlZDxURGF0YSBleHRlbmRzIEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSA9IEhlaWdodE1hcEFyclR5cGU+IGV4dGVuZHMgSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwLCBJUmVhZG9ubHlIZWlnaHRNYXA8VERhdGE+IHtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnNTaGF0dGVyZWRIZWlnaHRNYXA8VERhdGEgZXh0ZW5kcyBGbG9hdDMyQXJyYXkgfCBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXkgPSBIZWlnaHRNYXBBcnJUeXBlPiBleHRlbmRzIEhlaWdodE1hcDxURGF0YT4gaW1wbGVtZW50cyBJUmVhZG9ubHlBYnNTaGF0dGVyZWRIZWlnaHRNYXBUeXBwZWQ8VERhdGE+IHtcclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIF9wYXRjaFNpemU6IGludDtcclxuICAgIHByb3RlY3RlZCBfbnVtUGF0Y2hlc1g6IGludDtcclxuICAgIHByb3RlY3RlZCBfbnVtUGF0Y2hlc1o6IGludDtcclxuICAgIHByb3RlY3RlZCBfcGF0Y2hlc1NlZ21lbnRTaXplOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX21pbk1heFBhdGNoZXNDb29yZHM6IGludFtdO1xyXG5cclxuICAgIHByb3RlY3RlZCBfcGVyZm9ybU1pblBhdGNoZXNWYWx1ZTogZmxvYXRbXTtcclxuICAgIHByb3RlY3RlZCBfcGVyZm9ybU1heFBhdGNoZXNWYWx1ZTogZmxvYXRbXTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoU2l6ZSgpICAgeyByZXR1cm4gdGhpcy5fcGF0Y2hTaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNYKCkgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1g7IH1cclxuICAgIHB1YmxpYyBnZXQgbnVtUGF0Y2hlc1ooKSB7IHJldHVybiB0aGlzLl9udW1QYXRjaGVzWjsgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgbWF4SGVpZ2h0OiBmbG9hdCk7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IGludCwgZGVwdGg6IGludCwgcGF0Y2hTaXplOiBpbnQsIG1heEhlaWdodDogZmxvYXQsIGJ1ZmZlcjogVERhdGEsIGl0ZW1TaXplPzogaW50LCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ/OiBpbnQpO1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIHBhdGNoU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI/OiBURGF0YSB8IHVuZGVmaW5lZCwgaXRlbVNpemU6IGludCA9IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludCA9IDApIHtcclxuICAgICAgICBzdXBlcih3aWR0aCwgZGVwdGgsIG1heEhlaWdodCwgYnVmZmVyISAvKiogVFMgaHVjayAqLywgaXRlbVNpemUsIGl0ZW1IZWlnaHRJbmRleE9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5fc2V0UGF0Y2hTaXplKHBhdGNoU2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fY2xlYXJNaW5NYXgoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIF9zZXRQYXRjaFNpemUocGF0Y2hTaXplOiBpbnQpIHtcclxuXHJcbiAgICAgICAgLy8gV2UgY2FuIHVzZSBzaGFyZWQgYnVmZmVyIGZvciBjYWxjdWxhdGlvbiBpbiBtdWx0aSB0aHJlYWRzXHJcbiAgICAgICAgdGhpcy5fcGF0Y2hTaXplICAgPSBwYXRjaFNpemU7XHJcbiAgICAgICAgdGhpcy5fbnVtUGF0Y2hlc1ggPSAoKHRoaXMud2lkdGggLSAxKSAvICh0aGlzLl9wYXRjaFNpemUgLSAxKSkgfCAwO1xyXG4gICAgICAgIHRoaXMuX251bVBhdGNoZXNaID0gKCh0aGlzLmRlcHRoIC0gMSkgLyAodGhpcy5fcGF0Y2hTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICB0aGlzLl9wYXRjaGVzU2VnbWVudFNpemUgPSB0aGlzLl9udW1QYXRjaGVzWCAqIHRoaXMuX251bVBhdGNoZXNaICogbWluTWF4U3RhY2tTaXplO1xyXG4gICAgICAgIHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHMgPSBuZXcgQXJyYXk8aW50PihtaW5NYXhHbG9iYWxTaXplICsgdGhpcy5fcGF0Y2hlc1NlZ21lbnRTaXplICogMik7XHJcblxyXG4gICAgICAgIC8vIEFsbG9jIG1lbW9yeSBmb3IgcGVyZm9ybWFuY2UgdmFsdWVzXHJcbiAgICAgICAgdGhpcy5fcGVyZm9ybU1pblBhdGNoZXNWYWx1ZSA9IG5ldyBBcnJheTxmbG9hdD4odGhpcy5fbnVtUGF0Y2hlc1ggKiB0aGlzLl9udW1QYXRjaGVzWik7XHJcbiAgICAgICAgdGhpcy5fcGVyZm9ybU1heFBhdGNoZXNWYWx1ZSA9IG5ldyBBcnJheTxmbG9hdD4odGhpcy5fbnVtUGF0Y2hlc1ggKiB0aGlzLl9udW1QYXRjaGVzWik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9jbGVhck1pbk1heCgpIHtcclxuICAgICAgICB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzLmZpbGwoMCk7XHJcbiAgICAgICAgdGhpcy5fcGVyZm9ybU1pblBhdGNoZXNWYWx1ZS5maWxsKDApO1xyXG4gICAgICAgIHRoaXMuX3BlcmZvcm1NYXhQYXRjaGVzVmFsdWUuZmlsbCgwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3JlY2FsY3VsYXRlUGVyZm9ybWFuY2VWYWx1ZXNCeU1heEhlaWdodChvbGRNYXhIZWlnaHQ6IGZsb2F0LCBuZXdNYXhIZWlnaHQ6IGZsb2F0KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGZhY3RvciA9IG9sZE1heEhlaWdodCAvIG5ld01heEhlaWdodDtcclxuICAgICAgICBjb25zdCBjb3VudCAgPSB0aGlzLl9wZXJmb3JtTWluUGF0Y2hlc1ZhbHVlLmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BlcmZvcm1NaW5QYXRjaGVzVmFsdWVbaV0gKj0gZmFjdG9yO1xyXG4gICAgICAgICAgICB0aGlzLl9wZXJmb3JtTWF4UGF0Y2hlc1ZhbHVlW2ldICo9IGZhY3RvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHNldE1heEhlaWdodChtYXhIZWlnaHQ6IGZsb2F0KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgb2xkTWF4SGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQ7XHJcbiAgICAgICAgc3VwZXIuc2V0TWF4SGVpZ2h0KG1heEhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5fcmVjYWxjdWxhdGVQZXJmb3JtYW5jZVZhbHVlc0J5TWF4SGVpZ2h0KG9sZE1heEhlaWdodCwgbWF4SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGVyZm9ybVBhdGNoTWluKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KTogZmxvYXQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJmb3JtTWluUGF0Y2hlc1ZhbHVlW3BhdGNoQmFzZVogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoQmFzZVhdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQZXJmb3JtUGF0Y2hNYXgocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpOiBmbG9hdCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BlcmZvcm1NYXhQYXRjaGVzVmFsdWVbcGF0Y2hCYXNlWiAqIHRoaXMuX251bVBhdGNoZXNYICsgcGF0Y2hCYXNlWF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEVudHJpZXNQYXRjaE1pbih4OiBpbnQsIHo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWCA9IHggLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWiA9IHogLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFBhdGNoTWluKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RW50cmllc1BhdGNoTWF4KHg6IGludCwgejogaW50KSB7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hYID0geCAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgY29uc3QgcGF0Y2haID0geiAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGF0Y2hNYXgocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRFbnRyaWVzUGF0Y2hNaW5GYWN0b3IoeDogaW50LCB6OiBpbnQpIHtcclxuICAgICAgICBjb25zdCBwYXRjaFggPSB4IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBwYXRjaFogPSB6IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRQYXRjaE1pbkZhY3RvcihwYXRjaFgsIHBhdGNoWik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEVudHJpZXNQYXRjaE1heEZhY3Rvcih4OiBpbnQsIHo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWCA9IHggLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoWiA9IHogLyB0aGlzLl9wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFBhdGNoTWF4RmFjdG9yKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TWluKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzBdLCB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzFdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TWF4KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzJdLCB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzNdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TWluRmFjdG9yKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzBdLCB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzFdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TWF4RmFjdG9yKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzJdLCB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzNdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGF0Y2hNaW4ocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IG1pbk1heEdsb2JhbFNpemUgKyAocGF0Y2hCYXNlWiAqIHRoaXMuX251bVBhdGNoZXNYICsgcGF0Y2hCYXNlWCkgKiBtaW5NYXhTdGFja1NpemU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbaW5kZXhdLCB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzW2luZGV4ICsgMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQYXRjaE1heChwYXRjaEJhc2VYOiBpbnQsIHBhdGNoQmFzZVo6IGludCkge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gbWluTWF4R2xvYmFsU2l6ZSArIChwYXRjaEJhc2VaICogdGhpcy5fbnVtUGF0Y2hlc1ggKyBwYXRjaEJhc2VYKSAqIG1pbk1heFN0YWNrU2l6ZSArIHRoaXMuX3BhdGNoZXNTZWdtZW50U2l6ZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5fbWluTWF4UGF0Y2hlc0Nvb3Jkc1tpbmRleF0sIHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbaW5kZXggKyAxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBhdGNoTWluRmFjdG9yKHBhdGNoQmFzZVg6IGludCwgcGF0Y2hCYXNlWjogaW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSBtaW5NYXhHbG9iYWxTaXplICsgKHBhdGNoQmFzZVogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoQmFzZVgpICogbWluTWF4U3RhY2tTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhY3Rvcih0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzW2luZGV4XSwgdGhpcy5fbWluTWF4UGF0Y2hlc0Nvb3Jkc1tpbmRleCArIDFdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGF0Y2hNYXhGYWN0b3IocGF0Y2hCYXNlWDogaW50LCBwYXRjaEJhc2VaOiBpbnQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IG1pbk1heEdsb2JhbFNpemUgKyAocGF0Y2hCYXNlWiAqIHRoaXMuX251bVBhdGNoZXNYICsgcGF0Y2hCYXNlWCkgKiBtaW5NYXhTdGFja1NpemUgKyB0aGlzLl9wYXRjaGVzU2VnbWVudFNpemU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmFjdG9yKHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbaW5kZXhdLCB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzW2luZGV4ICsgMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWNhbGN1bGF0ZUFBQkIoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbMF0gPSAwO1xyXG4gICAgICAgIHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbMV0gPSAwO1xyXG4gICAgICAgIHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbMl0gPSAwO1xyXG4gICAgICAgIHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbM10gPSAwO1xyXG5cclxuICAgICAgICBsZXQgbWluVmFsdWUgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuICAgICAgICBsZXQgbWF4VmFsdWUgPSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBwYXRjaFogPSAwOyBwYXRjaFogPCB0aGlzLl9udW1QYXRjaGVzWjsgcGF0Y2haKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHBhdGNoWCA9IDA7IHBhdGNoWCA8IHRoaXMuX251bVBhdGNoZXNYOyBwYXRjaFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoSWR4ID0gcGF0Y2haICogdGhpcy5fbnVtUGF0Y2hlc1ggKyBwYXRjaFg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5JbmRleCA9IG1pbk1heEdsb2JhbFNpemUgKyBwYXRjaElkeCAqIG1pbk1heFN0YWNrU2l6ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1heEluZGV4ID0gbWluSW5kZXggKyB0aGlzLl9wYXRjaGVzU2VnbWVudFNpemU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hNaW5WYWx1ZSA9IHRoaXMuZ2V0KHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbbWluSW5kZXhdLCB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzW21pbkluZGV4ICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hNYXhWYWx1ZSA9IHRoaXMuZ2V0KHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbbWF4SW5kZXhdLCB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzW21heEluZGV4ICsgMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBwZXJmb3JtYWNlIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVyZm9ybU1pblBhdGNoZXNWYWx1ZVtwYXRjaElkeF0gPSBwYXRjaE1pblZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVyZm9ybU1heFBhdGNoZXNWYWx1ZVtwYXRjaElkeF0gPSBwYXRjaE1heFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtaW5WYWx1ZSA+IHBhdGNoTWluVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5WYWx1ZSA9IHBhdGNoTWluVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWluTWF4UGF0Y2hlc0Nvb3Jkc1swXSA9IHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbbWluSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbMV0gPSB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzW21pbkluZGV4ICsgMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1heFZhbHVlIDwgcGF0Y2hNYXhWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heFZhbHVlID0gcGF0Y2hNYXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzJdID0gdGhpcy5fbWluTWF4UGF0Y2hlc0Nvb3Jkc1ttYXhJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWluTWF4UGF0Y2hlc0Nvb3Jkc1szXSA9IHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbbWF4SW5kZXggKyAxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjYWxjdWxhdGVNaW5NYXgoem9uZTogSVpvbmUpOiB2b2lkIHtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoem9uZS5tYXhYIDwgMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh6b25lLm1heFogPCAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGZpeGVkTWluWCA9IE1hdGgubWF4KHpvbmUubWluWCwgMCk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRNaW5aID0gTWF0aC5tYXgoem9uZS5taW5aLCAwKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1heFggPSBNYXRoLm1pbih6b25lLm1heFgsIHRoaXMud2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTWF4WiA9IE1hdGgubWluKHpvbmUubWF4WiwgdGhpcy5kZXB0aCk7XHJcblxyXG4gICAgICAgIGxldCBnbG9iYWxNaW5WID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgbGV0IGdsb2JhbE1heFYgPSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcclxuXHJcbiAgICAgICAgbGV0IGdsb2JhbE1pblggPSAwO1xyXG4gICAgICAgIGxldCBnbG9iYWxNaW5aID0gMDtcclxuICAgICAgICBsZXQgZ2xvYmFsTWF4WCA9IDA7XHJcbiAgICAgICAgbGV0IGdsb2JhbE1heFogPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gZml4ZWRNaW5aOyB6IDwgZml4ZWRNYXhaOyB6ICs9IHRoaXMuX3BhdGNoU2l6ZSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IGZpeGVkTWluWDsgeCA8IGZpeGVkTWF4WDsgeCArPSB0aGlzLl9wYXRjaFNpemUpIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hYID0geCAvIHRoaXMuX3BhdGNoU2l6ZSB8IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaFogPSB6IC8gdGhpcy5fcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoSSA9IHBhdGNoWiAqIHRoaXMuX251bVBhdGNoZXNYICsgcGF0Y2hYO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluSWR4ID0gbWluTWF4R2xvYmFsU2l6ZSArIHBhdGNoSSAqIG1pbk1heFN0YWNrU2l6ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1heElkeCA9IG1pbklkeCArIHRoaXMuX3BhdGNoZXNTZWdtZW50U2l6ZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RQYXRjaFggPSBwYXRjaFggKiAodGhpcy5fcGF0Y2hTaXplIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFBhdGNoWiA9IHBhdGNoWiAqICh0aGlzLl9wYXRjaFNpemUgLSAxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQYXRjaFggID0gZmlyc3RQYXRjaFggKyB0aGlzLl9wYXRjaFNpemU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UGF0Y2haICA9IGZpcnN0UGF0Y2haICsgdGhpcy5fcGF0Y2hTaXplO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBtaW5WID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4ViA9IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1pblggPSBmaXJzdFBhdGNoWDtcclxuICAgICAgICAgICAgICAgIGxldCBtaW5aID0gZmlyc3RQYXRjaFo7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4WCA9IGZpcnN0UGF0Y2hYO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1heFogPSBmaXJzdFBhdGNoWjtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbm5lclogPSBmaXJzdFBhdGNoWjsgaW5uZXJaIDwgbGFzdFBhdGNoWjsgaW5uZXJaKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5uZXJYID0gZmlyc3RQYXRjaFg7IGlubmVyWCA8IGxhc3RQYXRjaFg7IGlubmVyWCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0KGlubmVyWCwgaW5uZXJaKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW5WID4gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblYgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblggPSBpbm5lclg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5aID0gaW5uZXJaO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4ViA8IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhWID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhYID0gaW5uZXJYO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WiA9IGlubmVyWjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsTWluViA+IG1pblYpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNaW5WID0gbWluVjtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNaW5YID0gbWluWDtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNaW5aID0gbWluWjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsTWF4ViA8IG1heFYpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNYXhWID0gbWF4VjtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNYXhYID0gbWF4WDtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxNYXhaID0gbWF4WjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzW21pbklkeF0gICAgID0gbWluWDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbbWluSWR4ICsgMV0gPSBtaW5aO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWluTWF4UGF0Y2hlc0Nvb3Jkc1ttYXhJZHhdICAgICA9IG1heFg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzW21heElkeCArIDFdID0gbWF4WjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcGVyZm9ybWFuY2UgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wZXJmb3JtTWluUGF0Y2hlc1ZhbHVlW3BhdGNoSV0gPSBtaW5WO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVyZm9ybU1heFBhdGNoZXNWYWx1ZVtwYXRjaEldID0gbWF4VjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0TWluKCkgPiBnbG9iYWxNaW5WKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21pbk1heFBhdGNoZXNDb29yZHNbMF0gPSBnbG9iYWxNaW5YO1xyXG4gICAgICAgICAgICB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzFdID0gZ2xvYmFsTWluWjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdldE1heCgpIDwgZ2xvYmFsTWF4Vikge1xyXG4gICAgICAgICAgICB0aGlzLl9taW5NYXhQYXRjaGVzQ29vcmRzWzJdID0gZ2xvYmFsTWF4WDtcclxuICAgICAgICAgICAgdGhpcy5fbWluTWF4UGF0Y2hlc0Nvb3Jkc1szXSA9IGdsb2JhbE1heFo7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgSGVpZ2h0TWFwQXJyVHlwZSwgZGVmYXVsdEhlaWdodFZlcnRleFNpemUsIHR5cGUgSVJlYWRvbmx5SGVpZ2h0TWFwIH0gZnJvbSBcIi4vSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBBYnNTaGF0dGVyZWRIZWlnaHRNYXAsIHR5cGUgSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzU2hhdHRlcmVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlBYnNDaHVua2VkSGVpZ2h0TWFwIGV4dGVuZHMgSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwIHtcclxuXHJcbiAgICByZWFkb25seSBkYXRhQ2h1bmtTaXplOiBpbnQ7XHJcbiAgICByZWFkb25seSBkYXRhTnVtQ2h1bmtzWDogaW50O1xyXG4gICAgcmVhZG9ubHkgZGF0YU51bUNodW5rc1o6IGludDtcclxuICAgIHJlYWRvbmx5IGRhdGFDaHVua1NpemVGYWN0b3I6IGZsb2F0O1xyXG5cclxuICAgIGdldENodW5rSW5kZXgoY2h1bmtYOiBpbnQsIGNodW5rWjogaW50KTogaW50O1xyXG4gICAgZ2V0Q2h1bmtCdWZmZXIodHlwZTogRmxvYXQzMkFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IEZsb2F0MzJBcnJheTtcclxuICAgIGdldENodW5rQnVmZmVyKHR5cGU6IFVpbnQxNkFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IFVpbnQxNkFycmF5O1xyXG4gICAgZ2V0Q2h1bmtCdWZmZXIodHlwZTogVWludDhBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBVaW50OEFycmF5O1xyXG4gICAgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcik6IEZsb2F0MzJBcnJheVtdO1xyXG4gICAgZ2V0Q2h1bmtzQnVmZmVycyh0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yKTogVWludDE2QXJyYXlbXTtcclxuICAgIGdldENodW5rc0J1ZmZlcnModHlwZTogVWludDhBcnJheUNvbnN0cnVjdG9yKTogVWludDhBcnJheVtdO1xyXG5cclxuICAgIGdldENodW5rQnVmZmVyPFQgZXh0ZW5kcyBGbG9hdDMyQXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQxNkFycmF5Q29uc3RydWN0b3IgfCBVaW50OEFycmF5Q29uc3RydWN0b3I+KHR5cGU6IFQsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IGFueTtcclxuICAgIGdldENodW5rc0J1ZmZlcnM8VCBleHRlbmRzIEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yIHwgVWludDE2QXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQ4QXJyYXlDb25zdHJ1Y3Rvcj4odHlwZTogVCk6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVhZG9ubHlBYnNDaHVua2VkSGVpZ2h0TWFwVHlwcGVkPFREYXRhIGV4dGVuZHMgRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50OEFycmF5ID0gSGVpZ2h0TWFwQXJyVHlwZT4gZXh0ZW5kcyBJUmVhZG9ubHlBYnNDaHVua2VkSGVpZ2h0TWFwLCBJUmVhZG9ubHlIZWlnaHRNYXA8VERhdGE+IHtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1pbk1heFN0YWNrU2l6ZSA9IDI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUocGF0Y2hTaXplOiBpbnQsIGRhdGFDaHVua1NpemU6IGludCkge1xyXG5cclxuICAgIGlmICgoZGF0YUNodW5rU2l6ZSAtIDEpICUgKHBhdGNoU2l6ZSAtIDEpICE9PSAwKSB7XHJcbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRXaWR0aCA9ICgoZGF0YUNodW5rU2l6ZSAtIDEgKyBwYXRjaFNpemUgLSAxKSAvIChkYXRhQ2h1bmtTaXplIC0gMSkpICogKHBhdGNoU2l6ZSAtIDEpICsgMTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YUNodW5rU2l6ZSBtaW51cyAxICglZCkgbXVzdCBiZSBkaXZpc2libGUgYnkgcGF0Y2hTaXplIG1pbnVzIDEgKCVkKVxcblwiLCBkYXRhQ2h1bmtTaXplLCBwYXRjaFNpemUpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUcnkgdXNpbmcgRGF0YUNodW5rU2l6ZSA9ICVkXFxuXCIsIHJlY29tbWVuZGVkV2lkdGgpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhQ2h1bmtTaXplO1xyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzQ2h1bmtlZEhlaWdodE1hcDxURGF0YSBleHRlbmRzIEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSA9IEhlaWdodE1hcEFyclR5cGU+IGV4dGVuZHMgQWJzU2hhdHRlcmVkSGVpZ2h0TWFwPFREYXRhPiBpbXBsZW1lbnRzIElSZWFkb25seUFic0NodW5rZWRIZWlnaHRNYXBUeXBwZWQ8VERhdGE+IHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgX3BhdGNoZXNTZWdtZW50U2l6ZTogaW50O1xyXG4gICAgcHJvdGVjdGVkIF9taW5NYXhQYXRjaGVzQ29vcmRzOiBpbnRbXTtcclxuICAgIHByb3RlY3RlZCBfbWluSGVpZ2h0Q29vcmQ6IGludFtdO1xyXG4gICAgcHJvdGVjdGVkIF9tYXhIZWlnaHRDb29yZDogaW50W107XHJcbiAgICBwcm90ZWN0ZWQgX2RhdGFDaHVua1NpemU6IGludDtcclxuICAgIHByb3RlY3RlZCBfZGF0YUNodW5rU2l6ZVAyOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX2RhdGFOdW1DaHVua3NYOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX2RhdGFOdW1DaHVua3NaOiBpbnQ7XHJcbiAgICBwcm90ZWN0ZWQgX2RhdGFDaHVua1NpemVGYWN0b3I6IGZsb2F0O1xyXG5cclxuICAgIHB1YmxpYyBnZXQgZGF0YUNodW5rU2l6ZSgpICAgICAgIHsgcmV0dXJuIHRoaXMuX2RhdGFDaHVua1NpemU7IH1cclxuICAgIHB1YmxpYyBnZXQgZGF0YU51bUNodW5rc1goKSAgICAgIHsgcmV0dXJuIHRoaXMuX2RhdGFOdW1DaHVua3NYOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRhdGFOdW1DaHVua3NaKCkgICAgICB7IHJldHVybiB0aGlzLl9kYXRhTnVtQ2h1bmtzWjsgfVxyXG4gICAgcHVibGljIGdldCBkYXRhQ2h1bmtTaXplRmFjdG9yKCkgeyByZXR1cm4gdGhpcy5fZGF0YUNodW5rU2l6ZUZhY3RvcjsgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgZGF0YUNodW5rU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0KTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgZGF0YUNodW5rU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI6IFREYXRhLCBpdGVtU2l6ZT86IGludCwgaXRlbUhlaWdodEluZGV4T2Zmc2V0PzogaW50KTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogaW50LCBkZXB0aDogaW50LCBwYXRjaFNpemU6IGludCwgZGF0YUNodW5rU2l6ZTogaW50LCBtYXhIZWlnaHQ6IGZsb2F0LCBidWZmZXI/OiBURGF0YSB8IHVuZGVmaW5lZCwgaXRlbVNpemU6IGludCA9IGRlZmF1bHRIZWlnaHRWZXJ0ZXhTaXplLCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ6IGludCA9IDApIHtcclxuICAgICAgICBzdXBlcih3aWR0aCwgZGVwdGgsIHBhdGNoU2l6ZSwgbWF4SGVpZ2h0LCBidWZmZXIhIC8qKiBUUyBodWNrICovLCBpdGVtU2l6ZSwgaXRlbUhlaWdodEluZGV4T2Zmc2V0KTtcclxuICAgICAgICB0aGlzLl9zZXREYXRhQ2h1bmtTaXplKGRhdGFDaHVua1NpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfc2V0RGF0YUNodW5rU2l6ZSh2YWx1ZTogaW50KSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YUNodW5rU2l6ZSAgPSBnZXRPclRocm93RGF0YUNodW5rU2l6ZSh0aGlzLl9wYXRjaFNpemUsIHZhbHVlKTtcclxuICAgICAgICB0aGlzLl9kYXRhQ2h1bmtTaXplUDIgPSB0aGlzLmRhdGFDaHVua1NpemUgKiogMjtcclxuICAgICAgICB0aGlzLl9kYXRhTnVtQ2h1bmtzWCA9ICgodGhpcy53aWR0aCAtIDEpIC8gKHRoaXMuX2RhdGFDaHVua1NpemUgLSAxKSkgfCAwO1xyXG4gICAgICAgIHRoaXMuX2RhdGFOdW1DaHVua3NaID0gKCh0aGlzLmRlcHRoIC0gMSkgLyAodGhpcy5fZGF0YUNodW5rU2l6ZSAtIDEpKSB8IDA7XHJcbiAgICAgICAgdGhpcy5fZGF0YUNodW5rU2l6ZUZhY3RvciA9IHRoaXMuX3BhdGNoU2l6ZSA9PT0gdGhpcy5fZGF0YUNodW5rU2l6ZVxyXG4gICAgICAgICAgICA/IDEuMFxyXG4gICAgICAgICAgICA6IHRoaXMuX3BhdGNoU2l6ZSAvICh0aGlzLl9kYXRhQ2h1bmtTaXplICsgdGhpcy5fcGF0Y2hTaXplIC0gKHRoaXMuX2RhdGFDaHVua1NpemUgJSB0aGlzLl9wYXRjaFNpemUpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIG92ZXJyaWRlIGdldEluZGV4KHg6IGludCwgejogaW50KTogaW50IHtcclxuXHJcbiAgICAgICAgY29uc3QgbG9jYWxYID0geCAlIHRoaXMuX2RhdGFDaHVua1NpemU7XHJcbiAgICAgICAgY29uc3QgbG9jYWxaID0geiAlIHRoaXMuX2RhdGFDaHVua1NpemU7XHJcbiAgICAgICAgY29uc3QgY2h1bmtYID0geCAvIHRoaXMuX2RhdGFDaHVua1NpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IGNodW5rWiA9IHogLyB0aGlzLl9kYXRhQ2h1bmtTaXplIHwgMDtcclxuXHJcbiAgICAgICAgY29uc3QgY2h1bmtPZmZzZXQgPSAoY2h1bmtaICogdGhpcy5fZGF0YU51bUNodW5rc1ggKyBjaHVua1gpICogdGhpcy5fZGF0YUNodW5rU2l6ZVAyO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsSW5kZXggID0gKGxvY2FsWiAqIHRoaXMuX2RhdGFDaHVua1NpemUgKyBsb2NhbFgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2h1bmtPZmZzZXQgKyBsb2NhbEluZGV4O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtJbmRleChjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBpbnQge1xyXG4gICAgICAgIHJldHVybiBjaHVua1ogKiB0aGlzLl9kYXRhTnVtQ2h1bmtzWCArIGNodW5rWDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtCdWZmZXIodHlwZTogRmxvYXQzMkFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IEZsb2F0MzJBcnJheTtcclxuICAgIHB1YmxpYyBnZXRDaHVua0J1ZmZlcih0eXBlOiBVaW50MTZBcnJheUNvbnN0cnVjdG9yLCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpOiBVaW50MTZBcnJheTtcclxuICAgIHB1YmxpYyBnZXRDaHVua0J1ZmZlcih0eXBlOiBVaW50OEFycmF5Q29uc3RydWN0b3IsIGNodW5rWDogaW50LCBjaHVua1o6IGludCk6IFVpbnQ4QXJyYXk7XHJcbiAgICBwdWJsaWMgZ2V0Q2h1bmtCdWZmZXIodHlwZTogYW55LCBjaHVua1g6IGludCwgY2h1bmtaOiBpbnQpIHtcclxuICAgICAgICBjb25zdCBjaHVua0luZGV4ICA9IHRoaXMuZ2V0Q2h1bmtJbmRleChjaHVua1gsIGNodW5rWik7XHJcbiAgICAgICAgY29uc3QgY2h1bmtPZmZzZXQgPSB0aGlzLl9kYXRhQ2h1bmtTaXplUDIgKiBjaHVua0luZGV4ICogdGhpcy5kYXRhLkJZVEVTX1BFUl9FTEVNRU5UO1xyXG4gICAgICAgIGNvbnN0IGNvdW50ICAgICAgID0gdGhpcy5fZGF0YUNodW5rU2l6ZVAyICogKHRoaXMuZGF0YS5CWVRFU19QRVJfRUxFTUVOVCAvIHR5cGUuQllURVNfUEVSX0VMRU1FTlQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgdHlwZSh0aGlzLmRhdGEuYnVmZmVyLCB0aGlzLmRhdGEuYnl0ZU9mZnNldCArIGNodW5rT2Zmc2V0LCBjb3VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENodW5rc0J1ZmZlcnModHlwZTogRmxvYXQzMkFycmF5Q29uc3RydWN0b3IpOiBGbG9hdDMyQXJyYXlbXTtcclxuICAgIHB1YmxpYyBnZXRDaHVua3NCdWZmZXJzKHR5cGU6IFVpbnQxNkFycmF5Q29uc3RydWN0b3IpOiBVaW50MTZBcnJheVtdO1xyXG4gICAgcHVibGljIGdldENodW5rc0J1ZmZlcnModHlwZTogVWludDhBcnJheUNvbnN0cnVjdG9yKTogVWludDhBcnJheVtdO1xyXG4gICAgcHVibGljIGdldENodW5rc0J1ZmZlcnModHlwZTogYW55KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBBcnJheSh0aGlzLl9kYXRhTnVtQ2h1bmtzWCAqIHRoaXMuX2RhdGFOdW1DaHVua3NaKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgY2h1bmtaID0gMDsgY2h1bmtaIDwgdGhpcy5fZGF0YU51bUNodW5rc1o7IGNodW5rWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBjaHVua1ggPSAwOyBjaHVua1ggPCB0aGlzLl9kYXRhTnVtQ2h1bmtzWDsgY2h1bmtYKyspIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldENodW5rSW5kZXgoY2h1bmtYLCBjaHVua1opO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IHRoaXMuZ2V0Q2h1bmtCdWZmZXIodHlwZSwgY2h1bmtYLCBjaHVua1opO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFic0NodW5rZWRIZWlnaHRNYXA7IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IEFic0NodW5rZWRIZWlnaHRNYXAsIHsgZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUsIElSZWFkb25seUFic0NodW5rZWRIZWlnaHRNYXBUeXBwZWQgfSBmcm9tIFwiLi9BYnNDaHVua2VkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBkZWZhdWx0SGVpZ2h0VmVydGV4U2l6ZSB9IGZyb20gXCIuL0hlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFRWYWx1ZVR5cGUgPSBcIjMyZlwiIHwgXCIxNnVcIiB8IFwiOHVcIjtcclxuZXhwb3J0IHR5cGUgVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUIGV4dGVuZHMgVFZhbHVlVHlwZT4gPVxyXG4gICAgVCBleHRlbmRzIFwiMzJmXCIgPyBGbG9hdDMyQXJyYXkgOlxyXG4gICAgVCBleHRlbmRzIFwiMTZ1XCIgPyBVaW50MTZBcnJheSA6XHJcbiAgICBUIGV4dGVuZHMgXCI4dVwiID8gVWludDhBcnJheSA6XHJcbiAgICBuZXZlcjtcclxuXHJcbi8vIFdlIHN0b3JlIHRoZSByYXcgaGVpZ2h0IG9ubHkgZm9yIGZsb2F0MzI7IGZvciBvdGhlciB0eXBlcywgd2Ugc3RvcmUgYSBmYWN0b3IgaW4gbWVtb3J5LlxyXG5cclxuZXhwb3J0IGNsYXNzIFBhdGNoZWRIZWlnaHRNYXA8VFRWYWx1ZVR5cGUgZXh0ZW5kcyBUVmFsdWVUeXBlPlxyXG4gICAgIGV4dGVuZHMgQWJzQ2h1bmtlZEhlaWdodE1hcDxUSGVpZ2h0TWFwQXJyYXlUeXBlQmFnPFRUVmFsdWVUeXBlPj5cclxuICBpbXBsZW1lbnRzIElSZWFkb25seUFic0NodW5rZWRIZWlnaHRNYXBUeXBwZWQ8VEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVFZhbHVlVHlwZT4+IHtcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfdmFsdWVUeXBlOiBUVFZhbHVlVHlwZTtcclxuICAgIHByaXZhdGUgX21heFNhZmVGYWN0b3I6IGludDtcclxuICAgIHByaXZhdGUgX2hlaWdodERlY29kZXJWYWx1ZTogZmxvYXQ7XHJcbiAgICBwcml2YXRlIF9uZXRNYXhIZWlnaHQ6IGZsb2F0IHwgbnVsbDtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IG5ldE1heEhlaWdodCgpIHsgcmV0dXJuIHRoaXMuX25ldE1heEhlaWdodDsgfVxyXG4gICAgcHVibGljIGdldCB2YWx1ZVR5cGUoKTogVFZhbHVlVHlwZSB7IHJldHVybiB0aGlzLl92YWx1ZVR5cGU7IH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUJ1ZmZlcjxUVFZhbHVlVHlwZSBleHRlbmRzIFRWYWx1ZVR5cGU+KHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIGNodW5rU2l6ZTogaW50LCB2YWx1ZVR5cGU6IFRUVmFsdWVUeXBlKTogVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVFZhbHVlVHlwZT4ge1xyXG5cclxuICAgICAgICBjb25zdCBudW1DaHVua3NYICAgPSAoKHdpZHRoIC0gMSkgLyAoY2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICBjb25zdCBudW1DaHVua3NaICAgPSAoKGRlcHRoIC0gMSkgLyAoY2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgICAgICBjb25zdCBjaHVua0FyclNpemUgPSBjaHVua1NpemUgKiogMjtcclxuICAgICAgICBjb25zdCBjaHVua0NvdW50ICAgPSBudW1DaHVua3NYICogbnVtQ2h1bmtzWjtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdmFsdWVUeXBlID09PSBcIjMyZlwiID8gbmV3IEZsb2F0MzJBcnJheShjaHVua0FyclNpemUgKiBjaHVua0NvdW50KSA6XHJcbiAgICAgICAgICAgIHZhbHVlVHlwZSA9PT0gXCIxNnVcIiA/IG5ldyBVaW50MTZBcnJheShjaHVua0FyclNpemUgKiBjaHVua0NvdW50KSA6XHJcbiAgICAgICAgICAgIHZhbHVlVHlwZSA9PT0gXCI4dVwiICA/IG5ldyBVaW50OEFycmF5KGNodW5rQXJyU2l6ZSAqIGNodW5rQ291bnQpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBGbG9hdDMyQXJyYXkoY2h1bmtBcnJTaXplICogY2h1bmtDb3VudClcclxuICAgICAgICApIGFzIHVua25vd24gYXMgVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVFZhbHVlVHlwZT47XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIHBhdGNoU2l6ZTogaW50LCBkYXRhQ2h1bmtTaXplOiBpbnQsIG1heEhlaWdodDogZmxvYXQsIHZhbHVlVHlwZTogVFRWYWx1ZVR5cGUpO1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIHBhdGNoU2l6ZTogaW50LCBkYXRhQ2h1bmtTaXplOiBpbnQsIG1heEhlaWdodDogZmxvYXQsIHZhbHVlVHlwZTogVFRWYWx1ZVR5cGUsIGJ1ZmZlcjogVEhlaWdodE1hcEFycmF5VHlwZUJhZzxUVFZhbHVlVHlwZT4sIGl0ZW1TaXplPzogaW50LCBpdGVtSGVpZ2h0SW5kZXhPZmZzZXQ/OiBpbnQpO1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHdpZHRoOiBpbnQsIGRlcHRoOiBpbnQsIHBhdGNoU2l6ZTogaW50LCBkYXRhQ2h1bmtTaXplOiBpbnQsIG1heEhlaWdodDogZmxvYXQsIHZhbHVlVHlwZTogVFRWYWx1ZVR5cGUsIGJ1ZmZlcj86IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRWYWx1ZVR5cGU+LCBpdGVtU2l6ZTogaW50ID0gZGVmYXVsdEhlaWdodFZlcnRleFNpemUsIGl0ZW1IZWlnaHRJbmRleE9mZnNldDogaW50ID0gMCkge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkRGF0YUNodW5rU2l6ZSA9IGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplKHBhdGNoU2l6ZSwgZGF0YUNodW5rU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgdG1wQnVmZmVyID0gYnVmZmVyID8/IFBhdGNoZWRIZWlnaHRNYXAuY3JlYXRlQnVmZmVyKHdpZHRoLCBkZXB0aCwgdmFsaWREYXRhQ2h1bmtTaXplLCB2YWx1ZVR5cGUpO1xyXG4gICAgICAgIHN1cGVyKHdpZHRoLCBkZXB0aCwgcGF0Y2hTaXplLCBkYXRhQ2h1bmtTaXplLCBtYXhIZWlnaHQsIHRtcEJ1ZmZlciwgaXRlbVNpemUsIGl0ZW1IZWlnaHRJbmRleE9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5fbmV0TWF4SGVpZ2h0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl92YWx1ZVR5cGUgPSB2YWx1ZVR5cGU7XHJcbiAgICAgICAgdGhpcy5fbWF4U2FmZUZhY3RvciA9XHJcbiAgICAgICAgICAgIHZhbHVlVHlwZSA9PT0gXCIzMmZcIiA/IDEuMCA6XHJcbiAgICAgICAgICAgIHZhbHVlVHlwZSA9PT0gXCIxNnVcIiA/IDB4ZmZmZiA6XHJcbiAgICAgICAgICAgIHZhbHVlVHlwZSA9PT0gXCI4dVwiICA/IDB4ZmYgOlxyXG4gICAgICAgICAgICAxLjA7XHJcbiAgICAgICAgdGhpcy5fcmVjYWxjdWxhdGVEZWNvZGVyVmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgc2V0TWF4SGVpZ2h0KG1heEhlaWdodDogZmxvYXQpIHtcclxuXHJcbiAgICAgICAgLy8gU2F2ZSBsYXN0IG5ldCBtYXggaGVpZ2h0XHJcbiAgICAgICAgaWYgKHRoaXMuX3ZhbHVlVHlwZSA9PT0gJzMyZicgJiZcclxuICAgICAgICAgICAgdGhpcy5fbmV0TWF4SGVpZ2h0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25ldE1heEhlaWdodCA9IHRoaXMubWF4SGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2F2ZSBwcmV2IHZhbHVlXHJcbiAgICAgICAgc3VwZXIuc2V0TWF4SGVpZ2h0KG1heEhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5fcmVjYWxjdWxhdGVEZWNvZGVyVmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3JlY2FsY3VsYXRlRGVjb2RlclZhbHVlKCkge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodERlY29kZXJWYWx1ZSA9IHRoaXMubWF4SGVpZ2h0IC8gdGhpcy5fbWF4U2FmZUZhY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlVmFsdWVzQnlNYXhIZWlnaHQoKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIC8vIE5vIGRpcnR5IGRhdGFcclxuICAgICAgICBpZiAodGhpcy5fbmV0TWF4SGVpZ2h0ID09PSBudWxsIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlVHlwZSAhPT0gJzMyZicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgICBjb25zdCBsZW4gID0gdGhpcy5kYXRhLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBtYXggID0gdGhpcy5tYXhIZWlnaHQ7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gTm9ybWFsaXplIGZvciBuZXcgbWF4XHJcbiAgICAgICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldIC8gdGhpcy5fbmV0TWF4SGVpZ2h0ICogbWF4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbmV0TWF4SGVpZ2h0ID09PSBudWxsO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfZW5jb2RlSGVpZ2h0KHN0b3JlOiBUSGVpZ2h0TWFwQXJyYXlUeXBlQmFnPFRUVmFsdWVUeXBlPiwgaW5kZXg6IGludCwgdmFsdWU6IGZsb2F0LCBtYXg6IGZsb2F0KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZSA9IE1hdGgubWF4KE1hdGgubWluKHZhbHVlLCBtYXgpLCAwKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3ZhbHVlVHlwZSA9PT0gJzMyZicpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIElzIG5vdCBkaXJ0eSBtYXggaGVpZ2h0ID9cclxuICAgICAgICAgICAgaWYgKHRoaXMuX25ldE1heEhlaWdodCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgc3RvcmVbaW5kZXhdID0gbm9ybWFsaXplO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gY29udmVydCB0byBuZXRcclxuICAgICAgICAgICAgICAgIHN0b3JlW2luZGV4XSA9IG5vcm1hbGl6ZSAvIG1heCAqIHRoaXMuX25ldE1heEhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc2F2ZSBmYWN0b3IgZm9yIG5vdCBmbG9hdDMyIHZhbHVlIHR5cGVcclxuICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gbm9ybWFsaXplIC8gbWF4O1xyXG4gICAgICAgICAgICBzdG9yZVtpbmRleF0gPSBNYXRoLm1pbihmYWN0b3IgKiB0aGlzLl9tYXhTYWZlRmFjdG9yLCB0aGlzLl9tYXhTYWZlRmFjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG92ZXJyaWRlIF9kZWNvZGVIZWlnaHQoc3RvcmU6IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRWYWx1ZVR5cGU+LCBpbmRleDogaW50LCBtYXg6IGZsb2F0KSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl92YWx1ZVR5cGUgPT09ICczMmYnKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fbmV0TWF4SGVpZ2h0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVbaW5kZXhdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBOb3JtYWxpemUgZm9yIGRpcnR5IG1heCBoZWlnaHRcclxuICAgICAgICAgICAgcmV0dXJuIHN0b3JlW2luZGV4XSAvIHRoaXMuX25ldE1heEhlaWdodCAqIG1heDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzdG9yZVtpbmRleF0gKiB0aGlzLl9oZWlnaHREZWNvZGVyVmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG92ZXJyaWRlIF9kZWNvZGVIZWlnaHRGYWN0b3Ioc3RvcmU6IFRIZWlnaHRNYXBBcnJheVR5cGVCYWc8VFRWYWx1ZVR5cGU+LCBpbmRleDogaW50LCBtYXg6IGZsb2F0KSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl92YWx1ZVR5cGUgPT09ICczMmYnKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fbmV0TWF4SGVpZ2h0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVbaW5kZXhdIC8gbWF4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RvcmVbaW5kZXhdIC8gdGhpcy5fbmV0TWF4SGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN0b3JlW2luZGV4XSAvIHRoaXMuX21heFNhZmVGYWN0b3I7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBhdGNoZWRIZWlnaHRNYXA7IiwiaW1wb3J0IHsgZ2V0T3JUaHJvd0RhdGFDaHVua1NpemUgfSBmcm9tIFwiLi4vQ29yZS9BYnNDaHVua2VkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBUVmFsdWVUeXBlIH0gZnJvbSBcIi4uL0NvcmUvUGF0Y2hlZEhlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFRUVDxUIGV4dGVuZHMgVFZhbHVlVHlwZT4gPVxyXG4gICAgVCBleHRlbmRzICczMmYnID8gRmxvYXQzMkFycmF5IDpcclxuICAgIFQgZXh0ZW5kcyAnMTZ1JyA/IFVpbnQxNkFycmF5IDpcclxuICAgIFQgZXh0ZW5kcyAnOHUnICA/IFVpbnQ4QXJyYXkgOlxyXG4gICAgbmV2ZXI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnVmZmVyPFRUVmFsdWVUeXBlIGV4dGVuZHMgVFZhbHVlVHlwZT4oXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgZGVwdGg6IG51bWJlcixcclxuICAgIHBhdGNoU2l6ZTogbnVtYmVyLFxyXG4gICAgZGF0YUNodW5rU2l6ZTogbnVtYmVyLFxyXG4gICAgdmFsdWVUeXBlOiBUVFZhbHVlVHlwZVxyXG4pOiBUVFQ8VFRWYWx1ZVR5cGU+IHtcclxuXHJcbiAgICBpZiAodHlwZW9mIEFtbW8gPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQW1tbyBub3QgZXhpc3RzXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNodW5rU2l6ZSAgICA9IGdldE9yVGhyb3dEYXRhQ2h1bmtTaXplKHBhdGNoU2l6ZSwgZGF0YUNodW5rU2l6ZSk7XHJcbiAgICBjb25zdCBudW1DaHVua3NYICAgPSAoKHdpZHRoIC0gMSkgLyAoY2h1bmtTaXplIC0gMSkpIHwgMDtcclxuICAgIGNvbnN0IG51bUNodW5rc1ogICA9ICgoZGVwdGggLSAxKSAvIChjaHVua1NpemUgLSAxKSkgfCAwO1xyXG4gICAgY29uc3QgY2h1bmtBcnJTaXplID0gY2h1bmtTaXplICoqIDI7XHJcbiAgICBjb25zdCBjaHVua0NvdW50ICAgPSBudW1DaHVua3NYICogbnVtQ2h1bmtzWjtcclxuICAgIGNvbnN0IGJzeiA9IHZhbHVlVHlwZSA9PT0gXCIzMmZcIiA/IDQgOlxyXG4gICAgICAgICAgICAgICAgdmFsdWVUeXBlID09PSBcIjE2dVwiID8gMiA6XHJcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGUgPT09IFwiOHVcIiAgPyAxIDogMDtcclxuICAgIFxyXG4gICAgY29uc3QgbGVuID0gY2h1bmtBcnJTaXplICogY2h1bmtDb3VudDtcclxuICAgIGNvbnN0IHB0ciA9IEFtbW8uX21hbGxvYyhic3ogKiBsZW4pO1xyXG4gICAgXHJcbiAgICBzd2l0Y2ggKHZhbHVlVHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCIzMmZcIjogcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoQW1tby5IRUFQRjMyLmJ1ZmZlciwgcHRyLCBsZW4pIGFzIHVua25vd24gYXMgVFRUPFRUVmFsdWVUeXBlPjtcclxuICAgICAgICBjYXNlIFwiMTZ1XCI6IHJldHVybiBuZXcgVWludDE2QXJyYXkoQW1tby5IRUFQVTE2LmJ1ZmZlciwgcHRyLCBsZW4pIGFzIHVua25vd24gYXMgVFRUPFRUVmFsdWVUeXBlPjtcclxuICAgICAgICBjYXNlIFwiOHVcIjogIHJldHVybiBuZXcgVWludDhBcnJheShBbW1vLkhFQVBVOC5idWZmZXIsIHB0ciwgbGVuKSBhcyB1bmtub3duIGFzIFRUVDxUVFZhbHVlVHlwZT47XHJcbiAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgdmFsdWUgdHlwZVwiKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IElWZWN0b3IyLCBJVmVjdG9yMywgUmVmT2JqZWN0LCBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IEFic0hlaWdodE1hcCwgeyBJUmVhZG9ubHlBYnNIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNIZWlnaHRNYXAubWpzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWZXJ0ZXhIZWlnaHRzSW5mbyB7XHJcbiAgICBtYXhIZWlnaHQ6IGZsb2F0O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDb29yZHNSZWFkZXIge1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGdldFBvc2l0aW9uKGluZGV4OiBpbnQsIGJ1ZjogUmVmT2JqZWN0PElWZWN0b3IzPik6IGJvb2xlYW47XHJcbiAgICBnZXRQb3NpdGlvbldpdGhIZWlnaHRCeUZhY3RvcihpbmRleDogaW50LCBidWY6IFJlZk9iamVjdDxJVmVjdG9yMz4pOiBib29sZWFuO1xyXG4gICAgZ2V0Q29vcmRzKGluZGV4OiBpbnQsIGJ1ZjogUmVmT2JqZWN0PElWZWN0b3IzPik6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlYWRvbmx5Q29vcmRzQnVmZmVyIGV4dGVuZHMgSUNvb3Jkc1JlYWRlciB7XHJcblxyXG4gICAgcmVhZG9ubHkgaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNIZWlnaHRNYXA7XHJcbiAgICByZWFkb25seSBwYXRjaFZlcnRleEJ1ZmZlckxlbmd0aDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgcGF0Y2hWZXJ0ZXhCdWZmZXJUeXBlZDogVWludDE2QXJyYXkgfCBVaW50OEFycmF5O1xyXG4gICAgcmVhZG9ubHkgcGF0Y2hWZXJ0ZXhCdWZmZXJEYXRhOiBSZWFkb25seTxBcnJheUJ1ZmZlcj47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjb29yZHNWZXJ0ZXhTaXplID0gMjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb29yZHNCdWZmZXIgaW1wbGVtZW50cyBJUmVhZG9ubHlDb29yZHNCdWZmZXIge1xyXG4gICAgXHJcbiAgICBwcml2YXRlIF93aWR0aDogaW50O1xyXG4gICAgcHJpdmF0ZSBfZGVwdGg6IGludDtcclxuICAgIHByaXZhdGUgX3BhdGNoU2l6ZTogaW50O1xyXG4gICAgcHJpdmF0ZSBfZGF0YTogQXJyYXlCdWZmZXI7XHJcbiAgICBwcml2YXRlIF9kYXRhVHlwZWQ6IFVpbnQxNkFycmF5O1xyXG4gICAgcHJpdmF0ZSBfbGVuZ3RoOiBudW1iZXI7XHJcblxyXG4gICAgcmVhZG9ubHkgaGVpZ2h0TWFwOiBBYnNIZWlnaHRNYXA7XHJcblxyXG4gICAgcHVibGljIGdldCBwYXRjaFZlcnRleEJ1ZmZlckxlbmd0aCgpIHsgcmV0dXJuIHRoaXMuX2xlbmd0aDsgfVxyXG4gICAgcHVibGljIGdldCBwYXRjaFZlcnRleEJ1ZmZlckRhdGEoKSAgIHsgcmV0dXJuIHRoaXMuX2RhdGE7IH1cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hWZXJ0ZXhCdWZmZXJUeXBlZCgpICB7IHJldHVybiB0aGlzLl9kYXRhVHlwZWQ7IH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHdpZHRoKCkgICAgICAgeyByZXR1cm4gdGhpcy5fd2lkdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgZGVwdGgoKSAgICAgICB7IHJldHVybiB0aGlzLl9kZXB0aDsgfVxyXG4gICAgcHVibGljIGdldCBwYXRjaFNpemUoKSAgIHsgcmV0dXJuIHRoaXMuX3BhdGNoU2l6ZTsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGhlaWdodE1hcDogQWJzSGVpZ2h0TWFwLCBwYXRjaFNpemU6IG51bWJlcikge1xyXG5cclxuICAgICAgICB0aGlzLmhlaWdodE1hcCAgPSBoZWlnaHRNYXA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fcGF0Y2hTaXplID0gcGF0Y2hTaXplO1xyXG4gICAgICAgIHRoaXMuX3dpZHRoID0gaGVpZ2h0TWFwLndpZHRoO1xyXG4gICAgICAgIHRoaXMuX2RlcHRoID0gaGVpZ2h0TWFwLmRlcHRoO1xyXG4gICAgICAgIHRoaXMuX2xlbmd0aCA9IHRoaXMuX3BhdGNoU2l6ZSAqIHRoaXMuX3BhdGNoU2l6ZTtcclxuXHJcbiAgICAgICAgY29uc3QgY29vcmRzQXJyTGVuZ3RoICA9IHRoaXMuX2xlbmd0aCAqIGNvb3Jkc1ZlcnRleFNpemU7XHJcbiAgICAgICAgY29uc3QgY29vcmRzQnl0ZUxlbmd0aCA9IGNvb3Jkc0Fyckxlbmd0aCAqIFVpbnQxNkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xyXG5cclxuICAgICAgICB0aGlzLl9kYXRhICAgICAgPSBuZXcgQXJyYXlCdWZmZXIoY29vcmRzQnl0ZUxlbmd0aCk7XHJcbiAgICAgICAgdGhpcy5fZGF0YVR5cGVkID0gbmV3IFVpbnQxNkFycmF5KHRoaXMuX2RhdGEsIDAsIGNvb3Jkc0Fyckxlbmd0aCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBpbml0KCkge1xyXG5cclxuICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHRoaXMuX3BhdGNoU2l6ZTsgeisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuX3BhdGNoU2l6ZTsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YVR5cGVkW2luZGV4KytdID0geDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFUeXBlZFtpbmRleCsrXSA9IHo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXRQb3NpdGlvbihpbmRleDogaW50LCBidWY6IFJlZk9iamVjdDxJVmVjdG9yMz4pIHtcclxuXHJcbiAgICAgICAgY29uc3QgeCA9IGluZGV4ICUgdGhpcy5fd2lkdGggfCAwO1xyXG4gICAgICAgIGNvbnN0IHogPSBpbmRleCAvIHRoaXMuX3dpZHRoIHwgMDtcclxuXHJcbiAgICAgICAgYnVmLnggPSB4O1xyXG4gICAgICAgIGJ1Zi55ID0gdGhpcy5oZWlnaHRNYXAuZ2V0KHgsIHopO1xyXG4gICAgICAgIGJ1Zi56ID0gejtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UG9zaXRpb25XaXRoSGVpZ2h0QnlGYWN0b3IoaW5kZXg6IGludCwgYnVmOiBSZWZPYmplY3Q8SVZlY3RvcjM+KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIHRoaXMuX3dpZHRoIHwgMDtcclxuICAgICAgICBjb25zdCB6ID0gaW5kZXggLyB0aGlzLl93aWR0aCB8IDA7XHJcblxyXG4gICAgICAgIGJ1Zi54ID0geDtcclxuICAgICAgICBidWYueSA9IHRoaXMuaGVpZ2h0TWFwLmdldEZhY3Rvcih4LCB6KTtcclxuICAgICAgICBidWYueiA9IHo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvb3JkcyhpbmRleDogbnVtYmVyLCBidWY6IElWZWN0b3IzKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIHRoaXMuX3dpZHRoIHwgMDtcclxuICAgICAgICBjb25zdCB6ID0gaW5kZXggLyB0aGlzLl93aWR0aCB8IDA7XHJcblxyXG4gICAgICAgIGJ1Zi54ID0geDtcclxuICAgICAgICBidWYueiA9IHo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvb3Jkc0J1ZmZlcjsiLCJpbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IExFRlQgICA9IDI7XHJcbmV4cG9ydCBjb25zdCBSSUdIVCAgPSAyO1xyXG5leHBvcnQgY29uc3QgVE9QICAgID0gMjtcclxuZXhwb3J0IGNvbnN0IEJPVFRPTSA9IDI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTaW5nbGVMb2RJbmZvIHtcclxuICAgIHN0YXJ0OiBpbnQ7XHJcbiAgICBjb3VudDogaW50O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdEluZm8oKTogSVNpbmdsZUxvZEluZm9bXVtdW11bXSB7XHJcblxyXG4gICAgY29uc3QgYXJyID0gbmV3IEFycmF5PElTaW5nbGVMb2RJbmZvW11bXVtdPihMRUZUKTtcclxuXHJcbiAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7ICAgbCsrKSB7IGFycltsXSA9IG5ldyBBcnJheTxJU2luZ2xlTG9kSW5mb1tdW10+KFJJR0hUKTtcclxuICAgIGZvciAobGV0IHIgPSAwOyByIDwgUklHSFQ7ICByKyspIHsgYXJyW2xdW3JdID0gbmV3IEFycmF5PElTaW5nbGVMb2RJbmZvW10+KFRPUCk7XHJcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgICAgdCsrKSB7IGFycltsXVtyXVt0XSA9IG5ldyBBcnJheTxJU2luZ2xlTG9kSW5mbz4oQk9UVE9NKTtcclxuICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHsgYXJyW2xdW3JdW3RdW2JdID0ge1xyXG4gICAgICAgICAgICBzdGFydDogMCxcclxuICAgICAgICAgICAgY291bnQ6IDBcclxuICAgICAgICB9O1xyXG4gICAgfX19fVxyXG5cclxuICAgIHJldHVybiBhcnI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlYWRvbmx5TG9kSW5mbyB7XHJcbiAgICBpbmZvOiBSZWFkb25seTxJU2luZ2xlTG9kSW5mbz5bXVtdW11bXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExvZEluZm8gaW1wbGVtZW50cyBJUmVhZG9ubHlMb2RJbmZvIHtcclxuXHJcbiAgICAvL2luZm9bTEVGVF1bUklHSFRdW1RPUF1bQk9UVE9NXTtcclxuICAgIHB1YmxpYyBpbmZvOiBJU2luZ2xlTG9kSW5mb1tdW11bXVtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaW5mbyA9IGluaXRJbmZvKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsZWFyKCkge1xyXG4gICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgICBsKyspIHtcclxuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyAgcisrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7ICAgIHQrKykge1xyXG4gICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2luZ2xlID0gdGhpcy5pbmZvW2xdW3JdW3RdW2JdO1xyXG4gICAgICAgICAgICBzaW5nbGUuc3RhcnQgPSAwO1xyXG4gICAgICAgICAgICBzaW5nbGUuY291bnQgPSAwO1xyXG4gICAgICAgIH19fX1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTG9kSW5mbzsiLCJpbXBvcnQgdHlwZSB7IGZsb2F0LCBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGF0Y2hMb2RCYXNlIHtcclxuICAgIGNvcmU6IGludDtcclxuICAgIGxlZnQ6IGludDtcclxuICAgIHJpZ2h0OiBpbnQ7XHJcbiAgICB0b3A6IGludDtcclxuICAgIGJvdHRvbTogaW50O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElQYXRjaExvZCBleHRlbmRzIElQYXRjaExvZEJhc2Uge1xyXG5cclxuICAgIC8qKiBEaXN0YW5jZSB0byBwYXRjaCBjZW50ZXIgeHogYW5kIHkgcG9zIGZyb20gaGVpZ2h0bWFwIGFsdGl0dWRlIGJ5IGNhbWVyYSB4eiB0byAqL1xyXG4gICAgZGlzdGFuY2U6IGZsb2F0O1xyXG59IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaExvZEJhc2UgfSBmcm9tIFwiLi9JUGF0Y2hMb2QubWpzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9kSWQoYzogaW50LCBsOiBpbnQsIHI6IGludCwgdDogaW50LCBiOiBpbnQpIHtcclxuICAgICAgICAgICAgXHJcbiAgICBjb25zdCBsb2RDb3JlID0gYyArIDE7XHJcbiAgICBjb25zdCBsb2RCaW5hcnlWYWx1ZSA9IChsIDw8IDMpIHwgKHIgPDwgMikgfCAodCA8PCAxKSB8IGI7XHJcbiAgICBcclxuICAgIHJldHVybiBsb2RDb3JlICogMTYgLSBsb2RCaW5hcnlWYWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExvZEluZm9JZChsb2Q6IElQYXRjaExvZEJhc2UpIHtcclxuICAgIHJldHVybiBnZXRMb2RJZChsb2QuY29yZSwgbG9kLmxlZnQsIGxvZC5yaWdodCwgbG9kLnRvcCwgbG9kLmJvdHRvbSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVMb2RJZChpZDogaW50KTogSVBhdGNoTG9kQmFzZSB7XHJcblxyXG4gICAgY29uc3QgY0FkanVzdGVkICA9IE1hdGguZmxvb3IoaWQgLyAxNik7XHJcbiAgICBjb25zdCBiaW5hcnlQYXJ0ID0gaWQgJSAxNjtcclxuXHJcbiAgICBjb25zdCBsZWZ0ICAgPSAoYmluYXJ5UGFydCA+PiAzKSAmIDE7XHJcbiAgICBjb25zdCByaWdodCAgPSAoYmluYXJ5UGFydCA+PiAyKSAmIDE7XHJcbiAgICBjb25zdCB0b3AgICAgPSAoYmluYXJ5UGFydCA+PiAxKSAmIDE7XHJcbiAgICBjb25zdCBib3R0b20gPSBiaW5hcnlQYXJ0ICYgMTtcclxuXHJcbiAgICBjb25zdCBjb3JlID0gY0FkanVzdGVkIC0gMTtcclxuXHJcbiAgICByZXR1cm4geyBjb3JlLCBsZWZ0LCByaWdodCwgdG9wLCBib3R0b20gfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9kRXN0aW1hdG9yIHtcclxuXHJcbiAgICBwcml2YXRlIF9wYXRjaFNpemU6IGludDtcclxuICAgIHByaXZhdGUgX251bVBhdGNoZXNYOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9udW1QYXRjaGVzWjogaW50O1xyXG4gICAgcHJpdmF0ZSBfbG9kQ291bnQ6IGludDtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoU2l6ZSgpICAgeyByZXR1cm4gdGhpcy5fcGF0Y2hTaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNYKCkgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1g7IH1cclxuICAgIHB1YmxpYyBnZXQgbnVtUGF0Y2hlc1ooKSB7IHJldHVybiB0aGlzLl9udW1QYXRjaGVzWjsgfVxyXG4gICAgcHVibGljIGdldCBjb3VudCgpICAgICAgIHsgcmV0dXJuIHRoaXMuX2xvZENvdW50OyB9XHJcbiAgICBwdWJsaWMgZ2V0IG1heCgpICAgICAgICAgeyByZXR1cm4gdGhpcy5fbG9kQ291bnQgLSAxOyB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHBhdGNoU2l6ZTogaW50LCBudW1QYXRjaGVzWDogaW50LCBudW1QYXRjaGVzWjogaW50KSB7XHJcbiAgICAgICAgdGhpcy5zZXRQYXJhbXMocGF0Y2hTaXplLCBudW1QYXRjaGVzWCwgbnVtUGF0Y2hlc1opO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRQYXJhbXMocGF0Y2hTaXplOiBpbnQsIG51bVBhdGNoZXNYOiBpbnQsIG51bVBhdGNoZXNaOiBpbnQpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fcGF0Y2hTaXplICAgPSBwYXRjaFNpemU7XHJcbiAgICAgICAgdGhpcy5fbnVtUGF0Y2hlc1ggPSBudW1QYXRjaGVzWDtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWiA9IG51bVBhdGNoZXNaO1xyXG5cclxuICAgICAgICB0aGlzLl9jYWxjTWF4TE9EKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2FsY01heExPRCgpIHtcclxuXHJcbiAgICAgICAgY29uc3QgbnVtU2VnbWVudHMgICAgICAgICAgPSB0aGlzLl9wYXRjaFNpemUgLSAxO1xyXG4gICAgICAgIGNvbnN0IG51bVNlZ21lbnRzTG9nMiAgICAgID0gTWF0aC5sb2cyKG51bVNlZ21lbnRzKTtcclxuICAgICAgICBjb25zdCBudW1TZWdtZW50c0xvZzJDZWlsICA9IE1hdGguY2VpbChudW1TZWdtZW50c0xvZzIpO1xyXG4gICAgICAgIGNvbnN0IG51bVNlZ21lbnRzTG9nMkZsb29yID0gTWF0aC5mbG9vcihudW1TZWdtZW50c0xvZzIpO1xyXG5cclxuICAgICAgICBpZiAobnVtU2VnbWVudHNMb2cyQ2VpbCAhPT0gbnVtU2VnbWVudHNMb2cyRmxvb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIG51bWJlciBvZiB2ZXJ0aWNlcyBpbiB0aGUgcGF0Y2ggbWludXMgb25lIG11c3QgYmUgYSBwb3dlciBvZiB0d29cXG5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9sb2RDb3VudCA9IG51bVNlZ21lbnRzTG9nMkZsb29yO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBpbnQsIFJlZk9iamVjdCwgdW5zaWduZWRfaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgQk9UVE9NLCBMRUZULCBMb2RJbmZvLCBSSUdIVCwgVE9QLCB0eXBlIElSZWFkb25seUxvZEluZm8gfSBmcm9tIFwiLi9Mb2RJbmZvLm1qc1wiO1xyXG5pbXBvcnQgTG9kRXN0aW1hdG9yIGZyb20gXCIuL0xvZEVzdGltYXRvci5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyaWQge1xyXG4gICAgcmVhZG9ubHkgd2lkdGg6IGludDtcclxuICAgIHJlYWRvbmx5IGRlcHRoOiBpbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyaWRQYXRjaGVkIGV4dGVuZHMgSUdyaWQge1xyXG4gICAgcmVhZG9ubHkgcGF0Y2hTaXplOiBpbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyaWRQYXRjaGVkSW5mbyBleHRlbmRzIElHcmlkUGF0Y2hlZCB7XHJcbiAgICByZWFkb25seSBudW1QYXRjaGVzWDogaW50O1xyXG4gICAgcmVhZG9ubHkgbnVtUGF0Y2hlc1o6IGludDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR3JpZFBhdGNoZWRMb2QgZXh0ZW5kcyBJR3JpZFBhdGNoZWRJbmZvIHtcclxuICAgIHJlYWRvbmx5IGxvZEVzdGltYXRvcjogTG9kRXN0aW1hdG9yO1xyXG4gICAgcmVhZG9ubHkgbG9kSW5mbzogSVJlYWRvbmx5TG9kSW5mb1tdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgR3JpZEJ1aWxkZXIgaW1wbGVtZW50cyBJR3JpZFBhdGNoZWRMb2Qge1xyXG5cclxuICAgIHByaXZhdGUgX2xvZEluZm86IExvZEluZm9bXTtcclxuICAgIHByaXZhdGUgX2xvZEVzdGltYXRvcjogTG9kRXN0aW1hdG9yO1xyXG4gICAgcHJpdmF0ZSBfaW5kaWNlczogVWludDMyQXJyYXk7XHJcbiAgICBwcml2YXRlIF93aWR0aDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfZGVwdGg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX3BhdGNoU2l6ZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfbnVtUGF0Y2hlc1g6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX251bVBhdGNoZXNaOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGdldCB3aWR0aCgpIHsgcmV0dXJuIHRoaXMuX3dpZHRoOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGRlcHRoKCkgeyByZXR1cm4gdGhpcy5fZGVwdGg7IH1cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hTaXplKCkgeyByZXR1cm4gdGhpcy5fcGF0Y2hTaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNYKCkgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1g7IH1cclxuICAgIHB1YmxpYyBnZXQgbnVtUGF0Y2hlc1ooKSB7IHJldHVybiB0aGlzLl9udW1QYXRjaGVzWjsgfVxyXG4gICAgcHVibGljIGdldCBtYXhMT0QoKSB7IHJldHVybiB0aGlzLmxvZEVzdGltYXRvci5tYXg7IH1cclxuICAgIHB1YmxpYyBnZXQgbG9kQ291bnQoKSB7IHJldHVybiB0aGlzLmxvZEVzdGltYXRvci5jb3VudDsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hJbmRpY2VzKCk6IFJlYWRvbmx5PFVpbnQzMkFycmF5PiB7IHJldHVybiB0aGlzLl9pbmRpY2VzIGFzIGFueTsgfVxyXG4gICAgcHVibGljIGdldCBsb2RFc3RpbWF0b3IoKSB7IHJldHVybiB0aGlzLl9sb2RFc3RpbWF0b3I7IH1cclxuICAgIHB1YmxpYyBnZXQgbG9kSW5mbygpOiBJUmVhZG9ubHlMb2RJbmZvW10geyByZXR1cm4gdGhpcy5fbG9kSW5mbzsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGdyaWQ6IFJlZk9iamVjdDxJR3JpZFBhdGNoZWQ+KSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3dpZHRoICAgICAgID0gZ3JpZC53aWR0aDtcclxuICAgICAgICB0aGlzLl9kZXB0aCAgICAgICA9IGdyaWQuZGVwdGg7XHJcbiAgICAgICAgdGhpcy5fcGF0Y2hTaXplICAgPSBncmlkLnBhdGNoU2l6ZTtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWCA9ICgodGhpcy5fd2lkdGggLSAxKSAvICh0aGlzLl9wYXRjaFNpemUgLSAxKSkgfCAwO1xyXG4gICAgICAgIHRoaXMuX251bVBhdGNoZXNaID0gKCh0aGlzLl9kZXB0aCAtIDEpIC8gKHRoaXMuX3BhdGNoU2l6ZSAtIDEpKSB8IDA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl93aWR0aCA+PSAweGZmZmYpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk1heCB3aWR0aCA9ICVkXFxuXCIsIDB4ZmZmZiAtMSk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2RlcHRoID49IDB4ZmZmZikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTWF4IGRlcHRoID0gJWRcXG5cIiwgMHhmZmZmIC0xKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKHRoaXMuX3dpZHRoIC0gMSkgJSAodGhpcy5fcGF0Y2hTaXplIC0gMSkgIT09IDApIHtcclxuICAgICAgICAgICAgY29uc3QgcmVjb21tZW5kZWRXaWR0aCA9ICgodGhpcy5fd2lkdGggLSAxICsgdGhpcy5fcGF0Y2hTaXplIC0gMSkgLyAodGhpcy5fcGF0Y2hTaXplIC0gMSkpICogKHRoaXMuX3BhdGNoU2l6ZSAtIDEpICsgMTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIldpZHRoIG1pbnVzIDEgKCVkKSBtdXN0IGJlIGRpdmlzaWJsZSBieSBwYXRjaFNpemUgbWludXMgMSAoJWQpXFxuXCIsIHRoaXMuX3dpZHRoLCB0aGlzLl9wYXRjaFNpemUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVHJ5IHVzaW5nIFdpZHRoID0gJWRcXG5cIiwgcmVjb21tZW5kZWRXaWR0aCk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCh0aGlzLl9kZXB0aCAtIDEpICUgKHRoaXMuX3BhdGNoU2l6ZSAtIDEpICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlY29tbWVuZGVkRGVwdGggPSAoKHRoaXMuX2RlcHRoIC0gMSArIHRoaXMuX3BhdGNoU2l6ZSAtIDEpIC8gKHRoaXMuX3BhdGNoU2l6ZSAtIDEpKSAqICh0aGlzLl9wYXRjaFNpemUgLSAxKSArIDE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEZXB0aCBtaW51cyAxICglZCkgbXVzdCBiZSBkaXZpc2libGUgYnkgcGF0Y2hTaXplIG1pbnVzIDEgKCVkKVxcblwiLCB0aGlzLl9kZXB0aCwgdGhpcy5fcGF0Y2hTaXplKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRyeSB1c2luZyBXaWR0aCA9ICVkXFxuXCIsIHJlY29tbWVuZGVkRGVwdGgpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9wYXRjaFNpemUgPCAzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGUgbWluaW11bSBwYXRjaCBzaXplIGlzIDMgKCVkKVxcblwiLCB0aGlzLl9wYXRjaFNpemUpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAodGhpcy5fcGF0Y2hTaXplICUgMiA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUGF0Y2ggc2l6ZSBtdXN0IGJlIGFuIG9kZCBudW1iZXIgKCVkKVxcblwiLCB0aGlzLl9wYXRjaFNpemUpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2J1aWxkTG9kc0FuZEluZGljZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9idWlsZExvZHNBbmRJbmRpY2VzKCkge1xyXG5cclxuICAgICAgICB0aGlzLl9sb2RFc3RpbWF0b3IgPSBuZXcgTG9kRXN0aW1hdG9yKHRoaXMuX3BhdGNoU2l6ZSwgdGhpcy5fbnVtUGF0Y2hlc1gsIHRoaXMuX251bVBhdGNoZXNaKTtcclxuICAgICAgICB0aGlzLl9sb2RJbmZvID0gbmV3IEFycmF5KHRoaXMuX2xvZEVzdGltYXRvci5jb3VudCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbG9kSW5mby5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2RJbmZvW2ldID0gbmV3IExvZEluZm8oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBudW1JbmRpY2VzID0gdGhpcy5fY2FsY051bUluZGljZXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5kaWNlcyA9IG5ldyBVaW50MzJBcnJheShudW1JbmRpY2VzKTtcclxuXHJcbiAgICAgICAgbnVtSW5kaWNlcyA9IHRoaXMuX2luaXRJbmRpY2VzKHRoaXMuX2luZGljZXMpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJGaW5hbCBudW1iZXIgb2YgaW5kaWNlcyAlZFxcblwiLCBudW1JbmRpY2VzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfY2FsY051bUluZGljZXMoKTogaW50IHtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgbnVtUXVhZHMgPSAodGhpcy5wYXRjaFNpemUgLSAxKSAqKiAyO1xyXG4gICAgICAgIGxldCBudW1JbmRpY2VzID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4UGVybXV0YXRpb25zUGVyTGV2ZWwgPSAxNjsgLy8gdHJ1ZS9mYWxzZSBmb3IgZWFjaCBvZiB0aGUgZm91ciBzaWRlc1xyXG4gICAgICAgIGNvbnN0IGluZGljZXNQZXJRdWFkID0gNjsgICAgICAgICAgIC8vIHR3byB0cmlhbmdsZXNcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kID0gMDsgbG9kIDwgdGhpcy5sb2RDb3VudDsgbG9kKyspIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxPRCAlZDogbnVtIHF1YWRzICVkXFxuXCIsIGxvZCwgbnVtUXVhZHMpO1xyXG4gICAgICAgICAgICBudW1JbmRpY2VzICs9IG51bVF1YWRzICogaW5kaWNlc1BlclF1YWQgKiBtYXhQZXJtdXRhdGlvbnNQZXJMZXZlbDtcclxuICAgICAgICAgICAgbnVtUXVhZHMgLz0gNDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJJbml0aWFsIG51bWJlciBvZiBpbmRpY2VzICVkXFxuXCIsIG51bUluZGljZXMpO1xyXG4gICAgICAgIHJldHVybiBudW1JbmRpY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRJbmRpY2VzKGluZGljZXM6IFVpbnQzMkFycmF5KTogaW50IHtcclxuXHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kID0gMDsgbG9kIDwgdGhpcy5sb2RDb3VudDsgbG9kKyspIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIioqKiBJbml0IGluZGljZXMgbG9kICVkICoqKlxcblwiLCBsb2QpO1xyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2luaXRJbmRpY2VzTE9EKGluZGV4LCBpbmRpY2VzLCBsb2QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRJbmRpY2VzTE9EKGluZGV4OiBpbnQsIGluZGljZXM6IFVpbnQzMkFycmF5LCBsb2Q6IGludCk6IGludCB7XHJcblxyXG4gICAgICAgIGxldCB0b3RhbEluZGljZXNGb3JMT0QgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5mbyAgPSB0aGlzLl9sb2RJbmZvW2xvZF0uaW5mb1tsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5faW5pdEluZGljZXNMT0RTaW5nbGUoaW5kZXgsIGluZGljZXMsIGxvZCwgbG9kICsgbCwgbG9kICsgciwgbG9kICsgdCwgbG9kICsgYik7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5zdGFydCA9IHN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmNvdW50ID0gaW5kZXggLSBzdGFydDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsSW5kaWNlc0ZvckxPRCArPSBpbmZvLmNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJUb3RhbCBpbmRpY2VzIGZvciBMT0Q6ICVkXFxuXCIsIHRvdGFsSW5kaWNlc0ZvckxPRCk7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRJbmRpY2VzTE9EU2luZ2xlKGluZGV4OiBpbnQsIGluZGljZXM6IFVpbnQzMkFycmF5LCBsb2RDb3JlOiBpbnQsIGxvZExlZnQ6IGludCwgbG9kUmlnaHQ6IGludCwgbG9kVG9wOiBpbnQsIGxvZEJvdHRvbTogaW50KTogaW50IHtcclxuXHJcbiAgICAgICAgY29uc3Qgd2lkdGggICA9IHRoaXMucGF0Y2hTaXplO1xyXG4gICAgICAgIGNvbnN0IGZhblN0ZXAgPSBNYXRoLnBvdygyLCBsb2RDb3JlICsgMSk7ICAgICAvLyBsb2QgPSAwIC0tPiAyLCBsb2QgPSAxIC0tPiA0LCBsb2QgPSAyIC0tPiA4LCBldGNcclxuICAgICAgICBjb25zdCBlbmRQb3MgID0gdGhpcy5wYXRjaFNpemUgLSAxIC0gZmFuU3RlcDsgLy8gcGF0Y2ggc2l6ZSA1LCBmYW4gc3RlcCAyIC0tPiBFbmRQb3MgPSAyOyBwYXRjaCBzaXplIDksIGZhbiBzdGVwIDIgLS0+IEVuZFBvcyA9IDZcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeiA9IDAgOyB6IDw9IGVuZFBvczsgeiArPSBmYW5TdGVwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwIDsgeCA8PSBlbmRQb3M7IHggKz0gZmFuU3RlcCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbExlZnQgICA9IHggPT0gMCAgICAgID8gbG9kTGVmdCAgIDogbG9kQ29yZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxSaWdodCAgPSB4ID09IGVuZFBvcyA/IGxvZFJpZ2h0ICA6IGxvZENvcmU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsQm90dG9tID0geiA9PSAwICAgICAgPyBsb2RCb3R0b20gOiBsb2RDb3JlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbFRvcCAgICA9IHogPT0gZW5kUG9zID8gbG9kVG9wICAgIDogbG9kQ29yZTtcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fY3JlYXRlVHJpYW5nbGVGYW4oaW5kZXgsIGluZGljZXMsIGxvZENvcmUsIGxMZWZ0LCBsUmlnaHQsIGxUb3AsIGxCb3R0b20sIHgsIHosIHdpZHRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY3JlYXRlVHJpYW5nbGVGYW4oaW5kZXg6IGludCwgaW5kaWNlczogVWludDMyQXJyYXksIGxvZENvcmU6IGludCwgbG9kTGVmdDogaW50LCBsb2RSaWdodDogaW50LCBsb2RUb3A6IGludCwgbG9kQm90dG9tOiBpbnQsIHg6IGludCwgejogaW50LCB3aWR0aDogaW50KTogdW5zaWduZWRfaW50IHtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RlcExlZnQgICA9IE1hdGgucG93KDIsIGxvZExlZnQpOyAvLyBiZWNhdXNlIExPRCBzdGFydHMgYXQgemVyby4uLlxyXG4gICAgICAgIGNvbnN0IHN0ZXBSaWdodCAgPSBNYXRoLnBvdygyLCBsb2RSaWdodCk7XHJcbiAgICAgICAgY29uc3Qgc3RlcFRvcCAgICA9IE1hdGgucG93KDIsIGxvZFRvcCk7XHJcbiAgICAgICAgY29uc3Qgc3RlcEJvdHRvbSA9IE1hdGgucG93KDIsIGxvZEJvdHRvbSk7XHJcbiAgICAgICAgY29uc3Qgc3RlcENlbnRlciA9IE1hdGgucG93KDIsIGxvZENvcmUpO1xyXG5cclxuICAgICAgICBjb25zdCBpbmRleENlbnRlciA9ICh6ICsgc3RlcENlbnRlcikgKiB3aWR0aCArIHggKyBzdGVwQ2VudGVyO1xyXG5cclxuICAgICAgICAvLyBmaXJzdCB1cFxyXG4gICAgICAgIGxldCBpbmRleFRlbXAxID0geiAqIHdpZHRoICsgeDtcclxuICAgICAgICBsZXQgaW5kZXhUZW1wMiA9ICh6ICsgc3RlcExlZnQpICogd2lkdGggKyB4O1xyXG5cclxuICAgICAgICBpbmRleCA9IHRoaXMuX2FkZFRyaWFuZ2xlKGluZGV4LCBpbmRpY2VzLCBpbmRleENlbnRlciwgaW5kZXhUZW1wMSwgaW5kZXhUZW1wMik7XHJcblxyXG4gICAgICAgIC8vIHNlY29uZCB1cFxyXG4gICAgICAgIGlmIChsb2RMZWZ0ID09IGxvZENvcmUpIHtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMSA9IGluZGV4VGVtcDI7XHJcbiAgICAgICAgICAgIGluZGV4VGVtcDIgKz0gc3RlcExlZnQgKiB3aWR0aDtcclxuXHJcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZpcnN0IHJpZ2h0XHJcbiAgICAgICAgaW5kZXhUZW1wMSA9IGluZGV4VGVtcDI7XHJcbiAgICAgICAgaW5kZXhUZW1wMiArPSBzdGVwVG9wO1xyXG5cclxuICAgICAgICBpbmRleCA9IHRoaXMuX2FkZFRyaWFuZ2xlKGluZGV4LCBpbmRpY2VzLCBpbmRleENlbnRlciwgaW5kZXhUZW1wMSwgaW5kZXhUZW1wMik7XHJcblxyXG4gICAgICAgIC8vIHNlY29uZCByaWdodFxyXG4gICAgICAgIGlmIChsb2RUb3AgPT09IGxvZENvcmUpIHtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMSA9IGluZGV4VGVtcDI7XHJcbiAgICAgICAgICAgIGluZGV4VGVtcDIgKz0gc3RlcFRvcDtcclxuXHJcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZpcnN0IGRvd25cclxuICAgICAgICBpbmRleFRlbXAxID0gaW5kZXhUZW1wMjtcclxuICAgICAgICBpbmRleFRlbXAyIC09IHN0ZXBSaWdodCAqIHdpZHRoO1xyXG5cclxuICAgICAgICBpbmRleCA9IHRoaXMuX2FkZFRyaWFuZ2xlKGluZGV4LCBpbmRpY2VzLCBpbmRleENlbnRlciwgaW5kZXhUZW1wMSwgaW5kZXhUZW1wMik7XHJcblxyXG4gICAgICAgIC8vIHNlY29uZCBkb3duXHJcbiAgICAgICAgaWYgKGxvZFJpZ2h0ID09PSBsb2RDb3JlKSB7XHJcbiAgICAgICAgICAgIGluZGV4VGVtcDEgPSBpbmRleFRlbXAyO1xyXG4gICAgICAgICAgICBpbmRleFRlbXAyIC09IHN0ZXBSaWdodCAqIHdpZHRoO1xyXG5cclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlyc3QgbGVmdFxyXG4gICAgICAgIGluZGV4VGVtcDEgPSBpbmRleFRlbXAyO1xyXG4gICAgICAgIGluZGV4VGVtcDIgLT0gc3RlcEJvdHRvbTtcclxuXHJcbiAgICAgICAgaW5kZXggPSB0aGlzLl9hZGRUcmlhbmdsZShpbmRleCwgaW5kaWNlcywgaW5kZXhDZW50ZXIsIGluZGV4VGVtcDEsIGluZGV4VGVtcDIpO1xyXG5cclxuICAgICAgICAvLyBzZWNvbmQgbGVmdFxyXG4gICAgICAgIGlmIChsb2RCb3R0b20gPT09IGxvZENvcmUpIHtcclxuICAgICAgICAgICAgaW5kZXhUZW1wMSA9IGluZGV4VGVtcDI7XHJcbiAgICAgICAgICAgIGluZGV4VGVtcDIgLT0gc3RlcEJvdHRvbTtcclxuXHJcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fYWRkVHJpYW5nbGUoaW5kZXgsIGluZGljZXMsIGluZGV4Q2VudGVyLCBpbmRleFRlbXAxLCBpbmRleFRlbXAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9hZGRUcmlhbmdsZShpbmRleDogdW5zaWduZWRfaW50LCBpbmRpY2VzOiBVaW50MzJBcnJheSwgdjE6IHVuc2lnbmVkX2ludCwgdjI6IHVuc2lnbmVkX2ludCwgdjM6IHVuc2lnbmVkX2ludCkge1xyXG4gICAgICAgIGluZGljZXNbaW5kZXgrK10gPSB2MTtcclxuICAgICAgICBpbmRpY2VzW2luZGV4KytdID0gdjI7XHJcbiAgICAgICAgaW5kaWNlc1tpbmRleCsrXSA9IHYzO1xyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR3JpZEJ1aWxkZXI7IiwiaW1wb3J0IHR5cGUgeyBpbnQsIGZsb2F0LCBSZWZPYmplY3QgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgQWJzQ2h1bmtlZEhlaWdodE1hcCwgeyBJUmVhZG9ubHlBYnNDaHVua2VkSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzQ2h1bmtlZEhlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUmVhZG9ubHlBYnNIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zIH0gZnJvbSBcIi4vQWJzSGVpZ2h0TWFwRmlsZUlPLm1qc1wiO1xyXG5pbXBvcnQgQ29vcmRzQnVmZmVyLCB7IElSZWFkb25seUNvb3Jkc0J1ZmZlciB9IGZyb20gXCIuL0Nvb3Jkc0J1ZmZlci5tanNcIjtcclxuaW1wb3J0IEdyaWRCdWlsZGVyIGZyb20gXCIuL0dyaWRCdWlsZGVyLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElab25lIH0gZnJvbSBcIi4vSVpvbmUubWpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWlnaHRmaWVsZCBleHRlbmRzIEdyaWRCdWlsZGVyIHtcclxuXHJcbiAgICBwcml2YXRlIF92ZXJ0aWNlczogQ29vcmRzQnVmZmVyO1xyXG5cclxuICAgIHByb3RlY3RlZCBfaGVpZ2h0TWFwOiBBYnNDaHVua2VkSGVpZ2h0TWFwPGFueT47XHJcblxyXG4gICAgcHVibGljIGdldCBwYXRjaFZlcnRpY2VzKCk6IElSZWFkb25seUNvb3Jkc0J1ZmZlciB7IHJldHVybiB0aGlzLl92ZXJ0aWNlczsgfVxyXG4gICAgcHVibGljIGdldCBoZWlnaHRNYXAoKTogSVJlYWRvbmx5QWJzQ2h1bmtlZEhlaWdodE1hcCB7IHJldHVybiB0aGlzLl9oZWlnaHRNYXA7IH1cclxuICAgIHB1YmxpYyBnZXQgbWF4SGVpZ2h0KCkgeyByZXR1cm4gdGhpcy5oZWlnaHRNYXAubWF4SGVpZ2h0OyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoaGVpZ2h0TWFwOiBSZWZPYmplY3Q8QWJzQ2h1bmtlZEhlaWdodE1hcDxhbnk+Pikge1xyXG5cclxuICAgICAgICBzdXBlcihoZWlnaHRNYXApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcCA9IGhlaWdodE1hcDtcclxuICAgICAgICB0aGlzLl92ZXJ0aWNlcyAgPSBuZXcgQ29vcmRzQnVmZmVyKHRoaXMuX2hlaWdodE1hcCwgdGhpcy5faGVpZ2h0TWFwLnBhdGNoU2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fdmVydGljZXMuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRIZWlnaHQoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCkge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5zZXQoeCwgeiwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhcHBlbmRUb0hlaWdodCh4OiBpbnQsIHo6IGludCwgdmFsdWU6IGZsb2F0KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLmFwcGVuZCh4LCB6LCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG11bHRpcGx5VG9IZWlnaHQoeDogaW50LCB6OiBpbnQsIHZhbHVlOiBmbG9hdCwgZGVmYXVsdEhlaWdodDogZmxvYXQgPSAwKSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLm11bHRpcGx5KHgsIHosIHZhbHVlLCBkZWZhdWx0SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc21vb3RoSGVpZ2h0c1pvbmUoem9uZTogSVpvbmUsIG5wOiBmbG9hdCwgcmFkaXVzOiBmbG9hdCkge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5zbW9vdGhab25lKHpvbmUsIG5wLCByYWRpdXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBsb2FkSGVpZ2h0TWFwRnJvbUZpbGUoYnVmZmVyOiBBcnJheUJ1ZmZlciwgb3B0aW9ucz86IElIZWlnaHRNYXBGaWxlSW1wb3J0T3B0aW9ucywgbnA6IGZsb2F0ID0gLTEsIHJhZGl1czogaW50ID0gMCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGF3YWl0IHRoaXMuX2hlaWdodE1hcC5mcm9tRmlsZShidWZmZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5zbW9vdGgobnAsIHJhZGl1cyk7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnJlY2FsY3VsYXRlTWluTWF4KHRoaXMuX2hlaWdodE1hcCk7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnJlY2FsY3VsYXRlQUFCQigpO1xyXG4gICAgICAgIHJldHVybiBoZWFkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxvYWRIZWlnaHRNYXBGcm9tSW1nKGltZzogSW1hZ2VCaXRtYXAsIG5wOiBmbG9hdCA9IC0xLCByYWRpdXM6IGludCA9IDApIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAuZnJvbUltYWdlKGltZyk7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnNtb290aChucCwgcmFkaXVzKTtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAucmVjYWxjdWxhdGVNaW5NYXgodGhpcy5faGVpZ2h0TWFwKTtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAucmVjYWxjdWxhdGVBQUJCKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG5vcm1hbGl6ZUhlaWdodE1hcChtYXhIZWlnaHQ/OiBmbG9hdCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1heEhlaWdodCA/Pz0gdGhpcy5faGVpZ2h0TWFwLm1heEhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwLm5vcm1hbGl6ZShtYXhIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRNYXhIZWlnaHQobWF4SGVpZ2h0OiBmbG9hdCkge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcC5zZXRNYXhIZWlnaHQobWF4SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXBwZW5kSGVpZ2h0TWFwKFxyXG4gICAgICAgIGhlaWdodE1hcDogSVJlYWRvbmx5QWJzSGVpZ2h0TWFwLFxyXG4gICAgICAgIHZhbHVlOiBmbG9hdCxcclxuICAgICAgICB6b25lOiBJWm9uZSxcclxuICAgICAgICBtaW5IZWlnaHQ6IGZsb2F0IHwgbnVsbCA9IG51bGwsXHJcbiAgICAgICAgbWF4SGVpZ2h0OiBmbG9hdCB8IG51bGwgPSBudWxsXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAuY29tYmluZUhlaWdodHMoJysnLCBoZWlnaHRNYXAsIHZhbHVlLCB6b25lLCAwLCBtaW5IZWlnaHQsIG1heEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY2FsY3VsYXRlTWluTWF4KHpvbmU6IElab25lLCBhYWJiOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAucmVjYWxjdWxhdGVNaW5NYXgoem9uZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGFhYmIpIHtcclxuICAgICAgICAgICAgdGhpcy5faGVpZ2h0TWFwLnJlY2FsY3VsYXRlQUFCQigpO1xyXG4gICAgICAgIH0gXHJcbiAgICB9XHJcbn0iLCIvLyBPdXIgc3lzdGVtIGlzIGRpdmlkZWQgaW50byBhIGdlbmVyYWwgcGFydCBhbmQgYW4gZW5naW5lIHBhcnQsXG4vLyBmb3Igb3B0aW1pemF0aW9uIHdlIHVzZSB0aGUgZW5naW5lIHBhcnQgaW4gdGhpcyBmaWxlLiAocGxheWNhbnZhcyBWZWMzKVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWlnaHRmaWVsZFJheWNhc3RSZXN1bHQge1xuXG4gICAgcHVibGljIHZlcnRleEluZGV4ID0gMDtcbiAgICBwdWJsaWMgZGlzdGFuY2UgICAgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIHB1YmxpYyBsb2NhbE5vcm1hbCA9IG5ldyBwYy5WZWMzKDAsIDEsIDApO1xuICAgIHB1YmxpYyBub3JtYWwgICAgICA9IG5ldyBwYy5WZWMzKDAsIDEsIDApO1xuICAgIHB1YmxpYyBsb2NhbFBvaW50ICA9IG5ldyBwYy5WZWMzKE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpO1xuICAgIHB1YmxpYyBwb2ludCAgICAgICA9IG5ldyBwYy5WZWMzKE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpO1xuXG4gICAgcHVibGljIGNsZWFyKCkge1xuICAgICAgICB0aGlzLnZlcnRleEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICAgIHRoaXMubG9jYWxOb3JtYWwuc2V0KDAsIDEsIDApO1xuICAgICAgICB0aGlzLm5vcm1hbC5zZXQoMCwgMSwgMCk7XG4gICAgICAgIHRoaXMubG9jYWxQb2ludC5zZXQoTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSk7XG4gICAgICAgIHRoaXMucG9pbnQuc2V0KE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpO1xuICAgIH1cbn0iLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XG5cbmNvbnN0IHRtcFRyaVZlY0EgPSBuZXcgcGMuVmVjMygpO1xuY29uc3QgdG1wVHJpVmVjQiA9IG5ldyBwYy5WZWMzKCk7XG5cbmV4cG9ydCBjbGFzcyBUcmlhbmdsZSBleHRlbmRzIHBjLlRyaSB7XG5cbiAgICBpbmRleDA6IGludDtcbiAgICBpbmRleDE6IGludDtcbiAgICBpbmRleDI6IGludDtcblxuICAgIGdldE5vcm1hbChyc2g6IHBjeC5WZWMzKSB7XG4gICAgICAgIHRtcFRyaVZlY0Euc3ViMih0aGlzLnYxLCB0aGlzLnYwKTtcbiAgICAgICAgdG1wVHJpVmVjQi5zdWIyKHRoaXMudjIsIHRoaXMudjApO1xuICAgICAgICByc2guY3Jvc3ModG1wVHJpVmVjQSwgdG1wVHJpVmVjQikubm9ybWFsaXplKCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUcmlhbmdsZTsiLCJpbXBvcnQgeyBmbG9hdCwgaW50LCBJVmVjdG9yMywgUmVmT2JqZWN0IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzU2hhdHRlcmVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgeyBJWm9uZSB9IGZyb20gXCIuL0lab25lLm1qc1wiO1xyXG5pbXBvcnQgSGVpZ2h0ZmllbGRSYXljYXN0UmVzdWx0IGZyb20gXCIuL0hlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdC5tanNcIjtcclxuaW1wb3J0IFRyaWFuZ2xlIGZyb20gXCIuL1RyaWFuZ2xlLm1qc1wiO1xyXG5cclxuLy8gT3VyIHN5c3RlbSBpcyBkaXZpZGVkIGludG8gYSBnZW5lcmFsIHBhcnQgYW5kIGFuIGVuZ2luZSBwYXJ0LFxyXG4vLyBmb3Igb3B0aW1pemF0aW9uIHdlIHVzZSB0aGUgZW5naW5lIHBhcnQgaW4gdGhpcyBmaWxlLiAocGxheWNhbnZhcyBWZWMzLCBNYXQ0LCBUcmksIEJvdW5kaW5nQm94KVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29vcmRYWiB7XHJcbiAgICB4OiBpbnQsXHJcbiAgICB6OiBpbnQsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdyaWRSYXljYXN0U3RhdGUge1xyXG4gICAgeDogaW50LFxyXG4gICAgejogaW50LFxyXG4gICAgcGFyYW06IGludCxcclxuICAgIHByZXZYOiBpbnQsXHJcbiAgICBwcmV2WjogaW50LFxyXG4gICAgcHJldlBhcmFtOiBpbnQsXHJcbiAgICBtYXhEaXN0YW5jZUZsYXQ6IGZsb2F0LFxyXG59XHJcblxyXG5jb25zdCBpbmZpbml0ZSAgICAgICAgPSA5OTk5OTk5O1xyXG5jb25zdCBtb2RlbFRyYW5zZm9ybSAgPSBuZXcgcGMuTWF0NCgpO1xyXG5jb25zdCB0bXBSYXkgICAgICAgICAgPSBuZXcgcGMuUmF5KCk7XHJcbmNvbnN0IHRtcFJheWNhc3RWZWMgICA9IG5ldyBwYy5WZWMzKCk7XHJcbmNvbnN0IHRtcFBvczEgICAgICAgICA9IG5ldyBwYy5WZWMzKCk7XHJcbmNvbnN0IHRtcFBvczIgICAgICAgICA9IG5ldyBwYy5WZWMzKCk7XHJcbmNvbnN0IHRtcFBvczMgICAgICAgICA9IG5ldyBwYy5WZWMzKCk7XHJcblxyXG5jb25zdCB0cmlhbmdsZSAgICAgICA9IG5ldyBUcmlhbmdsZSgpO1xyXG5jb25zdCBkZWJ1Z1RtcFZlYyAgICA9IG5ldyBwYy5WZWMzKCk7XHJcbmNvbnN0IGRlYnVnVHJhbnNmb3JtID0gbmV3IHBjLk1hdDQoKTtcclxuY29uc3QgZGVidWdQb3NpdGlvbnMgPSBuZXcgQXJyYXkoMTYpO1xyXG5cclxubGV0IGRlYnVnVHJhbnNmb3JtSXNJZGVudGl0eSA9IHRydWU7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElBQUJCIGV4dGVuZHMgSVpvbmUge1xyXG4gICAgbWluWTogZmxvYXQsXHJcbiAgICBtYXhZOiBmbG9hdCxcclxufVxyXG5cclxuZnVuY3Rpb24gZGVidWdEcmF3VHJpYW5nbGVMaW5lcyh0cmk6IHBjeC5UcmksIGNvbG9yID0gcGMuQ29sb3IuWUVMTE9XKSB7XHJcbiAgICAvKlxyXG4gICAgW1xyXG4gICAgICAgIHRyaS52MC54LCB0cmkudjAueSwgdHJpLnYwLnosIHRyaS52MS54LCB0cmkudjEueSwgdHJpLnYxLnosXHJcbiAgICAgICAgdHJpLnYxLngsIHRyaS52MS55LCB0cmkudjEueiwgdHJpLnYyLngsIHRyaS52Mi55LCB0cmkudjIueixcclxuICAgICAgICB0cmkudjIueCwgdHJpLnYyLnksIHRyaS52Mi56LCB0cmkudjAueCwgdHJpLnYwLnksIHRyaS52MC56LFxyXG4gICAgXSwgY29sb3IsIGZhbHNlKTtcclxuICAgIF1cclxuICAgICovXHJcbiAgICBkZWJ1Z1RyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludCh0cmkudjAsIGRlYnVnVG1wVmVjKTtcclxuICAgIGRlYnVnUG9zaXRpb25zWzBdID0gZGVidWdQb3NpdGlvbnNbMTVdID0gZGVidWdUbXBWZWMueDtcclxuICAgIGRlYnVnUG9zaXRpb25zWzFdID0gZGVidWdQb3NpdGlvbnNbMTZdID0gZGVidWdUbXBWZWMueTtcclxuICAgIGRlYnVnUG9zaXRpb25zWzJdID0gZGVidWdQb3NpdGlvbnNbMTddID0gZGVidWdUbXBWZWMuejtcclxuICAgIGRlYnVnVHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50KHRyaS52MSwgZGVidWdUbXBWZWMpO1xyXG4gICAgZGVidWdQb3NpdGlvbnNbM10gPSBkZWJ1Z1Bvc2l0aW9uc1s2XSA9IGRlYnVnVG1wVmVjLng7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1s0XSA9IGRlYnVnUG9zaXRpb25zWzddID0gZGVidWdUbXBWZWMueTtcclxuICAgIGRlYnVnUG9zaXRpb25zWzVdID0gZGVidWdQb3NpdGlvbnNbOF0gPSBkZWJ1Z1RtcFZlYy56O1xyXG4gICAgZGVidWdUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnQodHJpLnYyLCBkZWJ1Z1RtcFZlYyk7XHJcbiAgICBkZWJ1Z1Bvc2l0aW9uc1s5XSAgPSBkZWJ1Z1Bvc2l0aW9uc1sxMl0gPSBkZWJ1Z1RtcFZlYy54O1xyXG4gICAgZGVidWdQb3NpdGlvbnNbMTBdID0gZGVidWdQb3NpdGlvbnNbMTNdID0gZGVidWdUbXBWZWMueTtcclxuICAgIGRlYnVnUG9zaXRpb25zWzExXSA9IGRlYnVnUG9zaXRpb25zWzE0XSA9IGRlYnVnVG1wVmVjLno7XHJcbiAgICBwYy5hcHA/LmRyYXdMaW5lQXJyYXlzKGRlYnVnUG9zaXRpb25zLCBjb2xvciwgZmFsc2UpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c1JheUJveChhYWJiOiBJQUFCQiwgcmF5OiBwY3guUmF5KSB7XHJcblxyXG4gICAgY29uc3QgcmF5T3JpZ2luICAgID0gcmF5Lm9yaWdpbjtcclxuICAgIGNvbnN0IHJheURpcmVjdGlvbiA9IHJheS5kaXJlY3Rpb247XHJcblxyXG4gICAgY29uc3QgbWluWCA9IGFhYmIubWluWDtcclxuICAgIGNvbnN0IG1heFggPSBhYWJiLm1heFg7XHJcbiAgICBjb25zdCBtaW5ZID0gYWFiYi5taW5ZO1xyXG4gICAgY29uc3QgbWF4WSA9IGFhYmIubWF4WTtcclxuICAgIGNvbnN0IG1pblogPSBhYWJiLm1pblo7XHJcbiAgICBjb25zdCBtYXhaID0gYWFiYi5tYXhaO1xyXG5cclxuICAgIGxldCB0bWluID0gKG1pblggLSByYXlPcmlnaW4ueCkgLyByYXlEaXJlY3Rpb24ueDtcclxuICAgIGxldCB0bWF4ID0gKG1heFggLSByYXlPcmlnaW4ueCkgLyByYXlEaXJlY3Rpb24ueDtcclxuXHJcbiAgICBpZiAodG1pbiA+IHRtYXgpIHtcclxuICAgICAgICBsZXQgdGVtcCA9IHRtaW47XHJcbiAgICAgICAgdG1pbiA9IHRtYXg7XHJcbiAgICAgICAgdG1heCA9IHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHR5bWluID0gKG1pblkgLSByYXlPcmlnaW4ueSkgLyByYXlEaXJlY3Rpb24ueTtcclxuICAgIGxldCB0eW1heCA9IChtYXhZIC0gcmF5T3JpZ2luLnkpIC8gcmF5RGlyZWN0aW9uLnk7XHJcblxyXG4gICAgaWYgKHR5bWluID4gdHltYXgpIHtcclxuICAgICAgICBsZXQgdGVtcCA9IHR5bWluO1xyXG4gICAgICAgIHR5bWluID0gdHltYXg7XHJcbiAgICAgICAgdHltYXggPSB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgodG1pbiA+IHR5bWF4KSB8fCAodHltaW4gPiB0bWF4KSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHltaW4gPiB0bWluKSB7XHJcbiAgICAgICAgdG1pbiA9IHR5bWluO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eW1heCA8IHRtYXgpIHtcclxuICAgICAgICB0bWF4ID0gdHltYXg7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHR6bWluID0gKG1pblogLSByYXlPcmlnaW4ueikgLyByYXlEaXJlY3Rpb24uejtcclxuICAgIGxldCB0em1heCA9IChtYXhaIC0gcmF5T3JpZ2luLnopIC8gcmF5RGlyZWN0aW9uLno7XHJcblxyXG4gICAgaWYgKHR6bWluID4gdHptYXgpIHtcclxuICAgICAgICBsZXQgdGVtcCA9IHR6bWluO1xyXG4gICAgICAgIHR6bWluID0gdHptYXg7XHJcbiAgICAgICAgdHptYXggPSB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgodG1pbiA+IHR6bWF4KSB8fCAodHptaW4gPiB0bWF4KSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVpZ2h0ZmllbGRTaGFwZSB7XHJcblxyXG4gICAgcHJpdmF0ZSBfaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNTaGF0dGVyZWRIZWlnaHRNYXA7XHJcbiAgICBwcml2YXRlIF9iZWdpblBvczogcGN4LlZlYzM7XHJcbiAgICBwcml2YXRlIF9lbmRQb3M6IHBjeC5WZWMzO1xyXG4gICAgcHJpdmF0ZSBfYm91bmRpbmdCb3g6IElBQUJCO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGhlaWdodE1hcDogSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwKSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwID0gaGVpZ2h0TWFwO1xyXG4gICAgICAgIHRoaXMuX2JlZ2luUG9zID0gbmV3IHBjLlZlYzMoKTtcclxuICAgICAgICB0aGlzLl9lbmRQb3MgPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlQm91bmRpbmdCb3goKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaGFsZldpZHRoID0gdGhpcy5faGVpZ2h0TWFwLndpZHRoIC8gMjtcclxuICAgICAgICBjb25zdCBoYWxmRGVwdGggPSB0aGlzLl9oZWlnaHRNYXAuZGVwdGggLyAyO1xyXG5cclxuICAgICAgICB0aGlzLl9ib3VuZGluZ0JveCA9IHtcclxuICAgICAgICAgICAgbWluWDogLWhhbGZXaWR0aCxcclxuICAgICAgICAgICAgbWluWTogMCxcclxuICAgICAgICAgICAgbWluWjogLWhhbGZEZXB0aCxcclxuICAgICAgICAgICAgbWF4WDogaGFsZldpZHRoLFxyXG4gICAgICAgICAgICBtYXhZOiB0aGlzLl9oZWlnaHRNYXAubWF4SGVpZ2h0LFxyXG4gICAgICAgICAgICBtYXhaOiBoYWxmRGVwdGgsXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdHJpYW5nbGVJbnRlcnNlY3RzUmF5KHRyaTogVHJpYW5nbGUsIHJheTogcGN4LlJheSwgYmVzdFJlc3VsdDogSGVpZ2h0ZmllbGRSYXljYXN0UmVzdWx0KTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGlmICh0cmkuaW50ZXJzZWN0c1JheShyYXksIHRtcFJheWNhc3RWZWMpKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSB0bXBSYXljYXN0VmVjLmRpc3RhbmNlKHJheS5vcmlnaW4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGJlc3RSZXN1bHQuZGlzdGFuY2UgPiBkaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgYmVzdFJlc3VsdC5kaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0cmkuZ2V0Tm9ybWFsKGJlc3RSZXN1bHQubG9jYWxOb3JtYWwpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBiZXN0UmVzdWx0Lm5vcm1hbC5jb3B5KGJlc3RSZXN1bHQubG9jYWxOb3JtYWwpO1xyXG4gICAgICAgICAgICAgICAgYmVzdFJlc3VsdC5sb2NhbFBvaW50LmNvcHkodG1wUmF5Y2FzdFZlYyk7XHJcbiAgICAgICAgICAgICAgICBiZXN0UmVzdWx0LnBvaW50LmNvcHkodG1wUmF5Y2FzdFZlYyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGRlYnVnRHJhd1RyaWFuZ2xlTGluZXModHJpLCBwYy5Db2xvci5SRUQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZVAwID0gYmVzdFJlc3VsdC5wb2ludC5kaXN0YW5jZSh0cmkudjApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VQMSA9IGJlc3RSZXN1bHQucG9pbnQuZGlzdGFuY2UodHJpLnYxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlUDIgPSBiZXN0UmVzdWx0LnBvaW50LmRpc3RhbmNlKHRyaS52Mik7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZVAwID4gZGlzdGFuY2VQMSkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlUDEgPiBkaXN0YW5jZVAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RSZXN1bHQudmVydGV4SW5kZXggPSB0cmkuaW5kZXgyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFJlc3VsdC52ZXJ0ZXhJbmRleCA9IHRyaS5pbmRleDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlUDAgPiBkaXN0YW5jZVAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RSZXN1bHQudmVydGV4SW5kZXggPSB0cmkuaW5kZXgyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFJlc3VsdC52ZXJ0ZXhJbmRleCA9IHRyaS5pbmRleDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8vZGVidWdEcmF3VHJpYW5nbGVMaW5lcyh0cmkpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2Fzc2lnblBvc2l0aW9uKGluZGV4OiBpbnQsIGJ1ZjogUmVmT2JqZWN0PElWZWN0b3IzPikge1xyXG5cclxuICAgICAgICBjb25zdCB4ID0gaW5kZXggJSB0aGlzLl9oZWlnaHRNYXAud2lkdGggfCAwO1xyXG4gICAgICAgIGNvbnN0IHogPSBpbmRleCAvIHRoaXMuX2hlaWdodE1hcC53aWR0aCB8IDA7XHJcblxyXG4gICAgICAgIGJ1Zi54ID0gKC10aGlzLl9oZWlnaHRNYXAud2lkdGggLyAyKSArIHg7XHJcbiAgICAgICAgYnVmLnkgPSB0aGlzLl9oZWlnaHRNYXAuZ2V0KHgsIHopO1xyXG4gICAgICAgIGJ1Zi56ID0gKC10aGlzLl9oZWlnaHRNYXAuZGVwdGggLyAyKSArIHo7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9xdWFkQWN0aW9uKHJzOiBJR3JpZFJheWNhc3RTdGF0ZSwgcmF5OiBwY3guUmF5LCByZXN1bHQ6IEhlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdCk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICBjb25zdCB4ID0gcnMucHJldlg7XHJcbiAgICAgICAgY29uc3QgeiA9IHJzLnByZXZaO1xyXG5cclxuICAgICAgICBpZiAoeCA8IDAgfHwgeiA8IDAgfHwgeCA+PSB0aGlzLl9oZWlnaHRNYXAud2lkdGggLSAxIHx8IHogPj0gdGhpcy5faGVpZ2h0TWFwLmRlcHRoIC0gMSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG4gICAgICAgIGNvbnN0IHhGYW4yID0geCAlIDIgPT09IDA7XHJcbiAgICAgICAgY29uc3QgekZhbjIgPSB6ICUgMiA9PT0gMDtcclxuXHJcbiAgICAgICAgbGV0IGluZGV4MCwgaW5kZXgxLCBpbmRleDI7XHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHhGYW4yICE9PSB6RmFuMikge1xyXG4gICAgICAgICAgICAgICAgaW5kZXgwID0gKHogKyAwKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMCk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDEgPSAoeiArIDEpICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAwKTtcclxuICAgICAgICAgICAgICAgIGluZGV4MiA9ICh6ICsgMCkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5kZXgwID0gKHogKyAwKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMCk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDEgPSAoeiArIDEpICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAxKTtcclxuICAgICAgICAgICAgICAgIGluZGV4MiA9ICh6ICsgMCkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9hc3NpZ25Qb3NpdGlvbihpbmRleDAsIHRtcFBvczEpO1xyXG4gICAgICAgICAgICB0aGlzLl9hc3NpZ25Qb3NpdGlvbihpbmRleDEsIHRtcFBvczIpO1xyXG4gICAgICAgICAgICB0aGlzLl9hc3NpZ25Qb3NpdGlvbihpbmRleDIsIHRtcFBvczMpO1xyXG5cclxuICAgICAgICAgICAgdHJpYW5nbGUuaW5kZXgwID0gaW5kZXgwO1xyXG4gICAgICAgICAgICB0cmlhbmdsZS5pbmRleDEgPSBpbmRleDE7XHJcbiAgICAgICAgICAgIHRyaWFuZ2xlLmluZGV4MiA9IGluZGV4MjtcclxuXHJcbiAgICAgICAgICAgIHRyaWFuZ2xlLnNldCh0bXBQb3MxLCB0bXBQb3MyLCB0bXBQb3MzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl90cmlhbmdsZUludGVyc2VjdHNSYXkodHJpYW5nbGUsIHJheSwgcmVzdWx0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHhGYW4yICE9PSB6RmFuMikge1xyXG4gICAgICAgICAgICAgICAgaW5kZXgwID0gKHogKyAwKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDEgPSAoeiArIDEpICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAwKTtcclxuICAgICAgICAgICAgICAgIGluZGV4MiA9ICh6ICsgMSkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5kZXgwID0gKHogKyAwKSAqIHRoaXMuX2hlaWdodE1hcC53aWR0aCArICh4ICsgMCk7XHJcbiAgICAgICAgICAgICAgICBpbmRleDEgPSAoeiArIDEpICogdGhpcy5faGVpZ2h0TWFwLndpZHRoICsgKHggKyAwKTtcclxuICAgICAgICAgICAgICAgIGluZGV4MiA9ICh6ICsgMSkgKiB0aGlzLl9oZWlnaHRNYXAud2lkdGggKyAoeCArIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9hc3NpZ25Qb3NpdGlvbihpbmRleDAsIHRtcFBvczEpO1xyXG4gICAgICAgICAgICB0aGlzLl9hc3NpZ25Qb3NpdGlvbihpbmRleDEsIHRtcFBvczIpO1xyXG4gICAgICAgICAgICB0aGlzLl9hc3NpZ25Qb3NpdGlvbihpbmRleDIsIHRtcFBvczMpO1xyXG5cclxuICAgICAgICAgICAgdHJpYW5nbGUuaW5kZXgwID0gaW5kZXgwO1xyXG4gICAgICAgICAgICB0cmlhbmdsZS5pbmRleDEgPSBpbmRleDE7XHJcbiAgICAgICAgICAgIHRyaWFuZ2xlLmluZGV4MiA9IGluZGV4MjtcclxuXHJcbiAgICAgICAgICAgIHRyaWFuZ2xlLnNldCh0bXBQb3MxLCB0bXBQb3MyLCB0bXBQb3MzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl90cmlhbmdsZUludGVyc2VjdHNSYXkodHJpYW5nbGUsIHJheSwgcmVzdWx0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbnRlcnNlY3RzUmF5KGxvY2FsUmF5OiBwY3guUmF5LCByZXN1bHQ6IEhlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdCA9IG5ldyBIZWlnaHRmaWVsZFJheWNhc3RSZXN1bHQoKSk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICBpZiAoIWludGVyc2VjdHNSYXlCb3godGhpcy5fYm91bmRpbmdCb3gsIGxvY2FsUmF5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9iZWdpblBvcy5jb3B5KGxvY2FsUmF5Lm9yaWdpbik7XHJcbiAgICAgICAgdGhpcy5fYmVnaW5Qb3MueCArPSB0aGlzLl9ib3VuZGluZ0JveC5tYXhYO1xyXG4gICAgICAgIHRoaXMuX2JlZ2luUG9zLnogKz0gdGhpcy5fYm91bmRpbmdCb3gubWF4WjtcclxuXHJcbiAgICAgICAgdGhpcy5fZW5kUG9zLmNvcHkobG9jYWxSYXkuZGlyZWN0aW9uKS5hZGQodGhpcy5fYmVnaW5Qb3MpO1xyXG5cclxuICAgICAgICBsZXQgcmF5RGlyZWN0aW9uRmxhdFggPSB0aGlzLl9lbmRQb3MueCAtIHRoaXMuX2JlZ2luUG9zLng7XHJcbiAgICAgICAgbGV0IHJheURpcmVjdGlvbkZsYXRaID0gdGhpcy5fZW5kUG9zLnogLSB0aGlzLl9iZWdpblBvcy56O1xyXG5cclxuICAgICAgICBjb25zdCBtYXhEaXN0YW5jZUZsYXQgPSBNYXRoLnNxcnQocmF5RGlyZWN0aW9uRmxhdFggKiogMiArIHJheURpcmVjdGlvbkZsYXRaICoqIDIpO1xyXG5cclxuICAgICAgICBpZiAobWF4RGlzdGFuY2VGbGF0IDwgMC4wMDAxKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnNpZGVyIHRoZSByYXkgdmVydGljYWxcclxuICAgICAgICAgICAgcmF5RGlyZWN0aW9uRmxhdFggPSAwO1xyXG4gICAgICAgICAgICByYXlEaXJlY3Rpb25GbGF0WiA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByYXlEaXJlY3Rpb25GbGF0WCAvPSBtYXhEaXN0YW5jZUZsYXQ7XHJcbiAgICAgICAgICAgIHJheURpcmVjdGlvbkZsYXRaIC89IG1heERpc3RhbmNlRmxhdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHhpU3RlcCA9IHJheURpcmVjdGlvbkZsYXRYID4gMCA/IDEgOiByYXlEaXJlY3Rpb25GbGF0WCA8IDAgPyAtMSA6IDA7XHJcbiAgICAgICAgY29uc3QgemlTdGVwID0gcmF5RGlyZWN0aW9uRmxhdFogPiAwID8gMSA6IHJheURpcmVjdGlvbkZsYXRaIDwgMCA/IC0xIDogMDtcclxuXHJcbiAgICAgICAgY29uc3QgcGFyYW1EZWx0YVggPSB4aVN0ZXAgIT09IDAgPyAxIC8gTWF0aC5hYnMocmF5RGlyZWN0aW9uRmxhdFgpIDogaW5maW5pdGU7XHJcbiAgICAgICAgY29uc3QgcGFyYW1EZWx0YVogPSB6aVN0ZXAgIT09IDAgPyAxIC8gTWF0aC5hYnMocmF5RGlyZWN0aW9uRmxhdFopIDogaW5maW5pdGU7XHJcblxyXG4gICAgICAgIGxldCBwYXJhbUNyb3NzWDtcclxuICAgICAgICBsZXQgcGFyYW1Dcm9zc1o7XHJcblxyXG4gICAgICAgIGlmICh4aVN0ZXAgIT09IDApIHtcclxuICAgICAgICAgICAgcGFyYW1Dcm9zc1ggPSB4aVN0ZXAgPT09IDFcclxuICAgICAgICAgICAgICAgID8gKE1hdGguY2VpbCh0aGlzLl9iZWdpblBvcy54KSAtIHRoaXMuX2JlZ2luUG9zLngpICogcGFyYW1EZWx0YVhcclxuICAgICAgICAgICAgICAgIDogKHRoaXMuX2JlZ2luUG9zLnggLSBNYXRoLmZsb29yKHRoaXMuX2JlZ2luUG9zLngpKSAqIHBhcmFtRGVsdGFYO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGFyYW1Dcm9zc1ggPSBpbmZpbml0ZTsgIC8vIFdpbGwgbmV2ZXIgY3Jvc3Mgb24gWFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHppU3RlcCAhPT0gMCkge1xyXG4gICAgICAgICAgICBwYXJhbUNyb3NzWiA9IHppU3RlcCA9PT0gMVxyXG4gICAgICAgICAgICAgICAgPyAoTWF0aC5jZWlsKHRoaXMuX2JlZ2luUG9zLnopIC0gdGhpcy5fYmVnaW5Qb3MueikgKiBwYXJhbURlbHRhWlxyXG4gICAgICAgICAgICAgICAgOiAodGhpcy5fYmVnaW5Qb3MueiAtIE1hdGguZmxvb3IodGhpcy5fYmVnaW5Qb3MueikpICogcGFyYW1EZWx0YVo7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbUNyb3NzWiA9IGluZmluaXRlOyAgLy8gV2lsbCBuZXZlciBjcm9zcyBvbiBaXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByczogSUdyaWRSYXljYXN0U3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMuX2JlZ2luUG9zLnggfCAwLFxyXG4gICAgICAgICAgICB6OiB0aGlzLl9iZWdpblBvcy56IHwgMCxcclxuICAgICAgICAgICAgcGFyYW06IDAsXHJcbiAgICAgICAgICAgIHByZXZYOiAwLFxyXG4gICAgICAgICAgICBwcmV2WjogMCxcclxuICAgICAgICAgICAgcHJldlBhcmFtOiAwLFxyXG4gICAgICAgICAgICBtYXhEaXN0YW5jZUZsYXQ6IG1heERpc3RhbmNlRmxhdCxcclxuICAgICAgICB9O1xyXG5cclxuXHQgICAgLy8gV29ya2Fyb3VuZCBjYXNlcyB3aGVyZSB0aGUgcmF5IHN0YXJ0cyBhdCBhbiBpbnRlZ2VyIHBvc2l0aW9uXHJcblx0ICAgIGlmIChwYXJhbUNyb3NzWCA9PT0gMC4wKSB7XHJcbiAgICAgICAgICAgIHBhcmFtQ3Jvc3NYICs9IHBhcmFtRGVsdGFYO1xyXG4gICAgICAgICAgICAvLyBJZiBnb2luZyBiYWNrd2FyZHMsIHdlIHNob3VsZCBpZ25vcmUgdGhlIHBvc2l0aW9uIHdlIHdvdWxkIGdldCBieSB0aGUgYWJvdmUgZmxvb3JpbmcsXHJcbiAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIHJheSBpcyBub3QgaGVhZGluZyBpbiB0aGF0IGRpcmVjdGlvblxyXG4gICAgICAgICAgICBpZiAoeGlTdGVwID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcnMueCAtPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGFyYW1Dcm9zc1ogPT09IDAuMCkge1xyXG4gICAgICAgICAgICBwYXJhbUNyb3NzWiArPSBwYXJhbURlbHRhWjtcclxuICAgICAgICAgICAgaWYgKHppU3RlcCA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgICBycy56IC09IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGFzSGl0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHdoaWxlICghaGFzSGl0KSB7XHJcblxyXG4gICAgICAgICAgICBycy5wcmV2WCA9IHJzLng7XHJcbiAgICAgICAgICAgIHJzLnByZXZaID0gcnMuejtcclxuICAgICAgICAgICAgcnMucHJldlBhcmFtID0gcnMucGFyYW07XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHBhcmFtQ3Jvc3NYIDwgcGFyYW1Dcm9zc1opIHtcclxuICAgICAgICAgICAgICAgIC8vIFggbGFuZVxyXG4gICAgICAgICAgICAgICAgcnMueCArPSB4aVN0ZXA7XHJcbiAgICAgICAgICAgICAgICAvLyBBc3NpZ24gYmVmb3JlIGFkdmFuY2luZyB0aGUgcGFyYW0sXHJcbiAgICAgICAgICAgICAgICAvLyB0byBiZSBpbiBzeW5jIHdpdGggdGhlIGluaXRpYWxpemF0aW9uIHN0ZXBcclxuICAgICAgICAgICAgICAgIHJzLnBhcmFtID0gcGFyYW1Dcm9zc1g7XHJcbiAgICAgICAgICAgICAgICBwYXJhbUNyb3NzWCArPSBwYXJhbURlbHRhWDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFogbGFuZVxyXG4gICAgICAgICAgICAgICAgcnMueiArPSB6aVN0ZXA7XHJcbiAgICAgICAgICAgICAgICBycy5wYXJhbSA9IHBhcmFtQ3Jvc3NaO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1Dcm9zc1ogKz0gcGFyYW1EZWx0YVo7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy5fcXVhZEFjdGlvbihycywgbG9jYWxSYXksIHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgIGhhc0hpdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChycy5wYXJhbSA+IHJzLm1heERpc3RhbmNlRmxhdCkge1xyXG4gICAgICAgICAgICAgICAgcnMucGFyYW0gPSBycy5tYXhEaXN0YW5jZUZsYXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc0hpdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW50ZXJzZWN0c1JheSh3b3JsZFRyYW5mb3JtOiBwY3guTWF0NCB8IG51bGwgfCB1bmRlZmluZWQsIHJheTogcGN4LlJheSwgcmVzdWx0OiBIZWlnaHRmaWVsZFJheWNhc3RSZXN1bHQgPSBuZXcgSGVpZ2h0ZmllbGRSYXljYXN0UmVzdWx0KCkpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgaWYgKHdvcmxkVHJhbmZvcm0pIHtcclxuICAgICAgICAgICAgbW9kZWxUcmFuc2Zvcm0uY29weSh3b3JsZFRyYW5mb3JtKS5pbnZlcnQoKTtcclxuICAgICAgICAgICAgbW9kZWxUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnQocmF5Lm9yaWdpbiwgdG1wUmF5Lm9yaWdpbik7XHJcbiAgICAgICAgICAgIG1vZGVsVHJhbnNmb3JtLnRyYW5zZm9ybVZlY3RvcihyYXkuZGlyZWN0aW9uLCB0bXBSYXkuZGlyZWN0aW9uKTtcclxuICAgIFxyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybS5jb3B5KHdvcmxkVHJhbmZvcm0pO1xyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybUlzSWRlbnRpdHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIWRlYnVnVHJhbnNmb3JtSXNJZGVudGl0eSkge1xyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybS5zZXRJZGVudGl0eSgpO1xyXG4gICAgICAgICAgICBkZWJ1Z1RyYW5zZm9ybUlzSWRlbnRpdHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGhpdCA9IHRoaXMuX2ludGVyc2VjdHNSYXkod29ybGRUcmFuZm9ybSA/IHRtcFJheSA6IHJheSwgcmVzdWx0KTtcclxuICAgIFxyXG4gICAgICAgIGlmIChoaXQgJiYgd29ybGRUcmFuZm9ybSkge1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgd29ybGQgcG9pbnQgYW5kIG5vcm1hbCwgYnV0IHNhdmUgbG9jYWxcclxuICAgICAgICAgICAgd29ybGRUcmFuZm9ybS50cmFuc2Zvcm1Qb2ludChyZXN1bHQucG9pbnQsIHJlc3VsdC5wb2ludCk7XHJcbiAgICAgICAgICAgIHdvcmxkVHJhbmZvcm0udHJhbnNmb3JtVmVjdG9yKHJlc3VsdC5ub3JtYWwsIHJlc3VsdC5ub3JtYWwpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiAhIWhpdDtcclxuICAgIH1cclxufSIsImV4cG9ydCBpbnRlcmZhY2UgSVBhdGNoIHtcclxuICAgIHJlYWRvbmx5IGluZGV4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtaW5YOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtaW5aOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBzaXplOiBudW1iZXI7XHJcbiAgICByZWFkb25seSB4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSB6OiBudW1iZXI7XHJcbn0iLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoIH0gZnJvbSBcIi4vSVBhdGNoLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaExvZEJhc2UgfSBmcm9tIFwiLi9JUGF0Y2hMb2QubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVNpbmdsZUxvZEluZm8gfSBmcm9tIFwiLi9Mb2RJbmZvLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElHcmlkUGF0Y2hlZExvZCB9IGZyb20gXCIuL0dyaWRCdWlsZGVyLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJSW5zdGFuY2luZ09iamVjdCB7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFRPYmplY3QgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdCwgVERhdGEgZXh0ZW5kcyBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXk+IHtcclxuICAgIHZlcnRleEJhc2VJbmRleDogaW50O1xyXG4gICAgdmVydGV4Q291bnQ6IGludDtcclxuICAgIGxvZDogSVBhdGNoTG9kQmFzZTtcclxuICAgIGRhdGE6IFREYXRhO1xyXG4gICAgY291bnQ6IGludDtcclxuICAgIG9iamVjdDogVE9iamVjdCB8IG51bGw7XHJcbiAgICBoYXNDaGFuZ2VzOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBUQnVsZGVyPFRPYmplY3QgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdCwgVERhdGEgZXh0ZW5kcyBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXk+ID0gKGxvZEluZm86IElQYXRjaExvZEJhc2UsIHByaW1pdGl2ZUluZm86IElTaW5nbGVMb2RJbmZvLCBpbnN0YW5jaW5nRGF0YTogVERhdGEsIG1heEluc3RhbmNpbmdDb3VudDogaW50KSA9PiBUT2JqZWN0IHwgbnVsbDtcclxuZXhwb3J0IHR5cGUgVERlc3RydWN0b3I8VE9iamVjdCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0PiA9IChvYmplY3Q6IFRPYmplY3QpID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIFRTZWxlY3RvcjxUT2JqZWN0IGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3QsIFREYXRhIGV4dGVuZHMgVWludDE2QXJyYXkgfCBVaW50OEFycmF5PiA9IChpdGVtOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VE9iamVjdCwgVERhdGE+KSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGF0Y2hJbnN0YW5jaW5nPFRPYmplY3QgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdCwgVERhdGEgZXh0ZW5kcyBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXk+IHtcclxuXHJcbiAgICBidWlsZChncmlkOiBJR3JpZFBhdGNoZWRMb2QsIG9iamVjdEJ1aWxkZXI/OiBUQnVsZGVyPFRPYmplY3QsIFREYXRhPik6IHZvaWQ7XHJcblxyXG4gICAgZm9yRWFjaChmbjogVFNlbGVjdG9yPFRPYmplY3QsIFREYXRhPik6IHZvaWQ7XHJcblxyXG4gICAgZGVzdHJveShkZXN0cnVjdG9yOiBURGVzdHJ1Y3RvcjxUT2JqZWN0Pik6IHZvaWQ7XHJcblxyXG4gICAgZ2V0KGxvZDogSVBhdGNoTG9kQmFzZSk6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxUT2JqZWN0LCBURGF0YT47XHJcblxyXG4gICAgaW5jcmVtZW50KGxvZDogSVBhdGNoTG9kQmFzZSwgcGF0Y2g6IElQYXRjaCk6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxUT2JqZWN0LCBURGF0YT47XHJcblxyXG4gICAgemVyb0FsbCgpOiB2b2lkO1xyXG59IiwiaW1wb3J0IHsgZmxvYXQsIGludCB9IGZyb20gXCIuL1R5cGVzLm1qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGV4dCh2YWw6IG51bWJlciwgbWluV2lkdGg6IG51bWJlciwgcHJlZml4OiBzdHJpbmcpIHtcblxuICAgIGNvbnN0IHN0ciA9IHZhbC50b1N0cmluZygpO1xuICAgIGNvbnN0IHN0ckxlbiA9IHN0ci5sZW5ndGg7XG4gICAgY29uc3QgYXBwZW5kQ291bnQgPSBtaW5XaWR0aCAtIHN0ckxlbjtcblxuICAgIGxldCByZXN1bHQgPSBzdHI7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFwcGVuZENvdW50OyBpKyspIHtcbiAgICAgICAgcmVzdWx0ID0gcHJlZml4ICsgcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcblx0cmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4obWF4LCB2YWx1ZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tRmxvYXQoKSB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21GbG9hdFJhbmdlKHN0YXJ0OiBmbG9hdCwgZW5kOiBmbG9hdCkge1xuXG4gICAgaWYgKGVuZCA9PSBzdGFydCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJhbmRvbSByYW5nZVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBkZWx0YSA9IGVuZCAtIHN0YXJ0O1xuXG4gICAgY29uc3QgcmFuZG9tVmFsdWUgPSByYW5kb21GbG9hdCgpICogZGVsdGEgKyBzdGFydDtcblxuICAgIHJldHVybiByYW5kb21WYWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNOZXh0UG93ZXJPZlR3byh4OiBpbnQpOiBpbnQge1xuICAgIFxuICAgIGxldCByZXQgPSAxO1xuXG4gICAgaWYgKHggPT0gMSkge1xuICAgICAgICByZXR1cm4gMjtcbiAgICB9XG5cbiAgICB3aGlsZSAocmV0IDwgeCkge1xuICAgICAgICByZXQgPSByZXQgKiAyO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG59XG5cbi8qKiBBIHJhbmRvbSBudW1iZXIgZnJvbSAtMS4wIHRvIDEuMCAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5yYW5kKCkge1xuXHRyZXR1cm4gTWF0aC5yYW5kb20oKSAqIDIuMCAtIDEuMDtcbn1cblxuZXhwb3J0IGNvbnN0IHNldFByZWNpc2lvbiA9IChncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlLCBzaGFkZXJDb2RlOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gXCJwcmVjaXNpb24gXCIgKyBncmFwaGljc0RldmljZS5wcmVjaXNpb24gKyBcIiBmbG9hdDtcXG5cIiArIHNoYWRlckNvZGU7XG59XG5cbmV4cG9ydCBjb25zdCBsaXR0bGVFbmRpYW4gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHVpbnQ4QXJyYXkgID0gbmV3IFVpbnQ4QXJyYXkoWzB4QUEsIDB4QkJdKTtcbiAgICBjb25zdCB1aW50MTZhcnJheSA9IG5ldyBVaW50MTZBcnJheSh1aW50OEFycmF5LmJ1ZmZlcik7XG4gICAgcmV0dXJuIHVpbnQxNmFycmF5WzBdID09PSAweEJCQUE7XG59KSgpO1xuXG5leHBvcnQgY29uc3QgY2hlY2tTdXBwb3J0UjMyRlRleHR1cmUgPSAoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkgPT4ge1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPOiBuZWVkIG1vcmUgdGVzdC4uLlxuICAgICAgICAvLyBUT0RPOiBvbiBpcGhvbmUgbm90IHdvcmsgcjMyZiB0ZXh0dXJlc1xuICAgICAgICBpZiAobmF2aWdhdG9yLnBsYXRmb3JtLm1hdGNoKC9pUGhvbmV8aVBvZHxpUGFkLykgIT09IG51bGwgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci5wbGF0Zm9ybS5zdGFydHNXaXRoKFwiTWFjXCIpICYmIG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChncmFwaGljc0RldmljZS5pc1dlYkdMMikge1xuXG4gICAgICAgICAgICBjb25zdCBnbCA9IChncmFwaGljc0RldmljZSBhcyBwY3guV2ViZ2xHcmFwaGljc0RldmljZSkuZ2w7XG4gICAgXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2wuZ2V0RXh0ZW5zaW9uKFwiRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdFwiKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBnbC5nZXRFeHRlbnNpb24oXCJPRVNfdGV4dHVyZV9mbG9hdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCEhcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChleCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufSIsImltcG9ydCB0eXBlIHsgaW50IH0gZnJvbSBcIi4vVHlwZXMubWpzXCI7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnNTdG9yZTJEPFQgZXh0ZW5kcyBzdHJpbmcgfCBudW1iZXIgfCBvYmplY3Q+IHtcblxuICAgIHByb3RlY3RlZCBfcDogVFtdO1xuICAgIHByb3RlY3RlZCBfY29scyA9IDA7XG4gICAgcHJvdGVjdGVkIF9yb3dzID0gMDtcblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBfaW5pdEFycmF5VHlwZShzaXplOiBpbnQpOiBUW107XG5cbiAgICBwdWJsaWMgaW5pdChjb2xzOiBpbnQsIHJvd3M6IGludCk6IHZvaWQge1xuXG4gICAgICAgIHRoaXMuX2NvbHMgPSBjb2xzO1xuICAgICAgICB0aGlzLl9yb3dzID0gcm93cztcblxuICAgICAgICBjb25zdCBzaXplID0gY29scyAqIHJvd3M7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9wID0gdGhpcy5faW5pdEFycmF5VHlwZShzaXplKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW5pdEJ5VmFsKGNvbHM6IGludCwgcm93czogaW50LCB2YWw6IFQgfCAoKCkgPT4gVCkpOiB2b2lkIHtcblxuICAgICAgICB0aGlzLmluaXQoY29scywgcm93cyk7XG5cbiAgICAgICAgY29uc3Qgc2l6ZSA9IGNvbHMgKiByb3dzO1xuICAgICAgICBjb25zdCB2YWxJc0Z1bmMgPSB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fcFtpXSA9IHZhbElzRnVuYyA/IHZhbCgpIDogdmFsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGluaXRCeVN0b3JlKGNvbHM6IGludCwgcm93czogaW50LCB2YWw6IFJlY29yZDxpbnQsIFQ+KTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2NvbHMgPSBjb2xzO1xuICAgICAgICB0aGlzLl9yb3dzID0gcm93cztcbiAgICAgICAgdGhpcy5fcCA9IHZhbCBhcyBUW107XG4gICAgfVxuXG4gICAgcHVibGljIGFkZHIoKTogUmVjb3JkPG51bWJlciwgVD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2l6ZSgpOiBpbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5fcm93cyAqIHRoaXMuX2NvbHM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldChjb2w6IGludCwgcm93OiBpbnQpOiBUIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bbcm93ICogdGhpcy5fY29scyArIGNvbF07XG4gICAgfVxuXG4gICAgcHVibGljIHNldChjb2w6IGludCwgcm93OiBpbnQsIHZhbHVlOiBUKSB7XG4gICAgICAgIHRoaXMuX3Bbcm93ICogdGhpcy5fY29scyArIGNvbF0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QnlJbmRleChpbmRleDogaW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wW2luZGV4XTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHNldEJ5SW5kZXgoaW5kZXg6IGludCwgdmFsdWU6IFQpIHtcbiAgICAgICAgdGhpcy5fcFtpbmRleF0gPSB2YWx1ZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBPYmpTdG9yZTJEPFQgZXh0ZW5kcyBvYmplY3Q+IGV4dGVuZHMgQWJzU3RvcmUyRDxUPiB7XG5cbiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgX2luaXRBcnJheVR5cGUoc2l6ZTogbnVtYmVyKTogVFtdIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheTxUPihzaXplKTtcbiAgICB9XG59IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCwgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUGF0Y2hMb2QgfSBmcm9tIFwiLi9JUGF0Y2hMb2QubWpzXCI7XHJcbmltcG9ydCB0eXBlIExvZE1hbmFnZXIgZnJvbSBcIi4vTG9kTWFuYWdlci5tanNcIjtcclxuaW1wb3J0IHsgZ2V0VGV4dCB9IGZyb20gXCIuLi9FeHRyYXMvVXRpbHMubWpzXCI7XHJcbmltcG9ydCB7IE9ialN0b3JlMkQgfSBmcm9tIFwiLi4vRXh0cmFzL1N0b3JlMkQubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgZGVmYXVsdFBhdGNoTG9kOiBSZWFkb25seTxJUGF0Y2hMb2Q+ID0ge1xyXG4gICAgZGlzdGFuY2U6IDAsXHJcbiAgICBjb3JlOiAgICAgMCxcclxuICAgIGxlZnQ6ICAgICAwLFxyXG4gICAgcmlnaHQ6ICAgIDAsXHJcbiAgICB0b3A6ICAgICAgMCxcclxuICAgIGJvdHRvbTogICAwLFxyXG59XHJcblxyXG5jb25zdCBnZXRaZXJvUGF0Y2hMb2QgPSAoKTogSVBhdGNoTG9kID0+ICh7XHJcbiAgICBkaXN0YW5jZTogMCxcclxuICAgIGNvcmU6ICAgICAwLFxyXG4gICAgbGVmdDogICAgIDAsXHJcbiAgICByaWdodDogICAgMCxcclxuICAgIHRvcDogICAgICAwLFxyXG4gICAgYm90dG9tOiAgIDAsXHJcbn0pO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTG9kU3RhdGUge1xyXG4gICAgZ2V0UGF0Y2hMb2QocGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50KTogSVBhdGNoTG9kO1xyXG4gICAgZ2V0UGF0Y2hMb2RCeUluZGV4KGluZGV4OiBpbnQpOiBJUGF0Y2hMb2Q7XHJcbiAgICBnZXRMb2RGb3JEaXN0YW5jZShkaXN0YW5jZTogZmxvYXQpOiBpbnQ7XHJcbiAgICB1cGRhdGVQYXRjaExvZChwYXRjaFg6IG51bWJlciwgcGF0Y2haOiBudW1iZXIpOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2RTdGF0ZSBpbXBsZW1lbnRzIElMb2RTdGF0ZSB7XHJcblxyXG4gICAgcHJpdmF0ZSBfekZhcjogZmxvYXQ7XHJcbiAgICBwcml2YXRlIF9tYXA6IE9ialN0b3JlMkQ8SVBhdGNoTG9kPjtcclxuICAgIHByaXZhdGUgX3JlZ2lvbnM6IGZsb2F0W107XHJcbiAgICBwcml2YXRlIF9sb2RNYW5hZ2VyOiBMb2RNYW5hZ2VyO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgbG9kTWFuYWdlcigpIHsgcmV0dXJuIHRoaXMuX2xvZE1hbmFnZXI7IH1cclxuICAgIHB1YmxpYyBnZXQgekZhcigpIHsgcmV0dXJuIHRoaXMuX3pGYXI7IH1cclxuICAgIHB1YmxpYyBnZXQgcmVnaW9ucygpIHsgcmV0dXJuIHRoaXMuX3JlZ2lvbnM7IH1cclxuICAgIHB1YmxpYyBnZXQgbWFwKCkgeyByZXR1cm4gdGhpcy5fbWFwOyB9XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKGxvZE1hbmFnZXI6IExvZE1hbmFnZXIsIHpGYXI6IGZsb2F0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRMb2RNYW5hZ2VyKGxvZE1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuc2V0WkZhcih6RmFyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0TG9kTWFuYWdlcihsb2RNYW5hZ2VyOiBMb2RNYW5hZ2VyLCByZW1vdmVGcm9tUHJldjogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5fbG9kTWFuYWdlciAmJiByZW1vdmVGcm9tUHJldikge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2RNYW5hZ2VyLnJlbW92ZVN0YXRlKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbG9kTWFuYWdlciA9IGxvZE1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5fbG9kTWFuYWdlci5hZGRTdGF0ZSh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcmVnaW9ucyA9IG5ldyBBcnJheTxudW1iZXI+KHRoaXMuX2xvZE1hbmFnZXIuY291bnQpO1xyXG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBPYmpTdG9yZTJEPElQYXRjaExvZD4oKTtcclxuICAgICAgICB0aGlzLl9tYXAuaW5pdEJ5VmFsKHRoaXMuX2xvZE1hbmFnZXIubnVtUGF0Y2hlc1gsIHRoaXMuX2xvZE1hbmFnZXIubnVtUGF0Y2hlc1osIGdldFplcm9QYXRjaExvZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fbG9kTWFuYWdlcj8ucmVtb3ZlU3RhdGUodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fbG9kTWFuYWdlciA9IG51bGwhO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRaRmFyKHpGYXI6IGZsb2F0KSB7XHJcbiAgICAgICAgdGhpcy5fekZhciA9IHpGYXI7XHJcbiAgICAgICAgdGhpcy5fY2FsY0xvZFJlZ2lvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2NhbGNMb2RSZWdpb25zKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhlIHJpbmcgc3lzdGVtIHRvIGRldGVybWluZSB0aGUgTE9ELlxyXG4gICAgICAgIC8vIFRPRE86IEJhc2VkIG9uIHRoZSBoZWlnaHRzIHdlIGNhbiBjYWxjdWxhdGUgdGhlIG9wdGltYWwgbG9kc1xyXG5cclxuICAgICAgICBsZXQgc3VtID0gMDtcclxuICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fcmVnaW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBzdW0gKz0gaSArIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgeCA9IHRoaXMuX3pGYXIgLyBzdW07XHJcbiAgICAgICAgbGV0IHRlbXAgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9yZWdpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1clJhbmdlID0gKHggKiAoaSArIDEpKSB8IDA7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlZ2lvbnNbaV0gPSB0ZW1wICsgY3VyUmFuZ2U7XHJcbiAgICAgICAgICAgIHRlbXAgKz0gY3VyUmFuZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQYXRjaExvZChwYXRjaFg6IGludCwgcGF0Y2haOiBpbnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmdldChwYXRjaFgsIHBhdGNoWik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBhdGNoTG9kQnlJbmRleChpbmRleDogaW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5nZXRCeUluZGV4KGluZGV4KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGdldExvZEZvckRpc3RhbmNlKGRpc3RhbmNlOiBmbG9hdCkge1xyXG5cclxuICAgICAgICBsZXQgbG9kID0gdGhpcy5fcmVnaW9ucy5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3JlZ2lvbnMubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IHRoaXMuX3JlZ2lvbnNbaV0pIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbG9kID0gaTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGxvZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlUGF0Y2hMb2QocGF0Y2hYOiBudW1iZXIsIHBhdGNoWjogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGl0ZW0gICAgPSB0aGlzLl9tYXAuZ2V0KHBhdGNoWCwgcGF0Y2haKTtcclxuICAgICAgICBjb25zdCBjb3JlTG9kID0gaXRlbS5jb3JlO1xyXG5cclxuICAgICAgICBsZXQgaGFzQ2hhbmdlICAgPSBmYWxzZTtcclxuICAgICAgICBsZXQgaW5kZXhMZWZ0ICAgPSBwYXRjaFg7XHJcbiAgICAgICAgbGV0IGluZGV4UmlnaHQgID0gcGF0Y2hYO1xyXG4gICAgICAgIGxldCBpbmRleFRvcCAgICA9IHBhdGNoWjtcclxuICAgICAgICBsZXQgaW5kZXhCb3R0b20gPSBwYXRjaFo7XHJcblxyXG4gICAgICAgIGlmIChwYXRjaFggPiAwKSB7XHJcblxyXG4gICAgICAgICAgICBpbmRleExlZnQtLTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSBpdGVtLmxlZnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLl9tYXAuZ2V0KGluZGV4TGVmdCwgcGF0Y2haKS5jb3JlID4gY29yZUxvZCA/IDEgOiAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0ubGVmdCA9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICBoYXNDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGF0Y2hYIDwgdGhpcy5fbG9kTWFuYWdlci5udW1QYXRjaGVzWCAtIDEpIHtcclxuXHJcbiAgICAgICAgICAgIGluZGV4UmlnaHQrKztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSBpdGVtLnJpZ2h0O1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5fbWFwLmdldChpbmRleFJpZ2h0LCBwYXRjaFopLmNvcmUgPiBjb3JlTG9kID8gMSA6IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5yaWdodCA9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICBoYXNDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGF0Y2haID4gMCkge1xyXG5cclxuICAgICAgICAgICAgaW5kZXhCb3R0b20tLTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSBpdGVtLmJvdHRvbTtcclxuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuX21hcC5nZXQocGF0Y2hYLCBpbmRleEJvdHRvbSkuY29yZSA+IGNvcmVMb2QgPyAxIDogMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChwcmV2ICE9PSBuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmJvdHRvbSA9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICBoYXNDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGF0Y2haIDwgdGhpcy5fbG9kTWFuYWdlci5udW1QYXRjaGVzWiAtIDEpIHtcclxuXHJcbiAgICAgICAgICAgIGluZGV4VG9wKys7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcmV2ID0gaXRlbS50b3A7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLl9tYXAuZ2V0KHBhdGNoWCwgaW5kZXhUb3ApLmNvcmUgPiBjb3JlTG9kID8gMSA6IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS50b3AgPSBuZXh0O1xyXG4gICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJpbnRMb2RNYXAoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heExvZE1heFogPSB0aGlzLl9sb2RNYW5hZ2VyLm51bVBhdGNoZXNaIC0gMTtcclxuICAgICAgICBjb25zdCBtYXhMb2RNYXhYID0gdGhpcy5fbG9kTWFuYWdlci5udW1QYXRjaGVzWDtcclxuXHJcbiAgICAgICAgbGV0IG1heENvcmUgPSAwO1xyXG4gICAgICAgIGxldCBzdHIgPSAnJztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kTWFwWiA9IG1heExvZE1heFo7IGxvZE1hcFogPiAtMTsgbG9kTWFwWi0tKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBsb2RNYXBYID0gMDsgbG9kTWFwWCA8IG1heExvZE1heFg7IGxvZE1hcFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fbWFwLmdldChsb2RNYXBYLCBsb2RNYXBaKS5jb3JlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXhDb3JlIDwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhDb3JlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGxvZE1heE51bWJlckNvdW50ICA9IG1heExvZE1heFoudG9TdHJpbmcoKS5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgY29yZU1heE51bWJlckNvdW50ID0gbWF4Q29yZS50b1N0cmluZygpLmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBsb2RNYXBaID0gbWF4TG9kTWF4WjsgbG9kTWFwWiA+IC0xOyBsb2RNYXBaLS0pIHtcclxuXHJcbiAgICAgICAgICAgIHN0ciArPSBnZXRUZXh0KGxvZE1hcFosIGxvZE1heE51bWJlckNvdW50LCAnICcpICsgJzogJztcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGxvZE1hcFggPSAwOyBsb2RNYXBYIDwgbWF4TG9kTWF4WDsgbG9kTWFwWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLl9tYXAuZ2V0KGxvZE1hcFgsIGxvZE1hcFopLmNvcmU7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RyICs9IGdldFRleHQodmFsdWUsIGNvcmVNYXhOdW1iZXJDb3VudCwgJyAnKSArICcgJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3RyICs9ICdcXG4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coc3RyKTtcclxuICAgIH1cclxufSIsImltcG9ydCB0eXBlIHsgUmVmT2JqZWN0LCBJVmVjdG9yMywgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUmVhZG9ubHlBYnNIZWlnaHRNYXAgfSBmcm9tIFwiLi9BYnNIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUxvZFN0YXRlIH0gZnJvbSBcIi4vTG9kU3RhdGUubWpzXCI7XHJcbmltcG9ydCBMb2RFc3RpbWF0b3IgZnJvbSBcIi4vTG9kRXN0aW1hdG9yLm1qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9kTWFuYWdlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBfc3RhdGVzOiBJTG9kU3RhdGVbXTtcclxuXHJcbiAgICBwcml2YXRlIF9wYXRjaFNpemU6IGludDtcclxuICAgIHByaXZhdGUgX251bVBhdGNoZXNYOiBpbnQ7XHJcbiAgICBwcml2YXRlIF9udW1QYXRjaGVzWjogaW50O1xyXG4gICAgcHJpdmF0ZSBfbG9kQ291bnQ6IGludDtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHN0YXRlcygpICAgICAgeyByZXR1cm4gdGhpcy5fc3RhdGVzOyB9XHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoU2l6ZSgpICAgeyByZXR1cm4gdGhpcy5fcGF0Y2hTaXplOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNYKCkgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1g7IH1cclxuICAgIHB1YmxpYyBnZXQgbnVtUGF0Y2hlc1ooKSB7IHJldHVybiB0aGlzLl9udW1QYXRjaGVzWjsgfVxyXG4gICAgcHVibGljIGdldCBjb3VudCgpICAgICAgIHsgcmV0dXJuIHRoaXMuX2xvZENvdW50OyB9XHJcbiAgICBwdWJsaWMgZ2V0IG1heCgpICAgICAgICAgeyByZXR1cm4gdGhpcy5fbG9kQ291bnQgLSAxOyB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGxvZEVzdGltYXRvcjogTG9kRXN0aW1hdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fc3RhdGVzID0gW107XHJcbiAgICAgICAgdGhpcy5fcGF0Y2hTaXplID0gbG9kRXN0aW1hdG9yLnBhdGNoU2l6ZTtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWCA9IGxvZEVzdGltYXRvci5udW1QYXRjaGVzWDtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWiA9IGxvZEVzdGltYXRvci5udW1QYXRjaGVzWjtcclxuICAgICAgICB0aGlzLl9sb2RDb3VudCA9IGxvZEVzdGltYXRvci5jb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFzU3RhdGUoc3RhdGU6IElMb2RTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZXMuaW5kZXhPZihzdGF0ZSkgIT09IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRTdGF0ZShzdGF0ZTogSUxvZFN0YXRlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3N0YXRlcy5pbmRleE9mKHN0YXRlKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdGVzLnB1c2goc3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIHJlbW92ZVN0YXRlKHN0YXRlOiBJTG9kU3RhdGUpIHtcclxuXHJcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5fc3RhdGVzLmluZGV4T2Yoc3RhdGUpO1xyXG5cclxuICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZXMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUobG9jYWxWaWV3UG9zOiBSZWZPYmplY3Q8SVZlY3RvcjM+LCBoZWlnaHRNYXA6IElSZWFkb25seUFic0hlaWdodE1hcCwgdXNlWVBvczogYm9vbGVhbiA9IHRydWUpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBhID0gdGhpcy5fdXBkYXRlTG9kTWFwUGFzczEobG9jYWxWaWV3UG9zLCBoZWlnaHRNYXAsIHVzZVlQb3MpO1xyXG4gICAgICAgIGNvbnN0IGIgPSB0aGlzLl91cGRhdGVMb2RNYXBQYXNzMigpO1xyXG4gICAgICAgIHJldHVybiBhIHx8IGI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF91cGRhdGVMb2RNYXBQYXNzMShsb2NhbFZpZXdQb3M6IFJlZk9iamVjdDxJVmVjdG9yMz4sIGhlaWdodE1hcDogSVJlYWRvbmx5QWJzSGVpZ2h0TWFwLCB1c2VZUG9zOiBib29sZWFuKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHdpZHRoTTEgICAgID0gaGVpZ2h0TWFwLndpZHRoIC0gMTtcclxuICAgICAgICBjb25zdCBkZXB0aE0xICAgICA9IGhlaWdodE1hcC5kZXB0aCAtIDE7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hTaXplTTEgPSB0aGlzLnBhdGNoU2l6ZSAtIDE7XHJcbiAgICAgICAgY29uc3QgaGFsZldpZHRoICAgPSB3aWR0aE0xIC8gMjtcclxuICAgICAgICBjb25zdCBoYWxmRGVwdGggICA9IGRlcHRoTTEgLyAyO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlclN0ZXAgID0gdGhpcy5wYXRjaFNpemUgLyAyIHwgMDtcclxuXHJcbiAgICAgICAgbGV0IHByb3h5UGF0Y2hDZW50ZXJZID0gMDtcclxuICAgICAgICBsZXQgaGFzQ2hhbmdlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICh1c2VZUG9zKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVDYW1lcmFYID0gTWF0aC5taW4oTWF0aC5tYXgobG9jYWxWaWV3UG9zLnggKyBoYWxmV2lkdGgsIDApLCB3aWR0aE0xKTtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplQ2FtZXJhWiA9IE1hdGgubWluKE1hdGgubWF4KGxvY2FsVmlld1Bvcy56ICsgaGFsZkRlcHRoLCAwKSwgZGVwdGhNMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbWVyYVBvc0FsdGl0dWRlID0gaGVpZ2h0TWFwLmdldChub3JtYWxpemVDYW1lcmFYIHwgMCwgbm9ybWFsaXplQ2FtZXJhWiB8IDApO1xyXG5cclxuICAgICAgICAgICAgcHJveHlQYXRjaENlbnRlclkgPSAobG9jYWxWaWV3UG9zLnkgLSBjYW1lcmFQb3NBbHRpdHVkZSkgKiogMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZE1hcFogPSAwOyBsb2RNYXBaIDwgdGhpcy5udW1QYXRjaGVzWjsgbG9kTWFwWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBsb2RNYXBYID0gMDsgbG9kTWFwWCA8IHRoaXMubnVtUGF0Y2hlc1g7IGxvZE1hcFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBsb2RNYXBYICogcGF0Y2hTaXplTTEgKyBjZW50ZXJTdGVwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeiA9IGxvZE1hcFogKiBwYXRjaFNpemVNMSArIGNlbnRlclN0ZXA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hDZW50ZXJYID0gLWhhbGZXaWR0aCArIHg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaENlbnRlclogPSAtaGFsZkRlcHRoICsgejtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlVG9DYW1lcmEgPSBNYXRoLnNxcnQoXHJcbiAgICAgICAgICAgICAgICAgICAgKGxvY2FsVmlld1Bvcy54IC0gcGF0Y2hDZW50ZXJYKSAqKiAyICtcclxuICAgICAgICAgICAgICAgICAgICAobG9jYWxWaWV3UG9zLnogLSBwYXRjaENlbnRlclopICoqIDIgK1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3h5UGF0Y2hDZW50ZXJZXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3RhdGUgb2YgdGhpcy5fc3RhdGVzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvcmVMb2QgID0gc3RhdGUuZ2V0TG9kRm9yRGlzdGFuY2UoZGlzdGFuY2VUb0NhbWVyYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hMb2QgPSBzdGF0ZS5nZXRQYXRjaExvZChsb2RNYXBYLCBsb2RNYXBaKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hMb2QuZGlzdGFuY2UgPSBkaXN0YW5jZVRvQ2FtZXJhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGF0Y2hMb2QuY29yZSAhPT0gY29yZUxvZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRjaExvZC5jb3JlID0gY29yZUxvZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoYXNDaGFuZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF91cGRhdGVMb2RNYXBQYXNzMigpIHtcclxuXHJcbiAgICAgICAgbGV0IGhhc0NoYW5nZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsb2RNYXBaID0gMDsgbG9kTWFwWiA8IHRoaXMubnVtUGF0Y2hlc1o7IGxvZE1hcForKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgbG9kTWFwWCA9IDA7IGxvZE1hcFggPCB0aGlzLm51bVBhdGNoZXNYOyBsb2RNYXBYKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN0YXRlIG9mIHRoaXMuX3N0YXRlcykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUudXBkYXRlUGF0Y2hMb2QobG9kTWFwWCwgbG9kTWFwWikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoYXNDaGFuZ2U7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBjYWxjTmV4dFBvd2VyT2ZUd28sIHJhbmRvbUZsb2F0UmFuZ2UgfSBmcm9tIFwiLi4vRXh0cmFzL1V0aWxzLm1qc1wiO1xuaW1wb3J0IHR5cGUgeyBpbnQsIGZsb2F0IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcbmltcG9ydCBIZWlnaHRmaWVsZCBmcm9tIFwiLi9IZWlnaHRmaWVsZC5tanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlkcG9pbnREaXNwSGVpZ2h0ZmllbGQgZXh0ZW5kcyBIZWlnaHRmaWVsZCB7XG5cbiAgICBwdWJsaWMgY3JlYXRlTWlkcG9pbnREaXNwbGFjZW1lbnQocm91Z2huZXNzOiBmbG9hdCk6IHZvaWQge1xuXG4gICAgICAgIGlmIChyb3VnaG5lc3MgPCAwLjApIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwicm91Z2huZXNzIG11c3QgYmUgcG9zaXRpdmVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jcmVhdGVNaWRwb2ludERpc3BsYWNlbWVudEYzMihyb3VnaG5lc3MpO1xuICAgICAgICB0aGlzLm5vcm1hbGl6ZUhlaWdodE1hcCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NyZWF0ZU1pZHBvaW50RGlzcGxhY2VtZW50RjMyKHJvdWdobmVzczogZmxvYXQpOiB2b2lkIHtcblxuICAgICAgICBsZXQgcmVjdFNpemUgID0gY2FsY05leHRQb3dlck9mVHdvKHRoaXMud2lkdGgpO1xuICAgICAgICBsZXQgY3VySGVpZ2h0ID0gcmVjdFNpemUgLyAyLjA7XG5cbiAgICAgICAgY29uc3QgaGVpZ2h0UmVkdWNlID0gTWF0aC5wb3coMi4wLCAtcm91Z2huZXNzKTtcbiAgICBcbiAgICAgICAgd2hpbGUgKHJlY3RTaXplID4gMCkge1xuXG4gICAgICAgICAgICB0aGlzLl9kaWFtb25kU3RlcChyZWN0U2l6ZSwgY3VySGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuX3NxdWFyZVN0ZXAocmVjdFNpemUsIGN1ckhlaWdodCk7XG5cbiAgICAgICAgICAgIHJlY3RTaXplID0gKHJlY3RTaXplIC8gMikgfCAwO1xuICAgICAgICAgICAgY3VySGVpZ2h0ICo9IGhlaWdodFJlZHVjZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2RpYW1vbmRTdGVwKHJlY3RTaXplOiBpbnQsIGN1ckhlaWdodDogZmxvYXQpOiB2b2lkIHtcblxuICAgICAgICBjb25zdCBIYWxmUmVjdFNpemUgPSBNYXRoLmZsb29yKHJlY3RTaXplIC8gMik7XG5cbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmRlcHRoOyB5ICs9IHJlY3RTaXplKSB7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCArPSByZWN0U2l6ZSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBuZXh0WCA9ICh4ICsgcmVjdFNpemUpICUgdGhpcy53aWR0aDtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dFkgPSAoeSArIHJlY3RTaXplKSAlIHRoaXMuZGVwdGg7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKG5leHRYIDwgeCkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0WCA9IHRoaXMud2lkdGggLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAobmV4dFkgPCB5KSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRZID0gdGhpcy5kZXB0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRvcExlZnQgICAgID0gdGhpcy5oZWlnaHRNYXAuZ2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvcFJpZ2h0ICAgID0gdGhpcy5oZWlnaHRNYXAuZ2V0KG5leHRYLCB5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3R0b21MZWZ0ICA9IHRoaXMuaGVpZ2h0TWFwLmdldCh4LCBuZXh0WSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYm90dG9tUmlnaHQgPSB0aGlzLmhlaWdodE1hcC5nZXQobmV4dFgsIG5leHRZKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBtaWRYID0gKHggKyBIYWxmUmVjdFNpemUpICUgdGhpcy53aWR0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBtaWRZID0gKHkgKyBIYWxmUmVjdFNpemUpICUgdGhpcy5kZXB0aDtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCByYW5kVmFsdWUgPSByYW5kb21GbG9hdFJhbmdlKGN1ckhlaWdodCwgLWN1ckhlaWdodCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWlkUG9pbnQgPSAodG9wTGVmdCArIHRvcFJpZ2h0ICsgYm90dG9tTGVmdCArIGJvdHRvbVJpZ2h0KSAvIDQuMDtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhlaWdodChtaWRYLCBtaWRZLCBtaWRQb2ludCArIHJhbmRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9zcXVhcmVTdGVwKHJlY3RTaXplOiBpbnQsIGN1ckhlaWdodDogZmxvYXQpOiB2b2lkIHtcblxuICAgICAgICBjb25zdCBoYWxmUmVjdFNpemUgPSAocmVjdFNpemUgLyAyKSB8IDA7XG5cbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmRlcHRoOyB5ICs9IHJlY3RTaXplKSB7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCArPSByZWN0U2l6ZSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBuZXh0WCA9ICh4ICsgcmVjdFNpemUpICUgdGhpcy53aWR0aDtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dFkgPSAoeSArIHJlY3RTaXplKSAlIHRoaXMuZGVwdGg7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKG5leHRYIDwgeCkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0WCA9IHRoaXMud2lkdGggLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAobmV4dFkgPCB5KSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRZID0gdGhpcy5kZXB0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IG1pZFggPSAoeCArIGhhbGZSZWN0U2l6ZSkgJSB0aGlzLndpZHRoO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pZFkgPSAoeSArIGhhbGZSZWN0U2l6ZSkgJSB0aGlzLmRlcHRoO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldk1pZFggPSAoeCAtIGhhbGZSZWN0U2l6ZSArIHRoaXMud2lkdGgpICUgdGhpcy53aWR0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2TWlkWSA9ICh5IC0gaGFsZlJlY3RTaXplICsgdGhpcy5kZXB0aCkgJSB0aGlzLmRlcHRoO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGN1clRvcExlZnQgID0gdGhpcy5oZWlnaHRNYXAuZ2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1clRvcFJpZ2h0ID0gdGhpcy5oZWlnaHRNYXAuZ2V0KG5leHRYLCB5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJDZW50ZXIgICA9IHRoaXMuaGVpZ2h0TWFwLmdldChtaWRYLCBtaWRZKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2WUNlbnRlciA9IHRoaXMuaGVpZ2h0TWFwLmdldChtaWRYLCBwcmV2TWlkWSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VyQm90TGVmdCAgPSB0aGlzLmhlaWdodE1hcC5nZXQoeCwgbmV4dFkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZYQ2VudGVyID0gdGhpcy5oZWlnaHRNYXAuZ2V0KHByZXZNaWRYLCBtaWRZKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJMZWZ0TWlkID0gKGN1clRvcExlZnQgKyBjdXJDZW50ZXIgKyBjdXJCb3RMZWZ0ICsgcHJldlhDZW50ZXIpIC8gNC4wICsgcmFuZG9tRmxvYXRSYW5nZSgtY3VySGVpZ2h0LCBjdXJIZWlnaHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1clRvcE1pZCAgPSAoY3VyVG9wTGVmdCArIGN1ckNlbnRlciArIGN1clRvcFJpZ2h0ICsgcHJldllDZW50ZXIpIC8gNC4wICsgcmFuZG9tRmxvYXRSYW5nZSgtY3VySGVpZ2h0LCBjdXJIZWlnaHQpO1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KG1pZFgsIHksIGN1clRvcE1pZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIZWlnaHQoeCwgbWlkWSwgY3VyTGVmdE1pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaCB9IGZyb20gXCIuL0lQYXRjaC5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUGF0Y2hMb2QsIElQYXRjaExvZEJhc2UgfSBmcm9tIFwiLi9JUGF0Y2hMb2QubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUluc3RhbmNpbmdPYmplY3QsIElQYXRjaEluc3RhbmNpbmcsIElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZywgVEJ1bGRlciwgVERlc3RydWN0b3IsIFRTZWxlY3RvciB9IGZyb20gXCIuL0lQYXRjaEluc3RhbmNpbmcubWpzXCI7XHJcbmltcG9ydCB7IGdldExvZElkIH0gZnJvbSBcIi4vTG9kRXN0aW1hdG9yLm1qc1wiO1xyXG5pbXBvcnQgeyBCT1RUT00sIExFRlQsIFJJR0hULCBUT1AsIHR5cGUgSVJlYWRvbmx5TG9kSW5mbyB9IGZyb20gXCIuL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUdyaWRQYXRjaGVkTG9kIH0gZnJvbSBcIi4vR3JpZEJ1aWxkZXIubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY29tSW5zdERhdGFTaXplID0gNDtcclxuZXhwb3J0IGNvbnN0IGNvbWJpbmVHcm91cExlbiA9IDY7XHJcblxyXG5leHBvcnQgdHlwZSAgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlID0gVWludDhBcnJheTtcclxuZXhwb3J0IGNvbnN0IFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZSA9IFVpbnQ4QXJyYXk7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDb21iaW5lSXRlbSB7XHJcbiAgICBtYWluSWQ6IGludCxcclxuICAgIGdyb3VwSWQ6IGludCxcclxuICAgIGFuZ2xlOiBpbnQsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUxvZENvbWJpbmVEYXRhPFQgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdD4ge1xyXG4gICAgZ3JvdXBzOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlPltdLFxyXG4gICAgaXRlbXM6IElDb21iaW5lSXRlbVtdW11bXVtdXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhdGNoQ29tYmluZUluc3RhbmNpbmc8VCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0PiBpbXBsZW1lbnRzIElQYXRjaEluc3RhbmNpbmc8VCwgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcblxyXG4gICAgcHJpdmF0ZSBfcGF0Y2hDb3VudDogaW50O1xyXG5cclxuICAgIHB1YmxpYyBkYXRhOiBJTG9kQ29tYmluZURhdGE8VD5bXTtcclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hDb3VudCgpIHsgcmV0dXJuIHRoaXMuX3BhdGNoQ291bnQ7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgICB0aGlzLl9wYXRjaENvdW50ID0gMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGZvckVhY2goZm46IFRTZWxlY3RvcjxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+KSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbWJpbmVHcm91cExlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnQgPSB0aGlzLmRhdGFbY10uZ3JvdXBzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIGZuKHNlZ21lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95U2VnbWVudE9iamVjdHMoaW5kZXg6IGludCwgZGVzdHJ1Y3RvcjogVERlc3RydWN0b3I8VD4pIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21iaW5lR3JvdXBMZW47IGkrKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuZGF0YVtpbmRleF0uZ3JvdXBzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlZ21lbnQub2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBkZXN0cnVjdG9yKHNlZ21lbnQub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIHNlZ21lbnQub2JqZWN0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveShkZXN0cnVjdG9yOiBURGVzdHJ1Y3RvcjxUPikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveVNlZ21lbnRPYmplY3RzKGksIGRlc3RydWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGEubGVuZ3RoID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYnVpbGQoZ3JpZDogSUdyaWRQYXRjaGVkTG9kLCBvYmplY3RCdWlsZGVyPzogVEJ1bGRlcjxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+KSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhdGNoQ291bnQgPSBncmlkLm51bVBhdGNoZXNYICogZ3JpZC5udW1QYXRjaGVzWjtcclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgQXJyYXkoZ3JpZC5sb2RJbmZvLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxvZENvcmUgPSAwOyBsb2RDb3JlIDwgdGhpcy5kYXRhLmxlbmd0aDsgbG9kQ29yZSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtsb2RDb3JlXSA9IHRoaXMuX2J1aWxkSW5mbyhsb2RDb3JlLCBncmlkLmxvZEluZm9bbG9kQ29yZV0sIHRoaXMuX3BhdGNoQ291bnQsIG9iamVjdEJ1aWxkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9idWlsZEluZm88VCBleHRlbmRzIElJbnN0YW5jaW5nT2JqZWN0Pihsb2RDb3JlOiBpbnQsIGxvZEluZm86IElSZWFkb25seUxvZEluZm8sIHBhdGNoQ291bnQ6IGludCwgb2JqZWN0QnVpbGRlcj86IFRCdWxkZXI8VCwgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlPik6IElMb2RDb21iaW5lRGF0YTxUPiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGdyb3VwcyA9IG5ldyBBcnJheTxJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlPj4oY29tYmluZUdyb3VwTGVuKTtcclxuICAgICAgICBjb25zdCBpdGVtcyAgPSBuZXcgQXJyYXk8SUNvbWJpbmVJdGVtW11bXVtdPihMRUZUKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspICAgeyBpdGVtc1tsXSA9IG5ldyBBcnJheTxJQ29tYmluZUl0ZW1bXVtdPihSSUdIVCk7XHJcbiAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSAgeyBpdGVtc1tsXVtyXSA9IG5ldyBBcnJheTxJQ29tYmluZUl0ZW1bXT4oVE9QKTtcclxuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSAgICB7IGl0ZW1zW2xdW3JdW3RdID0gbmV3IEFycmF5PElDb21iaW5lSXRlbT4oQk9UVE9NKTtcclxuICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpZCA9IGdldExvZElkKGxvZENvcmUsIGwsIHIsIHQsIGIpO1xyXG4gICAgICAgICAgICBjb25zdCB2bCA9IGdldExvZENvbWJpbmVEYXRhKGxvZENvcmUsIGwsIHIsIHQsIGIpO1xyXG4gICAgICAgICAgICBjb25zdCB7IG1haW5JZCwgZ3JvdXBJZCB9ID0gdmw7XHJcblxyXG4gICAgICAgICAgICBpdGVtc1tsXVtyXVt0XVtiXSA9IHZsO1xyXG5cclxuICAgICAgICAgICAgLy8gYnVpbGQgZGF0YSBmb3IgbWFpbiBjYXNlXHJcbiAgICAgICAgICAgIGlmIChpZCA9PT0gbWFpbklkKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IGxvZEluZm8uaW5mb1tsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvZDogSVBhdGNoTG9kQmFzZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjb3JlOiBsb2RDb3JlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGwsXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IHIsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0LFxyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogYlxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhICAgPSBuZXcgVENvbUluc3RDb29yZHNPZmZzZXRBcnJUeXBlKHBhdGNoQ291bnQgKiBjb21JbnN0RGF0YVNpemUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0ID0gb2JqZWN0QnVpbGRlciA/IG9iamVjdEJ1aWxkZXIobG9kLCBpbmZvLCBkYXRhLCBwYXRjaENvdW50KSA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgZ3JvdXBzW2dyb3VwSWRdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleEJhc2VJbmRleDogaW5mby5zdGFydCxcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhDb3VudDogaW5mby5jb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICBsb2Q6IGxvZCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdDogb2JqZWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH19fX1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ3JvdXBzLFxyXG4gICAgICAgICAgICBpdGVtc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldChsb2Q6IElQYXRjaExvZCk6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhW2xvZC5jb3JlXTtcclxuICAgICAgICBjb25zdCBncm91cElkID0gZGF0YS5pdGVtc1tsb2QubGVmdF1bbG9kLnJpZ2h0XVtsb2QudG9wXVtsb2QuYm90dG9tXS5ncm91cElkO1xyXG4gICAgICAgIHJldHVybiBkYXRhLmdyb3Vwc1tncm91cElkXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5jcmVtZW50KGxvZDogSVBhdGNoTG9kLCBwYXRjaDogSVBhdGNoKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGRhdGEgICA9IHRoaXMuZGF0YVtsb2QuY29yZV07XHJcbiAgICAgICAgY29uc3QgaXRlbSAgID0gZGF0YS5pdGVtc1tsb2QubGVmdF1bbG9kLnJpZ2h0XVtsb2QudG9wXVtsb2QuYm90dG9tXTtcclxuICAgICAgICBjb25zdCBzaW5nbGUgPSBkYXRhLmdyb3Vwc1tpdGVtLmdyb3VwSWRdO1xyXG5cclxuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBzaW5nbGUuY291bnQ7XHJcbiAgICAgICAgY29uc3QgaW5kZXggICAgID0gcHJldkluZGV4ICogY29tSW5zdERhdGFTaXplO1xyXG5cclxuICAgICAgICBpZiAoc2luZ2xlLmRhdGFbaW5kZXggKyAwXSAhPT0gcGF0Y2gueCB8fFxyXG4gICAgICAgICAgICBzaW5nbGUuZGF0YVtpbmRleCArIDFdICE9PSBwYXRjaC56IHx8XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMl0gIT09IGl0ZW0uYW5nbGUpIHtcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAwXSA9IHBhdGNoLng7XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMV0gPSBwYXRjaC56O1xyXG4gICAgICAgICAgICBzaW5nbGUuZGF0YVtpbmRleCArIDJdID0gaXRlbS5hbmdsZTtcclxuICAgICAgICAgICAgc2luZ2xlLmhhc0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2luZ2xlLmNvdW50Kys7XHJcbiAgICAgICAgcmV0dXJuIHNpbmdsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgemVyb0FsbCgpIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kQ29yZSA9IDA7IGxvZENvcmUgPCB0aGlzLmRhdGEubGVuZ3RoOyBsb2RDb3JlKyspIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tYmluZUdyb3VwTGVuOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaW5nbGUgPSB0aGlzLmRhdGFbbG9kQ29yZV0uZ3JvdXBzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIHNpbmdsZS5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2RDb21iaW5lRGF0YShsb2RDb3JlOiBpbnQsIGw6IGludCwgcjogaW50LCB0OiBpbnQsIGI6IGludCkge1xyXG5cclxuICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciB3aGljaCBzaGFwZSBjYW4gYmUgcmVwbGFjZWQgYnkgcm90YXRpb24uXHJcbiAgICAvLyBBbmdsZSAxID0gOTAsIDIgPSAxODAsIDMgPSAyNzBcclxuXHJcbiAgICAvLyB8XFx8L3wvICAgICAgICAgICAgICAgICAgIHxcXHwvfFxcfFxyXG4gICAgLy8gfFxcfC98XFwgID0+IHJvdGF0ZSg5MCkgPT4gfC98XFx8L3xcclxuICAgIC8vIHwvfFxcfC8gICAgICAgICAgICAgICAgICAgIFxcIC8gXFxcclxuXHJcbiAgICBsZXQgbWFpbklkO1xyXG4gICAgbGV0IGdyb3VwSWQ7XHJcbiAgICBsZXQgYW5nbGU7XHJcblxyXG4gICAgaWYgKGwgPT09IDAgJiYgciA9PT0gMCAmJiB0ID09PSAwICYmIGIgPT09IDApIHtcclxuICAgICAgICBtYWluSWQgID0gZ2V0TG9kSWQobG9kQ29yZSwgMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgZ3JvdXBJZCA9IDA7XHJcbiAgICAgICAgYW5nbGUgICA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDAgJiYgdCA9PT0gMCAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgIGdyb3VwSWQgPSAxO1xyXG4gICAgICAgIGFuZ2xlICAgPSAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobCA9PT0gMCAmJiByID09PSAwICYmIHQgPT09IDEgJiYgYiA9PT0gMCkge1xyXG4gICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICBncm91cElkID0gMTtcclxuICAgICAgICBhbmdsZSAgID0gOTA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAwICYmIHIgPT09IDEgJiYgdCA9PT0gMCAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgIGdyb3VwSWQgPSAxO1xyXG4gICAgICAgIGFuZ2xlICAgPSAxODA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAwICYmIHIgPT09IDAgJiYgdCA9PT0gMCAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgIGdyb3VwSWQgPSAxO1xyXG4gICAgICAgIGFuZ2xlICAgPSAyNzA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDAgJiYgdCA9PT0gMSAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDApO1xyXG4gICAgICAgIGdyb3VwSWQgPSAyO1xyXG4gICAgICAgIGFuZ2xlICAgPSAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobCA9PT0gMCAmJiByID09PSAxICYmIHQgPT09IDEgJiYgYiA9PT0gMCkge1xyXG4gICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAxLCAwKTtcclxuICAgICAgICBncm91cElkID0gMjtcclxuICAgICAgICBhbmdsZSAgID0gOTA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAwICYmIHIgPT09IDEgJiYgdCA9PT0gMCAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDApO1xyXG4gICAgICAgIGdyb3VwSWQgPSAyO1xyXG4gICAgICAgIGFuZ2xlICAgPSAxODA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDAgJiYgdCA9PT0gMCAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDApO1xyXG4gICAgICAgIGdyb3VwSWQgPSAyO1xyXG4gICAgICAgIGFuZ2xlICAgPSAyNzA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDEgJiYgdCA9PT0gMCAmJiBiID09PSAwKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDEsIDAsIDApO1xyXG4gICAgICAgIGdyb3VwSWQgPSAzO1xyXG4gICAgICAgIGFuZ2xlICAgPSAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobCA9PT0gMCAmJiByID09PSAwICYmIHQgPT09IDEgJiYgYiA9PT0gMSkge1xyXG4gICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAxLCAwLCAwKTtcclxuICAgICAgICBncm91cElkID0gMztcclxuICAgICAgICBhbmdsZSAgID0gOTA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDAgJiYgdCA9PT0gMSAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDEpO1xyXG4gICAgICAgIGdyb3VwSWQgPSA0O1xyXG4gICAgICAgIGFuZ2xlICAgPSAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobCA9PT0gMSAmJiByID09PSAxICYmIHQgPT09IDEgJiYgYiA9PT0gMCkge1xyXG4gICAgICAgIG1haW5JZCAgPSBnZXRMb2RJZChsb2RDb3JlLCAxLCAwLCAxLCAxKTtcclxuICAgICAgICBncm91cElkID0gNDtcclxuICAgICAgICBhbmdsZSAgID0gOTA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAwICYmIHIgPT09IDEgJiYgdCA9PT0gMSAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDEpO1xyXG4gICAgICAgIGdyb3VwSWQgPSA0O1xyXG4gICAgICAgIGFuZ2xlICAgPSAxODA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDEgJiYgdCA9PT0gMCAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDAsIDEsIDEpO1xyXG4gICAgICAgIGdyb3VwSWQgPSA0O1xyXG4gICAgICAgIGFuZ2xlICAgPSAyNzA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsID09PSAxICYmIHIgPT09IDEgJiYgdCA9PT0gMSAmJiBiID09PSAxKSB7XHJcbiAgICAgICAgbWFpbklkICA9IGdldExvZElkKGxvZENvcmUsIDEsIDEsIDEsIDEpO1xyXG4gICAgICAgIGdyb3VwSWQgPSA1O1xyXG4gICAgICAgIGFuZ2xlICAgPSAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5cXCd0IGNvbWJpbmUgJHtsb2RDb3JlfSwke2x9LCR7cn0sJHt0fSwke2J9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtYWluSWQsXHJcbiAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICBhbmdsZTogYW5nbGUgLyA5MCwgLy8gc2F2ZSBmb3IgdWludDhcclxuICAgIH07XHJcbn0gIiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaCB9IGZyb20gXCIuL0lQYXRjaC5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUGF0Y2hMb2RCYXNlIH0gZnJvbSBcIi4vSVBhdGNoTG9kLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElJbnN0YW5jaW5nT2JqZWN0LCBJUGF0Y2hJbnN0YW5jaW5nLCBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmcsIFRCdWxkZXIsIFREZXN0cnVjdG9yLCBUU2VsZWN0b3IgfSBmcm9tIFwiLi9JUGF0Y2hJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgeyBCT1RUT00sIExFRlQsIFJJR0hULCBUT1AsIHR5cGUgSVJlYWRvbmx5TG9kSW5mbyB9IGZyb20gXCIuL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUdyaWRQYXRjaGVkTG9kIH0gZnJvbSBcIi4vR3JpZEJ1aWxkZXIubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgaW5zdERhdGFTaXplID0gMjtcclxuXHJcbmV4cG9ydCB0eXBlICBUSW5zdENvb3Jkc09mZnNldEFyclR5cGUgPSBVaW50MTZBcnJheTtcclxuZXhwb3J0IGNvbnN0IFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZSA9IFVpbnQxNkFycmF5O1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhdGNoSW5zdGFuY2luZzxUIGV4dGVuZHMgSUluc3RhbmNpbmdPYmplY3Q+IGltcGxlbWVudHMgSVBhdGNoSW5zdGFuY2luZzxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+IHtcclxuXHJcbiAgICBwcml2YXRlIF9wYXRjaENvdW50OiBpbnQ7XHJcblxyXG4gICAgcHVibGljIGRhdGE6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+W11bXVtdW11bXTtcclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hDb3VudCgpIHsgcmV0dXJuIHRoaXMuX3BhdGNoQ291bnQ7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgICB0aGlzLl9wYXRjaENvdW50ID0gMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGZvckVhY2goZm46IFRTZWxlY3RvcjxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+KSB7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmRhdGEubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgUklHSFQ7IHIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuZGF0YVtjXVtsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuKHNlZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95U2VnbWVudE9iamVjdHMoaW5kZXg6IGludCwgZGVzdHJ1Y3RvcjogVERlc3RydWN0b3I8VD4pIHtcclxuICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWdtZW50ID0gdGhpcy5kYXRhW2luZGV4XVtsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50Lm9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdHJ1Y3RvcihzZWdtZW50Lm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50Lm9iamVjdCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koZGVzdHJ1Y3RvcjogVERlc3RydWN0b3I8VD4pIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lTZWdtZW50T2JqZWN0cyhpLCBkZXN0cnVjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJ1aWxkKGdyaWQ6IElHcmlkUGF0Y2hlZExvZCwgb2JqZWN0QnVpbGRlcj86IFRCdWxkZXI8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPikge1xyXG5cclxuICAgICAgICB0aGlzLl9wYXRjaENvdW50ID0gZ3JpZC5udW1QYXRjaGVzWCAqIGdyaWQubnVtUGF0Y2hlc1o7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IEFycmF5KGdyaWQubG9kSW5mby5sZW5ndGgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsb2RDb3JlID0gMDsgbG9kQ29yZSA8IHRoaXMuZGF0YS5sZW5ndGg7IGxvZENvcmUrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbbG9kQ29yZV0gPSB0aGlzLl9idWlsZEluZm8obG9kQ29yZSwgZ3JpZC5sb2RJbmZvW2xvZENvcmVdLCB0aGlzLl9wYXRjaENvdW50LCBvYmplY3RCdWlsZGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYnVpbGRJbmZvPFQgZXh0ZW5kcyBJSW5zdGFuY2luZ09iamVjdD4obG9kQ29yZTogaW50LCBsb2RJbmZvOiBJUmVhZG9ubHlMb2RJbmZvLCBwYXRjaENvdW50OiBpbnQsIG9iamVjdEJ1aWxkZXI/OiBUQnVsZGVyPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4pOiBJU2luZ2xlTG9kSW5mb0luc3RhbmNpbmc8VCwgVEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPltdW11bXVtdIHtcclxuXHJcbiAgICAgICAgY29uc3QgYXJyID0gbmV3IEFycmF5PElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+W11bXVtdPihMRUZUKTtcclxuICAgIFxyXG4gICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSAgIHsgYXJyW2xdID0gbmV3IEFycmF5KFJJR0hUKTtcclxuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspICB7IGFycltsXVtyXSA9IG5ldyBBcnJheShUT1ApO1xyXG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspICAgIHsgYXJyW2xdW3JdW3RdID0gbmV3IEFycmF5KEJPVFRPTSk7XHJcbiAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaW5mbyA9IGxvZEluZm8uaW5mb1tsXVtyXVt0XVtiXTtcclxuICAgICAgICAgICAgY29uc3QgbG9kOiBJUGF0Y2hMb2RCYXNlID0ge1xyXG4gICAgICAgICAgICAgICAgY29yZTogbG9kQ29yZSxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IGwsXHJcbiAgICAgICAgICAgICAgICByaWdodDogcixcclxuICAgICAgICAgICAgICAgIHRvcDogdCxcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogYlxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSAgID0gbmV3IFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZShwYXRjaENvdW50ICogaW5zdERhdGFTaXplKTtcclxuICAgICAgICAgICAgY29uc3Qgb2JqZWN0ID0gb2JqZWN0QnVpbGRlciA/IG9iamVjdEJ1aWxkZXIobG9kLCBpbmZvLCBkYXRhLCBwYXRjaENvdW50KSA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICBhcnJbbF1bcl1bdF1bYl0gPSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhCYXNlSW5kZXg6IGluZm8uc3RhcnQsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhDb3VudDogaW5mby5jb3VudCxcclxuICAgICAgICAgICAgICAgIGNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgbG9kOiBsb2QsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgb2JqZWN0OiBvYmplY3QsXHJcbiAgICAgICAgICAgICAgICBoYXNDaGFuZ2VzOiBmYWxzZSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9fX19XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQobG9kOiBJUGF0Y2hMb2RCYXNlKTogSVNpbmdsZUxvZEluZm9JbnN0YW5jaW5nPFQsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFbbG9kLmNvcmVdW2xvZC5sZWZ0XVtsb2QucmlnaHRdW2xvZC50b3BdW2xvZC5ib3R0b21dO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgaW5jcmVtZW50KGxvZDogSVBhdGNoTG9kQmFzZSwgcGF0Y2g6IElQYXRjaCk6IElTaW5nbGVMb2RJbmZvSW5zdGFuY2luZzxULCBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU+IHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzaW5nbGUgICAgPSB0aGlzLmdldChsb2QpO1xyXG4gICAgICAgIGNvbnN0IHByZXZJbmRleCA9IHNpbmdsZS5jb3VudDtcclxuICAgICAgICBjb25zdCBpbmRleCAgICAgPSBwcmV2SW5kZXggKiBpbnN0RGF0YVNpemU7XHJcblxyXG4gICAgICAgIGlmIChzaW5nbGUuZGF0YVtpbmRleCArIDBdICE9PSBwYXRjaC5taW5YIHx8XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMV0gIT09IHBhdGNoLm1pblopIHtcclxuICAgICAgICAgICAgc2luZ2xlLmRhdGFbaW5kZXggKyAwXSA9IHBhdGNoLm1pblg7XHJcbiAgICAgICAgICAgIHNpbmdsZS5kYXRhW2luZGV4ICsgMV0gPSBwYXRjaC5taW5aO1xyXG4gICAgICAgICAgICBzaW5nbGUuaGFzQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzaW5nbGUuY291bnQrKztcclxuICAgICAgICByZXR1cm4gc2luZ2xlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB6ZXJvQWxsKCkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBsb2RDb3JlID0gMDsgbG9kQ29yZSA8IHRoaXMuZGF0YS5sZW5ndGg7IGxvZENvcmUrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2luZ2xlID0gdGhpcy5kYXRhW2xvZENvcmVdW2xdW3JdW3RdW2JdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlLmNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwIH0gZnJvbSBcIi4vQWJzU2hhdHRlcmVkSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElab25lIH0gZnJvbSBcIi4vSVpvbmUubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgYnVmZmVySXRlbVNpemUgPSA1OyAvLyAoeCwgeSwgeiwgcmFkaXVzV2l0aE1hcmdpbiwgb3JpZ2luYWxSYWRpdXMpXHJcblxyXG4vLyBPdXIgc3lzdGVtIGlzIGRpdmlkZWQgaW50byBhIGdlbmVyYWwgcGFydCBhbmQgYW4gZW5naW5lIHBhcnQsXHJcbi8vIGZvciBvcHRpbWl6YXRpb24gd2UgdXNlIHRoZSBlbmdpbmUgcGFydCBpbiB0aGlzIGZpbGUuIChwbGF5Y2FudmFzIFZlYzMsIE1hdDQsIEJvdW5kaW5nU3BoZXJlKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0Y2hlc1NwaGVyZUJ1ZmZlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBfc2NhbGU6IHBjeC5WZWMzO1xyXG4gICAgcHJpdmF0ZSBfbWF0cml4OiBwY3guTWF0NDtcclxuICAgIHByaXZhdGUgX2hlaWdodE1hcDogSVJlYWRvbmx5QWJzU2hhdHRlcmVkSGVpZ2h0TWFwO1xyXG4gICAgcHJpdmF0ZSBfbWFyZ2luczogZmxvYXRbXTtcclxuICAgIHByaXZhdGUgX2xvY2FsQnVmZmVyOiBmbG9hdFtdO1xyXG4gICAgcHJpdmF0ZSBfd29ybGRTcGhlcmVzOiBwY3guQm91bmRpbmdTcGhlcmVbXTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodE1hcCgpIHsgcmV0dXJuIHRoaXMuX2hlaWdodE1hcDsgfVxyXG4gICAgcHVibGljIGdldCBidWZmZXIoKSB7IHJldHVybiB0aGlzLl9sb2NhbEJ1ZmZlcjsgfVxyXG4gICAgcHVibGljIGdldCBzcGhlcmVzKCkgeyByZXR1cm4gdGhpcy5fd29ybGRTcGhlcmVzOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG1hcmdpbnMoKSB7IHJldHVybiB0aGlzLl9tYXJnaW5zOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNTaGF0dGVyZWRIZWlnaHRNYXAsIG1hdHJpeD86IHBjeC5NYXQ0KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0TWFwID0gaGVpZ2h0TWFwO1xyXG4gICAgICAgIHRoaXMuX2xvY2FsQnVmZmVyID0gbmV3IEFycmF5PGZsb2F0Pih0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1ggKiB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1ogKiBidWZmZXJJdGVtU2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fbWFyZ2lucyA9IG5ldyBBcnJheTxmbG9hdD4odGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNYICogdGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNaKTtcclxuICAgICAgICB0aGlzLl9sb2NhbEJ1ZmZlci5maWxsKDApO1xyXG4gICAgICAgIHRoaXMuX3NjYWxlID0gbmV3IHBjLlZlYzMoKTtcclxuICAgICAgICB0aGlzLl9tYXRyaXggPSBuZXcgcGMuTWF0NCgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRXb3JsZFNwaGVyZXMoKTtcclxuICAgICAgICB0aGlzLnNldE1hdHJpeChtYXRyaXggPz8gcGMuTWF0NC5JREVOVElUWSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfaW5pdFdvcmxkU3BoZXJlcygpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fd29ybGRTcGhlcmVzID0gbmV3IEFycmF5PHBjeC5Cb3VuZGluZ1NwaGVyZT4odGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNYICogdGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNaKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcGF0Y2haID0gMDsgcGF0Y2haIDwgdGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNaOyBwYXRjaForKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcGF0Y2hYID0gMDsgcGF0Y2hYIDwgdGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNYOyBwYXRjaFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGF0Y2hYICsgcGF0Y2haICogdGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNYO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3dvcmxkU3BoZXJlc1tpbmRleF0gPSBuZXcgcGMuQm91bmRpbmdTcGhlcmUoKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFBhdGNoTWFyZ2luKHBhdGNoWDogaW50LCBwYXRjaFo6IGludCwgbWFyZ2luOiBmbG9hdCwgcmVjYWxjdWxhdGU6IGJvb2xlYW4gPSB0cnVlKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwaGVyZUlkeCA9IHBhdGNoWCArIHBhdGNoWiAqIHRoaXMuX2hlaWdodE1hcC5udW1QYXRjaGVzWDtcclxuXHJcbiAgICAgICAgdGhpcy5fbWFyZ2luc1tzcGhlcmVJZHhdID0gbWFyZ2luO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKHJlY2FsY3VsYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjYWxjdWxhdGVCb3VuZGluZ1NwaGVyZShwYXRjaFgsIHBhdGNoWik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRNYXRyaXgobWF0cml4OiBwY3guTWF0NCwgcmVjYWxjdWxhdGU6IGJvb2xlYW4gPSB0cnVlKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdHJpeC5jb3B5KG1hdHJpeCk7XHJcbiAgICAgICAgdGhpcy5fbWF0cml4LmdldFNjYWxlKHRoaXMuX3NjYWxlKTtcclxuXHJcbiAgICAgICAgaWYgKHJlY2FsY3VsYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlY2FsY3VsYXRlV29ybGRCb3VuZGluZ1NwaGVyZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBwYXRjaFZpc2libGUocGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50LCBtYXJnaW46IGZsb2F0LCBmcnVzdHVtOiBwY3guRnJ1c3R1bSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHNwaGVyZUlkeCA9IHBhdGNoWCArIHBhdGNoWiAqIHRoaXMuX2hlaWdodE1hcC5udW1QYXRjaGVzWDtcclxuICAgICAgICBjb25zdCBzcGhlcmUgPSB0aGlzLl93b3JsZFNwaGVyZXNbc3BoZXJlSWR4XTtcclxuICAgICAgICBjb25zdCBwcmV2UmFkaXVzID0gc3BoZXJlLnJhZGl1cztcclxuXHJcbiAgICAgICAgc3BoZXJlLnJhZGl1cyAqPSBtYXJnaW47XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGZydXN0dW0uY29udGFpbnNTcGhlcmUoc3BoZXJlKTtcclxuXHJcbiAgICAgICAgc3BoZXJlLnJhZGl1cyA9IHByZXZSYWRpdXM7XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQgPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWNhbGN1bGF0ZSgpIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcGF0Y2haID0gMDsgcGF0Y2haIDwgdGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNaOyBwYXRjaForKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcGF0Y2hYID0gMDsgcGF0Y2hYIDwgdGhpcy5faGVpZ2h0TWFwLm51bVBhdGNoZXNYOyBwYXRjaFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVjYWxjdWxhdGVCb3VuZGluZ1NwaGVyZShwYXRjaFgsIHBhdGNoWik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY2FsY3VsYXRlWm9uZSh6b25lOiBJWm9uZSk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh6b25lLm1heFggPCAwKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHpvbmUubWF4WiA8IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZml4ZWRNaW5YID0gTWF0aC5tYXgoem9uZS5taW5YLCAwKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1pblogPSBNYXRoLm1heCh6b25lLm1pblosIDApO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTWF4WCA9IE1hdGgubWluKHpvbmUubWF4WCwgdGhpcy5faGVpZ2h0TWFwLndpZHRoKTtcclxuICAgICAgICBjb25zdCBmaXhlZE1heFogPSBNYXRoLm1pbih6b25lLm1heFosIHRoaXMuX2hlaWdodE1hcC5kZXB0aCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSBmaXhlZE1pblo7IHogPCBmaXhlZE1heFo7IHogKz0gdGhpcy5faGVpZ2h0TWFwLnBhdGNoU2l6ZSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IGZpeGVkTWluWDsgeCA8IGZpeGVkTWF4WDsgeCArPSB0aGlzLl9oZWlnaHRNYXAucGF0Y2hTaXplKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hYID0geCAvIHRoaXMuX2hlaWdodE1hcC5wYXRjaFNpemUgfCAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2haID0geiAvIHRoaXMuX2hlaWdodE1hcC5wYXRjaFNpemUgfCAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVjYWxjdWxhdGVCb3VuZGluZ1NwaGVyZShwYXRjaFgsIHBhdGNoWik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY2FsY3VsYXRlQm91bmRpbmdTcGhlcmUocGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwaGVyZUlkeCA9IHBhdGNoWCArIHBhdGNoWiAqIHRoaXMuX2hlaWdodE1hcC5udW1QYXRjaGVzWDtcclxuICAgICAgICBjb25zdCBidWZmZXJJbmRleCA9IHNwaGVyZUlkeCAqIGJ1ZmZlckl0ZW1TaXplO1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaE1pbkhlaWdodCA9IHRoaXMuX2hlaWdodE1hcC5nZXRQZXJmb3JtUGF0Y2hNaW4ocGF0Y2hYLCBwYXRjaFopO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoTWF4SGVpZ2h0ID0gdGhpcy5faGVpZ2h0TWFwLmdldFBlcmZvcm1QYXRjaE1heChwYXRjaFgsIHBhdGNoWik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3F1YXJlID0gdGhpcy5faGVpZ2h0TWFwLnBhdGNoU2l6ZSAtIDE7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hSYWRpdXNCeVNpemUgICA9IHNxdWFyZSAvIDI7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hSZWRpdXNCeUhlaWdodCA9IChwYXRjaE1heEhlaWdodCAtIHBhdGNoTWluSGVpZ2h0KSAvIDI7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoQ2VudGVyWCA9IChwYXRjaFggKiBzcXVhcmUpICsgcGF0Y2hSYWRpdXNCeVNpemU7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hDZW50ZXJZID0gKHBhdGNoTWF4SGVpZ2h0ICsgcGF0Y2hNaW5IZWlnaHQpIC8gMjtcclxuICAgICAgICBjb25zdCBwYXRjaENlbnRlclogPSAocGF0Y2haICogc3F1YXJlKSArIHBhdGNoUmFkaXVzQnlTaXplO1xyXG4gICAgICAgIGNvbnN0IHJhZGl1cyAgICAgICA9IChwYXRjaFJhZGl1c0J5U2l6ZSA+IHBhdGNoUmVkaXVzQnlIZWlnaHQgPyBwYXRjaFJhZGl1c0J5U2l6ZSA6IHBhdGNoUmVkaXVzQnlIZWlnaHQpICogTWF0aC5TUVJUMjtcclxuICAgICAgICBjb25zdCBtYXJnaW4gICAgICAgPSB0aGlzLl9tYXJnaW5zW3NwaGVyZUlkeF0gfHwgMTtcclxuXHJcbiAgICAgICAgLy8gV2UgY29uc3RydWN0IGNvb3JkaW5hdGVzIHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGhlaWdodCBtYXBcclxuXHJcbiAgICAgICAgdGhpcy5fbG9jYWxCdWZmZXJbYnVmZmVySW5kZXggKyAwXSA9IHBhdGNoQ2VudGVyWCArIHRoaXMuX2hlaWdodE1hcC53aWR0aCAvIC0yO1xyXG4gICAgICAgIHRoaXMuX2xvY2FsQnVmZmVyW2J1ZmZlckluZGV4ICsgMV0gPSBwYXRjaENlbnRlclk7XHJcbiAgICAgICAgdGhpcy5fbG9jYWxCdWZmZXJbYnVmZmVySW5kZXggKyAyXSA9IHBhdGNoQ2VudGVyWiArIHRoaXMuX2hlaWdodE1hcC5kZXB0aCAvIC0yO1xyXG4gICAgICAgIHRoaXMuX2xvY2FsQnVmZmVyW2J1ZmZlckluZGV4ICsgM10gPSByYWRpdXMgKiBtYXJnaW47XHJcbiAgICAgICAgdGhpcy5fbG9jYWxCdWZmZXJbYnVmZmVySW5kZXggKyA0XSA9IHJhZGl1cztcclxuXHJcbiAgICAgICAgdGhpcy5fcmVjYWxjdWxhdGVXb3JsZEJvdW5kaW5nU3BoZXJlKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZWNhbGN1bGF0ZVdvcmxkQm91bmRpbmdTcGhlcmVzKCkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBwYXRjaFogPSAwOyBwYXRjaFogPCB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1o7IHBhdGNoWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBwYXRjaFggPSAwOyBwYXRjaFggPCB0aGlzLl9oZWlnaHRNYXAubnVtUGF0Y2hlc1g7IHBhdGNoWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVjYWxjdWxhdGVXb3JsZEJvdW5kaW5nU3BoZXJlKHBhdGNoWCwgcGF0Y2haKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZWNhbGN1bGF0ZVdvcmxkQm91bmRpbmdTcGhlcmUocGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwaGVyZUlkeCA9IHBhdGNoWCArIHBhdGNoWiAqIHRoaXMuX2hlaWdodE1hcC5udW1QYXRjaGVzWDtcclxuICAgICAgICBjb25zdCBidWZmZXJJZHggPSBzcGhlcmVJZHggKiBidWZmZXJJdGVtU2l6ZTtcclxuICAgICAgICBjb25zdCBsb2NSYWRpdXMgPSB0aGlzLl9sb2NhbEJ1ZmZlcltidWZmZXJJZHggKyAzXTsgLy8gdGFrZSByYWRpdXMgd2l0aCBjdXN0b20gbWFyZ2luXHJcbiAgICAgICAgY29uc3Qgd3JsU3BoZXJlID0gdGhpcy5fd29ybGRTcGhlcmVzW3NwaGVyZUlkeF07XHJcblxyXG4gICAgICAgIHdybFNwaGVyZS5jZW50ZXIuc2V0KFxyXG4gICAgICAgICAgICB0aGlzLl9sb2NhbEJ1ZmZlcltidWZmZXJJZHggKyAwXSxcclxuICAgICAgICAgICAgdGhpcy5fbG9jYWxCdWZmZXJbYnVmZmVySWR4ICsgMV0sXHJcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsQnVmZmVyW2J1ZmZlcklkeCArIDJdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogbmVlZCBtb3JlIHRlc3RcclxuICAgICAgICB3cmxTcGhlcmUucmFkaXVzID0gbG9jUmFkaXVzICogTWF0aC5zcXJ0KCh0aGlzLl9zY2FsZS54ICoqIDIgKyB0aGlzLl9zY2FsZS55ICoqIDIgKyB0aGlzLl9zY2FsZS56ICoqIDIpIC8gMyk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdHJpeC50cmFuc2Zvcm1Qb2ludCh3cmxTcGhlcmUuY2VudGVyLCB3cmxTcGhlcmUuY2VudGVyKTtcclxuICAgIH1cclxufSIsImltcG9ydCB0eXBlIHsgZmxvYXQsIGludCwgSVZlY3RvcjMsIFJlZk9iamVjdCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoTG9kIH0gZnJvbSBcIi4vSVBhdGNoTG9kLm1qc1wiO1xyXG5pbXBvcnQgeyBkZWZhdWx0UGF0Y2hMb2QsIElMb2RTdGF0ZSB9IGZyb20gXCIuL0xvZFN0YXRlLm1qc1wiO1xyXG5pbXBvcnQgTG9kTWFuYWdlciBmcm9tIFwiLi9Mb2RNYW5hZ2VyLm1qc1wiO1xyXG5pbXBvcnQgUGF0Y2hlc1NwaGVyZUJ1ZmZlciBmcm9tIFwiLi9QYXRjaGVzU3BoZXJlQnVmZmVyLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElHcmlkUGF0Y2hlZExvZCB9IGZyb20gXCIuL0dyaWRCdWlsZGVyLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElTaW5nbGVMb2RJbmZvIH0gZnJvbSBcIi4vTG9kSW5mby5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVBhdGNoZXNTdGF0ZSB7XHJcbiAgICByZWFkb25seSBsb2RTdGF0ZTogSUxvZFN0YXRlO1xyXG4gICAgYmVmb3JlVXBkYXRlKCk6IHZvaWQ7XHJcbiAgICBhZnRlclVwZGF0ZSgpOiB2b2lkO1xyXG4gICAgaW5pdFBhdGNoKHBhdGNoWDogaW50LCBwYXRjaFo6IGludCwgc2l6ZTogaW50LCBtaW5YOiBpbnQsIG1pblo6IGludCwgaW5mbzogUmVhZG9ubHk8SVNpbmdsZUxvZEluZm8+LCBsb2RJbmZvOiBSZWFkb25seTxJUGF0Y2hMb2Q+KTogdm9pZDtcclxuICAgIHVwZGF0ZVBhdGNoKHBhdGNoWDogaW50LCBwYXRjaFo6IGludCwgdmlzaWJsZTogYm9vbGVhbiwgaW5mbzogUmVhZG9ubHk8SVNpbmdsZUxvZEluZm8+LCBsb2RJbmZvOiBSZWFkb25seTxJUGF0Y2hMb2Q+KTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0Y2hlc01hbmFnZXIge1xyXG5cclxuICAgIHByaXZhdGUgX2dyaWQ6IElHcmlkUGF0Y2hlZExvZDtcclxuICAgIHByaXZhdGUgX3NwaGVyZXM6IFBhdGNoZXNTcGhlcmVCdWZmZXI7XHJcbiAgICBwcml2YXRlIF9sb2RNYW5hZ2VyOiBMb2RNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBfc3RhdGVzOiBJUGF0Y2hlc1N0YXRlW107XHJcblxyXG4gICAgcHVibGljIGdldCBncmlkKCkgeyByZXR1cm4gdGhpcy5fZ3JpZDsgfVxyXG4gICAgcHVibGljIGdldCBzcGhlcmVzKCkgeyByZXR1cm4gdGhpcy5fc3BoZXJlczsgfVxyXG4gICAgcHVibGljIGdldCBsb2RNYW5hZ2VyKCkgeyByZXR1cm4gdGhpcy5fbG9kTWFuYWdlcjsgfVxyXG4gICAgcHVibGljIGdldCBzdGF0ZXMoKTogUmVhZG9ubHk8UmVhZG9ubHk8SVBhdGNoZXNTdGF0ZT5bXT4geyByZXR1cm4gdGhpcy5fc3RhdGVzOyB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGdyaWQ6IElHcmlkUGF0Y2hlZExvZCwgc3BoZXJlczogUGF0Y2hlc1NwaGVyZUJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMuX2dyaWQgPSBncmlkO1xyXG4gICAgICAgIHRoaXMuX3NwaGVyZXMgPSBzcGhlcmVzO1xyXG4gICAgICAgIHRoaXMuX2xvZE1hbmFnZXIgPSBuZXcgTG9kTWFuYWdlcihncmlkLmxvZEVzdGltYXRvcik7XHJcbiAgICAgICAgdGhpcy5fc3RhdGVzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhc1N0YXRlKHN0YXRlOiBJUGF0Y2hlc1N0YXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlcy5pbmRleE9mKHN0YXRlKSAhPT0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFN0YXRlKHN0YXRlOiBJUGF0Y2hlc1N0YXRlKSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5fbG9kTWFuYWdlci5oYXNTdGF0ZShzdGF0ZS5sb2RTdGF0ZSkpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTG9kIHN0YXRlIGhhcyBkaWZmZXJlbnQgbG9kIG1hbmFnZXIgd2l0aCBwYXRjaGVzIG1hbmFnZXJcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9zdGF0ZXMuaW5kZXhPZihzdGF0ZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlcy5wdXNoKHN0YXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXRTaW5nbGVTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVN0YXRlKHN0YXRlOiBJUGF0Y2hlc1N0YXRlKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5fc3RhdGVzLmluZGV4T2Yoc3RhdGUpO1xyXG5cclxuICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZXMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRTaW5nbGVTdGF0ZShzdGF0ZTogSVBhdGNoZXNTdGF0ZSkge1xyXG5cclxuICAgICAgICBjb25zdCBudW1QYXRjaGVzWCA9IHRoaXMuX2dyaWQubnVtUGF0Y2hlc1g7XHJcbiAgICAgICAgY29uc3QgbnVtUGF0Y2hlc1ogPSB0aGlzLl9ncmlkLm51bVBhdGNoZXNaO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoU2l6ZSAgID0gdGhpcy5fZ3JpZC5wYXRjaFNpemU7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHBhdGNoWiA9IDA7IHBhdGNoWiA8IG51bVBhdGNoZXNaOyBwYXRjaForKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcGF0Y2hYID0gMDsgcGF0Y2hYIDwgbnVtUGF0Y2hlc1g7IHBhdGNoWCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluWCA9IHBhdGNoWCAqIChwYXRjaFNpemUgLSAxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pblogPSBwYXRjaFogKiAocGF0Y2hTaXplIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5fZ3JpZC5sb2RJbmZvWzBdLmluZm9bMF1bMF1bMF1bMF07XHJcblxyXG4gICAgICAgICAgICAgICAgc3RhdGUuaW5pdFBhdGNoKHBhdGNoWCwgcGF0Y2haLCBwYXRjaFNpemUsIG1pblgsIG1pblosIGluZm8sIGRlZmF1bHRQYXRjaExvZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShmcnVzdHVtPzogcGN4LkZydXN0dW0sIGZydXN0dW1NYXJnaW46IGZsb2F0ID0gMSkge1xyXG5cclxuICAgICAgICBjb25zdCBudW1TdGF0ZXMgPSB0aGlzLl9zdGF0ZXMubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IG51bVBhdGNoZXNYID0gdGhpcy5fZ3JpZC5udW1QYXRjaGVzWDtcclxuICAgICAgICBjb25zdCBudW1QYXRjaGVzWiA9IHRoaXMuX2dyaWQubnVtUGF0Y2hlc1o7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtU3RhdGVzOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdGVzW2ldLmJlZm9yZVVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgcGF0Y2haID0gMDsgcGF0Y2haIDwgbnVtUGF0Y2hlc1o7IHBhdGNoWisrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBwYXRjaFggPSAwOyBwYXRjaFggPCBudW1QYXRjaGVzWDsgcGF0Y2hYKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aXNpYmxlID0gISFmcnVzdHVtICYmIHRoaXMuX3NwaGVyZXMucGF0Y2hWaXNpYmxlKHBhdGNoWCwgcGF0Y2haLCBmcnVzdHVtTWFyZ2luLCBmcnVzdHVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVN0YXRlczsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fc3RhdGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsb2QgPSBzdGF0ZS5sb2RTdGF0ZS5nZXRQYXRjaExvZChwYXRjaFgsIHBhdGNoWik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuX2dyaWQubG9kSW5mb1twbG9kLmNvcmVdLmluZm9bcGxvZC5sZWZ0XVtwbG9kLnJpZ2h0XVtwbG9kLnRvcF1bcGxvZC5ib3R0b21dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS51cGRhdGVQYXRjaChwYXRjaFgsIHBhdGNoWiwgdmlzaWJsZSwgaW5mbywgcGxvZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtU3RhdGVzOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdGVzW2ldLmFmdGVyVXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVMb2RzKGxvY2FsVmlld1BvczogUmVmT2JqZWN0PElWZWN0b3IzPiwgdXNlWVBvczogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmxvZE1hbmFnZXIudXBkYXRlKGxvY2FsVmlld1BvcywgdGhpcy5fc3BoZXJlcy5oZWlnaHRNYXAsIHVzZVlQb3MpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElab25lIH0gZnJvbSBcIi4vSVpvbmUubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRmaWVsZCBmcm9tIFwiLi9IZWlnaHRmaWVsZC5tanNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFRGb3JFYWNoU3F1YXJlQ2FsbGJhY2sgPSAoaW5kZXg6IGludCwgeDogaW50LCB6OiBpbnQpID0+IHZvaWQgfCBib29sZWFuO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3F1YXJlSXRlcmF0b3Ige1xyXG5cclxuICAgIHByaXZhdGUgX2ZpZWxkOiBIZWlnaHRmaWVsZDtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGZpZWxkKCkgeyByZXR1cm4gdGhpcy5fZmllbGQ7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWVsZDogSGVpZ2h0ZmllbGQpIHtcclxuICAgICAgICB0aGlzLl9maWVsZCA9IGZpZWxkO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfZm9yRWFjaCh6b25lOiBJWm9uZSwgc3F1YXJlU2l6ZTogaW50LCBudW1TcXVhcmVYOiBpbnQsIG51bVNxdWFyZVo6IGludCwgY2FsbGJhY2s6IFRGb3JFYWNoU3F1YXJlQ2FsbGJhY2spIHtcclxuXHJcbiAgICAgICAgaWYgKHpvbmUubWF4WCA8IDApIHJldHVybjtcclxuICAgICAgICBpZiAoem9uZS5tYXhaIDwgMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBtaW5YID0gTWF0aC5tYXgoem9uZS5taW5YLCAwKTtcclxuICAgICAgICBjb25zdCBtaW5aID0gTWF0aC5tYXgoem9uZS5taW5aLCAwKTtcclxuICAgICAgICBjb25zdCBtYXhYID0gTWF0aC5taW4oem9uZS5tYXhYLCB0aGlzLmZpZWxkLndpZHRoKTtcclxuICAgICAgICBjb25zdCBtYXhaID0gTWF0aC5taW4oem9uZS5tYXhaLCB0aGlzLmZpZWxkLmRlcHRoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWluUGF0Y2hYID0gbWluWCAvIHNxdWFyZVNpemUgfCAwO1xyXG4gICAgICAgIGNvbnN0IG1pblBhdGNoWiA9IG1pblogLyBzcXVhcmVTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBtYXhQYXRjaFggPSBtYXhYIC8gc3F1YXJlU2l6ZSB8IDA7XHJcbiAgICAgICAgY29uc3QgbWF4UGF0Y2haID0gbWF4WiAvIHNxdWFyZVNpemUgfCAwO1xyXG5cclxuICAgICAgICBjb25zdCBub3JtYWxpemVNaW5YID0gTWF0aC5tYXgobWluUGF0Y2hYLCAwKTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVNaW5aID0gTWF0aC5tYXgobWluUGF0Y2haLCAwKTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVNYXhYID0gTWF0aC5taW4obWF4UGF0Y2hYICsgMSwgbnVtU3F1YXJlWCk7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplTWF4WiA9IE1hdGgubWluKG1heFBhdGNoWiArIDEsIG51bVNxdWFyZVopO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gbm9ybWFsaXplTWluWjsgeiA8IG5vcm1hbGl6ZU1heFo7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IG5vcm1hbGl6ZU1pblg7IHggPCBub3JtYWxpemVNYXhYOyB4KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaEluZGV4ID0geiAqIG51bVNxdWFyZVggKyB4O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayhwYXRjaEluZGV4LCB4LCB6KSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJjb25zdCB0bXBWZWMgPSBuZXcgcGMuVmVjMygpO1xuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0RpcmVjdGlvblZlY3Rvcihwb3NpdGlvbjogcGN4LlZlYzMsIGRpcjogcGN4LlZlYzMsIGNvbG9yID0gcGMuQ29sb3IuUkVEKSB7XG5cbiAgICAvLyBEcmF3IHRoZSB2ZWN0b3JcbiAgICBjb25zdCBzdGFydCA9IHBvc2l0aW9uO1xuICAgIGNvbnN0IGVuZCA9IHRtcFZlYy5hZGQyKHBvc2l0aW9uLCBkaXIpO1xuICAgIFxuICAgIHBjLmFwcCEuZHJhd0xpbmUoc3RhcnQsIGVuZCwgY29sb3IsIGZhbHNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdQb2ludChcbiAgICB7Y2VudGVyLCByYWRpdXMgPSAwLjEsIG51bVNlZ21lbnRzID0gNCwgY29sb3IgPSBwYy5Db2xvci5SRUQsIGxheWVyLCBkZXB0aFRlc3QgPSBmYWxzZSB9OlxuICAgIHtjZW50ZXI6IHBjeC5WZWMzLCByYWRpdXM/OiBudW1iZXIsIG51bVNlZ21lbnRzPzogbnVtYmVyLCBjb2xvcj86IHBjeC5Db2xvciwgZGVwdGhUZXN0PzogYm9vbGVhbiwgbGF5ZXI/OiBwY3guTGF5ZXJ9XG4pIHtcbiAgICBjb25zdCBibG9jayAgPSA2ICogMztcbiAgICBjb25zdCBwb2ludHMgPSBuZXcgQXJyYXkobnVtU2VnbWVudHMgKiBibG9jayk7XG4gICAgY29uc3Qgc3RlcCA9IDIgKiBNYXRoLlBJIC8gbnVtU2VnbWVudHM7XG5cbiAgICBsZXQgYW5nbGUgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1TZWdtZW50czsgaSsrKSB7XG5cbiAgICAgICAgY29uc3Qgc2luMCA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICAgICAgY29uc3QgY29zMCA9IE1hdGguY29zKGFuZ2xlKTtcblxuICAgICAgICBhbmdsZSArPSBzdGVwO1xuXG4gICAgICAgIGNvbnN0IHNpbjEgPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgICAgIGNvbnN0IGNvczEgPSBNYXRoLmNvcyhhbmdsZSk7XG5cbiAgICAgICAgY29uc3QgaiA9IGkgKiBibG9jaztcblxuICAgICAgICBwb2ludHNbaiArIDBdID0gY2VudGVyLnggKyByYWRpdXMgKiBzaW4wO1xuICAgICAgICBwb2ludHNbaiArIDFdID0gY2VudGVyLnk7XG4gICAgICAgIHBvaW50c1tqICsgMl0gPSBjZW50ZXIueiArIHJhZGl1cyAqIGNvczA7XG5cbiAgICAgICAgcG9pbnRzW2ogKyAzXSA9IGNlbnRlci54ICsgcmFkaXVzICogc2luMTtcbiAgICAgICAgcG9pbnRzW2ogKyA0XSA9IGNlbnRlci55O1xuICAgICAgICBwb2ludHNbaiArIDVdID0gY2VudGVyLnogKyByYWRpdXMgKiBjb3MxO1xuXG4gICAgICAgIHBvaW50c1tqICsgNl0gPSBjZW50ZXIueDtcbiAgICAgICAgcG9pbnRzW2ogKyA3XSA9IGNlbnRlci55ICsgcmFkaXVzICogc2luMDtcbiAgICAgICAgcG9pbnRzW2ogKyA4XSA9IGNlbnRlci56ICsgcmFkaXVzICogY29zMDtcblxuICAgICAgICBwb2ludHNbaiArIDldICA9IGNlbnRlci54O1xuICAgICAgICBwb2ludHNbaiArIDEwXSA9IGNlbnRlci55ICsgcmFkaXVzICogc2luMTtcbiAgICAgICAgcG9pbnRzW2ogKyAxMV0gPSBjZW50ZXIueiArIHJhZGl1cyAqIGNvczE7XG5cbiAgICAgICAgcG9pbnRzW2ogKyAxMl0gPSBjZW50ZXIueCArIHJhZGl1cyAqIGNvczA7XG4gICAgICAgIHBvaW50c1tqICsgMTNdID0gY2VudGVyLnkgKyByYWRpdXMgKiBzaW4wO1xuICAgICAgICBwb2ludHNbaiArIDE0XSA9IGNlbnRlci56O1xuXG4gICAgICAgIHBvaW50c1tqICsgMTVdID0gY2VudGVyLnggKyByYWRpdXMgKiBjb3MxO1xuICAgICAgICBwb2ludHNbaiArIDE2XSA9IGNlbnRlci55ICsgcmFkaXVzICogc2luMTtcbiAgICAgICAgcG9pbnRzW2ogKyAxN10gPSBjZW50ZXIuejtcbiAgICB9XG5cbiAgICBwYy5hcHAhLmRyYXdMaW5lQXJyYXlzKHBvaW50cywgY29sb3IsIGRlcHRoVGVzdCwgbGF5ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0JveChcbiAgICB7bWluLCBtYXgsIGNvbG9yID0gcGMuQ29sb3IuUkVELCBsYXllciwgZGVwdGhUZXN0ID0gZmFsc2V9OlxuICAgIHttaW46IHBjeC5WZWMzLCBtYXg6IHBjeC5WZWMzLCBjb2xvcj86IHBjeC5Db2xvciwgZGVwdGhUZXN0PzogYm9vbGVhbiwgbGF5ZXI/OiBwY3guTGF5ZXJ9XG4pIHtcbiAgICBwYy5hcHA/LmRyYXdXaXJlQWxpZ25lZEJveChtaW4sIG1heCwgY29sb3IsIGRlcHRoVGVzdCwgbGF5ZXIpO1xufSIsImV4cG9ydCBmdW5jdGlvbiBpc051bWVyaWModmFsdWU6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIC9eLT9cXGQrJC8udGVzdCh2YWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXBUaXRsZUVudW08VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+Pihzb21lRW51bTogVCkge1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG5cclxuICAgIGZvciAobGV0IHZhbHVlIGluIHNvbWVFbnVtKSB7XHJcblxyXG4gICAgICAgIC8vIFNraXAgbnVtYmVyIHZhbHVlc1xyXG4gICAgICAgIGlmICghc29tZUVudW0uaGFzT3duUHJvcGVydHkodmFsdWUpIHx8XHJcbiAgICAgICAgICAgIGlzTnVtZXJpYyh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBlbnVtRW50cnk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XHJcbiAgICAgICAgZW51bUVudHJ5W3ZhbHVlXSA9IHNvbWVFbnVtW3ZhbHVlXTtcclxuICAgICAgICByZXN1bHQucHVzaChlbnVtRW50cnkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFwRW51bTxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KHNvbWVFbnVtOiBUKSB7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gW107XHJcblxyXG4gICAgZm9yIChsZXQgdmFsdWUgaW4gc29tZUVudW0pIHtcclxuXHJcbiAgICAgICAgaWYgKCFzb21lRW51bS5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBlbnVtRW50cnk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XHJcbiAgICAgICAgZW51bUVudHJ5W3ZhbHVlXSA9IHNvbWVFbnVtW3ZhbHVlXTtcclxuICAgICAgICByZXN1bHQucHVzaChlbnVtRW50cnkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFuZG9tIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE0xID0gMjY4NDM1NDU2O1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBNMiA9IDk0MTIwNTtcclxuXHJcbiAgICByZWFkb25seSBzZWVkOiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBfdG1wOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF90aWNrOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2VlZDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcclxuICAgICAgICB0aGlzLl90bXAgID0gc2VlZDtcclxuICAgIH1cclxuXHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLl90bXAgPSB0aGlzLnNlZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dCgpOiBudW1iZXIge1xyXG4gICAgICAgIHRoaXMuX3RtcCA9ICh0aGlzLl90bXAgKiBSYW5kb20uTTIpICUgUmFuZG9tLk0xO1xyXG4gICAgICAgIHRoaXMuX3RpY2sgPSB0aGlzLl90bXAgLyBSYW5kb20uTTE7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpY2s7XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dEZsb2F0KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCgpICogKG1heCAtIG1pbikgKyBtaW47XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dEludChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5leHRGbG9hdChtaW4sIG1heCkgfCAwO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByYW5kb20oKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgbnJhbmQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0RmxvYXQoLTEsIDEpO1xyXG4gICAgfVxyXG59IiwiLypcclxuICogQSBzcGVlZC1pbXByb3ZlZCBwZXJsaW4gYW5kIHNpbXBsZXggbm9pc2UgYWxnb3JpdGhtcyBmb3IgMkQuXHJcbiAqXHJcbiAqIEJhc2VkIG9uIGV4YW1wbGUgY29kZSBieSBTdGVmYW4gR3VzdGF2c29uIChzdGVndUBpdG4ubGl1LnNlKS5cclxuICogT3B0aW1pc2F0aW9ucyBieSBQZXRlciBFYXN0bWFuIChwZWFzdG1hbkBkcml6emxlLnN0YW5mb3JkLmVkdSkuXHJcbiAqIEJldHRlciByYW5rIG9yZGVyaW5nIG1ldGhvZCBieSBTdGVmYW4gR3VzdGF2c29uIGluIDIwMTIuXHJcbiAqIENvbnZlcnRlZCB0byBKYXZhc2NyaXB0IGJ5IEpvc2VwaCBHZW50bGUuXHJcbiAqXHJcbiAqIFZlcnNpb24gMjAxMi0wMy0wOVxyXG4gKlxyXG4gKiBUaGlzIGNvZGUgd2FzIHBsYWNlZCBpbiB0aGUgcHVibGljIGRvbWFpbiBieSBpdHMgb3JpZ2luYWwgYXV0aG9yLFxyXG4gKiBTdGVmYW4gR3VzdGF2c29uLiBZb3UgbWF5IHVzZSBpdCBhcyB5b3Ugc2VlIGZpdCwgYnV0XHJcbiAqIGF0dHJpYnV0aW9uIGlzIGFwcHJlY2lhdGVkLlxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBUeXBlU2NyaXB0aWZpZWQgMjAxNlxyXG4gKi9cclxuXHJcbmNsYXNzIEdyYWQge1xyXG5cdFxyXG5cdHg6IG51bWJlclxyXG5cdHk6IG51bWJlclxyXG5cdHo6IG51bWJlclxyXG5cclxuXHRjb25zdHJ1Y3RvciAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xyXG5cdFx0dGhpcy54ID0geFxyXG5cdFx0dGhpcy55ID0geVxyXG5cdFx0dGhpcy56ID0gelxyXG5cdH1cclxuXHJcblx0ZG90MiAoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuXHRcdHJldHVybiB0aGlzLnggKiB4ICsgdGhpcy55ICogeVxyXG5cdH1cclxuXHJcblx0ZG90MyAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xyXG5cdFx0cmV0dXJuIHRoaXMueCAqIHggKyB0aGlzLnkgKiB5ICsgdGhpcy56ICogelxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgRjIgPSAwLjUgKiAoTWF0aC5zcXJ0KDMpIC0gMSlcclxuY29uc3QgRzIgPSAoMyAtIE1hdGguc3FydCgzKSkgLyA2XHJcblxyXG5jb25zdCBwZXJtID0gbmV3IEFycmF5KDUxMilcclxuY29uc3QgZ3JhZFAgPSBuZXcgQXJyYXkoNTEyKVxyXG5cclxuY29uc3QgZ3JhZDMgPSBbXHJcblx0bmV3IEdyYWQoMSwxLDApLCBuZXcgR3JhZCgtMSwxLDApLCBuZXcgR3JhZCgxLC0xLDApLCBuZXcgR3JhZCgtMSwtMSwwKSxcclxuXHRuZXcgR3JhZCgxLDAsMSksIG5ldyBHcmFkKC0xLDAsMSksIG5ldyBHcmFkKDEsMCwtMSksIG5ldyBHcmFkKC0xLDAsLTEpLFxyXG5cdG5ldyBHcmFkKDAsMSwxKSwgbmV3IEdyYWQoMCwtMSwxKSwgbmV3IEdyYWQoMCwxLC0xKSwgbmV3IEdyYWQoMCwtMSwtMSlcclxuXVxyXG5cclxuY29uc3QgcCA9IFtcclxuXHQxNTEsMTYwLDEzNyw5MSw5MCwxNSxcclxuXHQxMzEsMTMsMjAxLDk1LDk2LDUzLDE5NCwyMzMsNywyMjUsMTQwLDM2LDEwMywzMCw2OSwxNDIsOCw5OSwzNywyNDAsMjEsMTAsMjMsXHJcblx0MTkwLCA2LDE0OCwyNDcsMTIwLDIzNCw3NSwwLDI2LDE5Nyw2Miw5NCwyNTIsMjE5LDIwMywxMTcsMzUsMTEsMzIsNTcsMTc3LDMzLFxyXG5cdDg4LDIzNywxNDksNTYsODcsMTc0LDIwLDEyNSwxMzYsMTcxLDE2OCwgNjgsMTc1LDc0LDE2NSw3MSwxMzQsMTM5LDQ4LDI3LDE2NixcclxuXHQ3NywxNDYsMTU4LDIzMSw4MywxMTEsMjI5LDEyMiw2MCwyMTEsMTMzLDIzMCwyMjAsMTA1LDkyLDQxLDU1LDQ2LDI0NSw0MCwyNDQsXHJcblx0MTAyLDE0Myw1NCwgNjUsMjUsNjMsMTYxLCAxLDIxNiw4MCw3MywyMDksNzYsMTMyLDE4NywyMDgsIDg5LDE4LDE2OSwyMDAsMTk2LFxyXG5cdDEzNSwxMzAsMTE2LDE4OCwxNTksODYsMTY0LDEwMCwxMDksMTk4LDE3MywxODYsIDMsNjQsNTIsMjE3LDIyNiwyNTAsMTI0LDEyMyxcclxuXHQ1LDIwMiwzOCwxNDcsMTE4LDEyNiwyNTUsODIsODUsMjEyLDIwNywyMDYsNTksMjI3LDQ3LDE2LDU4LDE3LDE4MiwxODksMjgsNDIsXHJcblx0MjIzLDE4MywxNzAsMjEzLDExOSwyNDgsMTUyLCAyLDQ0LDE1NCwxNjMsIDcwLDIyMSwxNTMsMTAxLDE1NSwxNjcsIDQzLDE3Miw5LFxyXG5cdDEyOSwyMiwzOSwyNTMsIDE5LDk4LDEwOCwxMTAsNzksMTEzLDIyNCwyMzIsMTc4LDE4NSwgMTEyLDEwNCwyMTgsMjQ2LDk3LDIyOCxcclxuXHQyNTEsMzQsMjQyLDE5MywyMzgsMjEwLDE0NCwxMiwxOTEsMTc5LDE2MiwyNDEsIDgxLDUxLDE0NSwyMzUsMjQ5LDE0LDIzOSwxMDcsXHJcblx0NDksMTkyLDIxNCwgMzEsMTgxLDE5OSwxMDYsMTU3LDE4NCwgODQsMjA0LDE3NiwxMTUsMTIxLDUwLDQ1LDEyNywgNCwxNTAsMjU0LFxyXG5cdDEzOCwyMzYsMjA1LDkzLDIyMiwxMTQsNjcsMjksMjQsNzIsMjQzLDE0MSwxMjgsMTk1LDc4LDY2LDIxNSw2MSwxNTYsMTgwXHJcbl1cclxuXHJcbi8vIFRoaXMgaXNuJ3QgYSB2ZXJ5IGdvb2Qgc2VlZGluZyBmdW5jdGlvbiwgYnV0IGl0IHdvcmtzIG9rLiBJdCBzdXBwb3J0cyAyXjE2XHJcbi8vIGRpZmZlcmVudCBzZWVkIHZhbHVlcy4gV3JpdGUgc29tZXRoaW5nIGJldHRlciBpZiB5b3UgbmVlZCBtb3JlIHNlZWRzLlxyXG5mdW5jdGlvbiBzZWVkIChzZWVkOiBudW1iZXIpIHtcclxuXHJcblx0aWYgKHNlZWQgPiAwICYmIHNlZWQgPCAxKSB7XHJcblx0XHQvLyBTY2FsZSB0aGUgc2VlZCBvdXRcclxuXHRcdHNlZWQgKj0gNjU1MzY7XHJcblx0fVxyXG5cclxuXHRzZWVkID0gTWF0aC5mbG9vcihzZWVkKTtcclxuXHJcblx0aWYgKHNlZWQgPCAyNTYpIHtcclxuXHRcdHNlZWQgfD0gc2VlZCA8PCA4O1xyXG5cdH1cclxuXHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xyXG5cdFx0bGV0IHY6IG51bWJlclxyXG5cdFx0aWYgKGkgJiAxKSB7XHJcblx0XHRcdHYgPSBwW2ldIF4gKHNlZWQgJiAyNTUpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0diA9IHBbaV0gXiAoKHNlZWQgPj4gOCkgJiAyNTUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBlcm1baV0gPSBwZXJtW2kgKyAyNTZdID0gdjtcclxuXHRcdGdyYWRQW2ldID0gZ3JhZFBbaSArIDI1Nl0gPSBncmFkM1t2ICUgMTJdO1xyXG5cdH1cclxufVxyXG5cclxuc2VlZCgwKTtcclxuXHJcbi8vIDJEIHNpbXBsZXggbm9pc2VcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2ltcGxleCh4aW46IG51bWJlciwgeWluOiBudW1iZXIpIHtcclxuXHRsZXQgbjA6IG51bWJlciwgbjE6IG51bWJlciwgbjI6IG51bWJlciAvLyBOb2lzZSBjb250cmlidXRpb25zIGZyb20gdGhlIHRocmVlIGNvcm5lcnNcclxuXHQvLyBTa2V3IHRoZSBpbnB1dCBzcGFjZSB0byBkZXRlcm1pbmUgd2hpY2ggc2ltcGxleCBjZWxsIHdlJ3JlIGluXHJcblx0Y29uc3QgcyA9ICh4aW4gKyB5aW4pICogRjIgLy8gSGFpcnkgZmFjdG9yIGZvciAyRFxyXG5cdGxldCBpID0gTWF0aC5mbG9vcih4aW4gKyBzKVxyXG5cdGxldCBqID0gTWF0aC5mbG9vcih5aW4gKyBzKVxyXG5cdGNvbnN0IHQgPSAoaSArIGopICogRzJcclxuXHRjb25zdCB4MCA9IHhpbiAtIGkgKyB0IC8vIFRoZSB4LHkgZGlzdGFuY2VzIGZyb20gdGhlIGNlbGwgb3JpZ2luLCB1bnNrZXdlZC5cclxuXHRjb25zdCB5MCA9IHlpbiAtIGogKyB0XHJcblx0Ly8gRm9yIHRoZSAyRCBjYXNlLCB0aGUgc2ltcGxleCBzaGFwZSBpcyBhbiBlcXVpbGF0ZXJhbCB0cmlhbmdsZS5cclxuXHQvLyBEZXRlcm1pbmUgd2hpY2ggc2ltcGxleCB3ZSBhcmUgaW4uXHJcblx0bGV0IGkxOiBudW1iZXIsIGoxOiBudW1iZXIgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIChtaWRkbGUpIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGopIGNvb3Jkc1xyXG5cdGlmICh4MCA+IHkwKSB7IC8vIGxvd2VyIHRyaWFuZ2xlLCBYWSBvcmRlcjogKDAsMCktPigxLDApLT4oMSwxKVxyXG5cdFx0aTEgPSAxXHJcblx0XHRqMSA9IDBcclxuXHR9IGVsc2UgeyAgICAvLyB1cHBlciB0cmlhbmdsZSwgWVggb3JkZXI6ICgwLDApLT4oMCwxKS0+KDEsMSlcclxuXHRcdGkxID0gMFxyXG5cdFx0ajEgPSAxXHJcblx0fVxyXG5cdC8vIEEgc3RlcCBvZiAoMSwwKSBpbiAoaSxqKSBtZWFucyBhIHN0ZXAgb2YgKDEtYywtYykgaW4gKHgseSksIGFuZFxyXG5cdC8vIGEgc3RlcCBvZiAoMCwxKSBpbiAoaSxqKSBtZWFucyBhIHN0ZXAgb2YgKC1jLDEtYykgaW4gKHgseSksIHdoZXJlXHJcblx0Ly8gYyA9ICgzLXNxcnQoMykpLzZcclxuXHRjb25zdCB4MSA9IHgwIC0gaTEgKyBHMiAvLyBPZmZzZXRzIGZvciBtaWRkbGUgY29ybmVyIGluICh4LHkpIHVuc2tld2VkIGNvb3Jkc1xyXG5cdGNvbnN0IHkxID0geTAgLSBqMSArIEcyXHJcblx0Y29uc3QgeDIgPSB4MCAtIDEgKyAyICogRzIgLy8gT2Zmc2V0cyBmb3IgbGFzdCBjb3JuZXIgaW4gKHgseSkgdW5za2V3ZWQgY29vcmRzXHJcblx0Y29uc3QgeTIgPSB5MCAtIDEgKyAyICogRzJcclxuXHQvLyBXb3JrIG91dCB0aGUgaGFzaGVkIGdyYWRpZW50IGluZGljZXMgb2YgdGhlIHRocmVlIHNpbXBsZXggY29ybmVyc1xyXG5cdGkgJj0gMjU1XHJcblx0aiAmPSAyNTVcclxuXHRjb25zdCBnaTAgPSBncmFkUFtpICsgcGVybVtqXV1cclxuXHRjb25zdCBnaTEgPSBncmFkUFtpICsgaTEgKyBwZXJtW2ogKyBqMV1dXHJcblx0Y29uc3QgZ2kyID0gZ3JhZFBbaSArIDEgKyBwZXJtW2ogKyAxXV1cclxuXHQvLyBDYWxjdWxhdGUgdGhlIGNvbnRyaWJ1dGlvbiBmcm9tIHRoZSB0aHJlZSBjb3JuZXJzXHJcblx0bGV0IHQwID0gMC41IC0geDAgKiB4MCAtIHkwICogeTBcclxuXHRpZiAodDAgPCAwKSB7XHJcblx0XHRuMCA9IDBcclxuXHR9IGVsc2Uge1xyXG5cdFx0dDAgKj0gdDBcclxuXHRcdG4wID0gdDAgKiB0MCAqIGdpMC5kb3QyKHgwLCB5MCkgIC8vICh4LHkpIG9mIGdyYWQzIHVzZWQgZm9yIDJEIGdyYWRpZW50XHJcblx0fVxyXG5cdGxldCB0MSA9IDAuNSAtIHgxICogeDEgLSB5MSAqIHkxXHJcblx0aWYgKHQxIDwgMCkge1xyXG5cdFx0bjEgPSAwXHJcblx0fSBlbHNlIHtcclxuXHRcdHQxICo9IHQxXHJcblx0XHRuMSA9IHQxICogdDEgKiBnaTEuZG90Mih4MSwgeTEpXHJcblx0fVxyXG5cdGxldCB0MiA9IDAuNSAtIHgyICogeDIgLSB5MiAqIHkyXHJcblx0aWYgKHQyIDwgMCkge1xyXG5cdFx0bjIgPSAwXHJcblx0fSBlbHNlIHtcclxuXHRcdHQyICo9IHQyXHJcblx0XHRuMiA9IHQyICogdDIgKiBnaTIuZG90Mih4MiwgeTIpXHJcblx0fVxyXG5cdC8vIEFkZCBjb250cmlidXRpb25zIGZyb20gZWFjaCBjb3JuZXIgdG8gZ2V0IHRoZSBmaW5hbCBub2lzZSB2YWx1ZS5cclxuXHQvLyBUaGUgcmVzdWx0IGlzIHNjYWxlZCB0byByZXR1cm4gdmFsdWVzIGluIHRoZSBpbnRlcnZhbCBbLTEsMV0uXHJcblx0cmV0dXJuIDcwICogKG4wICsgbjEgKyBuMilcclxufSIsImltcG9ydCB7IFRIZWlnaHRNYXBGb3JtYXQgfSBmcm9tIFwiLi4vQ29yZS9BYnNIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB7IGxpdHRsZUVuZGlhbiB9IGZyb20gXCIuLi9FeHRyYXMvVXRpbHMubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgdmVydGV4Q29vcmRBdHRyTmFtZSAgID0gXCJ2ZXJ0ZXhfcG9zaXRpb25cIjtcclxuZXhwb3J0IGNvbnN0IHZlcnRleEhlaWdodEF0dHJOYW1lICA9IFwidmVydGV4X2hlaWdodFwiO1xyXG5leHBvcnQgY29uc3QgdmVydGV4Tm9ybWFsQXR0ck5hbWUgID0gXCJ2ZXJ0ZXhfbm9ybWFsXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGF0Y2hJbnN0Q29vcmRPZmZzZXRBdHRyTmFtZSA9IFwidmVydGV4X3Bvc3Rpb25fb2Zmc2V0XCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSA9IFwidVBhdGNoQ29vcmRPZmZzZXRcIjtcclxuZXhwb3J0IGNvbnN0IHBhdGNoTG9kQ29yZVBhcmFtTmFtZSAgICAgPSBcInVQYXRjaExvZENvcmVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBoZWlnaHRNYXBQYXJhbU5hbWUgPSBcInVIZWlnaHRNYXBcIjtcclxuZXhwb3J0IGNvbnN0IG1heEhlaWdodFBhcmFtTmFtZSA9IFwidU1heEhlaWdodFwiO1xyXG5leHBvcnQgY29uc3Qgc3BsYXRNYXBQYXJhbU5hbWUgID0gXCJ1U3BsYXRNYXBcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBjYW1lcmFQb3NpdGlvblBhcmFtTmFtZSA9IFwidUNhbWVyYVBvc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGxpdHRsZUVuZGlhblZhbHVlID0gbGl0dGxlRW5kaWFuID8gJ3RydWUnIDogJ2ZhbHNlJztcclxuXHJcbmV4cG9ydCBjb25zdCBkZWZpbmVzVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICAjZGVmaW5lIEhNX05VTV9DSFVOS1NfWCAgICAgICAgKCUlSE1fTlVNX0NIVU5LU19YJSUpXHJcbiAgICAjZGVmaW5lIEhNX05VTV9DSFVOS1NfWF9VICAgICAgKHVpbnQoSE1fTlVNX0NIVU5LU19YKSlcclxuICAgICNkZWZpbmUgSE1fQ0hVTktfU0laRSAgICAgICAgICAoJSVITV9DSFVOS19TSVpFJSUpXHJcbiAgICAjZGVmaW5lIEhNX0NIVU5LX1NJWkVfVSAgICAgICAgKHVpbnQoSE1fQ0hVTktfU0laRSkpXHJcbiAgICAjZGVmaW5lIEhNX0NIVU5LX1NJWkVfTTFfVSAgICAgKEhNX0NIVU5LX1NJWkVfVSAtIDF1KVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFX0YgICAgICAgIChmbG9hdChITV9DSFVOS19TSVpFKSlcclxuICAgICNkZWZpbmUgRklFTERfU0laRSAgICAgICAgICAgICAoaXZlYzIoJSVGSUVMRF9TSVpFX1glJSwgJSVGSUVMRF9TSVpFX1olJSkpXHJcbiAgICAjZGVmaW5lIEZJRUxEX1NJWkVfRiAgICAgICAgICAgKHZlYzIoJSVGSUVMRF9TSVpFX1hfRiUlLCAlJUZJRUxEX1NJWkVfWl9GJSUpKVxyXG4gICAgI2RlZmluZSBGSUVMRF9TSVpFX1UgICAgICAgICAgICh1dmVjMihGSUVMRF9TSVpFKSlcclxuICAgICNkZWZpbmUgRklFTERfU0laRV9IX0YgICAgICAgICAoRklFTERfU0laRV9GIC8gMi4wKVxyXG4gICAgI2RlZmluZSBGSUVMRF9TSVpFX0hfTl9GICAgICAgICgtRklFTERfU0laRV9IX0YpXHJcbiAgICAjZGVmaW5lIEZJRUxEX1BBVENIX1NJWkVfWCAgICAgKCUlRklFTERfUEFUQ0hfU0laRV9YJSUpXHJcbiAgICAjZGVmaW5lIEZJRUxEX1BBVENIX1NJWkVfTTEgICAgKEZJRUxEX1BBVENIX1NJWkVfWCAtIDEuMClcclxuICAgICNkZWZpbmUgRklFTERfUEFUQ0hfU0laRV9NMV9IICAoRklFTERfUEFUQ0hfU0laRV9NMSAvIDIuMClcclxuICAgICNkZWZpbmUgRklFTERfUEFUQ0hfU0laRV9NMV9GICAodmVjMihGSUVMRF9QQVRDSF9TSVpFX00xX0gsIEZJRUxEX1BBVENIX1NJWkVfTTFfSCkpXHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZU9yaWdpbmFsVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB1bmlmb3JtIHZlYzIgJHtwYXRjaENvb3JkT2Zmc2V0UGFyYW1OYW1lfTtcclxuXHJcbiAgICBhdHRyaWJ1dGUgdXZlYzIgJHt2ZXJ0ZXhDb29yZEF0dHJOYW1lfTtcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlRm9ySW5zdGFuY2luZ1ZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgYXR0cmlidXRlIHV2ZWMyICR7dmVydGV4Q29vcmRBdHRyTmFtZX07XHJcbiAgICBhdHRyaWJ1dGUgdXZlYzIgJHtwYXRjaEluc3RDb29yZE9mZnNldEF0dHJOYW1lfTtcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlRm9yQ29tYmluZUluc3RhbmNpbmdWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIGF0dHJpYnV0ZSB1dmVjMiAke3ZlcnRleENvb3JkQXR0ck5hbWV9O1xyXG4gICAgYXR0cmlidXRlIHV2ZWM0ICR7cGF0Y2hJbnN0Q29vcmRPZmZzZXRBdHRyTmFtZX07XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgaGVpZ2h0TWFwU2FtcGxlciA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHVuaWZvcm0gaGlnaHAgJSVIRUlHSFRfTUFQX1NBTVBMRVIlJSAke2hlaWdodE1hcFBhcmFtTmFtZX07XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZUNsZWFyVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB1bmlmb3JtIG1hdDQgbWF0cml4X3ZpZXdQcm9qZWN0aW9uO1xyXG4gICAgdW5pZm9ybSBtYXQ0IG1hdHJpeF9tb2RlbDtcclxuICAgIHVuaWZvcm0gbWF0MyBtYXRyaXhfbm9ybWFsO1xyXG5cclxuICAgIHVuaWZvcm0gdmVjMyAke2NhbWVyYVBvc2l0aW9uUGFyYW1OYW1lfTtcclxuICAgIFxyXG4gICAgdW5pZm9ybSBmbG9hdCAke21heEhlaWdodFBhcmFtTmFtZX07XHJcbiAgICB1bmlmb3JtIGZsb2F0ICR7cGF0Y2hMb2RDb3JlUGFyYW1OYW1lfTtcclxuXHJcbiAgICB2ZWMyIGRDdXJyZW50RmllbGRYWjtcclxuICAgIGZsb2F0IGRDdXJyZW50QWx0aXR1ZGU7XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZUNsZWFyU3ViVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGRQb3NpdGlvblc7XHJcbiAgICBtYXQ0IGRNb2RlbE1hdHJpeDtcclxuICAgIG1hdDMgZE5vcm1hbE1hdHJpeDtcclxuXHJcbiAgICB2ZWMzIGRDdXJyZW50RmllbGROb3JtYWw7XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudEZpZWxkWFpDaHVua1ZTID0gXHJcbmBcclxuICAgIHZlYzIgZ2V0Q3VycmVudEZpZWxkWFooKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlYzIoJHt2ZXJ0ZXhDb29yZEF0dHJOYW1lfSkgKyAke3BhdGNoQ29vcmRPZmZzZXRQYXJhbU5hbWV9O1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRGaWVsZFhaRm9ySW5zdGFuY2luZ0NodW5rVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMyIGdldEN1cnJlbnRGaWVsZFhaKCkge1xyXG4gICAgICAgIHJldHVybiB2ZWMyKCR7dmVydGV4Q29vcmRBdHRyTmFtZX0gKyAke3BhdGNoSW5zdENvb3JkT2Zmc2V0QXR0ck5hbWV9KTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50RmllbGRYWkZvckNvbWJpbmVJbnN0YW5jaW5nQ2h1bmtWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIGNvbnN0IHZlYzQgcm90YXRlUGF0Y2hYWkNvZmZbNF0gPSB2ZWM0WzRdKFxyXG4gICAgICAgIHZlYzQoIDEuMCwgIDAuMCwgIDAuMCwgIDEuMCksXHJcbiAgICAgICAgdmVjNCggMC4wLCAgMS4wLCAtMS4wLCAgMC4wKSxcclxuICAgICAgICB2ZWM0KC0xLjAsICAwLjAsICAwLjAsIC0xLjApLFxyXG4gICAgICAgIHZlYzQoIDAuMCwgLTEuMCwgIDEuMCwgIDAuMClcclxuICAgICk7XHJcblxyXG4gICAgdmVjMiByb3RhdGVQYXRjaFhaKHZlYzIgY29vcmQsIHVpbnQgYW5nbGUpIHtcclxuICAgICAgICB2ZWMyIG9mZnNldCA9IGNvb3JkIC0gRklFTERfUEFUQ0hfU0laRV9NMV9IO1xyXG4gICAgICAgIHZlYzQgdHJhbnNmID0gcm90YXRlUGF0Y2hYWkNvZmZbYW5nbGVdO1xyXG4gICAgICAgIHJldHVybiBGSUVMRF9QQVRDSF9TSVpFX00xX0ggKyBvZmZzZXQueHggKiB0cmFuc2YueHogKyBvZmZzZXQueXkgKiB0cmFuc2YueXc7XHJcbiAgICB9XHJcblxyXG4gICAgdmVjMiBnZXRDdXJyZW50RmllbGRYWigpIHtcclxuICAgICAgICB1aW50IGFuZ2xlID0gJHtwYXRjaEluc3RDb29yZE9mZnNldEF0dHJOYW1lfS56O1xyXG4gICAgICAgIHZlYzIgb3JnWFogPSB2ZWMyKCR7dmVydGV4Q29vcmRBdHRyTmFtZX0pO1xyXG4gICAgICAgIHZlYzIgcm90WFogPSByb3RhdGVQYXRjaFhaKG9yZ1haLCBhbmdsZSk7XHJcbiAgICAgICAgcmV0dXJuIHJvdFhaICsgdmVjMigke3BhdGNoSW5zdENvb3JkT2Zmc2V0QXR0ck5hbWV9Lnh5KSAqIEZJRUxEX1BBVENIX1NJWkVfTTE7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0RmllbGRDb29yZHNDaHVua1ZTID1cclxuYFxyXG4gICAgdmVjMiBnZXRDdXJyZW50RmllbGRVdkNvb3JkKCkge1xyXG4gICAgICAgIHZlYzIgeHogPSBkQ3VycmVudEZpZWxkWFo7XHJcbiAgICAgICAgdmVjMiB1diA9ICh4eiArIDAuNSkgLyBGSUVMRF9TSVpFX0Y7XHJcbiAgICAgICAgcmV0dXJuIHV2O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB1dmVjMiBjbGFtcEZpZWxkWFoodmVjMiB4eikge1xyXG4gICAgICAgIHJldHVybiB1dmVjMihjbGFtcCh4eiwgdmVjMigwLjApLCBGSUVMRF9TSVpFX0YpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmVjMiBnZXRGaWVsZFhaKGl2ZWMyIG9mZnNldCkge1xyXG4gICAgICAgIHJldHVybiBkQ3VycmVudEZpZWxkWFogKyB2ZWMyKG9mZnNldCk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0QWx0aXR1ZGVGcm9tUjMyRlZTID0gXHJcbmBcclxuICAgIGZsb2F0IGdldEFsdGl0dWRlRnJvbVRleHR1cmUodXZlYzMgY29vcmQpIHtcclxuICAgICAgICByZXR1cm4gdGV4ZWxGZXRjaCgke2hlaWdodE1hcFBhcmFtTmFtZX0sIGl2ZWMzKGNvb3JkKSwgMCkucjtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRBbHRpdHVkZUZyb21SR0JBOFVWUyA9XHJcbmBcclxuICAgIGZsb2F0IHJnYmE4dVRvRmxvYXQodXZlYzQgdikge1xyXG4gICAgICAgIHV2ZWM0IGJpdHMgPSAke2xpdHRsZUVuZGlhbiA/ICd2JyA6ICd2LmFiZ3InfTtcclxuICAgICAgICBmbG9hdCBzaWduID0gMi4wICogc3RlcChmbG9hdChiaXRzWzNdKSwgMTI4LjApIC0gMS4wO1xyXG4gICAgICAgIGZsb2F0IGV4cG8gPSBmbG9hdCgoYml0c1szXSAmIDEyN3UpICogMnUgKyBiaXRzWzJdIC8gMTI4dSkgLSAxMjcuMDtcclxuICAgICAgICBmbG9hdCBzaWcgID0gZmxvYXQoYml0c1swXSArIGJpdHNbMV0gKiAyNTZ1ICsgKGJpdHNbMl0gJiAxMjd1KSAqIDY1NTM2dSk7XHJcbiAgICAgICAgcmV0dXJuIHNpZ24gKiAoMS4wICsgc2lnIC8gODM4ODYwNy4wKSAqIHBvdygyLjAsIGV4cG8pO1xyXG4gICAgfVxyXG5cclxuICAgIGZsb2F0IGdldEFsdGl0dWRlRnJvbVRleHR1cmUodXZlYzMgY29vcmQpIHtcclxuICAgICAgICB1dmVjNCByZ2JhID0gdGV4ZWxGZXRjaCgke2hlaWdodE1hcFBhcmFtTmFtZX0sIGl2ZWMzKGNvb3JkKSwgMCk7XHJcbiAgICAgICAgcmV0dXJuIHJnYmE4dVRvRmxvYXQocmdiYSk7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0QWx0aXR1ZGVGcm9tUjE2VVZTID1cclxuYFxyXG4gICAgZmxvYXQgZ2V0QWx0aXR1ZGVGcm9tVGV4dHVyZSh1dmVjMyBjb29yZCkge1xyXG4gICAgICAgIHV2ZWM0IHJnYmEgPSB0ZXhlbEZldGNoKCR7aGVpZ2h0TWFwUGFyYW1OYW1lfSwgaXZlYzMoY29vcmQpLCAwKTtcclxuICAgICAgICByZXR1cm4gZmxvYXQocmdiYS5yKSAqICgke21heEhlaWdodFBhcmFtTmFtZX0gLyA2NTUzNS4wKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRBbHRpdHVkZUZyb21SOFVWUyA9XHJcbmBcclxuICAgIGZsb2F0IGdldEFsdGl0dWRlRnJvbVRleHR1cmUodXZlYzMgY29vcmQpIHtcclxuICAgICAgICB1dmVjNCByZ2JhID0gdGV4ZWxGZXRjaCgke2hlaWdodE1hcFBhcmFtTmFtZX0sIGl2ZWMzKGNvb3JkKSwgMCk7XHJcbiAgICAgICAgcmV0dXJuIGZsb2F0KHJnYmEucikgKiAoJHttYXhIZWlnaHRQYXJhbU5hbWV9IC8gMjU1LjApO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEZpZWxkQ2h1bmtCdWZmZXJDb29yZFZTID1cclxuYFxyXG4gICAgdXZlYzMgZ2V0RmllbGRDaHVua0J1ZmZlckNvb3JkKHV2ZWMyIHh6KSB7XHJcbiAgICAgICAgdXZlYzIgY2sgICAgPSB4eiAvIEhNX0NIVU5LX1NJWkVfVTtcclxuICAgICAgICB1dmVjMiBsb2NhbCA9IHh6ICUgSE1fQ0hVTktfU0laRV9VO1xyXG4gICAgICAgIHVpbnQgbGV2ZWwgID0gY2sueSAqIEhNX05VTV9DSFVOS1NfWF9VICsgY2sueDtcclxuICAgICAgICByZXR1cm4gdXZlYzMobG9jYWwsIGxldmVsKTtcclxuICAgIH1cclxuXHJcbiAgICB1dmVjMyBnZXRGaWVsZENodW5rQnVmZmVyUmVsYXRpdmVDb29yZChpdmVjMiBvZmZzZXQpIHtcclxuICAgICAgICB2ZWMyICBvYyA9IGdldEZpZWxkWFoob2Zmc2V0KTtcclxuICAgICAgICB1dmVjMiB4eiA9IGNsYW1wRmllbGRYWihvYyk7XHJcbiAgICAgICAgcmV0dXJuIGdldEZpZWxkQ2h1bmtCdWZmZXJDb29yZCh4eik7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0QWx0aXR1ZGVGcm9tVGV4dHVyZVZTID1cclxuYFxyXG4gICAgZmxvYXQgZ2V0QWx0aXR1ZGUoaXZlYzIgb2Zmc2V0KSB7XHJcbiAgICAgICAgdXZlYzMgY29vcmQgPSBnZXRGaWVsZENodW5rQnVmZmVyUmVsYXRpdmVDb29yZChvZmZzZXQpO1xyXG4gICAgICAgIHJldHVybiBnZXRBbHRpdHVkZUZyb21UZXh0dXJlKGNvb3JkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZmxvYXQgZ2V0Q3VycmVudEFsdGl0dWRlKCkge1xyXG4gICAgICAgIHV2ZWMyIGN1cnJuID0gdXZlYzIoZEN1cnJlbnRGaWVsZFhaKTtcclxuICAgICAgICB1dmVjMyBjb29yZCA9IGdldEZpZWxkQ2h1bmtCdWZmZXJDb29yZChjdXJybik7XHJcbiAgICAgICAgcmV0dXJuIGdldEFsdGl0dWRlRnJvbVRleHR1cmUoY29vcmQpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluc3RhbmNpbmdWUyA9IGBgO1xyXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtSW5zdGFuY2luZ1ZTID0gYGA7XHJcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1EZWNsVlMgPSBgYDtcclxuXHJcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1WUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuI2lmIGRlZmluZWQoU0hBRE9XX1BBU1MpXHJcbiNlbHNlXHJcbiAgICB2YXJ5aW5nIGZsb2F0IHZQYXRjaExvZDtcclxuICAgIHZhcnlpbmcgdmVjMiB2VXZDb29yZDtcclxuICAgIHZhcnlpbmcgdmVjMiB2RmllbGRQb3NpdGlvbjtcclxuXHJcbiAgICB2YXJ5aW5nIGZsb2F0IHZDbG9zZU1hc2s7XHJcbiAgICB2YXJ5aW5nIGZsb2F0IHZNaWRkbGVNYXNrO1xyXG4jZW5kaWZcclxuXHJcbiAgICBtYXQ0IGdldE1vZGVsTWF0cml4KCkge1xyXG4gICAgICAgIHJldHVybiBtYXRyaXhfbW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgdmVjMyBnZXRXb3JsZFBvc2l0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBkUG9zaXRpb25XO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2ZWM0IGdldFBvc2l0aW9uKCkge1xyXG5cclxuICAgICAgICBkTW9kZWxNYXRyaXggPSBnZXRNb2RlbE1hdHJpeCgpO1xyXG4gICAgICAgIGRDdXJyZW50RmllbGRYWiA9IGdldEN1cnJlbnRGaWVsZFhaKCk7XHJcbiAgICAgICAgZEN1cnJlbnRBbHRpdHVkZSA9IGdldEN1cnJlbnRBbHRpdHVkZSgpO1xyXG5cclxuICAgICAgICB2ZWMyIGNlbnRlcmVkWFogPSBGSUVMRF9TSVpFX0hfTl9GICsgZEN1cnJlbnRGaWVsZFhaO1xyXG4gICAgICAgIHZlYzQgbG9jYWxQb3MgICA9IHZlYzQoY2VudGVyZWRYWi54LCBkQ3VycmVudEFsdGl0dWRlLCBjZW50ZXJlZFhaLnksIDEuMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmVjNCBwb3NXICAgICAgPSBkTW9kZWxNYXRyaXggKiBsb2NhbFBvcztcclxuICAgICAgICB2ZWM0IHNjcmVlblBvcyA9IG1hdHJpeF92aWV3UHJvamVjdGlvbiAqIHBvc1c7XHJcblxyXG4gICAgICAgIGRQb3NpdGlvblcgPSBwb3NXLnh5ejtcclxuXHJcbiNpZiBkZWZpbmVkKFNIQURPV19QQVNTKVxyXG4jZWxzZVxyXG4gICAgICAgIGZsb2F0IGRpcyA9IGxlbmd0aCgke2NhbWVyYVBvc2l0aW9uUGFyYW1OYW1lfSAtIGRQb3NpdGlvblcpO1xyXG5cclxuICAgICAgICB2TWlkZGxlTWFzayA9IHNtb290aHN0ZXAoNjAwLjAgKyAxMDAuMCwgNjAwLjAsIGRpcyk7XHJcbiAgICAgICAgdkNsb3NlTWFzayAgPSBzbW9vdGhzdGVwKDIwMC4wICsgNTAuMCwgMjAwLjAsIGRpcyk7XHJcblxyXG4gICAgICAgIHZGaWVsZFBvc2l0aW9uID0gZEN1cnJlbnRGaWVsZFhaO1xyXG4gICAgICAgIHZVdkNvb3JkICAgICAgID0gZ2V0Q3VycmVudEZpZWxkVXZDb29yZCgpO1xyXG4gICAgICAgIHZQYXRjaExvZCAgICAgID0gJHtwYXRjaExvZENvcmVQYXJhbU5hbWV9O1xyXG4jZW5kaWZcclxuXHJcbiAgICAgICAgcmV0dXJuIHNjcmVlblBvcztcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCB1djBWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuYDtcclxuXHJcbi8vIEZJWDogYnVnIHdpdGggZ2V0VXYwIGZvciBWMSBFbmdpbmVcclxuZXhwb3J0IGNvbnN0IHN0YXJ0VXYwVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMyIGdldFV2MCgpIHtcclxuICAgICAgICByZXR1cm4gdmVjMigwLjApO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbEJ5SGVpZ2h0TWFwVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGdldEN1cnJlbnRGaWVsZE5vcm1hbCgpIHtcclxuXHJcbiAgICAgICAgZmxvYXQgZGlhbSAgPSBwb3coMi4wLCAke3BhdGNoTG9kQ29yZVBhcmFtTmFtZX0gKyAxLjApO1xyXG4gICAgICAgIGZsb2F0IHN0ZXAgID0gZGlhbSAvIDIuMDtcclxuICAgICAgICBmbG9hdCBsZWZ0ICA9IGdldEFsdGl0dWRlKGl2ZWMyKCBzdGVwLCAgMCkpO1xyXG4gICAgICAgIGZsb2F0IHJpZ2h0ID0gZ2V0QWx0aXR1ZGUoaXZlYzIoLXN0ZXAsICAwKSk7XHJcbiAgICAgICAgZmxvYXQgdXAgICAgPSBnZXRBbHRpdHVkZShpdmVjMiggMCwgICAgIHN0ZXApKTtcclxuICAgICAgICBmbG9hdCBkb3duICA9IGdldEFsdGl0dWRlKGl2ZWMyKCAwLCAgICAtc3RlcCkpO1xyXG5cclxuICAgICAgICB2ZWMzIG5vcm1hbCA9IHZlYzMobGVmdCwgZGlhbSwgZG93bikgLSB2ZWMzKHJpZ2h0LCAwLCB1cCk7XHJcblxyXG4gICAgICAgIHJldHVybiBub3JtYWxpemUobm9ybWFsKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBub3JtYWxWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzMgZ2V0Tm9ybWFsKCkge1xyXG4gICAgICAgIGROb3JtYWxNYXRyaXggPSBtYXRyaXhfbm9ybWFsO1xyXG4gICAgICAgIHJldHVybiBub3JtYWxpemUoZE5vcm1hbE1hdHJpeCAqIGRDdXJyZW50RmllbGROb3JtYWwpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbENvcmVWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIC8vIEZJWDogdmVydGV4X25vcm1hbCB1bmRlY2xhcmF0aW9uXHJcbiAgICB2ZWMzIHZlcnRleF9ub3JtYWw7XHJcbiAgICB2ZWMzIGRDdXJyZW50RmllbGROb3JtYWw7XHJcblxyXG4gICAgdmVjMyBnZXRMb2NhbE5vcm1hbCh2ZWMzIHZlcnRleE5vcm1hbCkge1xyXG5cclxuICAgICAgICBkQ3VycmVudEZpZWxkTm9ybWFsID0gZ2V0Q3VycmVudEZpZWxkTm9ybWFsKCk7XHJcbiAgICAgICAgdmVydGV4X25vcm1hbCA9IGRDdXJyZW50RmllbGROb3JtYWw7XHJcblxyXG4gICAgICAgIHJldHVybiBkQ3VycmVudEZpZWxkTm9ybWFsO1xyXG4gICAgfVxyXG5cclxuICAgIG1hdDMgZ2V0Tm9ybWFsTWF0cml4KG1hdDQgbW9kZWxNYXRyaXgpIHtcclxuICAgICAgICByZXR1cm4gbWF0cml4X25vcm1hbDtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBzdGFydFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdm9pZCBtYWluKHZvaWQpIHtcclxuXHJcbiAgICAgICAgZ2xfUG9zaXRpb24gPSBnZXRQb3NpdGlvbigpO1xyXG5cclxuICAgICNpZiBkZWZpbmVkKFNIQURPV19QQVNTKVxyXG4gICAgI2Vsc2VcclxuICAgICAgICBkQ3VycmVudEZpZWxkTm9ybWFsID0gZ2V0Q3VycmVudEZpZWxkTm9ybWFsKCk7XHJcbiAgICAjZW5kaWZcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBnYW1tYU5vcm1hbGl6ZUhlYWRlclBTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgI2RlZmluZSBHQU1NQV9OT1JNQUxJWkVcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBnYW1tYU5vcm1hbGl6ZUNodW5rUFMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGF1dG9HYW1tYUNvcnJlY3RJbnB1dCh2ZWMzIHYpIHtcclxuICAgICAgICAjaWYgZGVmaW5lZChHQU1NQV9OT1JNQUxJWkUpXHJcbiAgICAgICAgICAgIHJldHVybiBnYW1tYUNvcnJlY3RJbnB1dCh2KTtcclxuICAgICAgICAjZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICAjZW5kaWZcclxuICAgIH1cclxuXHJcbiAgICB2ZWM0IGF1dG9HYW1tYUNvcnJlY3RJbnB1dCh2ZWM0IHYpIHtcclxuICAgICAgICAjaWYgZGVmaW5lZChHQU1NQV9OT1JNQUxJWkUpXHJcbiAgICAgICAgICAgIHJldHVybiBnYW1tYUNvcnJlY3RJbnB1dCh2KTtcclxuICAgICAgICAjZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICAjZW5kaWZcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBtYXhMYXllcnNDb3VudCA9IDU7IC8vIERlZmF1bHQgKyBSICsgRyArIEIgKyBBXHJcbmV4cG9ydCBjb25zdCBsYXllcnNEaWZmdXNlUGFyYW1OYW1lID0gXCJ1TGF5ZXJzRGlmZnVzZVwiO1xyXG5leHBvcnQgY29uc3QgbGF5ZXJzTm9ybWFsc1BhcmFtTmFtZSA9IFwidUxheWVyc05vcm1hbHNcIjtcclxuZXhwb3J0IGNvbnN0IGxheWVyc0ZsYWdzUGFyYW1OYW1lICAgPSBcInVMYXllcnNGbGFnc1wiO1xyXG5leHBvcnQgY29uc3QgbGF5ZXJzU2NhbGVQYXJhbU5hbWUgICA9IFwidUxheWVyc1NjYWxlXCI7XHJcbmV4cG9ydCBjb25zdCBsYXllcnNPZmZzZXRQYXJhbU5hbWUgID0gXCJ1TGF5ZXJzT2Zmc2V0XCI7XHJcbmV4cG9ydCBjb25zdCBkaWZmdXNlUFMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB1bmlmb3JtIG1lZGl1bXAgc2FtcGxlcjJEICR7c3BsYXRNYXBQYXJhbU5hbWV9O1xyXG4gICAgdW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyREFycmF5ICR7bGF5ZXJzRGlmZnVzZVBhcmFtTmFtZX07XHJcbiAgICAvL3VuaWZvcm0gbWVkaXVtcCBzYW1wbGVyMkRBcnJheSAke2xheWVyc05vcm1hbHNQYXJhbU5hbWV9O1xyXG4gICAgdW5pZm9ybSBmbG9hdCAke2xheWVyc0ZsYWdzUGFyYW1OYW1lfVske21heExheWVyc0NvdW50fV07XHJcbiAgICB1bmlmb3JtIHZlYzIgJHtsYXllcnNTY2FsZVBhcmFtTmFtZX1bJHttYXhMYXllcnNDb3VudH1dO1xyXG4gICAgdW5pZm9ybSB2ZWMyICR7bGF5ZXJzT2Zmc2V0UGFyYW1OYW1lfVske21heExheWVyc0NvdW50fV07XHJcblxyXG4gICAgdmFyeWluZyBmbG9hdCB2UGF0Y2hMb2Q7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2Q29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdkZpZWxkUG9zaXRpb247XHJcblxyXG4gICAgdmFyeWluZyBmbG9hdCB2Q2xvc2VNYXNrO1xyXG4gICAgdmFyeWluZyBmbG9hdCB2TWlkZGxlTWFzaztcclxuXHJcbiAgICBjb25zdCBmbG9hdCBjbG9zZVV2U2NhbGUgID0gMS4wO1xyXG4gICAgY29uc3QgZmxvYXQgbWlkZGxlVXZTY2FsZSA9IDAuNjtcclxuICAgIGNvbnN0IGZsb2F0IGZhclV2U2NhbGUgICAgPSAwLjM7XHJcblxyXG4gICAgdmVjMyBkaXN0YW5jZURpZmZ1c2VUZXh0dXJlKHZlYzIgdXYsIGludCBsZXZlbCkge1xyXG4gICAgICAgIHZlYzMgZmluYWxVdiA9IHZlYzMoJHtsYXllcnNPZmZzZXRQYXJhbU5hbWV9W2xldmVsXSArIHV2ICogJHtsYXllcnNTY2FsZVBhcmFtTmFtZX1bbGV2ZWxdLCBsZXZlbCk7XHJcbiAgICAgICAgLy92ZWMzIGZpbmFsVHggPSB0ZXh0dXJlKCR7bGF5ZXJzRGlmZnVzZVBhcmFtTmFtZX0sIGZpbmFsVXYgKiB2ZWMzKGZhclV2U2NhbGUsIGZhclV2U2NhbGUsIDEuMCkpLnJnYjtcclxuICAgICAgICAvL2ZpbmFsVHggPSBtaXgoZmluYWxUeCwgdGV4dHVyZSgke2xheWVyc0RpZmZ1c2VQYXJhbU5hbWV9LCBmaW5hbFV2ICogdmVjMyhtaWRkbGVVdlNjYWxlLCBtaWRkbGVVdlNjYWxlLCAxLjApKS5yZ2IsIHZNaWRkbGVNYXNrKTtcclxuICAgICAgICAvL2ZpbmFsVHggPSBtaXgoZmluYWxUeCwgdGV4dHVyZSgke2xheWVyc0RpZmZ1c2VQYXJhbU5hbWV9LCBmaW5hbFV2ICogdmVjMyhjbG9zZVV2U2NhbGUsIGNsb3NlVXZTY2FsZSwgMS4wKSkucmdiLCB2Q2xvc2VNYXNrKTtcclxuICAgICAgICByZXR1cm4gdGV4dHVyZSgke2xheWVyc0RpZmZ1c2VQYXJhbU5hbWV9LCBmaW5hbFV2KS5yZ2I7XHJcbiAgICB9XHJcblxyXG4gICAgdm9pZCBnZXRBbGJlZG8oKSB7XHJcblxyXG4gICAgICAgIHZlYzQgc3BsYXRNYXAgPSB0ZXh0dXJlMkQoJHtzcGxhdE1hcFBhcmFtTmFtZX0sIHZVdkNvb3JkKTtcclxuICAgICAgICB2ZWMzIGFsYmVkbyAgID0gZGlzdGFuY2VEaWZmdXNlVGV4dHVyZSh2VXZDb29yZCwgMCk7XHJcblxyXG4gICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgJHttYXhMYXllcnNDb3VudH07ICsraSkge1xyXG5cclxuICAgICAgICAgICAgZmxvYXQgc3BsYXRGYWN0b3IgPSBzcGxhdE1hcFtpIC0gMV07XHJcblxyXG4jaWYgZGVmaW5lZChXRUJHUFUpXHJcbiAgICAgICAgICAgIGlmICgke2xheWVyc0ZsYWdzUGFyYW1OYW1lfVtpXSA+IDAuMCkge1xyXG4jZWxzZVxyXG4gICAgICAgICAgICBpZiAoJHtsYXllcnNGbGFnc1BhcmFtTmFtZX1baV0gPiAwLjAgJiYgc3BsYXRGYWN0b3IgPiAwLjApIHtcclxuI2VuZGlmXHJcbiAgICAgICAgICAgICAgICBhbGJlZG8gPSBtaXgoYWxiZWRvLCBkaXN0YW5jZURpZmZ1c2VUZXh0dXJlKHZVdkNvb3JkLCBpKSwgc3BsYXRGYWN0b3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGRBbGJlZG8gPSBhdXRvR2FtbWFDb3JyZWN0SW5wdXQoYWxiZWRvKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUFsdGl0dWRlRnJvbVRleHR1cmVWU1N0b3JlIHtcclxuICAgIGdldEFsdGl0dWRlRnJvbVIzMkZWUzogc3RyaW5nLFxyXG4gICAgZ2V0QWx0aXR1ZGVGcm9tUkdCQThVVlM6IHN0cmluZyxcclxuICAgIGdldEFsdGl0dWRlRnJvbVIxNlVWUzogc3RyaW5nLFxyXG4gICAgZ2V0QWx0aXR1ZGVGcm9tUjhVVlM6IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldEFsdGl0dWRlRnJvbVRleHR1cmVDaHVua3M6IElBbHRpdHVkZUZyb21UZXh0dXJlVlNTdG9yZSA9IHtcclxuICAgIGdldEFsdGl0dWRlRnJvbVIzMkZWUyxcclxuICAgIGdldEFsdGl0dWRlRnJvbVJHQkE4VVZTLFxyXG4gICAgZ2V0QWx0aXR1ZGVGcm9tUjE2VVZTLFxyXG4gICAgZ2V0QWx0aXR1ZGVGcm9tUjhVVlMsXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjaHVua3MgPSB7XHJcblxyXG4gICAgLi4uZ2V0QWx0aXR1ZGVGcm9tVGV4dHVyZUNodW5rcyxcclxuXHJcbiAgICBoZWlnaHRNYXBTYW1wbGVyLFxyXG5cclxuICAgIGdldEN1cnJlbnRGaWVsZFhaRm9yQ29tYmluZUluc3RhbmNpbmdDaHVua1ZTLFxyXG4gICAgZ2V0Q3VycmVudEZpZWxkWFpGb3JJbnN0YW5jaW5nQ2h1bmtWUyxcclxuICAgIGdldEN1cnJlbnRGaWVsZFhaQ2h1bmtWUyxcclxuXHJcbiAgICBnZXRBbHRpdHVkZUZyb21UZXh0dXJlVlMsXHJcblxyXG4gICAgZ2V0RmllbGRDb29yZHNDaHVua1ZTLFxyXG4gICAgZ2V0RmllbGRDaHVua0J1ZmZlckNvb3JkVlMsXHJcblxyXG4gICAgbm9ybWFsQnlIZWlnaHRNYXBWUyxcclxuXHJcbiAgICAvLyBWZXJ0ZXhcclxuICAgIGRlZmluZXNWUyxcclxuICAgIGJhc2VGb3JDb21iaW5lSW5zdGFuY2luZ1ZTLFxyXG4gICAgYmFzZUZvckluc3RhbmNpbmdWUyxcclxuICAgIGJhc2VPcmlnaW5hbFZTLFxyXG4gICAgYmFzZUNsZWFyVlMsXHJcbiAgICBiYXNlQ2xlYXJTdWJWUyxcclxuXHJcbiAgICB0cmFuc2Zvcm1EZWNsVlMsXHJcbiAgICBcclxuICAgIHRyYW5zZm9ybVZTLFxyXG4gICAgaW5zdGFuY2luZ1ZTLFxyXG4gICAgdHJhbnNmb3JtSW5zdGFuY2luZ1ZTLFxyXG4gICAgbm9ybWFsVlMsXHJcbiAgICBub3JtYWxDb3JlVlMsXHJcblxyXG4gICAgdXYwVlMsXHJcbiAgICBzdGFydFZTLFxyXG4gICAgc3RhcnRVdjBWUyxcclxuXHJcbiAgICAvLyBGcmFnbWVudFxyXG4gICAgZ2FtbWFOb3JtYWxpemVIZWFkZXJQUyxcclxuICAgIGdhbW1hTm9ybWFsaXplQ2h1bmtQUyxcclxuICAgIGRpZmZ1c2VQUyxcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsdGl0dWRlRnJvbVRleHR1cmVWU0NvZGUoZm9ybWF0OiBUSGVpZ2h0TWFwRm9ybWF0LCBjaHVua3NTdG9yZTogSUFsdGl0dWRlRnJvbVRleHR1cmVWU1N0b3JlKSB7XHJcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xyXG4gICAgICAgIGNhc2UgJ3IzMmYnOiByZXR1cm4gY2h1bmtzU3RvcmUuZ2V0QWx0aXR1ZGVGcm9tUjMyRlZTO1xyXG4gICAgICAgIGNhc2UgJ3JnYmEnOiByZXR1cm4gY2h1bmtzU3RvcmUuZ2V0QWx0aXR1ZGVGcm9tUkdCQThVVlM7XHJcbiAgICAgICAgY2FzZSAncjE2dSc6IHJldHVybiBjaHVua3NTdG9yZS5nZXRBbHRpdHVkZUZyb21SMTZVVlM7XHJcbiAgICAgICAgY2FzZSAncjh1JzogcmV0dXJuIGNodW5rc1N0b3JlLmdldEFsdGl0dWRlRnJvbVI4VVZTO1xyXG4gICAgICAgIGRlZmF1bHQ6IGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtYXQgbm90IHN1cHBvcnRlZCcpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGV4dHVyZVR5cGUoZm9ybWF0OiBUSGVpZ2h0TWFwRm9ybWF0KSB7XHJcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xyXG4gICAgICAgIGNhc2UgJ3IzMmYnOiByZXR1cm4gcGMuUElYRUxGT1JNQVRfUjMyRjtcclxuICAgICAgICBjYXNlICdyZ2JhJzogcmV0dXJuIHBjLlBJWEVMRk9STUFUX1JHQkE4VTtcclxuICAgICAgICBjYXNlICdyMTZ1JzogcmV0dXJuIHBjLlBJWEVMRk9STUFUX1IxNlU7XHJcbiAgICAgICAgY2FzZSAncjh1JzogcmV0dXJuIHBjLlBJWEVMRk9STUFUX1I4VTtcclxuICAgICAgICBkZWZhdWx0OiBicmVhaztcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignRm9ybWF0IG5vdCBzdXBwb3J0ZWQnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNhbXBsZXJUeXBlKGZvcm1hdDogVEhlaWdodE1hcEZvcm1hdCkge1xyXG4gICAgc3dpdGNoIChmb3JtYXQpIHtcclxuICAgICAgICBjYXNlICdyMzJmJzogcmV0dXJuICdzYW1wbGVyMkRBcnJheSc7XHJcbiAgICAgICAgY2FzZSAncmdiYSc6IHJldHVybiAndXNhbXBsZXIyREFycmF5JztcclxuICAgICAgICBjYXNlICdyMTZ1JzogcmV0dXJuICd1c2FtcGxlcjJEQXJyYXknO1xyXG4gICAgICAgIGNhc2UgJ3I4dSc6IHJldHVybiAndXNhbXBsZXIyREFycmF5JztcclxuICAgICAgICBkZWZhdWx0OiBicmVhaztcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignRm9ybWF0IG5vdCBzdXBwb3J0ZWQnKTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVEluc3RhbmNpbmdUeXBlID0gJ3NpbXBsZScgfCAnY29tYmluZScgfCBmYWxzZTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUZpZWxkU2hhZGVyT3B0aW9ucyB7XHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgZGVwdGg6IG51bWJlcixcclxuICAgIHBhdGNoU2l6ZTogbnVtYmVyLFxyXG4gICAgaGVpZ2h0TWFwQ2h1bmtTaXplOiBudW1iZXIsXHJcbiAgICBpbnN0YW5jaW5nOiBUSW5zdGFuY2luZ1R5cGUsXHJcbiAgICBoZWlnaHRNYXBGb3JtYXQ6IFRIZWlnaHRNYXBGb3JtYXQsXHJcbiAgICBjaHVua3NTdG9yZT86IHR5cGVvZiBjaHVua3MsXHJcbiAgICBlbmdpbmVWZXJzaW9uOiAndjEnIHwgJ3YyJ1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmllbGRTaGFkZXJDaHVua3Moe1xyXG4gICAgd2lkdGgsXHJcbiAgICBkZXB0aCxcclxuICAgIHBhdGNoU2l6ZSxcclxuICAgIGhlaWdodE1hcENodW5rU2l6ZSxcclxuICAgIGluc3RhbmNpbmcsXHJcbiAgICBoZWlnaHRNYXBGb3JtYXQsXHJcbiAgICBjaHVua3NTdG9yZSA9IGNodW5rcyxcclxuICAgIGVuZ2luZVZlcnNpb24gPSAndjEnLFxyXG59OiBJRmllbGRTaGFkZXJPcHRpb25zKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XHJcblxyXG4gICAgY29uc3QgZGVmaW5lc1ZTID0gY2h1bmtzU3RvcmUuZGVmaW5lc1ZTXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlSE1fTlVNX0NIVU5LU19YJSUnLCBTdHJpbmcoKHdpZHRoIC0gMSkgLyAoaGVpZ2h0TWFwQ2h1bmtTaXplIC0gMSkgfCAwKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVITV9DSFVOS19TSVpFJSUnLCBTdHJpbmcoaGVpZ2h0TWFwQ2h1bmtTaXplIHwgMCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlRklFTERfU0laRV9YJSUnLCBTdHJpbmcod2lkdGgpKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUZJRUxEX1NJWkVfWiUlJywgU3RyaW5nKGRlcHRoKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVGSUVMRF9TSVpFX1hfRiUlJywgd2lkdGgudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVGSUVMRF9TSVpFX1pfRiUlJywgZGVwdGgudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVGSUVMRF9QQVRDSF9TSVpFX1glJScsIHBhdGNoU2l6ZS50b0ZpeGVkKDEpKTtcclxuXHJcbiAgICBjb25zdCBnZXRBbHRpdHVkZUZyb21UZXh0dXJlVlMgPSBnZXRBbHRpdHVkZUZyb21UZXh0dXJlVlNDb2RlKGhlaWdodE1hcEZvcm1hdCwgY2h1bmtzU3RvcmUpO1xyXG5cclxuICAgIGNvbnN0IGhtVlMgPSBjaHVua3NTdG9yZS5oZWlnaHRNYXBTYW1wbGVyLnJlcGxhY2VBbGwoJyUlSEVJR0hUX01BUF9TQU1QTEVSJSUnLCBnZXRTYW1wbGVyVHlwZShoZWlnaHRNYXBGb3JtYXQpKTtcclxuICAgIGNvbnN0IGJhc2VDbGVhclZTID0gY2h1bmtzU3RvcmUuYmFzZUNsZWFyVlMgKyBobVZTO1xyXG5cclxuICAgIGNvbnN0IGJhc2VDb29yZFZTID0gaW5zdGFuY2luZyA9PT0gJ2NvbWJpbmUnID8gY2h1bmtzU3RvcmUuYmFzZUZvckNvbWJpbmVJbnN0YW5jaW5nVlMgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jaW5nID09PSAnc2ltcGxlJyAgPyBjaHVua3NTdG9yZS5iYXNlRm9ySW5zdGFuY2luZ1ZTIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzU3RvcmUuYmFzZU9yaWdpbmFsVlM7XHJcblxyXG4gICAgY29uc3QgY3VycmVudEZpZWxkWFpWUyA9IGluc3RhbmNpbmcgPT09ICdjb21iaW5lJyA/IGNodW5rc1N0b3JlLmdldEN1cnJlbnRGaWVsZFhaRm9yQ29tYmluZUluc3RhbmNpbmdDaHVua1ZTIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jaW5nID09PSAnc2ltcGxlJyAgPyBjaHVua3NTdG9yZS5nZXRDdXJyZW50RmllbGRYWkZvckluc3RhbmNpbmdDaHVua1ZTIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua3NTdG9yZS5nZXRDdXJyZW50RmllbGRYWkNodW5rVlM7XHJcbiAgICBcclxuICAgIGlmIChlbmdpbmVWZXJzaW9uID09PSAndjInKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vcm1hbENvcmVWUyA9IGNodW5rc1N0b3JlLm5vcm1hbEJ5SGVpZ2h0TWFwVlMgKyBjaHVua3NTdG9yZS5ub3JtYWxDb3JlVlM7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtVlMgPSBkZWZpbmVzVlNcclxuICAgICAgICAgICAgKyBiYXNlQ29vcmRWU1xyXG4gICAgICAgICAgICArIGJhc2VDbGVhclZTXHJcbiAgICAgICAgICAgICsgY3VycmVudEZpZWxkWFpWU1xyXG4gICAgICAgICAgICArIGdldEFsdGl0dWRlRnJvbVRleHR1cmVWU1xyXG4gICAgICAgICAgICArIGNodW5rc1N0b3JlLmdldEZpZWxkQ29vcmRzQ2h1bmtWU1xyXG4gICAgICAgICAgICArIGNodW5rc1N0b3JlLmdldEZpZWxkQ2h1bmtCdWZmZXJDb29yZFZTXHJcbiAgICAgICAgICAgICsgY2h1bmtzU3RvcmUuZ2V0QWx0aXR1ZGVGcm9tVGV4dHVyZVZTXHJcbiAgICAgICAgICAgICsgY2h1bmtzU3RvcmUudHJhbnNmb3JtVlM7XHJcblxyXG4gICAgICAgIGNvbnN0IGRpZmZ1c2VQUyA9IGNodW5rc1N0b3JlLmdhbW1hTm9ybWFsaXplQ2h1bmtQU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICArIGNodW5rc1N0b3JlLmRpZmZ1c2VQUztcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFZlcnRleFxyXG4gICAgICAgICAgICBub3JtYWxDb3JlVlMsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybVZTLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1Db3JlVlM6ICcnLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1JbnN0YW5jaW5nVlM6ICcnLFxyXG5cclxuICAgICAgICAgICAgLy8gRnJhZ21lbnRcclxuICAgICAgICAgICAgZGlmZnVzZVBTLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RhcnRWUyA9IGNodW5rc1N0b3JlLm5vcm1hbEJ5SGVpZ2h0TWFwVlMgKyBjaHVua3NTdG9yZS5zdGFydFV2MFZTICsgY2h1bmtzU3RvcmUuc3RhcnRWUztcclxuICAgIGNvbnN0IGJhc2VWUyA9IGJhc2VDb29yZFZTICsgYmFzZUNsZWFyVlMgKyBjaHVua3NTdG9yZS5iYXNlQ2xlYXJTdWJWUztcclxuICAgIGNvbnN0IHRyYW5zZm9ybVZTID0gZGVmaW5lc1ZTXHJcbiAgICAgICAgKyBjdXJyZW50RmllbGRYWlZTXHJcbiAgICAgICAgKyBnZXRBbHRpdHVkZUZyb21UZXh0dXJlVlNcclxuICAgICAgICArIGNodW5rc1N0b3JlLmdldEZpZWxkQ29vcmRzQ2h1bmtWU1xyXG4gICAgICAgICsgY2h1bmtzU3RvcmUuZ2V0RmllbGRDaHVua0J1ZmZlckNvb3JkVlNcclxuICAgICAgICArIGNodW5rc1N0b3JlLmdldEFsdGl0dWRlRnJvbVRleHR1cmVWU1xyXG4gICAgICAgICsgY2h1bmtzU3RvcmUudHJhbnNmb3JtVlM7XHJcblxyXG4gICAgY29uc3QgZGlmZnVzZVBTID0gY2h1bmtzU3RvcmUuZ2FtbWFOb3JtYWxpemVIZWFkZXJQU1xyXG4gICAgICAgICAgICAgICAgICAgICsgY2h1bmtzU3RvcmUuZ2FtbWFOb3JtYWxpemVDaHVua1BTXHJcbiAgICAgICAgICAgICAgICAgICAgKyBjaHVua3NTdG9yZS5kaWZmdXNlUFM7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgLy8gVmVydGV4XHJcbiAgICAgICAgYmFzZVZTLFxyXG4gICAgICAgIHRyYW5zZm9ybVZTLFxyXG4gICAgICAgIG5vcm1hbFZTOiBjaHVua3NTdG9yZS5ub3JtYWxWUyxcclxuICAgICAgICB1djBWUzogY2h1bmtzU3RvcmUudXYwVlMsXHJcbiAgICAgICAgc3RhcnRWUyxcclxuXHJcbiAgICAgICAgdHJhbnNmb3JtRGVjbFZTOiBjaHVua3NTdG9yZS50cmFuc2Zvcm1EZWNsVlMsXHJcbiAgICAgICAgaW5zdGFuY2luZ1ZTOiBjaHVua3NTdG9yZS5pbnN0YW5jaW5nVlMsXHJcblxyXG4gICAgICAgIC8vIEZyYWdtZW50XHJcbiAgICAgICAgZGlmZnVzZVBTLFxyXG4gICAgfTtcclxufSIsImltcG9ydCB0eXBlIHsgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHsgY2hlY2tTdXBwb3J0UjMyRlRleHR1cmUgfSBmcm9tIFwiLi4vRXh0cmFzL1V0aWxzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElSZWFkb25seUFic0hlaWdodE1hcCwgVEhlaWdodE1hcEZvcm1hdCB9IGZyb20gXCIuLi9Db3JlL0Fic0hlaWdodE1hcC5tanNcIjtcclxuaW1wb3J0IFNxdWFyZUl0ZXJhdG9yIGZyb20gXCIuLi9Db3JlL1NxdWFyZUl0ZXJhdG9yLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElab25lIH0gZnJvbSBcIi4uL0NvcmUvSVpvbmUubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRmaWVsZCBmcm9tIFwiLi4vQ29yZS9IZWlnaHRmaWVsZC5tanNcIjtcclxuaW1wb3J0IHsgZ2V0VGV4dHVyZVR5cGUgfSBmcm9tIFwiLi9TaGFkZXJDaHVua3MubWpzXCI7XHJcbmltcG9ydCBQYXRjaGVkSGVpZ2h0TWFwIGZyb20gXCIuLi9Db3JlL1BhdGNoZWRIZWlnaHRNYXAubWpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHUFVIZWlnaHRNYXBCdWZmZXIgZXh0ZW5kcyBTcXVhcmVJdGVyYXRvciB7XHJcblxyXG4gICAgcHJpdmF0ZSBfYXBwOiBwY3guQXBwQmFzZTtcclxuICAgIHByaXZhdGUgX2Zvcm1hdDogVEhlaWdodE1hcEZvcm1hdDtcclxuICAgIHByaXZhdGUgX3RleHR1cmU6IHBjeC5UZXh0dXJlO1xyXG4gICAgcHJpdmF0ZSBfdGV4dHVyZUxldmVsc1R5cGU6IEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yIHwgVWludDE2QXJyYXlDb25zdHJ1Y3RvciB8IFVpbnQ4QXJyYXlDb25zdHJ1Y3RvcjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGFwcCgpIHsgcmV0dXJuIHRoaXMuX2FwcDsgfVxyXG4gICAgcHVibGljIGdldCBmb3JtYXQoKSB7IHJldHVybiB0aGlzLl9mb3JtYXQ7IH1cclxuICAgIHB1YmxpYyBnZXQgdGV4dHVyZSgpIHsgcmV0dXJuIHRoaXMuX3RleHR1cmU7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoYXBwOiBwY3guQXBwQmFzZSwgZmllbGQ6IEhlaWdodGZpZWxkKSB7XHJcbiAgICAgICAgc3VwZXIoZmllbGQpO1xyXG4gICAgICAgIHRoaXMuX2FwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLl9pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fdGV4dHVyZT8uZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXQoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3RleHR1cmU/LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGV2aWNlICAgICAgICA9IHRoaXMuX2FwcC5ncmFwaGljc0RldmljZTtcclxuICAgICAgICBjb25zdCBoZWlnaHRGb3JtYXQgID0gZ2V0SGVpZ2h0TWFwRm9ybWF0KGRldmljZSwgdGhpcy5maWVsZC5oZWlnaHRNYXApO1xyXG4gICAgICAgIGNvbnN0IGZvcm1hdCAgICAgICAgPSBnZXRUZXh0dXJlVHlwZShoZWlnaHRGb3JtYXQpO1xyXG4gICAgICAgIGNvbnN0IGJ1ZkZvcm1hdCAgICAgPSBnZXRIZWlnaHRNYXBDaHVua0J1ZmZlclR5cGUoZGV2aWNlLCBmb3JtYXQpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFDaHVua1NpemUgPSB0aGlzLmZpZWxkLmhlaWdodE1hcC5kYXRhQ2h1bmtTaXplO1xyXG4gICAgICAgIGNvbnN0IGNodW5rcyAgICAgICAgPSB0aGlzLmZpZWxkLmhlaWdodE1hcC5nZXRDaHVua3NCdWZmZXJzKGJ1ZkZvcm1hdCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2Zvcm1hdCA9IGhlaWdodEZvcm1hdDtcclxuICAgICAgICB0aGlzLl90ZXh0dXJlTGV2ZWxzVHlwZSA9IGJ1ZkZvcm1hdDtcclxuICAgICAgICB0aGlzLl90ZXh0dXJlID0gbmV3IHBjLlRleHR1cmUoZGV2aWNlLCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBkYXRhQ2h1bmtTaXplLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGRhdGFDaHVua1NpemUsXHJcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0LFxyXG4gICAgICAgICAgICBtaXBtYXBzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWluRmlsdGVyOiBwYy5GSUxURVJfTkVBUkVTVCxcclxuICAgICAgICAgICAgbWFnRmlsdGVyOiBwYy5GSUxURVJfTkVBUkVTVCxcclxuICAgICAgICAgICAgYWRkcmVzc1U6IHBjLkFERFJFU1NfQ0xBTVBfVE9fRURHRSxcclxuICAgICAgICAgICAgYWRkcmVzc1Y6IHBjLkFERFJFU1NfQ0xBTVBfVE9fRURHRSxcclxuICAgICAgICAgICAgYWRkcmVzc1c6IHBjLkFERFJFU1NfQ0xBTVBfVE9fRURHRSxcclxuICAgICAgICAgICAgZmxpcFk6ICFkZXZpY2UuaXNXZWJHUFUsXHJcbiAgICAgICAgICAgIGFycmF5TGVuZ3RoOiBjaHVua3MubGVuZ3RoLFxyXG4gICAgICAgICAgICBsZXZlbHM6IFtjaHVua3NdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZUhlaWdodE1hcENodW5rKGNodW5rWDogaW50LCBjaHVua1o6IGludCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRoZSBoZWlnaHQgbWFwIGlzIHVwZGF0ZWQgYnkgdXBkYXRpbmcgdGhlIGVudGlyZSBjaHVuayxcclxuICAgICAgICAvLyB3aGljaCBpcyBzdWZmaWNpZW50IGlmIHRoZSBjaHVuayBzaXplIGlzIG5vdCBsYXJnZS5cclxuXHJcbiAgICAgICAgY29uc3QgZGF0YUNodW5rU2l6ZSA9IHRoaXMuZmllbGQuaGVpZ2h0TWFwLmRhdGFDaHVua1NpemU7XHJcbiAgICAgICAgY29uc3QgbGV2ZWwgID0gdGhpcy5maWVsZC5oZWlnaHRNYXAuZ2V0Q2h1bmtJbmRleChjaHVua1gsIGNodW5rWik7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5maWVsZC5oZWlnaHRNYXAuZ2V0Q2h1bmtCdWZmZXIodGhpcy5fdGV4dHVyZUxldmVsc1R5cGUsIGNodW5rWCwgY2h1bmtaKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2FwcC5ncmFwaGljc0RldmljZS5pc1dlYkdMMikge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2wgPSAodGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlIGFzIHBjeC5XZWJnbEdyYXBoaWNzRGV2aWNlKS5nbDtcclxuICAgICAgICAgICAgY29uc3QgdGV4dHVyZUZvcm1hdCA9IHRoaXMuX3RleHR1cmUuaW1wbC5fZ2xGb3JtYXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVQaXhlbFQgPSB0aGlzLl90ZXh0dXJlLmltcGwuX2dsUGl4ZWxUeXBlO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlVGFyZ2V0ID0gdGhpcy5fdGV4dHVyZS5pbXBsLl9nbFRhcmdldDtcclxuICAgICAgICAgICAgY29uc3QgdGV4dHVyZU9iamVjdCA9IHRoaXMuX3RleHR1cmUuaW1wbC5fZ2xUZXh0dXJlO1xyXG5cclxuICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUodGV4dHVyZVRhcmdldCwgdGV4dHVyZU9iamVjdCk7XHJcbiAgICAgICAgICAgIGdsLnRleFN1YkltYWdlM0QoZ2wuVEVYVFVSRV8yRF9BUlJBWSwgMCwgMCwgMCwgbGV2ZWwsIGRhdGFDaHVua1NpemUsIGRhdGFDaHVua1NpemUsIDEsIHRleHR1cmVGb3JtYXQsIHRleHR1cmVQaXhlbFQsIGJ1ZmZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2FwcC5ncmFwaGljc0RldmljZS5pc1dlYkdQVSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgd2ViZ3B1ICA9ICh0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UgYXMgYW55KS53Z3B1IGFzIEdQVURldmljZTtcclxuICAgICAgICAgICAgY29uc3QgdGV4dHVyZSA9ICh0aGlzLl90ZXh0dXJlLmltcGwuZ3B1VGV4dHVyZSkgYXMgR1BVVGV4dHVyZTtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0SW5mbyA9IHBjLnBpeGVsRm9ybWF0SW5mby5nZXQodGhpcy5fdGV4dHVyZS5mb3JtYXQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFmb3JtYXRJbmZvIHx8ICFmb3JtYXRJbmZvLnNpemUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdGV4dHVyZSBmb3JtYXRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHdlYmdwdS5xdWV1ZS53cml0ZVRleHR1cmUoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZSxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFswLCAwLCBsZXZlbF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidWZmZXIsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzUGVyUm93OiBkYXRhQ2h1bmtTaXplICogZm9ybWF0SW5mby5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvd3NQZXJJbWFnZTogZGF0YUNodW5rU2l6ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogZGF0YUNodW5rU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGRhdGFDaHVua1NpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVwdGhPckFycmF5TGF5ZXJzOiAxXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVIZWlnaHRNYXAoem9uZTogSVpvbmUpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJZ25vcmUgdXBkYXRlIGlmIGhlaWdodCBtYXAgbmVlZCB1cGxvYWRcclxuICAgICAgICBpZiAodGhpcy5fdGV4dHVyZS5fbmVlZHNVcGxvYWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZm9yRWFjaChcclxuICAgICAgICAgICAgem9uZSxcclxuICAgICAgICAgICAgdGhpcy5maWVsZC5oZWlnaHRNYXAuZGF0YUNodW5rU2l6ZSxcclxuICAgICAgICAgICAgdGhpcy5maWVsZC5oZWlnaHRNYXAuZGF0YU51bUNodW5rc1gsXHJcbiAgICAgICAgICAgIHRoaXMuZmllbGQuaGVpZ2h0TWFwLmRhdGFOdW1DaHVua3NaLFxyXG4gICAgICAgICAgICAocGF0Y2hJbmRleCwgeCwgeikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVIZWlnaHRNYXBDaHVuayh4LCB6KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIZWlnaHRNYXBGb3JtYXQoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgaGVpZ2h0TWFwOiBJUmVhZG9ubHlBYnNIZWlnaHRNYXApIHtcclxuICAgIFxyXG4gICAgbGV0IGhtRm9ybWF0OiBUSGVpZ2h0TWFwRm9ybWF0ID0gJ3IzMmYnO1xyXG5cclxuICAgIGlmIChoZWlnaHRNYXAgaW5zdGFuY2VvZiBQYXRjaGVkSGVpZ2h0TWFwKSB7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoaGVpZ2h0TWFwLnZhbHVlVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICczMmYnOiBobUZvcm1hdCA9ICdyMzJmJzsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJzE2dSc6IGhtRm9ybWF0ID0gJ3IxNnUnOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnOHUnOiAgaG1Gb3JtYXQgPSAncjh1JzsgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHZhbHVlIHR5cGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVzZSBwb2x5ZmlsbCBmbG9hdCB0ZXh0dXJlIGJ5IHJnYmEtPmZsb2F0IGNvbnZlcnRlciBieSBzaGFkZXJcclxuICAgIGlmIChobUZvcm1hdCA9PT0gJ3IzMmYnICYmICFjaGVja1N1cHBvcnRSMzJGVGV4dHVyZShncmFwaGljc0RldmljZSkpIHtcclxuICAgICAgICBobUZvcm1hdCA9ICdyZ2JhJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaG1Gb3JtYXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIZWlnaHRNYXBDaHVua0J1ZmZlclR5cGUoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgZm9ybWF0OiBudW1iZXIpIHtcclxuXHJcbiAgICBpZiAoZm9ybWF0ID09PSBwYy5QSVhFTEZPUk1BVF9SMzJGKSB7XHJcbiAgICAgICAgcmV0dXJuIEZsb2F0MzJBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZm9ybWF0ID09PSBwYy5QSVhFTEZPUk1BVF9SMTZVKSB7XHJcbiAgICAgICAgcmV0dXJuIFVpbnQxNkFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChmb3JtYXQgPT09IHBjLlBJWEVMRk9STUFUX1I4VSkge1xyXG4gICAgICAgIHJldHVybiBVaW50OEFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZm9ybWF0Jyk7XHJcbn0iLCJleHBvcnQgaW50ZXJmYWNlIElCcnVzaFNldHRpbmdzIHtcclxuICAgIHJlYWRvbmx5IGFjdGl2ZTogbnVtYmVyLFxyXG4gICAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyLFxyXG4gICAgcmVhZG9ubHkgb3BhY2l0eTogbnVtYmVyLFxyXG4gICAgcmVhZG9ubHkgdGV4dHVyZXM6IHBjeC5Bc3NldFtdO1xyXG59IiwiZXhwb3J0IGNvbnN0IHZlcnRleFNoYWRlciA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIGF0dHJpYnV0ZSB2ZWMzIGFQb3NpdGlvbjtcclxuICAgIGF0dHJpYnV0ZSB2ZWMyIGFVdjA7XHJcblxyXG4gICAgdW5pZm9ybSBtYXQ0IG1hdHJpeF9tb2RlbDtcclxuICAgIHVuaWZvcm0gbWF0NCBtYXRyaXhfdmlld1Byb2plY3Rpb247XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZVdjA7XHJcblxyXG4gICAgdm9pZCBtYWluKHZvaWQpXHJcbiAgICB7XHJcbiAgICAgICAgdlV2MCA9IGFVdjA7XHJcbiAgICAgICAgZ2xfUG9zaXRpb24gPSBtYXRyaXhfdmlld1Byb2plY3Rpb24gKiBtYXRyaXhfbW9kZWwgKiB2ZWM0KGFQb3NpdGlvbiwgMS4wKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBmYWN0b3JNZXRob2QgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2MDtcclxuXHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1SGVpZ2h0TWFwO1xyXG4gICAgdW5pZm9ybSBmbG9hdCB1QnJ1c2hPcGFjaXR5O1xyXG4gICAgdW5pZm9ybSB2ZWM0IHVCcnVzaE1hc2s7XHJcblxyXG4gICAgZmxvYXQgZ2V0RmFjdG9yKCkge1xyXG4gICAgICAgIHZlYzQgaGVpZ2h0TWFwID0gdGV4dHVyZTJEKHVIZWlnaHRNYXAsIHZVdjApO1xyXG4gICAgICAgIGZsb2F0IGhlaWdodCAgID0gKGhlaWdodE1hcC5yICsgaGVpZ2h0TWFwLmcgKyBoZWlnaHRNYXAuYikgLyAzLjAgLyBoZWlnaHRNYXAuYTtcclxuICAgICAgICBmbG9hdCBmYWN0b3IgICA9IGhlaWdodCAqIHVCcnVzaE9wYWNpdHk7XHJcbiAgICAgICAgcmV0dXJuIGZhY3RvcjtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBmcmFnbWVudFNoYWRlciA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICR7ZmFjdG9yTWV0aG9kfVxyXG5cclxuICAgIHZvaWQgbWFpbih2b2lkKVxyXG4gICAge1xyXG4gICAgICAgIGZsb2F0IGZhY3RvciA9IGdldEZhY3RvcigpO1xyXG4gICAgICAgIHZlYzQgY29sb3IgPSB2ZWM0KHVCcnVzaE1hc2sgKiBmYWN0b3IpO1xyXG5cclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSBjb2xvcjtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBmcmFnbWVudEludmVydFNoYWRlciA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgICR7ZmFjdG9yTWV0aG9kfVxyXG5cclxuICAgIHZvaWQgbWFpbih2b2lkKVxyXG4gICAge1xyXG4gICAgICAgIGZsb2F0IGxldmVscyA9IDQuMDtcclxuICAgICAgICBmbG9hdCBmYWN0b3IgPSBnZXRGYWN0b3IoKTtcclxuICAgICAgICB2ZWM0IGNvbG9yICAgPSB2ZWM0KGZhY3Rvcik7XHJcblxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLnIgPiAwLjApIHsgY29sb3IuciA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLmcgPiAwLjApIHsgY29sb3IuZyA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLmIgPiAwLjApIHsgY29sb3IuYiA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG4gICAgICAgIGlmICh1QnJ1c2hNYXNrLmEgPiAwLjApIHsgY29sb3IuYSA9IDAuMDsgbGV2ZWxzIC09IDEuMDsgfVxyXG5cclxuICAgICAgICBnbF9GcmFnQ29sb3IgPSBjb2xvciAvIGxldmVscztcclxuICAgIH1cclxuYDsiLCJpbXBvcnQgeyBJQnJ1c2hTZXR0aW5ncyB9IGZyb20gXCIuL0JydXNoLm1qc1wiO1xyXG5pbXBvcnQgeyBmcmFnbWVudEludmVydFNoYWRlciwgZnJhZ21lbnRTaGFkZXIsIHZlcnRleFNoYWRlciB9IGZyb20gXCIuL0NvbG9yUGFpbnRlclNoYWRlcnMubWpzXCI7XHJcbmltcG9ydCB7IHNldFByZWNpc2lvbiB9IGZyb20gXCIuLi9FeHRyYXMvVXRpbHMubWpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGFpbnRlckNhbWVyYUZhciA9IDEwO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JQYWludGVyIHtcclxuXHJcbiAgICBwcml2YXRlIF9sYXllck5hbWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgX3BhaW50aW5nOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRlck1hc2s6IEZsb2F0MzJBcnJheTtcclxuICAgIHByaXZhdGUgX2JydXNoU2V0dGluZ3M6IElCcnVzaFNldHRpbmdzO1xyXG5cclxuICAgIHByaXZhdGUgX2FwcDogcGN4LkFwcEJhc2U7XHJcbiAgICBwcml2YXRlIF9idWZmZXI6IHBjeC5UZXh0dXJlO1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRlclJlbmRlclRhcmdldDogcGN4LlJlbmRlclRhcmdldDtcclxuICAgIHByaXZhdGUgX3BhaW50ZXJDYW1lcmFFbnRpdHk6IHBjeC5FbnRpdHk7XHJcblxyXG4gICAgcHJpdmF0ZSBfcGFpbnRlclNoYWRlcjogcGN4LlNoYWRlcjtcclxuICAgIHByaXZhdGUgX3BhaW50ZXJNYXRlcmlhbDogcGN4Lk1hdGVyaWFsO1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRlckVudGl0eTogcGN4LkVudGl0eTtcclxuXHJcbiAgICBwcml2YXRlIF9wYWludGVySW52ZXJ0U2hhZGVyOiBwY3guU2hhZGVyO1xyXG4gICAgcHJpdmF0ZSBfcGFpbnRlckludmVydE1hdGVyaWFsOiBwY3guTWF0ZXJpYWw7XHJcbiAgICBwcml2YXRlIF9wYWludGVySW52ZXJ0RW50aXR5OiBwY3guRW50aXR5O1xyXG5cclxuICAgIHB1YmxpYyBnZXQgcGFpbnRpbmcoKSAgIHsgcmV0dXJuIHRoaXMuX3BhaW50aW5nOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGNhbWVyYUZhcigpICB7IHJldHVybiBwYWludGVyQ2FtZXJhRmFyOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGJhY2tncm91bmQoKSB7IHJldHVybiB0aGlzLl9idWZmZXI7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IHBjeC5BcHBCYXNlLCBidWZmZXI6IHBjeC5UZXh0dXJlLCBsYXllck5hbWU6IHN0cmluZykge1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJNYXNrID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcclxuICAgICAgICB0aGlzLl9sYXllck5hbWUgPSBsYXllck5hbWU7XHJcbiAgICAgICAgdGhpcy5fYnVmZmVyID0gYnVmZmVyO1xyXG4gICAgICAgIHRoaXMuX2FwcCA9IGFwcDtcclxuXHJcbiAgICAgICAgdGhpcy5faW5pdENhbWVyYSgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRTaGFkZXJzKCk7XHJcbiAgICAgICAgdGhpcy5faW5pdE1hdGVyaWFscygpO1xyXG4gICAgICAgIHRoaXMuX2luaXRFbnRpdGllcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRDYW1lcmEoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhaW50ZXJMYXllciA9IHRoaXMuX2FwcC5zY2VuZS5sYXllcnMuZ2V0TGF5ZXJCeU5hbWUodGhpcy5fbGF5ZXJOYW1lKSE7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJSZW5kZXJUYXJnZXQgPSBuZXcgcGMuUmVuZGVyVGFyZ2V0KHtcclxuICAgICAgICAgICAgY29sb3JCdWZmZXI6IHRoaXMuX2J1ZmZlcixcclxuICAgICAgICAgICAgZmxpcFk6IHRoaXMuX2FwcC5ncmFwaGljc0RldmljZS5pc1dlYkdQVSxcclxuICAgICAgICAgICAgZGVwdGg6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVyQ2FtZXJhRW50aXR5ID0gbmV3IHBjLkVudGl0eSgnVGVycmFpblBhaW50ZXJDYW1lcmEnKTtcclxuICAgICAgICB0aGlzLl9wYWludGVyQ2FtZXJhRW50aXR5LnNldExvY2FsUG9zaXRpb24oMCwgMCwgcGFpbnRlckNhbWVyYUZhcik7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5sb29rQXQoMCwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5hZGRDb21wb25lbnQoJ2NhbWVyYScsIHtcclxuICAgICAgICAgICAgcHJvamVjdGlvbjogcGMuUFJPSkVDVElPTl9PUlRIT0dSQVBISUMsXHJcbiAgICAgICAgICAgIGNsZWFyQ29sb3JCdWZmZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICBjbGVhckRlcHRoQnVmZmVyOiBmYWxzZSxcclxuICAgICAgICAgICAgcHJpb3JpdHk6IC0xLFxyXG4gICAgICAgICAgICBsYXllcnM6IFtwYWludGVyTGF5ZXIuaWRdLFxyXG4gICAgICAgICAgICBuZWFyQ2xpcDogMC4xLFxyXG4gICAgICAgICAgICBmYXJDbGlwOiBwYWludGVyQ2FtZXJhRmFyICogMixcclxuICAgICAgICAgICAgcmVuZGVyVGFyZ2V0OiB0aGlzLl9wYWludGVyUmVuZGVyVGFyZ2V0LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9hcHAucm9vdC5hZGRDaGlsZCh0aGlzLl9wYWludGVyQ2FtZXJhRW50aXR5KTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5jYW1lcmEhLmZydXN0dW1DdWxsaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckNhbWVyYUVudGl0eS5jYW1lcmEhLm9ydGhvSGVpZ2h0ID0gcGFpbnRlckNhbWVyYUZhcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0RW50aXRpZXMoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhaW50ZXJMYXllciA9IHRoaXMuX2FwcC5zY2VuZS5sYXllcnMuZ2V0TGF5ZXJCeU5hbWUodGhpcy5fbGF5ZXJOYW1lKSE7XHJcblxyXG4gICAgICAgIHBhaW50ZXJMYXllci50cmFuc3BhcmVudFNvcnRNb2RlID0gcGMuU09SVE1PREVfTUFOVUFMO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVyRW50aXR5ICA9IG5ldyBwYy5FbnRpdHkoJ1RlcnJhaW5CcnVzaFBhaW50ZXInKTtcclxuICAgICAgICB0aGlzLl9wYWludGVyRW50aXR5LmFkZENvbXBvbmVudCgncmVuZGVyJywge1xyXG4gICAgICAgICAgICB0eXBlOiAncGxhbmUnLFxyXG4gICAgICAgICAgICBsYXllcnM6IFtwYWludGVyTGF5ZXIuaWRdLFxyXG4gICAgICAgICAgICBtYXRlcmlhbDogdGhpcy5fcGFpbnRlck1hdGVyaWFsLFxyXG4gICAgICAgICAgICBjYXN0U2hhZG93czogZmFsc2UsXHJcbiAgICAgICAgICAgIGNhc3RTaGFkb3dzTGlnaHRtYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICByZWNlaXZlU2hhZG93czogZmFsc2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eSAgPSBuZXcgcGMuRW50aXR5KCdUZXJyYWluQnJ1c2hQYWludGVySW52ZXJ0Jyk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5hZGRDb21wb25lbnQoJ3JlbmRlcicsIHtcclxuICAgICAgICAgICAgdHlwZTogJ3BsYW5lJyxcclxuICAgICAgICAgICAgbGF5ZXJzOiBbcGFpbnRlckxheWVyLmlkXSxcclxuICAgICAgICAgICAgbWF0ZXJpYWw6IHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbCxcclxuICAgICAgICAgICAgY2FzdFNoYWRvd3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBjYXN0U2hhZG93c0xpZ2h0bWFwOiBmYWxzZSxcclxuICAgICAgICAgICAgcmVjZWl2ZVNoYWRvd3M6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVyRW50aXR5LnJlbmRlciEubWVzaEluc3RhbmNlc1swXS5kcmF3T3JkZXIgPSAxO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkucmVuZGVyIS5tZXNoSW5zdGFuY2VzWzBdLmRyYXdPcmRlciA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuX2FwcC5yb290LmFkZENoaWxkKHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkpO1xyXG4gICAgICAgIHRoaXMuX2FwcC5yb290LmFkZENoaWxkKHRoaXMuX3BhaW50ZXJFbnRpdHkpO1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5LnNldExvY2FsRXVsZXJBbmdsZXMoOTAsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkuc2V0TG9jYWxFdWxlckFuZ2xlcyg5MCwgMCwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRTaGFkZXJzKCkge1xyXG5cclxuICAgICAgICBjb25zdCB2ZXJ0ZXggPSB2ZXJ0ZXhTaGFkZXI7XHJcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBzZXRQcmVjaXNpb24odGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlLCBmcmFnbWVudFNoYWRlcik7XHJcbiAgICAgICAgY29uc3QgZnJhZ21lbnRJbnZlcnQgPSBzZXRQcmVjaXNpb24odGhpcy5fYXBwLmdyYXBoaWNzRGV2aWNlLCBmcmFnbWVudEludmVydFNoYWRlcik7XHJcblxyXG4gICAgICAgIGlmIChwYy5TaGFkZXJNYXRlcmlhbCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsID0gbmV3IHBjLlNoYWRlck1hdGVyaWFsKHtcclxuICAgICAgICAgICAgICAgIHVuaXF1ZU5hbWU6ICdUZXJyYWluUGFpbnRlckZyYWdtZW50U2hhZGVyJyxcclxuICAgICAgICAgICAgICAgIHZlcnRleEdMU0w6IHZlcnRleCxcclxuICAgICAgICAgICAgICAgIGZyYWdtZW50R0xTTDogZnJhZ21lbnQsXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYVBvc2l0aW9uOiBwYy5TRU1BTlRJQ19QT1NJVElPTixcclxuICAgICAgICAgICAgICAgICAgICBhVXYwOiBwYy5TRU1BTlRJQ19URVhDT09SRDBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwgPSBuZXcgcGMuU2hhZGVyTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICAgICAgdW5pcXVlTmFtZTogJ1RlcnJhaW5QYWludGVySW52ZXJ0RnJhZ21lbnRTaGFkZXInLFxyXG4gICAgICAgICAgICAgICAgdmVydGV4R0xTTDogdmVydGV4LFxyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRHTFNMOiBmcmFnbWVudEludmVydCxcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhUG9zaXRpb246IHBjLlNFTUFOVElDX1BPU0lUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIGFVdjA6IHBjLlNFTUFOVElDX1RFWENPT1JEMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJTaGFkZXIgPSBwYy5jcmVhdGVTaGFkZXJGcm9tQ29kZSh0aGlzLl9hcHAuZ3JhcGhpY3NEZXZpY2UsIHZlcnRleCwgZnJhZ21lbnQsICdUZXJyYWluUGFpbnRlckZyYWdtZW50U2hhZGVyJywge1xyXG4gICAgICAgICAgICBhUG9zaXRpb246IHBjLlNFTUFOVElDX1BPU0lUSU9OLFxyXG4gICAgICAgICAgICBhVXYwOiBwYy5TRU1BTlRJQ19URVhDT09SRDBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydFNoYWRlciA9IHBjLmNyZWF0ZVNoYWRlckZyb21Db2RlKHRoaXMuX2FwcC5ncmFwaGljc0RldmljZSwgdmVydGV4LCBmcmFnbWVudEludmVydCwgJ1RlcnJhaW5QYWludGVySW52ZXJ0RnJhZ21lbnRTaGFkZXInLCB7XHJcbiAgICAgICAgICAgIGFQb3NpdGlvbjogcGMuU0VNQU5USUNfUE9TSVRJT04sXHJcbiAgICAgICAgICAgIGFVdjA6IHBjLlNFTUFOVElDX1RFWENPT1JEMFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXRNYXRlcmlhbHMoKSB7XHJcblxyXG4gICAgICAgIC8vIEVuZ2luZSB2MSBub3Qgc3VwcG9ydCBTaGFkZXJNYXRlcmlhbFxyXG4gICAgICAgIC8vIHVzZSBvbGQgbWV0aG9kc1xyXG4gICAgICAgIGlmICghcGMuU2hhZGVyTWF0ZXJpYWwpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbCA9IG5ldyBwYy5NYXRlcmlhbCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwgPSBuZXcgcGMuTWF0ZXJpYWwoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8qIEB0cy1pZ25vcmUgKi9cclxuICAgICAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsLnNoYWRlciA9IHRoaXMuX3BhaW50ZXJTaGFkZXI7XHJcbiAgICAgICAgICAgIC8qIEB0cy1pZ25vcmUgKi9cclxuICAgICAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLnNoYWRlciA9IHRoaXMuX3BhaW50ZXJJbnZlcnRTaGFkZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwubmFtZSA9ICdCcnVzaFBhaW50ZXJNYXRlcmlhbCc7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsLmJsZW5kVHlwZSA9IHBjLkJMRU5EX0FERElUSVZFO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbC51cGRhdGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLm5hbWUgPSAnQnJ1c2hQYWludGVySW52ZXJ0TWF0ZXJpYWwnO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC5ibGVuZFR5cGUgPSBwYy5CTEVORF9TVUJUUkFDVElWRTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0TWF0ZXJpYWwudXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlUnVudGltZVNldHRpbmdzKGR0OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbE9wYWNpdHkgPSB0aGlzLl9icnVzaFNldHRpbmdzLm9wYWNpdHk7XHJcbiAgICAgICAgY29uc3Qgb3BhY2l0eSA9IG9yaWdpbmFsT3BhY2l0eTtcclxuICAgICAgICB0aGlzLl9wYWludGVyTWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1QnJ1c2hPcGFjaXR5Jywgb3BhY2l0eSk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLnNldFBhcmFtZXRlcigndUJydXNoT3BhY2l0eScsIG9wYWNpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZVBvc2l0aW9uQW5kU2NhbGUoeDogbnVtYmVyLCB5OiBudW1iZXIsIHNjYWxlV2lkdGg6IG51bWJlciwgc2NhbGVIZWlnaHQ6IG51bWJlcikge1xyXG5cclxuICAgICAgICBjb25zdCBmYXIgICAgPSB0aGlzLmNhbWVyYUZhciAqIDI7XHJcbiAgICAgICAgY29uc3QgcmF0aW9uID0gdGhpcy5iYWNrZ3JvdW5kLndpZHRoIC8gdGhpcy5iYWNrZ3JvdW5kLmhlaWdodDtcclxuXHJcbiAgICAgICAgeCA9IHggKiBmYXIgKiByYXRpb24gLSB0aGlzLmNhbWVyYUZhciAqIHJhdGlvbjtcclxuICAgICAgICB5ID0geSAqIGZhciAtIHRoaXMuY2FtZXJhRmFyO1xyXG5cclxuICAgICAgICBzY2FsZVdpZHRoICA9IHNjYWxlV2lkdGggICogdGhpcy5iYWNrZ3JvdW5kLndpZHRoICAvIGZhciAvIDIuNTtcclxuICAgICAgICBzY2FsZUhlaWdodCA9IHNjYWxlSGVpZ2h0ICogdGhpcy5iYWNrZ3JvdW5kLmhlaWdodCAvIGZhciAvIDIuNTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0U2NhbGUoc2NhbGVXaWR0aCwgc2NhbGVIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuX3NldFBvc2l0aW9uKHgsIHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydFBhaW50KGR0OiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCBzY2FsZVdpZHRoOiBudW1iZXIsIHNjYWxlSGVpZ2h0OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlUnVudGltZVNldHRpbmdzKGR0KTtcclxuICAgICAgICB0aGlzLl91cGRhdGVQb3NpdGlvbkFuZFNjYWxlKHgsIHksIHNjYWxlV2lkdGgsIHNjYWxlSGVpZ2h0KTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGFpbnRpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRFbnRpdHkuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckVudGl0eS5lbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9wYWludGVyQ2FtZXJhRW50aXR5LmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdG9wUGFpbnQoKSB7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5LmVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wYWludGVyRW50aXR5LmVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wYWludGVyQ2FtZXJhRW50aXR5LmVuYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zZXRTY2FsZSh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJFbnRpdHkuc2V0TG9jYWxTY2FsZSh4LCAxLCB5KTtcclxuICAgICAgICB0aGlzLl9wYWludGVySW52ZXJ0RW50aXR5LnNldExvY2FsU2NhbGUoeCwgMSwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc2V0UG9zaXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9wYWludGVyRW50aXR5LnNldExvY2FsUG9zaXRpb24oeCwgeSwgMCk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydEVudGl0eS5zZXRMb2NhbFBvc2l0aW9uKHgsIHksIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVTZXR0aW5ncyhicnVzaFNldHRpbmdzOiBJQnJ1c2hTZXR0aW5ncywgYWN0aXZlTGF5ZXI6IG51bWJlcikge1xyXG5cclxuICAgICAgICB0aGlzLl9wYWludGVyTWFzay5maWxsKDApO1xyXG5cclxuICAgICAgICBpZiAoYWN0aXZlTGF5ZXIgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhaW50ZXJNYXNrW2FjdGl2ZUxheWVyIC0gMV0gPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYnJ1c2hUZXh0dXJlID0gYnJ1c2hTZXR0aW5ncy50ZXh0dXJlc1ticnVzaFNldHRpbmdzLmFjdGl2ZV0ucmVzb3VyY2UgYXMgcGN4LlRleHR1cmU7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJNYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VCcnVzaE1hc2snLCB0aGlzLl9wYWludGVyTWFzayk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlck1hdGVyaWFsLnNldFBhcmFtZXRlcigndUhlaWdodE1hcCcsIGJydXNoVGV4dHVyZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhaW50ZXJJbnZlcnRNYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VCcnVzaE1hc2snLCB0aGlzLl9wYWludGVyTWFzayk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRlckludmVydE1hdGVyaWFsLnNldFBhcmFtZXRlcigndUhlaWdodE1hcCcsIGJydXNoVGV4dHVyZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2JydXNoU2V0dGluZ3MgPSBicnVzaFNldHRpbmdzO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgbWFwRW51bSB9IGZyb20gXCIuLi9FeHRyYXMvRW51bUNvbnZlcnRlci5tanNcIlxyXG5cclxuZXhwb3J0IGNvbnN0IGZpZWxkU2l6ZUVudW1EZWZhdWx0ID0gNTEzO1xyXG5leHBvcnQgY29uc3QgZmllbGRTaXplRW51bSA9IG1hcEVudW0oe1xyXG4gICAgJzEyOCc6ICAgMTI5LFxyXG4gICAgJzI1Nic6ICAgMjU3LFxyXG4gICAgJzUxMic6ICAgNTEzLFxyXG4gICAgJzEwMjQnOiAgMTAyNSxcclxuICAgICcyMDQ4JzogIDIwNDksXHJcbiAgICAnNDA5Nic6ICA0MDk3LFxyXG4gICAgJzgxOTInOiAgODE5MyxcclxuICAgICcxNjM4NCc6IDE2Mzg1LFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBmaWVsZFBhdGNoU2l6ZUVudW1EZWZhdWx0ID0gMzM7XHJcbmV4cG9ydCBjb25zdCBmaWVsZFBhdGNoU2l6ZUVudW0gPSBtYXBFbnVtKHtcclxuICAgICcxNic6ICAgIDE3LFxyXG4gICAgJzMyJzogICAgMzMsXHJcbiAgICAnNjQnOiAgICA2NSxcclxuICAgICcxMjgnOiAgIDEyOSxcclxuICAgICcyNTYnOiAgIDI1NyxcclxuICAgICc1MTInOiAgIDUxMyxcclxuICAgICcxMDI0JzogIDEwMjUsXHJcbiAgICAnMjA0OCc6ICAyMDQ5LFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBmaWVsZEhlaWdodFZhbHVlVHlwZURlZmF1bHQgPSAnMzJmJztcclxuZXhwb3J0IGNvbnN0IGZpZWxkSGVpZ2h0VmFsdWVUeXBlRW51bSA9IG1hcEVudW0oe1xyXG4gICAgJzMyRic6ICczMmYnLFxyXG4gICAgJzE2VSc6ICcxNnUnLFxyXG4gICAgJzhVJzogJzh1J1xyXG59KTsiLCJpbXBvcnQgdHlwZSB7IGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoSW5zdGFuY2luZyBhcyBJUGF0Y2hlc0luc3RhbmNpbmdOYXRpdmUgfSBmcm9tIFwiLi4vQ29yZS9JUGF0Y2hJbnN0YW5jaW5nLm1qc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUJ1ZmZlcih2ZXJ0ZXhCdWZmZXI6IHBjeC5WZXJ0ZXhCdWZmZXIgfCBudWxsLCBkYXRhOiBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXksIGxlbmd0aDogaW50KSB7XHJcblxyXG4gICAgaWYgKHZlcnRleEJ1ZmZlcikge1xyXG5cclxuICAgICAgICBjb25zdCBkZXZpY2UgPSB2ZXJ0ZXhCdWZmZXIuZGV2aWNlO1xyXG5cclxuICAgICAgICBpZiAoZGV2aWNlLmlzV2ViR0wyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdsID0gKGRldmljZSBhcyBwY3guV2ViZ2xHcmFwaGljc0RldmljZSkuZ2w7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhCdWZmZXIuaW1wbC5idWZmZXJJZCk7XHJcbiAgICAgICAgICAgIGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCBkYXRhLCAwLCBsZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkZXZpY2UuaXNXZWJHUFUpIHtcclxuICAgICAgICAgICAgY29uc3Qgd2dwdSAgID0gKGRldmljZSBhcyBhbnkpLndncHUgYXMgR1BVRGV2aWNlO1xyXG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSB2ZXJ0ZXhCdWZmZXIuaW1wbC5idWZmZXIgYXMgR1BVQnVmZmVyO1xyXG4gICAgICAgICAgICB3Z3B1LnF1ZXVlLndyaXRlQnVmZmVyKGJ1ZmZlciwgMCwgZGF0YSwgMCwgbGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Vuc3VwcG9ydGVkIGRldmljZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGF0Y2hJbnN0YW5jaW5nPFREYXRhIGV4dGVuZHMgVWludDE2QXJyYXkgfCBVaW50OEFycmF5PiBleHRlbmRzIElQYXRjaGVzSW5zdGFuY2luZ05hdGl2ZTxwY3guTWVzaEluc3RhbmNlLCBURGF0YT4ge1xyXG5cclxuICAgIHJlYWRvbmx5IGJ1ZmZlclR5cGU6IFVpbnQxNkFycmF5Q29uc3RydWN0b3IgfCBVaW50OEFycmF5Q29uc3RydWN0b3I7XHJcbiAgICByZWFkb25seSBpdGVtQnVmZmVyU2l6ZTogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbWVzaEluc3RhbmNlQ291bnQ6IG51bWJlcjtcclxuICAgIFxyXG4gICAgYXBwZW5kTWVzaEluc3RhbmNlcyhhcnI6IHBjeC5NZXNoSW5zdGFuY2VbXSwgb2Zmc2V0PzogbnVtYmVyKTogbnVtYmVyO1xyXG5cclxuICAgIGJlZ2luKGNhc3RTaGFkb3c/OiBib29sZWFuKTogdm9pZDtcclxuXHJcbiAgICBlbmQoKTogdm9pZDtcclxufSIsImltcG9ydCB0eXBlIHsgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IFBhdGNoQ29tYmluZUluc3RhbmNpbmdOYXRpdmUsIHsgY29tYmluZUdyb3VwTGVuLCBjb21JbnN0RGF0YVNpemUsIFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZSB9IGZyb20gXCIuLi9Db3JlL1BhdGNoQ29tYmluZUluc3RhbmNpbmcubWpzXCI7XHJcbmltcG9ydCB7IHR5cGUgSVBhdGNoSW5zdGFuY2luZywgdXBkYXRlQnVmZmVyIH0gZnJvbSBcIi4vSVBhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhdGNoQ29tYmluZUluc3RhbmNpbmcgZXh0ZW5kcyBQYXRjaENvbWJpbmVJbnN0YW5jaW5nTmF0aXZlPHBjeC5NZXNoSW5zdGFuY2U+IGltcGxlbWVudHMgSVBhdGNoSW5zdGFuY2luZzxUQ29tSW5zdENvb3Jkc09mZnNldEFyclR5cGU+IHtcclxuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgYnVmZmVyVHlwZSA9IFRDb21JbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZTtcclxuICAgIHB1YmxpYyByZWFkb25seSBpdGVtQnVmZmVyU2l6ZSA9IDQ7XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXQgbWVzaEluc3RhbmNlQ291bnQoKSB7IHJldHVybiB0aGlzLmRhdGEubGVuZ3RoICogY29tYmluZUdyb3VwTGVuOyB9XHJcblxyXG4gICAgcHVibGljIGFwcGVuZE1lc2hJbnN0YW5jZXMoYXJyOiBwY3guTWVzaEluc3RhbmNlW10sIG9mZnNldDogaW50ID0gMCkge1xyXG5cclxuICAgICAgICBsZXQgbWVzaEluZGV4ID0gMDtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21iaW5lR3JvdXBMZW47IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5kYXRhW2NdLmdyb3Vwc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2h1bmsub2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyW21lc2hJbmRleCsrICsgb2Zmc2V0XSA9IGNodW5rLm9iamVjdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1lc2hJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmVnaW4oY2FzdFNoYWRvdzogYm9vbGVhbiA9IGZhbHNlKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbWJpbmVHcm91cExlbjsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRhdGFbY10uZ3JvdXBzW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmtPYmplY3QgPSBjaHVuay5vYmplY3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgY2h1bmsuY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgY2h1bmsuaGFzQ2hhbmdlcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaHVua09iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC5jYXN0U2hhZG93ID0gY2FzdFNoYWRvdztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW5kKCkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21iaW5lR3JvdXBMZW47IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5kYXRhW2NdLmdyb3Vwc1tpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rT2JqZWN0ID0gY2h1bmsub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoY2h1bmtPYmplY3QgJiYgY2h1bmsuY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QuaW5zdGFuY2luZ0NvdW50ID0gY2h1bmsuY291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay5oYXNDaGFuZ2VzICYmIGNodW5rT2JqZWN0Lmluc3RhbmNpbmdEYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NodW5rT2JqZWN0Lmluc3RhbmNpbmdEYXRhLnZlcnRleEJ1ZmZlcj8udW5sb2NrKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBjaHVuay5jb3VudCAqIGNvbUluc3REYXRhU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVydGV4QnVmZmVyID0gY2h1bmtPYmplY3QuaW5zdGFuY2luZ0RhdGEudmVydGV4QnVmZmVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQnVmZmVyKHZlcnRleEJ1ZmZlciwgY2h1bmsuZGF0YSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgeyBCT1RUT00sIExFRlQsIFJJR0hULCBUT1AgfSBmcm9tIFwiLi4vQ29yZS9Mb2RJbmZvLm1qc1wiO1xyXG5pbXBvcnQgeyBpbnN0RGF0YVNpemUsIFBhdGNoSW5zdGFuY2luZyBhcyBQYXRjaEluc3RhbmNpbmdOYXRpdmUsIFRJbnN0Q29vcmRzT2Zmc2V0QXJyVHlwZSB9IGZyb20gXCIuLi9Db3JlL1BhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IHsgSVBhdGNoSW5zdGFuY2luZywgdXBkYXRlQnVmZmVyIH0gZnJvbSBcIi4vSVBhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhdGNoSW5zdGFuY2luZyBleHRlbmRzIFBhdGNoSW5zdGFuY2luZ05hdGl2ZTxwY3guTWVzaEluc3RhbmNlPiBpbXBsZW1lbnRzIElQYXRjaEluc3RhbmNpbmc8VEluc3RDb29yZHNPZmZzZXRBcnJUeXBlPiB7XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IGJ1ZmZlclR5cGUgPSBUSW5zdENvb3Jkc09mZnNldEFyclR5cGU7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgaXRlbUJ1ZmZlclNpemUgPSAyO1xyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0IG1lc2hJbnN0YW5jZUNvdW50KCkgeyByZXR1cm4gdGhpcy5kYXRhLmxlbmd0aCAqIExFRlQgKiBSSUdIVCAqIFRPUCAqIEJPVFRPTTsgfVxyXG5cclxuICAgIHB1YmxpYyBhcHBlbmRNZXNoSW5zdGFuY2VzKGFycjogcGN4Lk1lc2hJbnN0YW5jZVtdLCBvZmZzZXQ6IGludCA9IDApIHtcclxuXHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5kYXRhLmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IFJJR0hUOyByKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IFRPUDsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgQk9UVE9NOyBiKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMuZGF0YVtjXVtsXVtyXVt0XVtiXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsub2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW2krKyArIG9mZnNldF0gPSBjaHVuay5vYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiZWdpbihjYXN0U2hhZG93OiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZGF0YS5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8IExFRlQ7IGwrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IEJPVFRPTTsgYisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRhdGFbY11bbF1bcl1bdF1bYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua09iamVjdCA9IGNodW5rLm9iamVjdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5oYXNDaGFuZ2VzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtPYmplY3QudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rT2JqZWN0LmNhc3RTaGFkb3cgPSBjYXN0U2hhZG93O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbmQoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmRhdGEubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPCBMRUZUOyBsKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgUklHSFQ7IHIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgVE9QOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5kYXRhW2NdW2xdW3JdW3RdW2JdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmtPYmplY3QgPSBjaHVuay5vYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVua09iamVjdCAmJiBjaHVuay5jb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua09iamVjdC5pbnN0YW5jaW5nQ291bnQgPSBjaHVuay5jb3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rLmhhc0NoYW5nZXMgJiYgY2h1bmtPYmplY3QuaW5zdGFuY2luZ0RhdGEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHBlcmZvcm1hbmNlIGltcHJvdmVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2h1bmtPYmplY3QuaW5zdGFuY2luZ0RhdGEudmVydGV4QnVmZmVyPy51bmxvY2soKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IGNodW5rLmNvdW50ICogaW5zdERhdGFTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZXJ0ZXhCdWZmZXIgPSBjaHVua09iamVjdC5pbnN0YW5jaW5nRGF0YS52ZXJ0ZXhCdWZmZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVCdWZmZXIodmVydGV4QnVmZmVyLCBjaHVuay5kYXRhLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IGNvb3Jkc1ZlcnRleFNpemUsIHR5cGUgSVJlYWRvbmx5Q29vcmRzQnVmZmVyIH0gZnJvbSBcIi4uL0NvcmUvQ29vcmRzQnVmZmVyLm1qc1wiO1xyXG5pbXBvcnQgR1BVSGVpZ2h0TWFwQnVmZmVyIGZyb20gXCIuL0dQVUhlaWdodE1hcEJ1ZmZlci5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUGF0Y2hJbnN0YW5jaW5nIH0gZnJvbSBcIi4vSVBhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdQVUJ1ZmZlcnNNYW5hZ2VyIHtcclxuXHJcbiAgICBwcml2YXRlIF9oZWlnaHRNYXA6IEdQVUhlaWdodE1hcEJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX3NoYXJlZEluZGV4QnVmZmVyOiBwY3guSW5kZXhCdWZmZXI7XHJcbiAgICBwcml2YXRlIF9zaGFyZWRWZXJ0ZXhCdWZmZXI6IHBjeC5WZXJ0ZXhCdWZmZXI7XHJcblxyXG4gICAgcHVibGljIGdldCBoZWlnaHRNYXAoKSB7IHJldHVybiB0aGlzLl9oZWlnaHRNYXA7IH1cclxuICAgIHB1YmxpYyBnZXQgc2hhcmVkSW5kZXhCdWZmZXIoKSB7IHJldHVybiB0aGlzLl9zaGFyZWRJbmRleEJ1ZmZlcjsgfVxyXG4gICAgcHVibGljIGdldCBzaGFyZWRWZXJ0ZXhCdWZmZXIoKSB7IHJldHVybiB0aGlzLl9zaGFyZWRWZXJ0ZXhCdWZmZXI7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoaGVpZ2h0TWFwOiBHUFVIZWlnaHRNYXBCdWZmZXIpIHtcclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXAgPSBoZWlnaHRNYXA7XHJcbiAgICAgICAgdGhpcy51cGRhdGVJbmRleEJ1ZmZlcigpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVmVydGV4QnVmZmVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9zaGFyZWRWZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9idWlsZFZlcnRleEZvcm1hdChncmFwaGljc0RldmljZTogcGN4LkdyYXBoaWNzRGV2aWNlLCB2ZXJ0ZXhCdWZmZXI6IElSZWFkb25seUNvb3Jkc0J1ZmZlcikge1xyXG5cclxuICAgICAgICBjb25zdCBjb29yZHNGb3JtYXQgPSAodmVydGV4QnVmZmVyLnBhdGNoVmVydGV4QnVmZmVyVHlwZWQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSA/IHBjLlRZUEVfVUlOVDggOiBwYy5UWVBFX1VJTlQxNjtcclxuICAgICAgICBjb25zdCB2ZXJ0ZXhEZXNjID0gW3tcclxuICAgICAgICAgICAgc2VtYW50aWM6IHBjLlNFTUFOVElDX1BPU0lUSU9OLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBjb29yZHNWZXJ0ZXhTaXplLFxyXG4gICAgICAgICAgICB0eXBlOiBjb29yZHNGb3JtYXQsXHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGFzSW50OiB0cnVlXHJcbiAgICAgICAgfV07XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgcGMuVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlLCB2ZXJ0ZXhEZXNjLCB2ZXJ0ZXhCdWZmZXIucGF0Y2hWZXJ0ZXhCdWZmZXJMZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVJbmRleEJ1ZmZlcigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgZ3JhcGhpY3NEZXZpY2UgPSB0aGlzLl9oZWlnaHRNYXAuYXBwLmdyYXBoaWNzRGV2aWNlO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoSW5kaWNlcyA9IHRoaXMuX2hlaWdodE1hcC5maWVsZC5wYXRjaEluZGljZXM7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoYXJlZEluZGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXIgPSBuZXcgcGMuSW5kZXhCdWZmZXIoXHJcbiAgICAgICAgICAgIGdyYXBoaWNzRGV2aWNlLFxyXG4gICAgICAgICAgICBwYy5JTkRFWEZPUk1BVF9VSU5UMzIsXHJcbiAgICAgICAgICAgIHBhdGNoSW5kaWNlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHBjLkJVRkZFUl9TVEFUSUMsXHJcbiAgICAgICAgICAgIHBhdGNoSW5kaWNlcyxcclxuICAgICAgICAgICAgeyBzdG9yYWdlOiBmYWxzZSB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlVmVydGV4QnVmZmVyKCkge1xyXG5cclxuICAgICAgICBjb25zdCBncmFwaGljc0RldmljZSA9IHRoaXMuX2hlaWdodE1hcC5hcHAuZ3JhcGhpY3NEZXZpY2U7XHJcbiAgICAgICAgY29uc3QgY29vcmRCdWZmZXIgPSB0aGlzLl9oZWlnaHRNYXAuZmllbGQucGF0Y2hWZXJ0aWNlcztcclxuICAgICAgICBjb25zdCBidWZmZXJEYXRhID0gY29vcmRCdWZmZXIucGF0Y2hWZXJ0ZXhCdWZmZXJEYXRhO1xyXG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMuX2J1aWxkVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlLCBjb29yZEJ1ZmZlcik7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlciA9IG5ldyBwYy5WZXJ0ZXhCdWZmZXIoZ3JhcGhpY3NEZXZpY2UsIGZvcm1hdCwgZm9ybWF0LnZlcnRleENvdW50LCB7XHJcbiAgICAgICAgICAgIHVzYWdlOiBwYy5CVUZGRVJfU1RBVElDLFxyXG4gICAgICAgICAgICBzdG9yYWdlOiBmYWxzZSxcclxuICAgICAgICAgICAgZGF0YTogYnVmZmVyRGF0YSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2J1aWxkSW5zdGFuY2luZ1ZlcnRleEZvcm1hdChpbnN0YW5jZXI6IElQYXRjaEluc3RhbmNpbmc8YW55Pikge1xyXG5cclxuICAgICAgICBjb25zdCBncmFwaGljc0RldmljZSA9IHRoaXMuX2hlaWdodE1hcC5hcHAuZ3JhcGhpY3NEZXZpY2U7XHJcbiAgICAgICAgY29uc3QgdHlwZSA9IGluc3RhbmNlci5idWZmZXJUeXBlID09PSBVaW50MTZBcnJheSA/IHBjLlRZUEVfVUlOVDE2IDpcclxuICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VyLmJ1ZmZlclR5cGUgPT09IFVpbnQ4QXJyYXkgPyAgcGMuVFlQRV9VSU5UOCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLlRZUEVfRkxPQVQzMjtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBwYy5WZXJ0ZXhGb3JtYXQoZ3JhcGhpY3NEZXZpY2UsIFt7XHJcbiAgICAgICAgICAgIHNlbWFudGljOiBwYy5TRU1BTlRJQ19BVFRSMTAsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IGluc3RhbmNlci5pdGVtQnVmZmVyU2l6ZSxcclxuICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcclxuICAgICAgICAgICAgYXNJbnQ6IHRydWVcclxuICAgICAgICB9XSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJ1aWxkSW5zdGFuY2luZ1ZlcnRleEJ1ZmZlcihpbnN0YW5jZXI6IElQYXRjaEluc3RhbmNpbmc8YW55PiwgZGF0YTogVWludDE2QXJyYXkgfCBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgY29uc3QgdmVydGV4Rm9ybWF0ID0gdGhpcy5fYnVpbGRJbnN0YW5jaW5nVmVydGV4Rm9ybWF0KGluc3RhbmNlcik7XHJcbiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgID0gZGF0YS5sZW5ndGggLyBpbnN0YW5jZXIuaXRlbUJ1ZmZlclNpemU7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBwYy5WZXJ0ZXhCdWZmZXIodmVydGV4Rm9ybWF0LmRldmljZSwgdmVydGV4Rm9ybWF0LCBudW1WZXJ0aWNlcywge1xyXG4gICAgICAgICAgICB1c2FnZTogcGMuQlVGRkVSX0dQVURZTkFNSUMsXHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgIHN0b3JhZ2U6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBJUGF0Y2hMb2RCYXNlIH0gZnJvbSBcIi4uL0NvcmUvSVBhdGNoTG9kLm1qc1wiO1xyXG5pbXBvcnQgeyBCT1RUT00sIExFRlQsIFJJR0hULCBUT1AsIHR5cGUgSVJlYWRvbmx5TG9kSW5mbyB9IGZyb20gXCIuLi9Db3JlL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCBHUFVCdWZmZXJzTWFuYWdlciBmcm9tIFwiLi9HUFVCdWZmZXJzTWFuYWdlci5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUludGVybmFsV2lyZWZyYW1lRGF0YSB7XHJcbiAgICBidWZmZXI6IHBjeC5JbmRleEJ1ZmZlciB8IG51bGw7XHJcbiAgICBwcmltaXRpdmU6IHtcclxuICAgICAgICB0eXBlOiBudW1iZXIsXHJcbiAgICAgICAgYmFzZTogbnVtYmVyLFxyXG4gICAgICAgIGJhc2VWZXJ0ZXg6IG51bWJlcixcclxuICAgICAgICBjb3VudDogbnVtYmVyLFxyXG4gICAgICAgIGluZGV4ZWQ6IHRydWVcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJV2lyZWZyYW1lRGF0YSBleHRlbmRzIElJbnRlcm5hbFdpcmVmcmFtZURhdGEge1xyXG4gICAgYnVmZmVyOiBwY3guSW5kZXhCdWZmZXI7XHJcbn1cclxuXHJcbmNvbnN0IG9mZnNldHMgPSBbWzAsIDFdLCBbMSwgMl0sIFsyLCAwXV07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHUFVXaXJlZnJhbWVCdWZmZXJNYW5hZ2VyIHtcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfYnlmZmVyc01hbmFnZXI6IEdQVUJ1ZmZlcnNNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBfbG9kSW5mbzogSVJlYWRvbmx5TG9kSW5mb1tdO1xyXG4gICAgcHJpdmF0ZSBfZGF0YTogSUludGVybmFsV2lyZWZyYW1lRGF0YVtdW11bXVtdW107XHJcblxyXG4gICAgcHVibGljIGdldCBsb2RJbmZvKCkgeyByZXR1cm4gdGhpcy5fbG9kSW5mbzsgfVxyXG4gICAgcHVibGljIGdldCBidWZmZXJzTWFuYWdlcigpIHsgcmV0dXJuIHRoaXMuX2J5ZmZlcnNNYW5hZ2VyOyB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGJ5ZmZlcnNNYW5hZ2VyOiBHUFVCdWZmZXJzTWFuYWdlciwgbG9kSW5mbzogSVJlYWRvbmx5TG9kSW5mb1tdKSB7XHJcbiAgICAgICAgdGhpcy5fYnlmZmVyc01hbmFnZXIgPSBieWZmZXJzTWFuYWdlcjtcclxuICAgICAgICB0aGlzLl9sb2RJbmZvID0gbG9kSW5mbztcclxuICAgICAgICB0aGlzLl9pbml0RGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXREYXRhKCkge1xyXG5cclxuICAgICAgICB0aGlzLl9kYXRhID0gbmV3IEFycmF5KHRoaXMuX2xvZEluZm8ubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbG9kQ29yZSA9IDA7IGxvZENvcmUgPCB0aGlzLl9kYXRhLmxlbmd0aDsgbG9kQ29yZSsrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhcnIgPSBuZXcgQXJyYXk8SUludGVybmFsV2lyZWZyYW1lRGF0YVtdW11bXT4oTEVGVCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsIDwgTEVGVDsgbCsrKSAgIHsgYXJyW2xdID0gbmV3IEFycmF5KFJJR0hUKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBSSUdIVDsgcisrKSAgeyBhcnJbbF1bcl0gPSBuZXcgQXJyYXkoVE9QKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBUT1A7IHQrKykgICAgeyBhcnJbbF1bcl1bdF0gPSBuZXcgQXJyYXkoQk9UVE9NKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBCT1RUT007IGIrKykge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhcnJbbF1bcl1bdF1bYl0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYy5QUklNSVRJVkVfTElORVMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VWZXJ0ZXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfX19fVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fZGF0YVtsb2RDb3JlXSA9IGFycjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfcmVjcmVhdGVXaXJlZnJhbWVEYXRhKGxvZDogSVBhdGNoTG9kQmFzZSkge1xyXG5cclxuICAgICAgICBjb25zdCBsb2RJbmZvID0gdGhpcy5fbG9kSW5mb1tsb2QuY29yZV0uaW5mb1tsb2QubGVmdF1bbG9kLnJpZ2h0XVtsb2QudG9wXVtsb2QuYm90dG9tXTtcclxuICAgICAgICBjb25zdCBidWZmZXJTY29wZSA9IHRoaXMuX2RhdGFbbG9kLmNvcmVdW2xvZC5sZWZ0XVtsb2QucmlnaHRdW2xvZC50b3BdW2xvZC5ib3R0b21dO1xyXG5cclxuICAgICAgICBidWZmZXJTY29wZS5idWZmZXI/LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXhCdWZmZXIgPSB0aGlzLl9ieWZmZXJzTWFuYWdlci5zaGFyZWRJbmRleEJ1ZmZlcjtcclxuICAgICAgICBjb25zdCBudW1WZXJ0aWNlcyA9IHRoaXMuX2J5ZmZlcnNNYW5hZ2VyLnNoYXJlZFZlcnRleEJ1ZmZlci5udW1WZXJ0aWNlcztcclxuXHJcbiAgICAgICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQoKTtcclxuICAgICAgICBjb25zdCBiYXNlID0gbG9kSW5mby5zdGFydDtcclxuICAgICAgICBjb25zdCBjb3VudCA9IGxvZEluZm8uY291bnQ7XHJcbiAgICAgICAgY29uc3Qgc3JjSW5kaWNlcyA9IG5ldyBVaW50MzJBcnJheShpbmRleEJ1ZmZlci5zdG9yYWdlKTtcclxuICAgICAgICBjb25zdCB0bXBJbmRpY2VzID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGogPSBiYXNlOyBqIDwgYmFzZSArIGNvdW50OyBqICs9IDMpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCAzOyBrKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGkxID0gc3JjSW5kaWNlc1tqICsgb2Zmc2V0c1trXVswXV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpMiA9IHNyY0luZGljZXNbaiArIG9mZnNldHNba11bMV1dO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IChpMSA+IGkyKSA/ICgoaTIgKiBudW1WZXJ0aWNlcykgKyBpMSkgOiAoKGkxICogbnVtVmVydGljZXMpICsgaTIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWVuLmhhcyhoYXNoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlZW4uYWRkKGhhc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcEluZGljZXMucHVzaChpMSwgaTIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkc3RJbmRpY2VzID0gbmV3IFVpbnQzMkFycmF5KHRtcEluZGljZXMpO1xyXG5cclxuICAgICAgICBidWZmZXJTY29wZS5wcmltaXRpdmUuY291bnQgPSBkc3RJbmRpY2VzLmxlbmd0aDtcclxuICAgICAgICBidWZmZXJTY29wZS5idWZmZXIgPSBuZXcgcGMuSW5kZXhCdWZmZXIoXHJcbiAgICAgICAgICAgIGluZGV4QnVmZmVyLmRldmljZSxcclxuICAgICAgICAgICAgcGMuSU5ERVhGT1JNQVRfVUlOVDMyLFxyXG4gICAgICAgICAgICBkc3RJbmRpY2VzLmxlbmd0aCxcclxuICAgICAgICAgICAgcGMuQlVGRkVSX1NUQVRJQyxcclxuICAgICAgICAgICAgZHN0SW5kaWNlcy5idWZmZXIsXHJcbiAgICAgICAgICAgIHsgc3RvcmFnZTogZmFsc2UgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0T3JDcmVhdGVXaXJlZnJhbWVEYXRhKGxvZDogSVBhdGNoTG9kQmFzZSkge1xyXG5cclxuICAgICAgICBjb25zdCBidWZmZXJTY29wZSA9IHRoaXMuX2RhdGFbbG9kLmNvcmVdW2xvZC5sZWZ0XVtsb2QucmlnaHRdW2xvZC50b3BdW2xvZC5ib3R0b21dO1xyXG5cclxuICAgICAgICBpZiAoIWJ1ZmZlclNjb3BlLmJ1ZmZlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9yZWNyZWF0ZVdpcmVmcmFtZURhdGEobG9kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBidWZmZXJTY29wZSBhcyB1bmtub3duIGFzIElXaXJlZnJhbWVEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQobG9kOiBJUGF0Y2hMb2RCYXNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldE9yQ3JlYXRlV2lyZWZyYW1lRGF0YShsb2QpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmcmVlRGF0YShsb2Q6IElQYXRjaExvZEJhc2UpIHtcclxuICAgICAgICBjb25zdCBidWZmZXJTY29wZSA9IHRoaXMuX2RhdGFbbG9kLmNvcmVdW2xvZC5sZWZ0XVtsb2QucmlnaHRdW2xvZC50b3BdW2xvZC5ib3R0b21dO1xyXG4gICAgICAgIGJ1ZmZlclNjb3BlLmJ1ZmZlcj8uZGVzdHJveSgpO1xyXG4gICAgICAgIGJ1ZmZlclNjb3BlLmJ1ZmZlciA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZyZWUoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgY29yZSA9IDA7IGNvcmUgPCB0aGlzLl9kYXRhLmxlbmd0aDsgY29yZSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGxlZnQgPSAwOyBsZWZ0IDwgTEVGVDsgbGVmdCsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByaWdodCA9IDA7IHJpZ2h0IDwgUklHSFQ7IHJpZ2h0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0b3AgPSAwOyB0b3AgPCBUT1A7IHRvcCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGJvdHRvbSA9IDA7IGJvdHRvbSA8IEJPVFRPTTsgYm90dG9tKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZWVEYXRhKHsgY29yZSwgbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuZnJlZSgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBJUGF0Y2hMb2RCYXNlIH0gZnJvbSBcIi4uL0NvcmUvSVBhdGNoTG9kLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElTaW5nbGVMb2RJbmZvIH0gZnJvbSBcIi4uL0NvcmUvTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUGF0Y2hJbnN0YW5jaW5nIH0gZnJvbSBcIi4vSVBhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IHsgZ2V0RmllbGRTaGFkZXJDaHVua3MsIHBhdGNoQ29vcmRPZmZzZXRQYXJhbU5hbWUsIHBhdGNoSW5zdENvb3JkT2Zmc2V0QXR0ck5hbWUsIHBhdGNoTG9kQ29yZVBhcmFtTmFtZSwgaGVpZ2h0TWFwUGFyYW1OYW1lLCB2ZXJ0ZXhDb29yZEF0dHJOYW1lIH0gZnJvbSBcIi4vU2hhZGVyQ2h1bmtzLm1qc1wiO1xyXG5pbXBvcnQgUGF0Y2hDb21iaW5lSW5zdGFuY2luZyBmcm9tIFwiLi9QYXRjaENvbWJpbmVJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgUGF0Y2hJbnN0YW5jaW5nIGZyb20gXCIuL1BhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IEdQVVdpcmVmcmFtZUJ1ZmZlck1hbmFnZXIgZnJvbSBcIi4vR1BVV2lyZWZyYW1lQnVmZmVyc01hbmFnZXIubWpzXCI7XHJcbmltcG9ydCBHUFVCdWZmZXJzTWFuYWdlciBmcm9tIFwiLi9HUFVCdWZmZXJzTWFuYWdlci5tanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lc2hJbnN0YW5jZUZhY3Rvcnkge1xyXG5cclxuICAgIHByaXZhdGUgX2FhYmI6IHBjeC5Cb3VuZGluZ0JveDtcclxuICAgIHByaXZhdGUgX2J1ZmZlcnNNYW5hZ2VyOiBHUFVCdWZmZXJzTWFuYWdlcjtcclxuICAgIHByaXZhdGUgX3dpcmVmcmFtZUJ1ZmZlcnNNYW5hZ2VyOiBHUFVXaXJlZnJhbWVCdWZmZXJNYW5hZ2VyO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgYWFiYigpIHsgcmV0dXJuIHRoaXMuX2FhYmI7IH1cclxuICAgIHB1YmxpYyBnZXQgYnVmZmVyc01hbmFnZXIoKSB7IHJldHVybiB0aGlzLl9idWZmZXJzTWFuYWdlcjsgfVxyXG4gICAgcHVibGljIGdldCB3aXJlZnJhbWVCdWZmZXJzTWFuYWdlcigpIHsgcmV0dXJuIHRoaXMuX3dpcmVmcmFtZUJ1ZmZlcnNNYW5hZ2VyOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVmZmVyc01hbmFnZXI6IEdQVUJ1ZmZlcnNNYW5hZ2VyLCB3aXJlZnJhbWVCdWZmZXJzTWFuYWdlcjogR1BVV2lyZWZyYW1lQnVmZmVyTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuX2FhYmIgPSBuZXcgcGMuQm91bmRpbmdCb3goKTtcclxuICAgICAgICB0aGlzLl9idWZmZXJzTWFuYWdlciA9IGJ1ZmZlcnNNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuX3dpcmVmcmFtZUJ1ZmZlcnNNYW5hZ2VyID0gd2lyZWZyYW1lQnVmZmVyc01hbmFnZXI7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBYWJiKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZUFhYmIoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZmllbGQgICAgID0gdGhpcy5fYnVmZmVyc01hbmFnZXIuaGVpZ2h0TWFwLmZpZWxkO1xyXG4gICAgICAgIGNvbnN0IGhhbGZXaWR0aCA9IGZpZWxkLndpZHRoIC8gMjtcclxuICAgICAgICBjb25zdCBoYWxmRGVwdGggPSBmaWVsZC5kZXB0aCAvIDI7XHJcblxyXG4gICAgICAgIHRoaXMuX2FhYmIuc2V0TWluTWF4KFxyXG4gICAgICAgICAgICBuZXcgcGMuVmVjMygtaGFsZldpZHRoLCAwLCAgICAgICAgICAgICAgIC1oYWxmRGVwdGgpLFxyXG4gICAgICAgICAgICBuZXcgcGMuVmVjMygraGFsZldpZHRoLCBmaWVsZC5tYXhIZWlnaHQsICtoYWxmRGVwdGgpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlSW5zdGFuY2luZ01lc2goZW50aXR5OiBwY3guRW50aXR5LCBtYXRlcmlhbDogcGN4Lk1hdGVyaWFsLCBsb2RJbmZvOiBJUGF0Y2hMb2RCYXNlLCBwcmltaXRpdmVJbmZvOiBJU2luZ2xlTG9kSW5mbywgaW5zdGFuY2VyOiBJUGF0Y2hJbnN0YW5jaW5nPGFueT4sIGRhdGE6IFVpbnQxNkFycmF5IHwgVWludDhBcnJheSk6IHBjeC5NZXNoSW5zdGFuY2Uge1xyXG5cclxuICAgICAgICBjb25zdCBncmFwaGljc0RldmljZSA9IHRoaXMuX2J1ZmZlcnNNYW5hZ2VyLmhlaWdodE1hcC5hcHAuZ3JhcGhpY3NEZXZpY2U7XHJcbiAgICAgICAgY29uc3QgcGF0Y2hNZXNoID0gbmV3IHBjLk1lc2goZ3JhcGhpY3NEZXZpY2UpO1xyXG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IHBhdGNoTWVzaC5wcmltaXRpdmVbMF07XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2luZ0J1ZiA9IHRoaXMuX2J1ZmZlcnNNYW5hZ2VyLmJ1aWxkSW5zdGFuY2luZ1ZlcnRleEJ1ZmZlcihpbnN0YW5jZXIsIGRhdGEpO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2guYWFiYiA9IHRoaXMuYWFiYjtcclxuICAgICAgICBwYXRjaE1lc2guaW5kZXhCdWZmZXJbMF0gPSB0aGlzLl9idWZmZXJzTWFuYWdlci5zaGFyZWRJbmRleEJ1ZmZlcjtcclxuICAgICAgICBwYXRjaE1lc2gudmVydGV4QnVmZmVyICAgPSB0aGlzLl9idWZmZXJzTWFuYWdlci5zaGFyZWRWZXJ0ZXhCdWZmZXI7XHJcblxyXG4gICAgICAgIHByaW1pdGl2ZS50eXBlID0gcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICBwcmltaXRpdmUuYmFzZSA9IHByaW1pdGl2ZUluZm8uc3RhcnQ7XHJcbiAgICAgICAgcHJpbWl0aXZlLmNvdW50ID0gcHJpbWl0aXZlSW5mby5jb3VudDtcclxuICAgICAgICBwcmltaXRpdmUuaW5kZXhlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVzaEluc3RhbmNlID0gbmV3IHBjLk1lc2hJbnN0YW5jZShwYXRjaE1lc2gsIG1hdGVyaWFsLCBlbnRpdHkpO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5jdWxsID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnZpc2libGVUaGlzRnJhbWUgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRQYXJhbWV0ZXIocGF0Y2hMb2RDb3JlUGFyYW1OYW1lLCBsb2RJbmZvLmNvcmUsIDB4ZmZmZmZmZmYpO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnNldEluc3RhbmNpbmcoaW5zdGFuY2luZ0J1ZiwgZmFsc2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gcGF0Y2hNZXNoSW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZVBhdGNoTWVzaChwYXRjaEluZGV4OiBudW1iZXIsIGVudGl0eTogcGN4LkVudGl0eSwgbWF0ZXJpYWw6IHBjeC5NYXRlcmlhbCk6IHBjeC5NZXNoSW5zdGFuY2Uge1xyXG5cclxuICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMuX2J1ZmZlcnNNYW5hZ2VyLmhlaWdodE1hcC5maWVsZDtcclxuICAgICAgICBjb25zdCBncmFwaGljc0RldmljZSA9IHRoaXMuX2J1ZmZlcnNNYW5hZ2VyLmhlaWdodE1hcC5hcHAuZ3JhcGhpY3NEZXZpY2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVzaCA9IG5ldyBwYy5NZXNoKGdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBwYXRjaE1lc2gucHJpbWl0aXZlWzBdO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2guYWFiYiA9IHRoaXMuYWFiYjtcclxuICAgICAgICBwYXRjaE1lc2guaW5kZXhCdWZmZXJbMF0gPSB0aGlzLl9idWZmZXJzTWFuYWdlci5zaGFyZWRJbmRleEJ1ZmZlcjtcclxuICAgICAgICBwYXRjaE1lc2gudmVydGV4QnVmZmVyICAgPSB0aGlzLl9idWZmZXJzTWFuYWdlci5zaGFyZWRWZXJ0ZXhCdWZmZXI7XHJcblxyXG4gICAgICAgIHByaW1pdGl2ZS50eXBlID0gcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICBwcmltaXRpdmUuYmFzZSA9IDA7XHJcbiAgICAgICAgcHJpbWl0aXZlLmNvdW50ID0gMDtcclxuICAgICAgICBwcmltaXRpdmUuaW5kZXhlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVzaEluc3RhbmNlID0gbmV3IHBjLk1lc2hJbnN0YW5jZShwYXRjaE1lc2gsIG1hdGVyaWFsLCBlbnRpdHkpO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5jdWxsID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHBhdGNoTWVzaEluc3RhbmNlLnZpc2libGVUaGlzRnJhbWUgPSBmYWxzZTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgcGF0Y2hNZXNoSW5zdGFuY2UucmVjZWl2ZVNoYWRvdyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaFggPSBwYXRjaEluZGV4ICUgZmllbGQubnVtUGF0Y2hlc1g7XHJcbiAgICAgICAgY29uc3QgcGF0Y2haID0gcGF0Y2hJbmRleCAvIGZpZWxkLm51bVBhdGNoZXNYIHwgMDtcclxuXHJcbiAgICAgICAgY29uc3QgbWluWCA9IHBhdGNoWCAqIChmaWVsZC5wYXRjaFNpemUgLSAxKTtcclxuICAgICAgICBjb25zdCBtaW5aID0gcGF0Y2haICogKGZpZWxkLnBhdGNoU2l6ZSAtIDEpO1xyXG5cclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRQYXJhbWV0ZXIocGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSwgW21pblgsIG1pblpdLCAweGZmZmZmZmZmKTtcclxuICAgICAgICBwYXRjaE1lc2hJbnN0YW5jZS5zZXRJbnN0YW5jaW5nKG51bGwpO1xyXG5cclxuICAgICAgICByZXR1cm4gcGF0Y2hNZXNoSW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3lNZXNoKG1lc2hJbnN0YW5jZTogcGN4Lk1lc2hJbnN0YW5jZSkge1xyXG4gICAgXHJcbiAgICAgICAgLy8gZG9udCBkZXN0cm95IHNoYXJlZCBpbmRleCBhbmQgdmVydGV4IGJ1ZmZlcnMgYW5kIHdpcmVmcmFtZSBzaGFyZWQgaW5kZXggYnVmZmVyXHJcbiAgICAgICAgaWYgKG1lc2hJbnN0YW5jZS5tZXNoKSB7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tZXNoLmluZGV4QnVmZmVyID0gW251bGxdIGFzIHVua25vd24gYXMgcGN4LkluZGV4QnVmZmVyW107XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tZXNoLnZlcnRleEJ1ZmZlciA9IG51bGwgYXMgdW5rbm93biBhcyBwY3guVmVydGV4QnVmZmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWVzaEluc3RhbmNlLmRlc3Ryb3koKTtcclxuICAgICAgICBtZXNoSW5zdGFuY2UubWVzaD8uZGVzdHJveSgpO1xyXG5cclxuICAgICAgICBpZiAobWVzaEluc3RhbmNlLmluc3RhbmNpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UuaW5zdGFuY2luZ0RhdGEuZGVzdHJveT8uKCk7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5pbnN0YW5jaW5nRGF0YS52ZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJpbmREZXBlbmRlbmNpZXNUb01hdGVyaWFsKGluc3RhbmNpbmc6IElQYXRjaEluc3RhbmNpbmc8YW55PiB8IHVuZGVmaW5lZCwgbWF0ZXJpYWw6IHBjeC5TdGFuZGFyZE1hdGVyaWFsLCB1cGRhdGU6IGJvb2xlYW4gPSB0cnVlKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGhlaWdodE1hcEJ1ZmZlciA9IHRoaXMuX2J1ZmZlcnNNYW5hZ2VyLmhlaWdodE1hcDtcclxuICAgICAgICBjb25zdCBpbnN0YW5jaW5nVHlwZSA9ICBpbnN0YW5jaW5nIGluc3RhbmNlb2YgUGF0Y2hDb21iaW5lSW5zdGFuY2luZyA/ICdjb21iaW5lJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2luZyBpbnN0YW5jZW9mIFBhdGNoSW5zdGFuY2luZyA/ICdzaW1wbGUnIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZTtcclxuXHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHBhdGNoSW5zdENvb3JkT2Zmc2V0QXR0ck5hbWUsIHBjLlNFTUFOVElDX0FUVFIxMCk7XHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHZlcnRleENvb3JkQXR0ck5hbWUsIHBjLlNFTUFOVElDX1BPU0lUSU9OKTtcclxuICAgICAgICBtYXRlcmlhbC5zZXRQYXJhbWV0ZXIoaGVpZ2h0TWFwUGFyYW1OYW1lLCBoZWlnaHRNYXBCdWZmZXIudGV4dHVyZSk7XHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHBhdGNoTG9kQ29yZVBhcmFtTmFtZSwgMCk7XHJcblxyXG4gICAgICAgIGlmIChpbnN0YW5jaW5nVHlwZSkge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5kZWxldGVQYXJhbWV0ZXIocGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5zZXRQYXJhbWV0ZXIocGF0Y2hDb29yZE9mZnNldFBhcmFtTmFtZSwgWzAsIDBdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHBjVmVyc2lvbiA9IGB2JHtwYy52ZXJzaW9uWzBdfWAgYXMgdW5rbm93biBhcyBhbnk7XHJcbiAgICAgICAgY29uc3QgZmllbGQgPSBoZWlnaHRNYXBCdWZmZXIuZmllbGQ7XHJcbiAgICAgICAgY29uc3QgY2h1bmtzU3RvcmUgPSBnZXRGaWVsZFNoYWRlckNodW5rcyh7XHJcbiAgICAgICAgICAgIHdpZHRoOiBmaWVsZC53aWR0aCxcclxuICAgICAgICAgICAgZGVwdGg6IGZpZWxkLmRlcHRoLFxyXG4gICAgICAgICAgICBwYXRjaFNpemU6IGZpZWxkLnBhdGNoU2l6ZSxcclxuICAgICAgICAgICAgaGVpZ2h0TWFwQ2h1bmtTaXplOiBmaWVsZC5oZWlnaHRNYXAuZGF0YUNodW5rU2l6ZSxcclxuICAgICAgICAgICAgaGVpZ2h0TWFwRm9ybWF0OiBoZWlnaHRNYXBCdWZmZXIuZm9ybWF0LFxyXG4gICAgICAgICAgICBlbmdpbmVWZXJzaW9uOiBwY1ZlcnNpb24sXHJcbiAgICAgICAgICAgIGluc3RhbmNpbmc6IGluc3RhbmNpbmdUeXBlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNodW5rTmFtZXMgPSBPYmplY3Qua2V5cyhjaHVua3NTdG9yZSk7XHJcbiAgICAgICAgY29uc3Qgc2hhZGVyQ2h1bmtzID0gbWF0ZXJpYWwuZ2V0U2hhZGVyQ2h1bmtzPy4ocGMuU0hBREVSTEFOR1VBR0VfR0xTTCk7XHJcblxyXG4gICAgICAgIGlmIChzaGFkZXJDaHVua3MpIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNodW5rTmFtZSBvZiBjaHVua05hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBzaGFkZXJDaHVua3Muc2V0KGNodW5rTmFtZSwgY2h1bmtzU3RvcmVbY2h1bmtOYW1lXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1hdGVyaWFsLnNoYWRlckNodW5rc1ZlcnNpb24gPSBwYy5DSFVOS0FQSV8xXzcwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNodW5rczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IG1hdGVyaWFsLmNodW5rcztcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNodW5rTmFtZSBvZiBjaHVua05hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBjaHVua3NbY2h1bmtOYW1lXSA9IGNodW5rc1N0b3JlW2NodW5rTmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNodW5rcy5BUElWZXJzaW9uID0gcGMuQ0hVTktBUElfMV83MDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGUpIHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFNxdWFyZUl0ZXJhdG9yIGZyb20gXCIuLi9Db3JlL1NxdWFyZUl0ZXJhdG9yLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaEluc3RhbmNpbmcgfSBmcm9tIFwiLi9JUGF0Y2hJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgTWVzaEluc3RhbmNlRmFjdG9yeSBmcm9tIFwiLi9NZXNoSW5zdGFuY2VGYWN0b3J5Lm1qc1wiO1xyXG5pbXBvcnQgUGF0Y2hDb21iaW5lSW5zdGFuY2luZyBmcm9tIFwiLi9QYXRjaENvbWJpbmVJbnN0YW5jaW5nLm1qc1wiO1xyXG5pbXBvcnQgUGF0Y2hJbnN0YW5jaW5nIGZyb20gXCIuL1BhdGNoSW5zdGFuY2luZy5tanNcIjtcclxuaW1wb3J0IHsgcGF0Y2hJbnN0Q29vcmRPZmZzZXRBdHRyTmFtZSwgdHlwZSBUSW5zdGFuY2luZ1R5cGUsIHZlcnRleENvb3JkQXR0ck5hbWUgfSBmcm9tIFwiLi9TaGFkZXJDaHVua3MubWpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRpdHlQYXRjaGVzTWVzaCBleHRlbmRzIFNxdWFyZUl0ZXJhdG9yIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZU1hdGVyaWFsKCk6IHBjeC5TdGFuZGFyZE1hdGVyaWFsIHtcclxuXHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgcGMuU3RhbmRhcmRNYXRlcmlhbCgpO1xyXG4gICAgICAgICAgICAgIG1hdGVyaWFsLm5hbWUgPSBcIkhlaWdodGZpZWxkTWF0ZXJpYWxcIjtcclxuXHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHBhdGNoSW5zdENvb3JkT2Zmc2V0QXR0ck5hbWUsIHBjLlNFTUFOVElDX0FUVFIxMCk7XHJcbiAgICAgICAgbWF0ZXJpYWwuc2V0QXR0cmlidXRlKHZlcnRleENvb3JkQXR0ck5hbWUsIHBjLlNFTUFOVElDX1BPU0lUSU9OKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWFkb25seSBfcGF0Y2hTaXplOiBudW1iZXI7XHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX251bVBhdGNoZXNYOiBudW1iZXI7XHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX251bVBhdGNoZXNaOiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBfbGF5ZXJOYW1lOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF9lbnRpdHk6IHBjeC5FbnRpdHk7XHJcbiAgICBwcml2YXRlIF9tYXRlcmlhbDogcGN4LlN0YW5kYXJkTWF0ZXJpYWw7XHJcbiAgICBwcml2YXRlIF9tZXNoRmFjdG9yeTogTWVzaEluc3RhbmNlRmFjdG9yeTtcclxuICAgIHByaXZhdGUgX3BhdGNoQXZhbGFibGVDb3VudDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfY2hhbmdlc0lkczogbnVtYmVyW107XHJcbiAgICBwcml2YXRlIF9tZXNoSW5zdGFuY2VBcnJheTogQXJyYXk8cGN4Lk1lc2hJbnN0YW5jZSB8IHVuZGVmaW5lZD47XHJcbiAgICBwcml2YXRlIF9pbnN0YW5jaW5nVHlwZTogVEluc3RhbmNpbmdUeXBlO1xyXG4gICAgcHJpdmF0ZSBfaW5zdGFuY2luZzogSVBhdGNoSW5zdGFuY2luZzxhbnk+IHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBfcHJldlVzZU1lc2hCYWc6IGJvb2xlYW47XHJcblxyXG4gICAgcHVibGljIGdldCBpbnN0YW5jaW5nKCkgeyByZXR1cm4gdGhpcy5faW5zdGFuY2luZzsgfVxyXG4gICAgcHVibGljIGdldCBtZXNoRmFjdG9yeSgpIHsgcmV0dXJuIHRoaXMuX21lc2hGYWN0b3J5OyB9XHJcbiAgICBwdWJsaWMgZ2V0IG1lc2hJbnN0YW5jZUFycmF5KCk6IFJlYWRvbmx5PHR5cGVvZiB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheT4geyByZXR1cm4gdGhpcy5fbWVzaEluc3RhbmNlQXJyYXk7IH1cclxuICAgIHB1YmxpYyBnZXQgYWFiYigpIHsgcmV0dXJuIHRoaXMuX21lc2hGYWN0b3J5LmFhYmI7IH1cclxuICAgIHB1YmxpYyBnZXQgbWF0ZXJpYWwoKSB7IHJldHVybiB0aGlzLl9tYXRlcmlhbDsgfVxyXG4gICAgcHVibGljIGdldCBlbnRpdHkoKSB7IHJldHVybiB0aGlzLl9lbnRpdHk7IH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBhdGNoU2l6ZSgpIHsgcmV0dXJuIHRoaXMuX3BhdGNoU2l6ZTsgfVxyXG4gICAgcHVibGljIGdldCBudW1QYXRjaGVzWCgpIHsgcmV0dXJuIHRoaXMuX251bVBhdGNoZXNYOyB9XHJcbiAgICBwdWJsaWMgZ2V0IG51bVBhdGNoZXNaKCkgeyByZXR1cm4gdGhpcy5fbnVtUGF0Y2hlc1o7IH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGxheWVyTmFtZSgpIHsgcmV0dXJuIHRoaXMuX2xheWVyTmFtZTsgfVxyXG4gICAgcHVibGljIHNldCBsYXllck5hbWUodmFsdWU6IHN0cmluZykge1xyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGUgPSB0aGlzLl9sYXllck5hbWUgIT09IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2xheWVyTmFtZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICBpZiAodXBkYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZvcmNlVXBkYXRlUmVuZGVyQ29tcG9uZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxheWVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNoRmFjdG9yeTogTWVzaEluc3RhbmNlRmFjdG9yeSwgZW50aXR5OiBwY3guRW50aXR5LCBsYXllck5hbWU6IHN0cmluZykge1xyXG5cclxuICAgICAgICBzdXBlcihtZXNoRmFjdG9yeS5idWZmZXJzTWFuYWdlci5oZWlnaHRNYXAuZmllbGQpO1xyXG5cclxuICAgICAgICB0aGlzLl9wYXRjaFNpemUgICA9IHRoaXMuZmllbGQucGF0Y2hTaXplO1xyXG4gICAgICAgIHRoaXMuX251bVBhdGNoZXNYID0gdGhpcy5maWVsZC5udW1QYXRjaGVzWDtcclxuICAgICAgICB0aGlzLl9udW1QYXRjaGVzWiA9IHRoaXMuZmllbGQubnVtUGF0Y2hlc1o7XHJcblxyXG4gICAgICAgIHRoaXMuX2xheWVyTmFtZSA9IGxheWVyTmFtZTtcclxuICAgICAgICB0aGlzLl9lbnRpdHkgPSBlbnRpdHk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwgPSBFbnRpdHlQYXRjaGVzTWVzaC5jcmVhdGVNYXRlcmlhbCgpO1xyXG4gICAgICAgIHRoaXMuX21lc2hGYWN0b3J5ID0gbWVzaEZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy5fcGF0Y2hBdmFsYWJsZUNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VzSWRzID0gW107XHJcbiAgICAgICAgdGhpcy5faW5zdGFuY2luZ1R5cGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wcmV2VXNlTWVzaEJhZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0YW5jZUFycmF5ID0gbmV3IEFycmF5KHRoaXMuX251bVBhdGNoZXNYICogdGhpcy5fbnVtUGF0Y2hlc1opO1xyXG5cclxuICAgICAgICB0aGlzLl9tZXNoRmFjdG9yeS5iaW5kRGVwZW5kZW5jaWVzVG9NYXRlcmlhbCh0aGlzLmluc3RhbmNpbmcsIHRoaXMuX21hdGVyaWFsLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVMYXllcigpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2VudGl0eS5yZW5kZXIpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFwcCA9IHRoaXMuX21lc2hGYWN0b3J5LmJ1ZmZlcnNNYW5hZ2VyLmhlaWdodE1hcC5hcHA7XHJcbiAgICAgICAgICAgIGNvbnN0IGxheWVyID0gYXBwLnNjZW5lLmxheWVycy5nZXRMYXllckJ5TmFtZSh0aGlzLl9sYXllck5hbWUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZW50aXR5LnJlbmRlci5sYXllcnMgPSBbbGF5ZXIhLmlkXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF91cGRhdGVNZXNoSW5zdGFuY2VGb3JSZW5kZXIobWVzaEluc3RhbmNlczogcGN4Lk1lc2hJbnN0YW5jZVtdKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNoSW5zdGFuY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc2hJbnN0YW5jZSA9IG1lc2hJbnN0YW5jZXNbaV07XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5jdWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9jcmVhdGVSZW5kZXJDb21wb25lbnQobWVzaEluc3RhbmNlczogcGN4Lk1lc2hJbnN0YW5jZVtdKSB7XHJcbiAgICAgICAgdGhpcy5fZW50aXR5LmFkZENvbXBvbmVudCgncmVuZGVyJywge1xyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2VzOiBtZXNoSW5zdGFuY2VzLFxyXG4gICAgICAgICAgICBjYXN0U2hhZG93czogZmFsc2UsXHJcbiAgICAgICAgICAgIGNhc3RTaGFkb3dzTGlnaHRtYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICByZWNlaXZlU2hhZG93czogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZVJlbmRlckNvbXBvbmVudChhcHBlbmQ6IGJvb2xlYW4sIG1lc2hJbnN0YW5jZXM6IHBjeC5NZXNoSW5zdGFuY2VbXSkge1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBodHRwczovL2dpdGh1Yi5jb20vcGxheWNhbnZhcy9lbmdpbmUvaXNzdWVzLzY2ODBcclxuICAgICAgICBpZiAoYXBwZW5kKSB7XHJcbiAgICAgICAgICAgICh0aGlzLl9lbnRpdHkucmVuZGVyIGFzIGFueSkuX21lc2hJbnN0YW5jZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2VudGl0eS5yZW5kZXIhLm1lc2hJbnN0YW5jZXMgPSBtZXNoSW5zdGFuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2ZvcmNlVXBkYXRlUmVuZGVyQ29tcG9uZW50KCkge1xyXG5cclxuICAgICAgICBsZXQgYXBwZW5kID0gZmFsc2U7IC8vIGRlc3Ryb3kgcHJldiBtZXNoSW5zdGFuY2VzIGJ5IGRlZmF1bHRcclxuXHJcbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLmluc3RhbmNpbmdcclxuICAgICAgICAgICAgPyB0aGlzLmluc3RhbmNpbmcubWVzaEluc3RhbmNlQ291bnRcclxuICAgICAgICAgICAgOiB0aGlzLl9wYXRjaEF2YWxhYmxlQ291bnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGNvbnN0IG1lc2hJbnN0YW5jZXMgPSBuZXcgQXJyYXk8cGN4Lk1lc2hJbnN0YW5jZT4oY291bnQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2luZykge1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNpbmcuYXBwZW5kTWVzaEluc3RhbmNlcyhtZXNoSW5zdGFuY2VzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIGlmIGluc3RhbmNpbmcgd2FzIHVzZWQsIHRoZW4gd2UgZGVsZXRlIGFsbCBwcmV2aW91cyBpbnN0YW5jZXNcclxuICAgICAgICAgICAgLy8gb3IgdXNlIGN1c3RvbSByZW5kZXJlclxyXG4gICAgICAgICAgICBhcHBlbmQgPSAhdGhpcy5fcHJldlVzZU1lc2hCYWc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBpID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHBhdGNoSW5kZXggPSAwOyBwYXRjaEluZGV4IDwgdGhpcy5fbWVzaEluc3RhbmNlQXJyYXkubGVuZ3RoOyBwYXRjaEluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoTWVzaEluc3RhbmNlID0gdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hNZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2VzW2krK10gPSBwYXRjaE1lc2hJbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fY2hhbmdlc0lkcy5sZW5ndGggPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcHJldlVzZU1lc2hCYWcgPSAhIXRoaXMuaW5zdGFuY2luZztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2VudGl0eS5yZW5kZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUmVuZGVyQ29tcG9uZW50KGFwcGVuZCwgbWVzaEluc3RhbmNlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVSZW5kZXJDb21wb25lbnQobWVzaEluc3RhbmNlcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxheWVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoSW5zdGFuY2VGb3JSZW5kZXIobWVzaEluc3RhbmNlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZUFhYmIoKSB7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgbWVzaEluc3RhbmNlIG9mIHRoaXMuX21lc2hJbnN0YW5jZUFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmIChtZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tZXNoLmFhYmIgPSB0aGlzLl9tZXNoRmFjdG9yeS5hYWJiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2luZz8uZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0ub2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLm9iamVjdC5tZXNoLmFhYmIgPSB0aGlzLl9tZXNoRmFjdG9yeS5hYWJiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVJlbmRlckNvbXBvbmVudCgpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2luZyB8fCB0aGlzLl9jaGFuZ2VzSWRzLmxlbmd0aCA9PT0gMCB8fCAhdGhpcy5fZW50aXR5LmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZm9yY2VVcGRhdGVSZW5kZXJDb21wb25lbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9hZGRQYXRjaE1lc2hJbnN0YW5jZShwYXRjaEluZGV4OiBudW1iZXIsIG1lc2hJbnN0YW5jZTogcGN4Lk1lc2hJbnN0YW5jZSkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbcGF0Y2hJbmRleF0pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXNoIGluc3RhbmNlIGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0YW5jZUFycmF5W3BhdGNoSW5kZXhdID0gbWVzaEluc3RhbmNlO1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZXNJZHMucHVzaChwYXRjaEluZGV4KTtcclxuICAgICAgICB0aGlzLl9wYXRjaEF2YWxhYmxlQ291bnQrKztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0T3JDcmVhdGVQYXRjaE1lc2gocGF0Y2hJbmRleDogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGxldCBwYXRjaCA9IHRoaXMuX21lc2hJbnN0YW5jZUFycmF5W3BhdGNoSW5kZXhdO1xyXG4gICAgICAgIGlmICghcGF0Y2gpIHtcclxuICAgICAgICAgICAgcGF0Y2ggPSB0aGlzLl9tZXNoRmFjdG9yeS5jcmVhdGVQYXRjaE1lc2gocGF0Y2hJbmRleCwgdGhpcy5fZW50aXR5LCB0aGlzLl9tYXRlcmlhbCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZFBhdGNoTWVzaEluc3RhbmNlKHBhdGNoSW5kZXgsIHBhdGNoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwYXRjaDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveVBhdGNoTWVzaChwYXRjaEluZGV4OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGF0Y2hNZXNoSW5zdGFuY2UgPSB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheVtwYXRjaEluZGV4XTtcclxuXHJcbiAgICAgICAgaWYgKHBhdGNoTWVzaEluc3RhbmNlKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9tZXNoRmFjdG9yeS5kZXN0cm95TWVzaChwYXRjaE1lc2hJbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wYXRjaEF2YWxhYmxlQ291bnQtLTtcclxuICAgICAgICAgICAgdGhpcy5fY2hhbmdlc0lkcy5wdXNoKHBhdGNoSW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX21lc2hJbnN0YW5jZUFycmF5W3BhdGNoSW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveUluc3RhbmNpbmdQYXRjaGVzTWVzaCgpIHtcclxuICAgICAgICB0aGlzLl9pbnN0YW5jaW5nPy5kZXN0cm95KChtZXNoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hGYWN0b3J5LmRlc3Ryb3lNZXNoKG1lc2gpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95UGF0Y2hlc01lc2goKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9tZXNoSW5zdGFuY2VBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lQYXRjaE1lc2goaSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NsZWFyTWVzaGVzKCkge1xyXG5cclxuICAgICAgICAvLyBEZXN0cm95IGZvciByZWNyZWF0ZVxyXG4gICAgICAgIHRoaXMuZGVzdHJveUluc3RhbmNpbmdQYXRjaGVzTWVzaCgpO1xyXG5cclxuICAgICAgICAvLyBEZXN0cm95IHBhdGNoZXMgbWVzaGVzLCB0aGV5IHdpbGwgbm90IGJlIHVzZWQgaW4gY3VzdG9tIG9yIGluc3RhbmNlZCByZW5kZXJpbmdcclxuICAgICAgICBpZiAodGhpcy5faW5zdGFuY2luZykge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lQYXRjaGVzTWVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0SW5zdGFuY2luZ1R5cGUodHlwZTogVEluc3RhbmNpbmdUeXBlKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pbnN0YW5jaW5nVHlwZSA9PT0gdHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jbGVhck1lc2hlcygpO1xyXG4gICAgICAgIHRoaXMuX2luc3RhbmNpbmdUeXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLl9pbnN0YW5jaW5nID0gdHlwZSA9PT0gJ2NvbWJpbmUnID8gbmV3IFBhdGNoQ29tYmluZUluc3RhbmNpbmcoKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPT09ICdzaW1wbGUnICA/IG5ldyBQYXRjaEluc3RhbmNpbmcoKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgdGhpcy5fbWVzaEZhY3RvcnkuYmluZERlcGVuZGVuY2llc1RvTWF0ZXJpYWwodGhpcy5faW5zdGFuY2luZywgdGhpcy5fbWF0ZXJpYWwsIHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZU1lc2hlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVQYXRjaGVzTWVzaE1hdGVyaWFsKCkge1xyXG5cclxuICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMuX21lc2hGYWN0b3J5LmJ1ZmZlcnNNYW5hZ2VyLmhlaWdodE1hcC5maWVsZDtcclxuICAgICAgICBjb25zdCBudW1QYXRjaGVzWCA9IGZpZWxkLm51bVBhdGNoZXNYO1xyXG4gICAgICAgIGNvbnN0IG51bVBhdGNoZXNaID0gZmllbGQubnVtUGF0Y2hlc1o7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHogPSAwOyB6IDwgbnVtUGF0Y2hlc1o7IHorKykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBudW1QYXRjaGVzWDsgeCsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB6ICogbnVtUGF0Y2hlc1ggKyB4O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlID0gdGhpcy5fbWVzaEluc3RhbmNlQXJyYXlbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtZXNoSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2UubWF0ZXJpYWwgPSB0aGlzLl9tYXRlcmlhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlTWVzaGVzKCkge1xyXG5cclxuICAgICAgICB0aGlzLl9jbGVhck1lc2hlcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jaW5nLmJ1aWxkKHRoaXMuX21lc2hGYWN0b3J5LmJ1ZmZlcnNNYW5hZ2VyLmhlaWdodE1hcC5maWVsZCwgKGxvZEluZm8sIHByaW1pdGl2ZUluZm8sIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tZXNoRmFjdG9yeS5jcmVhdGVJbnN0YW5jaW5nTWVzaCh0aGlzLl9lbnRpdHksIHRoaXMuX21hdGVyaWFsLCBsb2RJbmZvLCBwcmltaXRpdmVJbmZvLCB0aGlzLmluc3RhbmNpbmchLCBkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhdGNoZXNNZXNoTWF0ZXJpYWwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2ZvcmNlVXBkYXRlUmVuZGVyQ29tcG9uZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95UGF0Y2hlc01lc2goKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3lJbnN0YW5jaW5nUGF0Y2hlc01lc2goKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fZW50aXR5LmRlc3Ryb3koKTtcclxuICAgIH1cclxufSIsImltcG9ydCB0eXBlIHsgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUGF0Y2ggfSBmcm9tIFwiLi4vQ29yZS9JUGF0Y2gubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoTG9kIH0gZnJvbSBcIi4uL0NvcmUvSVBhdGNoTG9kLm1qc1wiO1xyXG5pbXBvcnQgeyBkZWZhdWx0UGF0Y2hMb2QgfSBmcm9tIFwiLi4vQ29yZS9Mb2RTdGF0ZS5tanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQYXRjaFN0YXRlIHtcclxuICAgIHB1YmxpYyB2aXNpYmxlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgbG9kOiBSZWFkb25seTxJUGF0Y2hMb2Q+ID0gZGVmYXVsdFBhdGNoTG9kO1xyXG4gICAgcHVibGljIGluZGljZXNCYXNlSW5kZXg6IG51bWJlciA9IDA7XHJcbiAgICBwdWJsaWMgaW5kaWNlc0NvdW50OiBudW1iZXIgPSAwO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXRjaCBleHRlbmRzIFBhdGNoU3RhdGUgaW1wbGVtZW50cyBJUGF0Y2gge1xyXG5cclxuICAgIHJlYWRvbmx5IGluZGV4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBzaXplOiBudW1iZXI7XHJcbiAgICByZWFkb25seSB4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSB6OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtaW5YOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtaW5aOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaW5kZXg6IG51bWJlciwgeDogaW50LCB6OiBpbnQsIG1pblg6IGludCwgbWluWjogaW50LCBzaXplOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMuc2l6ZSAgPSBzaXplO1xyXG4gICAgICAgIHRoaXMueCAgICAgPSB4O1xyXG4gICAgICAgIHRoaXMueiAgICAgPSB6O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWluWCAgPSBtaW5YO1xyXG4gICAgICAgIHRoaXMubWluWiAgPSBtaW5aO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHR5cGUgeyBpbnQgfSBmcm9tIFwiLi4vRXh0cmFzL1R5cGVzLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElQYXRjaExvZCwgSVBhdGNoTG9kQmFzZSB9IGZyb20gXCIuLi9Db3JlL0lQYXRjaExvZC5tanNcIjtcclxuaW1wb3J0IHsgcGF0Y2hMb2RDb3JlUGFyYW1OYW1lIH0gZnJvbSBcIi4vU2hhZGVyQ2h1bmtzLm1qc1wiO1xyXG5pbXBvcnQgRW50aXR5UGF0Y2hlc01lc2ggZnJvbSBcIi4vRW50aXR5UGF0Y2hlc01lc2gubWpzXCI7XHJcbmltcG9ydCBNZXNoSW5zdGFuY2VGYWN0b3J5IGZyb20gXCIuL01lc2hJbnN0YW5jZUZhY3RvcnkubWpzXCI7XHJcbmltcG9ydCBQYXRjaCBmcm9tIFwiLi9QYXRjaC5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJU2luZ2xlTG9kSW5mbyB9IGZyb20gXCIuLi9Db3JlL0xvZEluZm8ubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSVBhdGNoZXNTdGF0ZSB9IGZyb20gXCIuLi9Db3JlL1BhdGNoZXNNYW5hZ2VyLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElMb2RTdGF0ZSB9IGZyb20gXCIuLi9Db3JlL0xvZFN0YXRlLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVuZGVyT3B0aW9ucyB7XHJcbiAgICB3aXJlZnJhbWU/OiBib29sZWFuLFxyXG4gICAgY2FzdFNoYWRvdz86IGJvb2xlYW4sXHJcbiAgICByZWNlaXZlU2hhZG93PzogYm9vbGVhbixcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlld1BhdGNoZXNSZW5kZXJQcmVwYXJlciBleHRlbmRzIEVudGl0eVBhdGNoZXNNZXNoIGltcGxlbWVudHMgSVBhdGNoZXNTdGF0ZSB7XHJcblxyXG4gICAgcHJpdmF0ZSBfd2lyZWZyYW1lOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBfY2FzdFNoYWRvdzogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX3JlY2VpdmVTaGFkb3c6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9idWZmZXJBcnJheTogUGF0Y2hbXTtcclxuICAgIHByaXZhdGUgX2xvZFN0YXRlOiBJTG9kU3RhdGU7XHJcblxyXG4gICAgcHVibGljIGdldCBsb2RTdGF0ZSgpIHsgcmV0dXJuIHRoaXMuX2xvZFN0YXRlOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGJ1ZmZlckFycmF5KCk6IFJlYWRvbmx5PFJlYWRvbmx5PFBhdGNoPltdPiB7IHJldHVybiB0aGlzLl9idWZmZXJBcnJheTsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgd2lyZWZyYW1lKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fd2lyZWZyYW1lOyB9XHJcbiAgICBwdWJsaWMgc2V0IHdpcmVmcmFtZSh2OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fd2lyZWZyYW1lID0gdjtcclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGNhc3RTaGFkb3coKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9jYXN0U2hhZG93OyB9XHJcbiAgICBwdWJsaWMgc2V0IGNhc3RTaGFkb3codjogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2Nhc3RTaGFkb3cgPSB2O1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcmVjZWl2ZVNoYWRvdygpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMuX3JlY2VpdmVTaGFkb3c7IH1cclxuICAgIHB1YmxpYyBzZXQgcmVjZWl2ZVNoYWRvdyh2OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fcmVjZWl2ZVNoYWRvdyA9IHY7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IobG9kU2F0ZTogSUxvZFN0YXRlLCBtZXNoRmFjdG9yeTogTWVzaEluc3RhbmNlRmFjdG9yeSwgZW50aXR5OiBwY3guRW50aXR5LCBsYXllck5hbWU6IHN0cmluZywgb3B0aW9ucz86IElSZW5kZXJPcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIobWVzaEZhY3RvcnksIGVudGl0eSwgbGF5ZXJOYW1lKTtcclxuICAgICAgICB0aGlzLl9sb2RTdGF0ZSA9IGxvZFNhdGU7XHJcbiAgICAgICAgdGhpcy5fd2lyZWZyYW1lID0gb3B0aW9ucz8ud2lyZWZyYW1lID8/IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2Nhc3RTaGFkb3cgPSBvcHRpb25zPy5jYXN0U2hhZG93ID8/IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3JlY2VpdmVTaGFkb3cgPSBvcHRpb25zPy5yZWNlaXZlU2hhZG93ID8/IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2J1ZmZlckFycmF5ID0gbmV3IEFycmF5KHRoaXMubWVzaEluc3RhbmNlQXJyYXkubGVuZ3RoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZU1lc2gobWVzaEluc3RhbmNlOiBwY3guTWVzaEluc3RhbmNlIHwgbnVsbCB8IHVuZGVmaW5lZCwgbG9kOiBJUGF0Y2hMb2RCYXNlKSB7XHJcblxyXG4gICAgICAgIGlmIChtZXNoSW5zdGFuY2UpIHtcclxuXHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5jYXN0U2hhZG93ID0gdGhpcy5fY2FzdFNoYWRvdztcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLnJlY2VpdmVTaGFkb3cgPSB0aGlzLl9yZWNlaXZlU2hhZG93O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbmV3UmVuZGVyU3R5bGUgPSB0aGlzLl93aXJlZnJhbWUgPyBwYy5SRU5ERVJTVFlMRV9XSVJFRlJBTUUgOiBwYy5SRU5ERVJTVFlMRV9TT0xJRDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLl9yZW5kZXJTdHlsZSA9IG5ld1JlbmRlclN0eWxlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3dpcmVmcmFtZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHdpcmVmcmFtZURhdGEgPSB0aGlzLm1lc2hGYWN0b3J5LndpcmVmcmFtZUJ1ZmZlcnNNYW5hZ2VyLmdldChsb2QpO1xyXG5cclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tZXNoLmluZGV4QnVmZmVyW3BjLlJFTkRFUlNUWUxFX1dJUkVGUkFNRV0gPSB3aXJlZnJhbWVEYXRhLmJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tZXNoLnByaW1pdGl2ZVtwYy5SRU5ERVJTVFlMRV9XSVJFRlJBTUVdID0gd2lyZWZyYW1lRGF0YS5wcmltaXRpdmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF91bnNldElmTmVlZFdpcmVmcmFtZShtZXNoSW5zdGFuY2U6IHBjeC5NZXNoSW5zdGFuY2UgfCBudWxsIHwgdW5kZWZpbmVkLCBsb2Q6IElQYXRjaExvZEJhc2UpIHtcclxuXHJcbiAgICAgICAgaWYgKG1lc2hJbnN0YW5jZSAmJiAhdGhpcy5fd2lyZWZyYW1lKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkZWxldGUgbWVzaEluc3RhbmNlLm1lc2guaW5kZXhCdWZmZXJbcGMuUkVOREVSU1RZTEVfV0lSRUZSQU1FXTtcclxuICAgICAgICAgICAgZGVsZXRlIG1lc2hJbnN0YW5jZS5tZXNoLnByaW1pdGl2ZVtwYy5SRU5ERVJTVFlMRV9XSVJFRlJBTUVdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZU1lc2hlcygpIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lc2hJbnN0YW5jZUFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2UgPSB0aGlzLm1lc2hJbnN0YW5jZUFycmF5W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJBcnJheVtpXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1lc2gobWVzaEluc3RhbmNlLCBidWZmZXIubG9kKTtcclxuICAgICAgICAgICAgdGhpcy5fdW5zZXRJZk5lZWRXaXJlZnJhbWUobWVzaEluc3RhbmNlLCBidWZmZXIubG9kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2luZz8uZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWVzaChpdGVtLm9iamVjdCwgaXRlbS5sb2QpO1xyXG4gICAgICAgICAgICB0aGlzLl91bnNldElmTmVlZFdpcmVmcmFtZShpdGVtLm9iamVjdCwgaXRlbS5sb2QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSB1cGRhdGVNZXNoZXMoKSB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlTWVzaGVzKCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGluaXRQYXRjaChwYXRjaFg6IGludCwgcGF0Y2haOiBpbnQsIHNpemU6IGludCwgbWluWDogaW50LCBtaW5aOiBpbnQsIGluZm86IFJlYWRvbmx5PElTaW5nbGVMb2RJbmZvPiwgbG9kSW5mbzogUmVhZG9ubHk8SVBhdGNoTG9kPik6IHZvaWQge1xyXG5cclxuICAgICAgICBjb25zdCBpbmRleCAgPSBwYXRjaFogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoWDtcclxuICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgUGF0Y2goaW5kZXgsIHBhdGNoWCwgcGF0Y2haLCBtaW5YLCBtaW5aLCBzaXplKTtcclxuXHJcbiAgICAgICAgYnVmZmVyLmxvZCA9IGxvZEluZm87XHJcbiAgICAgICAgYnVmZmVyLmluZGljZXNCYXNlSW5kZXggPSBpbmZvLnN0YXJ0O1xyXG4gICAgICAgIGJ1ZmZlci5pbmRpY2VzQ291bnQgPSBpbmZvLmNvdW50O1xyXG5cclxuICAgICAgICB0aGlzLl9idWZmZXJBcnJheVtpbmRleF0gPSBidWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVBhdGNoKHBhdGNoWDogaW50LCBwYXRjaFo6IGludCwgdmlzaWJsZTogYm9vbGVhbiwgaW5mbzogUmVhZG9ubHk8SVNpbmdsZUxvZEluZm8+LCBsb2Q6IFJlYWRvbmx5PElQYXRjaExvZD4pOiB2b2lkIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBpbmRleCAgPSBwYXRjaFogKiB0aGlzLl9udW1QYXRjaGVzWCArIHBhdGNoWDtcclxuICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJBcnJheVtpbmRleF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgYnVmZmVyLnZpc2libGUgICAgICAgICAgPSB2aXNpYmxlO1xyXG4gICAgICAgIGJ1ZmZlci5pbmRpY2VzQmFzZUluZGV4ID0gaW5mby5zdGFydDtcclxuICAgICAgICBidWZmZXIuaW5kaWNlc0NvdW50ICAgICA9IGluZm8uY291bnQ7XHJcbiAgICAgICAgYnVmZmVyLmxvZCAgICAgICAgICAgICAgPSBsb2Q7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNpbmcpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3QgPSB0aGlzLmluc3RhbmNpbmcuaW5jcmVtZW50KGxvZCwgYnVmZmVyKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGluc3QuY291bnQgPT09IDEgJiYgaW5zdC5vYmplY3QpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlID0gaW5zdC5vYmplY3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1lc2hJbnN0YW5jZSA9IHRoaXMuZ2V0T3JDcmVhdGVQYXRjaE1lc2goaW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLnZpc2libGUgPSB2aXNpYmxlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZpc2libGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNoID0gbWVzaEluc3RhbmNlLm1lc2g7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBtZXNoLnByaW1pdGl2ZVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICBwcmltaXRpdmUuYmFzZSAgPSBpbmZvLnN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgcHJpbWl0aXZlLmNvdW50ID0gaW5mby5jb3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICBtZXNoSW5zdGFuY2Uuc2V0UGFyYW1ldGVyKHBhdGNoTG9kQ29yZVBhcmFtTmFtZSwgbG9kLmNvcmUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1lc2gobWVzaEluc3RhbmNlLCBsb2QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiZWZvcmVVcGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jaW5nPy5iZWdpbihmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFmdGVyVXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2luZz8uZW5kKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJDb21wb25lbnQoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB0eXBlIHsgSVBhdGNoTG9kIH0gZnJvbSBcIi4uL0NvcmUvSVBhdGNoTG9kLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElTaW5nbGVMb2RJbmZvIH0gZnJvbSBcIi4uL0NvcmUvTG9kSW5mby5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJTG9kU3RhdGUgfSBmcm9tIFwiLi4vQ29yZS9Mb2RTdGF0ZS5tanNcIjtcclxuaW1wb3J0IHR5cGUgeyBJUGF0Y2hlc1N0YXRlIH0gZnJvbSBcIi4uL0NvcmUvUGF0Y2hlc01hbmFnZXIubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgaW50IH0gZnJvbSBcIi4uL0V4dHJhcy9UeXBlcy5tanNcIjtcclxuaW1wb3J0IEVudGl0eVBhdGNoZXNNZXNoIGZyb20gXCIuL0VudGl0eVBhdGNoZXNNZXNoLm1qc1wiO1xyXG5pbXBvcnQgTWVzaEluc3RhbmNlRmFjdG9yeSBmcm9tIFwiLi9NZXNoSW5zdGFuY2VGYWN0b3J5Lm1qc1wiO1xyXG5pbXBvcnQgUGF0Y2ggZnJvbSBcIi4vUGF0Y2gubWpzXCI7XHJcbmltcG9ydCB7IHBhdGNoTG9kQ29yZVBhcmFtTmFtZSB9IGZyb20gXCIuL1NoYWRlckNodW5rcy5tanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNoYWRvd1BhdGNoZXNSZW5kZXJQcmVwYXJlciBleHRlbmRzIEVudGl0eVBhdGNoZXNNZXNoIGltcGxlbWVudHMgSVBhdGNoZXNTdGF0ZSB7XHJcblxyXG4gICAgcHJpdmF0ZSBfYnVmZmVyQXJyYXk6IFBhdGNoW107XHJcbiAgICBwcml2YXRlIF9sb2RTdGF0ZTogSUxvZFN0YXRlO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgbG9kU3RhdGUoKSB7IHJldHVybiB0aGlzLl9sb2RTdGF0ZTsgfVxyXG4gICAgcHVibGljIGdldCBidWZmZXJBcnJheSgpOiBSZWFkb25seTxSZWFkb25seTxQYXRjaD5bXT4geyByZXR1cm4gdGhpcy5fYnVmZmVyQXJyYXk7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihsb2RTYXRlOiBJTG9kU3RhdGUsIG1lc2hGYWN0b3J5OiBNZXNoSW5zdGFuY2VGYWN0b3J5LCBlbnRpdHk6IHBjeC5FbnRpdHksIGxheWVyTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIobWVzaEZhY3RvcnksIGVudGl0eSwgbGF5ZXJOYW1lKTtcclxuICAgICAgICB0aGlzLl9sb2RTdGF0ZSA9IGxvZFNhdGU7XHJcbiAgICAgICAgdGhpcy5fYnVmZmVyQXJyYXkgPSBuZXcgQXJyYXkodGhpcy5tZXNoSW5zdGFuY2VBcnJheS5sZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfY3JlYXRlUmVuZGVyQ29tcG9uZW50KG1lc2hJbnN0YW5jZXM6IHBjeC5NZXNoSW5zdGFuY2VbXSkge1xyXG4gICAgICAgIHRoaXMuZW50aXR5LmFkZENvbXBvbmVudCgncmVuZGVyJywge1xyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2VzOiBtZXNoSW5zdGFuY2VzLFxyXG4gICAgICAgICAgICBjYXN0U2hhZG93czogdHJ1ZSxcclxuICAgICAgICAgICAgY2FzdFNoYWRvd3NMaWdodG1hcDogdHJ1ZSxcclxuICAgICAgICAgICAgcmVjZWl2ZVNoYWRvd3M6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvdmVycmlkZSBfdXBkYXRlTWVzaEluc3RhbmNlRm9yUmVuZGVyKG1lc2hJbnN0YW5jZXM6IHBjeC5NZXNoSW5zdGFuY2VbXSkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc2hJbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlID0gbWVzaEluc3RhbmNlc1tpXTtcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLmN1bGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgbWVzaEluc3RhbmNlLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5yZWNlaXZlU2hhZG93ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0UGF0Y2gocGF0Y2hYOiBpbnQsIHBhdGNoWjogaW50LCBzaXplOiBpbnQsIG1pblg6IGludCwgbWluWjogaW50LCBpbmZvOiBSZWFkb25seTxJU2luZ2xlTG9kSW5mbz4sIGxvZEluZm86IFJlYWRvbmx5PElQYXRjaExvZD4pOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY29uc3QgaW5kZXggID0gcGF0Y2haICogdGhpcy5fbnVtUGF0Y2hlc1ggKyBwYXRjaFg7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IFBhdGNoKGluZGV4LCBwYXRjaFgsIHBhdGNoWiwgbWluWCwgbWluWiwgc2l6ZSk7XHJcblxyXG4gICAgICAgIGJ1ZmZlci5sb2QgPSBsb2RJbmZvO1xyXG4gICAgICAgIGJ1ZmZlci5pbmRpY2VzQmFzZUluZGV4ID0gaW5mby5zdGFydDtcclxuICAgICAgICBidWZmZXIuaW5kaWNlc0NvdW50ID0gaW5mby5jb3VudDtcclxuXHJcbiAgICAgICAgdGhpcy5fYnVmZmVyQXJyYXlbaW5kZXhdID0gYnVmZmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVQYXRjaChwYXRjaFg6IGludCwgcGF0Y2haOiBpbnQsIHZpc2libGU6IGJvb2xlYW4sIGluZm86IFJlYWRvbmx5PElTaW5nbGVMb2RJbmZvPiwgbG9kOiBSZWFkb25seTxJUGF0Y2hMb2Q+KTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaW5kZXggID0gcGF0Y2haICogdGhpcy5fbnVtUGF0Y2hlc1ggKyBwYXRjaFg7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyQXJyYXlbaW5kZXhdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGJ1ZmZlci52aXNpYmxlICAgICAgICAgID0gdmlzaWJsZTtcclxuICAgICAgICBidWZmZXIuaW5kaWNlc0Jhc2VJbmRleCA9IGluZm8uc3RhcnQ7XHJcbiAgICAgICAgYnVmZmVyLmluZGljZXNDb3VudCAgICAgPSBpbmZvLmNvdW50O1xyXG4gICAgICAgIGJ1ZmZlci5sb2QgICAgICAgICAgICAgID0gbG9kO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluc3QgPSB0aGlzLmluc3RhbmNpbmcuaW5jcmVtZW50KGxvZCwgYnVmZmVyKTtcclxuICAgICAgICAgICAgaWYgKGluc3Qub2JqZWN0ICYmIGluc3QuY291bnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGluc3Qub2JqZWN0LmNhc3RTaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2UgPSB0aGlzLmdldE9yQ3JlYXRlUGF0Y2hNZXNoKGluZGV4KTtcclxuICAgICAgICAgICAgY29uc3QgbWVzaCA9IG1lc2hJbnN0YW5jZS5tZXNoO1xyXG4gICAgICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBtZXNoLnByaW1pdGl2ZVswXTtcclxuXHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5iYXNlICA9IGluZm8uc3RhcnQ7XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5jb3VudCA9IGluZm8uY291bnQ7XHJcblxyXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UuY2FzdFNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5zZXRQYXJhbWV0ZXIocGF0Y2hMb2RDb3JlUGFyYW1OYW1lLCBsb2QuY29yZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiZWZvcmVVcGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jaW5nPy5iZWdpbihmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFmdGVyVXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2luZz8uZW5kKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJDb21wb25lbnQoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IGRyYXdEaXJlY3Rpb25WZWN0b3IsIGRyYXdQb2ludCB9IGZyb20gXCIuLi9FeHRyYXMvRGVidWcubWpzXCI7XHJcbmltcG9ydCBNaWRwb2ludERpc3BIZWlnaHRmaWVsZCBmcm9tIFwiLi4vQ29yZS9NaWRwb2ludERpc3BIZWlnaHRmaWVsZC5tanNcIjtcclxuaW1wb3J0IEhlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdCBmcm9tIFwiLi4vQ29yZS9IZWlnaHRmaWVsZFJheWNhc3RSZXN1bHQubWpzXCI7XHJcbmltcG9ydCBIZWlnaHRNYXAgZnJvbSBcIi4uL0NvcmUvSGVpZ2h0TWFwLm1qc1wiO1xyXG5pbXBvcnQgdHlwZSB7IElCcnVzaFNldHRpbmdzIH0gZnJvbSBcIi4uL0hlaWdodGZpZWxkL0JydXNoLm1qc1wiO1xyXG5pbXBvcnQgQ29sb3JQYWludGVyIGZyb20gXCIuLi9IZWlnaHRmaWVsZC9Db2xvclBhaW50ZXIubWpzXCI7XHJcbmltcG9ydCB7IGZpZWxkSGVpZ2h0VmFsdWVUeXBlRGVmYXVsdCwgZmllbGRIZWlnaHRWYWx1ZVR5cGVFbnVtLCBmaWVsZFBhdGNoU2l6ZUVudW0sIGZpZWxkUGF0Y2hTaXplRW51bURlZmF1bHQsIGZpZWxkU2l6ZUVudW0sIGZpZWxkU2l6ZUVudW1EZWZhdWx0IH0gZnJvbSBcIi4uL0hlaWdodGZpZWxkL0VudW1zLm1qc1wiO1xyXG5pbXBvcnQgeyBjYW1lcmFQb3NpdGlvblBhcmFtTmFtZSwgbGF5ZXJzRGlmZnVzZVBhcmFtTmFtZSwgbGF5ZXJzRmxhZ3NQYXJhbU5hbWUsIGxheWVyc09mZnNldFBhcmFtTmFtZSwgbGF5ZXJzU2NhbGVQYXJhbU5hbWUsIG1heEhlaWdodFBhcmFtTmFtZSwgc3BsYXRNYXBQYXJhbU5hbWUsIH0gZnJvbSBcIi4uL0hlaWdodGZpZWxkL1NoYWRlckNodW5rcy5tanNcIjtcclxuaW1wb3J0IEhlaWdodGZpZWxkU2hhcGUgZnJvbSBcIi4uL0NvcmUvSGVpZ2h0ZmllbGRTaGFwZS5tanNcIjtcclxuaW1wb3J0IFBhdGNoZWRIZWlnaHRNYXAsIHsgVFZhbHVlVHlwZSB9IGZyb20gXCIuLi9Db3JlL1BhdGNoZWRIZWlnaHRNYXAubWpzXCI7XHJcbmltcG9ydCB7IG1hcFRpdGxlRW51bSB9IGZyb20gXCIuLi9FeHRyYXMvRW51bUNvbnZlcnRlci5tanNcIjtcclxuaW1wb3J0IHsgZ2V0QnVmZmVyIH0gZnJvbSBcIi4uL0FtbW9JbnRlZ3JhdGlvbi9BbW1vSW50ZWdyYXRpb24ubWpzXCI7XHJcbmltcG9ydCB0eXBlIHsgSUhlaWdodE1hcEZpbGVJbXBvcnRPcHRpb25zIH0gZnJvbSBcIi4uL0NvcmUvQWJzSGVpZ2h0TWFwRmlsZUlPLm1qc1wiO1xyXG5pbXBvcnQgTG9kU3RhdGUgZnJvbSBcIi4uL0NvcmUvTG9kU3RhdGUubWpzXCI7XHJcbmltcG9ydCBHUFVIZWlnaHRNYXBCdWZmZXIgZnJvbSBcIi4uL0hlaWdodGZpZWxkL0dQVUhlaWdodE1hcEJ1ZmZlci5tanNcIjtcclxuaW1wb3J0IFBhdGNoZXNTcGhlcmVCdWZmZXIgZnJvbSBcIi4uL0NvcmUvUGF0Y2hlc1NwaGVyZUJ1ZmZlci5tanNcIjtcclxuaW1wb3J0IFBhdGNoZXNNYW5hZ2VyIGZyb20gXCIuLi9Db3JlL1BhdGNoZXNNYW5hZ2VyLm1qc1wiO1xyXG5pbXBvcnQgTWVzaEluc3RhbmNlRmFjdG9yeSBmcm9tIFwiLi4vSGVpZ2h0ZmllbGQvTWVzaEluc3RhbmNlRmFjdG9yeS5tanNcIjtcclxuaW1wb3J0IEdQVUJ1ZmZlcnNNYW5hZ2VyIGZyb20gXCIuLi9IZWlnaHRmaWVsZC9HUFVCdWZmZXJzTWFuYWdlci5tanNcIjtcclxuaW1wb3J0IFZpZXdQYXRjaGVzUmVuZGVyUHJlcGFyZXIgZnJvbSBcIi4uL0hlaWdodGZpZWxkL1ZpZXdQYXRjaGVzUmVuZGVyUHJlcGFyZXIubWpzXCI7XHJcbmltcG9ydCBHUFVXaXJlZnJhbWVCdWZmZXJNYW5hZ2VyIGZyb20gXCIuLi9IZWlnaHRmaWVsZC9HUFVXaXJlZnJhbWVCdWZmZXJzTWFuYWdlci5tanNcIjtcclxuaW1wb3J0IFNoYWRvd1BhdGNoZXNSZW5kZXJQcmVwYXJlciBmcm9tIFwiLi4vSGVpZ2h0ZmllbGQvU2hhZG93UGF0Y2hlc1JlbmRlclByZXBhcmVyLm1qc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVGVycmFpbkhlaWdodE1hcEF0dHJpYnV0ZSB7XHJcbiAgICByZWFkb25seSBmaWxlOiBwY3guQXNzZXQ7XHJcbiAgICByZWFkb25seSB0ZXh0dXJlOiBwY3guQXNzZXQ7XHJcbiAgICByZWFkb25seSBzbW9vdGhGYWN0b3I6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHNtb290aFJhZGl1czogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElUZXJyYWluQnJ1c2hBdHRyaWJ1dGUgZXh0ZW5kcyBJQnJ1c2hTZXR0aW5ncyB7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRlcnJhaW5MYXllckF0dHJpYnV0ZSB7XHJcbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmcsXHJcbiAgICByZWFkb25seSBkaWZmdXNlOiBwY3guQXNzZXQ7XHJcbiAgICByZWFkb25seSBub3JtYWxNYXA6IHBjeC5Bc3NldDtcclxuICAgIHJlYWRvbmx5IHNpemU6IHBjeC5WZWMyO1xyXG4gICAgcmVhZG9ubHkgb2Zmc2V0OiBwY3guVmVjMjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVGVycmFpblBhaW50ZXJTZXR0aW5nc0F0dHJpYnV0ZSB7XHJcbiAgICByZWFkb25seSBzcGxhdE1hcDogcGN4LkFzc2V0O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElEaXJlY3Rpb25MaWdodFNoYWRvd0F0dHJpYnV0ZSB7XHJcbiAgICByZWFkb25seSB6RmFyOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBsYXllck5hbWU6IHN0cmluZztcclxuICAgIHJlYWRvbmx5IHZpc2libGU6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSURpcmVjdGlvbkxpZ2h0U2hhZG93U2NvcGUge1xyXG4gICAgZW50aXR5OiBwY3guRW50aXR5O1xyXG4gICAgbG9kU3RhdGU6IExvZFN0YXRlO1xyXG4gICAgcHJlcGFyZXI6IFNoYWRvd1BhdGNoZXNSZW5kZXJQcmVwYXJlcjtcclxufVxyXG5cclxuY29uc3QgYnJ1c2hNaW5TaXplID0gMjtcclxuY29uc3QgYnJ1c2hNYXhTaXplID0gMjUwO1xyXG5jb25zdCB0bXBNYXQgPSBuZXcgcGMuTWF0NCgpO1xyXG5jb25zdCB0ZXJyYWluTG9jYWxWZXJ0ZXhQb3MgPSBuZXcgcGMuVmVjMygpO1xyXG5jb25zdCBoZWlnaHRNYXBFeHQgPSAnLmhtJztcclxuXHJcbmV4cG9ydCBlbnVtIFJlbmRlck1vZGUge1xyXG4gICAgU3RhbmRhcmQgPSAxLFxyXG4gICAgSW5zdGFuY2luZ0FjY2VsZXJhdG9yID0gMixcclxuICAgIENvbWJpbmVJbnN0YW5jaW5nQWNjZWxlcmF0b3IgPSAzLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGVycmFpbiBleHRlbmRzIHBjLlNjcmlwdFR5cGUge1xyXG5cclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgcmVuZGVyTW9kZTogUmVuZGVyTW9kZTtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgbG9kQnlZUG9zOiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSB6RmFyOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IHdpZHRoOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGRlcHRoOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGhlaWdodDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSB2YWx1ZVR5cGU6IFRWYWx1ZVR5cGU7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IHBhdGNoU2l6ZTogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSByZWNlaXZlU2hhZG93OiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBkaXJlY3Rpb25MaWdodFNoYWRvd1NldHRpbmdzOiBJRGlyZWN0aW9uTGlnaHRTaGFkb3dBdHRyaWJ1dGVbXTtcclxuXHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGF1dG9SZW5kZXI6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IHdpcmVmcmFtZTogYm9vbGVhbjtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgcGFpbnRpbmc6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGNhbWVyYUVudGl0eTogcGN4LkVudGl0eSB8IHVuZGVmaW5lZDtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgaGVpZ2h0TWFwOiBJVGVycmFpbkhlaWdodE1hcEF0dHJpYnV0ZTtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgYnJ1c2g6IElUZXJyYWluQnJ1c2hBdHRyaWJ1dGU7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGFjdGl2ZUxheWVyOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHJlYWRvbmx5IGxheWVyTmFtZTogc3RyaW5nO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBwYWludExheWVyTmFtZTogc3RyaW5nO1xyXG4gICAgZGVjbGFyZSByZWFkb25seSBsYXllcnM6IElUZXJyYWluTGF5ZXJBdHRyaWJ1dGVbXTtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgcGFpbnRlclNldHRpbmdzOiBJVGVycmFpblBhaW50ZXJTZXR0aW5nc0F0dHJpYnV0ZTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHNoYXBlKCkgeyByZXR1cm4gdGhpcy5faGVpZ2h0RmllbGRTaGFwZTsgfVxyXG4gICAgcHVibGljIGdldCBvYmplY3QoKSB7IHJldHVybiB0aGlzLl90ZXJyYWluOyB9XHJcblxyXG4gICAgcHJpdmF0ZSBfbG9jayA9IDA7XHJcblxyXG4gICAgcHVibGljIGdldCBsb2NrKCkgeyByZXR1cm4gdGhpcy5fbG9jazsgfVxyXG5cclxuICAgIHByaXZhdGUgX2xvY2FsQ2FtZXJhUG9zaXRpb24gPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgcHJpdmF0ZSBfdGVycmFpbjogTWlkcG9pbnREaXNwSGVpZ2h0ZmllbGQ7XHJcbiAgICBwcml2YXRlIF9yb3VnaG5lc3MgPSAxLjA7XHJcblxyXG4gICAgcHJpdmF0ZSBfaGVpZ2h0RmllbGRTaGFwZTogSGVpZ2h0ZmllbGRTaGFwZTtcclxuICAgIHByaXZhdGUgX3JheWNhc3RSZXN1bHQ6IEhlaWdodGZpZWxkUmF5Y2FzdFJlc3VsdDtcclxuICAgIHByaXZhdGUgX3JheVN0YXJ0ID0gbmV3IHBjLlZlYzMoKTtcclxuICAgIHByaXZhdGUgX3JheUVuZCA9IG5ldyBwYy5WZWMzKCk7XHJcbiAgICBwcml2YXRlIF9yYXlEaXJlY3Rpb24gPSBuZXcgcGMuVmVjMygpO1xyXG4gICAgcHJpdmF0ZSBfcmF5ID0gbmV3IHBjLlJheSgpO1xyXG4gICAgcHJpdmF0ZSBfY2FtZXJhUG9zID0gbmV3IEFycmF5PG51bWJlcj4oMyk7XHJcblxyXG4gICAgcHJpdmF0ZSBfbGFzdE1vdXNlTW92ZUV2ZW50OiBwY3guTW91c2VFdmVudDtcclxuXHJcbiAgICBwcml2YXRlIF9sYXN0TG9kR3JpZFVwZGF0ZTogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgX2FjdGl2ZUJydXNoOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9icnVzaEhlaWdodE1hcDogSGVpZ2h0TWFwO1xyXG4gICAgcHJpdmF0ZSBfY29sb3JQYWludGVyOiBDb2xvclBhaW50ZXI7XHJcbiAgICBwcml2YXRlIF9icnVzaFNpemU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX2JydXNoU2l6ZVN0ZXA6IG51bWJlciA9IDE7XHJcbiAgICBwcml2YXRlIF9icnVzaE9wYWNpdHk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX2JydXNoT3BhY2l0eVN0ZXA6IG51bWJlciA9IDAuMDE7XHJcbiAgICBwcml2YXRlIF9pbnRlcnNlY3RzUmF5UmVzdWx0OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9sYXllcnNEaWZmdXNlOiBwY3guVGV4dHVyZSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBwdWJsaWMgYWRkTG9jaygpIHtcclxuICAgICAgICB0aGlzLl9sb2NrKys7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZyZWVMb2NrKCkge1xyXG4gICAgICAgIHRoaXMuX2xvY2stLTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcG9zdEluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZU1vdXNlKCk7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZUtleWJvYXJkKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXRCcnVzaCgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRUZXJyYWluKCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlRGlyZWN0aW9uTGlnaHRTaGFkb3dzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUJydXNoKCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlUGFpbnRlck1hdGVyaWFsKCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlSGVpZ2h0TWFwRnJvbUF0dHIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpyZW5kZXJNb2RlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl92aWV3UGF0Y2hlc1ByZXBhcmVyLnNldEluc3RhbmNpbmdUeXBlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkNvbWJpbmVJbnN0YW5jaW5nQWNjZWxlcmF0b3IgPyAnY29tYmluZScgOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkluc3RhbmNpbmdBY2NlbGVyYXRvciA/ICdzaW1wbGUnIDpcclxuICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6cmVjZWl2ZVNoYWRvdycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdmlld1BhdGNoZXNQcmVwYXJlci5yZWNlaXZlU2hhZG93ID0gdGhpcy5yZWNlaXZlU2hhZG93O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOndpcmVmcmFtZScsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdmlld1BhdGNoZXNQcmVwYXJlci53aXJlZnJhbWUgPSB0aGlzLndpcmVmcmFtZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy53aXJlZnJhbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dpcmVmcmFtZUJ1ZmZlcnNNYW5hZ2VyLmZyZWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmFjdGl2ZUxheWVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVQYWludGVyTWF0ZXJpYWwoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpsYXllcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxheWVycygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmJydXNoJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVCcnVzaCgpO1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVQYWludGVyTWF0ZXJpYWwoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpoZWlnaHQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RlcnJhaW4uc2V0TWF4SGVpZ2h0KHRoaXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgdGhpcy5fc3BoZXJlc0J1ZmZlci5yZWNhbGN1bGF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9tZXNoRmFjdG9yeS51cGRhdGVBYWJiKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZpZXdQYXRjaGVzUHJlcGFyZXIudXBkYXRlQWFiYigpO1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNYXRlcmlhbFBhcmFtZXRlcnMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjp6RmFyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl92aWV3UGF0Y2hlc0xvZFN0YXRlLnNldFpGYXIodGhpcy56RmFyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpkaXJlY3Rpb25MaWdodFNoYWRvd1NldHRpbmdzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVEaXJlY3Rpb25MaWdodFNoYWRvd3MoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0QnJ1c2goKSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRNYXAgPSB0aGlzLnBhaW50ZXJTZXR0aW5ncy5zcGxhdE1hcC5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICB0aGlzLl9icnVzaEhlaWdodE1hcCA9IG5ldyBIZWlnaHRNYXAoMjU2LCAyNTYsIDEwMCk7XHJcbiAgICAgICAgdGhpcy5fY29sb3JQYWludGVyID0gbmV3IENvbG9yUGFpbnRlcih0aGlzLmFwcCwgc3BsYXRNYXAsIHRoaXMucGFpbnRMYXllck5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZVBhaW50ZXJNYXRlcmlhbCgpIHtcclxuICAgICAgICB0aGlzLl9jb2xvclBhaW50ZXIudXBkYXRlU2V0dGluZ3ModGhpcy5icnVzaCwgdGhpcy5hY3RpdmVMYXllcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlQnJ1c2goKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2JydXNoU2l6ZSA9IHRoaXMuYnJ1c2guc2l6ZSB8IDA7XHJcbiAgICAgICAgdGhpcy5fYnJ1c2hPcGFjaXR5ID0gdGhpcy5icnVzaC5vcGFjaXR5O1xyXG5cclxuICAgICAgICBjb25zdCBhY3RpdmVCcnVzaCA9IHRoaXMuYnJ1c2guYWN0aXZlIHwgMDtcclxuXHJcbiAgICAgICAgaWYgKGFjdGl2ZUJydXNoID09PSB0aGlzLl9hY3RpdmVCcnVzaCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYnJ1c2gudGV4dHVyZXNbYWN0aXZlQnJ1c2hdKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JydXNoIGltYWdlIHVuc2V0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBicnVzaFRleHR1cmUgPSB0aGlzLmJydXNoLnRleHR1cmVzW2FjdGl2ZUJydXNoXS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICBjb25zdCBicnVzaEltZyA9IGJydXNoVGV4dHVyZS5nZXRTb3VyY2UoKSBhcyB1bmtub3duIGFzIEltYWdlQml0bWFwO1xyXG5cclxuICAgICAgICBpZiAoIWJydXNoSW1nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JydXNoIGltYWdlIHVuc2V0LicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9hY3RpdmVCcnVzaCA9IGFjdGl2ZUJydXNoO1xyXG4gICAgICAgIHRoaXMuX2JydXNoSGVpZ2h0TWFwLmZyb21JbWFnZShicnVzaEltZyk7XHJcbiAgICAgICAgdGhpcy5fYnJ1c2hIZWlnaHRNYXAuc21vb3RoKDEsIDEpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9icnVzaEhlaWdodE1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEhlaWdodE1hcEJ1ZmZlcihjaHVua1NpemU6IG51bWJlcikge1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBNb3ZlIHRvIHRlcnJhaW4gY29sbGlkZXJcclxuICAgICAgICAvLyBUT0RPOiBBbW1vIGpzIGludGVncmF0aW9uXHJcblxyXG4gICAgICAgIGxldCBidWZmZXI6IGFueSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBBbW1vICE9PSAndW5kZWZpbmVkJykge1xyXG5cclxuICAgICAgICAgICAgYnVmZmVyID0gZ2V0QnVmZmVyKHRoaXMud2lkdGgsIHRoaXMuZGVwdGgsIHRoaXMucGF0Y2hTaXplLCBjaHVua1NpemUsIHRoaXMudmFsdWVUeXBlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGh0ID0gdGhpcy52YWx1ZVR5cGUgPT09ICczMmYnID8gMCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZVR5cGUgPT09ICcxNnUnID8gMSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMiA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBobSA9IG5ldyBBbW1vLmJ0QWxleFRlcnJhaW5QYXRjaGVkSGVpZ2h0TWFwKHRoaXMud2lkdGgsIHRoaXMuZGVwdGgsIHRoaXMucGF0Y2hTaXplLCBjaHVua1NpemUsIDAsIHRoaXMuaGVpZ2h0LCBodCwgYnVmZmVyLmJ5dGVPZmZzZXQpO1xyXG4gICAgICAgICAgICBjb25zdCBzaGFwZSA9IG5ldyBBbW1vLmJ0QWxleEhlaWdodGZpZWxkVGVycmFpblNoYXBlKGhtLCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBncm91bmRUcmFuc2Zvcm0gPSBuZXcgQW1tby5idFRyYW5zZm9ybSgpO1xyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBBbW1vLmJ0VmVjdG9yMygwLCB0aGlzLmhlaWdodCAvIDIsIDApO1xyXG5cclxuICAgICAgICAgICAgZ3JvdW5kVHJhbnNmb3JtLnNldElkZW50aXR5KCk7XHJcbiAgICAgICAgICAgIGdyb3VuZFRyYW5zZm9ybS5zZXRPcmlnaW4ocG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZ3JvdW5kTWFzcyA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xyXG4gICAgICAgICAgICBjb25zdCBncm91bmRMb2NhbEluZXJ0aWEgPSBuZXcgQW1tby5idFZlY3RvcjMoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VuZE1vdGlvblN0YXRlID0gbmV3IEFtbW8uYnREZWZhdWx0TW90aW9uU3RhdGUoZ3JvdW5kVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdW5kQ29uc3RySW5mbyA9IG5ldyBBbW1vLmJ0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mbyhncm91bmRNYXNzLCBncm91bmRNb3Rpb25TdGF0ZSwgc2hhcGUsIGdyb3VuZExvY2FsSW5lcnRpYSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VuZEJvZHkgPSBuZXcgQW1tby5idFJpZ2lkQm9keShncm91bmRDb25zdHJJbmZvKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLnN5c3RlbXMucmlnaWRib2R5IS5keW5hbWljc1dvcmxkLmFkZFJpZ2lkQm9keShncm91bmRCb2R5KTtcclxuXHJcbiAgICAgICAgICAgIEFtbW8uZGVzdHJveShwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIEFtbW8uZGVzdHJveShncm91bmRUcmFuc2Zvcm0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zcGhlcmVzQnVmZmVyOiBQYXRjaGVzU3BoZXJlQnVmZmVyO1xyXG4gICAgcHJpdmF0ZSBfaGVpZ2h0TWFwQnVmZmVyOiBHUFVIZWlnaHRNYXBCdWZmZXI7XHJcbiAgICBwcml2YXRlIF9idWZmZXJzTWFuYWdlcjogR1BVQnVmZmVyc01hbmFnZXI7XHJcbiAgICBwcml2YXRlIF93aXJlZnJhbWVCdWZmZXJzTWFuYWdlcjogR1BVV2lyZWZyYW1lQnVmZmVyTWFuYWdlcjtcclxuICAgIHByaXZhdGUgX21lc2hGYWN0b3J5OiBNZXNoSW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgcHJpdmF0ZSBfcGF0Y2hlc01hbmFnZXI6IFBhdGNoZXNNYW5hZ2VyO1xyXG5cclxuICAgIHByaXZhdGUgX3ZpZXdQYXRjaGVzTG9kU3RhdGU6IExvZFN0YXRlO1xyXG4gICAgcHJpdmF0ZSBfdmlld1BhdGNoZXNQcmVwYXJlcjogVmlld1BhdGNoZXNSZW5kZXJQcmVwYXJlcjtcclxuXHJcbiAgICBwcml2YXRlIF9kaXJlY3Rpb25MaWdodFNoYWRvd1Njb3BlczogSURpcmVjdGlvbkxpZ2h0U2hhZG93U2NvcGVbXSA9IFtdO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgaGVpZ2h0TWFwVGV4dHVyZSgpIHsgcmV0dXJuIHRoaXMuX2hlaWdodE1hcEJ1ZmZlci50ZXh0dXJlOyB9XHJcbiAgICBwdWJsaWMgZ2V0IGFhYmIoKSB7IHJldHVybiB0aGlzLl9tZXNoRmFjdG9yeS5hYWJiOyB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZGVzdHJveURpcmVjdGlvbkxpZ2h0U2NvcGVzKCkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2RpcmVjdGlvbkxpZ2h0U2hhZG93U2NvcGVzLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzY29wZSA9IHRoaXMuX2RpcmVjdGlvbkxpZ2h0U2hhZG93U2NvcGVzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICBzY29wZS5wcmVwYXJlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICBzY29wZS5sb2RTdGF0ZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICBzY29wZS5lbnRpdHkuZGVzdHJveSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3BhdGNoZXNNYW5hZ2VyLnJlbW92ZVN0YXRlKHNjb3BlLnByZXBhcmVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW50aXR5LnJlbW92ZUNoaWxkKHNjb3BlLmVudGl0eSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZGlyZWN0aW9uTGlnaHRTaGFkb3dTY29wZXNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZURpcmVjdGlvbkxpZ2h0U2hhZG93cygpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fZGVzdHJveURpcmVjdGlvbkxpZ2h0U2NvcGVzKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9kaXJlY3Rpb25MaWdodFNoYWRvd1Njb3Blcy5sZW5ndGggPCB0aGlzLmRpcmVjdGlvbkxpZ2h0U2hhZG93U2V0dGluZ3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvbkxpZ2h0U2hhZG93U2NvcGVzLmxlbmd0aCA9IHRoaXMuZGlyZWN0aW9uTGlnaHRTaGFkb3dTZXR0aW5ncy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBsb2RNYW5hZ2VyID0gdGhpcy5fcGF0Y2hlc01hbmFnZXIubG9kTWFuYWdlcjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRpcmVjdGlvbkxpZ2h0U2hhZG93U2V0dGluZ3MubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbkxpZ2h0U2hhZG93ID0gdGhpcy5kaXJlY3Rpb25MaWdodFNoYWRvd1NldHRpbmdzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbkxpZ2h0U2hhZG93LnZpc2libGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHkgPSBuZXcgcGMuRW50aXR5KGBUZXJyYWluRGlyZWN0aW9uTGlnaHRTaGFkb3dfJHtpfWApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9kU3RhdGUgPSBuZXcgTG9kU3RhdGUobG9kTWFuYWdlciwgZGlyZWN0aW9uTGlnaHRTaGFkb3cuekZhcik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVwYXJlciA9IG5ldyBTaGFkb3dQYXRjaGVzUmVuZGVyUHJlcGFyZXIobG9kU3RhdGUsIHRoaXMuX21lc2hGYWN0b3J5LCBlbnRpdHksIGRpcmVjdGlvbkxpZ2h0U2hhZG93LmxheWVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BhdGNoZXNNYW5hZ2VyLmFkZFN0YXRlKHByZXBhcmVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwcmVwYXJlci51cGRhdGVBYWJiKCk7XHJcbiAgICAgICAgICAgICAgICBwcmVwYXJlci5zZXRJbnN0YW5jaW5nVHlwZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck1vZGUgPT09IFJlbmRlck1vZGUuQ29tYmluZUluc3RhbmNpbmdBY2NlbGVyYXRvciA/ICdjb21iaW5lJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkluc3RhbmNpbmdBY2NlbGVyYXRvciA/ICdzaW1wbGUnIDpcclxuICAgICAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb25MaWdodFNoYWRvd1Njb3Blc1tpXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVwYXJlcixcclxuICAgICAgICAgICAgICAgICAgICBsb2RTdGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHlcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVudGl0eS5hZGRDaGlsZChlbnRpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9kaXJlY3Rpb25MaWdodFNoYWRvd1Njb3Blcy5sZW5ndGggPSB0aGlzLmRpcmVjdGlvbkxpZ2h0U2hhZG93U2V0dGluZ3MubGVuZ3RoO1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVNYXRlcmlhbFBhcmFtZXRlcnMoKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVMYXllcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0VGVycmFpbigpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0bXBDaHVua1NpemUgPSB0aGlzLnBhdGNoU2l6ZSAqIDIgLSAxO1xyXG4gICAgICAgIGNvbnN0IGNodW5rU2l6ZSA9IE1hdGgubWluKHRoaXMud2lkdGgsIHRoaXMuZGVwdGgsIHRtcENodW5rU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5faW5pdEhlaWdodE1hcEJ1ZmZlcihjaHVua1NpemUpO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodE1hcCA9IG5ldyBQYXRjaGVkSGVpZ2h0TWFwKHRoaXMud2lkdGgsIHRoaXMuZGVwdGgsIHRoaXMucGF0Y2hTaXplLCBjaHVua1NpemUsIHRoaXMuaGVpZ2h0LCB0aGlzLnZhbHVlVHlwZSwgYnVmZmVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdGVycmFpbiA9IG5ldyBNaWRwb2ludERpc3BIZWlnaHRmaWVsZChoZWlnaHRNYXApO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodEZpZWxkU2hhcGUgPSBuZXcgSGVpZ2h0ZmllbGRTaGFwZShoZWlnaHRNYXApO1xyXG4gICAgICAgIHRoaXMuX3JheWNhc3RSZXN1bHQgPSBuZXcgSGVpZ2h0ZmllbGRSYXljYXN0UmVzdWx0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NwaGVyZXNCdWZmZXIgPSBuZXcgUGF0Y2hlc1NwaGVyZUJ1ZmZlcihoZWlnaHRNYXAsIHRoaXMuZW50aXR5LmdldFdvcmxkVHJhbnNmb3JtKCkpO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodE1hcEJ1ZmZlciA9IG5ldyBHUFVIZWlnaHRNYXBCdWZmZXIodGhpcy5hcHAsIHRoaXMuX3RlcnJhaW4pO1xyXG4gICAgICAgIHRoaXMuX2J1ZmZlcnNNYW5hZ2VyID0gbmV3IEdQVUJ1ZmZlcnNNYW5hZ2VyKHRoaXMuX2hlaWdodE1hcEJ1ZmZlcik7XHJcbiAgICAgICAgdGhpcy5fd2lyZWZyYW1lQnVmZmVyc01hbmFnZXIgPSBuZXcgR1BVV2lyZWZyYW1lQnVmZmVyTWFuYWdlcih0aGlzLl9idWZmZXJzTWFuYWdlciwgdGhpcy5fdGVycmFpbi5sb2RJbmZvKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWVzaEZhY3RvcnkgPSBuZXcgTWVzaEluc3RhbmNlRmFjdG9yeSh0aGlzLl9idWZmZXJzTWFuYWdlciwgdGhpcy5fd2lyZWZyYW1lQnVmZmVyc01hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuX3BhdGNoZXNNYW5hZ2VyID0gbmV3IFBhdGNoZXNNYW5hZ2VyKHRoaXMuX3RlcnJhaW4sIHRoaXMuX3NwaGVyZXNCdWZmZXIpO1xyXG5cclxuICAgICAgICB0aGlzLl92aWV3UGF0Y2hlc0xvZFN0YXRlID0gbmV3IExvZFN0YXRlKHRoaXMuX3BhdGNoZXNNYW5hZ2VyLmxvZE1hbmFnZXIsIHRoaXMuekZhcik7XHJcbiAgICAgICAgdGhpcy5fdmlld1BhdGNoZXNQcmVwYXJlciA9IG5ldyBWaWV3UGF0Y2hlc1JlbmRlclByZXBhcmVyKFxyXG4gICAgICAgICAgICB0aGlzLl92aWV3UGF0Y2hlc0xvZFN0YXRlLFxyXG4gICAgICAgICAgICB0aGlzLl9tZXNoRmFjdG9yeSxcclxuICAgICAgICAgICAgdGhpcy5lbnRpdHksXHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXJOYW1lLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aXJlZnJhbWU6IHRoaXMud2lyZWZyYW1lLFxyXG4gICAgICAgICAgICAgICAgY2FzdFNoYWRvdzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlU2hhZG93OiB0aGlzLnJlY2VpdmVTaGFkb3csXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLl9wYXRjaGVzTWFuYWdlci5hZGRTdGF0ZSh0aGlzLl92aWV3UGF0Y2hlc1ByZXBhcmVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdmlld1BhdGNoZXNQcmVwYXJlci5zZXRJbnN0YW5jaW5nVHlwZShcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkNvbWJpbmVJbnN0YW5jaW5nQWNjZWxlcmF0b3IgPyAnY29tYmluZScgOlxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlck1vZGUgPT09IFJlbmRlck1vZGUuSW5zdGFuY2luZ0FjY2VsZXJhdG9yID8gJ3NpbXBsZScgOlxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX3RlcnJhaW4sIHRoaXMuX2hlaWdodEZpZWxkU2hhcGUsIHRoaXMuX3BhdGNoZXNNYW5hZ2VyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVNYXRlcmlhbFBhcmFtZXRlcnMoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3ZpZXdQYXRjaGVzUHJlcGFyZXIubWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHNwbGF0TWFwUGFyYW1OYW1lLCB0aGlzLl9jb2xvclBhaW50ZXIuYmFja2dyb3VuZCk7XHJcbiAgICAgICAgdGhpcy5fdmlld1BhdGNoZXNQcmVwYXJlci5tYXRlcmlhbC5zZXRQYXJhbWV0ZXIobWF4SGVpZ2h0UGFyYW1OYW1lLCB0aGlzLl90ZXJyYWluLm1heEhlaWdodCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fZGlyZWN0aW9uTGlnaHRTaGFkb3dTY29wZXMubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLl9kaXJlY3Rpb25MaWdodFNoYWRvd1Njb3Blc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnByZXBhcmVyLm1hdGVyaWFsLnNldFBhcmFtZXRlcihzcGxhdE1hcFBhcmFtTmFtZSwgdGhpcy5fY29sb3JQYWludGVyLmJhY2tncm91bmQpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5wcmVwYXJlci5tYXRlcmlhbC5zZXRQYXJhbWV0ZXIobWF4SGVpZ2h0UGFyYW1OYW1lLCB0aGlzLl90ZXJyYWluLm1heEhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTWF0ZXJpYWxDYW1lcmFQb3MoKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhbWVyYUVudGl0eSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FtZXJhUG9zID0gdGhpcy5jYW1lcmFFbnRpdHkuZ2V0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhUG9zWzBdID0gY2FtZXJhUG9zLng7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYVBvc1sxXSA9IGNhbWVyYVBvcy55O1xyXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmFQb3NbMl0gPSBjYW1lcmFQb3MuejtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3ZpZXdQYXRjaGVzUHJlcGFyZXIubWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGNhbWVyYVBvc2l0aW9uUGFyYW1OYW1lLCB0aGlzLl9jYW1lcmFQb3MpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9kaXJlY3Rpb25MaWdodFNoYWRvd1Njb3Blcy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLl9kaXJlY3Rpb25MaWdodFNoYWRvd1Njb3Blc1tpXTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnByZXBhcmVyLm1hdGVyaWFsLnNldFBhcmFtZXRlcihjYW1lcmFQb3NpdGlvblBhcmFtTmFtZSwgdGhpcy5fY2FtZXJhUG9zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTGF5ZXJzKCkge1xyXG5cclxuICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgY29uc3QgbWF4Q291bnQgPSA1O1xyXG4gICAgICAgIGNvbnN0IHdpZHRoICA9IDEwMjQ7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gMTAyNDtcclxuXHJcbiAgICAgICAgbGV0IGxlbmd0aCAgID0gMDtcclxuICAgICAgICBsZXQgZmxhZ3MgICAgPSBbXTtcclxuICAgICAgICBsZXQgc2NhbGVzICAgPSBbXTtcclxuICAgICAgICBsZXQgb2Zmc2V0cyAgPSBbXTtcclxuICAgICAgICBsZXQgZGlmZnVzZXMgPSBbXSBhcyBhbnlbXTtcclxuICAgICAgICBsZXQgbm9ybWFscyAgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhDb3VudDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZmxhZyA9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoaSA8IHRoaXMubGF5ZXJzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyICAgICA9IHRoaXMubGF5ZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZnVzZSAgID0gbGF5ZXIuZGlmZnVzZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbE1hcCA9IGxheWVyLm5vcm1hbE1hcDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlmZnVzZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWZmdXNlVGV4dHVyZSA9IGRpZmZ1c2UucmVzb3VyY2UgYXMgcGN4LlRleHR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcrKztcclxuICAgICAgICAgICAgICAgICAgICBsZW5ndGgrKztcclxuICAgICAgICAgICAgICAgICAgICBkaWZmdXNlcy5wdXNoKGRpZmZ1c2VUZXh0dXJlLmdldFNvdXJjZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZXMucHVzaChsYXllci5zaXplLngsIGxheWVyLnNpemUueSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0cy5wdXNoKGxheWVyLm9mZnNldC54LCBsYXllci5vZmZzZXQueSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub3JtYWxNYXApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbFRleHR1cmUgPSBub3JtYWxNYXAucmVzb3VyY2UgYXMgcGN4LlRleHR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbHMucHVzaChub3JtYWxUZXh0dXJlLmdldFNvdXJjZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZsYWdzLnB1c2goZmxhZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9sYXllcnNEaWZmdXNlPy5kZXN0cm95KCk7XHJcbiAgICAgICAgLy90aGlzLl9sYXllcnNEaWZmdXNlID0gdGhpcy5sYXllcnNbMF0uZGlmZnVzZS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICB0aGlzLl9sYXllcnNEaWZmdXNlID0gbmV3IHBjLlRleHR1cmUodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHtcclxuICAgICAgICAgICAgbmFtZTogJ3RlcnJhaW5MYXllcnNEaWZmdXNlJyxcclxuICAgICAgICAgICAgZm9ybWF0OiBwYy5QSVhFTEZPUk1BVF9TUkdCQTgsXHJcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXHJcbiAgICAgICAgICAgIGFycmF5TGVuZ3RoOiBsZW5ndGgsXHJcbiAgICAgICAgICAgIGZsaXBZOiAhdGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UuaXNXZWJHUFUsXHJcbiAgICAgICAgICAgIG1pcG1hcHM6IHRydWUsXHJcbiAgICAgICAgICAgIGFkZHJlc3NVOiBwYy5BRERSRVNTX1JFUEVBVCxcclxuICAgICAgICAgICAgYWRkcmVzc1Y6IHBjLkFERFJFU1NfUkVQRUFULFxyXG4gICAgICAgICAgICBhZGRyZXNzVzogcGMuQUREUkVTU19DTEFNUF9UT19FREdFLFxyXG4gICAgICAgICAgICBsZXZlbHM6IFsgZGlmZnVzZXMgXVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2xheWVyc0RpZmZ1c2UudXBsb2FkKCk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX2xheWVyc0RpZmZ1c2UpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3ZpZXdQYXRjaGVzUHJlcGFyZXIubWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGxheWVyc0RpZmZ1c2VQYXJhbU5hbWUsIHRoaXMuX2xheWVyc0RpZmZ1c2UpO1xyXG4gICAgICAgIHRoaXMuX3ZpZXdQYXRjaGVzUHJlcGFyZXIubWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGAke2xheWVyc0ZsYWdzUGFyYW1OYW1lfVswXWAsIGZsYWdzKTtcclxuICAgICAgICB0aGlzLl92aWV3UGF0Y2hlc1ByZXBhcmVyLm1hdGVyaWFsLnNldFBhcmFtZXRlcihgJHtsYXllcnNTY2FsZVBhcmFtTmFtZX1bMF1gLCBzY2FsZXMpO1xyXG4gICAgICAgIHRoaXMuX3ZpZXdQYXRjaGVzUHJlcGFyZXIubWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGAke2xheWVyc09mZnNldFBhcmFtTmFtZX1bMF1gLCBvZmZzZXRzKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9kaXJlY3Rpb25MaWdodFNoYWRvd1Njb3Blcy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuX2RpcmVjdGlvbkxpZ2h0U2hhZG93U2NvcGVzW2ldO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gaXRlbS5wcmVwYXJlci5tYXRlcmlhbDtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFBhcmFtZXRlcihsYXllcnNEaWZmdXNlUGFyYW1OYW1lLCB0aGlzLl9sYXllcnNEaWZmdXNlKTtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFBhcmFtZXRlcihgJHtsYXllcnNGbGFnc1BhcmFtTmFtZX1bMF1gLCBmbGFncyk7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRQYXJhbWV0ZXIoYCR7bGF5ZXJzU2NhbGVQYXJhbU5hbWV9WzBdYCwgc2NhbGVzKTtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFBhcmFtZXRlcihgJHtsYXllcnNPZmZzZXRQYXJhbU5hbWV9WzBdYCwgb2Zmc2V0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgX2luaXRpYWxpemVNb3VzZSgpIHtcclxuICAgICAgICB0aGlzLmFwcC5tb3VzZT8ub24ocGMuRVZFTlRfTU9VU0VNT1ZFLCB0aGlzLl9vbk1vdXNlTW92ZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9uKHBjLkVWRU5UX01PVVNFV0hFRUwsIHRoaXMuX29uTW91c2VXaGVlbCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbignZGVzdHJveScsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9mZihwYy5FVkVOVF9NT1VTRU1PVkUsIHRoaXMuX29uTW91c2VNb3ZlLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2U/Lm9mZihwYy5FVkVOVF9NT1VTRVdIRUVMLCB0aGlzLl9vbk1vdXNlV2hlZWwsIHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uTW91c2VNb3ZlKGV2ZW50OiBwY3guTW91c2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMuX2xhc3RNb3VzZU1vdmVFdmVudCA9IGV2ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uTW91c2VXaGVlbChldmVudDogcGN4Lk1vdXNlRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSB0aGlzLl9icnVzaFNpemUgKyBldmVudC53aGVlbERlbHRhICogdGhpcy5fYnJ1c2hTaXplU3RlcDtcclxuICAgICAgICB0aGlzLl9icnVzaFNpemUgPSBNYXRoLm1pbihNYXRoLm1heChjYW5kaWRhdGUsIGJydXNoTWluU2l6ZSksIGJydXNoTWF4U2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZUtleWJvYXJkKCkge1xyXG4gICAgICAgIHRoaXMuYXBwLmtleWJvYXJkPy5vbihwYy5FVkVOVF9LRVlET1dOLCB0aGlzLl9vbktleWJvYXJkRG93biwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5hcHAua2V5Ym9hcmQ/Lm9uKHBjLkVWRU5UX0tFWVVQLCB0aGlzLl9vbktleWJvYXJkVXAsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMub24oJ2Rlc3Ryb3knLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLm1vdXNlPy5vZmYocGMuRVZFTlRfS0VZRE9XTiwgdGhpcy5fb25LZXlib2FyZERvd24sIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZT8ub2ZmKHBjLkVWRU5UX0tFWVVQLCB0aGlzLl9vbktleWJvYXJkVXAsIHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2tleUFkZExvY2sgPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfa2V5U3ViTG9jayA9IHRydWU7XHJcbiAgICBwcml2YXRlIF9vbktleWJvYXJkRG93bihldmVudDogcGN4LktleWJvYXJkRXZlbnQpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2tleUFkZExvY2sgPT09IGZhbHNlICYmIGV2ZW50LmtleSA9PT0gcGMuS0VZX0FERCkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXlBZGRMb2NrID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fYnJ1c2hPcGFjaXR5ID0gTWF0aC5tYXgodGhpcy5fYnJ1c2hPcGFjaXR5ICsgdGhpcy5fYnJ1c2hPcGFjaXR5U3RlcCwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fa2V5U3ViTG9jayA9PT0gZmFsc2UgJiYgZXZlbnQua2V5ID09PSBwYy5LRVlfU1VCVFJBQ1QpIHtcclxuICAgICAgICAgICAgdGhpcy5fa2V5U3ViTG9jayA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2JydXNoT3BhY2l0eSA9IE1hdGgubWluKHRoaXMuX2JydXNoT3BhY2l0eSAtIHRoaXMuX2JydXNoT3BhY2l0eVN0ZXAsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vbktleWJvYXJkVXAoZXZlbnQ6IHBjeC5LZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gcGMuS0VZX0FERCkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXlBZGRMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gcGMuS0VZX1NVQlRSQUNUKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tleVN1YkxvY2sgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBfdXBkYXRlSGVpZ2h0TWFwRnJvbUF0dHIoKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmhlaWdodE1hcC5maWxlKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVpZ2h0TWFwLmZpbGUucmVzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignSGVpZ2h0IG1hcCBmaWxlIHVuc2V0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5oZWlnaHRNYXAuZmlsZS5yZXNvdXJjZSBhcyBBcnJheUJ1ZmZlcjtcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3M6IElIZWlnaHRNYXBGaWxlSW1wb3J0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIGFkYXB0aXZlTWF4SGVpZ2h0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYWRhcHRpdmVXaWR0aEFuZERlcHRoOiB0cnVlLFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl90ZXJyYWluLmxvYWRIZWlnaHRNYXBGcm9tRmlsZShkYXRhLCBzZXR0aW5ncywgdGhpcy5oZWlnaHRNYXAuc21vb3RoRmFjdG9yLCB0aGlzLmhlaWdodE1hcC5zbW9vdGhSYWRpdXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSB0aGlzLmhlaWdodE1hcC50ZXh0dXJlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0hlaWdodCBtYXAgaW1hZ2UgdW5zZXQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc291cmNlID0gdGV4dHVyZS5yZXNvdXJjZSBhcyBwY3guVGV4dHVyZTtcclxuICAgICAgICAgICAgY29uc3QgaW1nID0gcmVzb3VyY2UuZ2V0U291cmNlKCkgYXMgYW55O1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpbWcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignSGVpZ2h0IG1hcCBpbWFnZSB1bnNldC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5sb2FkSGVpZ2h0TWFwRnJvbUltZyhpbWcsIHRoaXMuaGVpZ2h0TWFwLnNtb290aEZhY3RvciwgdGhpcy5oZWlnaHRNYXAuc21vb3RoUmFkaXVzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IGNsZWFyIGhlaWdodG1hcFxyXG4gICAgICAgICAgICByZXNvdXJjZS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9oZWlnaHRNYXBCdWZmZXIudXBkYXRlSGVpZ2h0TWFwKHsgbWluWDogMCwgbWF4WDogdGhpcy53aWR0aCwgbWluWjogMCwgbWF4WjogdGhpcy5kZXB0aCB9KTtcclxuICAgICAgICB0aGlzLl9zcGhlcmVzQnVmZmVyLnJlY2FsY3VsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fbWVzaEZhY3RvcnkudXBkYXRlQWFiYigpO1xyXG4gICAgICAgIHRoaXMuX3ZpZXdQYXRjaGVzUHJlcGFyZXIudXBkYXRlQWFiYigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NhdmVIZWlnaHRNYXBUb0ltZygpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBiYXNlNjQgPSB0aGlzLl90ZXJyYWluLmhlaWdodE1hcC50b0ltYWdlKCk7XHJcbiAgICAgICAgY29uc3QgaW1hZ2UgID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaW1hZ2Uuc3JjID0gYmFzZTY0O1xyXG5cclxuICAgICAgICBjb25zdCB3ID0gd2luZG93Lm9wZW4odW5kZWZpbmVkLCAnX2JsYW5rJykhO1xyXG4gICAgICAgIHcuZG9jdW1lbnQud3JpdGUoaW1hZ2Uub3V0ZXJIVE1MKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIF9zYXZlSGVpZ2h0TWFwVG9GaWxlKCkge1xyXG5cclxuICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgdGhpcy5fdGVycmFpbi5oZWlnaHRNYXAudG9GaWxlKCk7XHJcbiAgICAgICAgY29uc3QgYmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XHJcblxyXG4gICAgICAgIGEuaHJlZiAgICAgPSBibG9iVXJsO1xyXG4gICAgICAgIGEuZG93bmxvYWQgPSBgaG1fJHsrdGltZXN0YW1wfSR7aGVpZ2h0TWFwRXh0fWA7XHJcbiAgICAgICAgYS5jbGljaygpO1xyXG5cclxuICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVcmwpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcikge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY29sb3JQYWludGVyLnBhaW50aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbG9yUGFpbnRlci5zdG9wUGFpbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmF1dG9SZW5kZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFFbnRpdHkgJiZcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFFbnRpdHkuY2FtZXJhKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjYW1lcmEgPSB0aGlzLmNhbWVyYUVudGl0eS5jYW1lcmE7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdCAgICA9IHRoaXMuZW50aXR5LmdldFdvcmxkVHJhbnNmb3JtKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlICA9IG1hdC5nZXRTY2FsZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWF0ZXJpYWxDYW1lcmFQb3MoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0TW91c2VNb3ZlRXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgaGFzQ2hhbmdlcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuc2NyZWVuVG9Xb3JsZCh0aGlzLl9sYXN0TW91c2VNb3ZlRXZlbnQueCwgdGhpcy5fbGFzdE1vdXNlTW92ZUV2ZW50LnksIGNhbWVyYS5uZWFyQ2xpcCwgdGhpcy5fcmF5U3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgY2FtZXJhLnNjcmVlblRvV29ybGQodGhpcy5fbGFzdE1vdXNlTW92ZUV2ZW50LngsIHRoaXMuX2xhc3RNb3VzZU1vdmVFdmVudC55LCBjYW1lcmEuZmFyQ2xpcCwgdGhpcy5fcmF5RW5kKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yYXlEaXJlY3Rpb24uc3ViMih0aGlzLl9yYXlFbmQsIHRoaXMuX3JheVN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlUmF5ID0gIXRoaXMuX3JheS5vcmlnaW4uZXF1YWxzKHRoaXMuX3JheVN0YXJ0KSB8fCAhdGhpcy5fcmF5LmRpcmVjdGlvbi5lcXVhbHModGhpcy5fcmF5RGlyZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlUmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmF5LnNldCh0aGlzLl9yYXlTdGFydCwgdGhpcy5fcmF5RGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yYXljYXN0UmVzdWx0LmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW50ZXJzZWN0c1JheVJlc3VsdCA9IHRoaXMuX2hlaWdodEZpZWxkU2hhcGUuaW50ZXJzZWN0c1JheShtYXQsIHRoaXMuX3JheSwgdGhpcy5fcmF5Y2FzdFJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ludGVyc2VjdHNSYXlSZXN1bHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnJ1c2hTaXplWCA9IHRoaXMuX2JydXNoU2l6ZSAvIHNjYWxlLnggfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJydXNoU2l6ZVogPSB0aGlzLl9icnVzaFNpemUgLyBzY2FsZS56IHwgMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5wYXRjaFZlcnRpY2VzLmdldFBvc2l0aW9uKHRoaXMuX3JheWNhc3RSZXN1bHQudmVydGV4SW5kZXgsIHRlcnJhaW5Mb2NhbFZlcnRleFBvcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8ud2FzUHJlc3NlZChwYy5LRVlfSSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5fcmF5Y2FzdFJlc3VsdCwgdGhpcy5fbG9jYWxDYW1lcmFQb3NpdGlvbiwgdGVycmFpbkxvY2FsVmVydGV4UG9zKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRyYXdQb2ludCh7IGNlbnRlcjogdGhpcy5fcmF5Y2FzdFJlc3VsdC5wb2ludCwgcmFkaXVzOiB0aGlzLl9icnVzaFNpemUsIG51bVNlZ21lbnRzOiAxMCwgZGVwdGhUZXN0OiB0cnVlLCBjb2xvcjogcGMuQ29sb3IuR1JBWSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBkcmF3RGlyZWN0aW9uVmVjdG9yKHRoaXMuX3JheWNhc3RSZXN1bHQucG9pbnQsIHRoaXMuX3JheWNhc3RSZXN1bHQubm9ybWFsLCBwYy5Db2xvci5NQUdFTlRBKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fbG9jayA8IDEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAubW91c2U/LmlzUHJlc3NlZChwYy5NT1VTRUJVVFRPTl9MRUZUKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFpbnRpbmcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCAgID0gdGhpcy5fdGVycmFpbi53aWR0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXB0aCAgID0gdGhpcy5fdGVycmFpbi5kZXB0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4ICAgICAgID0gdGVycmFpbkxvY2FsVmVydGV4UG9zLnggLyB3aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgICAgICAgPSB0ZXJyYWluTG9jYWxWZXJ0ZXhQb3MueiAvIGRlcHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVXICA9IGJydXNoU2l6ZVggLyB3aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlSCAgPSBicnVzaFNpemVaIC8gZGVwdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29sb3JQYWludGVyLnN0YXJ0UGFpbnQoZHQsIHgsIHksIHNjYWxlVywgc2NhbGVIKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdmVyYWdlID0gKGJydXNoU2l6ZVggKyBicnVzaFNpemVaKSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXJYID0gdGVycmFpbkxvY2FsVmVydGV4UG9zLnggfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VudGVyWiA9IHRlcnJhaW5Mb2NhbFZlcnRleFBvcy56IHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHpvbmUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWDogY2VudGVyWCAtIGJydXNoU2l6ZVgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WDogY2VudGVyWCArIGJydXNoU2l6ZVggKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblo6IGNlbnRlclogLSBicnVzaFNpemVaLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFo6IGNlbnRlclogKyBicnVzaFNpemVaICsgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfQUxUKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RlcnJhaW4uc21vb3RoSGVpZ2h0c1pvbmUoem9uZSwgYXZlcmFnZSAqIHRoaXMuX2JydXNoT3BhY2l0eSAqIGR0IC8gMTAsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVnYXRpdmUgPSAhIXRoaXMuYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX0NPTlRST0wpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcGVuZFZhbHVlID0gKG5lZ2F0aXZlID8gLWF2ZXJhZ2UgOiBhdmVyYWdlKSAqIHRoaXMuX2JydXNoT3BhY2l0eSAqIGR0IC8gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5hcHBlbmRIZWlnaHRNYXAodGhpcy5fYnJ1c2hIZWlnaHRNYXAsIGFwcGVuZFZhbHVlLCB6b25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hcHAua2V5Ym9hcmQ/Lndhc1ByZXNzZWQocGMuS0VZX0kpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coem9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVycmFpbi5yZWNhbGN1bGF0ZU1pbk1heCh6b25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2hlaWdodE1hcEJ1ZmZlci51cGRhdGVIZWlnaHRNYXAoem9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zcGhlcmVzQnVmZmVyLnJlY2FsY3VsYXRlWm9uZSh6b25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0bXBNYXQuaW52ZXJ0KG1hdCk7XHJcbiAgICAgICAgICAgIHRtcE1hdC50cmFuc2Zvcm1Qb2ludChjYW1lcmEuZW50aXR5LmdldFBvc2l0aW9uKCksIHRoaXMuX2xvY2FsQ2FtZXJhUG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcGF0Y2hlc01hbmFnZXIudXBkYXRlTG9kcyh0aGlzLl9sb2NhbENhbWVyYVBvc2l0aW9uLCB0aGlzLmxvZEJ5WVBvcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhdGNoZXNNYW5hZ2VyLnVwZGF0ZShjYW1lcmEuZnJ1c3R1bSk7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBjb25zdCBzcGhlcmVzID0gdGhpcy5fc3BoZXJlc0J1ZmZlci5zcGhlcmVzO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwaGVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwaGVyZSA9IHNwaGVyZXNbaV07XHJcbiAgICAgICAgICAgICAgICBkcmF3UG9pbnQoeyBjZW50ZXI6IHNwaGVyZS5jZW50ZXIsIHJhZGl1czogc3BoZXJlLnJhZGl1cywgbnVtU2VnbWVudHM6IDEwLCBkZXB0aFRlc3Q6IGZhbHNlLCBjb2xvcjogcGMuQ29sb3IuWUVMTE9XIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vKi9cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8ud2FzUHJlc3NlZChwYy5LRVlfTCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fdmlld1BhdGNoZXNMb2RTdGF0ZS5wcmludExvZE1hcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkPy53YXNQcmVzc2VkKHBjLktFWV9QKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zYXZlSGVpZ2h0TWFwVG9JbWcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFwcC5rZXlib2FyZD8ud2FzUHJlc3NlZChwYy5LRVlfTykpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2F2ZUhlaWdodE1hcFRvRmlsZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGVidWdcclxuICAgICAgICAvLyB0aGlzLmFwcC5kcmF3VGV4dHVyZSggMC41LCAtMC42LCAtMC41LCAwLjMsIHRoaXMuaGVpZ2h0TWFwVGV4dHVyZSwgdW5kZWZpbmVkIGFzIGFueSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRlcnJhaW47XHJcbmV4cG9ydCBjb25zdCB0ZXJyYWluU2NyaXB0TmFtZSA9IFwiVGVycmFpblwiO1xyXG5leHBvcnQgY29uc3QgYmlnVGVycmFpbkVkaXRvclNjcmlwdE5hbWUgPSBcImJpZ1RlcnJhaW5FZGl0b3JcIjtcclxuXHJcbnBjLnJlZ2lzdGVyU2NyaXB0KFRlcnJhaW4sIHRlcnJhaW5TY3JpcHROYW1lKTtcclxucGMucmVnaXN0ZXJTY3JpcHQoVGVycmFpbiwgYmlnVGVycmFpbkVkaXRvclNjcmlwdE5hbWUpO1xyXG5cclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcInJlbmRlck1vZGVcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBlbnVtOiBtYXBUaXRsZUVudW0oUmVuZGVyTW9kZSksIGRlZmF1bHQ6IFJlbmRlck1vZGUuU3RhbmRhcmQsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicmVjZWl2ZVNoYWRvd1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImxvZEJ5WVBvc1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcInpGYXJcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA1MDAwLCBtaW46IDEsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCwgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJ3aWR0aFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGVudW06IGZpZWxkU2l6ZUVudW0sIGRlZmF1bHQ6IGZpZWxkU2l6ZUVudW1EZWZhdWx0LCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImRlcHRoXCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZW51bTogZmllbGRTaXplRW51bSwgZGVmYXVsdDogZmllbGRTaXplRW51bURlZmF1bHQsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicGF0Y2hTaXplXCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZW51bTogZmllbGRQYXRjaFNpemVFbnVtLCBkZWZhdWx0OiBmaWVsZFBhdGNoU2l6ZUVudW1EZWZhdWx0LCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImhlaWdodFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDEwLCBtaW46IDEsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwidmFsdWVUeXBlXCIsIHsgdHlwZTogXCJzdHJpbmdcIiwgZW51bTogZmllbGRIZWlnaHRWYWx1ZVR5cGVFbnVtLCBkZWZhdWx0OiBmaWVsZEhlaWdodFZhbHVlVHlwZURlZmF1bHQsIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwibGF5ZXJOYW1lXCIsIHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogJ1dvcmxkJywgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJwYWludExheWVyTmFtZVwiLCB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6ICdUZXJyYWluRWRpdG9yJywgfSk7XHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJjYW1lcmFFbnRpdHlcIiwgeyB0eXBlOiBcImVudGl0eVwiIH0pO1xyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiYXV0b1JlbmRlclwiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcInBhaW50aW5nXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlLCB9KTtcclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcIndpcmVmcmFtZVwiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiBmYWxzZSwgfSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiZGlyZWN0aW9uTGlnaHRTaGFkb3dTZXR0aW5nc1wiLCB7XHJcbiAgICB0eXBlOiBcImpzb25cIixcclxuICAgIGFycmF5OiB0cnVlLFxyXG4gICAgbWF4OiA0LFxyXG4gICAgc2NoZW1hOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcInpGYXJcIixcclxuICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogNTAwMCxcclxuICAgICAgICAgICAgbWluOiAxLFxyXG4gICAgICAgICAgICBzdGVwOiAxLFxyXG4gICAgICAgICAgICBwcmVjaXNpb246IDAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwibGF5ZXJOYW1lXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdXb3JsZFNoYWRvdycsIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcInZpc2libGVcIixcclxuICAgICAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59KTtcclxuXHJcblRlcnJhaW4uYXR0cmlidXRlcy5hZGQoXCJoZWlnaHRNYXBcIiwge1xyXG4gICAgdHlwZTogJ2pzb24nLFxyXG4gICAgc2NoZW1hOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnZmlsZScsXHJcbiAgICAgICAgICAgIHR5cGU6ICdhc3NldCcsXHJcbiAgICAgICAgICAgIGFzc2V0VHlwZTogJ2JpbmFyeScsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICd0ZXh0dXJlJyxcclxuICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxyXG4gICAgICAgICAgICBhc3NldFR5cGU6ICd0ZXh0dXJlJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogJ3Ntb290aEZhY3RvcicsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgXHJcbiAgICAgICAgICAgICAgICBUbyB3aGF0IGV4dGVudCBuZWlnaGJvcnMgaW5mbHVlbmNlIHRoZSBuZXcgaGVpZ2h0OlxyXG4gICAgICAgICAgICAgICAgVmFsdWUgb2YgMCB3aWxsIGlnbm9yZSBuZWlnaGJvcnMgKG5vIHNtb290aGluZykuXHJcbiAgICAgICAgICAgICAgICBWYWx1ZSBvZiAxIHdpbGwgaWdub3JlIHRoZSBub2RlIG9sZCBoZWlnaHQuXHJcbiAgICAgICAgICAgIGAsXHJcbiAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDEsXHJcbiAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgbWF4OiAxLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnc21vb3RoUmFkaXVzJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGBUaGUgcmFkaXVzIG9mIGZhY3RvciBzbW9vdGguYCxcclxuICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogMSxcclxuICAgICAgICAgICAgc3RlcDogMSxcclxuICAgICAgICAgICAgbWluOiAxLFxyXG4gICAgICAgIH1cclxuICAgIF1cclxufSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiYnJ1c2hcIiwge1xyXG4gICAgdHlwZTogXCJqc29uXCIsXHJcbiAgICBzY2hlbWE6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiYWN0aXZlXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBicnVzaCB0ZXh0dXJlIGluZGV4LlwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAwLFxyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIHN0ZXA6IDEsXHJcbiAgICAgICAgICAgIHByZWNpc2lvbjogMCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJzaXplXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBicnVzaCBzaXplXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDEwLFxyXG4gICAgICAgICAgICBtaW46IGJydXNoTWluU2l6ZSxcclxuICAgICAgICAgICAgbWF4OiBicnVzaE1heFNpemUsXHJcbiAgICAgICAgICAgIHN0ZXA6IDEsXHJcbiAgICAgICAgICAgIHByZWNpc2lvbjogMCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJvcGFjaXR5XCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBicnVzaCBvcGFjaXR5XCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDAuNSxcclxuICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICBtYXg6IDEsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwidGV4dHVyZXNcIixcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGJydXNoIHRleHR1cmVzXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcclxuICAgICAgICAgICAgYXNzZXRUeXBlOiAndGV4dHVyZScsXHJcbiAgICAgICAgICAgIGFycmF5OiB0cnVlLFxyXG4gICAgICAgIH1cclxuICAgIF1cclxufSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwiYWN0aXZlTGF5ZXJcIiwgeyB0eXBlOiAnbnVtYmVyJywgZGVmYXVsdDogMCwgbWluOiAwLCBtYXg6IDMyLCBzdGVwOiAxLCBwcmVjaXNpb246IDAsIH0pO1xyXG5cclxuVGVycmFpbi5hdHRyaWJ1dGVzLmFkZChcImxheWVyc1wiLCB7XHJcbiAgICB0eXBlOiBcImpzb25cIixcclxuICAgIGFycmF5OiB0cnVlLFxyXG4gICAgc2NoZW1hOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcIm5hbWVcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiTmFtZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcImRpZmZ1c2VcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiRGlmZnVzZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgIGFzc2V0VHlwZTogXCJ0ZXh0dXJlXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwibm9ybWFsTWFwXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIk5vcm1hbCBNYXBcIixcclxuICAgICAgICAgICAgdHlwZTogXCJhc3NldFwiLFxyXG4gICAgICAgICAgICBhc3NldFR5cGU6IFwidGV4dHVyZVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcInNpemVcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiU2l6ZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInZlYzJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogWzEsIDFdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwib2Zmc2V0XCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIk9mZnNldFwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInZlYzJcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogWzAsIDBdXHJcbiAgICAgICAgfSxcclxuICAgIF1cclxufSk7XHJcblxyXG5UZXJyYWluLmF0dHJpYnV0ZXMuYWRkKFwicGFpbnRlclNldHRpbmdzXCIsIHtcclxuICAgIHR5cGU6IFwianNvblwiLFxyXG4gICAgc2NoZW1hOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcInNwbGF0TWFwXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXNzZXRcIixcclxuICAgICAgICAgICAgYXNzZXRUeXBlOiBcInRleHR1cmVcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiU3BsYXQgTWFwXCIsXHJcbiAgICAgICAgfSxcclxuICAgIF1cclxufSk7IiwiaW1wb3J0IHR5cGUgeyBmbG9hdCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcbmltcG9ydCB7IGdldEhlaWdodE1hcEZvcm1hdCB9IGZyb20gXCIuLi9IZWlnaHRmaWVsZC9HUFVIZWlnaHRNYXBCdWZmZXIubWpzXCI7XHJcbmltcG9ydCB7IGdldEFsdGl0dWRlRnJvbVRleHR1cmVWU0NvZGUsIGdldFNhbXBsZXJUeXBlLCBnZXRBbHRpdHVkZUZyb21UZXh0dXJlQ2h1bmtzLCBoZWlnaHRNYXBQYXJhbU5hbWUsIGhlaWdodE1hcFNhbXBsZXIsIG1heEhlaWdodFBhcmFtTmFtZSB9IGZyb20gXCIuLi9IZWlnaHRmaWVsZC9TaGFkZXJDaHVua3MubWpzXCI7XHJcbmltcG9ydCBUZXJyYWluIGZyb20gXCIuLi9TY3JpcHRzL1RlcnJhaW4ubWpzXCI7XHJcblxyXG5jb25zdCBkZWZpbmVzID1cclxuYFxyXG4gICAgI2RlZmluZSBITV9OVU1fQ0hVTktTX1ggICAgICAgKCUlSE1fTlVNX0NIVU5LU19YJSUpXHJcbiAgICAjZGVmaW5lIEhNX05VTV9DSFVOS1NfWF9VICAgICAodWludChITV9OVU1fQ0hVTktTX1gpKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFICAgICAgICAgKCUlSE1fQ0hVTktfU0laRSUlKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFX0YgICAgICAgKGZsb2F0KEhNX0NIVU5LX1NJWkUpKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFX1UgICAgICAgKHVpbnQoSE1fQ0hVTktfU0laRSkpXHJcblxyXG4gICAgI2RlZmluZSBGSUVMRF9TSVpFICAgICAgICAgICAgKGl2ZWMyKCUlRklFTERfU0laRV9YJSUsICUlRklFTERfU0laRV9aJSUpKVxyXG4gICAgI2RlZmluZSBGSUVMRF9TSVpFX0YgICAgICAgICAgKHZlYzIoJSVGSUVMRF9TSVpFX1hfRiUlLCAlJUZJRUxEX1NJWkVfWl9GJSUpKVxyXG4gICAgI2RlZmluZSBGSUVMRF9TSVpFX0JPVU5EX0YgICAgKEZJRUxEX1NJWkVfRiAtIDIuMCkgICAgICBcclxuICAgICNkZWZpbmUgRklFTERfU0laRV9IX0YgICAgICAgIChGSUVMRF9TSVpFX0YgLyAyLjApXHJcblxyXG4gICAgI2RlZmluZSBHUkFTU19GSUVMRF9TSVpFX0YgICAgKHZlYzIoJSVHUkFTU19GSUVMRF9TSVpFX1glJSwgJSVHUkFTU19GSUVMRF9TSVpFX1olJSkpXHJcbiAgICAjZGVmaW5lIEdSQVNTX0ZJRUxEX1NJWkVfSF9GICAoR1JBU1NfRklFTERfU0laRV9GIC8gMi4wKVxyXG5gO1xyXG5cclxuY29uc3QgdW5pZm9ybXMgPSBcclxuYFxyXG4gICAgdW5pZm9ybSBmbG9hdCAke21heEhlaWdodFBhcmFtTmFtZX07XHJcbmA7XHJcblxyXG5jb25zdCBoZWlnaHRNYXBEZWNvZGVyID1cclxuYFxyXG4gICAgdXZlYzMgZ2V0RmllbGRDaHVua0J1ZmZlckNvb3JkKHZlYzIgblhaKSB7XHJcbiAgICAgICAgdXZlYzIgeHogPSB1dmVjMihjbGFtcChuWFosIHZlYzIoMC4wKSwgRklFTERfU0laRV9GKSk7XHJcbiAgICAgICAgdXZlYzIgY2sgPSB4eiAvIEhNX0NIVU5LX1NJWkVfVSwgbG9jYWwgPSB4eiAlIEhNX0NIVU5LX1NJWkVfVTtcclxuICAgICAgICByZXR1cm4gdXZlYzMobG9jYWwsIGNrLnkgKiBITV9OVU1fQ0hVTktTX1hfVSArIGNrLngpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmbG9hdCBnZXRBbHRpdHVkZSh2ZWMyIHh6KSB7XHJcbiAgICAgICAgdXZlYzMgY29vcmQgPSBnZXRGaWVsZENodW5rQnVmZmVyQ29vcmQoeHopO1xyXG4gICAgICAgIHJldHVybiBnZXRBbHRpdHVkZUZyb21UZXh0dXJlKGNvb3JkKTtcclxuICAgIH1cclxuXHJcbiAgICBmbG9hdCBnZXRBbHRpdHVkZUludGVycG9sYXRlZEFuZE5vcm1hbCh2ZWMyIHh6LCBvdXQgdmVjMyBzdXJmYWNlTm9ybWFsKSB7XHJcblxyXG4gICAgICAgIGZsb2F0IHgwejAgPSBnZXRBbHRpdHVkZSh4eik7XHJcbiAgICAgICAgZmxvYXQgeDF6MCA9IGdldEFsdGl0dWRlKHh6ICsgdmVjMigxLjAsIDAuMCkpO1xyXG4gICAgICAgIGZsb2F0IHgwejEgPSBnZXRBbHRpdHVkZSh4eiArIHZlYzIoMC4wLCAxLjApKTtcclxuICAgICAgICBmbG9hdCB4MXoxID0gZ2V0QWx0aXR1ZGUoeHogKyB2ZWMyKDEuMCwgMS4wKSk7XHJcblxyXG4gICAgICAgIGZsb2F0IGZhY3RvclggPSB4elswXSAtIGZsb29yKHh6WzBdKTtcclxuICAgICAgICBmbG9hdCBmYWN0b3JaID0geHpbMV0gLSBmbG9vcih4elsxXSk7XHJcblxyXG4gICAgICAgIGZsb2F0IGludGVycG9sYXRlZEJvdHRvbSA9ICh4MXowIC0geDB6MCkgKiBmYWN0b3JYICsgeDB6MDtcclxuICAgICAgICBmbG9hdCBpbnRlcnBvbGF0ZWRUb3AgICAgPSAoeDF6MSAtIHgwejEpICogZmFjdG9yWCArIHgwejE7XHJcbiAgICAgICAgZmxvYXQgZmluYWxIZWlnaHQgICAgICAgID0gKGludGVycG9sYXRlZFRvcCAtIGludGVycG9sYXRlZEJvdHRvbSkgKiBmYWN0b3JaICsgaW50ZXJwb2xhdGVkQm90dG9tO1xyXG5cclxuICAgICAgICBmbG9hdCBsZWZ0ICA9IHgxejA7XHJcbiAgICAgICAgZmxvYXQgcmlnaHQgPSBnZXRBbHRpdHVkZSh4eiArIHZlYzIoLTEuMCwgMCkpO1xyXG4gICAgICAgIGZsb2F0IHVwICAgID0geDB6MTtcclxuICAgICAgICBmbG9hdCBkb3duICA9IGdldEFsdGl0dWRlKHh6ICsgdmVjMigwLCAtMS4wKSk7XHJcblxyXG4gICAgICAgIHN1cmZhY2VOb3JtYWwgPSBub3JtYWxpemUodmVjMyhsZWZ0LCAyLjAsIGRvd24pIC0gdmVjMyhyaWdodCwgMC4wLCB1cCkpO1xyXG5cclxuICAgICAgICByZXR1cm4gZmluYWxIZWlnaHQ7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5jb25zdCB2c2hhZGVyID1cclxuYFxyXG4gICAgYXR0cmlidXRlIHZlYzIgdmVydGV4X3Bvc2l0aW9uO1xyXG5cclxuICAgIHVuaWZvcm0gdmVjMyB1Vmlld2VyUG9zaXRpb247XHJcbiAgICB1bmlmb3JtIHZlYzMgdVRlcnJhaW5TY2FsZTtcclxuXHJcbiAgICB2YXJ5aW5nIHZlYzIgdk9mZnNldDtcclxuXHJcbiAgICB2b2lkIG1haW4odm9pZClcclxuICAgIHtcclxuICAgICAgICBnbF9Qb3NpdGlvbiA9IHZlYzQodmVydGV4X3Bvc2l0aW9uLCAwLjUsIDEuMCk7XHJcblxyXG4gICAgICAgIHZPZmZzZXQgPSBmbG9vcih1Vmlld2VyUG9zaXRpb24ueHogLyB1VGVycmFpblNjYWxlLnh6KSArIEZJRUxEX1NJWkVfSF9GIC0gR1JBU1NfRklFTERfU0laRV9IX0Y7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5jb25zdCBmc2hhZGVyID1cclxuYFxyXG4gICAgdW5pZm9ybSB2ZWMzIHVUZXJyYWluU2NhbGU7XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZPZmZzZXQ7XHJcblxyXG4gICAgdmVjNCBwYWNrRmxvYXRGcm9tMFRvMVRvUkdCQShmbG9hdCB2YWx1ZSkge1xyXG4gICAgICAgIGZsb2F0IHIgPSBmbG9vcih2YWx1ZSAqIDI1NS4wKTtcclxuICAgICAgICBmbG9hdCBnID0gZmxvb3IoZnJhY3QodmFsdWUgKiAyNTUuMCkgKiAyNTUuMCk7XHJcbiAgICAgICAgZmxvYXQgYiA9IGZsb29yKGZyYWN0KHZhbHVlICogMjU1LjAgKiAyNTUuMCkgKiAyNTUuMCk7XHJcbiAgICAgICAgZmxvYXQgYSA9IGZsb29yKGZyYWN0KHZhbHVlICogMjU1LjAgKiAyNTUuMCAqIDI1NS4wKSAqIDI1NS4wKTtcclxuICAgICAgICByZXR1cm4gdmVjNChyLCBnLCBiLCBhKSAvIDI1NS4wO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2b2lkIG1haW4odm9pZCkge1xyXG5cclxuICAgICAgICB2ZWMyIHBpeGVsWFkgPSBnbF9GcmFnQ29vcmQueHk7XHJcbiAgICAgICAgdmVjMiBmaWVsZFBvaW50WFogPSB2T2Zmc2V0ICsgcGl4ZWxYWTtcclxuICAgICAgICB2ZWMzIGZpZWxkUG9pbnROb3JtYWw7XHJcblxyXG4gICAgICAgIGZsb2F0IGZpZWxkUG9pbnRBbHRpdHVkZSA9IGdldEFsdGl0dWRlSW50ZXJwb2xhdGVkQW5kTm9ybWFsKGZpZWxkUG9pbnRYWiwgZmllbGRQb2ludE5vcm1hbCk7XHJcbiAgICAgICAgZmxvYXQgZmllbGRQb2ludEZhY3RvciA9IGZpZWxkUG9pbnRBbHRpdHVkZSAvICR7bWF4SGVpZ2h0UGFyYW1OYW1lfTtcclxuXHJcbiAgICAgICAgcGNGcmFnQ29sb3IwID0gcGFja0Zsb2F0RnJvbTBUbzFUb1JHQkEoZmllbGRQb2ludEZhY3Rvcik7XHJcbiAgICAgICAgcGNGcmFnQ29sb3IxID0gdmVjNChmaWVsZFBvaW50Tm9ybWFsLCAxLjApO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3Jhc3NGaWVsZENvbXB1dGUge1xyXG5cclxuICAgIHByaXZhdGUgX3NoYWRlcjogcGN4LlNoYWRlcjtcclxuICAgIHByaXZhdGUgX2J1ZmZlckhtOiBwY3guVGV4dHVyZTtcclxuICAgIHByaXZhdGUgX2J1ZmZlck5tOiBwY3guVGV4dHVyZTtcclxuXHJcbiAgICBwcml2YXRlIF9yZW5kZXJUYXJnZXQ6IHBjeC5SZW5kZXJUYXJnZXQ7XHJcbiAgICBwcml2YXRlIF9xdWFkUmVuZGVyUGFzczogcGN4LlJlbmRlclBhc3NTaGFkZXJRdWFkO1xyXG4gICAgcHJpdmF0ZSBfdmlld3BvcnQ6IHBjeC5WZWM0O1xyXG5cclxuICAgIHB1YmxpYyByZWFkb25seSBhY2N1cmFjeSA9IDEuMDtcclxuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgc2l6ZTtcclxuICAgIHB1YmxpYyByZWFkb25seSBub3JtYWxpemVSYWRpdXM7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgcGF0Y2hSYWRpdXM7XHJcblxyXG4gICAgcHVibGljIGdldCBidWZmZXJIZWlnaHRNYXAoKSB7IHJldHVybiB0aGlzLl9idWZmZXJIbTsgfVxyXG4gICAgcHVibGljIGdldCBidWZmZXJOb3JtYWxNYXAoKSB7IHJldHVybiB0aGlzLl9idWZmZXJObTsgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Tm9ybWFsaXplUmFkaXVzKHJhZGl1czogZmxvYXQpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihyYWRpdXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UsXHJcbiAgICAgICAgcmVhZG9ubHkgcmFkaXVzOiBmbG9hdCxcclxuICAgICAgICByZWFkb25seSB0ZXJyYWluOiBUZXJyYWluXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLm5vcm1hbGl6ZVJhZGl1cyA9IEdyYXNzRmllbGRDb21wdXRlLmdldE5vcm1hbGl6ZVJhZGl1cyh0aGlzLnJhZGl1cyk7XHJcbiAgICAgICAgdGhpcy5wYXRjaFJhZGl1cyA9IHRoaXMubm9ybWFsaXplUmFkaXVzIC8gNTtcclxuXHJcbiAgICAgICAgLy8gQWRkIHBpeGVsIGZvciByZW5kZXIgZmFyIGJsYWRlIHBvcyBtb3JlIChyYWRpdXMgKyByYW5kVmFsdWUpXHJcbiAgICAgICAgdGhpcy5zaXplID0gdGhpcy5ub3JtYWxpemVSYWRpdXMgKiAyLjA7XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXRTaGFkZXIoKTtcclxuICAgICAgICB0aGlzLl9pbml0UmVuZGVyVGFyZ2V0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3ZpZXdwb3J0ID0gbmV3IHBjLlZlYzQoMCwgMCwgdGhpcy5zaXplICogdGhpcy5hY2N1cmFjeSwgdGhpcy5zaXplICogdGhpcy5hY2N1cmFjeSk7XHJcbiAgICAgICAgdGhpcy5fcXVhZFJlbmRlclBhc3MgPSBuZXcgcGMuUmVuZGVyUGFzc1NoYWRlclF1YWQodGhpcy5ncmFwaGljc0RldmljZSk7XHJcbiAgICAgICAgdGhpcy5fcXVhZFJlbmRlclBhc3Muc2hhZGVyID0gdGhpcy5fc2hhZGVyO1xyXG4gICAgICAgIHRoaXMuX3F1YWRSZW5kZXJQYXNzLmluaXQodGhpcy5fcmVuZGVyVGFyZ2V0KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fcXVhZFJlbmRlclBhc3M/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJUYXJnZXQ/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9idWZmZXJIbT8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX2J1ZmZlck5tPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fc2hhZGVyPy5kZXN0cm95KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShsb2NhbFBvc2l0aW9uOiBwY3guVmVjMykge1xyXG5cclxuICAgICAgICBjb25zdCBncmFwaGljc0RldmljZSA9IHRoaXMuZ3JhcGhpY3NEZXZpY2UgYXMgcGN4Lk51bGxHcmFwaGljc0RldmljZTtcclxuXHJcbiAgICAgICAgZ3JhcGhpY3NEZXZpY2Uuc2NvcGUucmVzb2x2ZShoZWlnaHRNYXBQYXJhbU5hbWUpLnNldFZhbHVlKHRoaXMudGVycmFpbi5oZWlnaHRNYXBUZXh0dXJlKTtcclxuICAgICAgICBncmFwaGljc0RldmljZS5zY29wZS5yZXNvbHZlKG1heEhlaWdodFBhcmFtTmFtZSkuc2V0VmFsdWUodGhpcy50ZXJyYWluLmhlaWdodCk7XHJcbiAgICAgICAgZ3JhcGhpY3NEZXZpY2Uuc2NvcGUucmVzb2x2ZSgndVZpZXdlclBvc2l0aW9uJykuc2V0VmFsdWUobG9jYWxQb3NpdGlvbi50b0FycmF5KCkpO1xyXG4gICAgICAgIGdyYXBoaWNzRGV2aWNlLnNjb3BlLnJlc29sdmUoJ3VUZXJyYWluU2NhbGUnKS5zZXRWYWx1ZSh0aGlzLnRlcnJhaW4uZW50aXR5LmdldFNjYWxlKCkudG9BcnJheSgpKTtcclxuXHJcbiAgICAgICAgLy8gYmFja3VwIGN1cnJlbnQgc2V0dGluZ3NcclxuICAgICAgICBjb25zdCB7IHZ4LCB2eSwgdncsIHZoLCBzeCwgc3ksIHN3LCBzaCB9ID0gZ3JhcGhpY3NEZXZpY2U7XHJcblxyXG4gICAgICAgIC8vIHNldCBuZXcgdmFsdWVzXHJcbiAgICAgICAgZ3JhcGhpY3NEZXZpY2Uuc2V0Vmlld3BvcnQodGhpcy5fdmlld3BvcnQueCwgdGhpcy5fdmlld3BvcnQueSwgdGhpcy5fdmlld3BvcnQueiwgdGhpcy5fdmlld3BvcnQudyk7XHJcbiAgICAgICAgZ3JhcGhpY3NEZXZpY2Uuc2V0U2Npc3Nvcih0aGlzLl92aWV3cG9ydC54LCB0aGlzLl92aWV3cG9ydC55LCB0aGlzLl92aWV3cG9ydC56LCB0aGlzLl92aWV3cG9ydC53KTtcclxuXHJcbiAgICAgICAgdGhpcy5fcXVhZFJlbmRlclBhc3MucmVuZGVyKCk7XHJcblxyXG4gICAgICAgIGdyYXBoaWNzRGV2aWNlLnNldFZpZXdwb3J0KHZ4LCB2eSwgdncsIHZoKTtcclxuICAgICAgICBncmFwaGljc0RldmljZS5zZXRTY2lzc29yKHN4LCBzeSwgc3csIHNoKTtcclxuXHJcbiAgICAgICAgLy8gZGVidWdcclxuICAgICAgICAvLyBwYyEuYXBwIS5kcmF3VGV4dHVyZSggMC41LCAtMC42LCAwLjUsIDAuMywgdGhpcy5fYnVmZmVyLCB1bmRlZmluZWQgYXMgYW55KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0U2hhZGVyKCkge1xyXG5cclxuICAgICAgICBjb25zdCBoZWlnaHRNYXAgPSB0aGlzLnRlcnJhaW4ub2JqZWN0LmhlaWdodE1hcDtcclxuICAgICAgICBjb25zdCBobUZvcm1hdCA9IGdldEhlaWdodE1hcEZvcm1hdCh0aGlzLmdyYXBoaWNzRGV2aWNlLCBoZWlnaHRNYXApO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodE1hcEZyYWdtZW50ID0gaGVpZ2h0TWFwU2FtcGxlci5yZXBsYWNlQWxsKCclJUhFSUdIVF9NQVBfU0FNUExFUiUlJywgZ2V0U2FtcGxlclR5cGUoaG1Gb3JtYXQpKTtcclxuICAgICAgICBjb25zdCBhbHRpdHVkZUZyb21UZXh0dXJlRnJhZ21lbnQgPSBnZXRBbHRpdHVkZUZyb21UZXh0dXJlVlNDb2RlKGhtRm9ybWF0LCBnZXRBbHRpdHVkZUZyb21UZXh0dXJlQ2h1bmtzKTtcclxuICAgICAgICBjb25zdCBkZWZpbmVzRnJhZ21lbnQgPSBkZWZpbmVzXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCclJUhNX05VTV9DSFVOS1NfWCUlJywgU3RyaW5nKGhlaWdodE1hcC5kYXRhTnVtQ2h1bmtzWCkpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCclJUhNX0NIVU5LX1NJWkUlJScsIFN0cmluZyhoZWlnaHRNYXAuZGF0YUNodW5rU2l6ZSkpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCclJUZJRUxEX1NJWkVfWCUlJywgU3RyaW5nKGhlaWdodE1hcC53aWR0aCkpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCclJUZJRUxEX1NJWkVfWiUlJywgU3RyaW5nKGhlaWdodE1hcC5kZXB0aCkpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCclJUZJRUxEX1NJWkVfWF9GJSUnLCBoZWlnaHRNYXAud2lkdGgudG9GaXhlZCgxKSlcclxuICAgICAgICAgICAgLnJlcGxhY2UoJyUlRklFTERfU0laRV9aX0YlJScsIGhlaWdodE1hcC5kZXB0aC50b0ZpeGVkKDEpKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgnJSVHUkFTU19GSUVMRF9TSVpFX1glJScsIFN0cmluZyh0aGlzLnNpemUpKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgnJSVHUkFTU19GSUVMRF9TSVpFX1olJScsIFN0cmluZyh0aGlzLnNpemUpKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB2ZXJ0ZXhTaGFkZXIgPSBkZWZpbmVzRnJhZ21lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgdnNoYWRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyID0gZGVmaW5lc0ZyYWdtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyB1bmlmb3Jtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgaGVpZ2h0TWFwRnJhZ21lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFsdGl0dWRlRnJvbVRleHR1cmVGcmFnbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgaGVpZ2h0TWFwRGVjb2RlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgZnNoYWRlcjtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9zaGFkZXIgPSBwYy5TaGFkZXJVdGlscy5jcmVhdGVTaGFkZXIodGhpcy5ncmFwaGljc0RldmljZSwge1xyXG4gICAgICAgICAgICB1bmlxdWVOYW1lOiBcIkdyYXNzRmllbGRDb21wdXRlU2hhZGVyXCIsXHJcbiAgICAgICAgICAgIHVzZVRyYW5zZm9ybUZlZWRiYWNrOiBmYWxzZSxcclxuICAgICAgICAgICAgdmVydGV4R0xTTDogdmVydGV4U2hhZGVyLFxyXG4gICAgICAgICAgICBmcmFnbWVudEdMU0w6IGZyYWdtZW50U2hhZGVyLFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhfcG9zaXRpb246IHBjLlNFTUFOVElDX1BPU0lUSU9OXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdEJ1ZmZlclRleHR1cmUobmFtZTogc3RyaW5nLCBmb3JtYXQ6IHR5cGVvZiBwYy5QSVhFTEZPUk1BVF9SR0JBOCB8IHR5cGVvZiBwYy5QSVhFTEZPUk1BVF9SMzJGID0gcGMuUElYRUxGT1JNQVRfUkdCQTgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBwYy5UZXh0dXJlKHRoaXMuZ3JhcGhpY3NEZXZpY2UsIHtcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgZm9ybWF0LFxyXG4gICAgICAgICAgICB3aWR0aDogdGhpcy5zaXplICogdGhpcy5hY2N1cmFjeSxcclxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLnNpemUgKiB0aGlzLmFjY3VyYWN5LFxyXG4gICAgICAgICAgICBtaXBtYXBzOiBmYWxzZSxcclxuICAgICAgICAgICAgc3RvcmFnZTogdHJ1ZSxcclxuICAgICAgICAgICAgdHlwZTogcGMuVEVYVFVSRVRZUEVfREVGQVVMVCxcclxuICAgICAgICAgICAgYWRkcmVzc1U6IHBjLkFERFJFU1NfQ0xBTVBfVE9fRURHRSxcclxuICAgICAgICAgICAgYWRkcmVzc1Y6IHBjLkFERFJFU1NfQ0xBTVBfVE9fRURHRSxcclxuICAgICAgICAgICAgbWluRmlsdGVyOiBwYy5GSUxURVJfTElORUFSX01JUE1BUF9MSU5FQVIsXHJcbiAgICAgICAgICAgIG1hZ0ZpbHRlcjogcGMuRklMVEVSX0xJTkVBUixcclxuICAgICAgICAgICAgZmxpcFk6ICF0aGlzLmdyYXBoaWNzRGV2aWNlLmlzV2ViR1BVXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdFJlbmRlclRhcmdldCgpIHtcclxuICAgICAgICB0aGlzLl9idWZmZXJIbSA9IHRoaXMuX2luaXRCdWZmZXJUZXh0dXJlKCdHcmFzc0J1ZmZlckhNJyk7XHJcbiAgICAgICAgdGhpcy5fYnVmZmVyTm0gPSB0aGlzLl9pbml0QnVmZmVyVGV4dHVyZSgnR3Jhc3NCdWZmZXJOTScpO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlclRhcmdldCA9IG5ldyBwYy5SZW5kZXJUYXJnZXQoe1xyXG4gICAgICAgICAgICBjb2xvckJ1ZmZlcnM6IFt0aGlzLl9idWZmZXJIbSwgdGhpcy5fYnVmZmVyTm1dLFxyXG4gICAgICAgICAgICBmbGlwWTogIXRoaXMuZ3JhcGhpY3NEZXZpY2UuaXNXZWJHUFUsXHJcbiAgICAgICAgICAgIHN0ZW5jaWw6IGZhbHNlLFxyXG4gICAgICAgICAgICBkZXB0aDogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IGludCB9IGZyb20gXCIuLi9FeHRyYXMvVHlwZXMubWpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR3Jhc3NGaWVsZERhdGEge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTUFYX0NIQU5FTCA9IDg7XHJcblxyXG4gICAgcHJpdmF0ZSBfdGV4dHVyZTogcGN4LlRleHR1cmU7XHJcbiAgICBwcml2YXRlIF9idWZmZXI6IFVpbnQ4QXJyYXk7XHJcbiAgICBwcml2YXRlIF93aWR0aDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfZGVwdGg6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRleHR1cmUoKSB7IHJldHVybiB0aGlzLl90ZXh0dXJlOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSwgd2lkdGg6IG51bWJlciwgZGVwdGg6IG51bWJlciwgYnVmZmVyPzogVWludDhBcnJheSkge1xyXG5cclxuICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuX2RlcHRoID0gZGVwdGg7XHJcblxyXG4gICAgICAgIGNvbnN0IHcgPSAod2lkdGggLSAxKSAvIDQgKyAxO1xyXG4gICAgICAgIGNvbnN0IGQgPSAoZGVwdGggLSAxKSAvIDQgKyAxO1xyXG5cclxuICAgICAgICB0aGlzLl9idWZmZXIgPSBidWZmZXIgPz8gbmV3IFVpbnQ4QXJyYXkodyAqIGQgKiA0KTtcclxuICAgICAgICB0aGlzLl90ZXh0dXJlID0gbmV3IHBjLlRleHR1cmUoZ3JhcGhpY3NEZXZpY2UsIHtcclxuICAgICAgICAgICAgd2lkdGg6IHcsXHJcbiAgICAgICAgICAgIGhlaWdodDogZCxcclxuICAgICAgICAgICAgZm9ybWF0OiBwYy5QSVhFTEZPUk1BVF9SR0JBOFUsXHJcbiAgICAgICAgICAgIG1pcG1hcHM6IGZhbHNlLFxyXG4gICAgICAgICAgICBtaW5GaWx0ZXI6IHBjLkZJTFRFUl9ORUFSRVNULFxyXG4gICAgICAgICAgICBtYWdGaWx0ZXI6IHBjLkZJTFRFUl9ORUFSRVNULFxyXG4gICAgICAgICAgICBhZGRyZXNzVTogcGMuQUREUkVTU19DTEFNUF9UT19FREdFLFxyXG4gICAgICAgICAgICBhZGRyZXNzVjogcGMuQUREUkVTU19DTEFNUF9UT19FREdFLFxyXG4gICAgICAgICAgICBmbGlwWTogIWdyYXBoaWNzRGV2aWNlLmlzV2ViR1BVLFxyXG4gICAgICAgICAgICBsZXZlbHM6IFt0aGlzLl9idWZmZXJdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fdGV4dHVyZT8uZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRDaGFubmVsKHg6IGludCwgejogaW50LCBjaGFubmVsOiBpbnQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9ICh4ICsgeiAqIHRoaXMuX3dpZHRoKSAvIDQgfCAwO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fYnVmZmVyW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UGl4ZWwoKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl90ZXh0dXJlKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLl90ZXh0dXJlLmRldmljZTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUNodW5rU2l6ZSA9IDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRldmljZS5pc1dlYkdMMikge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsID0gKGRldmljZSBhcyBwY3guV2ViZ2xHcmFwaGljc0RldmljZSkuZ2w7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlRm9ybWF0ID0gdGhpcy5fdGV4dHVyZS5pbXBsLl9nbEZvcm1hdDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmVQaXhlbFQgPSB0aGlzLl90ZXh0dXJlLmltcGwuX2dsUGl4ZWxUeXBlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZVRhcmdldCA9IHRoaXMuX3RleHR1cmUuaW1wbC5fZ2xUYXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlT2JqZWN0ID0gdGhpcy5fdGV4dHVyZS5pbXBsLl9nbFRleHR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUodGV4dHVyZVRhcmdldCwgdGV4dHVyZU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBnbC50ZXhTdWJJbWFnZTNEKGdsLlRFWFRVUkVfMkRfQVJSQVksIDAsIDAsIDAsIDAsIGRhdGFDaHVua1NpemUsIGRhdGFDaHVua1NpemUsIDEsIHRleHR1cmVGb3JtYXQsIHRleHR1cmVQaXhlbFQsIGJ1ZmZlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGV2aWNlLmlzV2ViR1BVKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2ViZ3B1ICA9IChkZXZpY2UgYXMgYW55KS53Z3B1IGFzIEdQVURldmljZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSAodGhpcy5fdGV4dHVyZS5pbXBsLmdwdVRleHR1cmUpIGFzIEdQVVRleHR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgd2ViZ3B1LnF1ZXVlLndyaXRlVGV4dHVyZShcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogWzAsIDAsIDBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaXBMZXZlbDogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlc1BlclJvdzogNCAqIGRhdGFDaHVua1NpemUsIC8vIGFsd2F5cyA0IGZvciByZ2JhIGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzUGVySW1hZ2U6IGRhdGFDaHVua1NpemVcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGRhdGFDaHVua1NpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogZGF0YUNodW5rU2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBnZXRTYW1wbGVyVHlwZSwgaGVpZ2h0TWFwU2FtcGxlciwgbWF4SGVpZ2h0UGFyYW1OYW1lIH0gZnJvbSBcIi4uL0hlaWdodGZpZWxkL1NoYWRlckNodW5rcy5tanNcIjtcclxuaW1wb3J0IHsgVEhlaWdodE1hcEZvcm1hdCB9IGZyb20gXCIuLi9Db3JlL0Fic0hlaWdodE1hcC5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCB2aW5kZXhBdHRyTmFtZSA9IFwidmVydGV4X3Bvc2l0aW9uXCI7XHJcbmV4cG9ydCBjb25zdCBvZmZzZXRBdHRyTmFtZSA9IFwidmVydGV4X29mZnNldFwiO1xyXG5leHBvcnQgY29uc3Qgc2hhcGVBdHRyTmFtZSAgPSBcInZlcnRleF9zaGFwZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRpbWVQYXJhbU5hbWUgICAgICAgICAgICA9IFwidVRpbWVcIjtcclxuZXhwb3J0IGNvbnN0IGZpZWxkU2NhbGVQYXJhbU5hbWUgICAgICA9IFwidUZpZWxkU2NhbGVcIjtcclxuZXhwb3J0IGNvbnN0IGxvZDFPZmZzZXRYWlBhcmFtTmFtZSAgICA9IFwidUxvZDFPZmZzZXRYWlwiO1xyXG5leHBvcnQgY29uc3QgbG9kMk9mZnNldFhaUGFyYW1OYW1lICAgID0gXCJ1TG9kMk9mZnNldFhaXCI7XHJcbmV4cG9ydCBjb25zdCBkcmF3UG9zUGFyYW1OYW1lICAgICAgICAgPSBcInVEcmF3UG9zaXRpb25cIjtcclxuZXhwb3J0IGNvbnN0IHdpbmRJbnRlbnNpdHlQYXJhbU5hbWUgICA9IFwidVdpbmRJbnRlbnNpdHlcIjtcclxuZXhwb3J0IGNvbnN0IGNpcmNsZVNtb290aGluZ1BhcmFtTmFtZSA9IFwidUNpcmNsZVNtb290aGluZ1wiO1xyXG5leHBvcnQgY29uc3QgbWF4U2xvcGVGYWN0b3JQYXJhbU5hbWUgID0gXCJ1TWF4U2xvcGVGYWN0b3JcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnN0YW5jaW5nVlMgPSBgYDtcclxuZXhwb3J0IGNvbnN0IHRyYW5zZm9ybUluc3RhbmNpbmdWUyA9IGBgO1xyXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtRGVjbFZTID0gYGA7XHJcblxyXG5leHBvcnQgY29uc3QgZGVmaW5lc1ZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgI2RlZmluZSBITV9OVU1fQ0hVTktTX1ggICAgICAgKCUlSE1fTlVNX0NIVU5LU19YJSUpXHJcbiAgICAjZGVmaW5lIEhNX05VTV9DSFVOS1NfWF9VICAgICAodWludChITV9OVU1fQ0hVTktTX1gpKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFICAgICAgICAgKCUlSE1fQ0hVTktfU0laRSUlKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFX0YgICAgICAgKGZsb2F0KEhNX0NIVU5LX1NJWkUpKVxyXG4gICAgI2RlZmluZSBITV9DSFVOS19TSVpFX1UgICAgICAgKHVpbnQoSE1fQ0hVTktfU0laRSkpXHJcblxyXG4gICAgI2RlZmluZSBGSUVMRF9TSVpFICAgICAgICAgICAgKGl2ZWMyKCUlRklFTERfU0laRV9YJSUsICUlRklFTERfU0laRV9aJSUpKVxyXG4gICAgI2RlZmluZSBGSUVMRF9TSVpFX0YgICAgICAgICAgKHZlYzIoJSVGSUVMRF9TSVpFX1hfRiUlLCAlJUZJRUxEX1NJWkVfWl9GJSUpKVxyXG4gICAgI2RlZmluZSBGSUVMRF9TSVpFX0JPVU5EX0YgICAgKEZJRUxEX1NJWkVfRiAtIDIuMCkgICAgICBcclxuICAgICNkZWZpbmUgRklFTERfU0laRV9IX0YgICAgICAgIChGSUVMRF9TSVpFX0YgLyAyLjApXHJcbiAgICAjZGVmaW5lIEZJRUxEX1NJWkVfSF9OX0YgICAgICAoLUZJRUxEX1NJWkVfSF9GKVxyXG5cclxuICAgICNkZWZpbmUgR1JBU1NfRklFTERfUkFESVVTICAgICAgKCUlR1JBU1NfRklFTERfUkFESVVTJSUpXHJcbiAgICAjZGVmaW5lIEdSQVNTX0ZJRUxEX1NJWkVfRiAgICAgIChHUkFTU19GSUVMRF9SQURJVVMgKiAyLjApXHJcbiAgICAjZGVmaW5lIEdSQVNTX1BBVENIX1NJWkVfRiAgICAgIChHUkFTU19GSUVMRF9SQURJVVMgLyAyLjUpXHJcbiAgICAjZGVmaW5lIEdSQVNTX0hBTEZfUEFUQ0hfU0laRV9GIChHUkFTU19GSUVMRF9SQURJVVMgLyA1LjApXHJcbiAgICAjZGVmaW5lIEdSQVNTX0ZJRUxEX1NJWkUgICAgICAgICh2ZWMyKEdSQVNTX0ZJRUxEX1NJWkVfRikpXHJcblxyXG4gICAgI2RlZmluZSBNQVhfWklOSVRfRElTVEFOQ0UgKDMwMC4wKVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmluZXNCbGFkZVZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgI2RlZmluZSBTSURFX0NPVU5UICAgICAgICAgICAgICglJVNJREVfQ09VTlQlJSkgLy8gIyBibGFkZSBzaWRlIGNvdW50IFsxIG9yIDJdXHJcblxyXG4gICAgI2RlZmluZSBMT0QwX0JMQURFX1NFR1MgICAgICAgICglJUxPRDBfQkxBREVfU0VHUyUlKSAvLyAjIG9mIGJsYWRlIHNlZ21lbnRzIGxvZCAwXHJcbiAgICAjZGVmaW5lIExPRDFfQkxBREVfU0VHUyAgICAgICAgKCUlTE9EMV9CTEFERV9TRUdTJSUpIC8vICMgb2YgYmxhZGUgc2VnbWVudHMgbG9kIDFcclxuICAgICNkZWZpbmUgTE9EMl9CTEFERV9TRUdTICAgICAgICAoJSVMT0QyX0JMQURFX1NFR1MlJSkgLy8gIyBvZiBibGFkZSBzZWdtZW50cyBsb2QgMlxyXG5cclxuICAgICNkZWZpbmUgTE9EMF9CTEFERV9ESVZTICAgICAgICAoTE9EMF9CTEFERV9TRUdTICsgMS4wKSAgLy8gIyBvZiBkaXZpc2lvbnNcclxuICAgICNkZWZpbmUgTE9EMF9CTEFERV9WRVJUUyAgICAgICAoTE9EMF9CTEFERV9ESVZTICogMi4wKSAgLy8gIyBvZiB2ZXJ0aWNlcyAocGVyIHNpZGUsIHNvIDEvMiB0b3RhbClcclxuICAgICNkZWZpbmUgTE9EMF9CTEFERV9WRVJUU19DT1VOVCAoTE9EMF9CTEFERV9WRVJUUyAqIFNJREVfQ09VTlQpIC8vICMgb2YgdmVydGljZXNcclxuXHJcbiAgICAjZGVmaW5lIExPRDFfQkxBREVfRElWUyAgICAgICAgKExPRDFfQkxBREVfU0VHUyA+IDAuMCA/IExPRDFfQkxBREVfU0VHUyArIDEuMCA6IDAuMCkgLy8gIyBvZiBkaXZpc2lvbnNcclxuICAgICNkZWZpbmUgTE9EMV9CTEFERV9WRVJUUyAgICAgICAoTE9EMV9CTEFERV9ESVZTICogMi4wKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAjIG9mIHZlcnRpY2VzIChwZXIgc2lkZSwgc28gMS8yIHRvdGFsKVxyXG4gICAgI2RlZmluZSBMT0QxX0JMQURFX1ZFUlRTX0NPVU5UIChMT0QxX0JMQURFX1ZFUlRTICogU0lERV9DT1VOVCkgICAgICAgICAgICAgICAgICAgICAgIC8vICMgb2YgdmVydGljZXNcclxuXHJcbiAgICAjZGVmaW5lIExPRDJfQkxBREVfRElWUyAgICAgICAgKExPRDJfQkxBREVfU0VHUyA+IDAuMCA/IExPRDJfQkxBREVfU0VHUyArIDEuMCA6IDAuMCkgLy8gIyBvZiBkaXZpc2lvbnNcclxuICAgICNkZWZpbmUgTE9EMl9CTEFERV9WRVJUUyAgICAgICAoTE9EMl9CTEFERV9ESVZTICogMi4wKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAjIG9mIHZlcnRpY2VzIChwZXIgc2lkZSwgc28gMS8yIHRvdGFsKVxyXG4gICAgI2RlZmluZSBMT0QyX0JMQURFX1ZFUlRTX0NPVU5UIChMT0QyX0JMQURFX1ZFUlRTICogU0lERV9DT1VOVCkgICAgICAgICAgICAgICAgICAgICAgIC8vICMgb2YgdmVydGljZXNcclxuICAgIFxyXG4gICAgI2RlZmluZSBMT0QyX0JMQURFX1ZFUlRTX0FMTF9DT1VOVCAoTE9EMl9CTEFERV9WRVJUU19DT1VOVCAqIDE2LjApIC8vICMgb2YgdmVydGljZXMgYWxsIGZyYWdtZW50cyBmb3IgTE9EMlxyXG5cclxuICAgICNkZWZpbmUgTE9EMF9HUkFTU19QQVRDSF9DRU5URVJfT0ZGU0VUICAgKHZlYzIoR1JBU1NfSEFMRl9QQVRDSF9TSVpFX0YpKSAvLyBvZmZzZXQgZm9yIGxvZDAgcGF0Y2ggc3RhcnRcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBub3JtYWxDb3JlVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICAvLyBGSVg6IHZlcnRleF9ub3JtYWwgdW5kZWNsYXJhdGlvblxyXG4gICAgdmVjMyB2ZXJ0ZXhfbm9ybWFsO1xyXG5cclxuICAgIHZlYzMgZ2V0TG9jYWxOb3JtYWwodmVjMyB2ZXJ0ZXhOb3JtYWwpIHtcclxuXHJcbiAgICAgICAgLy8gU2V0IGRlZmF1bHQgc2hhZGVyIG5vcm1hbFxyXG4gICAgICAgIHZlcnRleF9ub3JtYWwgPSBkVmVydGV4Tm9ybWFsO1xyXG5cclxuICAgICAgICByZXR1cm4gZFZlcnRleE5vcm1hbDtcclxuICAgIH1cclxuXHJcbiAgICBtYXQzIGdldE5vcm1hbE1hdHJpeChtYXQ0IG1vZGVsTWF0cml4KSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeF9ub3JtYWw7XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGdldFdvcmxkUG9zaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGRQb3NpdGlvblc7XHJcbiAgICB9XHJcblxyXG4gICAgbWF0NCBnZXRNb2RlbE1hdHJpeCgpIHtcclxuICAgICAgICByZXR1cm4gbWF0cml4X21vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIHZlYzQgZ2V0UG9zaXRpb24oKSB7XHJcblxyXG4gICAgICAgIGRlY29kZUJsYWRlKCk7XHJcbiAgICAgICAgY2FsY3VsYXRlQmxhZGVWZXJ0ZXgoKTtcclxuXHJcbiAgICAgICAgZE1vZGVsTWF0cml4ID0gZ2V0TW9kZWxNYXRyaXgoKTtcclxuXHJcbiAgICAgICAgdmVjNCBwb3NXICAgICAgPSBkTW9kZWxNYXRyaXggKiB2ZWM0KGRWZXJ0ZXhQb3NpdGlvbiwgMS4wKTtcclxuICAgICAgICB2ZWM0IHNjcmVlblBvcyA9IG1hdHJpeF92aWV3UHJvamVjdGlvbiAqIHBvc1c7XHJcblxyXG4gICAgICAgIGRQb3NpdGlvblcgPSBwb3NXLnh5ejtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNjcmVlblBvcztcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBub3JtYWxWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZlYzMgZ2V0Tm9ybWFsKCkge1xyXG4gICAgICAgIGROb3JtYWxNYXRyaXggPSBtYXRyaXhfbm9ybWFsO1xyXG4gICAgICAgIHJldHVybiBub3JtYWxpemUoZE5vcm1hbE1hdHJpeCAqIGRWZXJ0ZXhOb3JtYWwpO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IHV2MFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgdmVjMiBnZXRVdjAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlYzIoZEVkZ2VPZkJsYWRlLCBkRGl2VmVydGV4SW5kZXggKiAyLjApO1xyXG4gICAgfVxyXG5gO1xyXG5cclxuLy8gYnVnIHdpdGggZ2V0VXYwXHJcbmV4cG9ydCBjb25zdCBzdGFydFV2MFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYCAgICBcclxuICAgIHZlYzIgZ2V0VXYwKCkge1xyXG4gICAgICAgIHJldHVybiB2ZWMyKGRFZGdlT2ZCbGFkZSwgZERpdlZlcnRleEluZGV4ICogMi4wKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBiYXNlVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB1bmlmb3JtIG1hdDQgbWF0cml4X3ZpZXdQcm9qZWN0aW9uO1xyXG4gICAgdW5pZm9ybSBtYXQ0IG1hdHJpeF9tb2RlbDtcclxuICAgIHVuaWZvcm0gbWF0MyBtYXRyaXhfbm9ybWFsO1xyXG5cclxuICAgIHVuaWZvcm0gaGlnaHAgdXNhbXBsZXIyRCB1RGF0YU1hcDtcclxuICAgIHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHVDb21wdXRlSE1EYXRhO1xyXG4gICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdUNvbXB1dGVOTURhdGE7XHJcblxyXG4gICAgdW5pZm9ybSB2ZWMzICAke2ZpZWxkU2NhbGVQYXJhbU5hbWV9O1xyXG4gICAgdW5pZm9ybSBmbG9hdCAke21heEhlaWdodFBhcmFtTmFtZX07XHJcblxyXG4gICAgdW5pZm9ybSB2ZWMzICAke2RyYXdQb3NQYXJhbU5hbWV9OyAgICAgICAvLyBjZW50cmUgb2Ygd2hlcmUgd2Ugd2FudCB0byBkcmF3XHJcbiAgICB1bmlmb3JtIGZsb2F0ICR7dGltZVBhcmFtTmFtZX07ICAgICAgICAgIC8vIHVzZWQgdG8gYW5pbWF0ZSBibGFkZXNcclxuICAgIHVuaWZvcm0gZmxvYXQgJHt3aW5kSW50ZW5zaXR5UGFyYW1OYW1lfTtcclxuICAgIHVuaWZvcm0gZmxvYXQgJHtjaXJjbGVTbW9vdGhpbmdQYXJhbU5hbWV9O1xyXG4gICAgdW5pZm9ybSBmbG9hdCAke21heFNsb3BlRmFjdG9yUGFyYW1OYW1lfTtcclxuXHJcbiAgICB1bmlmb3JtIHZlYzIgJHtsb2QxT2Zmc2V0WFpQYXJhbU5hbWV9WzhdOyAgLy8gY2VudGVyIG9mZnNldCBmcm9tIGRyYXcgcG9zIGxvZCAxXHJcbiAgICB1bmlmb3JtIHZlYzIgJHtsb2QyT2Zmc2V0WFpQYXJhbU5hbWV9WzE2XTsgLy8gY2VudGVyIG9mZnNldCBmcm9tIGRyYXcgcG9zIGxvZCAyXHJcblxyXG4gICAgYXR0cmlidXRlIGZsb2F0ICR7dmluZGV4QXR0ck5hbWV9O1xyXG4gICAgYXR0cmlidXRlIHZlYzQgJHtvZmZzZXRBdHRyTmFtZX07XHJcbiAgICBhdHRyaWJ1dGUgdmVjNCAke3NoYXBlQXR0ck5hbWV9O1xyXG5cclxuICAgIGZsb2F0IGRWZXJ0ZXhJbmRleDsgICAgICAgICAgIC8vIHZlcnRleCBpbmRleCBmb3IgdGhpcyBzaWRlIG9mIHRoZSBibGFkZVxyXG4gICAgZmxvYXQgZERpdlZlcnRleEluZGV4OyAgICAgICAgLy8gZGl2IGluZGV4ICgwIC4uIEJMQURFX0RJVlMpXHJcbiAgICBmbG9hdCBkUGVyY2VudE9mQmxhZGVIZWlnaHQ7ICAvLyBwZXJjZW50IG9mIGhlaWdodCBvZiBibGFkZSB0aGlzIHZlcnRleCBpcyBhdFxyXG4gICAgZmxvYXQgZFNpZGVPZkJsYWRlOyAgICAgICAgICAgLy8gZnJvbnQvYmFjayBzaWRlIG9mIGJsYWRlXHJcbiAgICBmbG9hdCBkRWRnZU9mQmxhZGU7ICAgICAgICAgICAvLyBsZWZ0L3JpZ2h0IGVkZ2UgKHg9MCBvciB4PTEpXHJcbiAgICB2ZWMyIGRCbGFkZUZpZWxkWFpQb3M7ICAgICAgICAvLyBibGFkZSB4eiBwb3NpdGlvbiBvbiBmaWVsZFxyXG4gICAgdmVjMyBkVmVydGV4UG9zaXRpb247ICAgICAgICAgLy8gdmVydGV4IHBvc2l0aW9uIC0gc3RhcnQgd2l0aCAyRCBzaGFwZSwgbm8gYmVuZCBhcHBsaWVkXHJcbiAgICB2ZWMzIGRWZXJ0ZXhOb3JtYWw7ICAgICAgICAgICAvLyB2ZXJ0ZXggbm9ybWFsXHJcbiAgICB2ZWMyIGRHcmFzc1BhdGNoT2Zmc2V0WFo7ICAgICAvLyBncmFzcyBwYXRjaCBjZW50ZXJcclxuICAgIHZlYzMgZEZpZWxkU3VyZmFjZU5vcm1hbDsgICAgIC8vIGZpZWxkIHN1cmZhY2Ugbm9ybWFsXHJcbiAgICBmbG9hdCBkRmllbGRTdXJmYWNlQWx0aXR1ZGU7ICAvLyBmaWVsZCBzdXJmYWNlIGFsdGl0dWRlXHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgYmFzZUNsZWFyU3ViVlMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB2ZWMzIGRQb3NpdGlvblc7XHJcbiAgICBtYXQ0IGRNb2RlbE1hdHJpeDtcclxuICAgIG1hdDMgZE5vcm1hbE1hdHJpeDtcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBibGFkZURlY29kZXJWUyA9IC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIHZvaWQgZGVjb2RlQmxhZGUoKSB7XHJcblxyXG4jaWYgZGVmaW5lZChVU0VfTE9EMilcclxuXHJcbiAgICAgICAgZmxvYXQgbm5WaSA9ICR7dmluZGV4QXR0ck5hbWV9IC0gTE9EMl9CTEFERV9WRVJUU19BTExfQ09VTlQ7XHJcblxyXG4gICAgICAgIGlmIChublZpIDwgMC4wKSB7XHJcblxyXG4gICAgICAgICAgICBmbG9hdCBsb2QyblZpICA9IG1vZCgke3ZpbmRleEF0dHJOYW1lfSwgTE9EMl9CTEFERV9WRVJUU19DT1VOVCk7XHJcbiAgICAgICAgICAgIGludCBwYXRjaEluZGV4ID0gaW50KCR7dmluZGV4QXR0ck5hbWV9IC8gTE9EMl9CTEFERV9WRVJUU19DT1VOVCk7XHJcblxyXG4gICAgICAgICAgICBkVmVydGV4SW5kZXggICAgICAgICAgPSBtb2QobG9kMm5WaSwgTE9EMl9CTEFERV9WRVJUUyk7XHJcbiAgICAgICAgICAgIGREaXZWZXJ0ZXhJbmRleCAgICAgICA9IGZsb29yKGRWZXJ0ZXhJbmRleCAvIDIuMCk7XHJcbiAgICAgICAgICAgIGRQZXJjZW50T2ZCbGFkZUhlaWdodCA9IGREaXZWZXJ0ZXhJbmRleCAvIExPRDJfQkxBREVfU0VHUztcclxuICAgICAgICAgICAgZFNpZGVPZkJsYWRlICAgICAgICAgID0gZmxvb3IobG9kMm5WaSAvIExPRDJfQkxBREVfVkVSVFMpO1xyXG5cclxuICAgICAgICAgICAgZEdyYXNzUGF0Y2hPZmZzZXRYWiA9ICR7bG9kMk9mZnNldFhaUGFyYW1OYW1lfVtwYXRjaEluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiNlbHNlXHJcblxyXG4gICAgICAgIGZsb2F0IG5uVmkgPSAke3ZpbmRleEF0dHJOYW1lfTtcclxuXHJcbiNlbmRpZlxyXG5cclxuI2lmIGRlZmluZWQoVVNFX0xPRDEpXHJcblxyXG4gICAgICAgICAgICBpZiAobm5WaSA8IExPRDBfQkxBREVfVkVSVFNfQ09VTlQpIHtcclxuXHJcbiNlbmRpZlxyXG4gICAgICAgICAgICAgICAgZFZlcnRleEluZGV4ICAgICAgICAgID0gbW9kKG5uVmksIExPRDBfQkxBREVfVkVSVFMpO1xyXG4gICAgICAgICAgICAgICAgZERpdlZlcnRleEluZGV4ICAgICAgID0gZmxvb3IoZFZlcnRleEluZGV4IC8gMi4wKTtcclxuICAgICAgICAgICAgICAgIGRQZXJjZW50T2ZCbGFkZUhlaWdodCA9IGREaXZWZXJ0ZXhJbmRleCAvIExPRDBfQkxBREVfU0VHUztcclxuICAgICAgICAgICAgICAgIGRTaWRlT2ZCbGFkZSAgICAgICAgICA9IGZsb29yKG5uVmkgLyBMT0QwX0JMQURFX1ZFUlRTKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkR3Jhc3NQYXRjaE9mZnNldFhaID0gTE9EMF9HUkFTU19QQVRDSF9DRU5URVJfT0ZGU0VUO1xyXG5cclxuI2lmIGRlZmluZWQoVVNFX0xPRDEpXHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZsb2F0IGxvZDFublZpID0gbm5WaSAtIExPRDBfQkxBREVfVkVSVFNfQ09VTlQ7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBsb2QxblZpICA9IG1vZChsb2Qxbm5WaSwgTE9EMV9CTEFERV9WRVJUU19DT1VOVCk7XHJcbiAgICAgICAgICAgICAgICBpbnQgcGF0Y2hJbmRleCA9IGludChsb2Qxbm5WaSAvIExPRDFfQkxBREVfVkVSVFNfQ09VTlQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRWZXJ0ZXhJbmRleCAgICAgICAgICA9IG1vZChsb2QxblZpLCBMT0QxX0JMQURFX1ZFUlRTKTtcclxuICAgICAgICAgICAgICAgIGREaXZWZXJ0ZXhJbmRleCAgICAgICA9IGZsb29yKGRWZXJ0ZXhJbmRleCAvIDIuMCk7XHJcbiAgICAgICAgICAgICAgICBkUGVyY2VudE9mQmxhZGVIZWlnaHQgPSBkRGl2VmVydGV4SW5kZXggLyBMT0QxX0JMQURFX1NFR1M7XHJcbiAgICAgICAgICAgICAgICBkU2lkZU9mQmxhZGUgICAgICAgICAgPSBmbG9vcihsb2QxblZpIC8gTE9EMV9CTEFERV9WRVJUUyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZEdyYXNzUGF0Y2hPZmZzZXRYWiA9ICR7bG9kMU9mZnNldFhaUGFyYW1OYW1lfVtwYXRjaEluZGV4XTtcclxuICAgICAgICAgICAgfVxyXG4jZW5kaWZcclxuXHJcbiNpZiBkZWZpbmVkKFVTRV9MT0QyKVxyXG5cclxuICAgICAgICB9XHJcblxyXG4jZW5kaWZcclxuXHJcbiAgICAgICAgZEVkZ2VPZkJsYWRlID0gbW9kKGRWZXJ0ZXhJbmRleCwgMi4wKTtcclxuICAgIH1cclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVMb2NhbFZTID0gIC8qKiBAdHlwZSBnbHNsICovXHJcbmBcclxuICAgIC8vIFJvdGF0ZSBieSBhbiBhbmdsZVxyXG4gICAgdmVjMiByb3RhdGUoZmxvYXQgeCwgZmxvYXQgeSwgZmxvYXQgcikge1xyXG4gICAgICAgIGZsb2F0IGMgPSBjb3Mocik7XHJcbiAgICAgICAgZmxvYXQgcyA9IHNpbihyKTtcclxuICAgICAgICByZXR1cm4gdmVjMih4ICogYyAtIHkgKiBzLCB4ICogcyArIHkgKiBjKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSb3RhdGUgYnkgYSB2ZWN0b3JcclxuICAgIHZlYzIgcm90YXRlKGZsb2F0IHgsIGZsb2F0IHksIHZlYzIgcikge1xyXG4gICAgICAgIHJldHVybiB2ZWMyKHggKiByLnggLSB5ICogci55LCB4ICogci55ICsgeSAqIHIueCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1hdDMgZ2V0U3VyZmFjZVJvdGF0aW9uTWF0cml4KHZlYzMgc3VyZmFjZU5vcm1hbCkge1xyXG5cclxuICAgICAgICB2ZWMzIGluaXRpYWxOb3JtYWwgPSB2ZWMzKDAuMCwgMS4wLCAwLjApO1xyXG4gICAgICAgIHZlYzMgdGFyZ2V0Tm9ybWFsID0gbm9ybWFsaXplKHN1cmZhY2VOb3JtYWwpO1xyXG5cclxuICAgICAgICBmbG9hdCBkb3RQcm9kID0gZG90KGluaXRpYWxOb3JtYWwsIHRhcmdldE5vcm1hbCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gd2UgZG8gbm90IGNvbnNpZGVyIG5lZ2F0aXZlIHBhcmFsbGVsIG5vcm1hbCAoaWYgZG90UHJvZCA8IC0wLjk5OTkpXHJcbiAgICAgICAgaWYgKGRvdFByb2QgPiAwLjk5OTkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdDMoMS4wKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlYzMgYXhpcyA9IG5vcm1hbGl6ZShjcm9zcyhpbml0aWFsTm9ybWFsLCB0YXJnZXROb3JtYWwpKTtcclxuICAgICAgICBmbG9hdCBhbmdsZSA9IGFjb3MoZG90UHJvZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZmxvYXQgcyA9IHNpbihhbmdsZSk7XHJcbiAgICAgICAgZmxvYXQgYyA9IGNvcyhhbmdsZSk7XHJcbiAgICAgICAgZmxvYXQgdCA9IDEuMCAtIGM7XHJcblxyXG4gICAgICAgIHJldHVybiBtYXQzKFxyXG4gICAgICAgICAgICB0ICogYXhpcy54ICogYXhpcy54ICsgYyxcclxuICAgICAgICAgICAgdCAqIGF4aXMueCAqIGF4aXMueSAtIHMgKiBheGlzLnosXHJcbiAgICAgICAgICAgIHQgKiBheGlzLnggKiBheGlzLnogKyBzICogYXhpcy55LFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdCAqIGF4aXMueCAqIGF4aXMueSArIHMgKiBheGlzLnosXHJcbiAgICAgICAgICAgIHQgKiBheGlzLnkgKiBheGlzLnkgKyBjLFxyXG4gICAgICAgICAgICB0ICogYXhpcy55ICogYXhpcy56IC0gcyAqIGF4aXMueCxcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHQgKiBheGlzLnggKiBheGlzLnogLSBzICogYXhpcy55LFxyXG4gICAgICAgICAgICB0ICogYXhpcy55ICogYXhpcy56ICsgcyAqIGF4aXMueCxcclxuICAgICAgICAgICAgdCAqIGF4aXMueiAqIGF4aXMueiArIGNcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZsb2F0IGdldEdyYXNzRmFjdG9yKHZlYzIgeHosIHZlYzMgc3VyZmFjZU5vcm1hbCkge1xyXG4gICAgICAgIHJldHVybiAoYWxsKGdyZWF0ZXJUaGFuRXF1YWwoeHosIHZlYzIoMC4wKSkpICYmXHJcbiAgICAgICAgICAgICAgICBhbGwobGVzc1RoYW5FcXVhbCh4eiwgRklFTERfU0laRV9CT1VORF9GKSkgJiZcclxuICAgICAgICAgICAgICAgIHN1cmZhY2VOb3JtYWwueSA+PSAke21heFNsb3BlRmFjdG9yUGFyYW1OYW1lfSlcclxuICAgICAgICAgICAgICAgID8gc3VyZmFjZU5vcm1hbC55IDogMC4wO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmbG9hdCB1bnBhY2tGYWN0b3JGcm9tUkdCQSh2ZWM0IHJnYmEpIHtcclxuICAgICAgICAvLyBUT0RPOiBvcHRpbWl6YXRpb25cclxuICAgICAgICBjb25zdCB2ZWM0IGJpdFNoaWZ0cyA9IHZlYzQoMS4wLCAxLjAgLyAoMjU1LjApLCAxLjAgLyAoMjU1LjAgKiAyNTUuMCksIDEuMCAvICgyNTUuMCAqIDI1NS4wICogMjU1LjApKTsgXHJcbiAgICAgICAgcmV0dXJuIGRvdChyZ2JhLCBiaXRTaGlmdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhcnlpbmcgdmVjMiB2VXZGaWVsZENvb3JkO1xyXG4gICAgdmFyeWluZyB2ZWMyIHZVdkNvb3JkO1xyXG4gICAgdmFyeWluZyB2ZWMzIHZDb2xvcjtcclxuXHJcbiAgICB2b2lkIGNhbGN1bGF0ZUJsYWRlVmVydGV4KCkge1xyXG5cclxuICAgICAgICB2ZWM0IG9mZnNldCA9ICR7b2Zmc2V0QXR0ck5hbWV9O1xyXG4gICAgICAgIHZlYzQgc2hhcGUgID0gJHtzaGFwZUF0dHJOYW1lfTtcclxuXHJcbiAgICAgICAgLy8gdmVjNCBvZmZzZXQgPSB2ZWM0KCR7b2Zmc2V0QXR0ck5hbWV9Lnh5eiwgMC4wKTtcclxuICAgICAgICAvLyB2ZWM0IHNoYXBlID0gdmVjNCgwLjA1LCAxLjUsIDAuMCwgMC4wKTtcclxuXHJcbiAgICAgICAgLy8gQmFzZWQgb24gY2VudHJlIG9mIHZpZXcgY29uZSBwb3NpdGlvbiwgd2hhdCBncmlkIHRpbGUgc2hvdWxkXHJcbiAgICAgICAgLy8gdGhpcyBwaWVjZSBvZiBncmFzcyBiZSBkcmF3biBhdD9cclxuICAgICAgICB2ZWMyIHZpZXdlclBvcyAgID0gJHtkcmF3UG9zUGFyYW1OYW1lfS54ejtcclxuICAgICAgICB2ZWMyIGJsYWRlT2Zmc2V0ID0gb2Zmc2V0Lnh5O1xyXG5cclxuICAgICAgICAvLyBGaW5kIHRoZSB2aXJ0dWFsIHBhdGNoIGNlbnRlclxyXG4gICAgICAgIHZlYzIgdmlydHVhbFBhdGNoQ2VudGVyID0gZmxvb3IoKHZpZXdlclBvcyAtIGJsYWRlT2Zmc2V0KSAvIEdSQVNTX1BBVENIX1NJWkVfRikgKiBHUkFTU19QQVRDSF9TSVpFX0YgKyBkR3Jhc3NQYXRjaE9mZnNldFhaO1xyXG5cclxuICAgICAgICAvLyBGaW5kIHRoZSBibGFkZSBtZXNoIHgseSBwb3NpdGlvblxyXG4gICAgICAgIHZlYzIgYmxhZGVQb3MgPSB2aXJ0dWFsUGF0Y2hDZW50ZXIgKyBibGFkZU9mZnNldDtcclxuXHJcbiAgICAgICAgLy8gTG9jYWwgYmxhZGUgcG9zaXRpb24gaW4gZmllbGRcclxuICAgICAgICAvLyBiZWNhdXNlIHRoZSBwb3NpdGlvbnMgYXJlIHNoaWZ0ZWQgYnkgaGFsZiB0aGUgc2l6ZSBvZiB0aGUgZmllbGRcclxuICAgICAgICBkQmxhZGVGaWVsZFhaUG9zID0gYmxhZGVQb3MgLyAke2ZpZWxkU2NhbGVQYXJhbU5hbWV9Lnh6ICsgRklFTERfU0laRV9IX0Y7XHJcblxyXG4gICAgICAgIC8vIEZpbmQgdGhlIGJsYWRlIHBvcyBpbiBjb21wdXRlIGRhdGFcclxuICAgICAgICB2ZWMyIGdyYXNzRmllbGRCbGFkZVBvcyA9IGJsYWRlUG9zIC8gJHtmaWVsZFNjYWxlUGFyYW1OYW1lfS54eiAtIGZsb29yKHZpZXdlclBvcyAvICR7ZmllbGRTY2FsZVBhcmFtTmFtZX0ueHopICsgR1JBU1NfRklFTERfUkFESVVTO1xyXG4gICAgICAgIHZlYzIgZ3Jhc3NGaWVsZEJsYWRlQ2xhbXBQb3MgPSBjbGFtcChncmFzc0ZpZWxkQmxhZGVQb3MsIHZlYzIoMC4wKSwgR1JBU1NfRklFTERfU0laRSk7XHJcblxyXG4gICAgICAgIHZlYzIgZ3Jhc3NGaWVsZEJsYWRlVVYgPSBncmFzc0ZpZWxkQmxhZGVDbGFtcFBvcyAvIEdSQVNTX0ZJRUxEX1NJWkVfRjtcclxuICAgICAgICB2ZWM0IGJsYWRlQ29tcHV0ZUhNRGF0YSA9IHRleHR1cmUyRCh1Q29tcHV0ZUhNRGF0YSwgZ3Jhc3NGaWVsZEJsYWRlVVYpO1xyXG4gICAgICAgIHZlYzQgYmxhZGVDb21wdXRlTk1EYXRhID0gdGV4dHVyZTJEKHVDb21wdXRlTk1EYXRhLCBncmFzc0ZpZWxkQmxhZGVVVik7XHJcblxyXG4gICAgICAgIGRGaWVsZFN1cmZhY2VBbHRpdHVkZSA9IHVucGFja0ZhY3RvckZyb21SR0JBKGJsYWRlQ29tcHV0ZUhNRGF0YS5yZ2JhKSAqICR7bWF4SGVpZ2h0UGFyYW1OYW1lfTtcclxuICAgICAgICBkRmllbGRTdXJmYWNlTm9ybWFsID0gYmxhZGVDb21wdXRlTk1EYXRhLnJnYjtcclxuXHJcbiAgICAgICAgZEZpZWxkU3VyZmFjZUFsdGl0dWRlICo9ICR7ZmllbGRTY2FsZVBhcmFtTmFtZX0ueTtcclxuXHJcbiAgICAgICAgLy8gU2FtcGxlIHRoZSBoZWlnaHRmaWVsZCBkYXRhIHRleHR1cmUgdG8gZ2V0IGFsdGl0dWRlIGZvciB0aGlzIGJsYWRlIHBvc2l0aW9uXHJcbiAgICAgICAgZmxvYXQgZ3Jhc3NGYWN0b3IgPSBnZXRHcmFzc0ZhY3RvcihkQmxhZGVGaWVsZFhaUG9zLCBkRmllbGRTdXJmYWNlTm9ybWFsKTtcclxuXHJcbiAgICAgICAgZmxvYXQgZGlzdGFuY2VGcm9tQmxhZGVUb1F1YWRDZW50ZXIgPSBkaXN0YW5jZShibGFkZVBvcywgdmlld2VyUG9zKTtcclxuICAgICAgICBmbG9hdCBkZWdlbmVyYXRlQnlEaXN0YW5jZUZyb21CbGFkZVRvUXVhZENlbnRlciA9IHNtb290aHN0ZXAoMC45MiwgMS4wLCBHUkFTU19QQVRDSF9TSVpFX0YgKiAke2NpcmNsZVNtb290aGluZ1BhcmFtTmFtZX0gLyBkaXN0YW5jZUZyb21CbGFkZVRvUXVhZENlbnRlcik7XHJcblxyXG4gICAgICAgIC8vIFZlcnRleCBwb3NpdGlvbiAtIHN0YXJ0IHdpdGggMkQgc2hhcGUsIG5vIGJlbmQgYXBwbGllZFxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbiA9IHZlYzMoXHJcbiAgICAgICAgICAgIHNoYXBlLnggKiAoZEVkZ2VPZkJsYWRlIC0gMC41KSAqICgxLjAgLSBwb3coZFBlcmNlbnRPZkJsYWRlSGVpZ2h0LCAzLjApKSwgLy8gdGFwZXIgYmxhZGUgZWRnZXMgYXMgYXBwcm9hY2ggdGlwXHJcbiAgICAgICAgICAgIDAuMCwgLy8gZmxhdCB5LCB1bmJlbnRcclxuICAgICAgICAgICAgc2hhcGUueSAqIGRQZXJjZW50T2ZCbGFkZUhlaWdodCAvLyBoZWlnaHQgb2YgdnR4LCB1bmJlbnRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBTdGFydCBjb21wdXRpbmcgYSBub3JtYWwgZm9yIHRoaXMgdmVydGV4XHJcbiAgICAgICAgZFZlcnRleE5vcm1hbCA9IHZlYzMoMC4wLCBkU2lkZU9mQmxhZGUgKiAtMi4wICsgMS4wLCAwLjApO1xyXG5cclxuICAgICAgICAvLyBBcHBseSBibGFkZSdzIG5hdHVyYWwgY3VydmUgYW1vdW50XHJcbiAgICAgICAgLy8gVGhlbiBhZGQgYW5pbWF0ZWQgY3VydmUgYW1vdW50IGJ5IHRpbWUgdXNpbmcgdGhpcyBibGFkZSdzXHJcbiAgICAgICAgLy8gdW5pcXVlIHByb3BlcnRpZXMgdG8gcmFuZG9taXplIGl0cyBvc2NpbGxhdGlvblxyXG4gICAgICAgIGZsb2F0IGN1cnZlID0gc2hhcGUudyAqIDIuMCArIDAuMTI1ICogc2luKCR7dGltZVBhcmFtTmFtZX0gKiA0LjAgKyBvZmZzZXQudyAqIDAuMiAqIHNoYXBlLnkgKyBvZmZzZXQueCArIG9mZnNldC55KTtcclxuXHJcbiAgICAgICAgLy8gVE9ET1xyXG4gICAgICAgIGZsb2F0IHdpbmQgPSAwLjU7XHJcblxyXG4gICAgICAgIHdpbmQgPSAoY2xhbXAod2luZCwgMC4yNSwgMS4wKSAtIDAuMjUpICogKDEuMCAvIDAuNzUpO1xyXG4gICAgICAgIHdpbmQgPSB3aW5kICogd2luZCAqICR7d2luZEludGVuc2l0eVBhcmFtTmFtZX07XHJcbiAgICAgICAgd2luZCAqPSBkUGVyY2VudE9mQmxhZGVIZWlnaHQ7IC8vIHNjYWxlIHdpbmQgYnkgaGVpZ2h0IG9mIGJsYWRlXHJcbiAgICAgICAgd2luZCA9IC13aW5kO1xyXG5cclxuICAgICAgICAvLyBwdXQgbGVhbiBhbmQgY3VydmUgdG9nZXRoZXJcclxuICAgICAgICBmbG9hdCByb3QgPSBzaGFwZS56ICsgY3VydmUgKiBkUGVyY2VudE9mQmxhZGVIZWlnaHQ7XHJcbiAgICAgICAgdmVjMiByb3R2ID0gdmVjMihjb3Mocm90KSwgc2luKHJvdCkpO1xyXG5cclxuICAgICAgICBkVmVydGV4UG9zaXRpb24ueXogPSByb3RhdGUoZFZlcnRleFBvc2l0aW9uLnksIGRWZXJ0ZXhQb3NpdGlvbi56LCByb3R2KTtcclxuICAgICAgICBkVmVydGV4Tm9ybWFsLnl6ICAgPSByb3RhdGUoZFZlcnRleE5vcm1hbC55LCBkVmVydGV4Tm9ybWFsLnosIHJvdHYpO1xyXG5cclxuICAgICAgICAvLyByb3RhdGlvbiBvZiB0aGlzIGJsYWRlIGFzIGEgdmVjdG9yXHJcbiAgICAgICAgcm90diA9IHZlYzIoY29zKG9mZnNldC53KSwgc2luKG9mZnNldC53KSk7XHJcblxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi54eSA9IHJvdGF0ZShkVmVydGV4UG9zaXRpb24ueCwgZFZlcnRleFBvc2l0aW9uLnksIHJvdHYpO1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwueHkgICA9IHJvdGF0ZShkVmVydGV4Tm9ybWFsLngsIGRWZXJ0ZXhOb3JtYWwueSwgcm90dik7XHJcblxyXG4gICAgICAgIC8vIHdpbmQgYmxvd3MgaW4gYXhpcy1hbGlnbmVkIGRpcmVjdGlvbiB0byBtYWtlIHRoaW5ncyBzaW1wbGVyXHJcbiAgICAgICAgcm90diA9IHZlYzIoY29zKHdpbmQpLCBzaW4od2luZCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi55eiA9IHJvdGF0ZShkVmVydGV4UG9zaXRpb24ueSwgZFZlcnRleFBvc2l0aW9uLnosIHJvdHYpO1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwueXogICA9IHJvdGF0ZShkVmVydGV4Tm9ybWFsLnksIGRWZXJ0ZXhOb3JtYWwueiwgcm90dik7XHJcblxyXG4gICAgICAgIC8vIHJvdGF0aW9uIG9mIHN1cmZhY2Ugbm9ybWFsXHJcbiAgICAgICAgbWF0MyBzdXJmYWNlUm90YXRpb25NYXQgPSBnZXRTdXJmYWNlUm90YXRpb25NYXRyaXgoZEZpZWxkU3VyZmFjZU5vcm1hbCk7XHJcbiAgICAgICAgZFZlcnRleFBvc2l0aW9uID0gc3VyZmFjZVJvdGF0aW9uTWF0ICogZFZlcnRleFBvc2l0aW9uO1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwgICA9IHN1cmZhY2VSb3RhdGlvbk1hdCAqIGRWZXJ0ZXhOb3JtYWw7XHJcblxyXG4gICAgICAgIGZsb2F0IGRyYXdQb3NBbHRpdHVkZSA9ICR7ZHJhd1Bvc1BhcmFtTmFtZX0ueTtcclxuICAgICAgICBmbG9hdCBkaXN0YW5jZVF1YWRDZW50ZXJUb0RyYXcgPSBkaXN0YW5jZShkRmllbGRTdXJmYWNlQWx0aXR1ZGUsIGRyYXdQb3NBbHRpdHVkZSk7XHJcbiAgICAgICAgZmxvYXQgZGVnZW5lcmF0ZUJ5RGlzdGFuY2VGcm9tQmxhZGVUb0RyYXcgPSBzbW9vdGhzdGVwKDAuODEsIDEuMCwgTUFYX1pJTklUX0RJU1RBTkNFIC8gZGlzdGFuY2VRdWFkQ2VudGVyVG9EcmF3KTtcclxuXHJcbiAgICAgICAgLy8gVHJhbnNpdGlvbiBnZW9tZXRyeSB0b3dhcmQgZGVnZW5lcmF0ZSBhcyB3ZSBhcHByb2FjaCBmaWVsZCBhbHRpdHVkZVxyXG4gICAgICAgIGZsb2F0IGRlZ2VuZXJhdGVGYWN0b3IgPSBncmFzc0ZhY3RvciAqIGRlZ2VuZXJhdGVCeURpc3RhbmNlRnJvbUJsYWRlVG9EcmF3ICogZGVnZW5lcmF0ZUJ5RGlzdGFuY2VGcm9tQmxhZGVUb1F1YWRDZW50ZXI7XHJcblxyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbiAqPSBkZWdlbmVyYXRlRmFjdG9yO1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwgKj0gZGVnZW5lcmF0ZUZhY3RvcjtcclxuXHJcbiAgICAgICAgLy8gVHJhbnNsYXRlIHRvIHdvcmxkIGNvb3JkaW5hdGVzXHJcbiAgICAgICAgZFZlcnRleFBvc2l0aW9uLnggKz0gYmxhZGVQb3MueDtcclxuICAgICAgICBkVmVydGV4UG9zaXRpb24ueSArPSBibGFkZVBvcy55O1xyXG4gICAgICAgIGRWZXJ0ZXhQb3NpdGlvbi56ICs9IGRGaWVsZFN1cmZhY2VBbHRpdHVkZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUcmFuc2xhdGUgdG8geHogcGxhbmVcclxuICAgICAgICBkVmVydGV4UG9zaXRpb24gPSBkVmVydGV4UG9zaXRpb24ueHp5O1xyXG4gICAgICAgIGRWZXJ0ZXhOb3JtYWwgICA9IG5vcm1hbGl6ZShkVmVydGV4Tm9ybWFsLnh6eSk7XHJcblxyXG4gICAgICAgIC8vIGdyYXNzIHRleHR1cmUgY29vcmRpbmF0ZSBmb3IgdGhpcyB2ZXJ0ZXhcclxuICAgICAgICB2VXZDb29yZCA9IHZlYzIoZEVkZ2VPZkJsYWRlLCBkRGl2VmVydGV4SW5kZXggKiAyLjApO1xyXG5cclxuICAgICAgICAvLyBmaWVsZCB0ZXh0dXJlIGNvb3JkaW5hdGUgZm9yIHRoaXMgdmVydGV4XHJcbiAgICAgICAgdlV2RmllbGRDb29yZCA9IGRCbGFkZUZpZWxkWFpQb3MgLyBGSUVMRF9TSVpFX0Y7XHJcblxyXG4gICAgICAgIC8vIFZlcnRleCBjb2xvciBtdXN0IGJlIGJyaWdodGVyIGJlY2F1c2UgaXQgaXMgbXVsdGlwbGllZCB3aXRoIGJsYWRlIHRleHR1cmVcclxuICAgICAgICAvLyBFYWNoIGJsYWRlIGlzIHJhbmRvbWx5IGNvbG91cml6ZWQgYSBiaXQgYnkgaXRzIHBvc2l0aW9uXHJcbiAgICAgICAgdkNvbG9yID0gdmVjMyhjb3MoJHtvZmZzZXRBdHRyTmFtZX0ueCksIHNpbigke29mZnNldEF0dHJOYW1lfS55KSwgc2luKCR7b2Zmc2V0QXR0ck5hbWV9LngpKTtcclxuICAgIH1cclxuYDtcclxuXHJcbi8vIGh0dHBzOi8vY29tbXVuaXR5Lmtocm9ub3Mub3JnL3QvZGlzY2FyZGluZy1wb2x5Z29ucy1pbi12ZXJ0ZXgtc2hhZGVyLzEwMzgzOS85XHJcbmV4cG9ydCBjb25zdCBzdGFydFZTID0gLyoqIEB0eXBlIGdsc2wgKi9cclxuYFxyXG4gICAgJHtzdGFydFV2MFZTfVxyXG5cclxuICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcblxyXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcclxuYDtcclxuXHJcbmV4cG9ydCBjb25zdCBkaWZmdXNlUFMgPSAvKiogQHR5cGUgZ2xzbCAqL1xyXG5gXHJcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1RGlmZnVzZVRleDtcclxuICAgIHVuaWZvcm0gdmVjMyB1RGlmZnVzZUNvbG9yO1xyXG4gICAgdW5pZm9ybSB2ZWMzIHVEaWZmdXNlQ29sb3JSYW5kb207XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIHZVdkZpZWxkQ29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzIgdlV2Q29vcmQ7XHJcbiAgICB2YXJ5aW5nIHZlYzMgdkNvbG9yO1xyXG5cclxuICAgIHZlYzMgYXV0b0dhbW1hQ29ycmVjdElucHV0KHZlYzMgdikge1xyXG4gICAgICAgICNpZiBkZWZpbmVkKEdBTU1BX05PUk1BTElaRSlcclxuICAgICAgICAgICAgcmV0dXJuIGdhbW1hQ29ycmVjdElucHV0KHYpO1xyXG4gICAgICAgICNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICNlbmRpZlxyXG4gICAgfVxyXG5cclxuICAgIHZlYzQgYXV0b0dhbW1hQ29ycmVjdElucHV0KHZlYzQgdikge1xyXG4gICAgICAgICNpZiBkZWZpbmVkKEdBTU1BX05PUk1BTElaRSlcclxuICAgICAgICAgICAgcmV0dXJuIGdhbW1hQ29ycmVjdElucHV0KHYpO1xyXG4gICAgICAgICNlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICNlbmRpZlxyXG4gICAgfVxyXG5cclxuICAgIHZvaWQgZ2V0QWxiZWRvKCkge1xyXG5cclxuICAgICAgICB2ZWMzIHRleCA9IGF1dG9HYW1tYUNvcnJlY3RJbnB1dCh0ZXh0dXJlMkQodURpZmZ1c2VUZXgsIHZVdkNvb3JkKS5yZ2IpO1xyXG5cclxuICAgICAgICBkQWxiZWRvID0gdGV4ICogdURpZmZ1c2VDb2xvciArIHZDb2xvciAqIHVEaWZmdXNlQ29sb3JSYW5kb207XHJcbiAgICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY29uc3QgY2h1bmtzID0ge1xyXG5cclxuICAgIGhlaWdodE1hcFNhbXBsZXIsXHJcblxyXG4gICAgZGVmaW5lc1ZTLFxyXG4gICAgZGVmaW5lc0JsYWRlVlMsXHJcbiAgICBibGFkZURlY29kZXJWUyxcclxuICAgIGNhbGN1bGF0ZUxvY2FsVlMsXHJcblxyXG4gICAgLy8gVmVydGV4XHJcbiAgICBiYXNlVlMsXHJcbiAgICBiYXNlQ2xlYXJTdWJWUyxcclxuICAgIHRyYW5zZm9ybVZTLFxyXG4gICAgdHJhbnNmb3JtRGVjbFZTLFxyXG4gICAgaW5zdGFuY2luZ1ZTLFxyXG4gICAgdHJhbnNmb3JtSW5zdGFuY2luZ1ZTLFxyXG4gICAgbm9ybWFsQ29yZVZTLFxyXG4gICAgbm9ybWFsVlMsXHJcbiAgICB1djBWUyxcclxuICAgIHN0YXJ0VlMsXHJcblxyXG4gICAgLy8gRnJhZ21lbnRcclxuICAgIGRpZmZ1c2VQUyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR3Jhc3NTaGFkZXJPcHRpb25zIHtcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBkZXB0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0TWFwQ2h1bmtTaXplOiBudW1iZXIsXHJcbiAgICBoZWlnaHRNYXBGb3JtYXQ6IFRIZWlnaHRNYXBGb3JtYXQsXHJcbiAgICBsb2QwQmxhZGVTZWdzOiBudW1iZXIsXHJcbiAgICBsb2QxQmxhZGVTZWdzOiBudW1iZXIsXHJcbiAgICBsb2QyQmxhZGVTZWdzOiBudW1iZXIsXHJcbiAgICBzaWRlQ291bnQ6IG51bWJlcixcclxuICAgIHJhZGl1czogbnVtYmVyLFxyXG4gICAgY2h1bmtzU3RvcmU/OiB0eXBlb2YgY2h1bmtzLFxyXG4gICAgZW5naW5lVmVyc2lvbj86ICd2MScgfCAndjInXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRHcmFzc1NoYWRlckNodW5rcyh7XHJcbiAgICB3aWR0aCxcclxuICAgIGRlcHRoLFxyXG4gICAgaGVpZ2h0TWFwQ2h1bmtTaXplLFxyXG4gICAgaGVpZ2h0TWFwRm9ybWF0LFxyXG4gICAgbG9kMEJsYWRlU2VncyxcclxuICAgIGxvZDFCbGFkZVNlZ3MsXHJcbiAgICBsb2QyQmxhZGVTZWdzLFxyXG4gICAgc2lkZUNvdW50LFxyXG4gICAgcmFkaXVzLFxyXG4gICAgY2h1bmtzU3RvcmUgPSBjaHVua3MsXHJcbiAgICBlbmdpbmVWZXJzaW9uID0gJ3YxJyxcclxufTogSUdyYXNzU2hhZGVyT3B0aW9ucyk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xyXG5cclxuICAgIGNvbnN0IGRlZmluZXNWUyA9IGNodW5rc1N0b3JlLmRlZmluZXNWU1xyXG4gICAgICAgIC5yZXBsYWNlKCclJUhNX05VTV9DSFVOS1NfWCUlJywgU3RyaW5nKCh3aWR0aCAtIDEpIC8gKGhlaWdodE1hcENodW5rU2l6ZSAtIDEpIHwgMCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlSE1fQ0hVTktfU0laRSUlJywgU3RyaW5nKGhlaWdodE1hcENodW5rU2l6ZSB8IDApKVxyXG4gICAgICAgIC5yZXBsYWNlKCclJUZJRUxEX1NJWkVfWCUlJywgU3RyaW5nKHdpZHRoKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVGSUVMRF9TSVpFX1olJScsIFN0cmluZyhkZXB0aCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlRklFTERfU0laRV9YX0YlJScsIHdpZHRoLnRvRml4ZWQoMSkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlRklFTERfU0laRV9aX0YlJScsIGRlcHRoLnRvRml4ZWQoMSkpXHJcbiAgICAgICAgLnJlcGxhY2UoJyUlR1JBU1NfRklFTERfUkFESVVTJSUnLCByYWRpdXMudG9GaXhlZCgxKSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGRlZmluZXNCbGFkZVZTID0gY2h1bmtzU3RvcmUuZGVmaW5lc0JsYWRlVlNcclxuICAgICAgICAucmVwbGFjZSgnJSVTSURFX0NPVU5UJSUnLCBzaWRlQ291bnQudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVMT0QwX0JMQURFX1NFR1MlJScsIGxvZDBCbGFkZVNlZ3MudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVMT0QxX0JMQURFX1NFR1MlJScsIGxvZDFCbGFkZVNlZ3MudG9GaXhlZCgxKSlcclxuICAgICAgICAucmVwbGFjZSgnJSVMT0QyX0JMQURFX1NFR1MlJScsIGxvZDJCbGFkZVNlZ3MudG9GaXhlZCgxKSlcclxuICAgICAgICArIChsb2QxQmxhZGVTZWdzID4gMCA/ICdcXHJcXG4jZGVmaW5lIFVTRV9MT0QxXFxyXFxuJyA6ICcnKVxyXG4gICAgICAgICsgKGxvZDJCbGFkZVNlZ3MgPiAwID8gJ1xcclxcbiNkZWZpbmUgVVNFX0xPRDJcXHJcXG4nIDogJycpO1xyXG5cclxuICAgIGNvbnN0IGhlaWdodE1hcFZTID0gY2h1bmtzU3RvcmUuaGVpZ2h0TWFwU2FtcGxlci5yZXBsYWNlQWxsKCclJUhFSUdIVF9NQVBfU0FNUExFUiUlJywgZ2V0U2FtcGxlclR5cGUoaGVpZ2h0TWFwRm9ybWF0KSk7XHJcbiAgICBjb25zdCBiYXNlQ2xlYXJWUyA9IGNodW5rc1N0b3JlLmJhc2VWUyArIGhlaWdodE1hcFZTO1xyXG4gICAgXHJcbiAgICBjb25zdCB0cmFuc2Zvcm1WUyA9IGNodW5rc1N0b3JlLmJsYWRlRGVjb2RlclZTXHJcbiAgICAgICAgICAgICAgICAgICAgICArIGNodW5rc1N0b3JlLmNhbGN1bGF0ZUxvY2FsVlNcclxuICAgICAgICAgICAgICAgICAgICAgICsgY2h1bmtzU3RvcmUudHJhbnNmb3JtVlM7XHJcblxyXG4gICAgY29uc3QgZGlmZnVzZVBTID0gJyNkZWZpbmUgR0FNTUFfTk9STUFMSVpFXFxyXFxuJ1xyXG4gICAgICAgICAgICAgICAgICAgICsgY2h1bmtzU3RvcmUuZGlmZnVzZVBTO1xyXG5cclxuICAgIGlmIChlbmdpbmVWZXJzaW9uID09PSAndjInKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtMlZTID0gZGVmaW5lc1ZTICsgZGVmaW5lc0JsYWRlVlMgKyBiYXNlQ2xlYXJWUyArIHRyYW5zZm9ybVZTO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAvLyBWZXJ0ZXhcclxuICAgICAgICAgICAgdHJhbnNmb3JtVlM6IHRyYW5zZm9ybTJWUyxcclxuICAgICAgICAgICAgdHJhbnNmb3JtQ29yZVZTOiBcIlwiLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1JbnN0YW5jaW5nVlM6IFwiXCIsXHJcbiAgICAgICAgICAgIG5vcm1hbENvcmVWUzogY2h1bmtzU3RvcmUubm9ybWFsQ29yZVZTLFxyXG5cclxuICAgICAgICAgICAgLy8gRnJhZ21lbnRcclxuICAgICAgICAgICAgZGlmZnVzZVBTOiBkaWZmdXNlUFMsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgYmFzZVZTID0gZGVmaW5lc1ZTICtcclxuICAgICAgICAgICAgICAgICAgIGRlZmluZXNCbGFkZVZTICtcclxuICAgICAgICAgICAgICAgICAgIGJhc2VDbGVhclZTICtcclxuICAgICAgICAgICAgICAgICAgIGNodW5rc1N0b3JlLmJhc2VDbGVhclN1YlZTO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgLy8gVmVydGV4XHJcbiAgICAgICAgYmFzZVZTLFxyXG4gICAgICAgIHN0YXJ0VlM6IGNodW5rc1N0b3JlLnN0YXJ0VlMsXHJcbiAgICAgICAgdHJhbnNmb3JtVlM6IHRyYW5zZm9ybVZTLFxyXG4gICAgICAgIHRyYW5zZm9ybURlY2xWUzogY2h1bmtzU3RvcmUudHJhbnNmb3JtRGVjbFZTLFxyXG4gICAgICAgIGluc3RhbmNpbmdWUzogY2h1bmtzU3RvcmUuaW5zdGFuY2luZ1ZTLFxyXG4gICAgICAgIG5vcm1hbFZTOiBjaHVua3NTdG9yZS5ub3JtYWxWUyxcclxuICAgICAgICB1djBWUzogY2h1bmtzU3RvcmUudXYwVlMsXHJcblxyXG4gICAgICAgIC8vIEZyYWdtZW50XHJcbiAgICAgICAgZGlmZnVzZVBTOiBkaWZmdXNlUFMsXHJcbiAgICB9O1xyXG59IiwiaW1wb3J0IHsgR3Jhc3NGaWVsZERhdGEgfSBmcm9tIFwiLi4vR3Jhc3NGaWVsZC9HcmFzc0ZpZWxkVGV4dHVyZS5tanNcIjtcclxuaW1wb3J0IHsgZHJhd1Bvc1BhcmFtTmFtZSwgZ2V0R3Jhc3NTaGFkZXJDaHVua3MsIGxvZDJPZmZzZXRYWlBhcmFtTmFtZSwgb2Zmc2V0QXR0ck5hbWUsIGxvZDFPZmZzZXRYWlBhcmFtTmFtZSwgc2hhcGVBdHRyTmFtZSwgdGltZVBhcmFtTmFtZSwgdmluZGV4QXR0ck5hbWUsIHdpbmRJbnRlbnNpdHlQYXJhbU5hbWUsIGZpZWxkU2NhbGVQYXJhbU5hbWUsIGNpcmNsZVNtb290aGluZ1BhcmFtTmFtZSwgbWF4U2xvcGVGYWN0b3JQYXJhbU5hbWUgfSBmcm9tIFwiLi4vR3Jhc3NGaWVsZC9HcmFzc1NoYWRlckNodW5rLm1qc1wiO1xyXG5pbXBvcnQgUmFuZG9tIGZyb20gXCIuLi9FeHRyYXMvUmFuZG9tLm1qc1wiO1xyXG5pbXBvcnQgeyBnZXRIZWlnaHRNYXBGb3JtYXQgfSBmcm9tIFwiLi4vSGVpZ2h0ZmllbGQvR1BVSGVpZ2h0TWFwQnVmZmVyLm1qc1wiO1xyXG5pbXBvcnQgeyBoZWlnaHRNYXBQYXJhbU5hbWUsIG1heEhlaWdodFBhcmFtTmFtZSB9IGZyb20gXCIuLi9IZWlnaHRmaWVsZC9TaGFkZXJDaHVua3MubWpzXCI7XHJcbmltcG9ydCBUZXJyYWluIGZyb20gXCIuL1RlcnJhaW4ubWpzXCI7XHJcbmltcG9ydCBHcmFzc0ZpZWxkQ29tcHV0ZSBmcm9tIFwiLi4vR3Jhc3NGaWVsZC9HcmFzc0ZpZWxkQ29tcHV0ZS5tanNcIjtcclxuaW1wb3J0IEdyYXNzRmllbGRGcnVzdHVtLCB7IGxvZDBQYXRjaENvdW50LCBsb2QxUGF0Y2hDb3VudCwgbG9kMlBhdGNoQ291bnQgfSBmcm9tIFwiLi4vR3Jhc3NGaWVsZC9HcmFzc0ZpZWxkRnJ1c3R1bS5tanNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUJ1ZmZlclN0b3JlIHtcclxuXHJcbiAgICAvLyBJbmRpY2VzIGZvciBhIGJsYWRlXHJcbiAgICBpbmRleDogVWludDE2QXJyYXksXHJcblxyXG4gICAgLy8gVGVsbHMgdGhlIHNoYWRlciB3aGljaCB2ZXJ0ZXggb2YgdGhlIGJsYWRlIGl0cyB3b3JraW5nIG9uLlxyXG4gICAgLy8gUmF0aGVyIHRoYW4gc3VwcGx5aW5nIHBvc2l0aW9ucywgdGhleSBhcmUgY29tcHV0ZWQgZnJvbSB0aGlzIHZpbmRleC5cclxuICAgIGluZGV4VmVydHM6IEZsb2F0MzJBcnJheSxcclxuXHJcbiAgICAvLyBTaGFwZSBwcm9wZXJ0aWVzIG9mIGFsbCBibGFkZXNcclxuICAgIC8vIFBvc2l0b24gJiByb3RhdGlvbiBvZiBhbGwgYmxhZGVzXHJcbiAgICBvZmZzZXRBbmRTaGFwZTogRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXksIC8vIHdlYmdwdSBub3Qgc3VwcG9ydCBmbG9hdDE2IChVaW50MTZBcnJheSA9IEZsb2F0MTZBcnJheSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGJ1ZmZlckl0ZW1TaXplID0gODtcclxuXHJcbmNvbnN0IHRtcE1hdCA9IG5ldyBwYy5NYXQ0KCk7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHcmFzc1RleHR1cmVBdHRyaWJ1dGUge1xyXG4gICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nLFxyXG4gICAgcmVhZG9ubHkgZGlmZnVzZTogcGN4LkFzc2V0O1xyXG4gICAgcmVhZG9ubHkgY29sb3I6IHBjeC5Db2xvcjtcclxuICAgIHJlYWRvbmx5IGNvbG9yUmFuZG9tOiBwY3guVmVjMztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdyYXNzRmllbGQgZXh0ZW5kcyBwYy5TY3JpcHRUeXBlIHtcclxuXHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBncmlkRW50aXR5OiBwY3guRW50aXR5O1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgZnJlZXplRHJhd1BvczogYm9vbGVhbjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGF1dG9SZW5kZXI6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBjaXJjbGVTbW9vdGhpbmc6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IG1heFNsb3BlRmFjdG9yOiBudW1iZXI7XHJcblxyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgcGFpbnRpbmc6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSB3aXJlZnJhbWU6IGJvb2xlYW47XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBjYXN0U2hhZG93OiBib29sZWFuO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgcmVjZWl2ZVNoYWRvdzogYm9vbGVhbjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHNlZWQ6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHdpbmRJbnRlbnNpdHk6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IG51bUJsYWRlczogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgYnVuY2hXaWR0aDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgYnVuY2hEZXB0aDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgYnVuY2hSYW5kUmFkaXVzOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSByYWRpdXM6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGxvZDBCbGFkZVNlZ3M6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGxvZDFCbGFkZVNlZ3M6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGxvZDJCbGFkZVNlZ3M6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IGJsYWRlU2lkZUNvdW50OiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBibGFkZVdpZHRoOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBibGFkZU1pbkhlaWdodDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgYmxhZGVNYXhIZWlnaHQ6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHRleHR1cmVzOiBJR3Jhc3NUZXh0dXJlQXR0cmlidXRlW107XHJcblxyXG4gICAgcHJpdmF0ZSBfc2hhcmVkSW5kZXhCdWZmZXI6IHBjeC5JbmRleEJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX3NoYXJlZFZlcnRleEJ1ZmZlcjogcGN4LlZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICBwcml2YXRlIF9idWZmZXJTdG9yZTogSUJ1ZmZlclN0b3JlID0ge30gYXMgYW55O1xyXG4gICAgcHJpdmF0ZSBfc2hhcmVkSW5zdGFuY2luZ0J1ZmZlcjogcGN4LlZlcnRleEJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX21lc2hJbnN0OiBwY3guTWVzaEluc3RhbmNlO1xyXG4gICAgcHJpdmF0ZSBfbWF0ZXJpYWw6IHBjeC5TdGFuZGFyZE1hdGVyaWFsO1xyXG5cclxuICAgIHByaXZhdGUgX2RhdGFUZXh0dXJlOiBHcmFzc0ZpZWxkRGF0YTtcclxuICAgIHByaXZhdGUgX2NhbWVyYUVudGl0eTogcGN4LkVudGl0eTtcclxuICAgIHByaXZhdGUgX3RlcnJhaW46IFRlcnJhaW47XHJcbiAgICBwcml2YXRlIF90aW1lOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfbGFzdERyYXdQb3M6IHBjeC5WZWMzID0gbmV3IHBjLlZlYzMoKTtcclxuXHJcbiAgICBwcml2YXRlIF9mcnVzdHVtOiBHcmFzc0ZpZWxkRnJ1c3R1bTtcclxuICAgIHByaXZhdGUgX2NvbXB1dGU6IEdyYXNzRmllbGRDb21wdXRlO1xyXG4gICAgcHJpdmF0ZSBfYWFiYjogcGN4LkJvdW5kaW5nQm94O1xyXG5cclxuICAgIHB1YmxpYyBnZXQgcGF0Y2hOdW1CbGFkZXMoKSB7XHJcbiAgICAgICAgY29uc3QgdW5zYWZlID0gKHRoaXMubnVtQmxhZGVzIC8gKGxvZDBQYXRjaENvdW50ICsgbG9kMVBhdGNoQ291bnQgKyBsb2QyUGF0Y2hDb3VudCkpIHwgMDtcclxuICAgICAgICBjb25zdCByb290ID0gTWF0aC5zcXJ0KHVuc2FmZSkgfCAwO1xyXG4gICAgICAgIHJldHVybiByb290ICogcm9vdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveSgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fY29tcHV0ZT8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX3NoYXJlZEluZGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkVmVydGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5zdGFuY2luZ0J1ZmZlcj8uZGVzdHJveSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWVzaEluc3QpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0Lmluc3RhbmNpbmdEYXRhPy52ZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEluc3QuZGVzdHJveSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX21lc2hJbnN0Lm1lc2gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0Lm1lc2guZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZW50aXR5LnJlbmRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eS5yZW5kZXIubWVzaEluc3RhbmNlcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0QmxhZGVzQW5kRWRpdE1vZGUoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUdyYXNzTWVzaCh0aGlzLmFwcC5ncmFwaGljc0RldmljZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBhaW50aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RlcnJhaW4uYWRkTG9jaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcG9zdEluaXRpYWxpemUoKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlcnJhaW5FbnRpdHkgPSB0aGlzLmVudGl0eS5yb290LmZpbmRCeU5hbWUoJ1RlcnJhaW4nKSBhcyBwY3guRW50aXR5O1xyXG4gICAgICAgIGNvbnN0IHRlcnJhaW5TY3JpcHQgPSB0ZXJyYWluRW50aXR5LnNjcmlwdD8uZ2V0KFRlcnJhaW4pIGFzIFRlcnJhaW47XHJcblxyXG4gICAgICAgIHRoaXMuX3RlcnJhaW4gICAgICA9IHRlcnJhaW5TY3JpcHQ7XHJcbiAgICAgICAgdGhpcy5fY2FtZXJhRW50aXR5ID0gdGVycmFpblNjcmlwdC5jYW1lcmFFbnRpdHkhO1xyXG4gICAgICAgIHRoaXMuX2RhdGFUZXh0dXJlICA9IG5ldyBHcmFzc0ZpZWxkRGF0YSh0aGlzLmFwcC5ncmFwaGljc0RldmljZSwgdGhpcy5fdGVycmFpbi53aWR0aCwgdGhpcy5fdGVycmFpbi5kZXB0aCk7XHJcbiAgICAgICAgdGhpcy5fZnJ1c3R1bSAgICAgID0gbmV3IEdyYXNzRmllbGRGcnVzdHVtKHRoaXMuX3RlcnJhaW4sIHRoaXMuX2NhbWVyYUVudGl0eS5jYW1lcmEhLmNhbWVyYSEpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbml0QmxhZGVzQW5kRWRpdE1vZGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignZW5hYmxlJywgKCkgPT4gdGhpcy5faW5pdEJsYWRlc0FuZEVkaXRNb2RlKCkpO1xyXG4gICAgICAgIHRoaXMub24oJ2Rpc2FibGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLl90ZXJyYWluLmZyZWVMb2NrKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6cGFpbnRpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhaW50aW5nKSB7IHRoaXMuX3RlcnJhaW4uYWRkTG9jaygpOyB9XHJcbiAgICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICB7IHRoaXMuX3RlcnJhaW4uZnJlZUxvY2soKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6d2lyZWZyYW1lJywgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJpbWl0aXZlID0gdGhpcy5fbWVzaEluc3Q/Lm1lc2g/LnByaW1pdGl2ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwcmltaXRpdmUgJiYgcHJpbWl0aXZlWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBwcmltaXRpdmVbMF0udHlwZSA9IHRoaXMud2lyZWZyYW1lID8gcGMuUFJJTUlUSVZFX0xJTkVTIDogcGMuUFJJTUlUSVZFX1RSSUFOR0xFUztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmNhc3RTaGFkb3cnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0LmNhc3RTaGFkb3cgPSB0aGlzLmNhc3RTaGFkb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6cmVjZWl2ZVNoYWRvdycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbWVzaEluc3QucmVjZWl2ZVNoYWRvdyA9IHRoaXMucmVjZWl2ZVNoYWRvdztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpzZWVkJywgICAgICAgICAgICAoKSA9PiB0aGlzLl91cGRhdGVNZXNoSW5zdGFuY2luZyh0aGlzLmFwcC5ncmFwaGljc0RldmljZSkpO1xyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6bnVtQmxhZGVzJywgICAgICAgKCkgPT4gdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNpbmcodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UpKTtcclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmJ1bmNoV2lkdGgnLCAgICAgICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpidW5jaERlcHRoJywgICAgICAoKSA9PiB0aGlzLl91cGRhdGVNZXNoSW5zdGFuY2luZyh0aGlzLmFwcC5ncmFwaGljc0RldmljZSkpO1xyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6YmxhZGVXaWR0aCcsICAgICAgKCkgPT4gdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNpbmcodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UpKTtcclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmJsYWRlTWluSGVpZ2h0JywgICgpID0+IHRoaXMuX3VwZGF0ZU1lc2hJbnN0YW5jaW5nKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpibGFkZU1heEhlaWdodCcsICAoKSA9PiB0aGlzLl91cGRhdGVNZXNoSW5zdGFuY2luZyh0aGlzLmFwcC5ncmFwaGljc0RldmljZSkpO1xyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6YnVuY2hSYW5kUmFkaXVzJywgKCkgPT4gdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNpbmcodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UpKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpyYWRpdXMnLCAgICAgICAgICgpID0+IHRoaXMuX3VwZGF0ZUdyYXNzTWVzaCh0aGlzLmFwcC5ncmFwaGljc0RldmljZSkpO1xyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6bG9kMEJsYWRlU2VncycsICAoKSA9PiB0aGlzLl91cGRhdGVHcmFzc01lc2godGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UpKTtcclxuICAgICAgICB0aGlzLm9uKCdhdHRyOmxvZDFCbGFkZVNlZ3MnLCAgKCkgPT4gdGhpcy5fdXBkYXRlR3Jhc3NNZXNoKHRoaXMuYXBwLmdyYXBoaWNzRGV2aWNlKSk7XHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpsb2QyQmxhZGVTZWdzJywgICgpID0+IHRoaXMuX3VwZGF0ZUdyYXNzTWVzaCh0aGlzLmFwcC5ncmFwaGljc0RldmljZSkpO1xyXG4gICAgICAgIHRoaXMub24oJ2F0dHI6YmxhZGVTaWRlQ291bnQnLCAoKSA9PiB0aGlzLl91cGRhdGVHcmFzc01lc2godGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UpKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjpjaXJjbGVTbW9vdGhpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihjaXJjbGVTbW9vdGhpbmdQYXJhbU5hbWUsIHRoaXMuY2lyY2xlU21vb3RoaW5nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjptYXhTbG9wZUZhY3RvcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKG1heFNsb3BlRmFjdG9yUGFyYW1OYW1lLCB0aGlzLm1heFNsb3BlRmFjdG9yKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjp3aW5kSW50ZW5zaXR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIod2luZEludGVuc2l0eVBhcmFtTmFtZSwgdGhpcy53aW5kSW50ZW5zaXR5KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbignYXR0cjp0ZXh0dXJlcycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWF0ZXJpYWxEaWZmdXNlRGF0YSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZU1hdGVyaWFsRGlmZnVzZURhdGEoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGV4aXN0c1RleHMgPSAhIXRoaXMudGV4dHVyZXMgJiYgdGhpcy50ZXh0dXJlcy5sZW5ndGggPiAwO1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gZXhpc3RzVGV4cyA/IHRoaXMudGV4dHVyZXNbMF0uY29sb3IgOiBwYy5Db2xvci5XSElURTtcclxuICAgICAgICBjb25zdCByYW5kICA9IGV4aXN0c1RleHMgPyB0aGlzLnRleHR1cmVzWzBdLmNvbG9yUmFuZG9tIDogcGMuVmVjMy5aRVJPO1xyXG4gICAgICAgIGNvbnN0IHRleCAgID0gZXhpc3RzVGV4cyA/IHRoaXMudGV4dHVyZXNbMF0uZGlmZnVzZS5yZXNvdXJjZSA6IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcigndURpZmZ1c2VDb2xvcicsIFtjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iXSk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1RGlmZnVzZUNvbG9yUmFuZG9tJywgW3JhbmQueCwgcmFuZC55LCByYW5kLnpdKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoJ3VEaWZmdXNlVGV4JywgdGV4IGFzIGFueSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuX3RpbWUgKz0gZHQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbWVyYVBvcyA9IHRoaXMuX2NhbWVyYUVudGl0eS5nZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IGNhbWVyYSA9IHRoaXMuX2NhbWVyYUVudGl0eSEuY2FtZXJhIS5jYW1lcmE7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5mcmVlemVEcmF3UG9zKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYXQgPSB0aGlzLmVudGl0eS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xyXG5cclxuICAgICAgICAgICAgdG1wTWF0LmludmVydChtYXQpO1xyXG4gICAgICAgICAgICB0bXBNYXQudHJhbnNmb3JtUG9pbnQoY2FtZXJhUG9zLCB0aGlzLl9sYXN0RHJhd1Bvcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB2aXNpYmxlTG9kMUNvdW50ID0gdGhpcy5sb2QxQmxhZGVTZWdzIDwgMSA/IDAgOiB0aGlzLl9mcnVzdHVtLmZydXN0dW1Mb2QxKGNhbWVyYVBvcywgdGhpcy5fY29tcHV0ZS5wYXRjaFJhZGl1cywgdGhpcy5mcmVlemVEcmF3UG9zKTtcclxuICAgICAgICBjb25zdCB2aXNpYmxlTG9kMkNvdW50ID0gdGhpcy5sb2QyQmxhZGVTZWdzIDwgMSA/IDAgOiB0aGlzLl9mcnVzdHVtLmZydXN0dW1Mb2QyKGNhbWVyYVBvcywgdGhpcy5fY29tcHV0ZS5wYXRjaFJhZGl1cywgdGhpcy5mcmVlemVEcmF3UG9zKTtcclxuXHJcbiAgICAgICAgY29uc3QgYmxhZGVTZWdzTnVtID0gdGhpcy5ibGFkZVNpZGVDb3VudCAqIDY7XHJcbiAgICAgICAgY29uc3QgYmFzZSAgPSB0aGlzLmxvZDJCbGFkZVNlZ3MgKiBibGFkZVNlZ3NOdW0gKiAobG9kMlBhdGNoQ291bnQgLSB2aXNpYmxlTG9kMkNvdW50KTtcclxuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMubG9kMEJsYWRlU2VncyAqIGJsYWRlU2Vnc051bVxyXG4gICAgICAgICAgICAgICAgICAgICsgdGhpcy5sb2QxQmxhZGVTZWdzICogYmxhZGVTZWdzTnVtICogdmlzaWJsZUxvZDFDb3VudFxyXG4gICAgICAgICAgICAgICAgICAgICsgdGhpcy5sb2QyQmxhZGVTZWdzICogYmxhZGVTZWdzTnVtICogdmlzaWJsZUxvZDJDb3VudDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBtZXNoICAgICAgPSB0aGlzLl9tZXNoSW5zdC5tZXNoO1xyXG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IG1lc2gucHJpbWl0aXZlWzBdO1xyXG5cclxuICAgICAgICBwcmltaXRpdmUuYmFzZSAgPSBiYXNlO1xyXG4gICAgICAgIHByaW1pdGl2ZS5jb3VudCA9IGNvdW50O1xyXG5cclxuICAgICAgICAvLyBhbHdheXMgdHJ1ZSBmb3IgbG9kIDBcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdC52aXNpYmxlID0gdGhpcy5hdXRvUmVuZGVyIHx8IHRoaXMuZnJlZXplRHJhd1BvcztcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdC52aXNpYmxlVGhpc0ZyYW1lID0gdGhpcy5hdXRvUmVuZGVyIHx8IHRoaXMuZnJlZXplRHJhd1BvcztcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdC5zZXRQYXJhbWV0ZXIoYCR7bG9kMU9mZnNldFhaUGFyYW1OYW1lfVswXWAsIHRoaXMuX2ZydXN0dW0ubG9kMU9mZnNldHMpO1xyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0LnNldFBhcmFtZXRlcihgJHtsb2QyT2Zmc2V0WFpQYXJhbU5hbWV9WzBdYCwgdGhpcy5fZnJ1c3R1bS5sb2QyT2Zmc2V0cyk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih0aW1lUGFyYW1OYW1lLCB0aGlzLl90aW1lKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoZHJhd1Bvc1BhcmFtTmFtZSwgW3RoaXMuX2xhc3REcmF3UG9zLngsIHRoaXMuX2xhc3REcmF3UG9zLnksIHRoaXMuX2xhc3REcmF3UG9zLnpdKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLmtleWJvYXJkPy53YXNSZWxlYXNlZChwYy5LRVlfVikpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codmlzaWJsZUxvZDFDb3VudCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZpc2libGVMb2QyQ291bnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZnJ1c3R1bS5kcmF3Q29ybmVzKHRoaXMuZnJlZXplRHJhd1Bvcyk7XHJcbiAgICAgICAgdGhpcy5fY29tcHV0ZS51cGRhdGUodGhpcy5fbGFzdERyYXdQb3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVBYWJiKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWVzaEluc3QpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlICAgICAgICA9IHRoaXMuZW50aXR5LmdldFNjYWxlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlcnJhaW5TY2FsZSA9IHRoaXMuX3RlcnJhaW4uZW50aXR5LmdldFNjYWxlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmxkUmFkaXVzICA9IHRoaXMucmFkaXVzICogTWF0aC5tYXgoc2NhbGUueCwgc2NhbGUueik7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heEhlaWdodCAgICA9IHRoaXMuX3RlcnJhaW4ub2JqZWN0Lm1heEhlaWdodCAqIHRlcnJhaW5TY2FsZS55O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fYWFiYiA/Pz0gbmV3IHBjLkJvdW5kaW5nQm94KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FhYmIuc2V0TWluTWF4KFxyXG4gICAgICAgICAgICAgICAgbmV3IHBjLlZlYzMoLXdvcmxkUmFkaXVzLCAwLCAtd29ybGRSYWRpdXMpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHBjLlZlYzMoIHdvcmxkUmFkaXVzLCBtYXhIZWlnaHQsIHdvcmxkUmFkaXVzKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbWVzaEluc3QubWVzaC5hYWJiID0gdGhpcy5fYWFiYjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlQ29tcHV0ZSgpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9jb21wdXRlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbXB1dGUucmFkaXVzICE9PSB0aGlzLnJhZGl1cykge1xyXG4gICAgICAgICAgICB0aGlzLl9jb21wdXRlPy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbXB1dGUgPSBuZXcgR3Jhc3NGaWVsZENvbXB1dGUodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHRoaXMucmFkaXVzLCB0aGlzLl90ZXJyYWluKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihcInVDb21wdXRlSE1EYXRhXCIsIHRoaXMuX2NvbXB1dGUuYnVmZmVySGVpZ2h0TWFwKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoXCJ1Q29tcHV0ZU5NRGF0YVwiLCB0aGlzLl9jb21wdXRlLmJ1ZmZlck5vcm1hbE1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlR3Jhc3NNZXNoKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaEJ1ZmZlcnMoZ3JhcGhpY3NEZXZpY2UpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hNYXRlcmlhbChncmFwaGljc0RldmljZSk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWVzaEluc3RhbmNlKGdyYXBoaWNzRGV2aWNlKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVNZXNoSW5zdGFuY2luZyhncmFwaGljc0RldmljZSk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlQWFiYigpO1xyXG5cclxuICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2VzID0gW3RoaXMuX21lc2hJbnN0XTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZW50aXR5LnJlbmRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eS5yZW5kZXIubWVzaEluc3RhbmNlcyA9IG1lc2hJbnN0YW5jZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eS5hZGRDb21wb25lbnQoJ3JlbmRlcicsIHtcclxuICAgICAgICAgICAgICAgIG1lc2hJbnN0YW5jZXM6IG1lc2hJbnN0YW5jZXMsXHJcbiAgICAgICAgICAgICAgICBjYXN0U2hhZG93czogdGhpcy5jYXN0U2hhZG93LFxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZVNoYWRvd3M6IHRoaXMucmVjZWl2ZVNoYWRvdyxcclxuICAgICAgICAgICAgICAgIGN1bGw6IGZhbHNlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0LmN1bGwgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdC5jYXN0U2hhZG93ID0gdGhpcy5jYXN0U2hhZG93O1xyXG4gICAgICAgIHRoaXMuX21lc2hJbnN0LnJlY2VpdmVTaGFkb3cgPSB0aGlzLnJlY2VpdmVTaGFkb3c7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTWVzaEluc3RhbmNpbmcoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWVzaEluc3QpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlSW5zdGFuY2luZ0J1ZmZlcihncmFwaGljc0RldmljZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0Py5pbnN0YW5jaW5nRGF0YT8udmVydGV4QnVmZmVyPy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hJbnN0LnNldEluc3RhbmNpbmcodGhpcy5fc2hhcmVkSW5zdGFuY2luZ0J1ZmZlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVDb21wdXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTWVzaEluc3RhbmNlKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fbWVzaEluc3Q/Lmluc3RhbmNpbmdEYXRhPy52ZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdD8uZGVzdHJveSgpO1xyXG5cclxuICAgICAgICBjb25zdCBtZXNoID0gbmV3IHBjLk1lc2goZ3JhcGhpY3NEZXZpY2UpO1xyXG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IG1lc2gucHJpbWl0aXZlWzBdO1xyXG5cclxuICAgICAgICBtZXNoLmluZGV4QnVmZmVyWzBdID0gdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXI7XHJcbiAgICAgICAgbWVzaC52ZXJ0ZXhCdWZmZXIgICA9IHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlcjtcclxuXHJcbiAgICAgICAgcHJpbWl0aXZlLnR5cGUgICAgPSB0aGlzLndpcmVmcmFtZSA/IHBjLlBSSU1JVElWRV9MSU5FUyA6IHBjLlBSSU1JVElWRV9UUklBTkdMRVM7XHJcbiAgICAgICAgcHJpbWl0aXZlLmJhc2UgICAgPSAwO1xyXG4gICAgICAgIHByaW1pdGl2ZS5jb3VudCAgID0gdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXgubGVuZ3RoO1xyXG4gICAgICAgIHByaW1pdGl2ZS5pbmRleGVkID0gdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9tZXNoSW5zdCA9IG5ldyBwYy5NZXNoSW5zdGFuY2UobWVzaCwgdGhpcy5fbWF0ZXJpYWwsIHRoaXMuZW50aXR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2V0cyB1cCBpbmRpY2VzIGZvciBzaW5nbGUgYmxhZGUgbWVzaC5cclxuICAgICogQHBhcmFtIGlkIGFycmF5IG9mIGluZGljZXNcclxuICAgICogQHBhcmFtIHZjMSB2ZXJ0ZXggc3RhcnQgb2Zmc2V0IGZvciBmcm9udCBzaWRlIG9mIGJsYWRlXHJcbiAgICAqIEBwYXJhbSB2YzIgdmVydGV4IHN0YXJ0IG9mZnNldCBmb3IgYmFjayBzaWRlIG9mIGJsYWRlXHJcbiAgICAqIEBwYXJhbSBpIGluZGV4IG9mZnNldFxyXG4gICAgKi9cclxuICAgIHByaXZhdGUgX2luaXRCbGFkZUluZGljZXMoaWQ6IFVpbnQ4QXJyYXkgfCBVaW50MTZBcnJheSwgdmMxOiBudW1iZXIsIHZjMjogbnVtYmVyLCBpOiBudW1iZXIsIGJsYWRlU2VnczogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGxldCBzZWc6IG51bWJlcjtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkQmFja1NpZGUgPSB2YzEgIT09IHZjMjtcclxuXHJcbiAgICAgICAgLy8gYmxhZGUgZnJvbnQgc2lkZVxyXG4gICAgICAgIGZvciAoc2VnID0gMDsgc2VnIDwgYmxhZGVTZWdzOyArK3NlZykge1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAwOyAvLyB0cmkgMVxyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAxO1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAyO1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAyOyAvLyB0cmkgMlxyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAxO1xyXG4gICAgICAgICAgIGlkW2krK10gPSB2YzEgKyAzO1xyXG4gICAgICAgICAgIHZjMSArPSAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGFkZEJhY2tTaWRlKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBibGFkZSBiYWNrIHNpZGVcclxuICAgICAgICAgICAgZm9yIChzZWcgPSAwOyBzZWcgPCBibGFkZVNlZ3M7ICsrc2VnKSB7XHJcbiAgICAgICAgICAgICAgICBpZFtpKytdID0gdmMyICsgMjsgLy8gdHJpIDFcclxuICAgICAgICAgICAgICAgIGlkW2krK10gPSB2YzIgKyAxO1xyXG4gICAgICAgICAgICAgICAgaWRbaSsrXSA9IHZjMiArIDA7XHJcbiAgICAgICAgICAgICAgICBpZFtpKytdID0gdmMyICsgMzsgLy8gdHJpIDJcclxuICAgICAgICAgICAgICAgIGlkW2krK10gPSB2YzIgKyAxO1xyXG4gICAgICAgICAgICAgICAgaWRbaSsrXSA9IHZjMiArIDI7XHJcbiAgICAgICAgICAgICAgICB2YzIgKz0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gaTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogU2V0IHVwIGluZGljZXMgZm9yIDEgYmxhZGUgKi9cclxuICAgIHByaXZhdGUgX2luaXRCbGFkZUluZGV4VmVydHModmluZGV4OiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZpbmRleC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2aW5kZXhbaV0gPSBpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0UGF0Y2hCbGFkZU9mZnNldFNoYXBlVmVydHMob2Zmc2V0U2hhcGU6IFVpbnQxNkFycmF5IHwgRmxvYXQzMkFycmF5LCBwYXRjaFNpemU6IG51bWJlciwgcGF0Y2hOdW1CbGFkZXM6IG51bWJlcikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHNpemUgPSBNYXRoLnNxcnQocGF0Y2hOdW1CbGFkZXMpO1xyXG5cclxuICAgICAgICBpZiAoc2l6ZSAhPT0gTWF0aC5jZWlsKHNpemUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm51bUJsYWRlcyBtdXN0IGJlIHRoZSBsYXJnZXN0IHNxdWFyZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZVZhbHVlID0gb2Zmc2V0U2hhcGUgaW5zdGFuY2VvZiBVaW50MTZBcnJheSA/IHBjLkZsb2F0UGFja2luZy5mbG9hdDJIYWxmIDogKHg6IG51bWJlcikgPT4geDtcclxuICAgICAgICBjb25zdCByYW5kb20gPSBuZXcgUmFuZG9tKHRoaXMuc2VlZCk7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0RmFjdG9yID0gdGhpcy5ibGFkZU1heEhlaWdodCAtIHRoaXMuYmxhZGVNaW5IZWlnaHQ7XHJcbiAgICAgICAgY29uc3QgYnVuY2hTaXplWCA9IHRoaXMuYnVuY2hXaWR0aCB8fCAxO1xyXG4gICAgICAgIGNvbnN0IGJ1bmNoU2l6ZVogPSB0aGlzLmJ1bmNoRGVwdGggfHwgMTtcclxuXHJcbiAgICAgICAgLy9sZXQgbm9pc2UgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHNpemU7IHogKz0gYnVuY2hTaXplWikge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBzaXplOyB4ICs9IGJ1bmNoU2l6ZVgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0bXAgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmFuZEJ1bmNoWCA9IHJhbmRvbS5uZXh0RmxvYXQoMCwgc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByYW5kQnVuY2haID0gcmFuZG9tLm5leHRGbG9hdCgwLCBzaXplKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBidW5jaFogPSAwOyBidW5jaFogPCBidW5jaFNpemVaOyBidW5jaForKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBidW5jaFggPSAwOyBidW5jaFggPCBidW5jaFNpemVYOyBidW5jaFgrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSAoeCArIGJ1bmNoWCkgKyAoeiArIGJ1bmNoWikgKiBzaXplO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhldGEgPSByYW5kb20ubmV4dEZsb2F0KDAsIE1hdGguUEkgKiAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFuZFJhZGl1cyA9IHRoaXMuYnVuY2hSYW5kUmFkaXVzICogTWF0aC5zcXJ0KHJhbmRvbS5yYW5kb20oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdEZsb2F0WCA9IHJhbmRCdW5jaFggKyByYW5kUmFkaXVzICogTWF0aC5jb3ModGhldGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRGbG9hdFogPSByYW5kQnVuY2haICsgcmFuZFJhZGl1cyAqIE1hdGguc2luKHRoZXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsYW1wIGJ5IHBhdGNoIHNpemUgYW5kIHRyYW5zZm9ybSB0byBbLTEsIDFdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZUZvclBTWCA9IHJlc3VsdEZsb2F0WCAvIHNpemUgKiBwYXRjaFNpemUgLSBwYXRjaFNpemUgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVGb3JQU1ogPSByZXN1bHRGbG9hdFogLyBzaXplICogcGF0Y2hTaXplIC0gcGF0Y2hTaXplIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uID0gTWF0aC5QSSAqIDIuMCAqIHJhbmRvbS5yYW5kb20oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkdGggICAgPSB0aGlzLmJsYWRlV2lkdGggKyByYW5kb20ucmFuZG9tKCkgKiB0aGlzLmJsYWRlV2lkdGggKiAwLjU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCAgID0gdGhpcy5ibGFkZU1pbkhlaWdodCArIE1hdGgucG93KHJhbmRvbS5yYW5kb20oKSwgNC4wKSAqIGhlaWdodEZhY3RvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVhbiAgICAgPSAwLjAxICsgcmFuZG9tLnJhbmRvbSgpICogMC4zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJ2ZSAgICA9IDAuMDUgKyByYW5kb20ucmFuZG9tKCkgKiAwLjM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRTaGFwZVtpbmRleCAqIGJ1ZmZlckl0ZW1TaXplICsgMF0gPSBub3JtYWxpemVWYWx1ZShub3JtYWxpemVGb3JQU1gpOyAvLyB4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFNoYXBlW2luZGV4ICogYnVmZmVySXRlbVNpemUgKyAxXSA9IG5vcm1hbGl6ZVZhbHVlKG5vcm1hbGl6ZUZvclBTWik7IC8vIHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0U2hhcGVbaW5kZXggKiBidWZmZXJJdGVtU2l6ZSArIDJdID0gbm9ybWFsaXplVmFsdWUodG1wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0U2hhcGVbaW5kZXggKiBidWZmZXJJdGVtU2l6ZSArIDNdID0gbm9ybWFsaXplVmFsdWUocm90YXRpb24pOyAvLyByb3RcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbm9pc2UgPSBNYXRoLmFicyhzaW1wbGV4KGZsb2F0WCAqIDAuMDMsIGZsb2F0WSAqIDAuMDMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9ub2lzZSA9IG5vaXNlICogbm9pc2UgKiBub2lzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9ub2lzZSAqPSA1LjA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRTaGFwZVtpbmRleCAqIGJ1ZmZlckl0ZW1TaXplICsgNF0gPSBub3JtYWxpemVWYWx1ZSh3aWR0aCk7ICAvLyB3aWR0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRTaGFwZVtpbmRleCAqIGJ1ZmZlckl0ZW1TaXplICsgNV0gPSBub3JtYWxpemVWYWx1ZShoZWlnaHQgLyogKyBub2lzZSAqLyk7IC8vIGhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRTaGFwZVtpbmRleCAqIGJ1ZmZlckl0ZW1TaXplICsgNl0gPSBub3JtYWxpemVWYWx1ZShsZWFuKTsgICAvLyBsZWFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFNoYXBlW2luZGV4ICogYnVmZmVySXRlbVNpemUgKyA3XSA9IG5vcm1hbGl6ZVZhbHVlKGN1cnZlKTsgIC8vIGN1cnZlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZUluc3RhbmNpbmdCdWZmZXIoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkge1xyXG5cclxuICAgICAgICB0aGlzLl9zaGFyZWRJbnN0YW5jaW5nQnVmZmVyPy5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTnVtQmxhZGVzID0gdGhpcy5wYXRjaE51bUJsYWRlcztcclxuICAgICAgICBjb25zdCBwYXRjaFNpemUgPSBHcmFzc0ZpZWxkQ29tcHV0ZS5nZXROb3JtYWxpemVSYWRpdXModGhpcy5yYWRpdXMpIC8gMi41O1xyXG4gICAgICAgIGNvbnN0IG9mZnNldEFuZFNoYXBlTGVuZ3RoID0gcGF0Y2hOdW1CbGFkZXMgKiBidWZmZXJJdGVtU2l6ZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2J1ZmZlclN0b3JlLm9mZnNldEFuZFNoYXBlID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUub2Zmc2V0QW5kU2hhcGUubGVuZ3RoICE9PSBvZmZzZXRBbmRTaGFwZUxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTdG9yZS5vZmZzZXRBbmRTaGFwZSA9IG5ldyBGbG9hdDMyQXJyYXkob2Zmc2V0QW5kU2hhcGVMZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5faW5pdFBhdGNoQmxhZGVPZmZzZXRTaGFwZVZlcnRzKHRoaXMuX2J1ZmZlclN0b3JlLm9mZnNldEFuZFNoYXBlLCBwYXRjaFNpemUsIHBhdGNoTnVtQmxhZGVzKTtcclxuXHJcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuX2J1ZmZlclN0b3JlLm9mZnNldEFuZFNoYXBlIGluc3RhbmNlb2YgVWludDE2QXJyYXkgPyBwYy5UWVBFX0ZMT0FUMTYgOiBwYy5UWVBFX0ZMT0FUMzI7XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2luZ0Zvcm1hdCA9IG5ldyBwYy5WZXJ0ZXhGb3JtYXQoZ3JhcGhpY3NEZXZpY2UsIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VtYW50aWM6IHBjLlNFTUFOVElDX0FUVFIxMCxcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IDQsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGFzSW50OiBmYWxzZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZW1hbnRpYzogcGMuU0VNQU5USUNfQVRUUjExLFxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogNCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICBub3JtYWxpemU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgYXNJbnQ6IGZhbHNlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICB0aGlzLl9zaGFyZWRJbnN0YW5jaW5nQnVmZmVyID0gbmV3IHBjLlZlcnRleEJ1ZmZlcihncmFwaGljc0RldmljZSwgaW5zdGFuY2luZ0Zvcm1hdCwgcGF0Y2hOdW1CbGFkZXMsIHtcclxuICAgICAgICAgICAgdXNhZ2U6IHBjLkJVRkZFUl9TVEFUSUMsXHJcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuX2J1ZmZlclN0b3JlLm9mZnNldEFuZFNoYXBlLFxyXG4gICAgICAgICAgICBzdG9yYWdlOiBmYWxzZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXRWZXJ0ZXhGb3JtYXQoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgcGMuVmVydGV4Rm9ybWF0KGdyYXBoaWNzRGV2aWNlLCBbe1xyXG4gICAgICAgICAgICBzZW1hbnRpYzogcGMuU0VNQU5USUNfUE9TSVRJT04sXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IDEsXHJcbiAgICAgICAgICAgIHR5cGU6IHBjLlRZUEVfRkxPQVQzMixcclxuICAgICAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcclxuICAgICAgICAgICAgYXNJbnQ6IGZhbHNlXHJcbiAgICAgICAgfV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VwZGF0ZU1lc2hCdWZmZXJzKGdyYXBoaWNzRGV2aWNlOiBwY3guR3JhcGhpY3NEZXZpY2UpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9zaGFyZWRWZXJ0ZXhCdWZmZXI/LmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgY29uc3QgbG9kMFZDID0gKHRoaXMubG9kMEJsYWRlU2VncyArIDEpICogMjtcclxuICAgICAgICBjb25zdCBsb2QxVkMgPSB0aGlzLmxvZDFCbGFkZVNlZ3MgPiAwID8gKHRoaXMubG9kMUJsYWRlU2VncyArIDEpICogMiA6IDA7XHJcbiAgICAgICAgY29uc3QgbG9kMlZDID0gdGhpcy5sb2QyQmxhZGVTZWdzID4gMCA/ICh0aGlzLmxvZDJCbGFkZVNlZ3MgKyAxKSAqIDIgOiAwO1xyXG5cclxuICAgICAgICBjb25zdCBibGFkZVNlZ3NOdW0gPSB0aGlzLmJsYWRlU2lkZUNvdW50ICogNjtcclxuICAgICAgICBjb25zdCBpbmRleExlbmd0aCA9IHRoaXMubG9kMEJsYWRlU2VncyAqIGJsYWRlU2Vnc051bSArIHRoaXMubG9kMUJsYWRlU2VncyAqIGJsYWRlU2Vnc051bSAqIGxvZDFQYXRjaENvdW50ICsgdGhpcy5sb2QyQmxhZGVTZWdzICogYmxhZGVTZWdzTnVtICogbG9kMlBhdGNoQ291bnQ7XHJcbiAgICAgICAgY29uc3QgaW5kZXhWZXJ0c0xlbmd0aCA9IGxvZDBWQyAqIHRoaXMuYmxhZGVTaWRlQ291bnQgKyBsb2QxVkMgKiB0aGlzLmJsYWRlU2lkZUNvdW50ICogbG9kMVBhdGNoQ291bnQgKyBsb2QyVkMgKiB0aGlzLmJsYWRlU2lkZUNvdW50ICogbG9kMlBhdGNoQ291bnQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJTdG9yZS5pbmRleCA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4Lmxlbmd0aCAhPT0gaW5kZXhMZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXggPSBuZXcgVWludDE2QXJyYXkoaW5kZXhMZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvZDJCbGFkZVNlZ3MgPiAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2QyUGF0Y2hDb3VudDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZDJWQzEgPSBpICogbG9kMlZDICogdGhpcy5ibGFkZVNpZGVDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2QyVkMyID0gbG9kMlZDMSArIGxvZDJWQyAqICh0aGlzLmJsYWRlU2lkZUNvdW50IC0gMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5faW5pdEJsYWRlSW5kaWNlcyh0aGlzLl9idWZmZXJTdG9yZS5pbmRleCwgbG9kMlZDMSwgbG9kMlZDMiwgaW5kZXgsIHRoaXMubG9kMkJsYWRlU2Vncyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxvZDBWQzEgPSBsb2QyVkMgKiBsb2QyUGF0Y2hDb3VudCAqIHRoaXMuYmxhZGVTaWRlQ291bnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvZDBWQzIgPSBsb2QwVkMxICsgbG9kMFZDICogKHRoaXMuYmxhZGVTaWRlQ291bnQgLSAxKTtcclxuXHJcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5faW5pdEJsYWRlSW5kaWNlcyh0aGlzLl9idWZmZXJTdG9yZS5pbmRleCwgbG9kMFZDMSwgbG9kMFZDMiwgaW5kZXgsIHRoaXMubG9kMEJsYWRlU2Vncyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5sb2QxQmxhZGVTZWdzID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9kMVBhdGNoQ291bnQ7IGkrKykge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZDFWQzEgPSBsb2QwVkMyICsgbG9kMFZDICsgaSAqIGxvZDFWQyAqIHRoaXMuYmxhZGVTaWRlQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9kMVZDMiA9IGxvZDFWQzEgKyBsb2QxVkMgKiAodGhpcy5ibGFkZVNpZGVDb3VudCAtIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuX2luaXRCbGFkZUluZGljZXModGhpcy5fYnVmZmVyU3RvcmUuaW5kZXgsIGxvZDFWQzEsIGxvZDFWQzIsIGluZGV4LCB0aGlzLmxvZDFCbGFkZVNlZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fYnVmZmVyU3RvcmUuaW5kZXhWZXJ0cyA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4VmVydHMubGVuZ3RoICE9PSBpbmRleFZlcnRzTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4VmVydHMgPSBuZXcgRmxvYXQzMkFycmF5KGluZGV4VmVydHNMZW5ndGgpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbml0QmxhZGVJbmRleFZlcnRzKHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4VmVydHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc2hhcmVkSW5kZXhCdWZmZXIgPSBuZXcgcGMuSW5kZXhCdWZmZXIoXHJcbiAgICAgICAgICAgIGdyYXBoaWNzRGV2aWNlLFxyXG4gICAgICAgICAgICBwYy5JTkRFWEZPUk1BVF9VSU5UMTYsXHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4Lmxlbmd0aCxcclxuICAgICAgICAgICAgcGMuQlVGRkVSX1NUQVRJQyxcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU3RvcmUuaW5kZXgsXHJcbiAgICAgICAgICAgIHsgc3RvcmFnZTogZmFsc2UgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoYXJlZFZlcnRleEJ1ZmZlciA9IG5ldyBwYy5WZXJ0ZXhCdWZmZXIoZ3JhcGhpY3NEZXZpY2UsIHRoaXMuX2dldFZlcnRleEZvcm1hdChncmFwaGljc0RldmljZSksIHRoaXMuX2J1ZmZlclN0b3JlLmluZGV4VmVydHMubGVuZ3RoLCB7XHJcbiAgICAgICAgICAgIHVzYWdlOiBwYy5CVUZGRVJfU1RBVElDLFxyXG4gICAgICAgICAgICBkYXRhOiB0aGlzLl9idWZmZXJTdG9yZS5pbmRleFZlcnRzLFxyXG4gICAgICAgICAgICBzdG9yYWdlOiBmYWxzZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVNZXNoTWF0ZXJpYWwoZ3JhcGhpY3NEZXZpY2U6IHBjeC5HcmFwaGljc0RldmljZSkge1xyXG5cclxuICAgICAgICB0aGlzLl9tYXRlcmlhbD8uZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsID0gbmV3IHBjLlN0YW5kYXJkTWF0ZXJpYWwoKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5uYW1lID0gXCJHcmFzc0ZpZWxkTWF0ZXJpYWxcIjtcclxuICAgICAgICAvL3RoaXMuX21hdGVyaWFsLnVzZU1ldGFsbmVzcyA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIFVzZWZ1bCBmb3IgYmxhZGVTaWRlQ291bnQgPT0gMVxyXG4gICAgICAgIC8vIHRoaXMuX21hdGVyaWFsLmN1bGwgPSBwYy5DVUxMRkFDRV9OT05FO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmRlcHRoVGVzdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmRlcHRoV3JpdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmJsZW5kVHlwZSA9IHBjLkJMRU5EX05PTkU7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuYWxwaGFUZXN0ID0gMDtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5hbHBoYVdyaXRlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuYWxwaGFGYWRlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuYWxwaGFUb0NvdmVyYWdlID0gZmFsc2U7XHJcbiAgICAgICAgKi9cclxuXHJcbiAgICAgICAgY29uc3QgdGVycmFpbiAgID0gdGhpcy5fdGVycmFpbi5vYmplY3Q7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0TWFwID0gdGhpcy5fdGVycmFpbi5oZWlnaHRNYXBUZXh0dXJlO1xyXG4gICAgICAgIGNvbnN0IHRlcnJhaW5TY2FsZSA9IHRoaXMuX3RlcnJhaW4uZW50aXR5LmdldFNjYWxlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldEF0dHJpYnV0ZSh2aW5kZXhBdHRyTmFtZSwgcGMuU0VNQU5USUNfUE9TSVRJT04pO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldEF0dHJpYnV0ZShvZmZzZXRBdHRyTmFtZSwgcGMuU0VNQU5USUNfQVRUUjEwKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRBdHRyaWJ1dGUoc2hhcGVBdHRyTmFtZSwgcGMuU0VNQU5USUNfQVRUUjExKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd1RGF0YU1hcCcsIHRoaXMuX2RhdGFUZXh0dXJlLnRleHR1cmUpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihoZWlnaHRNYXBQYXJhbU5hbWUsIGhlaWdodE1hcCk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGZpZWxkU2NhbGVQYXJhbU5hbWUsIFt0ZXJyYWluU2NhbGUueCwgdGVycmFpblNjYWxlLnksIHRlcnJhaW5TY2FsZS56XSk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKG1heEhlaWdodFBhcmFtTmFtZSwgdGVycmFpbi5tYXhIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcihgJHtsb2QxT2Zmc2V0WFpQYXJhbU5hbWV9WzBdYCwgdGhpcy5fZnJ1c3R1bS5sb2QxT2Zmc2V0cyk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGAke2xvZDJPZmZzZXRYWlBhcmFtTmFtZX1bMF1gLCB0aGlzLl9mcnVzdHVtLmxvZDJPZmZzZXRzKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKGRyYXdQb3NQYXJhbU5hbWUsIFswLCAwLCAwXSk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKHRpbWVQYXJhbU5hbWUsIHRoaXMuX3RpbWUpO1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLnNldFBhcmFtZXRlcih3aW5kSW50ZW5zaXR5UGFyYW1OYW1lLCAwKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5zZXRQYXJhbWV0ZXIoY2lyY2xlU21vb3RoaW5nUGFyYW1OYW1lLCB0aGlzLmNpcmNsZVNtb290aGluZyk7XHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKG1heFNsb3BlRmFjdG9yUGFyYW1OYW1lLCB0aGlzLm1heFNsb3BlRmFjdG9yKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTWF0ZXJpYWxEaWZmdXNlRGF0YSgpO1xyXG5cclxuICAgICAgICBjb25zdCBobUZvcm1hdCA9IGdldEhlaWdodE1hcEZvcm1hdChncmFwaGljc0RldmljZSwgdGVycmFpbi5oZWlnaHRNYXApO1xyXG4gICAgICAgIGNvbnN0IHBjVmVyc2lvbiA9IGB2JHtwYy52ZXJzaW9uWzBdfWAgYXMgdW5rbm93biBhcyBhbnk7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplUmFkaXVzID0gR3Jhc3NGaWVsZENvbXB1dGUuZ2V0Tm9ybWFsaXplUmFkaXVzKHRoaXMucmFkaXVzKTtcclxuICAgICAgICBjb25zdCBjaHVua3NTdG9yZSA9IGdldEdyYXNzU2hhZGVyQ2h1bmtzKHtcclxuICAgICAgICAgICAgd2lkdGg6IHRlcnJhaW4ud2lkdGgsXHJcbiAgICAgICAgICAgIGRlcHRoOiB0ZXJyYWluLmRlcHRoLFxyXG4gICAgICAgICAgICBoZWlnaHRNYXBDaHVua1NpemU6IHRlcnJhaW4uaGVpZ2h0TWFwLmRhdGFDaHVua1NpemUsXHJcbiAgICAgICAgICAgIGhlaWdodE1hcEZvcm1hdDogaG1Gb3JtYXQsXHJcbiAgICAgICAgICAgIGxvZDBCbGFkZVNlZ3M6IHRoaXMubG9kMEJsYWRlU2VncyxcclxuICAgICAgICAgICAgbG9kMUJsYWRlU2VnczogdGhpcy5sb2QxQmxhZGVTZWdzLFxyXG4gICAgICAgICAgICBsb2QyQmxhZGVTZWdzOiB0aGlzLmxvZDJCbGFkZVNlZ3MsXHJcbiAgICAgICAgICAgIHNpZGVDb3VudDogdGhpcy5ibGFkZVNpZGVDb3VudCxcclxuICAgICAgICAgICAgcmFkaXVzOiBub3JtYWxpemVSYWRpdXMsXHJcbiAgICAgICAgICAgIGVuZ2luZVZlcnNpb246IHBjVmVyc2lvbixcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2h1bmtOYW1lcyA9IE9iamVjdC5rZXlzKGNodW5rc1N0b3JlKTtcclxuICAgICAgICBjb25zdCBzaGFkZXJDaHVua3MgPSB0aGlzLl9tYXRlcmlhbC5nZXRTaGFkZXJDaHVua3M/LihwYy5TSEFERVJMQU5HVUFHRV9HTFNMKTtcclxuXHJcbiAgICAgICAgaWYgKHNoYWRlckNodW5rcykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgY2h1bmtOYW1lIG9mIGNodW5rTmFtZXMpIHtcclxuICAgICAgICAgICAgICAgIHNoYWRlckNodW5rcy5zZXQoY2h1bmtOYW1lLCBjaHVua3NTdG9yZVtjaHVua05hbWVdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2hhZGVyQ2h1bmtzVmVyc2lvbiA9IHBjLkNIVU5LQVBJXzFfNzA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2h1bmtzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0gdGhpcy5fbWF0ZXJpYWwuY2h1bmtzO1xyXG5cclxuICAgICAgICAgICAgY2h1bmtzLkFQSVZlcnNpb24gPSBwYy5DSFVOS0FQSV8xXzcwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgY2h1bmtOYW1lIG9mIGNodW5rTmFtZXMpIHtcclxuICAgICAgICAgICAgICAgIGNodW5rc1tjaHVua05hbWVdID0gY2h1bmtzU3RvcmVbY2h1bmtOYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwudXBkYXRlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdyYXNzRmllbGQ7XHJcbmV4cG9ydCBjb25zdCBncmFzc0ZpZWxkU2NyaXB0TmFtZSA9IFwiZ3Jhc3NGaWVsZFwiO1xyXG5cclxucGMucmVnaXN0ZXJTY3JpcHQoR3Jhc3NGaWVsZCwgZ3Jhc3NGaWVsZFNjcmlwdE5hbWUpO1xyXG5cclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcInBhaW50aW5nXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiY2FzdFNoYWRvd1wiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlLCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcInJlY2VpdmVTaGFkb3dcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogdHJ1ZSwgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJ3aXJlZnJhbWVcIiwgeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogZmFsc2UgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJmcmVlemVEcmF3UG9zXCIsIHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiYXV0b1JlbmRlclwiLCB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiY2lyY2xlU21vb3RoaW5nXCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMi40LCBtaW46IDAuNSwgbWF4OiAzLjUgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJtYXhTbG9wZUZhY3RvclwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDAuODUsIG1pbjogMC4wMDEsIG1heDogMS4wIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwic2VlZFwiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDkxOTE5MSwgbWluOiAxLCBzdGVwOiAxLCBwcmVjaXNpb246IDAgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJ3aW5kSW50ZW5zaXR5XCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMCwgbWluOiAtMzAsIG1heDogMzAgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJyYWRpdXNcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA4MCwgbWluOiAxLCBtYXg6IDMwMCwgc3RlcDogMSwgcHJlY2lzaW9uOiAwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwibnVtQmxhZGVzXCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogNDAwMCwgbWluOiAwLCBtYXg6IDgwMDAwMDAsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImJ1bmNoV2lkdGhcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA0LCBtaW46IDEsIG1heDogMjAsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImJ1bmNoRGVwdGhcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA0LCBtaW46IDEsIG1heDogMjAsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImJ1bmNoUmFuZFJhZGl1c1wiLCB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDAsIG1pbjogMCwgbWF4OiAxMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImxvZDBCbGFkZVNlZ3NcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAzLCBtaW46IDEsIG1heDogMjAsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImxvZDFCbGFkZVNlZ3NcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAyLCBtaW46IDAsIG1heDogMjAsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImxvZDJCbGFkZVNlZ3NcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAxLCBtaW46IDAsIG1heDogMjAsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImJsYWRlU2lkZUNvdW50XCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMiwgbWluOiAxLCBtYXg6IDIsIHN0ZXA6IDEsIHByZWNpc2lvbjogMCB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImJsYWRlV2lkdGhcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAwLjA0LCBtaW46IDAuMDEsIG1heDogNSB9KTtcclxuR3Jhc3NGaWVsZC5hdHRyaWJ1dGVzLmFkZChcImJsYWRlTWluSGVpZ2h0XCIsIHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMC4yNSwgbWluOiAwLjAxLCBtYXg6IDEwIH0pO1xyXG5HcmFzc0ZpZWxkLmF0dHJpYnV0ZXMuYWRkKFwiYmxhZGVNYXhIZWlnaHRcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAxLCBtaW46IDAuMDEsIG1heDogMjAgfSk7XHJcbkdyYXNzRmllbGQuYXR0cmlidXRlcy5hZGQoXCJ0ZXh0dXJlc1wiLCB7XHJcbiAgICB0eXBlOiBcImpzb25cIixcclxuICAgIGFycmF5OiB0cnVlLFxyXG4gICAgc2NoZW1hOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcIm5hbWVcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiTmFtZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcImRpZmZ1c2VcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiRGlmZnVzZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcImFzc2V0XCIsXHJcbiAgICAgICAgICAgIGFzc2V0VHlwZTogXCJ0ZXh0dXJlXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiY29sb3JcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiQ29sb3JcIixcclxuICAgICAgICAgICAgdHlwZTogXCJyZ2JcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBcImNvbG9yUmFuZG9tXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIkNvbG9yIFJhbmRvbVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcInZlYzNcIixcclxuICAgICAgICAgICAgZGVmYXVsdDogWzAuMDEsIDAuMDEsIDAuMDFdXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59KTsiLCJpbXBvcnQgeyBjbGFtcCB9IGZyb20gXCIuLi9FeHRyYXMvVXRpbHMubWpzXCI7XHJcbmltcG9ydCB0eXBlIFRlcnJhaW4gZnJvbSBcIi4uL1NjcmlwdHMvVGVycmFpbi5tanNcIjtcclxuaW1wb3J0IHR5cGUgR3Jhc3NGaWVsZCBmcm9tIFwiLi4vU2NyaXB0cy9HcmFzc0ZpZWxkLm1qc1wiO1xyXG5pbXBvcnQgeyBkcmF3Qm94IH0gZnJvbSBcIi4uL0V4dHJhcy9EZWJ1Zy5tanNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBsb2QwUGF0Y2hDb3VudCA9IDE7XHJcbmV4cG9ydCBjb25zdCBsb2QxUGF0Y2hDb3VudCA9IDg7XHJcbmV4cG9ydCBjb25zdCBsb2QyUGF0Y2hDb3VudCA9IDE2O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhbWVyYUNvcm5lcnNDb2xvciA9IHBjLkNvbG9yLllFTExPVztcclxuZXhwb3J0IGNvbnN0IGNhbWVyYUNvcm5lcnNJbmRpY2VzID0gW1xyXG4gICAgWzAsMV0sIFsxLDJdLCBbMiwzXSwgWzMsMF0sXHJcbiAgICBbNCw1XSwgWzUsNl0sIFs2LDddLCBbNyw0XSxcclxuICAgIFswLDRdLCBbMSw1XSwgWzIsNl0sIFszLDddXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgcGF0Y2hMb2QxTWF0cml4OiBSZWFkb25seTxudW1iZXJbXT4gPSBbXHJcbiAgICAyLCAyLCAgMSwgMiwgIDAsIDIsXHJcbiAgICAwLCAxLCAgMCwgMCwgIDEsIDAsXHJcbiAgICAyLCAwLCAgMiwgMSwgIDEsIDFcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXRjaExvZDJNYXRyaXg6IFJlYWRvbmx5PG51bWJlcltdPiA9IFtcclxuICAgIDQsIDQsICAzLCA0LCAgMiwgNCwgIDEsIDQsXHJcbiAgICAwLCA0LCAgMCwgMywgIDAsIDIsICAwLCAxLFxyXG4gICAgMCwgMCwgIDEsIDAsICAyLCAwLCAgMywgMCxcclxuICAgIDQsIDAsICA0LCAxLCAgNCwgMiwgIDQsIDNcclxuXTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdyYXNzRmllbGRGcnVzdHVtIHtcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBfbG9kMU9mZnNldHM6IG51bWJlcltdID0gW1xyXG4gICAgICAgIDAsIDAsICAwLCAwLFxyXG4gICAgICAgIDAsIDAsICAwLCAwLFxyXG4gICAgICAgIDAsIDAsICAwLCAwLFxyXG4gICAgICAgIDAsIDAsICAwLCAwLFxyXG4gICAgXTtcclxuXHJcbiAgICBwcml2YXRlIF9sb2QyT2Zmc2V0czogbnVtYmVyW10gPSBbXHJcbiAgICAgICAgMCwgMCwgIDAsIDAsICAwLCAwLCAgMCwgMCxcclxuICAgICAgICAwLCAwLCAgMCwgMCwgIDAsIDAsICAwLCAwLFxyXG4gICAgICAgIDAsIDAsICAwLCAwLCAgMCwgMCwgIDAsIDAsXHJcbiAgICAgICAgMCwgMCwgIDAsIDAsICAwLCAwLCAgMCwgMCxcclxuICAgIF07XHJcblxyXG4gICAgcHJpdmF0ZSBfbG9kMU1pbk1heFN0b3JlOiBBcnJheTxbcGN4LlZlYzMsIHBjeC5WZWMzLCBib29sZWFuXT4gPSBbXTtcclxuICAgIHByaXZhdGUgX2xvZDJNaW5NYXhTdG9yZTogQXJyYXk8W3BjeC5WZWMzLCBwY3guVmVjMywgYm9vbGVhbl0+ID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBfd29ybGRDb3JuZXMgPSBbbmV3IHBjLlZlYzMoKSwgbmV3IHBjLlZlYzMoKSwgbmV3IHBjLlZlYzMoKSwgbmV3IHBjLlZlYzMoKSwgbmV3IHBjLlZlYzMoKSwgbmV3IHBjLlZlYzMoKSwgbmV3IHBjLlZlYzMoKSwgbmV3IHBjLlZlYzMoKV07XHJcbiAgICBwcml2YXRlIF9idWZmZXJlZENvcm5lcyA9IGZhbHNlO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgbG9kMU9mZnNldHMoKTogbnVtYmVyW10geyByZXR1cm4gdGhpcy5fbG9kMU9mZnNldHM7IH1cclxuICAgIHB1YmxpYyBnZXQgbG9kMk9mZnNldHMoKTogbnVtYmVyW10geyByZXR1cm4gdGhpcy5fbG9kMk9mZnNldHM7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSB0ZXJyYWluOiBUZXJyYWluLFxyXG4gICAgICAgIHJlYWRvbmx5IGNhbWVyYTogcGN4LkNhbWVyYSxcclxuICAgICkge1xyXG4gICAgICAgIC8vIHVwZGF0ZSBzZXQgY2hlY2sgaXMgdmlzaWJsZSBmb3IgdmVyc2lvbiAyXHJcbiAgICAgICAgaWYgKHRoaXMuY2FtZXJhPy5mcnVzdHVtLnBsYW5lcyAmJlxyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5mcnVzdHVtLnBsYW5lc1swXSBpbnN0YW5jZW9mIHBjLlBsYW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrSXNWaXNpYmxlID0gdGhpcy5fY2hlY2tJc1Zpc2libGVOZXcgYXMgYW55O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tJc1Zpc2libGUgPSB0aGlzLl9jaGVja0lzVmlzaWJsZU9sZCBhcyBhbnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NoZWNrSXNWaXNpYmxlKG1pbjogcGN4LlZlYzMsIG1heDogcGN4LlZlYzMsIGZydXN0dW1QbGFuZXM6IHBjeC5QbGFuZVtdIHwgbnVtYmVyW11bXSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jaGVja0lzVmlzaWJsZU9sZChtaW46IHBjeC5WZWMzLCBtYXg6IHBjeC5WZWMzLCBmcnVzdHVtUGxhbmVzOiBudW1iZXJbXVtdKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgNjsgcCsrKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBmcnVzdHVtUGxhbmUgPSBmcnVzdHVtUGxhbmVzW3BdO1xyXG4gICAgICAgICAgICBjb25zdCBkID0gTWF0aC5tYXgobWluLnggKiBmcnVzdHVtUGxhbmVbMF0sIG1heC54ICogZnJ1c3R1bVBsYW5lWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICsgTWF0aC5tYXgobWluLnkgKiBmcnVzdHVtUGxhbmVbMV0sIG1heC55ICogZnJ1c3R1bVBsYW5lWzFdKVxyXG4gICAgICAgICAgICAgICAgICAgICsgTWF0aC5tYXgobWluLnogKiBmcnVzdHVtUGxhbmVbMl0sIG1heC56ICogZnJ1c3R1bVBsYW5lWzJdKVxyXG4gICAgICAgICAgICAgICAgICAgICsgZnJ1c3R1bVBsYW5lWzNdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jaGVja0lzVmlzaWJsZU5ldyhtaW46IHBjeC5WZWMzLCBtYXg6IHBjeC5WZWMzLCBmcnVzdHVtUGxhbmVzOiBwY3guUGxhbmVbXSkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IDY7IHArKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZnJ1c3R1bVBsYW5lID0gZnJ1c3R1bVBsYW5lc1twXTtcclxuICAgICAgICAgICAgY29uc3QgZCA9IE1hdGgubWF4KG1pbi54ICogZnJ1c3R1bVBsYW5lLm5vcm1hbC54LCBtYXgueCAqIGZydXN0dW1QbGFuZS5ub3JtYWwueClcclxuICAgICAgICAgICAgICAgICAgICArIE1hdGgubWF4KG1pbi55ICogZnJ1c3R1bVBsYW5lLm5vcm1hbC55LCBtYXgueSAqIGZydXN0dW1QbGFuZS5ub3JtYWwueSlcclxuICAgICAgICAgICAgICAgICAgICArIE1hdGgubWF4KG1pbi56ICogZnJ1c3R1bVBsYW5lLm5vcm1hbC56LCBtYXgueiAqIGZydXN0dW1QbGFuZS5ub3JtYWwueilcclxuICAgICAgICAgICAgICAgICAgICArIGZydXN0dW1QbGFuZS5kaXN0YW5jZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlTWluTWF4RnJvbVBhdGNoZXMobWluOiBwY3guVmVjMywgbWF4OiBwY3guVmVjMykge1xyXG5cclxuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMudGVycmFpbi5vYmplY3Qud2lkdGg7XHJcbiAgICAgICAgY29uc3QgZGVwdGggPSB0aGlzLnRlcnJhaW4ub2JqZWN0LmRlcHRoO1xyXG4gICAgICAgIGNvbnN0IHBhdGNoU2l6ZSA9IHRoaXMudGVycmFpbi5vYmplY3QucGF0Y2hTaXplO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodE1hcCA9IHRoaXMudGVycmFpbi5vYmplY3QuaGVpZ2h0TWFwO1xyXG5cclxuICAgICAgICBjb25zdCBtaW5QYXRjaFggPSBjbGFtcChtaW4ueCwgMCwgd2lkdGgpIC8gcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBtaW5QYXRjaFogPSBjbGFtcChtaW4ueiwgMCwgZGVwdGgpIC8gcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBtYXhQYXRjaFggPSBjbGFtcChtYXgueCwgMCwgd2lkdGgpIC8gcGF0Y2hTaXplIHwgMDtcclxuICAgICAgICBjb25zdCBtYXhQYXRjaFogPSBjbGFtcChtYXgueiwgMCwgZGVwdGgpIC8gcGF0Y2hTaXplIHwgMDtcclxuXHJcbiAgICAgICAgY29uc3QgbWluMDAgPSBoZWlnaHRNYXAuZ2V0UGVyZm9ybVBhdGNoTWluKG1pblBhdGNoWCwgbWluUGF0Y2haKTtcclxuICAgICAgICBjb25zdCBtaW4wMSA9IGhlaWdodE1hcC5nZXRQZXJmb3JtUGF0Y2hNaW4obWluUGF0Y2hYLCBtYXhQYXRjaFopO1xyXG4gICAgICAgIGNvbnN0IG1pbjEwID0gaGVpZ2h0TWFwLmdldFBlcmZvcm1QYXRjaE1pbihtYXhQYXRjaFgsIG1pblBhdGNoWik7XHJcbiAgICAgICAgY29uc3QgbWluMTEgPSBoZWlnaHRNYXAuZ2V0UGVyZm9ybVBhdGNoTWluKG1heFBhdGNoWCwgbWF4UGF0Y2haKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4MDAgPSBoZWlnaHRNYXAuZ2V0UGVyZm9ybVBhdGNoTWF4KG1pblBhdGNoWCwgbWluUGF0Y2haKTtcclxuICAgICAgICBjb25zdCBtYXgwMSA9IGhlaWdodE1hcC5nZXRQZXJmb3JtUGF0Y2hNYXgobWluUGF0Y2hYLCBtYXhQYXRjaFopO1xyXG4gICAgICAgIGNvbnN0IG1heDEwID0gaGVpZ2h0TWFwLmdldFBlcmZvcm1QYXRjaE1heChtYXhQYXRjaFgsIG1pblBhdGNoWik7XHJcbiAgICAgICAgY29uc3QgbWF4MTEgPSBoZWlnaHRNYXAuZ2V0UGVyZm9ybVBhdGNoTWF4KG1heFBhdGNoWCwgbWF4UGF0Y2haKTtcclxuXHJcbiAgICAgICAgbWluLnkgPSBNYXRoLm1pbihtaW4wMCwgbWluMDEsIG1pbjEwLCBtaW4xMSk7XHJcbiAgICAgICAgbWF4LnkgPSBNYXRoLm1heChtYXgwMCwgbWF4MDEsIG1heDEwLCBtYXgxMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW50ZXJuYWxGcnVzdHVtKFxyXG4gICAgICAgIGNvdW50OiBudW1iZXIsXHJcbiAgICAgICAgcGF0Y2hTaXplOiBudW1iZXIsXHJcbiAgICAgICAgcGF0Y2hNYXRyaXg6IFJlYWRvbmx5PG51bWJlcltdPixcclxuICAgICAgICBwYXRjaE9mZnNldDogbnVtYmVyLFxyXG4gICAgICAgIG1pbk1heFN0b3JlOiBBcnJheTxbcGN4LlZlYzMsIHBjeC5WZWMzLCBib29sZWFuXT4sXHJcbiAgICAgICAgb2Zmc2V0QXJyOiBudW1iZXJbXSxcclxuICAgICAgICBpbnZlcnNlOiBib29sZWFuLFxyXG4gICAgICAgIGNhbWVyYVBvczogcGN4LlZlYzMsXHJcbiAgICAgICAgZnJlZXplOiBib29sZWFuLFxyXG4gICAgKSB7XHJcbiAgICAgICAgbGV0IHZpc2libGVDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlcnJhaW5TY2FsZSAgPSB0aGlzLnRlcnJhaW4uZW50aXR5LmdldFNjYWxlKCk7XHJcbiAgICAgICAgY29uc3QgZnJ1c3R1bVBsYW5lcyA9IHRoaXMuY2FtZXJhLmZydXN0dW0ucGxhbmVzO1xyXG5cclxuICAgICAgICAvLyA1IGJlY2F1c2UgbG9kMCArIGxvZDEgKyBsb2QyXHJcbiAgICAgICAgY29uc3Qgc3RlcCA9IHBhdGNoU2l6ZSAqIDI7XHJcblxyXG4gICAgICAgIC8vIGxvY2FsIC0gcmVsYXRpdmUgb2Ygc3RhcnQgdGVycmFpbiB4elxyXG4gICAgICAgIGNvbnN0IHRlcnJhaW5XaWR0aCA9IHRoaXMudGVycmFpbi5vYmplY3Qud2lkdGg7XHJcbiAgICAgICAgY29uc3QgdGVycmFpbkRlcHRoID0gdGhpcy50ZXJyYWluLm9iamVjdC5kZXB0aDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW1pbk1heFN0b3JlW2ldKSBtaW5NYXhTdG9yZVtpXSA9IFtuZXcgcGMuVmVjMygpLCBuZXcgcGMuVmVjMygpLCBmYWxzZV07XHJcbiAgICAgICAgICAgIGlmICghZnJlZXplKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hYID0gcGF0Y2hNYXRyaXhbaSAqIDIgKyAwXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoWiA9IHBhdGNoTWF0cml4W2kgKiAyICsgMV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGl2ZUNlbnRlclggPSBzdGVwICogKHBhdGNoWCAtIHBhdGNoT2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlQ2VudGVyWiA9IHN0ZXAgKiAocGF0Y2haIC0gcGF0Y2hPZmZzZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmxkQ2VudGVyWCA9IGNhbWVyYVBvcy54ICsgcmVsYXRpdmVDZW50ZXJYO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ybGRDZW50ZXJaID0gY2FtZXJhUG9zLnogKyByZWxhdGl2ZUNlbnRlclo7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ybGRNaW5YID0gd29ybGRDZW50ZXJYIC0gcGF0Y2hTaXplO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ybGRNaW5aID0gd29ybGRDZW50ZXJaIC0gcGF0Y2hTaXplO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ybGRNYXhYID0gd29ybGRDZW50ZXJYICsgcGF0Y2hTaXplO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ybGRNYXhaID0gd29ybGRDZW50ZXJaICsgcGF0Y2hTaXplO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsTWluWCA9IHdvcmxkTWluWCAvIHRlcnJhaW5TY2FsZS54ICsgdGVycmFpbldpZHRoIC8gMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsTWluWiA9IHdvcmxkTWluWiAvIHRlcnJhaW5TY2FsZS56ICsgdGVycmFpbkRlcHRoIC8gMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsTWF4WCA9IHdvcmxkTWF4WCAvIHRlcnJhaW5TY2FsZS54ICsgdGVycmFpbldpZHRoIC8gMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsTWF4WiA9IHdvcmxkTWF4WiAvIHRlcnJhaW5TY2FsZS56ICsgdGVycmFpbkRlcHRoIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsb2NhbE1heFggPiAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxNYXhaID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsTWluWCA8IHRlcnJhaW5XaWR0aCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsTWluWiA8IHRlcnJhaW5EZXB0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBtaW5NYXhTdG9yZVtpXVswXS5zZXQobG9jYWxNaW5YLCAwLCBsb2NhbE1pblopO1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbk1heFN0b3JlW2ldWzFdLnNldChsb2NhbE1heFgsIDAsIGxvY2FsTWF4Wik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1pbk1heEZyb21QYXRjaGVzKG1pbk1heFN0b3JlW2ldWzBdLCBtaW5NYXhTdG9yZVtpXVsxXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmxkTWluWSA9IG1pbk1heFN0b3JlW2ldWzBdLnkgKiB0ZXJyYWluU2NhbGUueTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JsZE1heFkgPSBtaW5NYXhTdG9yZVtpXVsxXS55ICogdGVycmFpblNjYWxlLnk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1pbk1heFN0b3JlW2ldWzBdLnNldCh3b3JsZE1pblgsIHdvcmxkTWluWSwgd29ybGRNaW5aKTtcclxuICAgICAgICAgICAgICAgICAgICBtaW5NYXhTdG9yZVtpXVsxXS5zZXQod29ybGRNYXhYLCB3b3JsZE1heFksIHdvcmxkTWF4Wik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGUgPSB0aGlzLl9jaGVja0lzVmlzaWJsZShtaW5NYXhTdG9yZVtpXVswXSwgbWluTWF4U3RvcmVbaV1bMV0sIGZydXN0dW1QbGFuZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgc3RhcnQgb2Zmc2V0IGZvciBwYXRjaCBjZW50ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0QXJyW3Zpc2libGVDb3VudCAqIDIgKyAwXSA9IHJlbGF0aXZlQ2VudGVyWCArIHBhdGNoU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0QXJyW3Zpc2libGVDb3VudCAqIDIgKyAxXSA9IHJlbGF0aXZlQ2VudGVyWiArIHBhdGNoU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5NYXhTdG9yZVtpXVswXS5zZXQod29ybGRNaW5YLCAwLCB3b3JsZE1pblopO1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbk1heFN0b3JlW2ldWzFdLnNldCh3b3JsZE1heFgsIDAsIHdvcmxkTWF4Wik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbWluTWF4U3RvcmVbaV1bMl0gPSB2aXNpYmxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtaW4gPSBtaW5NYXhTdG9yZVtpXVswXTtcclxuICAgICAgICAgICAgY29uc3QgbWF4ID0gbWluTWF4U3RvcmVbaV1bMV07XHJcbiAgICAgICAgICAgIGNvbnN0IHZpcyA9IG1pbk1heFN0b3JlW2ldWzJdO1xyXG5cclxuICAgICAgICAgICAgLy9pZiAoZnJlZXplKSB7XHJcbiAgICAgICAgICAgICAgICBkcmF3Qm94KHsgbWluLCBtYXgsIGNvbG9yOiB2aXMgPyBwYy5Db2xvci5HUkVFTiA6IHBjLkNvbG9yLlJFRCB9KTtcclxuICAgICAgICAgICAgLy99XHJcblxyXG4gICAgICAgICAgICB2aXNpYmxlQ291bnQgKz0gTnVtYmVyKHZpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWZyZWV6ZSAmJiBpbnZlcnNlICYmIHZpc2libGVDb3VudCA+IDApIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGhpZGRlbkNvdW50ID0gY291bnQgLSB2aXNpYmxlQ291bnQ7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdmlzaWJsZUNvdW50OyBpID4gLTE7IGktLSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4SW4gPSAoaGlkZGVuQ291bnQgKyBpKSAqIDI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleE9yID0gaSAqIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0QXJyW2luZGV4SW4gKyAwXSA9IG9mZnNldEFycltpbmRleE9yICsgMF07XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRBcnJbaW5kZXhJbiArIDFdID0gb2Zmc2V0QXJyW2luZGV4T3IgKyAxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZpc2libGVDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZnJ1c3R1bUxvZDEoY2FtZXJhUG9zOiBwY3guVmVjMywgcGF0Y2hTaXplOiBudW1iZXIsIGZyZWV6ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbEZydXN0dW0obG9kMVBhdGNoQ291bnQsIHBhdGNoU2l6ZSwgcGF0Y2hMb2QxTWF0cml4LCAxLCB0aGlzLl9sb2QxTWluTWF4U3RvcmUsIHRoaXMuX2xvZDFPZmZzZXRzLCBmYWxzZSwgY2FtZXJhUG9zLCBmcmVlemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmcnVzdHVtTG9kMihjYW1lcmFQb3M6IHBjeC5WZWMzLCBwYXRjaFNpemU6IG51bWJlciwgZnJlZXplOiBib29sZWFuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsRnJ1c3R1bShsb2QyUGF0Y2hDb3VudCwgcGF0Y2hTaXplLCBwYXRjaExvZDJNYXRyaXgsIDIsIHRoaXMuX2xvZDJNaW5NYXhTdG9yZSwgdGhpcy5fbG9kMk9mZnNldHMsIHRydWUsIGNhbWVyYVBvcywgZnJlZXplKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhd0Nvcm5lcyhmcmVlemU6IGJvb2xlYW4pIHtcclxuXHJcbiAgICAgICAgaWYgKGZyZWV6ZSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9idWZmZXJlZENvcm5lcykge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2J1ZmZlcmVkQ29ybmVzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb3JuZXMgPSB0aGlzLmNhbWVyYS5nZXRGcnVzdHVtQ29ybmVycygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FtZXJhTWF0ID0gdGhpcy5jYW1lcmEubm9kZS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3JuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWYgPSB0aGlzLl93b3JsZENvcm5lc1tpXS5jb3B5KGNvcm5lc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhTWF0LnRyYW5zZm9ybVBvaW50KHJlZiwgcmVmKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYW1lcmFDb3JuZXJzSW5kaWNlcy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fd29ybGRDb3JuZXNbY2FtZXJhQ29ybmVyc0luZGljZXNbaV1bMF1dO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kICAgPSB0aGlzLl93b3JsZENvcm5lc1tjYW1lcmFDb3JuZXJzSW5kaWNlc1tpXVsxXV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlcnJhaW4uYXBwLmRyYXdMaW5lKHN0YXJ0LCBlbmQsIGNhbWVyYUNvcm5lcnNDb2xvciwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJlZENvcm5lcyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBGbHlDYW1lcmEgZXh0ZW5kcyBwYy5TY3JpcHRUeXBlIHtcclxuXHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBtb2RlOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBzcGVlZDogbnVtYmVyO1xyXG4gICAgZGVjbGFyZSBwdWJsaWMgcmVhZG9ubHkgc2xvd1NwZWVkOiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBmYXN0U3BlZWQ6IG51bWJlcjtcclxuICAgIGRlY2xhcmUgcHVibGljIHJlYWRvbmx5IHNlbnNpdGl2aXR5OiBudW1iZXI7XHJcbiAgICBkZWNsYXJlIHB1YmxpYyByZWFkb25seSBtb2JpbGVDb250cm9sczogcGN4LkVudGl0eSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBwcml2YXRlIGV4OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGV5OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHRyYW5zbGF0ZUxvYzogcGN4LlZlYzM7XHJcbiAgICBwcml2YXRlIG1vdmVkOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBtaWRkbGVEb3duOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSByaWdodERvd246IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIG1vYmlsZUNvbnRyb2w6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgLy8gQ2FtZXJhIGV1bGVyIGFuZ2xlIHJvdGF0aW9uIGFyb3VuZCB4IGFuZCB5IGF4ZXNcclxuICAgICAgICBjb25zdCBldWxlcnMgPSB0aGlzLmVudGl0eS5nZXRMb2NhbEV1bGVyQW5nbGVzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZXggPSAoZXVsZXJzLnogLSBldWxlcnMueCk7XHJcbiAgICAgICAgdGhpcy5leSA9IChldWxlcnMueiAtIGV1bGVycy55KTtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZUxvYyA9IHBjLlZlYzMuWkVSTy5jbG9uZSgpO1xyXG4gICAgICAgIHRoaXMubW92ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJpZ2h0RG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubWlkZGxlRG93biA9IGZhbHNlO1xyXG4gICAgXHJcbiAgICAgICAgLy8gRGlzYWJsaW5nIHRoZSBjb250ZXh0IG1lbnUgc3RvcHMgdGhlIGJyb3dzZXIgZGlzcGxheWluZyBhIG1lbnUgd2hlblxyXG4gICAgICAgIC8vIHlvdSByaWdodC1jbGljayB0aGUgcGFnZVxyXG4gICAgICAgIGlmICh0aGlzLmFwcC5tb3VzZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZS5kaXNhYmxlQ29udGV4dE1lbnUoKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2Uub24ocGMuRVZFTlRfTU9VU0VNT1ZFLCB0aGlzLm9uTW91c2VNb3ZlLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2Uub24ocGMuRVZFTlRfTU9VU0VET1dOLCB0aGlzLm9uTW91c2VEb3duLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAubW91c2Uub24ocGMuRVZFTlRfTU9VU0VVUCwgICB0aGlzLm9uTW91c2VVcCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3RoaXMuZW50aXR5LmNhbWVyYSEuc2V0U2hhZGVyUGFzcyhwYy5TSEFERVJQQVNTX1dPUkxETk9STUFMKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXBwZW5kKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5leCArPSB4O1xyXG4gICAgICAgIHRoaXMuZXkgKz0geTtcclxuICAgICAgICB0aGlzLmV4ID0gcGMubWF0aC5jbGFtcCh0aGlzLmV4LCAtOTAsIDkwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdHJhbnNsYXRlKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZUxvYy54ICs9IHg7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGVMb2MueSArPSB5O1xyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlTG9jLnogKz0gejtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgY29uc3QgYXBwID0gdGhpcy5hcHA7XHJcblxyXG4gICAgICAgIGxldCBzcGVlZCA9IHRoaXMuc3BlZWQ7XHJcblxyXG4gICAgICAgIGlmIChhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfU1BBQ0UpKSB7XHJcbiAgICAgICAgICAgIHNwZWVkID0gdGhpcy5zbG93U3BlZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfU0hJRlQpKSB7XHJcbiAgICAgICAgICAgIHNwZWVkID0gdGhpcy5mYXN0U3BlZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBKb3lwYWQgY29udHJvbFxyXG4gICAgICAgIGNvbnN0IGpveXN0aWNrTW92ZXIgPSB0b3VjaEpveXBhZD8uc3RpY2tzWydqb3lzdGljazAnXTtcclxuICAgICAgICBjb25zdCBqb3lzdGlja1JvdGVyID0gdG91Y2hKb3lwYWQ/LnN0aWNrc1snam95c3RpY2sxJ107XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMubW9iaWxlQ29udHJvbHMgJiYgdG91Y2hKb3lwYWQ/LmJ1dHRvbnMud2FzUHJlc3NlZCgnYnV0dG9uMicpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9iaWxlQ29udHJvbCA9ICF0aGlzLm1vYmlsZUNvbnRyb2w7XHJcbiAgICAgICAgICAgIHRoaXMubW9iaWxlQ29udHJvbHMuZW5hYmxlZCA9IHRoaXMubW9iaWxlQ29udHJvbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChqb3lzdGlja1JvdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kKGpveXN0aWNrUm90ZXIueSwgLWpveXN0aWNrUm90ZXIueCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoam95c3RpY2tNb3Zlcikge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZShzcGVlZCAqIGpveXN0aWNrTW92ZXIueCAqIGR0LCAwLCAtc3BlZWQgKiBqb3lzdGlja01vdmVyLnkgKiBkdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIGNhbWVyYSdzIHBvc2l0aW9uXHJcbiAgICAgICAgaWYgKGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9VUCkgfHwgYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX1cpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlKDAsIDAsIC1zcGVlZCAqIGR0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9ET1dOKSB8fCBhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfUykpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoMCwgMCwgc3BlZWQgKiBkdCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKGFwcC5rZXlib2FyZD8uaXNQcmVzc2VkKHBjLktFWV9MRUZUKSB8fCBhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfQSkpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoLXNwZWVkICogZHQsIDAsIDApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYXBwLmtleWJvYXJkPy5pc1ByZXNzZWQocGMuS0VZX1JJR0hUKSB8fCBhcHAua2V5Ym9hcmQ/LmlzUHJlc3NlZChwYy5LRVlfRCkpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGUoc3BlZWQgKiBkdCwgMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgY2FtZXJhJ3MgVFJTXHJcbiAgICAgICAgdGhpcy5lbnRpdHkuc2V0TG9jYWxFdWxlckFuZ2xlcyh0aGlzLmV4LCB0aGlzLmV5LCAwKTtcclxuICAgICAgICB0aGlzLmVudGl0eS50cmFuc2xhdGVMb2NhbCh0aGlzLnRyYW5zbGF0ZUxvYyk7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGVMb2Muc2V0KDAsIDAsIDApO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgZnJ1c3R1bSBieSBhY3R1YWwgbWF0cml4XHJcbiAgICAgICAgdGhpcy5hcHAucmVuZGVyZXIudXBkYXRlQ2FtZXJhRnJ1c3R1bSh0aGlzLmVudGl0eS5jYW1lcmE/LmNhbWVyYSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbk1vdXNlTW92ZShldmVudDogcGN4Lk1vdXNlRXZlbnQpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLm1vZGUgJiYgIXBjLk1vdXNlLmlzUG9pbnRlckxvY2tlZCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5yaWdodERvd24gJiZcclxuICAgICAgICAgICAgIXRoaXMubWlkZGxlRG93bilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgRXVsZXIgYW5nbGVzLCBjbGFtcCB0aGUgcGl0Y2guXHJcbiAgICAgICAgaWYgKCF0aGlzLm1vdmVkKSB7XHJcbiAgICAgICAgICAgIC8vIGZpcnN0IG1vdmUgZXZlbnQgY2FuIGJlIHZlcnkgbGFyZ2VcclxuICAgICAgICAgICAgdGhpcy5tb3ZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJpZ2h0RG93bikge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgIC1ldmVudC5keSAvIHRoaXMuc2Vuc2l0aXZpdHksXHJcbiAgICAgICAgICAgICAgICAtZXZlbnQuZHggLyB0aGlzLnNlbnNpdGl2aXR5XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5taWRkbGVEb3duKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgc3BlZWQgPSB0aGlzLnNwZWVkO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hcHAua2V5Ym9hcmQhLmlzUHJlc3NlZChwYy5LRVlfU0hJRlQpKSB7XHJcbiAgICAgICAgICAgICAgICBzcGVlZCA9IHRoaXMuZmFzdFNwZWVkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZSgtKGV2ZW50LmR4IC8gNSkgKiBzcGVlZCwgKGV2ZW50LmR5IC8gNSkgKiBzcGVlZCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Nb3VzZURvd24oZXZlbnQ6IHBjeC5Nb3VzZUV2ZW50KSB7XHJcblxyXG4gICAgICAgIC8vIFdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyBjbGlja2VkIHRyeSBhbmQgY2FwdHVyZSB0aGUgcG9pbnRlclxyXG4gICAgICAgIGlmICghdGhpcy5tb2RlICYmICFwYy5Nb3VzZS5pc1BvaW50ZXJMb2NrZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5tb3VzZSEuZW5hYmxlUG9pbnRlckxvY2soKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IHBjLk1PVVNFQlVUVE9OX1JJR0hUKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmlnaHREb3duID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gcGMuTU9VU0VCVVRUT05fTUlERExFKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWlkZGxlRG93biA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIG9uTW91c2VVcChldmVudDogcGN4Lk1vdXNlRXZlbnQpIHtcclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gcGMuTU9VU0VCVVRUT05fUklHSFQpIHtcclxuICAgICAgICAgICAgdGhpcy5yaWdodERvd24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IHBjLk1PVVNFQlVUVE9OX01JRERMRSkge1xyXG4gICAgICAgICAgICB0aGlzLm1pZGRsZURvd24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZseUNhbWVyYTtcclxuZXhwb3J0IGNvbnN0IGZseUNhbWVyYVNjcmlwdE5hbWUgPSAnZmx5Q2FtZXJhJztcclxuXHJcbnBjLnJlZ2lzdGVyU2NyaXB0KEZseUNhbWVyYSwgZmx5Q2FtZXJhU2NyaXB0TmFtZSk7XHJcblxyXG5GbHlDYW1lcmEuYXR0cmlidXRlcy5hZGQoJ21vYmlsZUNvbnRyb2xzJywge1xyXG4gICAgdHlwZTogJ2VudGl0eScsXHJcbn0pO1xyXG5cclxuRmx5Q2FtZXJhLmF0dHJpYnV0ZXMuYWRkKCdzcGVlZCcsIHtcclxuICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgZGVmYXVsdDogMTBcclxufSk7XHJcblxyXG5GbHlDYW1lcmEuYXR0cmlidXRlcy5hZGQoJ3Nsb3dTcGVlZCcsIHtcclxuICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgZGVmYXVsdDogMVxyXG59KTtcclxuXHJcbkZseUNhbWVyYS5hdHRyaWJ1dGVzLmFkZCgnZmFzdFNwZWVkJywge1xyXG4gICAgdHlwZTogJ251bWJlcicsXHJcbiAgICBkZWZhdWx0OiAyMFxyXG59KTtcclxuXHJcbkZseUNhbWVyYS5hdHRyaWJ1dGVzLmFkZCgnc2Vuc2l0aXZpdHknLCB7XHJcbiAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgIG1pbjogMSxcclxuICAgIGRlZmF1bHQ6IDVcclxufSk7XHJcblxyXG5GbHlDYW1lcmEuYXR0cmlidXRlcy5hZGQoJ21vZGUnLCB7XHJcbiAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgIGRlZmF1bHQ6IDAsXHJcbiAgICBlbnVtOiBbe1xyXG4gICAgICAgIFwiTG9ja1wiOiAwXHJcbiAgICB9LCB7XHJcbiAgICAgICAgXCJEcmFnXCI6IDFcclxuICAgIH1dXHJcbn0pOyIsImNsYXNzIEZwc0NvdW50ZXIgZXh0ZW5kcyBwYy5TY3JpcHRUeXBlIHtcclxuXHJcbiAgICBmcHM6IHsgdGljaygpOiB2b2lkIH0gfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb25zdHIgPSAod2luZG93IGFzIGFueSkuRlBTTWV0ZXI7XHJcblxyXG4gICAgICAgIGlmIChjb25zdHIpIHtcclxuICAgICAgICAgICAgdGhpcy5mcHMgPSBuZXcgY29uc3RyKHtcclxuICAgICAgICAgICAgICAgIGhlYXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBncmFwaDogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZwcz8udGljaygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGcHNDb3VudGVyO1xyXG5leHBvcnQgY29uc3QgZnBzQ291bnRlclNjcmlwdE5hbWUgPSAnRnBzQ291bnRlcic7XHJcblxyXG5wYy5yZWdpc3RlclNjcmlwdChGcHNDb3VudGVyLCBmcHNDb3VudGVyU2NyaXB0TmFtZSk7IiwiOygoKSA9PiB7XHJcbiAgICBpZiAod2luZG93Ll9fX2FtZF9fX3JlcXVpcmVSZXNvbHZlcikge1xyXG4gICAgICAgIHdpbmRvdy5fX19hbWRfX19yZXF1aXJlUmVzb2x2ZXIoKTtcclxuICAgIH1cclxufSkoKTsiXX0=